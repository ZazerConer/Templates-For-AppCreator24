!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.dashjs=t():e.dashjs=t()}(self,function(){return r={"./externals/base64.js":function(e,t){var o,u,r,n={encode:function(e){for(var t=[],r=0;r<e.length;++r){var n=e.charCodeAt(r);n<128?t.push(n):(n<2048?t.push(192|n>>6):(n<65536?t.push(224|n>>12):(t.push(240|n>>18),t.push(128|63&n>>12)),t.push(128|63&n>>6)),t.push(128|63&n))}return t},decode:function(e){for(var t=[],r=0;r<e.length;){var n=e[r++];n<128||(n<224?(n=(31&n)<<6,n|=63&e[r++]):n=n<240?(n=(15&n)<<12,(n|=(63&e[r++])<<6)|63&e[r++]):(n=(7&n)<<18,(n=(n|=(63&e[r++])<<12)|(63&e[r++])<<6)|63&e[r++])),t.push(String.fromCharCode(n))}return t.join("")}},i={};function l(e){for(var t=0,r=[],n=0|e.length/3;0<n--;){var i=(e[t]<<16)+(e[t+1]<<8)+e[t+2];t+=3,r.push(o.charAt(63&i>>18)),r.push(o.charAt(63&i>>12)),r.push(o.charAt(63&i>>6)),r.push(o.charAt(63&i))}return 2==e.length-t?(i=(e[t]<<16)+(e[t+1]<<8),r.push(o.charAt(63&i>>18)),r.push(o.charAt(63&i>>12)),r.push(o.charAt(63&i>>6)),r.push("=")):1==e.length-t&&(i=e[t]<<16,r.push(o.charAt(63&i>>18)),r.push(o.charAt(63&i>>12)),r.push("==")),r.join("")}function c(e){for(var t=0,r=[],n=0|e.length/4;0<n--;){var i=(u[e.charCodeAt(t)]<<18)+(u[e.charCodeAt(t+1)]<<12)+(u[e.charCodeAt(t+2)]<<6)+u[e.charCodeAt(t+3)];r.push(255&i>>16),r.push(255&i>>8),r.push(255&i),t+=4}return r&&("="==e.charAt(t-2)?(r.pop(),r.pop()):"="==e.charAt(t-1)&&r.pop()),r}o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=function(){for(var e=[],t=0;t<o.length;++t)e[o.charCodeAt(t)]=t;return e["=".charCodeAt(0)]=0,e}(),r={encode:function(e){for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t},decode:function(e){for(var t=0;t<s.length;++t)a[t]=String.fromCharCode(a[t]);return a.join("")}},i.decodeArray=function(e){e=c(e);return new Uint8Array(e)},i.encodeASCII=function(e){e=r.encode(e);return l(e)},i.decodeASCII=function(e){e=c(e);return r.decode(e)},i.encode=function(e){e=n.encode(e);return l(e)},i.decode=function(e){e=c(e);return n.decode(e)},t.decode=i.decode,t.decodeArray=i.decodeArray,t.encode=i.encode,t.encodeASCII=i.encodeASCII},"./externals/cea608-parser.js":function(e,t){!function(e){"use strict";function o(e){var t=e;return l.hasOwnProperty(e)&&(t=l[e]),String.fromCharCode(t)}function s(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].toString(16));return t}function u(e,t,r,n,i){this.foreground=e||"white",this.underline=t||!1,this.italics=r||!1,this.background=n||"black",this.flash=i||!1}function t(e,t,r,n,i,a){this.uchar=e||" ",this.penState=new u(t,r,n,i,a)}function r(){this.chars=[];for(var e=0;e<32;e++)this.chars.push(new t);this.pos=0,this.currPenState=new u}function n(){this.rows=[];for(var e=0;e<15;e++)this.rows.push(new r);this.currRow=14,this.nrRollUpRows=null,this.reset()}function i(e,t){this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new n,this.nonDisplayedMemory=new n,this.lastOutputScreen=new n,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}function a(e,t,r){this.field=e||1,this.outputs=[t,r],this.channels=[new i(1,t),new i(2,r)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}var l={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},c={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},f={17:2,18:4,21:6,22:8,23:10,19:13,20:15},d={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},g={25:2,26:4,29:6,30:8,31:10,27:13,28:15},m=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],h={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){var r=this.verboseFilter[e];this.verboseLevel>=r&&console.log(this.time+" ["+e+"] "+t)}};u.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(e){for(var t=["foreground","underline","italics","background","flash"],r=0;r<t.length;r++){var n=t[r];e.hasOwnProperty(n)&&(this[n]=e[n])}},isDefault:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},equals:function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},copy:function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}},t.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(e,t){this.uchar=e,this.penState.copy(t)},setPenState:function(e){this.penState.copy(e)},equals:function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},copy:function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},isEmpty:function(){return" "===this.uchar&&this.penState.isDefault()}},r.prototype={equals:function(e){for(var t=!0,r=0;r<32;r++)if(!this.chars[r].equals(e.chars[r])){t=!1;break}return t},copy:function(e){for(var t=0;t<32;t++)this.chars[t].copy(e.chars[t])},isEmpty:function(){for(var e=!0,t=0;t<32;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},setCursor:function(e){this.pos!==e&&(this.pos=e),this.pos<0?(h.log("ERROR","Negative cursor position "+this.pos),this.pos=0):32<this.pos&&(h.log("ERROR","Too large cursor position "+this.pos),this.pos=32)},moveCursor:function(e){var t=this.pos+e;if(1<e)for(var r=this.pos+1;r<t+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(t)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(e){144<=e&&this.backSpace();var t=o(e);32<=this.pos?h.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},clearFromPos:function(e){for(var t=e;t<32;t++)this.chars[t].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var e=[],t=!0,r=0;r<32;r++){var n=this.chars[r].uchar;" "!==n&&(t=!1),e.push(n)}return t?"":e.join("")},setPenStyles:function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}},n.prototype={reset:function(){for(var e=0;e<15;e++)this.rows[e].clear();this.currRow=14},equals:function(e){for(var t=!0,r=0;r<15;r++)if(!this.rows[r].equals(e.rows[r])){t=!1;break}return t},copy:function(e){for(var t=0;t<15;t++)this.rows[t].copy(e.rows[t])},isEmpty:function(){for(var e=!0,t=0;t<15;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(e){this.rows[this.currRow].insertChar(e)},setPen:function(e){this.rows[this.currRow].setPenStyles(e)},moveCursor:function(e){this.rows[this.currRow].moveCursor(e)},setCursor:function(e){h.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)},setPAC:function(e){h.log("INFO","pacData = "+JSON.stringify(e));var t,r=e.row-1,r=(this.nrRollUpRows&&r<this.nrRollUpRows-1&&(r=this.nrRollUpRows-1),this.currRow=r,this.rows[this.currRow]),r=(null!==e.indent&&(t=e.indent,t=Math.max(t-1,0),r.setCursor(e.indent),e.color=r.chars[t].penState.foreground),{foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1});this.setPen(r)},setBkgData:function(e){h.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},setRollUpRows:function(e){this.nrRollUpRows=e},rollUp:function(){var e;null===this.nrRollUpRows?h.log("DEBUG","roll_up but nrRollUpRows not set yet"):(h.log("TEXT",this.getDisplayText()),e=this.currRow+1-this.nrRollUpRows,(e=this.rows.splice(e,1)[0]).clear(),this.rows.splice(this.currRow,0,e),h.log("INFO","Rolling up"))},getDisplayText:function(e){e=e||!1;for(var t=[],r="",n=0;n<15;n++){var i=this.rows[n].getTextString();i&&(e?t.push("Row "+(n+1)+': "'+i+'"'):t.push(i.trim()))}return r=0<t.length?e?"["+t.join(" | ")+"]":t.join("\n"):r},getTextAndFormat:function(){return this.rows}},i.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(e){this.outputFilter=e},setPAC:function(e){this.writeScreen.setPAC(e)},setBkgData:function(e){this.writeScreen.setBkgData(e)},setMode:function(e){e!==this.mode&&(this.mode=e,h.log("INFO","MODE="+e),"MODE_POP-ON"==this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},insertChars:function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";h.log("INFO",r+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(h.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){h.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){h.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){h.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(e){h.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},cc_FON:function(){h.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){h.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){h.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){h.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){h.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){h.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){h.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){var e;h.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode&&(e=this.displayedMemory,this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,h.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())),this.outputDataUpdate()},cc_TO:function(e){h.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},cc_MIDROW:function(e){var t={flash:!1};t.underline=e%2==1,t.italics=46<=e,t.italics?t.foreground="white":(e=Math.floor(e/2)-16,t.foreground=["white","green","blue","cyan","red","yellow","magenta"][e]),h.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},outputDataUpdate:function(){var e=h.time;null!==e&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(e){!this.outputFilter||this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e)}},a.prototype={getHandler:function(e){return this.channels[e].getHandler()},setHandler:function(e,t){this.channels[e].setHandler(t)},addData:function(e,t){var r,n=!1;this.lastTime=e,h.setTime(e);for(var i=0;i<t.length;i+=2){var a=127&t[i],o=127&t[i+1];16<=a&&a<=31&&a===this.lastCmdA&&o===this.lastCmdB?(this.lastCmdA=null,this.lastCmdB=null,h.log("DEBUG","Repeated command ("+s([a,o])+") is dropped")):0==a&&0==o?this.dataCounters.padding+=2:(h.log("DATA","["+s([t[i],t[i+1]])+"] -> ("+s([a,o])+")"),(r=(r=(r=(r=this.parseCmd(a,o))||this.parseMidrow(a,o))||this.parsePAC(a,o))||this.parseBackgroundAttributes(a,o))||(n=this.parseChars(a,o))&&(this.currChNr&&0<=this.currChNr?this.channels[this.currChNr-1].insertChars(n):h.log("WARNING","No channel found yet. TEXT-MODE?")),r?this.dataCounters.cmd+=2:n?this.dataCounters.char+=2:(this.dataCounters.other+=2,h.log("WARNING","Couldn't parse cleaned data "+s([a,o])+" orig: "+s([t[i],t[i+1]]))))}},parseCmd:function(e,t){var r=null;if(!((20===e||21===e||28===e||29===e)&&32<=t&&t<=47)&&!((23===e||31===e)&&33<=t&&t<=35))return!1;var r=20===e||21===e||23===e?1:2,n=this.channels[r-1];return 20===e||21===e||28===e||29===e?32===t?n.cc_RCL():33===t?n.cc_BS():34===t?n.cc_AOF():35===t?n.cc_AON():36===t?n.cc_DER():37===t?n.cc_RU(2):38===t?n.cc_RU(3):39===t?n.cc_RU(4):40===t?n.cc_FON():41===t?n.cc_RDC():42===t?n.cc_TR():43===t?n.cc_RTD():44===t?n.cc_EDM():45===t?n.cc_CR():46===t?n.cc_ENM():47===t&&n.cc_EOC():n.cc_TO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=r,!0},parseMidrow:function(e,t){var r=null;if((17===e||25===e)&&32<=t&&t<=47){if((r=17===e?1:2)!==this.currChNr)return h.log("ERROR","Mismatch channel in midrow parsing"),!1;r=this.channels[r-1];return r.insertChars([32]),r.cc_MIDROW(t),h.log("DEBUG","MIDROW ("+s([e,t])+")"),this.lastCmdA=e,this.lastCmdB=t,!0}return!1},parsePAC:function(e,t){var r=null;if(!((17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127)&&!((16===e||24===e)&&64<=t&&t<=95))return!1;var n=e<=23?1:2,r=(64<=t&&t<=95?1==n?c:d:1==n?f:g)[e],r=this.interpretPAC(r,t);return this.channels[n-1].setPAC(r),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},interpretPAC:function(e,t){var r=t,e={color:null,italics:!1,indent:null,underline:!1,row:e},r=95<t?t-96:t-64;return e.underline=1==(1&r),r<=13?e.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(e.italics=!0,e.color="white"):e.indent=4*Math.floor((r-16)/2),e},parseChars:function(e,t){var r,n=null,i=null,a=null;return 17<=(a=25<=e?(n=2,e-8):(n=1,e))&&a<=19?(r=t,h.log("INFO","Special char '"+o(r=17===a?t+80:18===a?t+112:t+144)+"' in channel "+n),i=[r],this.lastCmdA=e,this.lastCmdB=t):32<=e&&e<=127&&(i=0===t?[e]:[e,t],this.lastCmdA=null,this.lastCmdB=null),i&&(a=s(i),h.log("DEBUG","Char codes =  "+a.join(","))),i},parseBackgroundAttributes:function(e,t){var r,n;return((16===e||24===e)&&32<=t&&t<=47||(23===e||31===e)&&45<=t&&t<=47)&&(r={},16===e||24===e?(n=Math.floor((t-32)/2),r.background=m[n],t%2==1&&(r.background=r.background+"_semi")):45===t?r.background="transparent":(r.foreground="black",47===t&&(r.underline=!0)),this.channels[(e<24?1:2)-1].setBkgData(r),this.lastCmdA=e,this.lastCmdB=t,!0)},reset:function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)}};e.logger=h,e.PenState=u,e.CaptionScreen=n,e.Cea608Parser=a,e.findCea608Nalus=function(e,t,r){for(var n,i=t,a=[];i<t+r;){if(n=e.getUint32(i),6==(31&e.getUint8(i+4)))for(var o=i+5,s=-1;o<i+4+n-1;){for(var s=0,u=255;255===u;)s+=u=e.getUint8(o),o++;for(var l=0,u=255;255===u;)l+=u=e.getUint8(o),o++;!function(e,t,r,n){if(4!==e||t<8)return null;var e=r.getUint8(n),t=r.getUint16(n+1),i=r.getUint32(n+3),r=r.getUint8(n+7);return 181==e&&49==t&&1195456820==i&&3==r}(s,l,e,o)||a.push([o,l]),o+=l}i+=n+4}return a},e.extractCea608DataFromRange=function(e,t){var r=t[0],n=[[],[]],i=31&e.getUint8(r+=8);r+=2;for(var a=0;a<i;a++){var o=e.getUint8(r),s=4&o,o=3&o,u=(r++,e.getUint8(r)),l=(r++,e.getUint8(r));r++,s&&(127&u)+(127&l)!=0&&(0==o?(n[0].push(u),n[0].push(l)):1==o&&(n[1].push(u),n[1].push(l)))}return n}}(t)},"./externals/xml2json.js":function(e,t,r){"use strict";r.r(t),t.default=function(R){void 0===(R=R||{}).escapeMode&&(R.escapeMode=!0),void 0===R.attributePrefix&&(R.attributePrefix="_"),R.arrayAccessForm=R.arrayAccessForm||"none",R.emptyNodeForm=R.emptyNodeForm||"text",void 0===R.enableToStringFunc&&(R.enableToStringFunc=!0),R.arrayAccessFormPaths=R.arrayAccessFormPaths||[],void 0===R.skipEmptyTextNodesForObj&&(R.skipEmptyTextNodesForObj=!0),void 0===R.stripWhitespaces&&(R.stripWhitespaces=!0),R.datetimeAccessFormPaths=R.datetimeAccessFormPaths||[],void 0===R.useDoubleQuotes&&(R.useDoubleQuotes=!1),R.xmlElementsFilter=R.xmlElementsFilter||[],R.jsonPropertiesFilter=R.jsonPropertiesFilter||[],void 0===R.keepCData&&(R.keepCData=!1),void 0===R.ignoreRoot&&(R.ignoreRoot=!1);var I={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};function w(e){var t=e.localName;return t=null!=(t=null==t?e.baseName:t)&&""!=t?t:e.nodeName}function u(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e}function C(e,t,r,n){for(var i=0;i<e.length;i++){var a=e[i];if("string"==typeof a){if(a==n)break}else if(a instanceof RegExp){if(a.test(n))break}else if("function"==typeof a&&a(t,r,n))break}return i!=e.length}function N(e,t,r){"property"===R.arrayAccessForm&&(e[t]instanceof Array?e[t+"_asArray"]=e[t]:e[t+"_asArray"]=[e[t]]),!(e[t]instanceof Array)&&0<R.arrayAccessFormPaths.length&&C(R.arrayAccessFormPaths,e,t,r)&&(e[t]=[e[t]])}function D(e){var t=e.split(/[-T:+Z]/g),r=new Date(t[0],t[1]-1,t[2]),n=t[5].split(".");return r.setHours(t[3],t[4],n[0]),1<n.length&&r.setMilliseconds(n[1]),t[6]&&t[7]?(n=60*t[6]+Number(t[7]),n=0+("-"==(/\d\d-\d\d:\d\d$/.test(e)?"-":"+")?-1*n:n),r.setMinutes(r.getMinutes()-n-r.getTimezoneOffset())):-1!==e.indexOf("Z",e.length-1)&&(r=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()))),r}function M(e,t){if(e.nodeType==I.DOCUMENT_NODE){for(var r=new Object,n=e.childNodes,i=0;i<n.length;i++)(o=n[i]).nodeType==I.ELEMENT_NODE&&(R.ignoreRoot?r=M(o):(r={})[c=w(o)]=M(o));return r}if(e.nodeType==I.ELEMENT_NODE){(r=new Object).__cnt=0;for(var a=[],n=e.childNodes,i=0;i<n.length;i++){var o,s,u,l,c=w(o=n[i]);o.nodeType!=I.COMMENT_NODE&&(T=r,b=o.nodeType,A=s=t+"."+(S=c),b==I.ELEMENT_NODE&&0<R.xmlElementsFilter.length&&!C(R.xmlElementsFilter,T,S,A)||(r.__cnt++,null==r[c]?(u=M(o,s),"#text"==c&&!/[^\s]/.test(u)||((l={})[c]=u,a.push(l)),r[c]=u,N(r,c,s)):(null==r[c]||r[c]instanceof Array||(r[c]=[r[c]],N(r,c,s)),u=M(o,s),"#text"==c&&!/[^\s]/.test(u)||((l={})[c]=u,a.push(l)),r[c][r[c].length]=u)))}r.__children=a;for(var f=w(e),d=0;d<e.attributes.length;d++){for(var g=e.attributes[d],m=(r.__cnt++,g.value),h=0,p=R.matchers.length;h<p;h++){var y=R.matchers[h];y.test(g,f)&&(m=y.converter(g.value))}r[R.attributePrefix+g.name]=m}var E=e.prefix;return null!=E&&""!=E&&(r.__cnt++,r.__prefix=E),null!=r["#text"]&&(r.__text=r["#text"],r.__text instanceof Array&&(r.__text=r.__text.join("\n")),R.stripWhitespaces&&(r.__text=r.__text.trim()),delete r["#text"],"property"==R.arrayAccessForm&&delete r["#text_asArray"],r.__text=(E=r.__text,v=t+"."+(_=c),0<R.datetimeAccessFormPaths.length?(v=v.split(".#")[0],C(R.datetimeAccessFormPaths,E,_,v)?D(E):E):E)),null!=r["#cdata-section"]&&(r.__cdata=r["#cdata-section"],delete r["#cdata-section"],"property"==R.arrayAccessForm&&delete r["#cdata-section_asArray"]),0==r.__cnt&&"text"==R.emptyNodeForm?r="":1==r.__cnt&&null!=r.__text?r=r.__text:1!=r.__cnt||null==r.__cdata||R.keepCData?1<r.__cnt&&null!=r.__text&&R.skipEmptyTextNodesForObj&&(R.stripWhitespaces&&""==r.__text||""==r.__text.trim())&&delete r.__text:r=r.__cdata,delete r.__cnt,!R.enableToStringFunc||null==r.__text&&null==r.__cdata||(r.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),r}if(e.nodeType==I.TEXT_NODE||e.nodeType==I.CDATA_SECTION_NODE)return e.nodeValue;var _,v,T,b,S,A}function s(e,t,r,n){var i="<"+(null!=e&&null!=e.__prefix?e.__prefix+":":"")+t;if(null!=r)for(var a=0;a<r.length;a++){var o=r[a],s=e[o];R.escapeMode&&(s=u(s)),i+=" "+o.substr(R.attributePrefix.length)+"=",R.useDoubleQuotes?i+='"'+s+'"':i+="'"+s+"'"}return i+=n?"/>":">"}function l(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function c(e,t){return"property"==R.arrayAccessForm&&(r=t.toString(),n="_asArray",-1!==r.indexOf(n,r.length-n.length))||0==t.toString().indexOf(R.attributePrefix)||0==t.toString().indexOf("__")||e[t]instanceof Function;var r,n}function f(e){var t=0;if(e instanceof Object)for(var r in e)c(e,r)||t++;return t}function d(e){var t=[];if(e instanceof Object)for(var r in e)-1==r.toString().indexOf("__")&&0==r.toString().indexOf(R.attributePrefix)&&t.push(r);return t}function g(e){var t,r,n="";return e instanceof Object?n+=(r="",null!=(t=e).__cdata&&(r+="<![CDATA["+t.__cdata+"]]>"),null!=t.__text&&(R.escapeMode?r+=u(t.__text):r+=t.__text),r):null!=e&&(R.escapeMode?n+=u(e):n+=e),n}function m(e,t){return""===e?t:e+"."+t}function h(e,t){var r,n,i,a="";if(0<f(e))for(var o in e)c(e,o)||""!=t&&(r=e,i=m(t,n=o),0!=R.jsonPropertiesFilter.length&&""!=i&&!C(R.jsonPropertiesFilter,r,n,i))||(n=d(r=e[o]),null==r?a+=s(r,o,n,!0):r instanceof Object?r instanceof Array?a+=function(e,t,r,n){var i="";if(0==e.length)i+=s(e,t,r,!0);else for(var a=0;a<e.length;a++)i=(i=(i+=s(e[a],t,d(e[a]),!1))+h(e[a],m(n,t)))+l(e[a],t);return i}(r,o,n,t):r instanceof Date?a=(a=(a+=s(r,o,n,!1))+r.toISOString())+l(r,o):0<f(r)||null!=r.__text||null!=r.__cdata?a=(a=(a+=s(r,o,n,!1))+h(r,m(t,o)))+l(r,o):a+=s(r,o,n,!0):a=(a=(a+=s(r,o,n,!1))+g(r))+l(r,o));return a+=g(e)}this.parseXmlString=function(e){var t;window.ActiveXObject||0 in window;if(void 0===e)return null;if(window.DOMParser){var r=new window.DOMParser;try{0<(t=r.parseFromString(e,"text/xml")).getElementsByTagNameNS("*","parsererror").length&&(t=null)}catch(e){t=null}}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),(t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e);return t},this.asArray=function(e){return void 0===e||null==e?[]:e instanceof Array?e:[e]},this.toXmlDateTime=function(e){return e instanceof Date?e.toISOString():"number"==typeof e?new Date(e).toISOString():null},this.asDateTime=function(e){return"string"==typeof e?D(e):e},this.xml2json=function(e){return M(e)},this.xml_str2json=function(e){e=this.parseXmlString(e);return null!=e?this.xml2json(e):null},this.json2xml_str=function(e){return h(e,"")},this.json2xml=function(e){e=this.json2xml_str(e);return this.parseXmlString(e)},this.getVersion=function(){return"1.2.0"}}},"./index_mediaplayerOnly.js":function(e,t,r){"use strict";r.r(t),r.d(t,{Debug:function(){return a.default},FactoryMaker:function(){return i.default},MediaPlayer:function(){return n.default}});var n=r("./src/streaming/MediaPlayer.js"),i=r("./src/core/FactoryMaker.js"),a=r("./src/core/Debug.js"),o=r("./src/core/Version.js"),r=(r("./node_modules/es6-promise/auto.js"),"undefined"!=typeof window&&window||r.g),s=r.dashjs;(s=s||(r.dashjs={})).MediaPlayer=n.default,s.FactoryMaker=i.default,s.Debug=a.default,s.Version=(0,o.getVersionString)(),t.default=s},"./src/core/Debug.js":function(e,t,r){"use strict";r.r(t);var i=r("./src/core/EventBus.js"),g=r("./src/core/events/Events.js"),r=r("./src/core/FactoryMaker.js");function n(e){e=e||{};var s,u,l,t=this.context,c=(0,i.default)(t).getInstance(),f=e.settings,d=[];function r(e){return(e&&e.bind?e:window.console.log).bind(window.console)}function n(e,t){var r,n="";s&&(r=(new Date).getTime(),n+="["+(r-l)+"]"),u&&t&&t.getClassName&&(n+="["+t.getClassName()+"]",t.getType&&(n+="["+t.getType()+"]")),0<n.length&&(n+=" ");for(var i=arguments.length,a=new Array(2<i?i-2:0),o=2;o<i;o++)a[o-2]=arguments[o];Array.apply(null,a).forEach(function(e){n+=e+" "}),d[e]&&f&&f.get().debug.logLevel>=e&&d[e](n),f&&f.get().debug.dispatchEvent&&c.trigger(g.default.LOG,{message:n,level:e})}return t={getLogger:function(e){return{fatal:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.apply(void 0,[1,this].concat(t))}.bind(e),error:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.apply(void 0,[2,this].concat(t))}.bind(e),warn:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.apply(void 0,[3,this].concat(t))}.bind(e),info:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.apply(void 0,[4,this].concat(t))}.bind(e),debug:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.apply(void 0,[5,this].concat(t))}.bind(e)}},setLogTimestampVisible:function(e){s=e},setCalleeNameVisible:function(e){u=e}},u=s=!0,l=(new Date).getTime(),"undefined"!=typeof window&&window.console&&(d[1]=r(window.console.error),d[2]=r(window.console.error),d[3]=r(window.console.warn),d[4]=r(window.console.info),d[5]=r(window.console.debug)),t}n.__dashjs_factory_name="Debug";var a=r.default.getSingletonFactory(n);a.LOG_LEVEL_NONE=0,a.LOG_LEVEL_FATAL=1,a.LOG_LEVEL_ERROR=2,a.LOG_LEVEL_WARNING=3,a.LOG_LEVEL_INFO=4,a.LOG_LEVEL_DEBUG=5,r.default.updateSingletonFactory(n.__dashjs_factory_name,a),t.default=a},"./src/core/EventBus.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/streaming/MediaPlayerEvents.js");function a(){var o={};function s(e,r,n){var i=-1;return o[e]&&o[e].some(function(e,t){if(e&&e.callback===r&&(!n||n===e.scope))return i=t,!0}),i}return{on:function(r,e,t){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};if(!r)throw new Error("event type cannot be null or undefined");if(!e||"function"!=typeof e)throw new Error("listener must be a function: "+e);var i,a=n.priority||0;0<=s(r,e,t)||(o[r]=o[r]||[],i={callback:e,scope:t,priority:a},t&&t.getStreamId&&(i.streamId=t.getStreamId()),t&&t.getType&&(i.mediaType=t.getType()),n&&n.mode&&(i.mode=n.mode),o[r].some(function(e,t){if(e&&a>e.priority)return o[r].splice(t,0,i),!0})||o[r].push(i))},off:function(e,t,r){e&&t&&o[e]&&((t=s(e,t,r))<0||(o[e][t]=null))},trigger:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(e&&o[e]){if((t=t||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");t.type=e,r.streamId&&(t.streamId=r.streamId),r.mediaType&&(t.mediaType=r.mediaType),o[e].filter(function(e){return!!e&&((!r.streamId||!e.streamId||e.streamId===r.streamId)&&((!r.mediaType||!e.mediaType||e.mediaType===r.mediaType)&&!(r.mode&&e.mode&&e.mode!==r.mode||!e.mode&&r.mode&&r.mode===i.default.EVENT_MODE_ON_RECEIVE)))}).forEach(function(e){return e&&e.callback.call(e.scope,t)})}},reset:function(){o={}}}}a.__dashjs_factory_name="EventBus";r=n.default.getSingletonFactory(a);r.EVENT_PRIORITY_LOW=0,r.EVENT_PRIORITY_HIGH=5e3,n.default.updateSingletonFactory(a.__dashjs_factory_name,r),t.default=r},"./src/core/FactoryMaker.js":function(e,t,r){"use strict";r.r(t);a=[],n={},i={};var u,a,n,i,r=u={extend:function(e,t,r,n){!n[e]&&t&&(n[e]={instance:t,override:r})},getSingletonInstance:o,setSingletonInstance:function(e,t,r){for(var n in a){var i=a[n];if(i.context===e&&i.name===t)return void(a[n].instance=r)}a.push({name:t,context:e,instance:r})},deleteSingletonInstances:function(t){a=a.filter(function(e){return e.context!==t})},getSingletonFactory:function(r){var e=s(r.__dashjs_factory_name,n);return e||(n[r.__dashjs_factory_name]=e=function(e){var t;return void 0===e&&(e={}),{getInstance:function(){return(t=t||o(e,r.__dashjs_factory_name))||(t=c(r,e,arguments),a.push({name:r.__dashjs_factory_name,context:e,instance:t})),t}}}),e},getSingletonFactoryByName:function(e){return n[e]},updateSingletonFactory:function(e,t){l(e,t,n)},getClassFactory:function(t){var e=s(t.__dashjs_factory_name,i);return e||(i[t.__dashjs_factory_name]=e=function(e){return void 0===e&&(e={}),{create:function(){return c(t,e,arguments)}}}),e},getClassFactoryByName:function(e){return i[e]},updateClassFactory:function(e,t){l(e,t,i)}};function o(e,t){for(var r in a){r=a[r];if(r.context===e&&r.name===t)return r.instance}return null}function s(e,t){return t[e]}function l(e,t,r){e in r&&(r[e]=t)}function c(e,t,r){var n,i=e.__dashjs_factory_name,a=t[i];if(a){var o,s=a.instance;if(!a.override)return s.apply({context:t,factory:u},r);for(o in n=e.apply({context:t},r),s=s.apply({context:t,factory:u,parent:n},r))n.hasOwnProperty(o)&&(n[o]=s[o])}else n=e.apply({context:t},r);return n.getClassName=function(){return i},n}t.default=r},"./src/core/Settings.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/core/FactoryMaker.js"),s=r("./src/core/Utils.js"),i=r("./src/core/Debug.js"),u=r("./src/streaming/constants/Constants.js"),l=r("./src/streaming/vo/metrics/HTTPRequest.js"),c=r("./src/core/EventBus.js"),f=r("./src/core/events/Events.js");function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}function a(){var e=this.context,a=(0,c.default)(e).getInstance(),o={"streaming.delay.liveDelay":f.default.SETTING_UPDATED_LIVE_DELAY,"streaming.delay.liveDelayFragmentCount":f.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,"streaming.liveCatchup.enabled":f.default.SETTING_UPDATED_CATCHUP_ENABLED,"streaming.liveCatchup.playbackRate.min":f.default.SETTING_UPDATED_PLAYBACK_RATE_MIN,"streaming.liveCatchup.playbackRate.max":f.default.SETTING_UPDATED_PLAYBACK_RATE_MAX},t={debug:{logLevel:i.default.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{abandonLoadTimeout:1e4,wallclockTimeUpdateInterval:100,manifestUpdateRetryInterval:100,cacheInitSegments:!1,applyServiceDescription:!0,applyProducerReferenceTime:!0,applyContentSteering:!0,eventControllerRefreshDelay:100,enableManifestDurationMismatchFix:!0,parseInbandPrft:!1,enableManifestTimescaleMismatchFix:!1,capabilities:{filterUnsupportedEssentialProperties:!0,useMediaCapabilitiesApi:!1},timeShiftBuffer:{calcFromSegmentTimeline:!1,fallbackToSegmentTimeline:!0},metrics:{maxListDepth:100},delay:{liveDelayFragmentCount:NaN,liveDelay:NaN,useSuggestedPresentationDelay:!0},protection:{keepProtectionMediaKeys:!1,ignoreEmeEncryptedEvent:!1,detectPlayreadyMessageFormat:!0},buffer:{enableSeekDecorrelationFix:!1,fastSwitchEnabled:!0,flushBufferAtTrackSwitch:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,initialBufferLevel:NaN,stableBufferTime:12,longFormContentDurationThreshold:600,stallThreshold:.3,useAppendWindow:!0,setStallState:!0,avoidCurrentTimeRangePruning:!1,useChangeTypeForTrackSwitch:!0,mediaSourceDurationInfinity:!0,resetSourceBuffersForTrackSwitch:!1},gaps:{jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,threshold:.3,enableSeekFix:!0,enableStallFix:!1,stallSeek:.1},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0,backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"https://time.akamai.com/?iso&ms"}},scheduling:{defaultTimeout:500,lowLatencyTimeout:0,scheduleWhilePaused:!0},text:{defaultEnabled:!0,extendSegmentedCues:!0,webvtt:{customRenderingEnabled:!1}},liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN},playbackBufferMin:.5,enabled:null,mode:u.default.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},saveLastMediaSettingsForCurrentStreamingSession:!0,cacheLoadThresholds:{video:50,audio:5},trackSwitchMode:{audio:u.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:u.default.TRACK_SWITCH_MODE_NEVER_REPLACE},selectionModeForInitialTrack:u.default.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY,fragmentRequestTimeout:2e4,fragmentRequestProgressTimeout:-1,manifestRequestTimeout:1e4,retryIntervals:(g(e={},l.HTTPRequest.MPD_TYPE,500),g(e,l.HTTPRequest.XLINK_EXPANSION_TYPE,500),g(e,l.HTTPRequest.MEDIA_SEGMENT_TYPE,1e3),g(e,l.HTTPRequest.INIT_SEGMENT_TYPE,1e3),g(e,l.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),g(e,l.HTTPRequest.INDEX_SEGMENT_TYPE,1e3),g(e,l.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE,1e3),g(e,l.HTTPRequest.LICENSE,1e3),g(e,l.HTTPRequest.OTHER_TYPE,1e3),g(e,"lowLatencyReductionFactor",10),e),retryAttempts:(g(e={},l.HTTPRequest.MPD_TYPE,3),g(e,l.HTTPRequest.XLINK_EXPANSION_TYPE,1),g(e,l.HTTPRequest.MEDIA_SEGMENT_TYPE,3),g(e,l.HTTPRequest.INIT_SEGMENT_TYPE,3),g(e,l.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),g(e,l.HTTPRequest.INDEX_SEGMENT_TYPE,3),g(e,l.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE,3),g(e,l.HTTPRequest.LICENSE,3),g(e,l.HTTPRequest.OTHER_TYPE,3),g(e,"lowLatencyMultiplyFactor",5),e),abr:{movingAverageMethod:u.default.MOVING_AVERAGE_SLIDING_WINDOW,ABRStrategy:u.default.ABR_STRATEGY_DYNAMIC,additionalAbrRules:{insufficientBufferRule:!0,switchHistoryRule:!0,droppedFramesRule:!0,abandonRequestsRule:!0},bandwidthSafetyFactor:.9,useDefaultABRRules:!0,useDeadTimeLatency:!0,limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},maxRepresentationRatio:{audio:1,video:1},initialBitrate:{audio:-1,video:-1},initialRepresentationRatio:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0},fetchThroughputCalculationMode:u.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING},cmcd:{enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:u.default.CMCD_MODE_QUERY,enabledKeys:["br","d","ot","tb","bl","dl","mtp","nor","nrr","su","bs","rtp","cid","pr","sf","sid","st","v"]},cmsd:{enabled:!1,abr:{applyMb:!1,etpWeightRatio:0}}},errors:{recoverAttempts:{mediaErrorDecode:5}}},r=s.default.clone(t);return{get:function(){return r},update:function(e){"object"===d(e)&&!function e(t,r,n){for(var i in t)t.hasOwnProperty(i)&&(r.hasOwnProperty(i)?"object"!==d(t[i])||t[i]instanceof Array||null===t[i]?(r[i]=s.default.clone(t[i]),o[n+i]&&a.trigger(o[n+i])):e(t[i],r[i],n.slice()+i+"."):console.error("Settings parameter "+n+i+" is not supported"))}(e,r,"")},reset:function(){r=s.default.clone(t)}}}a.__dashjs_factory_name="Settings";r=n.default.getSingletonFactory(a);t.default=r},"./src/core/Utils.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/path-browserify/index.js"),s=r.n(n),i=r("./node_modules/ua-parser-js/src/ua-parser.js");function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n=function(){function o(){if(!(this instanceof o))throw new TypeError("Cannot call a class as a function")}var e,t,r;return e=o,r=[{key:"mixin",value:function(e,t,r){var n,i={};if(e)for(var a in t)t.hasOwnProperty(a)&&(n=t[a],a in e&&(e[a]===n||a in i&&i[a]===n)||("object"===u(e[a])&&null!==e[a]?e[a]=o.mixin(e[a],n,r):e[a]=r(n)));return e}},{key:"clone",value:function(e){if(!e||"object"!==u(e))return e;if(e instanceof Array)for(var t=[],r=0,n=e.length;r<n;++r)r in e&&t.push(o.clone(e[r]));else t={};return o.mixin(t,e,o.clone)}},{key:"addAditionalQueryParameterToUrl",value:function(t,e){try{if(!e||0===e.length)return t;var r=new URL(t);return e.forEach(function(e){e.key&&e.value&&r.searchParams.set(e.key,e.value)}),r.href}catch(e){return t}}},{key:"parseHttpHeaders",value:function(e){var t={};if(!e)return t;for(var r=e.trim().split("\r\n"),n=0,i=r.length;n<i;n++){var a=r[n],o=a.indexOf(": ");0<o&&(t[a.substring(0,o)]=a.substring(o+2))}return t}},{key:"generateUuid",value:function(){var r=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=(r+16*Math.random())%16|0;return r=Math.floor(r/16),("x"==e?t:3&t|8).toString(16)})}},{key:"generateHashCode",value:function(e){var t=0;if(0===e.length)return t;for(var r=0;r<e.length;r++){t=(t<<5)-t+e.charCodeAt(r);t|=0}return t}},{key:"getRelativeUrl",value:function(e,t){try{var r=new URL(e),n=new URL(t);if(r.protocol=n.protocol,r.origin!==n.origin)return t;var i=s().relative(r.pathname.substr(0,r.pathname.lastIndexOf("/")),n.pathname.substr(0,n.pathname.lastIndexOf("/"))),a=0===i.length?1:0;return i+=n.pathname.substr(n.pathname.lastIndexOf("/")+a,n.pathname.length-1),n.pathname.length<i.length?n.pathname:i}catch(e){return t}}},{key:"parseUserAgent",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;try{var t=null===e&&"undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"";return(0,i.UAParser)(t)}catch(e){return{}}}},{key:"stringHasProtocol",value:function(e){return/(http(s?)):\/\//i.test(e)}}],(t=null)&&a(e.prototype,t),r&&a(e,r),o}();t.default=n},"./src/core/Version.js":function(e,t,r){"use strict";r.r(t),r.d(t,{getVersionString:function(){return i}});var n="4.7.2";function i(){return n}},"./src/core/errors/Errors.js":function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=s(r),t=(e=n?(e=s(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==i(e)&&"function"!=typeof e){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.r(t);r=new(function(e){var t=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e);var r=o(n);function n(){var e;if(this instanceof n)return(e=r.call(this)).MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,e.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,e.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,e.SEGMENT_BASE_LOADER_ERROR_CODE=15,e.TIME_SYNC_FAILED_ERROR_CODE=16,e.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,e.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,e.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,e.APPEND_ERROR_CODE=20,e.REMOVE_ERROR_CODE=21,e.DATA_UPDATE_FAILED_ERROR_CODE=22,e.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,e.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,e.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,e.DOWNLOAD_ERROR_ID_SIDX_CODE=26,e.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,e.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,e.DOWNLOAD_ERROR_ID_XLINK_CODE=29,e.MANIFEST_ERROR_ID_PARSE_CODE=31,e.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,e.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,e.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,e.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,e.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",e.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",e.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",e.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",e.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",e.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segment ranges from sidx",e.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize client and server time",e.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",e.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",e.APPEND_ERROR_MESSAGE="chunk is not defined",e.REMOVE_ERROR_MESSAGE="Removing data from the SourceBuffer",e.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",e.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",e.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",e.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",e.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ",e;throw new TypeError("Cannot call a class as a function")}return n}(r("./src/core/errors/ErrorsBase.js").default));t.default=r},"./src/core/errors/ErrorsBase.js":function(e,t,r){"use strict";function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.r(t);r=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}var t,r,n;return t=e,(r=[{key:"extend",value:function(e,t){if(e){var r,n=!!t&&t.override,i=!!t&&t.publicOnly;for(r in e)!e.hasOwnProperty(r)||this[r]&&!n||i&&-1===e[r].indexOf("public_")||(this[r]=e[r])}}}])&&i(t.prototype,r),n&&i(t,n),e}();t.default=r},"./src/core/events/CoreEvents.js":function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=s(r),t=(e=n?(e=s(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==i(e)&&"function"!=typeof e){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.r(t);r=function(e){var t=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e);var r=o(n);function n(){var e;if(this instanceof n)return(e=r.call(this)).ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",e.BUFFERING_COMPLETED="bufferingCompleted",e.BUFFER_CLEARED="bufferCleared",e.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",e.BUFFER_REPLACEMENT_STARTED="bufferReplacementStarted",e.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",e.CMSD_STATIC_HEADER="cmsdStaticHeader",e.CURRENT_TRACK_CHANGED="currentTrackChanged",e.DATA_UPDATE_COMPLETED="dataUpdateCompleted",e.INBAND_EVENTS="inbandEvents",e.INITIAL_STREAM_SWITCH="initialStreamSwitch",e.INIT_FRAGMENT_LOADED="initFragmentLoaded",e.INIT_FRAGMENT_NEEDED="initFragmentNeeded",e.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",e.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",e.LOADING_COMPLETED="loadingCompleted",e.LOADING_PROGRESS="loadingProgress",e.LOADING_DATA_PROGRESS="loadingDataProgress",e.LOADING_ABANDONED="loadingAborted",e.MANIFEST_UPDATED="manifestUpdated",e.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",e.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",e.QUOTA_EXCEEDED="quotaExceeded",e.SEGMENT_LOCATION_BLACKLIST_ADD="segmentLocationBlacklistAdd",e.SEGMENT_LOCATION_BLACKLIST_CHANGED="segmentLocationBlacklistChanged",e.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD="serviceLocationBlacklistAdd",e.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",e.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD="serviceLocationLocationBlacklistAdd",e.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED="serviceLocationLocationBlacklistChanged",e.SET_FRAGMENTED_TEXT_AFTER_DISABLED="setFragmentedTextAfterDisabled",e.SET_NON_FRAGMENTED_TEXT="setNonFragmentedText",e.SOURCE_BUFFER_ERROR="sourceBufferError",e.STREAMS_COMPOSED="streamsComposed",e.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",e.STREAM_REQUESTING_COMPLETED="streamRequestingCompleted",e.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",e.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",e.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",e.URL_RESOLUTION_FAILED="urlResolutionFailed",e.VIDEO_CHUNK_RECEIVED="videoChunkReceived",e.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",e.XLINK_ELEMENT_LOADED="xlinkElementLoaded",e.XLINK_READY="xlinkReady",e.SEEK_TARGET="seekTarget",e.SETTING_UPDATED_LIVE_DELAY="settingUpdatedLiveDelay",e.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT="settingUpdatedLiveDelayFragmentCount",e.SETTING_UPDATED_CATCHUP_ENABLED="settingUpdatedCatchupEnabled",e.SETTING_UPDATED_PLAYBACK_RATE_MIN="settingUpdatedPlaybackRateMin",e.SETTING_UPDATED_PLAYBACK_RATE_MAX="settingUpdatedPlaybackRateMax",e;throw new TypeError("Cannot call a class as a function")}return n}(r("./src/core/events/EventsBase.js").default);t.default=r},"./src/core/events/Events.js":function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=s(r),t=(e=n?(e=s(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==i(e)&&"function"!=typeof e){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.r(t);r=new(function(e){var t=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e);var r=o(n);function n(){var e=this,t=n;if(e instanceof t)return r.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return n}(r("./src/core/events/CoreEvents.js").default));t.default=r},"./src/core/events/EventsBase.js":function(e,t,r){"use strict";function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.r(t);r=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}var t,r,n;return t=e,(r=[{key:"extend",value:function(e,t){if(e){var r,n=!!t&&t.override,i=!!t&&t.publicOnly;for(r in e)!e.hasOwnProperty(r)||this[r]&&!n||i&&-1===e[r].indexOf("public_")||(this[r]=e[r])}}}])&&i(t.prototype,r),n&&i(t,n),e}();t.default=r},"./src/dash/DashAdapter.js":function(e,t,r){"use strict";r.r(t);var A=r("./src/dash/constants/DashConstants.js"),R=r("./src/dash/vo/RepresentationInfo.js"),I=r("./src/dash/vo/MediaInfo.js"),w=r("./src/dash/vo/StreamInfo.js"),C=r("./src/dash/vo/ManifestInfo.js"),N=r("./src/dash/vo/Event.js"),n=r("./src/core/FactoryMaker.js"),D=r("./src/dash/models/DashManifestModel.js"),M=r("./src/dash/models/PatchManifestModel.js"),i=r("./node_modules/bcp-47-normalize/index.js"),O=r.n(i);function a(){var e,y,a,c,f,E,o,t=this.context;function n(e,t,r){var n,i=y.getAdaptationsForType(c[0].mpd.manifest,e,t);if(!i||0===i.length)return null;if(1<i.length&&r){var a=g(r,t);if(f[r.id]&&f[r.id][t])for(var o=0,s=i.length;o<s;o++)if(d(f[r.id][t],a[o]))return i[o];for(var u=0,l=i.length;u<l;u++)if(n=i[u],y.getRolesForAdaptation(n).filter(function(e){return e.value===A.default.MAIN})[0])return i[u]}return i[0]}function d(e,t){if(!e||!t)return!1;var r=e.id===t.id,n=e.codec===t.codec,i=e.viewpoint===t.viewpoint,a=JSON.stringify(e.viewpointsWithSchemeIdUri)===JSON.stringify(t.viewpointsWithSchemeIdUri),o=e.lang===t.lang,s=e.roles.toString()===t.roles.toString(),u=JSON.stringify(e.rolesWithSchemeIdUri)===JSON.stringify(t.rolesWithSchemeIdUri),l=e.accessibility.toString()===t.accessibility.toString(),c=JSON.stringify(e.accessibilitiesWithSchemeIdUri)===JSON.stringify(t.accessibilitiesWithSchemeIdUri),f=e.audioChannelConfiguration.toString()===t.audioChannelConfiguration.toString(),e=JSON.stringify(e.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(t.audioChannelConfigurationsWithSchemeIdUri);return r&&n&&i&&a&&o&&s&&u&&l&&c&&f&&e}function s(e,t,r,n,i,a){var o,s,u,l=[];if(!n||0===n.length)return[];for(var c=y.getAdaptationsForPeriod(t),f=0,d=n.length;f<d;f++)if(o=n[f],u=y.getIndexForAdaptation(o,e,r.index),s=_(c[u]),a){for(var g=s.accessibility.length,m=0;m<g;m++)if(s){var h=s.accessibility[m];if(0===h.indexOf("cea-608:")){var p=h.substring(8).split(";");if("CC"===p[0].substring(0,2))for(m=0;m<p.length;m++)v(s=s||_.call(this,c[u]),p[m].substring(0,3),p[m].substring(4)),l.push(s),s=null;else for(m=0;m<p.length;m++)v(s=s||_.call(this,c[u]),"CC"+(m+1),p[m]),l.push(s),s=null}else 0===h.indexOf("cea-608")&&(v(s,E.CC1,"eng"),l.push(s),s=null)}}else i===E.IMAGE?(s.type=E.IMAGE,l.push(s),s=null):s&&l.push(s);return l}function g(e,t,r){var n=c,i=[];if(r)T(),n=u(r);else{if(!(0<c.length))return i;r=c[0].mpd.manifest}var a,n=h(e,n),i=s(r,n,e,y.getAdaptationsForType(r,e?e.index:null,t),t);return t===E.TEXT&&(a=y.getAdaptationsForType(r,e?e.index:null,E.VIDEO),i=i.concat(s(r,n,e,a,t,!0))),i}function u(e){e=r(e);return y.getRegularPeriods(e)}function r(e){e=l(e);return y.getMpd(e)}function i(){c=[],f={}}function l(e){return e||(0<c.length?c[0].mpd.manifest:null)}function m(e){try{var t=h(e.streamInfo,c),r=y.getAdaptationsForPeriod(t);return e&&e.streamInfo&&void 0!==e.streamInfo.id&&r?r[e.index]:null}catch(e){return null}}function h(e,t){for(var r=t.length,n=0;n<r;n++){var i=t[n];if(e&&e.id===i.id)return i}return null}function _(e){if(!e)return null;var t,r,n,i=new I.default,a=e.period.mpd.manifest.Period_asArray[e.period.index].AdaptationSet_asArray[e.index];return i.id=e.id,i.index=e.index,i.type=e.type,i.streamInfo=p(e.period),i.representationCount=y.getRepresentationCount(a),i.labels=y.getLabelsForAdaptation(a),i.lang=y.getLanguageForAdaptation(a),i.segmentAlignment=y.getSegmentAlignment(a),i.subSegmentAlignment=y.getSubSegmentAlignment(a),e=y.getViewpointForAdaptation(a),i.viewpoint=e.length?e[0].value:void 0,i.viewpointsWithSchemeIdUri=e,e=y.getAccessibilityForAdaptation(a),i.accessibility=e.map(function(e){var t=e.value,r=t;return e.schemeIdUri&&0<=e.schemeIdUri.search("cea-608")&&void 0!==o&&(r=t?"cea-608:"+t:"cea-608",i.embeddedCaptions=!0),r}),i.accessibilitiesWithSchemeIdUri=e,e=y.getAudioChannelConfigurationForAdaptation(a),i.audioChannelConfiguration=e.map(function(e){return e.value}),i.audioChannelConfigurationsWithSchemeIdUri=e,0===i.audioChannelConfiguration.length&&Array.isArray(a.Representation_asArray)&&0<a.Representation_asArray.length&&(e=y.getAudioChannelConfigurationForRepresentation(a.Representation_asArray[0]),i.audioChannelConfiguration=e.map(function(e){return e.value}),i.audioChannelConfigurationsWithSchemeIdUri=e),e=y.getRolesForAdaptation(a),i.roles=e.map(function(e){return e.value}),i.rolesWithSchemeIdUri=e,i.codec=y.getCodec(a),i.mimeType=y.getMimeType(a),i.contentProtection=y.getContentProtectionData(a),i.bitrateList=y.getBitrateListForAdaptation(a),i.selectionPriority=y.getSelectionPriority(a),i.contentProtection&&(e=i.contentProtection.map(function(e){return y.getKID(e)}).filter(function(e){return null!==e})).length&&(t=e[0],i.contentProtection.forEach(function(e){e.keyId=t})),i.isText=y.getIsText(a),i.supplementalProperties=y.getSupplementalPropertiesForAdaptation(a),(!i.supplementalProperties||0===Object.keys(i.supplementalProperties).length)&&Array.isArray(a.Representation_asArray)&&0<a.Representation_asArray.length&&(r=a.Representation_asArray.map(function(e){return y.getSupplementalPropertiesForRepresentation(e)})).every(function(e){return JSON.stringify(e)===JSON.stringify(r[0])})&&(i.supplementalProperties=r[0]),i.supplementalPropertiesAsArray=y.getSupplementalPropertiesAsArrayForAdaptation(a),(!i.supplementalPropertiesAsArray||0===i.supplementalPropertiesAsArray.length)&&Array.isArray(a.Representation_asArray)&&0<a.Representation_asArray.length&&(n=a.Representation_asArray.map(function(e){return y.getSupplementalPropertiesAsArrayForRepresentation(e)})).every(function(e){return JSON.stringify(e)===JSON.stringify(n[0])})&&(i.supplementalPropertiesAsArray=n[0]),i.isFragmented=y.getIsFragmented(a),i.isEmbedded=!1,i}function v(e,t,r){e.id=t,e.index=100+parseInt(t.substring(2,3)),e.type=E.TEXT,e.codec="cea-608-in-SEI",e.isEmbedded=!0,e.isFragmented=!1,e.lang=O()(r),e.roles=["caption"],e.rolesWithSchemeIdUri=[{schemeIdUri:"urn:mpeg:dash:role:2011",value:"caption"}]}function p(e){var t,r,n=new w.default;return n.id=e.id,n.index=e.index,n.start=e.start,n.duration=e.duration,n.manifestInfo=(t=e.mpd,(r=new C.default).dvrWindowSize=t.timeShiftBufferDepth,r.loadedTime=t.manifest.loadedTime,r.availableFrom=t.availabilityStartTime,r.minBufferTime=t.manifest.minBufferTime,r.maxFragmentDuration=t.maxSegmentDuration,r.duration=y.getDuration(t.manifest),r.isDynamic=y.getIsDynamic(t.manifest),r.serviceDescriptions=y.getServiceDescriptions(t.manifest),r.protocol=t.manifest.protocol,r),n.isLast=1===e.mpd.manifest.Period_asArray.length||Math.abs(n.start+n.duration-n.manifestInfo.duration)<1,n}function T(){if(!E)throw new Error("setConfig function has to be called previously")}function b(e){return 0<c.length?c[0].mpd.manifest.Period_asArray[e]:null}function S(e,t,r){var n,i,a,o,s;if(e)for(n=e.AdaptationSet_asArray,o=0;o<n.length;o+=1)for(a=n[o].Representation_asArray,s=0;s<a.length;s+=1)if(t===(i=a[s]).id)return r?s:i;return null}return e={getBandwidthForRepresentation:function(e,t){return(t=S(b(t),e))?t.bandwidth:null},getIndexForRepresentation:function(e,t){return null!==(t=S(t=b(t),e,!0))?t:-1},getMaxIndexForBufferType:function(e,t){var r,n,i,a,t=b(t),o=e;if(!t||!o)return-1;for(n=t.AdaptationSet_asArray,a=0;a<n.length;a+=1)if(r=n[a],i=r.Representation_asArray,y.getIsTypeOf(r,o))return i.length;return-1},convertRepresentationToRepresentationInfo:function(e){var t,r;return e?(t=new R.default,r=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index],r=y.getRepresentationFor(e.index,r),t.id=e.id,t.quality=e.index,t.bandwidth=y.getBandwidth(r),t.fragmentDuration=e.segmentDuration||(e.segments&&0<e.segments.length?e.segments[0].duration:NaN),t.MSETimeOffset=e.MSETimeOffset,t.mediaInfo=_(e.adaptation),t):null},getStreamsInfo:function(e,t){var r=[],n=c;if(e&&(T(),n=u(e)),0<n.length){(!t||t>n.length)&&(t=n.length);for(var i=0;i<t;i++)r.push(p(n[i]))}return r},getMediaInfoForType:function(e,t){if(0===c.length||!e)return null;var r=h(e,c);return r?(r=y.getAdaptationsForPeriod(r),(t=n(e.index,t,e))?_(r[y.getIndexForAdaptation(t,c[0].mpd.manifest,e.index)]):null):null},getAllMediaInfoForType:g,getAdaptationForType:n,getRealAdaptation:function(e,t){var r,e=h(e,c),n=t?t.id:null;return r=0<c.length&&e?n?y.getAdaptationForId(n,c[0].mpd.manifest,e.index):y.getAdaptationForIndex(t?t.index:null,c[0].mpd.manifest,e.index):r},getProducerReferenceTimes:function(e,t){var r,e=h(e,c),n=t?t.id:null;return(r=0<c.length&&e?n?y.getAdaptationForId(n,c[0].mpd.manifest,e.index):y.getAdaptationForIndex(t?t.index:null,c[0].mpd.manifest,e.index):r)?y.getProducerReferenceTimesForAdaptation(r):[]},getRealPeriodByIndex:function(e){return y.getRealPeriodForIndex(e,c[0].mpd.manifest)},getEssentialPropertiesForRepresentation:function(e){try{return y.getEssentialPropertiesForRepresentation(e)}catch(e){return[]}},getVoRepresentations:function(e){return e=m(e),y.getRepresentationsForAdaptation(e)},getEventsFor:function(e,t,r){var n,i,a=[];return 0<c.length&&(n=c[0].mpd.manifest,e instanceof w.default?(i=h(e,c),a=y.getEventsForPeriod(i)):e instanceof I.default?(i=h(r,c),a=y.getEventStreamForAdaptationSet(n,m(e),i)):e instanceof R.default&&(i=h(r,c),a=y.getEventStreamForRepresentation(n,t,i))),a},getEvent:function(e,t,r,n){try{if(!e||!t||isNaN(r)||!n)return null;var i=e.scheme_id_uri,a=e.value;if(!t[i+"/"+a])return null;var o=new N.default,s=e.timescale||1,u=n.adaptation.period.start,l=t[i+"/"+a],c=isNaN(n.presentationTimeOffset)?isNaN(l.presentationTimeOffset)?0:l.presentationTimeOffset:n.presentationTimeOffset,f=e.presentation_time_delta/s,d=0===e.version?u+r-c+f:u-c+f,g=e.event_duration/s,m=e.id,h=e.message_data;return o.eventStream=l,o.eventStream.value=a,o.eventStream.timescale=s,o.duration=g,o.id=m,o.calculatedPresentationTime=d,o.messageData=h,o.presentationTimeDelta=f,o}catch(e){return null}},getMpd:r,setConfig:function(e){e&&(e.constants&&(E=e.constants),e.cea608parser&&(o=e.cea608parser),e.errHandler&&y.setConfig({errHandler:e.errHandler}),e.BASE64&&y.setConfig({BASE64:e.BASE64}))},updatePeriods:function(e){if(!e)return null;T(),c=u(e)},getIsTextTrack:function(e){return y.getIsText(e)},getUTCTimingSources:function(){var e=l();return y.getUTCTimingSources(e)},getSuggestedPresentationDelay:function(){var e=0<c.length?c[0].mpd:null;return y.getSuggestedPresentationDelay(e)},getAvailabilityStartTime:function(e){return e=r(e),y.getAvailabilityStartTime(e)},getIsTypeOf:function(e,t){return y.getIsTypeOf(e,t)},getIsDynamic:function(e){return e=l(e),y.getIsDynamic(e)},getDuration:function(e){return e=l(e),y.getDuration(e)},getRegularPeriods:u,getContentSteering:function(e){return y.getContentSteering(e)},getLocation:function(e){return y.getLocation(e)},getPatchLocation:function(e){var t=y.getPatchLocation(e),r=y.getPublishTime(e);return t&&0!==t.length&&r?t.filter(function(e){return isNaN(e.ttl)||r.getTime()+e.ttl>(new Date).getTime()}):[]},getManifestUpdatePeriod:function(e){return y.getManifestUpdatePeriod(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:0)},getPublishTime:function(e){return y.getPublishTime(e)},getIsDVB:function(e){return y.hasProfile(e,"urn:dvb:dash:profile:dvb-dash:2014")},getIsPatch:function(e){return a.getIsPatch(e)},getBaseURLsFromElement:function(e){return y.getBaseURLsFromElement(e)},getRepresentationSortFunction:function(){return y.getRepresentationSortFunction()},getCodec:function(e,t,r){return y.getCodec(e,t,r)},getPeriodById:function(t){if(!t||0===c.length)return null;var e=c.filter(function(e){return e.id===t});return e&&0<e.length?e[0]:null},setCurrentMediaInfo:function(e,t,r){f[e]=f[e]||{},f[e][t]=f[e][t]||{},f[e][t]=r},isPatchValid:function(e,t){var r=y.getId(e),n=a.getMpdId(t),e=y.getPublishTime(e),i=a.getPublishTime(t),t=a.getOriginalPublishTime(t);return!!(r&&n&&r==n&&e&&t&&e.getTime()==t.getTime()&&i&&e.getTime()<i.getTime())},applyPatchToManifest:function(t,e){a.getPatchOperations(e).forEach(function(i){var e=i.getMpdTarget(t);if(null!==e){var a=e.name,o=e.target,e=e.leaf;if(i.xpath.findsAttribute()||"__text"===a)switch(i.action){case"add":case"replace":o[a]=i.value;break;case"remove":delete o[a]}else{var s=(o[a+"_asArray"]||[]).indexOf(e),u="prepend"===i.position||"before"===i.position;"remove"!==i.action&&"replace"!==i.action||(delete o[a],-1!=s&&((e=o[a+"_asArray"]).splice(s,1),1<e.length?o[a]=e:1==e.length?o[a]=e[0]:delete o[a+"_asArray"])),"add"!==i.action&&"replace"!==i.action||Object.keys(i.value).forEach(function(e){var t,r=i.value[e],n=o[e+"_asArray"]||[];0===n.length&&o[e]&&n.push(o[e]),0===n.length?n=r:(t=n.length,t=e==a&&-1!=s?s+(u?0:1)+("replace"==i.action?-1:0):u?0:n.length,n.splice.apply(n,[t,0].concat(r))),o[e+"_asArray"]=n,o[e]=1==n.length?n[0]:n})}}})},areMediaInfosEqual:d,reset:i},y=(0,D.default)(t).getInstance(),a=(0,M.default)(t).getInstance(),i(),e}a.__dashjs_factory_name="DashAdapter",t.default=n.default.getSingletonFactory(a)},"./src/dash/DashHandler.js":function(e,t,r){"use strict";r.r(t);var v=r("./src/streaming/vo/FragmentRequest.js"),T=r("./src/streaming/vo/metrics/HTTPRequest.js"),n=r("./src/core/FactoryMaker.js"),b=r("./src/streaming/MediaPlayerEvents.js"),S=r("./src/dash/utils/SegmentsUtils.js"),A=r("./src/dash/constants/DashConstants.js");function i(e){var t,i,a,o,s,r=(e=e||{}).eventBus,n=e.debug,u=e.urlUtils,l=e.type,c=e.streamInfo,f=e.segmentsController,d=e.timelineConverter,g=e.baseURLController;function m(){return l}function h(){a=null}function p(e,t,r){var n,i,r=g.resolve(r.path),a={};return r&&t!==r.url&&u.isRelative(t)?(n=r.url,i=r.serviceLocation,a=r.queryParams,t&&(n=u.resolve(t,n))):n=t,!u.isRelative(n)&&(e.url=n,e.serviceLocation=i,e.queryParams=a,1)}function y(e,t){if(null==t)return null;var r=new v.default,n=t.representation,i=n.adaptation.period.mpd.manifest.Period_asArray[n.adaptation.period.index].AdaptationSet_asArray[n.adaptation.index].Representation_asArray[n.index].bandwidth,a=t.media,a=(0,S.replaceTokenForTemplate)(a,"Number",t.replacementNumber);return a=(0,S.replaceTokenForTemplate)(a,"Time",t.replacementTime),a=(0,S.replaceTokenForTemplate)(a,"Bandwidth",i),a=(0,S.replaceIDForTemplate)(a,n.id),a=(0,S.unescapeDollarsInTemplate)(a),r.mediaType=l,r.type=T.HTTPRequest.MEDIA_SEGMENT_TYPE,r.range=t.mediaRange,r.startTime=t.presentationStartTime,r.mediaStartTime=t.mediaStartTime,r.duration=t.duration,r.timescale=n.timescale,r.availabilityStartTime=t.availabilityStartTime,r.availabilityEndTime=t.availabilityEndTime,r.availabilityTimeComplete=n.availabilityTimeComplete,r.wallStartTime=t.wallStartTime,r.quality=n.index,r.index=t.index,r.mediaInfo=e,r.adaptationIndex=n.adaptation.index,r.representationId=n.id,p(r,a,n)?r:void 0}function E(e,t,r){var n=null;if(!t||!t.segmentInfoType)return n;t=f.getSegmentByTime(t,r);return t&&(a=t,i.debug("Index for time "+r+" is "+t.index),n=y(e,t)),n}function _(){i.debug("Dynamic stream complete"),s=!0}return t={initialize:function(e){o=e,s=!1,f.initialize(e)},getStreamId:function(){return c.id},getType:m,getStreamInfo:function(){return c},getInitRequest:function(e,t){if(!t)return null;var r=l,n=new v.default,i=t.adaptation.period,a=i.start;return n.mediaType=r,n.type=T.HTTPRequest.INIT_SEGMENT_TYPE,n.range=t.range,n.availabilityStartTime=d.calcAvailabilityStartTimeFromPresentationTime(a,t,o),n.availabilityEndTime=d.calcAvailabilityEndTimeFromPresentationTime(a+i.duration,t,o),n.quality=t.index,n.mediaInfo=e,n.representationId=t.id,p(n,t.initialization,t)?(n.url=(0,S.replaceTokenForTemplate)(n.url,"Bandwidth",t.bandwidth),n):void 0},getSegmentRequestForTime:E,getCurrentIndex:function(){return a?a.index:-1},getNextSegmentRequest:function(e,t){var r=null;if(!t||!t.segmentInfoType)return null;var n=a?a.index+1:0;if(t=f.getSegmentByIndex(t,n,a?a.mediaStartTime:-1))r=y(e,t),a=t;else{if(o&&!s)return i.debug(l+" No segment found at index: "+n+". Wait for next loop"),null;s=!0}return r},isLastSegmentRequested:function(e,t){if(!e||!a)return!1;if(s)return!0;if(!isFinite(e.adaptation.period.duration))return!1;if(a.presentationStartTime+a.duration>t)return!1;if(e.mediaFinishedInformation&&!isNaN(e.mediaFinishedInformation.numberOfSegments)&&!isNaN(a.index)&&a.index>=e.mediaFinishedInformation.numberOfSegments-1){if(!o||e.segmentInfoType===A.default.SEGMENT_TEMPLATE)return!0;if(o&&e.segmentInfoType===A.default.SEGMENT_LIST&&e.adaptation.period.nextPeriodId)return!0}return!!(o&&e.adaptation.period.nextPeriodId&&e.segmentInfoType===A.default.SEGMENT_TIMELINE&&e.mediaFinishedInformation&&!isNaN(e.mediaFinishedInformation.mediaTimeOfLastSignaledSegment)&&a&&!isNaN(a.mediaStartTime)&&!isNaN(a.duration)&&a.mediaStartTime+a.duration>=e.mediaFinishedInformation.mediaTimeOfLastSignaledSegment-.05)},reset:function(){h(),r.off(b.default.DYNAMIC_TO_STATIC,_,t)},getNextSegmentRequestIdempotent:function(e,t){var r=a?a.index+1:0;return(t=f.getSegmentByIndex(t,r,a?a.mediaStartTime:-1))?y(e,t):null},getValidTimeAheadOfTargetTime:function(e,t,r,n){try{if(isNaN(e)||!t||!r)return NaN;if(e<0&&(e=0),isNaN(n)&&(n=.5),E(t,r,e))return e;if(r.adaptation.period.start+r.adaptation.period.duration<e)return NaN;for(var i,a=isFinite(r.adaptation.period.duration)?r.adaptation.period.start+r.adaptation.period.duration:e+30,o=Math.min(e+n,a),s=NaN,u=null;o<=a;){var l=null;if(l=o<=a?E(t,r,o):l){s=o,u=l;break}o+=n}return u?(i=u.startTime+u.duration,e>u.startTime&&n<i-e?e:!isNaN(u.startTime)&&e<u.startTime&&s>u.startTime?u.startTime+.001:Math.min(i-n,s)):s}catch(e){return NaN}}},i=n.getLogger(t),h(),r.on(b.default.DYNAMIC_TO_STATIC,_,t),t}i.__dashjs_factory_name="DashHandler",t.default=n.default.getClassFactory(i)},"./src/dash/DashMetrics.js":function(e,t,r){"use strict";r.r(t);var c=r("./src/streaming/constants/Constants.js"),f=r("./src/streaming/vo/metrics/HTTPRequest.js"),n=r("./src/core/FactoryMaker.js"),d=r("./src/streaming/constants/MetricsConstants.js"),g=r("./src/dash/utils/Round10.js"),m=r("./src/streaming/models/MetricsModel.js"),h=r("./src/core/Utils.js"),p=r("./src/streaming/vo/metrics/PlayList.js");function i(e){e=e||{};var t,n,i,a,r=this.context,o=e.metricsModel;function s(e){e=o.getMetricsFor(e,!0);if(!e)return null;var t,r=e.HttpList,n=null;if(!r||r.length<=0)return null;for(t=r.length-1;0<=t;){if(r[t].responsecode){n=r[t];break}t--}return n}function u(e){e=o.getMetricsFor(e,!0);return e&&e.HttpList||[]}function l(e,t){if(!e)return null;e=e[t];return e&&0!==e.length?e[e.length-1]:null}return t={getCurrentRepresentationSwitch:function(e){return l(o.getMetricsFor(e,!0),d.default.TRACK_SWITCH)},getCurrentBufferState:function(e){return l(o.getMetricsFor(e,!0),d.default.BUFFER_STATE)},getCurrentBufferLevel:function(e){return(e=l(o.getMetricsFor(e,!0),d.default.BUFFER_LEVEL))?g.default.round10(e.level/1e3,-3):0},getCurrentHttpRequest:s,getHttpRequests:u,getCurrentDroppedFrames:function(){return l(o.getMetricsFor(c.default.VIDEO,!0),d.default.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(e){return l(o.getMetricsFor(e,!0),d.default.SCHEDULING_INFO)},getCurrentDVRInfo:function(e){return l(e?o.getMetricsFor(e,!0):o.getMetricsFor(c.default.VIDEO,!0)||o.getMetricsFor(c.default.AUDIO,!0),d.default.DVR_INFO)},getCurrentManifestUpdate:function(){return l(o.getMetricsFor(c.default.STREAM),d.default.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(e,t){if(!t)return null;var r={},e=s(e);return void 0===(e=(r=e?h.default.parseHttpHeaders(e._responseHeaders):r)[t.toLowerCase()])?null:e},getLatestMPDRequestHeaderValueByID:function(e){if(!e)return null;for(var t,r={},n=u(c.default.STREAM),i=n.length-1;0<=i;i--)if((t=n[i]).type===f.HTTPRequest.MPD_TYPE){r=h.default.parseHttpHeaders(t._responseHeaders);break}return void 0===(e=r[e.toLowerCase()])?null:e},addRepresentationSwitch:function(e,t,r,n,i){o.addRepresentationSwitch(e,t,r,n,i)},addDVRInfo:function(e,t,r,n){o.addDVRInfo(e,t,r,n)},updateManifestUpdateInfo:function(e){var t=this.getCurrentManifestUpdate();o.updateManifestUpdateInfo(t,e)},addManifestUpdateStreamInfo:function(e){var t;e&&(t=this.getCurrentManifestUpdate(),o.addManifestUpdateStreamInfo(t,e.id,e.index,e.start,e.duration))},addManifestUpdateRepresentationInfo:function(e,t){var r;e&&(r=this.getCurrentManifestUpdate(),o.addManifestUpdateRepresentationInfo(r,e.id,e.index,e.streamIndex,t,e.presentationTimeOffset,e.startNumber,e.fragmentInfoType))},addManifestUpdate:function(e){o.addManifestUpdate(c.default.STREAM,e.type,e.requestStartDate,e.requestEndDate)},addHttpRequest:function(e,t,r,n,i,a){o.addHttpRequest(e.mediaType,null,e.type,e.url,e.quality,t,e.serviceLocation||null,e.range||null,e.requestStartDate,e.firstByteDate,e.requestEndDate,r,e.duration,n,i,e.fileLoaderType,a)},addSchedulingInfo:function(e,t){o.addSchedulingInfo(e.mediaType,new Date,e.type,e.startTime,e.availabilityStartTime,e.duration,e.quality,e.range,t)},addRequestsQueue:function(e,t,r){o.addRequestsQueue(e,t,r)},addBufferLevel:function(e,t,r){o.addBufferLevel(e,t,r)},addBufferState:function(e,t,r){o.addBufferState(e,t,r)},addDroppedFrames:function(e){o.addDroppedFrames(c.default.VIDEO,e)},addPlayList:function(){a&&(o.addPlayList(a),a=null)},addDVBErrors:function(e){o.addDVBErrors(e)},createPlaylistMetrics:function(e,t){(a=new p.PlayList).start=new Date,a.mstart=e,a.starttype=t},createPlaylistTraceMetrics:function(e,t,r){!0===n&&(n=!1,(i=new p.PlayListTrace).representationid=e,i.start=new Date,i.mstart=t,i.playbackspeed=null!==r?r.toString():null)},updatePlayListTraceMetrics:function(e){if(i)for(var t in i)i[t]=e[t]},pushPlayListTraceMetrics:function(e,t){var r;!1===n&&a&&i&&i.start&&(r=i.start,e=e.getTime()-r.getTime(),i.duration=e,i.stopreason=t,a.trace.push(i),n=!0)},clearAllCurrentMetrics:function(){o.clearAllCurrentMetrics()}},o=o||(0,m.default)(r).getInstance({settings:e.settings}),n=!0,a=i=null,t}i.__dashjs_factory_name="DashMetrics",t.default=n.default.getSingletonFactory(i)},"./src/dash/SegmentBaseLoader.js":function(e,t,r){"use strict";r.r(t);var g=r("./src/dash/vo/Segment.js"),m=r("./src/streaming/vo/DashJSError.js"),n=r("./src/core/FactoryMaker.js"),h=r("./src/streaming/vo/FragmentRequest.js"),p=r("./src/streaming/net/URLLoader.js");function i(){var t,T,r,b,n,i,a,l,o,s,u,c,f,e=this.context;function d(e,t,r){r({segments:e,representation:t,error:e?void 0:new m.default(o.SEGMENT_BASE_LOADER_ERROR_CODE,o.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function S(e,t){for(var r,n,i,a=e.references,o=a.length,s=e.timescale,u=e.earliest_presentation_time,l=t.range.start+e.offset+e.first_offset+e.size,c=[],f=0;f<o;f++)n=a[f].subsegment_duration,i=a[f].referenced_size,(r=new g.default).duration=n,r.startTime=u,r.timescale=s,r.mediaRange=l+"-"+(l+i-1),c.push(r),u+=n,l+=i;return c}function A(e){var t;if(e.url)return t=new h.default,t.setInfo(e),t}return t={setConfig:function(e){e.baseURLController&&(f=e.baseURLController),e.dashMetrics&&(i=e.dashMetrics),e.mediaPlayerModel&&(a=e.mediaPlayerModel),e.errHandler&&(r=e.errHandler),e.boxParser&&(b=e.boxParser),e.debug&&(T=e.debug.getLogger(t)),e.requestModifier&&(n=e.requestModifier),e.errors&&(o=e.errors),e.urlUtils&&(c=e.urlUtils),e.constants&&(s=e.constants),e.dashConstants&&(u=e.dashConstants)},initialize:function(){l=(0,p.default)(e).create({errHandler:r,dashMetrics:i,mediaPlayerModel:a,requestModifier:n,boxParser:b,errors:o,urlUtils:c,constants:s,dashConstants:u})},loadInitialization:function(t,r){return new Promise(function(e){!function t(r,n,i,e){var a=null;var o=r?f.resolve(r.path):null;var s=e||{init:!0,url:o?o.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:n};T.debug("Start searching for initialization.");e=A(s);o=function(e){if(s.bytesLoaded=s.range.end,!(a=b.findInitRange(e)))return s.range.end=s.bytesLoaded+s.bytesToLoad,t(r,n,i,s);r.range=a,i(r)};var u=function(){i(r)};l.load({request:e,success:o,error:u});T.debug("Perform init search: "+s.url)}(t,r,e)})},loadSegments:function(t,r,n){return new Promise(function(e){!function g(m,h,e,p,y,t){!e||void 0!==e.start&&void 0!==e.end||(e=(r=e?e.toString().split("-"):null)?{start:parseFloat(r[0]),end:parseFloat(r[1])}:null);y=y||d;var E=null;var _=null;var r=!!e;var n=m?f.resolve(m.path):null;var v={init:!1,url:n?n.url:void 0,range:r?e:{start:0,end:1500},searching:!r,bytesLoaded:t?t.bytesLoaded:0,bytesToLoad:1500,mediaType:h};n=A(v);e=function(e){var t=v.bytesToLoad,r=e.byteLength;if(v.bytesLoaded=v.range.end-v.range.start,E=b.parse(e),(_=E.getBox("sidx"))&&_.isComplete){var n=_.references;if(d=null!=n&&0<n.length?1===n[0].reference_type:d){T.debug("Initiate multiple SIDX load."),v.range.end=v.range.start+_.size;var i,a,o,s,u=[],l=0,c=(_.offset||v.range.start)+_.size,f=function(e){e?(u=u.concat(e),a<=++l&&(u.sort(function(e,t){return e.startTime-t.startTime<0?-1:0}),y(u,m,p))):y(null,m,p)};for(i=0,a=n.length;i<a;i++)s=(o=c)+n[i].referenced_size-1,c+=n[i].referenced_size,g(m,h,{start:o,end:s},p,f,v)}else T.debug("Parsing segments from SIDX. representation "+h+" - id: "+m.id+" for range : "+v.range.start+" - "+v.range.end),e=S(_,v),y(e,m,p)}else{if(_)v.range.start=_.offset||v.range.start,v.range.end=v.range.start+(_.size||t);else{if(r<v.bytesLoaded)return void y(null,m,p);var d=E.getLastBox();d&&d.size?(v.range.start=d.offset+d.size,v.range.end=v.range.start+t):v.range.end+=t}g(m,h,v.range,p,null,v)}};r=function(){y(null,m,p)};l.load({request:n,success:e,error:r});T.debug("Perform SIDX load for type ".concat(h," : ").concat(v.url," with range ").concat(v.range.start," - ").concat(v.range.end))}(t,r,n,e)})},reset:function(){l&&(l.abort(),l=null)}}}i.__dashjs_factory_name="SegmentBaseLoader",t.default=n.default.getSingletonFactory(i)},"./src/dash/WebmSegmentBaseLoader.js":function(e,t,r){"use strict";r.r(t);var S=r("./src/streaming/utils/EBMLParser.js"),s=r("./src/streaming/constants/Constants.js"),n=r("./src/core/FactoryMaker.js"),f=r("./src/dash/vo/Segment.js"),u=r("./src/streaming/vo/FragmentRequest.js"),l=r("./src/streaming/net/URLLoader.js"),A=r("./src/streaming/vo/DashJSError.js");function i(){var t,p,y,r,n,i,a,E,_,o,v=this.context;function T(e,t,r,n){for(var i,a,o,s=function(e){var t,r=[],n=(0,S.default)(v).create({data:e});for(n.consumeTagAndSize(y.Segment.Cues);n.moreData()&&n.consumeTagAndSize(y.Segment.Cues.CuePoint,!0);){for((t={}).CueTime=n.parseTag(y.Segment.Cues.CuePoint.CueTime),t.CueTracks=[];n.moreData()&&n.consumeTag(y.Segment.Cues.CuePoint.CueTrackPositions,!0);){var i,a=n.getMatroskaCodedNum(),o=n.getPos();if((i={}).Track=n.parseTag(y.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),0===i.Track)throw new Error("Cue track cannot be 0");i.ClusterPosition=n.parseTag(y.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),t.CueTracks.push(i),n.setPos(o+a)}if(0===t.CueTracks.length)throw new Error("Mandatory cuetrack not found");r.push(t)}if(0===r.length)throw new Error("mandatory cuepoint not found");return r}(e),u=[],l=0,c=s.length;l<c;l+=1)i=new f.default,a=0,a=l<s.length-1?s[l+1].CueTime-s[l].CueTime:n-s[l].CueTime,i.duration=a,i.startTime=s[l].CueTime,i.timescale=1e3,a=s[l].CueTracks[0].ClusterPosition+t,o=l<s.length-1?s[l+1].CueTracks[0].ClusterPosition+t-1:r-1,i.mediaRange=a+"-"+o,u.push(i);return p.debug("Parsed cues: "+u.length+" cues."),u}function b(e){var t=new u.default;return t.setInfo(e),t}return y={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},t={setConfig:function(e){if(!(e.baseURLController&&e.dashMetrics&&e.mediaPlayerModel&&e.errHandler))throw new Error(s.default.MISSING_CONFIG_ERROR);o=e.baseURLController,i=e.dashMetrics,a=e.mediaPlayerModel,r=e.errHandler,_=e.errors,p=e.debug.getLogger(t),n=e.requestModifier},initialize:function(){E=(0,l.default)(v).create({errHandler:r,dashMetrics:i,mediaPlayerModel:a,requestModifier:n,errors:_})},loadInitialization:function(n,i){return new Promise(function(e){var t=n?o.resolve(n.path):null,r=n?n.range.split("-"):null,r={range:{start:r?parseFloat(r[0]):null,end:r?parseFloat(r[1]):null},request:null,url:t?t.url:void 0,init:!0,mediaType:i};p.info("Start loading initialization."),t=b(r);E.load({request:t,success:function(){e(n)},error:function(){e(n)}}),p.debug("Perform init load: "+r.url)})},loadSegments:function(m,t,h){return new Promise(function(d){var e=m?o.resolve(m.path):null,g=e?e.url:void 0,e=b({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:null,url:g,init:!1,mediaType:t});p.debug("Parsing ebml header");E.load({request:e,success:function(e){var t=g,r=h,n=function(e){d({segments:e,representation:m,error:e?void 0:new A.default(_.SEGMENT_BASE_LOADER_ERROR_CODE,_.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})};if((e=e)&&0!==e.byteLength){var i,a,o,s,u=(0,S.default)(v).create({data:e}),e=r?r.split("-"):null,l={url:t,range:{start:e?parseFloat(e[0]):null,end:e?parseFloat(e[1]):null},request:null};for(p.debug("Parse EBML header: "+l.url),u.skipOverElement(y.EBML),u.consumeTag(y.Segment),o=u.getMatroskaCodedNum(),o+=u.getPos(),s=u.getPos();u.moreData()&&!u.consumeTagAndSize(y.Segment.Info,!0);)if(!(u.skipOverElement(y.Segment.SeekHead,!0)||u.skipOverElement(y.Segment.Tracks,!0)||u.skipOverElement(y.Segment.Cues,!0)||u.skipOverElement(y.Void,!0)))throw new Error("no valid top level element found");for(;void 0===i;){var c=u.getMatroskaCodedNum(!0),f=u.getMatroskaCodedNum();c===y.Segment.Info.Duration.tag?i=u[y.Segment.Info.Duration.parse](f):u.setPos(u.getPos()+f)}r=b(l);E.load({request:r,success:function(e){a=T(e,s,o,i),n(a)},error:function(){p.error("Download Error: Cues "+l.url),n(null)}}),p.debug("Perform cues load: "+l.url+" bytes="+l.range.start+"-"+l.range.end)}else n(null)},error:function(){d({representation:m,error:new A.default(_.SEGMENT_BASE_LOADER_ERROR_CODE,_.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}})})},reset:function(){E&&(E.abort(),E=null)}}}i.__dashjs_factory_name="WebmSegmentBaseLoader",t.default=n.default.getSingletonFactory(i)},"./src/dash/constants/DashConstants.js":function(e,t,r){"use strict";function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.r(t);r=new(function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.init()}var t,r,n;return t=e,(r=[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.SUPPLEMENTAL_PROPERTY_ASARRAY="SupplementalProperty_asArray",this.INBAND_EVENT_STREAM="InbandEventStream",this.PRODUCER_REFERENCE_TIME="ProducerReferenceTime",this.INBAND="inband",this.TYPE="type",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.VIEWPOINT_ASARRAY="Viewpoint_asArray",this.ROLE_ASARRAY="Role_asArray",this.REPRESENTATION_ASARRAY="Representation_asArray",this.PRODUCERREFERENCETIME_ASARRAY="ProducerReferenceTime_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.STATIC="static",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SERVICE_DESCRIPTION="ServiceDescription",this.SERVICE_DESCRIPTION_SCOPE="Scope",this.SERVICE_DESCRIPTION_LATENCY="Latency",this.SERVICE_DESCRIPTION_PLAYBACK_RATE="PlaybackRate",this.SERVICE_DESCRIPTION_OPERATING_QUALITY="OperatingQuality",this.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH="OperatingBandwidth",this.PATCH_LOCATION="PatchLocation",this.PATCH_LOCATION_AS_ARRAY="PatchLocation_asArray",this.LOCATION="Location",this.LOCATION_AS_ARRAY="Location_asArray",this.PUBLISH_TIME="publishTime",this.ORIGINAL_PUBLISH_TIME="originalPublishTime",this.ORIGINAL_MPD_ID="mpdId",this.WALL_CLOCK_TIME="wallClockTime",this.PRESENTATION_TIME="presentationTime",this.LABEL="Label",this.GROUP_LABEL="GroupLabel",this.CONTENT_STEERING="ContentSteering",this.CONTENT_STEERING_AS_ARRAY="ContentSteering_asArray",this.DEFAULT_SERVICE_LOCATION="defaultServiceLocation",this.QUERY_BEFORE_START="queryBeforeStart",this.CLIENT_REQUIREMENT="clientRequirement",this.TTL="ttl",this.CONTENT_STEERING_RESPONSE={VERSION:"VERSION",TTL:"TTL",RELOAD_URI:"RELOAD-URI",PATHWAY_PRIORITY:"PATHWAY-PRIORITY",PATHWAY_CLONES:"PATHWAY-CLONES",BASE_ID:"BASE-ID",ID:"ID",URI_REPLACEMENT:"URI-REPLACEMENT",HOST:"HOST",PARAMS:"PARAMS"},this.PRODUCER_REFERENCE_TIME_TYPE={ENCODER:"encoder",CAPTURED:"captured",APPLICATION:"application"},this.SEGMENT_ALIGNMENT="segmentAlignment",this.SUB_SEGMENT_ALIGNMENT="subsegmentAlignment"}}])&&i(t.prototype,r),n&&i(t,n),e}());t.default=r},"./src/dash/controllers/ContentSteeringController.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/core/FactoryMaker.js"),D=r("./src/core/Debug.js"),M=r("./src/streaming/net/URLLoader.js"),O=r("./src/core/errors/Errors.js"),P=r("./src/dash/vo/ContentSteeringRequest.js"),L=r("./src/dash/vo/ContentSteeringResponse.js"),F=r("./src/dash/constants/DashConstants.js"),x=r("./src/streaming/MediaPlayerEvents.js"),j=r("./src/streaming/utils/URLUtils.js"),k=r("./src/dash/vo/BaseURL.js"),U=r("./src/dash/vo/MpdLocation.js"),B=r("./src/core/Utils.js"),G="_DASH_throughput",q="_DASH_pathway";function i(){var e,u,l,a,o,t,n,r,i,s,c,f,d,g,m,h=this.context,p=(0,j.default)(h).getInstance();function y(e){b(e,"baseUrl")}function E(e){b(e,"location")}function _(e){var t,r;e&&e.request&&e.request.serviceLocation&&e.request.requestStartDate&&e.request.requestEndDate&&!isNaN(e.request.bytesTotal)&&(t=e.request.serviceLocation,r=e.request.requestEndDate.getTime()-e.request.requestStartDate.getTime(),T(t,parseInt(8*e.request.bytesTotal/r*1e3)))}function v(e){e&&e.httpRequest&&e.httpRequest._serviceLocation&&!isNaN(e.throughput)&&T(e.httpRequest._serviceLocation,1e3*e.throughput)}function T(e,t){o[e]||(o[e]=[]),o[e].push(t),4<o[e].length&&o[e].shift()}function b(e,t){e&&e.request&&e.request.serviceLocation&&(e=e.request.serviceLocation,-1===a[t].all.indexOf(e)&&a[t].all.push(e),a[t].current=e)}function S(){var e=c.getValue();return m.getContentSteering(e)||d.getServiceDescriptionSettings().contentSteering}function A(){return new Promise(function(s){try{var e=S();if(!e||!e.serverUrl)return void s();var t=function(e){var t=e.serverUrl;l&&l.reloadUri&&(t=p.isRelative(l.reloadUri)?p.resolve(l.reloadUri,e.serverUrl):l.reloadUri);var e=[],r=a.baseUrl.all.concat(a.location.all);{var n,i;0<r.length&&((r=r.map(function(e){return{serviceLocation:e,throughput:function(e){if(!e||!o[e]||0===o[e].length)return-1;e=o[e].reduce(function(e,t){return e+t})/o[e].length;return parseInt(e)}(e)}})).sort(function(e,t){return t.throughput-e.throughput}),i=n="",r.forEach(function(e,t){0!==t&&(n="".concat(n,","),-1<e.throughput&&(i="".concat(i,","))),n="".concat(n).concat(e.serviceLocation),-1<e.throughput&&(i="".concat(i).concat(e.throughput))}),e.push({key:q,value:'"'.concat(n,'"')}),e.push({key:G,value:i}))}return t=B.default.addAditionalQueryParameterToUrl(t,e)}(e),r=new P.default(t);n.load({request:r,success:function(e){(e=e)&&e[F.default.CONTENT_STEERING_RESPONSE.VERSION]&&1===parseInt(e[F.default.CONTENT_STEERING_RESPONSE.VERSION])&&((l=new L.default).version=e[F.default.CONTENT_STEERING_RESPONSE.VERSION],e[F.default.CONTENT_STEERING_RESPONSE.TTL]&&!isNaN(e[F.default.CONTENT_STEERING_RESPONSE.TTL])&&(l.ttl=e[F.default.CONTENT_STEERING_RESPONSE.TTL]),e[F.default.CONTENT_STEERING_RESPONSE.RELOAD_URI]&&(l.reloadUri=e[F.default.CONTENT_STEERING_RESPONSE.RELOAD_URI]),e[F.default.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]&&(l.pathwayPriority=e[F.default.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]),e[F.default.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES]&&(l.pathwayClones=e[F.default.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES],l.pathwayClones=l.pathwayClones.filter(function(e){return(e=e)[F.default.CONTENT_STEERING_RESPONSE.BASE_ID]&&e[F.default.CONTENT_STEERING_RESPONSE.ID]&&e[F.default.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT]&&e[F.default.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][F.default.CONTENT_STEERING_RESPONSE.HOST]})),w()),g.trigger(x.default.CONTENT_STEERING_REQUEST_COMPLETED,{currentSteeringResponseData:l,url:t}),s()},error:function(e,t,r,n){var i=e,a=n;try{switch(u.warn("Error fetching data from content steering server",i),a.status){case 410:break;case 429:var o=a&&a.getResponseHeader?a.getResponseHeader("retry-after"):null;null!==o&&((l=l||{}).ttl=parseInt(o)),w();break;default:w()}}catch(i){u.error(i)}s(e)},complete:function(){a.baseUrl.all=R(a.baseUrl),a.location.all=R(a.location)}})}catch(e){s(e)}})}function R(t){return t.all&&0!==t.all.length&&t.current?t.all.filter(function(e){return e===t.current}):[]}function I(i){try{var a=[];return i&&0!==i.length&&l&&l.pathwayClones&&0!==l.pathwayClones.length?(l.pathwayClones.forEach(function(t){var e,r=i.filter(function(e){return t[F.default.CONTENT_STEERING_RESPONSE.BASE_ID]===e.serviceLocation}),n=null;(n=r&&0<r.length?r[0]:n)&&(r=new URL(n.url),e=t[F.default.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][F.default.CONTENT_STEERING_RESPONSE.HOST],e=B.default.stringHasProtocol(e)?e:"".concat(r.protocol,"//").concat(e),e={synthesizedUrl:"".concat(e).concat(r.pathname),serviceLocation:t[F.default.CONTENT_STEERING_RESPONSE.ID],queryParams:t[F.default.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][F.default.CONTENT_STEERING_RESPONSE.PARAMS],reference:n},a.push(e))}),a):a}catch(e){return u.error(e),[]}}function w(){l&&l.ttl&&!isNaN(l.ttl)&&(t&&clearTimeout(t),t=setTimeout(function(){A()},1e3*l.ttl))}function C(){t&&clearTimeout(t),t=null}function N(){o={},a={baseUrl:{current:l=null,all:[]},location:{current:null,all:[]}},C()}return e={reset:function(){N(),g.off(x.default.FRAGMENT_LOADING_STARTED,y,e),g.off(x.default.MANIFEST_LOADING_STARTED,E,e),g.off(x.default.MANIFEST_LOADING_FINISHED,_,e),g.off(x.default.THROUGHPUT_MEASUREMENT_STORED,v,e)},setConfig:function(e){e&&(e.adapter&&(m=e.adapter),e.errHandler&&(r=e.errHandler),e.dashMetrics&&(i=e.dashMetrics),e.mediaPlayerModel&&(s=e.mediaPlayerModel),e.requestModifier&&(f=e.requestModifier),e.manifestModel&&(c=e.manifestModel),e.serviceDescriptionController&&(d=e.serviceDescriptionController),e.eventBus&&(g=e.eventBus))},loadSteeringData:A,getCurrentSteeringResponseData:function(){return l},shouldQueryBeforeStart:function(){var e=S();return!!e&&e.queryBeforeStart},getSteeringDataFromManifest:S,stopSteeringRequestTimer:C,getSynthesizedBaseUrlElements:function(e){try{return I(e).map(function(e){var t=new k.default(e.synthesizedUrl,e.serviceLocation);return t.queryParams=e.queryParams,t.dvb_priority=e.reference.dvb_priority,t.dvb_weight=e.reference.dvb_weight,t.availabilityTimeOffset=e.reference.availabilityTimeOffset,t.availabilityTimeComplete=e.reference.availabilityTimeComplete,t})}catch(e){return u.error(e),[]}},getSynthesizedLocationElements:function(e){try{return I(e).map(function(e){var t=new U.default(e.synthesizedUrl,e.serviceLocation);return t.queryParams=e.queryParams,t})}catch(e){return u.error(e),[]}},initialize:function(){n=(0,M.default)(h).create({errHandler:r,dashMetrics:i,mediaPlayerModel:s,requestModifier:f,errors:O.default}),g.on(x.default.FRAGMENT_LOADING_STARTED,y,e),g.on(x.default.MANIFEST_LOADING_STARTED,E,e),g.on(x.default.MANIFEST_LOADING_FINISHED,_,e),g.on(x.default.THROUGHPUT_MEASUREMENT_STORED,v,e)}},u=(0,D.default)(h).getInstance().getLogger(e),N(),e}i.__dashjs_factory_name="ContentSteeringController",t.default=n.default.getSingletonFactory(i)},"./src/dash/controllers/RepresentationController.js":function(e,t,r){"use strict";r.r(t);var C=r("./src/streaming/constants/Constants.js"),n=r("./src/core/FactoryMaker.js"),N=r("./src/streaming/MediaPlayerEvents.js"),D=r("./src/dash/utils/SegmentsUtils.js");function i(e){var t,f,d,g,r,m,n=(e=e||{}).eventBus,i=e.events,h=e.abrController,p=e.dashMetrics,y=e.playbackController,E=e.timelineConverter,_=e.type,v=e.streamInfo,T=e.dashConstants,b=e.segmentsController,S=e.isDynamic,a=e.adapter;function o(){return _}function s(){return d}function u(){return m}function l(){d=!(f=null),g=[],r=null}function A(){if(!(h&&p&&y&&E))throw new Error(C.default.MISSING_CONFIG_ERROR);var e=new Date,t=m,r=1e3*y.getTime();t&&p.addRepresentationSwitch(t.adaptation.type,e,r,t.id),n.trigger(N.default.REPRESENTATION_SWITCH,{mediaType:_,streamId:v.id,currentRepresentation:t,numberOfRepresentations:g.length},{streamId:v.id,mediaType:_})}function R(e){return null==e||e>=g.length?null:g[e]}function I(e){d=!1,n.trigger(i.DATA_UPDATE_COMPLETED,{data:f,currentRepresentation:m,error:e},{streamId:v.id,mediaType:_})}function w(e){m=e,r=a.convertRepresentationToRepresentationInfo(m)}function c(e){var t;e.newDuration&&(t=m)&&t.adaptation.period&&(t.adaptation.period.duration=e.newDuration)}return t={getStreamId:function(){return v.id},getType:o,getData:function(){return f},isUpdating:s,updateData:function(o,s,u,l,c){return new Promise(function(e,t){if(d=!0,g=s,f=o,w(R(c)),u!==C.default.VIDEO&&u!==C.default.AUDIO&&(u!==C.default.TEXT||!l))return I(),void e();for(var r=[],n=0,i=g.length;n<i;n++){var a=g[n];r.push(function(l){return new Promise(function(u,t){var e=l.hasInitialization(),r=l.hasSegments(),n=[];n.push(b.updateInitData(l,e)),n.push(b.updateSegmentData(l,r)),Promise.all(n).then(function(e){e[0]&&!e[0].error&&(i=l,t=e[0],l=t&&!t.error&&t.representation?t.representation:i),e[1]&&!e[1].error&&(l=function(e,t){if(t&&!t.error){var r,n,i,a=t.segments,o=[],s=0;for(r=0,n=a?a.length:0;r<n;r++)i=a[r],(i=(0,D.getTimeBasedSegment)(E,S,e,i.startTime,i.duration,i.timescale,i.media,i.mediaRange,s))&&(o.push(i),i=null,s++);return 0<o.length&&(e.segments=o),e}}(l,e[1])),(t=l).mediaFinishedInformation=b.getMediaFinishedInformation(t);var t,r=l;if(d){var n,i,a=p.getCurrentManifestUpdate(),o=!1;if(a){for(var s=0;s<a.representationInfo.length;s++)if((n=a.representationInfo[s]).index===r.index&&n.mediaType===_){o=!0;break}o||p.addManifestUpdateRepresentationInfo(r,_)}!function(){for(var e=0,t=g.length;e<t;e++){var r=g[e].segmentInfoType;if(!g[e].hasInitialization()||(r===T.SEGMENT_BASE||r===T.BASE_URL)&&!g[e].segments)return}return 1}()||(h.setPlaybackQuality(_,v,function(e){return g.indexOf(e)}(m)),(i=p.getCurrentDVRInfo(_))&&p.updateManifestUpdateInfo({latency:i.range.end-y.getTime()}),p.getCurrentRepresentationSwitch(m.adaptation.type)||A(),I())}u()}).catch(function(e){t(e)})})}(a))}Promise.all(r).then(function(){w(R(c)),e()}).catch(function(e){t(e)})})},getCurrentRepresentation:u,getCurrentRepresentationInfo:function(){return r},getRepresentationForQuality:R,prepareQualityChange:function(e){w(R(e)),A()},reset:function(){n.off(N.default.MANIFEST_VALIDITY_CHANGED,c,t),l()}},l(),n.on(N.default.MANIFEST_VALIDITY_CHANGED,c,t),t}i.__dashjs_factory_name="RepresentationController",t.default=n.default.getClassFactory(i)},"./src/dash/controllers/SegmentBaseController.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/core/FactoryMaker.js"),h=r("./src/dash/SegmentBaseLoader.js"),p=r("./src/dash/WebmSegmentBaseLoader.js");function i(e){var t,r,n,i=this.context,a=(e=e||{}).eventBus,o=e.events,s=e.dashMetrics,u=e.mediaPlayerModel,l=e.errHandler,c=e.baseURLController,f=e.debug,d=e.boxParser,g=e.requestModifier,e=e.errors;function m(e){return"webm"===(e?e.split("/")[1]:"").toLowerCase()}return t={initialize:function(){r.initialize(),n.initialize()},getSegmentBaseInitSegment:function(e){return(m(e.representation.mimeType)?n:r).loadInitialization(e.representation,e.mediaType)},getSegmentList:function(e){return(m(e.mimeType)?n:r).loadSegments(e.representation,e.mediaType,e.representation?e.representation.indexRange:null)},reset:function(){r.reset(),n.reset()}},r=(0,h.default)(i).getInstance(),n=(0,p.default)(i).getInstance(),r.setConfig({baseURLController:c,dashMetrics:s,mediaPlayerModel:u,errHandler:l,eventBus:a,events:o,errors:e,debug:f,boxParser:d,requestModifier:g}),n.setConfig({baseURLController:c,dashMetrics:s,mediaPlayerModel:u,errHandler:l,eventBus:a,events:o,errors:e,debug:f,requestModifier:g}),t}i.__dashjs_factory_name="SegmentBaseController";r=n.default.getSingletonFactory(i);t.default=r},"./src/dash/controllers/SegmentsController.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/core/FactoryMaker.js"),u=r("./src/dash/utils/TimelineSegmentsGetter.js"),l=r("./src/dash/utils/TemplateSegmentsGetter.js"),c=r("./src/dash/utils/ListSegmentsGetter.js"),f=r("./src/dash/utils/SegmentBaseGetter.js");function i(t){t=t||{};var r,n=this.context,i=t.dashConstants,a=t.type,o=t.segmentBaseController;function s(e){return e?e.segments?r[i.SEGMENT_BASE]:r[e.segmentInfoType]:null}return r={},{initialize:function(e){r[i.SEGMENT_TIMELINE]=(0,u.default)(n).create(t,e),r[i.SEGMENT_TEMPLATE]=(0,l.default)(n).create(t,e),r[i.SEGMENT_LIST]=(0,c.default)(n).create(t,e),r[i.SEGMENT_BASE]=(0,f.default)(n).create(t,e)},updateInitData:function(e,t){return t?Promise.resolve():o.getSegmentBaseInitSegment({representation:e,mediaType:a})},updateSegmentData:function(e,t){return t?Promise.resolve():o.getSegmentList({mimeType:e.mimeType,representation:e,mediaType:a})},getSegmentByIndex:function(e,t,r){var n=s(e);return n?n.getSegmentByIndex(e,t,r):null},getSegmentByTime:function(e,t){var r=s(e);return r?r.getSegmentByTime(e,t):null},getMediaFinishedInformation:function(e){var t=s(e);return t?t.getMediaFinishedInformation(e):{numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN}}}}i.__dashjs_factory_name="SegmentsController";r=n.default.getClassFactory(i);t.default=r},"./src/dash/controllers/ServiceDescriptionController.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/core/Debug.js"),f=r("./src/streaming/constants/Constants.js"),d=r("./src/dash/constants/DashConstants.js"),g=[f.default.SERVICE_DESCRIPTION_DVB_LL_SCHEME],m="video",h="audio",p="any",y="all";function a(){var e,o,s,u,l,t=this.context;function r(){o={liveDelay:NaN,liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN}},minBitrate:{},maxBitrate:{},initialBitrate:{},contentSteering:null},s=[]}function c(e,t,r){try{o[e][t]=r/1e3}catch(e){u.error(e)}}return e={getServiceDescriptionSettings:function(){return o},getProducerReferenceTimeOffsets:function(){return s},calculateProducerReferenceTimeOffsets:function(e){try{var t,a,r=[];e&&0<e.length&&(t=[f.default.VIDEO,f.default.AUDIO,f.default.TEXT],a=l.getAvailabilityStartTime()/1e3,e.forEach(function(i){var e=t.reduce(function(e,t){return e=e.concat(l.getAllMediaInfoForType(i,t))},[]).reduce(function(r,n){return l.getProducerReferenceTimes(i,n).forEach(function(e){var t=l.getVoRepresentations(n);t&&0<t.length&&t[0].adaptation&&t[0].segmentInfoType===d.default.SEGMENT_TEMPLATE&&(t=t[0],t=new Date(e[d.default.WALL_CLOCK_TIME]).getTime()/1e3-(e[d.default.PRESENTATION_TIME]/t[d.default.TIMESCALE]-t[d.default.PRESENTATION_TIME_OFFSET]+i.start),r.push({id:e[d.default.ID],to:a-t}))}),r},[]);r=r.concat(e)})),s=r}catch(e){u.error(e),s=[]}},applyServiceDescription:function(e){var t,r,n,i,a;e&&e.serviceDescriptions&&(t=e.serviceDescriptions.filter(function(e){return g.includes(e.schemeIdUri)}),e=e.serviceDescriptions.filter(function(e){return null==e.schemeIdUri}),(t=0<t.length?t[t.length-1]:e[e.length-1])&&(t.latency&&0<t.latency.target&&(e=((e=t).schemeIdUri===f.default.SERVICE_DESCRIPTION_DVB_LL_SCHEME?function(e){var t=e.latency.target/1e3,r=!isNaN(e.latency.max)&&e.latency.max>e.latency.target?(e.latency.max-e.latency.target+500)/1e3:NaN,e=e.latency.referenceId||NaN;return{liveDelay:t,maxDrift:r,referenceId:e}}:function(e){var t=e.latency.target/1e3,r=!isNaN(e.latency.max)&&e.latency.max>e.latency.target?(e.latency.max-e.latency.target+500)/1e3:NaN,e=e.latency.referenceId||NaN;return{liveDelay:t,maxDrift:r,referenceId:e}})(e),0<s.length?(r=function(t){var e=0,r=s.filter(function(e){return e.id===t.referenceId});r=0===r.length?(e=0<s.length?s[0].to:0,s[0].id||NaN):(e=r[0].to||0,r[0].id||NaN);return{to:e,id:r}}(e),n=r.to,r=r.id,o.liveDelay=e.liveDelay-n,o.liveCatchup.maxDrift=e.maxDrift,u.debug("\n                Found latency properties coming from service description. Applied time offset of ".concat(n," from ProducerReferenceTime element with id ").concat(r,".\n                Live Delay: ").concat(e.liveDelay-n,", Live catchup max drift: ").concat(e.maxDrift,"\n            "))):(o.liveDelay=e.liveDelay,o.liveCatchup.maxDrift=e.maxDrift,u.debug("Found latency properties coming from service description: Live Delay: ".concat(e.liveDelay,", Live catchup max drift: ").concat(e.maxDrift)))),t.playbackRate&&(n=(r=t).playbackRate.min?Math.round(1e3*(r.playbackRate.min-1))/1e3:NaN,r=r.playbackRate.max?Math.round(1e3*(r.playbackRate.max-1))/1e3:NaN,o.liveCatchup.playbackRate.min=n,o.liveCatchup.playbackRate.max=r,u.debug("Found latency properties coming from service description: Live catchup min playback rate: ".concat(n)),u.debug("Found latency properties coming from service description: Live catchup max playback rate: ".concat(r))),t.operatingQuality,t.operatingBandwidth&&(e=t)&&e.operatingBandwidth&&e.operatingBandwidth.mediaType&&e.operatingBandwidth.mediaType!==y&&((i={}).minBandwidth=e.operatingBandwidth.min,i.maxBandwidth=e.operatingBandwidth.max,i.targetBandwidth=e.operatingBandwidth.target,a=[],e.operatingBandwidth.mediaType===m||e.operatingBandwidth.mediaType===h?a.push(e.operatingBandwidth.mediaType):e.operatingBandwidth.mediaType===p&&(a.push(h),a.push(m)),a.forEach(function(e){isNaN(i.minBandwidth)||c("minBitrate",e,i.minBandwidth),isNaN(i.maxBandwidth)||c("maxBitrate",e,i.maxBandwidth),isNaN(i.targetBandwidth)||c("initialBitrate",e,i.targetBandwidth)})),t.contentSteering&&(o.contentSteering=t.contentSteering)))},reset:function(){r()},setConfig:function(e){e&&e.adapter&&(l=e.adapter)}},u=(0,i.default)(t).getInstance().getLogger(e),r(),e}a.__dashjs_factory_name="ServiceDescriptionController",t.default=n.default.getSingletonFactory(a)},"./src/dash/models/DashManifestModel.js":function(e,t,r){"use strict";r.r(t);var v=r("./src/streaming/constants/Constants.js"),T=r("./src/dash/constants/DashConstants.js"),b=r("./src/dash/vo/Representation.js"),S=r("./src/dash/vo/AdaptationSet.js"),A=r("./src/dash/vo/Period.js"),n=r("./src/dash/vo/Mpd.js"),R=r("./src/dash/vo/UTCTiming.js"),I=r("./src/dash/vo/Event.js"),w=r("./src/dash/vo/BaseURL.js"),C=r("./src/dash/vo/EventStream.js"),N=r("./src/dash/vo/ProducerReferenceTime.js"),D=r("./src/dash/vo/ContentSteering.js"),M=r("./src/dash/vo/DescriptorType.js"),O=r("./src/streaming/utils/ObjectUtils.js"),P=r("./src/streaming/utils/URLUtils.js"),i=r("./src/core/FactoryMaker.js"),L=r("./src/core/Debug.js"),F=r("./src/streaming/vo/DashJSError.js"),x=r("./src/core/errors/Errors.js"),j=r("./src/streaming/thumbnail/ThumbnailTracks.js"),k=r("./src/dash/vo/MpdLocation.js"),U=r("./src/dash/vo/PatchLocation.js");function B(e,t){var r,n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=s(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,o=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){o=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(o)throw i}}}}function G(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(){var e,l,c,f,a=this.context,o=(0,P.default)(a).getInstance(),d=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function s(e,t){if(!e)throw new Error("adaptation is not defined");if(!t)throw new Error("type is not defined");if(e.Representation_asArray&&e.Representation_asArray.length){var r=y(e.Representation_asArray[0]);if(r&&0<r.length&&0<=j.THUMBNAILS_SCHEME_ID_URIS.indexOf(r[0].schemeIdUri))return t===v.default.IMAGE}if(e.ContentComponent_asArray&&0<e.ContentComponent_asArray.length){if(1<e.ContentComponent_asArray.length)return t===v.default.MUXED;if(e.ContentComponent_asArray[0].contentType===t)return!0}var n=t===v.default.TEXT?new RegExp("(ttml|vtt|wvtt|stpp)"):new RegExp(t);if(e.Representation_asArray&&e.Representation_asArray.length){r=e.Representation_asArray[0].codecs;if(n.test(r))return!0}if(e.hasOwnProperty(T.default.MIME_TYPE))return n.test(e.mimeType);if(e.Representation_asArray)for(var i,a=0;a<e.Representation_asArray.length;a++)if((i=e.Representation_asArray[a]).hasOwnProperty(T.default.MIME_TYPE))return n.test(i.mimeType);return!1}function g(e){if(!e)throw new Error("adaptation is not defined");if(e.hasOwnProperty(T.default.SEGMENT_TEMPLATE)||e.hasOwnProperty(T.default.SEGMENT_TIMELINE)||e.hasOwnProperty(T.default.SEGMENT_LIST)||e.hasOwnProperty(T.default.SEGMENT_BASE))return!0;if(e.Representation_asArray&&0<e.Representation_asArray.length){e=e.Representation_asArray[0];if(e.hasOwnProperty(T.default.SEGMENT_TEMPLATE)||e.hasOwnProperty(T.default.SEGMENT_TIMELINE)||e.hasOwnProperty(T.default.SEGMENT_LIST)||e.hasOwnProperty(T.default.SEGMENT_BASE))return!0}return!1}function m(e){return s(e,v.default.TEXT)}function t(){return function(e,t){return e.bandwidth-t.bandwidth}}function h(e){return e&&Array.isArray(e.Representation_asArray)&&e.Representation_asArray.sort(t()),e}function u(e,t){return e&&e.Period_asArray&&d(t)&&e.Period_asArray[t]?e.Period_asArray[t].AdaptationSet_asArray:[]}function r(e){return e&&e.Period_asArray?e.Period_asArray:[]}function p(e){var t=!1;return t=e&&e.hasOwnProperty("type")?e.type===T.default.DYNAMIC:t}function y(e){return e&&e.EssentialProperty_asArray&&e.EssentialProperty_asArray.length?e.EssentialProperty_asArray.map(function(e){return{schemeIdUri:e.schemeIdUri,value:e.value}}):null}function i(e,t,r){var n,i=[];if(!e)return i;for(n=0;n<e.length;n++){var a=new C.default;if(a.timescale=1,a.representation=t,!e[n].hasOwnProperty(v.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");a.schemeIdUri=e[n].schemeIdUri,e[n].hasOwnProperty(T.default.TIMESCALE)&&(a.timescale=e[n].timescale),e[n].hasOwnProperty(T.default.VALUE)&&(a.value=e[n].value),i.push(a),a.period=r}return i}function E(n){var i=[],e=n.BaseURL_asArray||[n.baseUri],a=!1;return e.some(function(e){var t,r;if(e)return t=new w.default,r=e.__text||e,o.isRelative(r)&&(a=!0,n.baseUri&&(r=o.resolve(r,n.baseUri))),t.url=r,e.hasOwnProperty(T.default.SERVICE_LOCATION)&&e.serviceLocation.length?t.serviceLocation=e.serviceLocation:t.serviceLocation=r,e.hasOwnProperty(T.default.DVB_PRIORITY)&&(t.dvb_priority=e[T.default.DVB_PRIORITY]),e.hasOwnProperty(T.default.DVB_WEIGHT)&&(t.dvb_weight=e[T.default.DVB_WEIGHT]),e.hasOwnProperty(T.default.AVAILABILITY_TIME_OFFSET)&&(t.availabilityTimeOffset=e[T.default.AVAILABILITY_TIME_OFFSET]),e.hasOwnProperty(T.default.AVAILABILITY_TIME_COMPLETE)&&(t.availabilityTimeComplete="false"!==e[T.default.AVAILABILITY_TIME_COMPLETE]),i.push(t),a}),i}function _(e){var t=new D.default;return t.serverUrl=e.__text,e.hasOwnProperty(T.default.DEFAULT_SERVICE_LOCATION)&&(t.defaultServiceLocation=e[T.default.DEFAULT_SERVICE_LOCATION],t.defaultServiceLocationArray=t.defaultServiceLocation.split(" ")),e.hasOwnProperty(T.default.QUERY_BEFORE_START)&&(t.queryBeforeStart="true"===e[T.default.QUERY_BEFORE_START].toLowerCase()),e.hasOwnProperty(T.default.CLIENT_REQUIREMENT)&&(t.clientRequirement="false"!==e[T.default.CLIENT_REQUIREMENT].toLowerCase()),t}return e={getIsTypeOf:s,getIsText:m,getIsFragmented:g,getProducerReferenceTimesForAdaptation:function(e){var t=e&&e.hasOwnProperty(T.default.PRODUCERREFERENCETIME_ASARRAY)?e[T.default.PRODUCERREFERENCETIME_ASARRAY]:[],r=((e&&e.hasOwnProperty(T.default.REPRESENTATION_ASARRAY)?e[T.default.REPRESENTATION_ASARRAY]:[]).forEach(function(e){e.hasOwnProperty(T.default.PRODUCERREFERENCETIME_ASARRAY)&&t.push.apply(t,G(e[T.default.PRODUCERREFERENCETIME_ASARRAY]))}),[]);return t.forEach(function(e){var t=new N.default;e.hasOwnProperty(T.default.ID)&&(t[T.default.ID]=e[T.default.ID],e.hasOwnProperty(T.default.WALL_CLOCK_TIME)&&(t[T.default.WALL_CLOCK_TIME]=e[T.default.WALL_CLOCK_TIME],e.hasOwnProperty(T.default.PRESENTATION_TIME)&&(t[T.default.PRESENTATION_TIME]=e[T.default.PRESENTATION_TIME],e.hasOwnProperty(T.default.INBAND)&&(t[T.default.INBAND]="false"!==e[T.default.INBAND]),e.hasOwnProperty(T.default.TYPE)&&(t[T.default.TYPE]=e[T.default.TYPE]),r.push(t))))}),r},getLanguageForAdaptation:function(e){var t="";return t=e&&e.hasOwnProperty(T.default.LANG)?e.lang:t},getViewpointForAdaptation:function(e){return e&&e.hasOwnProperty(T.default.VIEWPOINT_ASARRAY)&&e[T.default.VIEWPOINT_ASARRAY].length?e[T.default.VIEWPOINT_ASARRAY].map(function(e){return(new M.default).init(e)}):[]},getRolesForAdaptation:function(e){return e&&e.hasOwnProperty(T.default.ROLE_ASARRAY)&&e[T.default.ROLE_ASARRAY].length?e[T.default.ROLE_ASARRAY].map(function(e){return(new M.default).init(e)}):[]},getAccessibilityForAdaptation:function(e){return e&&e.hasOwnProperty(T.default.ACCESSIBILITY_ASARRAY)&&e[T.default.ACCESSIBILITY_ASARRAY].length?e[T.default.ACCESSIBILITY_ASARRAY].map(function(e){return(new M.default).init(e)}):[]},getAudioChannelConfigurationForAdaptation:function(e){return e&&e.hasOwnProperty(T.default.AUDIOCHANNELCONFIGURATION_ASARRAY)&&e[T.default.AUDIOCHANNELCONFIGURATION_ASARRAY].length?e[T.default.AUDIOCHANNELCONFIGURATION_ASARRAY].map(function(e){return(new M.default).init(e)}):[]},getAudioChannelConfigurationForRepresentation:function(e){return e&&e.hasOwnProperty(T.default.AUDIOCHANNELCONFIGURATION_ASARRAY)&&e[T.default.AUDIOCHANNELCONFIGURATION_ASARRAY].length?e[T.default.AUDIOCHANNELCONFIGURATION_ASARRAY].map(function(e){return(new M.default).init(e)}):[]},getAdaptationForIndex:function(e,t,r){return 0<(t=u(t,r)).length&&d(e)?t[e]:null},getIndexForAdaptation:function(e,t,r){if(!e)return-1;for(var n=u(t,r),i=0;i<n.length;i++)if((0,O.default)(a).getInstance().areEqual(n[i],e))return i;return-1},getAdaptationForId:function(e,t,r){for(var n=u(t,r),i=0,a=n.length;i<a;i++)if(n[i].hasOwnProperty(T.default.ID)&&n[i].id===e)return n[i];return null},getAdaptationsForType:function(e,t,r){for(var n=u(e,t),i=[],a=0,o=n.length;a<o;a++)s(n[a],r)&&i.push(h(n[a]));return i},getRealPeriods:r,getRealPeriodForIndex:function(e,t){return 0<(t=r(t)).length&&d(e)?t[e]:null},getCodec:function(e,t,r){var n=null;return e&&e.Representation_asArray&&0<e.Representation_asArray.length&&((t=d(t)&&0<=t&&t<e.Representation_asArray.length?e.Representation_asArray[t]:e.Representation_asArray[0])&&(n=t.mimeType+';codecs="'+t.codecs+'"',r&&void 0!==t.width&&(n+=';width="'+t.width+'";height="'+t.height+'"'))),n=n&&n.replace(/\sprofiles=[^;]*/g,"")},getSelectionPriority:function(e){try{var t=e&&void 0!==e.selectionPriority?parseInt(e.selectionPriority):1;return isNaN(t)?1:t}catch(e){return 1}},getMimeType:function(e){return e&&e.Representation_asArray&&0<e.Representation_asArray.length?e.Representation_asArray[0].mimeType:null},getKID:function(e){return e&&e.hasOwnProperty(T.default.CENC_DEFAULT_KID)?e[T.default.CENC_DEFAULT_KID]:null},getLabelsForAdaptation:function(e){if(!e||!Array.isArray(e.Label_asArray))return[];for(var t=[],r=0;r<e.Label_asArray.length;r++)t.push({lang:e.Label_asArray[r].lang,text:e.Label_asArray[r].__text||e.Label_asArray[r]});return t},getContentProtectionData:function(e){return e&&e.hasOwnProperty(T.default.CONTENTPROTECTION_ASARRAY)&&0!==e.ContentProtection_asArray.length?e.ContentProtection_asArray:null},getIsDynamic:p,getId:function(e){return e&&e[T.default.ID]||null},hasProfile:function(e,t){var r=!1;return r=e&&e.profiles&&0<e.profiles.length?-1!==e.profiles.indexOf(t):r},getDuration:function(e){return e=e&&e.hasOwnProperty(T.default.MEDIA_PRESENTATION_DURATION)?e.mediaPresentationDuration:e&&"dynamic"==e.type?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function(e){return e&&e.bandwidth?e.bandwidth:NaN},getManifestUpdatePeriod:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=NaN;return e&&e.hasOwnProperty(T.default.MINIMUM_UPDATE_PERIOD)&&(r=e.minimumUpdatePeriod),isNaN(r)?r:Math.max(r-t,1)},getPublishTime:function(e){return e&&e.hasOwnProperty(T.default.PUBLISH_TIME)?new Date(e[T.default.PUBLISH_TIME]):null},getRepresentationCount:function(e){return e&&Array.isArray(e.Representation_asArray)?e.Representation_asArray.length:0},getBitrateListForAdaptation:function(e){return((e=h(e))&&Array.isArray(e.Representation_asArray)?e.Representation_asArray:[]).map(function(e){return{bandwidth:e.bandwidth,width:e.width||0,height:e.height||0,scanType:e.scanType||null,id:e.id||null}})},getRepresentationFor:function(e,t){return t&&t.Representation_asArray&&0<t.Representation_asArray.length&&d(e)?t.Representation_asArray[e]:null},getRepresentationsForAdaptation:function(e){var t,r,n,i=[],a=function(e){if(e&&e.period&&d(e.period.index)){var t=e.period.mpd.manifest.Period_asArray[e.period.index];if(t&&t.AdaptationSet_asArray&&d(e.index))return h(t.AdaptationSet_asArray[e.index])}}(e);if(a&&a.Representation_asArray){e&&e.period&&d(e.period.index)&&((n=E(e.period.mpd.manifest))&&(r=n[0]));for(var o=0,s=a.Representation_asArray.length;o<s;++o){var u,l=a.Representation_asArray[o],c=new b.default;c.index=o,c.adaptation=e,l.hasOwnProperty(T.default.ID)&&(c.id=l.id),l.hasOwnProperty(T.default.CODECS)&&(c.codecs=l.codecs),l.hasOwnProperty(T.default.MIME_TYPE)&&(c.mimeType=l[T.default.MIME_TYPE]),l.hasOwnProperty(T.default.CODEC_PRIVATE_DATA)&&(c.codecPrivateData=l.codecPrivateData),l.hasOwnProperty(T.default.BANDWITH)&&(c.bandwidth=l.bandwidth),l.hasOwnProperty(T.default.WIDTH)&&(c.width=l.width),l.hasOwnProperty(T.default.HEIGHT)&&(c.height=l.height),l.hasOwnProperty(T.default.SCAN_TYPE)&&(c.scanType=l.scanType),l.hasOwnProperty(T.default.MAX_PLAYOUT_RATE)&&(c.maxPlayoutRate=l.maxPlayoutRate),l.hasOwnProperty(T.default.SEGMENT_BASE)?(t=l.SegmentBase,c.segmentInfoType=T.default.SEGMENT_BASE):l.hasOwnProperty(T.default.SEGMENT_LIST)?(t=l.SegmentList).hasOwnProperty(T.default.SEGMENT_TIMELINE)?c.segmentInfoType=T.default.SEGMENT_TIMELINE:c.segmentInfoType=T.default.SEGMENT_LIST:l.hasOwnProperty(T.default.SEGMENT_TEMPLATE)?((t=l.SegmentTemplate).hasOwnProperty(T.default.SEGMENT_TIMELINE)?c.segmentInfoType=T.default.SEGMENT_TIMELINE:c.segmentInfoType=T.default.SEGMENT_TEMPLATE,t.hasOwnProperty(T.default.INITIALIZATION_MINUS)&&(c.initialization=t.initialization.split("$Bandwidth$").join(l.bandwidth).split("$RepresentationID$").join(l.id))):c.segmentInfoType=T.default.BASE_URL,c.essentialProperties=y(l),t&&(t.hasOwnProperty(T.default.INITIALIZATION)?((u=t.Initialization).hasOwnProperty(T.default.SOURCE_URL)&&(c.initialization=u.sourceURL),u.hasOwnProperty(T.default.RANGE)&&(c.range=u.range)):m(a)&&g(a)&&a.mimeType&&-1===a.mimeType.indexOf("application/mp4")&&(c.range=0),t.hasOwnProperty(T.default.TIMESCALE)&&(c.timescale=t.timescale),t.hasOwnProperty(T.default.DURATION)?c.segmentDuration=t.duration/c.timescale:l.hasOwnProperty(T.default.SEGMENT_TEMPLATE)&&(t=l.SegmentTemplate).hasOwnProperty(T.default.SEGMENT_TIMELINE)&&(c.segmentDuration=function(e){if(!e||!e.S_asArray)return NaN;var t=e.S_asArray[0],e=e.S_asArray[1];return t.hasOwnProperty("d")?t.d:e.t-t.t}(t.SegmentTimeline)/c.timescale),t.hasOwnProperty(T.default.MEDIA)&&(c.media=t.media),t.hasOwnProperty(T.default.START_NUMBER)&&(c.startNumber=t.startNumber),t.hasOwnProperty(T.default.INDEX_RANGE)&&(c.indexRange=t.indexRange),t.hasOwnProperty(T.default.PRESENTATION_TIME_OFFSET)&&(c.presentationTimeOffset=t.presentationTimeOffset/c.timescale),t.hasOwnProperty(T.default.AVAILABILITY_TIME_OFFSET)?c.availabilityTimeOffset=t.availabilityTimeOffset:r&&void 0!==r.availabilityTimeOffset&&(c.availabilityTimeOffset=r.availabilityTimeOffset),t.hasOwnProperty(T.default.AVAILABILITY_TIME_COMPLETE)?c.availabilityTimeComplete="false"!==t.availabilityTimeComplete:r&&void 0!==r.availabilityTimeComplete&&(c.availabilityTimeComplete=r.availabilityTimeComplete)),c.MSETimeOffset=(u=void 0,u=c.presentationTimeOffset,c.adaptation.period.start-u),c.path=[e.period.index,e.index,o],i.push(c)}}return i},getAdaptationsForPeriod:function(e){var t,r,n,i=e&&d(e.index)?e.mpd.manifest.Period_asArray[e.index]:null,a=[];if(i&&i.AdaptationSet_asArray)for(n=0;n<i.AdaptationSet_asArray.length;n++)r=i.AdaptationSet_asArray[n],t=new S.default,r.hasOwnProperty(T.default.ID)&&(t.id=r.id),t.index=n,t.period=e,s(r,v.default.MUXED)?t.type=v.default.MUXED:s(r,v.default.AUDIO)?t.type=v.default.AUDIO:s(r,v.default.VIDEO)?t.type=v.default.VIDEO:m(r)?t.type=v.default.TEXT:s(r,v.default.IMAGE)?t.type=v.default.IMAGE:l.warn("Unknown Adaptation stream type"),a.push(t);return a},getRegularPeriods:function(e){for(var t=!!e&&p(e.manifest),r=[],n=null,i=null,a=null,o=null,s=0,u=e&&e.manifest&&e.manifest.Period_asArray?e.manifest.Period_asArray.length:0;s<u;s++)(i=e.manifest.Period_asArray[s]).hasOwnProperty(T.default.START)?(o=new A.default).start=i.start:null!==n&&n.hasOwnProperty(T.default.DURATION)&&null!==a?(o=new A.default).start=parseFloat((a.start+a.duration).toFixed(5)):0!==s||t||((o=new A.default).start=0),null!==a&&isNaN(a.duration)&&(null!==o?a.duration=parseFloat((o.start-a.start).toFixed(5)):l.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),null!==o&&(o.id=function(e,t){if(!e)throw new Error("Period cannot be null or undefined");t=A.default.DEFAULT_ID+"_"+t;e.hasOwnProperty(T.default.ID)&&0<e.id.length&&"__proto__"!==e.id&&(t=e.id);return t}(i,s),o.index=s,o.mpd=e,i.hasOwnProperty(T.default.DURATION)&&(o.duration=i.duration),a&&(a.nextPeriodId=o.id),r.push(o),n=i,a=o),o=i=null;return 0===r.length||null!==a&&isNaN(a.duration)&&(a.duration=parseFloat((function(e){!function(){if(!c||!c.hasOwnProperty("error"))throw new Error(v.default.MISSING_CONFIG_ERROR)}();var t,r=p(e.mpd.manifest);e.mpd.manifest.mediaPresentationDuration?t=e.mpd.manifest.mediaPresentationDuration:e.duration?t=e.duration:r?t=Number.POSITIVE_INFINITY:c.error(new F.default(x.default.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",e));return t}(a)-a.start).toFixed(5))),r},getMpd:function(e){var t=new n.default;return e&&((t.manifest=e).hasOwnProperty(T.default.AVAILABILITY_START_TIME)?t.availabilityStartTime=new Date(e.availabilityStartTime.getTime()):e.loadedTime&&(t.availabilityStartTime=new Date(e.loadedTime.getTime())),e.hasOwnProperty(T.default.AVAILABILITY_END_TIME)&&(t.availabilityEndTime=new Date(e.availabilityEndTime.getTime())),e.hasOwnProperty(T.default.MINIMUM_UPDATE_PERIOD)&&(t.minimumUpdatePeriod=e.minimumUpdatePeriod),e.hasOwnProperty(T.default.MEDIA_PRESENTATION_DURATION)&&(t.mediaPresentationDuration=e.mediaPresentationDuration),e.hasOwnProperty(T.default.SUGGESTED_PRESENTATION_DELAY)&&(t.suggestedPresentationDelay=e.suggestedPresentationDelay),e.hasOwnProperty(T.default.TIMESHIFT_BUFFER_DEPTH)&&(t.timeShiftBufferDepth=e.timeShiftBufferDepth),e.hasOwnProperty(T.default.MAX_SEGMENT_DURATION)&&(t.maxSegmentDuration=e.maxSegmentDuration),e.hasOwnProperty(T.default.PUBLISH_TIME)&&(t.publishTime=new Date(e.publishTime))),t},getEventsForPeriod:function(e){var t,r,n=e&&e.mpd&&e.mpd.manifest?e.mpd.manifest:null,i=(n=n?n.Period_asArray:null)&&e&&d(e.index)?n[e.index].EventStream_asArray:null,a=[];if(i)for(t=0;t<i.length;t++){var o=new C.default;if(o.period=e,o.timescale=1,!i[t].hasOwnProperty(v.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(o.schemeIdUri=i[t][v.default.SCHEME_ID_URI],i[t].hasOwnProperty(T.default.TIMESCALE)&&(o.timescale=i[t][T.default.TIMESCALE]),i[t].hasOwnProperty(T.default.VALUE)&&(o.value=i[t][T.default.VALUE]),i[t].hasOwnProperty(T.default.PRESENTATION_TIME_OFFSET)&&(o.presentationTimeOffset=i[t][T.default.PRESENTATION_TIME_OFFSET]),r=0;i[t].Event_asArray&&r<i[t].Event_asArray.length;r++){var s=i[t].Event_asArray[r],u=new I.default,l=(u.presentationTime=0,u.eventStream=o,s.hasOwnProperty(T.default.PRESENTATION_TIME)&&(u.presentationTime=s.presentationTime),o.presentationTimeOffset?o.presentationTimeOffset/o.timescale:0);u.calculatedPresentationTime=u.presentationTime/o.timescale+e.start-l,s.hasOwnProperty(T.default.DURATION)&&(u.duration=s.duration/o.timescale),s.hasOwnProperty(T.default.ID)?u.id=s.id:u.id=null,s.Signal&&s.Signal.Binary?u.messageData=f.decodeArray(s.Signal.Binary.toString()):u.messageData=s.messageData||s.__cdata||s.__text,a.push(u)}}return a},getEssentialPropertiesForRepresentation:y,getEventStreamForAdaptationSet:function(e,t,r){var n;return i(n=e&&e.Period_asArray&&t&&t.period&&d(t.period.index)&&(e=e.Period_asArray[t.period.index])&&e.AdaptationSet_asArray&&d(t.index)&&(e=e.AdaptationSet_asArray[t.index])?e.InbandEventStream_asArray:n,null,r)},getEventStreamForRepresentation:function(e,t,r){var n;return i(n=e&&e.Period_asArray&&t&&t.adaptation&&t.adaptation.period&&d(t.adaptation.period.index)&&(e=e.Period_asArray[t.adaptation.period.index])&&e.AdaptationSet_asArray&&d(t.adaptation.index)&&(e=e.AdaptationSet_asArray[t.adaptation.index])&&e.Representation_asArray&&d(t.index)&&(e=e.Representation_asArray[t.index])?e.InbandEventStream_asArray:n,t,r)},getUTCTimingSources:function(e){var t=p(e),r=!!e&&e.hasOwnProperty(T.default.AVAILABILITY_START_TIME),e=e?e.UTCTiming_asArray:null,n=[];return(t||r)&&e&&e.forEach(function(e){var t=new R.default;e.hasOwnProperty(v.default.SCHEME_ID_URI)&&(t.schemeIdUri=e.schemeIdUri,e.hasOwnProperty(T.default.VALUE)&&(t.value=e.value.toString(),n.push(t)))}),n},getBaseURLsFromElement:E,getRepresentationSortFunction:t,getContentSteering:function(e){if(e&&e.hasOwnProperty(T.default.CONTENT_STEERING_AS_ARRAY))return _(e[T.default.CONTENT_STEERING_AS_ARRAY][0])},getLocation:function(e){return e&&e.hasOwnProperty(T.default.LOCATION_AS_ARRAY)?e[T.default.LOCATION_AS_ARRAY].map(function(e){var t=e.__text||e,e=e.hasOwnProperty(T.default.SERVICE_LOCATION)?e[T.default.SERVICE_LOCATION]:null;return new k.default(t,e)}):[]},getPatchLocation:function(e){return e&&e.hasOwnProperty(T.default.PATCH_LOCATION_AS_ARRAY)?e[T.default.PATCH_LOCATION_AS_ARRAY].map(function(e){var t=e.__text||e,r=e.hasOwnProperty(T.default.SERVICE_LOCATION)?e[T.default.SERVICE_LOCATION]:null,e=e.hasOwnProperty(T.default.TTL)?1e3*parseFloat(e[T.default.TTL]):NaN;return new U.default(t,r,e)}):[]},getSuggestedPresentationDelay:function(e){return e&&e.hasOwnProperty(T.default.SUGGESTED_PRESENTATION_DELAY)?e.suggestedPresentationDelay:null},getAvailabilityStartTime:function(e){return e&&e.hasOwnProperty(T.default.AVAILABILITY_START_TIME)&&null!==e.availabilityStartTime?e.availabilityStartTime.getTime():null},getServiceDescriptions:function(e){var t=[];if(e&&e.hasOwnProperty(T.default.SERVICE_DESCRIPTION)){var r,n=B(e.ServiceDescription_asArray);try{for(n.s();!(r=n.n()).done;){var i,a=r.value,o=null,s=null,u=null,l=null,c=null,f=null,d=null;for(i in a)a.hasOwnProperty(i)&&(i===T.default.ID?o=a[i]:i===T.default.SERVICE_DESCRIPTION_SCOPE?s=a[i].schemeIdUri:i===T.default.SERVICE_DESCRIPTION_LATENCY?u={target:parseInt(a[i].target),max:parseInt(a[i].max),min:parseInt(a[i].min),referenceId:parseInt(a[i].referenceId)}:i===T.default.SERVICE_DESCRIPTION_PLAYBACK_RATE?l={max:parseFloat(a[i].max),min:parseFloat(a[i].min)}:i===T.default.SERVICE_DESCRIPTION_OPERATING_QUALITY?c={mediaType:a[i].mediaType,max:parseInt(a[i].max),min:parseInt(a[i].min),target:parseInt(a[i].target),type:a[i].type,maxQualityDifference:parseInt(a[i].maxQualityDifference)}:i===T.default.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH?f={mediaType:a[i].mediaType,max:parseInt(a[i].max),min:parseInt(a[i].min),target:parseInt(a[i].target)}:i===T.default.CONTENT_STEERING&&(d=_(a[i])));t.push({id:o,schemeIdUri:s,latency:u,playbackRate:l,operatingQuality:c,operatingBandwidth:f,contentSteering:d})}}catch(e){n.e(e)}finally{n.f()}}return t},getSegmentAlignment:function(e){return!(!e||!e.hasOwnProperty(T.default.SEGMENT_ALIGNMENT))&&"true"===e[T.default.SEGMENT_ALIGNMENT]},getSubSegmentAlignment:function(e){return!(!e||!e.hasOwnProperty(T.default.SUB_SEGMENT_ALIGNMENT))&&"true"===e[T.default.SUB_SEGMENT_ALIGNMENT]},getSupplementalPropertiesForAdaptation:function(e){var t={};if(e&&e.hasOwnProperty(T.default.SUPPLEMENTAL_PROPERTY_ASARRAY)){var r,n=B(e.SupplementalProperty_asArray);try{for(n.s();!(r=n.n()).done;){var i=r.value;i.hasOwnProperty(v.default.SCHEME_ID_URI)&&i.hasOwnProperty(T.default.VALUE)&&(t[i[v.default.SCHEME_ID_URI]]=i[T.default.VALUE])}}catch(e){n.e(e)}finally{n.f()}}return t},getSupplementalPropertiesAsArrayForAdaptation:function(e){return e&&e.hasOwnProperty(T.default.SUPPLEMENTAL_PROPERTY_ASARRAY)&&e.SupplementalProperty_asArray.length?e.SupplementalProperty_asArray.map(function(e){return(new M.default).init(e)}):[]},getSupplementalPropertiesForRepresentation:function(e){var t={};if(e&&e.hasOwnProperty(T.default.SUPPLEMENTAL_PROPERTY_ASARRAY)){var r,n=B(e.SupplementalProperty_asArray);try{for(n.s();!(r=n.n()).done;){var i=r.value;i.hasOwnProperty(v.default.SCHEME_ID_URI)&&i.hasOwnProperty(T.default.VALUE)&&(t[i[v.default.SCHEME_ID_URI]]=i[T.default.VALUE])}}catch(e){n.e(e)}finally{n.f()}}return t},getSupplementalPropertiesAsArrayForRepresentation:function(e){return e&&e.hasOwnProperty(T.default.SUPPLEMENTAL_PROPERTY_ASARRAY)&&e.SupplementalProperty_asArray.length?e.SupplementalProperty_asArray.map(function(e){return(new M.default).init(e)}):[]},setConfig:function(e){e&&(e.errHandler&&(c=e.errHandler),e.BASE64&&(f=e.BASE64))}},l=(0,L.default)(a).getInstance().getLogger(e),e}o.__dashjs_factory_name="DashManifestModel",t.default=i.default.getSingletonFactory(o)},"./src/dash/models/PatchManifestModel.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/dash/constants/DashConstants.js"),i=r("./src/core/FactoryMaker.js"),a=r("./src/core/Debug.js"),o=r("./src/dash/vo/SimpleXPath.js"),s=r("./src/dash/vo/PatchOperation.js");function u(){var e,i,t=this.context;return e={getIsPatch:function(e){return e&&e.hasOwnProperty(n.default.ORIGINAL_MPD_ID)||!1},getPublishTime:function(e){return e&&e.hasOwnProperty(n.default.PUBLISH_TIME)?new Date(e[n.default.PUBLISH_TIME]):null},getOriginalPublishTime:function(e){return e&&e.hasOwnProperty(n.default.ORIGINAL_PUBLISH_TIME)?new Date(e[n.default.ORIGINAL_PUBLISH_TIME]):null},getMpdId:function(e){return e&&e[n.default.ORIGINAL_MPD_ID]||null},getPatchOperations:function(e){return e?(e.__children||[]).map(function(e){var t=Object.keys(e)[0];if("add"!==t&&"remove"!==t&&"replace"!==t)return i.warn("Ignoring node of invalid action: ".concat(t)),null;var e=e[t],r=e.sel;if("add"===t&&e.type){if(!e.type.startsWith("@"))return i.warn("Ignoring add action for prefixed namespace declaration: ".concat(e.type,"=").concat(e.__text)),null;r="".concat(r,"/").concat(e.type)}var n=new o.default(r);if(!n.isValid())return i.warn("Ignoring action with invalid selector: ".concat(t," - ").concat(r)),null;r=null,n.findsAttribute()||n.findsTextReplace()?r=e.__text||"":"remove"!==t&&(r=e.__children.reduce(function(e,t){var r=Object.keys(t)[0];return"#text"!==r&&(e[r]=e[r]||[],e[r].push(t[r])),e},{})),n=new s.default(t,n,r);return"add"===t&&(n.position=e.pos),n}).filter(function(e){return!!e}):[]}},i=(0,a.default)(t).getInstance().getLogger(e),e}u.__dashjs_factory_name="PatchManifestModel",t.default=i.default.getSingletonFactory(u)},"./src/dash/parser/DashParser.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/core/FactoryMaker.js"),s=r("./src/dash/parser/objectiron.js"),u=r("./externals/xml2json.js"),l=r("./src/dash/parser/matchers/StringMatcher.js"),c=r("./src/dash/parser/matchers/DurationMatcher.js"),f=r("./src/dash/parser/matchers/DateTimeMatcher.js"),d=r("./src/dash/parser/matchers/NumericMatcher.js"),g=r("./src/dash/parser/matchers/LangMatcher.js"),m=r("./src/dash/parser/maps/RepresentationBaseValuesMap.js"),h=r("./src/dash/parser/maps/SegmentValuesMap.js");function i(e){var i,t,a,o,r=this.context,e=(e=e||{}).debug;return i=e.getLogger(e={parse:function(e){var t=window.performance.now();if(!(e=a.xml_str2json(e)))throw new Error("parsing the manifest failed");var r=window.performance.now(),n=(e.Patch?((e=e.Patch).add_asArray&&e.add_asArray.forEach(function(e){return o.run(e)}),e.replace_asArray&&e.replace_asArray.forEach(function(e){return o.run(e)})):(e=e.MPD,o.run(e)),window.performance.now());return i.info("Parsing complete: ( xml2json: "+(r-t).toPrecision(3)+"ms, objectiron: "+(n-r).toPrecision(3)+"ms, total: "+((n-t)/1e3).toPrecision(3)+"s)"),e.protocol="DASH",e},getMatchers:function(){return t},getIron:function(){return o}}),t=[new c.default,new f.default,new d.default,new g.default,new l.default],a=new u.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!0,ignoreRoot:!1,matchers:t}),o=(0,s.default)(r).create({adaptationset:new m.default,period:new h.default}),e}i.__dashjs_factory_name="DashParser",t.default=n.default.getClassFactory(i)},"./src/dash/parser/maps/CommonProperty.js":function(e,t,r){"use strict";function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.r(t);r=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this._name=e,this._merge=(e=e)&&e.length&&e.charAt(0)===e.charAt(0).toUpperCase()}var e,r,n;return e=t,(r=[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}])&&i(e.prototype,r),n&&i(e,n),t}();t.default=r},"./src/dash/parser/maps/MapNode.js":function(e,t,r){"use strict";r.r(t);var a=r("./src/dash/parser/maps/CommonProperty.js");function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r=function(){function i(e,t,r){var n=this;if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this._name=e||"",this._properties=[],this._children=r||[],Array.isArray(t)&&t.forEach(function(e){n._properties.push(new a.default(e))})}var e,t,r;return e=i,(t=[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}])&&n(e.prototype,t),r&&n(e,r),i}();t.default=r},"./src/dash/parser/maps/RepresentationBaseValuesMap.js":function(e,t,r){"use strict";r.r(t);var i=r("./src/dash/parser/maps/MapNode.js"),a=r("./src/dash/constants/DashConstants.js");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=l(r),t=(e=n?(e=l(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==o(e)&&"function"!=typeof e){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r=function(e){var t=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e);var r=u(n);function n(){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");var e=[a.default.PROFILES,a.default.WIDTH,a.default.HEIGHT,a.default.SAR,a.default.FRAMERATE,a.default.AUDIO_SAMPLING_RATE,a.default.MIME_TYPE,a.default.SEGMENT_PROFILES,a.default.CODECS,a.default.MAXIMUM_SAP_PERIOD,a.default.START_WITH_SAP,a.default.MAX_PLAYOUT_RATE,a.default.CODING_DEPENDENCY,a.default.SCAN_TYPE,a.default.FRAME_PACKING,a.default.AUDIO_CHANNEL_CONFIGURATION,a.default.CONTENT_PROTECTION,a.default.ESSENTIAL_PROPERTY,a.default.ESSENTIAL_PROPERTY+"_asArray",a.default.SUPPLEMENTAL_PROPERTY,a.default.INBAND_EVENT_STREAM];return r.call(this,a.default.ADAPTATION_SET,e,[new i.default(a.default.REPRESENTATION,e,[new i.default(a.default.SUB_REPRESENTATION,e)])])}return n}(i.default);t.default=r},"./src/dash/parser/maps/SegmentValuesMap.js":function(e,t,r){"use strict";r.r(t);var i=r("./src/dash/parser/maps/MapNode.js"),a=r("./src/dash/constants/DashConstants.js");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=l(r),t=(e=n?(e=l(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==o(e)&&"function"!=typeof e){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r=function(e){var t=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e);var r=u(n);function n(){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");var e=[a.default.SEGMENT_BASE,a.default.SEGMENT_TEMPLATE,a.default.SEGMENT_LIST];return r.call(this,a.default.PERIOD,e,[new i.default(a.default.ADAPTATION_SET,e,[new i.default(a.default.REPRESENTATION,e)])])}return n}(i.default);t.default=r},"./src/dash/parser/matchers/BaseMatcher.js":function(e,t,r){"use strict";function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.r(t);r=function(){function r(e,t){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");this._test=e,this._converter=t}var e,t,n;return e=r,(t=[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}])&&i(e.prototype,t),n&&i(e,n),r}();t.default=r},"./src/dash/parser/matchers/DateTimeMatcher.js":function(e,t,r){"use strict";r.r(t);r=r("./src/dash/parser/matchers/BaseMatcher.js");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=s(r),t=(e=n?(e=s(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==i(e)&&"function"!=typeof e){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,r=function(e){var t=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e);var r=o(n);function n(){if(this instanceof n)return r.call(this,function(e){return u.test(e.value)},function(e){var t,e=u.exec(e),r=Date.UTC(parseInt(e[1],10),parseInt(e[2],10)-1,parseInt(e[3],10),parseInt(e[4],10),parseInt(e[5],10),e[6]&&parseInt(e[6],10)||0,e[7]&&1e3*parseFloat(e[7])||0);return e[9]&&e[10]&&(t=60*parseInt(e[9],10)+parseInt(e[10],10),r+=("+"===e[8]?-1:1)*t*60*1e3),new Date(r)});throw new TypeError("Cannot call a class as a function")}return n}(r.default);t.default=r},"./src/dash/parser/matchers/DurationMatcher.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/dash/parser/matchers/BaseMatcher.js"),i=r("./src/streaming/constants/Constants.js"),a=r("./src/dash/constants/DashConstants.js");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=l(r),t=(e=n?(e=l(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==o(e)&&"function"!=typeof e){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,r=function(e){var t=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e);var r=u(n);function n(){if(this instanceof n)return r.call(this,function(e){for(var t=[a.default.MIN_BUFFER_TIME,a.default.MEDIA_PRESENTATION_DURATION,a.default.MINIMUM_UPDATE_PERIOD,a.default.TIMESHIFT_BUFFER_DEPTH,a.default.MAX_SEGMENT_DURATION,a.default.MAX_SUBSEGMENT_DURATION,a.default.SUGGESTED_PRESENTATION_DELAY,a.default.START,i.default.START_TIME,a.default.DURATION],r=t.length,n=0;n<r;n++)if(e.nodeName===t[n])return c.test(e.value);return!1},function(e){var e=c.exec(e),t=31536e3*parseFloat(e[3]||0)+2592e3*parseFloat(e[5]||0)+86400*parseFloat(e[7]||0)+3600*parseFloat(e[9]||0)+60*parseFloat(e[11]||0)+parseFloat(e[13]||0);return t=void 0!==e[1]?-t:t});throw new TypeError("Cannot call a class as a function")}return n}(n.default);t.default=r},"./src/dash/parser/matchers/LangMatcher.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/dash/parser/matchers/BaseMatcher.js"),i=r("./src/dash/constants/DashConstants.js"),a=r("./node_modules/bcp-47-normalize/index.js"),o=r.n(a);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=f(r),t=(e=n?(e=f(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==s(e)&&"function"!=typeof e){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r=function(e){var t=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e);var r=c(n);function n(){if(this instanceof n)return r.call(this,function(e,t){u(r={},i.default.ADAPTATION_SET,[i.default.LANG]),u(r,i.default.REPRESENTATION,[i.default.LANG]),u(r,i.default.CONTENT_COMPONENT,[i.default.LANG]),u(r,i.default.LABEL,[i.default.LANG]),u(r,i.default.GROUP_LABEL,[i.default.LANG]);var r;return!!r.hasOwnProperty(t)&&(void 0!==(r=r[t])&&0<=r.indexOf(e.name))},function(e){var t=o()(e);return void 0!==t?t:String(e)});throw new TypeError("Cannot call a class as a function")}return n}(n.default);t.default=r},"./src/dash/parser/matchers/NumericMatcher.js":function(e,t,r){"use strict";r.r(t);r=r("./src/dash/parser/matchers/BaseMatcher.js");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=s(r),t=(e=n?(e=s(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==i(e)&&"function"!=typeof e){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,r=function(e){var t=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e);var r=o(n);function n(){if(this instanceof n)return r.call(this,function(e){return u.test(e.value)},function(e){return parseFloat(e)});throw new TypeError("Cannot call a class as a function")}return n}(r.default);t.default=r},"./src/dash/parser/matchers/StringMatcher.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/dash/parser/matchers/BaseMatcher.js"),i=r("./src/dash/constants/DashConstants.js");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=l(r),t=(e=n?(e=l(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==a(e)&&"function"!=typeof e){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r=function(e){var t=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e);var r=u(n);function n(){if(this instanceof n)return r.call(this,function(e,t){o(r={},i.default.MPD,[i.default.ID,i.default.PROFILES]),o(r,i.default.PERIOD,[i.default.ID]),o(r,i.default.BASE_URL,[i.default.SERVICE_LOCATION,i.default.BYTE_RANGE]),o(r,i.default.SEGMENT_BASE,[i.default.INDEX_RANGE]),o(r,i.default.INITIALIZATION,[i.default.RANGE]),o(r,i.default.REPRESENTATION_INDEX,[i.default.RANGE]),o(r,i.default.SEGMENT_LIST,[i.default.INDEX_RANGE]),o(r,i.default.BITSTREAM_SWITCHING,[i.default.RANGE]),o(r,i.default.SEGMENT_URL,[i.default.MEDIA_RANGE,i.default.INDEX_RANGE]),o(r,i.default.SEGMENT_TEMPLATE,[i.default.INDEX_RANGE,i.default.MEDIA,i.default.INDEX,i.default.INITIALIZATION_MINUS,i.default.BITSTREAM_SWITCHING_MINUS]),o(r,i.default.ASSET_IDENTIFIER,[i.default.VALUE,i.default.ID]),o(r,i.default.EVENT_STREAM,[i.default.VALUE]),o(r,i.default.ADAPTATION_SET,[i.default.PROFILES,i.default.MIME_TYPE,i.default.SEGMENT_PROFILES,i.default.CODECS,i.default.CONTENT_TYPE]),o(r,i.default.FRAME_PACKING,[i.default.VALUE,i.default.ID]),o(r,i.default.AUDIO_CHANNEL_CONFIGURATION,[i.default.VALUE,i.default.ID]),o(r,i.default.CONTENT_PROTECTION,[i.default.VALUE,i.default.ID]),o(r,i.default.ESSENTIAL_PROPERTY,[i.default.VALUE,i.default.ID]),o(r,i.default.SUPPLEMENTAL_PROPERTY,[i.default.VALUE,i.default.ID]),o(r,i.default.INBAND_EVENT_STREAM,[i.default.VALUE,i.default.ID]),o(r,i.default.ACCESSIBILITY,[i.default.VALUE,i.default.ID]),o(r,i.default.ROLE,[i.default.VALUE,i.default.ID]),o(r,i.default.RATING,[i.default.VALUE,i.default.ID]),o(r,i.default.VIEWPOINT,[i.default.VALUE,i.default.ID]),o(r,i.default.CONTENT_COMPONENT,[i.default.CONTENT_TYPE]),o(r,i.default.REPRESENTATION,[i.default.ID,i.default.DEPENDENCY_ID,i.default.MEDIA_STREAM_STRUCTURE_ID]),o(r,i.default.SUBSET,[i.default.ID]),o(r,i.default.METRICS,[i.default.METRICS_MINUS]),o(r,i.default.REPORTING,[i.default.VALUE,i.default.ID]);var r;return!!r.hasOwnProperty(t)&&(void 0!==(r=r[t])&&0<=r.indexOf(e.name))},function(e){return String(e)});throw new TypeError("Cannot call a class as a function")}return n}(n.default);t.default=r},"./src/dash/parser/objectiron.js":function(e,t,r){"use strict";r.r(t);r=r("./src/core/FactoryMaker.js");function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(c){function v(e,t){for(var r=0,n=e.children.length;r<n;++r){var i=e.children[r],a=t[i.name+"_asArray"];if(a)for(var o=0,s=a.length;o<s;++o){for(var u=a[o],l=(y=_=E=p=h=m=g=d=f=c=l=void 0,e.properties),c=t,f=u,d=0,g=l.length;d<g;++d){var m=l[d];if(c[m.name])if(f[m.name]){if(m.merge){var h=c[m.name],p=f[m.name];if("object"===T(h)&&"object"===T(p)){y=_=E=void 0;var y,E=h,_=p;for(y in E)_.hasOwnProperty(y)||(_[y]=E[y])}else f[m.name]=h+p}}else f[m.name]=c[m.name]}v(i,u)}}}return{run:function(e){if(null===e||"object"!==T(e))return e;if(e.Period_asArray&&"period"in c)for(var t=c.period,r=e.Period_asArray,n=0,i=r.length;n<i;++n){var a=r[n];if(v(t,a),"adaptationset"in c){var o=a.AdaptationSet_asArray;if(o)for(var s=c.adaptationset,u=0,l=o.length;u<l;++u)v(s,o[u])}}return e}}}n.__dashjs_factory_name="ObjectIron";r=r.default.getClassFactory(n);t.default=r},"./src/dash/utils/ListSegmentsGetter.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/streaming/constants/Constants.js"),c=r("./src/dash/utils/SegmentsUtils.js");function a(e,s){var u=(e=e||{}).timelineConverter;function l(){if(!u||!u.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(i.default.MISSING_CONFIG_ERROR)}function n(e,t){if(l(),!e)return null;var r=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,n=r.SegmentURL_asArray.length,i=e&&!isNaN(e.startNumber)?e.startNumber:1,a=Math.max(i-1,0),a=Math.max(t-a,0),o=null;return a<n&&(n=r.SegmentURL_asArray[a],(o=(0,c.getIndexBasedSegment)(u,s,e,t))&&(o.replacementTime=(i+t-1)*e.segmentDuration,o.media=n.media||"",o.mediaRange=n.mediaRange,o.indexRange=n.indexRange)),o}return{getSegmentByIndex:n,getSegmentByTime:function(e,t){if(l(),!e)return null;var r=e.segmentDuration;return isNaN(r)?null:(t=u.calcPeriodRelativeTimeFromMpdRelativeTime(e,t),n(e,Math.floor(t/r)))},getMediaFinishedInformation:function(e){var t={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!e)return t;var r=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,e=e&&!isNaN(e.startNumber)?e.startNumber:1,e=Math.max(e-1,0);return t.numberOfSegments=e+r.SegmentURL_asArray.length,t}}}a.__dashjs_factory_name="ListSegmentsGetter";r=n.default.getClassFactory(a);t.default=r},"./src/dash/utils/Round10.js":function(e,t,r){"use strict";function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.r(t),r.d(t,{default:function(){return n}});var n=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")}var t,r,n;return t=e,n=[{key:"round10",value:function(e,t){return r="round",e=e,void 0!==(t=t)&&0!=+t?(t=+t,null===(e=+e)||isNaN(e)||"number"!=typeof t||t%1!=0?NaN:(e=e.toString().split("e"),+((e=(e=Math[r](+(e[0]+"e"+(e[1]?+e[1]-t:-t)))).toString().split("e"))[0]+"e"+(e[1]?+e[1]+t:t)))):Math[r](e);var r}}],(r=null)&&i(t.prototype,r),n&&i(t,n),e}()},"./src/dash/utils/SegmentBaseGetter.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/streaming/constants/Constants.js");function a(e){var t=(e=e||{}).timelineConverter;function a(){if(!t||!t.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(i.default.MISSING_CONFIG_ERROR)}function r(e,t){if(a(),!e)return null;var r,n=e.segments?e.segments.length:-1;if(t<n&&(r=e.segments[t])&&r.index===t)return r;for(var i=0;i<n;i++)if((r=e.segments[i])&&r.index===t)return r;return null}return{getSegmentByIndex:r,getSegmentByTime:function(e,t){return a(),r(e,function(e,t){if(!e)return-1;var r,n,i,a,o,s=e.segments,u=s?s.length:null,l=-1;if(s&&0<u)for(o=0;o<u;o++)if(n=s[o],i=n.presentationStartTime,a=n.duration,i<=t+(r=a/2)&&t-r<i+a){l=n.index;break}return l}(e,t))},getMediaFinishedInformation:function(e){var t={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return e&&e.segments&&(t.numberOfSegments=e.segments.length),t}}}a.__dashjs_factory_name="SegmentBaseGetter";r=n.default.getClassFactory(a);t.default=r},"./src/dash/utils/SegmentsUtils.js":function(e,t,r){"use strict";r.r(t),r.d(t,{getIndexBasedSegment:function(){return a},getTimeBasedSegment:function(){return o},replaceIDForTemplate:function(){return i},replaceTokenForTemplate:function(){return d},unescapeDollarsInTemplate:function(){return n}});var l=r("./src/dash/vo/Segment.js");function f(e,t){for(;e.length<t;)e="0"+e;return e}function n(e){return e&&e.split("$$").join("$")}function i(e,t){if(!t||!e||-1===e.indexOf("$RepresentationID$"))return e;t=t.toString();return e.split("$RepresentationID$").join(t)}function d(e,t,r){var n,i,a,o,s,u,l=t.length,c="%0".length;if(!e)return e;for(;;){if((n=e.indexOf("$"+t))<0)return e;if((i=e.indexOf("$",n+l))<0)return e;if(n<(a=e.indexOf("%0",n+l))&&a<i)switch(o=e.charAt(i-1),s=parseInt(e.substring(a+c,i-1),10),o){case"d":case"i":case"u":u=f(r.toString(),s);break;case"x":u=f(r.toString(16),s);break;case"X":u=f(r.toString(16),s).toUpperCase();break;case"o":u=f(r.toString(8),s);break;default:return e}else u=r;e=e.substring(0,n)+u+e.substring(i+1)}}function g(e,t,r,n,i,a,o,s){var u=new l.default;return u.representation=e,u.duration=t,u.presentationStartTime=r,u.mediaStartTime=n,u.availabilityStartTime=i.calcAvailabilityStartTimeFromPresentationTime(a,e,o),u.availabilityEndTime=i.calcAvailabilityEndTimeFromPresentationTime(a+t,e,o),u.wallStartTime=i.calcWallTimeForSegment(u,o),u.replacementNumber=u.representation.startNumber+s,u.index=s,u}function m(e,t,r,n){var i=t.adaptation.period;if(!(isFinite(i.duration)&&i.start+i.duration<=r.presentationStartTime)){if(n){if("INF"===t.availabilityTimeOffset)return 1;i=e.getClientReferenceTime();return r.availabilityStartTime.getTime()<=i&&(!isFinite(r.availabilityEndTime)||r.availabilityEndTime.getTime()>=i)}return 1}}function a(e,t,r,n){var i=r.segmentDuration,a=(isNaN(i)&&(i=r.adaptation.period.duration),parseFloat((r.adaptation.period.start+n*i).toFixed(5))),o=parseFloat((a+i).toFixed(5)),i=g(r,i,a,e.calcMediaTimeFromPresentationTime(a,r),e,o,t,n);return m(e,r,i,t)?i:null}function o(e,t,r,n,i,a,o,s,u,l){var c=n/a,i=i/a,a=e.calcPresentationTimeFromMediaTime(c,r),c=g(r,i,a,c,e,a+i,t,u);return m(e,r,c,t)?(c.replacementTime=l||n,o=d(o,"Number",c.replacementNumber),o=d(o,"Time",c.replacementTime),c.media=o,c.mediaRange=s,c):null}},"./src/dash/utils/TemplateSegmentsGetter.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/core/FactoryMaker.js"),s=r("./src/streaming/constants/Constants.js"),u=r("./src/dash/utils/SegmentsUtils.js");function i(e,i){var a=(e=e||{}).timelineConverter;function o(){if(!a||!a.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(s.default.MISSING_CONFIG_ERROR)}function n(e,t){if(o(),!e)return null;var r=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate,n=(t=Math.max(t,0),(0,u.getIndexBasedSegment)(a,i,e,t));return n&&(n.replacementTime=Math.round((t-1)*e.segmentDuration*e.timescale,10),t=r.media,t=(0,u.replaceTokenForTemplate)(t,"Number",n.replacementNumber),t=(0,u.replaceTokenForTemplate)(t,"Time",n.replacementTime),n.media=t),n}return{getSegmentByIndex:n,getSegmentByTime:function(e,t){if(o(),!e)return null;var r=e.segmentDuration;return isNaN(r)?null:(t=a.calcPeriodRelativeTimeFromMpdRelativeTime(e,t),n(e,Math.floor(t/r)))},getMediaFinishedInformation:function(e){var t={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!e)return t;var r=e.segmentDuration;return isNaN(r)?t.numberOfSegments=1:t.numberOfSegments=Math.ceil(e.adaptation.period.duration/r),t}}}i.__dashjs_factory_name="TemplateSegmentsGetter";r=n.default.getClassFactory(i);t.default=r},"./src/dash/utils/TimelineConverter.js":function(e,t,r){"use strict";r.r(t);var y=r("./src/core/EventBus.js"),E=r("./src/core/events/Events.js"),n=r("./src/core/FactoryMaker.js"),_=r("./src/dash/constants/DashConstants.js"),v=r("./src/dash/models/DashManifestModel.js"),T=r("./src/core/Settings.js"),b=r("./src/streaming/constants/Constants.js"),S=r("./src/streaming/MediaPlayerEvents.js"),A=r("./src/streaming/constants/ConformanceViolationConstants.js");function i(){var e,f,r,n,t=this.context,u=(0,y.default)(t).getInstance(),l=(0,T.default)(t).getInstance();function i(e){n=e}function a(e,t,r,n){var i=t.adaptation.period.mpd,a=i.availabilityStartTime;return n?r&&i.timeShiftBufferDepth!==Number.POSITIVE_INFINITY?new Date(a.getTime()+1e3*(e+i.timeShiftBufferDepth)):i.availabilityEndTime:r?(n=t.availabilityTimeOffset,new Date(a.getTime()+1e3*(e-n))):a}function c(e,t){return(e.getTime()-t.mpd.availabilityStartTime.getTime()+1e3*n)/1e3}function d(e,t){return e+(t.adaptation.period.start-t.presentationTimeOffset)}function g(e){var r={start:NaN,end:NaN},t=e[0].getAdapter().getRegularPeriods()[0],n=c(new Date,t);if(!e||0===e.length)return{range:r,now:n};e.forEach(function(e){var t=e.getAdapter(),e=t.getMediaInfoForType(e.getStreamInfo(),b.default.VIDEO)||t.getMediaInfoForType(e.getStreamInfo(),b.default.AUDIO),t=t.getVoRepresentations(e)[0],e={start:NaN,end:NaN};t&&(t.segmentInfoType===_.default.SEGMENT_TIMELINE?e=function(e){var t,r,n,i,a=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index],a=f.getRepresentationFor(e.index,a),a=a.SegmentTemplate||a.SegmentList,o=a.SegmentTimeline,a=a.timescale,s=o.S_asArray,o={start:0,end:0},u=s[0].t,l=!isNaN(u),u=l?u:0,c=0;l&&(o.start=d(u/a,e));for(n=0,i=s.length;n<i;n++)t=s[n],r=0,t.hasOwnProperty("r")&&(r=t.r),c+=t.d*(1+r);return o.end=d((u+c)/a,e),o}(t):(t=t.adaptation.period,e.start=t.start,e.end=Math.max(n,t.start+t.duration))),!isNaN(e.start)&&(isNaN(r.start)||r.start>e.start)&&(r.start=e.start),!isNaN(e.end)&&(isNaN(r.end)||r.end<e.end)&&(r.end=e.end)}),r.end=Math.min(n,r.end);var i=h(e,r.end,!0);return r.end=isNaN(i)?r.end:i,r.start=t&&t.mpd&&t.mpd.timeShiftBufferDepth&&!isNaN(t.mpd.timeShiftBufferDepth)&&!isNaN(r.end)?Math.max(r.end-t.mpd.timeShiftBufferDepth,r.start):r.start,r.start=h(e,r.start),{range:r,now:n}}function m(e,t){r=e-t.end}function h(e,t,r){var n=2<arguments.length&&void 0!==r&&r;try{for(var i=0,a=!1,o=NaN;!a&&i<e.length;){var s=e[i].getStreamInfo();s.start<=t&&(!isFinite(s.duration)||s.start+s.duration>=t)?(o=t,a=!0):!n&&s.start>t&&(isNaN(o)||s.start<o)?o=s.start:n&&s.start+s.duration<t&&(isNaN(o)||s.start+s.duration>o)&&(o=s.start+s.duration),i+=1}return o}catch(e){return t}}function o(e){void 0===e.offset||isNaN(e.offset)||i(e.offset/1e3)}function s(){r=n=0}function p(){u.off(E.default.UPDATE_TIME_SYNC_OFFSET,o,this),s()}return e={initialize:function(){s(),u.on(E.default.UPDATE_TIME_SYNC_OFFSET,o,this)},getClientTimeOffset:function(){return n},setClientTimeOffset:i,getClientReferenceTime:function(){return Date.now()-1e3*r+1e3*n},calcAvailabilityStartTimeFromPresentationTime:function(e,t,r){return a(e,t,r)},calcAvailabilityEndTimeFromPresentationTime:function(e,t,r){return a(e,t,r,!0)},calcPresentationTimeFromWallTime:c,calcPresentationTimeFromMediaTime:d,calcPeriodRelativeTimeFromMpdRelativeTime:function(e,t){return t-e.adaptation.period.start},calcMediaTimeFromPresentationTime:function(e,t){return e-t.adaptation.period.start+t.presentationTimeOffset},calcWallTimeForSegment:function(e,t){var r;return t&&(t=e.representation.adaptation.period.mpd.suggestedPresentationDelay,t=e.presentationStartTime+t,r=new Date(e.availabilityStartTime.getTime()+1e3*t)),r},calcTimeShiftBufferWindow:function(e,t){if(t)if(l.get().streaming.timeShiftBuffer.calcFromSegmentTimeline)return m((t=g(e)).now,t.range),t.range;else{t=e;var r={start:NaN,end:NaN};if(!t||0===t.length)return r;var n=t[0].getAdapter().getRegularPeriods()[0],i=c(new Date,n),n=n.mpd.timeShiftBufferDepth,a=isNaN(n)?0:i-n;r.start=h(t,a),r.end=!isNaN(r.start)&&i<r.start?i:h(t,i,!0),!isNaN(n)&&r.end<i-n&&(r.end=NaN);if(l.get().streaming.timeShiftBuffer.fallbackToSegmentTimeline){a=g(t);if(a.range.end<r.start)return u.trigger(S.default.CONFORMANCE_VIOLATION,{level:A.default.LEVELS.WARNING,event:A.default.EVENTS.INVALID_DVR_WINDOW}),m(a.now,a.range),a.range}return r;return}var o,s;return i={start:NaN,end:NaN},o=0,s=NaN,e.forEach(function(e){e=e.getStreamInfo();o+=e.duration,(isNaN(s)||e.start<s)&&(s=e.start)}),i.start=s,i.end=s+o,i},reset:p},f=(0,v.default)(t).getInstance(),p(),e}i.__dashjs_factory_name="TimelineConverter",t.default=n.default.getSingletonFactory(i)},"./src/dash/utils/TimelineSegmentsGetter.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/streaming/constants/Constants.js"),m=r("./src/dash/utils/SegmentsUtils.js");function a(e,d){var g=(e=e||{}).timelineConverter,u=e.dashMetrics;function t(){if(!g)throw new Error(i.default.MISSING_CONFIG_ERROR)}function r(e,t){for(var r,n,i,a=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate||e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,o=a.SegmentTimeline,s=a.SegmentURL_asArray,u=0,l=-1,c=e.timescale,f=o.S_asArray,d=!1,g=0,m=f.length;g<m&&!d;g++)for(n=0,(i=f[g]).hasOwnProperty("r")&&(n=i.r),i.hasOwnProperty("t")&&(u=i.t),n<0&&(n=h(e,f[g+1],i,c,u/c)),r=0;r<=n&&!d;r++)(d=t(u,a,s,i,c,++l,g))&&(e.segmentDuration=i.d/c),u+=i.d}function h(e,t,r,n,i){var a;if(t&&t.hasOwnProperty("t"))a=t.t/n;else try{var o,s=0;s=isNaN(e.adaptation.period.start)||isNaN(e.adaptation.period.duration)||!isFinite(e.adaptation.period.duration)?(o=u.getCurrentDVRInfo(),isNaN(o.end)?0:o.end):e.adaptation.period.start+e.adaptation.period.duration,a=g.calcMediaTimeFromPresentationTime(s,e),e.segmentDuration=r.d/n}catch(e){a=0}return Math.max(Math.ceil((a-i)/(r.d/n))-1,0)}return{getSegmentByIndex:function(u,e,l){if(t(),!u)return null;var c=null,f=!1;return r(u,function(e,t,r,n,i,a,o){var s;return f||l<0?(t=t.media,s=n.mediaRange,r&&(t=r[o].media||"",s=r[o].mediaRange),c=(0,m.getTimeBasedSegment)(g,d,u,e,n.d,i,t,s,a,n.tManifest),!0):(e>=l*i-.5*n.d&&(f=!0),!1)}),c},getSegmentByTime:function(u,e){if(t(),!u)return null;var l=null,c=g.calcMediaTimeFromPresentationTime(e=void 0===e?null:e,u);return r(u,function(e,t,r,n,i,a,o){var s=parseFloat((c*i).toPrecision(15));return s<e+n.d&&e<=s&&(s=t.media,t=n.mediaRange,r&&(s=r[o].media||"",t=r[o].mediaRange),l=(0,m.getTimeBasedSegment)(g,d,u,e,n.d,i,s,t,a,n.tManifest),!0)}),l},getMediaFinishedInformation:function(e){if(!e)return 0;for(var t,r,n,i=(e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate||e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList).SegmentTimeline,a=0,o=0,s=0,u=e.timescale,l=i.S_asArray,c=l.length,f=0;f<c;f++)for(r=0,(n=l[f]).hasOwnProperty("r")&&(r=n.r),n.hasOwnProperty("t")&&(o=(a=n.t)/u),r<0&&(r=h(e,l[f+1],n,u,o)),t=0;t<=r;t++)s++,o=(a+=n.d)/u;return{numberOfSegments:s,mediaTimeOfLastSignaledSegment:o}}}}a.__dashjs_factory_name="TimelineSegmentsGetter";r=n.default.getClassFactory(a);t.default=r},"./src/dash/vo/AdaptationSet.js":function(e,t,r){"use strict";r.r(t),t.default=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.period=null,this.index=-1,this.type=null}},"./src/dash/vo/BaseURL.js":function(e,t,r){"use strict";r.r(t);function i(e,t,r,n){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this.url=e||"",this.serviceLocation=t||e||"",this.dvb_priority=r||1,this.dvb_weight=n||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.queryParams={}}i.DEFAULT_DVB_PRIORITY=1,i.DEFAULT_DVB_WEIGHT=1,t.default=i},"./src/dash/vo/ContentSteering.js":function(e,t,r){"use strict";r.r(t),t.default=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.defaultServiceLocation=null,this.defaultServiceLocationArray=[],this.queryBeforeStart=!1,this.serverUrl=null,this.clientRequirement=!0}},"./src/dash/vo/ContentSteeringRequest.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/streaming/vo/metrics/HTTPRequest.js");t.default=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.url=t||null,this.type=n.HTTPRequest.CONTENT_STEERING_TYPE,this.responseType="json"}},"./src/dash/vo/ContentSteeringResponse.js":function(e,t,r){"use strict";r.r(t),t.default=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.version=null,this.ttl=300,this.reloadUri=null,this.pathwayPriority=[],this.pathwayClones=[]}},"./src/dash/vo/DescriptorType.js":function(e,t,r){"use strict";function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.r(t);r=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.schemeIdUri=null,this.value=null,this.id=null}var t,r,n;return t=e,(r=[{key:"init",value:function(e){return e&&(this.schemeIdUri=e.schemeIdUri||null,this.value=e.value||null,this.id=e.id||null),this}}])&&i(t.prototype,r),n&&i(t,n),e}();t.default=r},"./src/dash/vo/Event.js":function(e,t,r){"use strict";r.r(t),t.default=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.type="",this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN}},"./src/dash/vo/EventStream.js":function(e,t,r){"use strict";r.r(t),t.default=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="",this.presentationTimeOffset=0}},"./src/dash/vo/ManifestInfo.js":function(e,t,r){"use strict";r.r(t),t.default=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.dvrWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null,this.serviceDescriptions=[],this.protocol=null}},"./src/dash/vo/MediaInfo.js":function(e,t,r){"use strict";r.r(t),t.default=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.labels=null,this.lang=null,this.viewpoint=null,this.viewpointsWithSchemeIdUri=null,this.accessibility=null,this.accessibilitiesWithSchemeIdUri=null,this.audioChannelConfiguration=null,this.audioChannelConfigurationsWithSchemeIdUri=null,this.roles=null,this.rolesWithSchemeIdUri=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null,this.isFragmented=null,this.isEmbedded=null,this.selectionPriority=1,this.supplementalProperties={},this.supplementalPropertiesAsArray=[],this.segmentAlignment=!1,this.subSegmentAlignment=!1}},"./src/dash/vo/Mpd.js":function(e,t,r){"use strict";r.r(t),t.default=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.publishTime=null,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN}},"./src/dash/vo/MpdLocation.js":function(e,t,r){"use strict";r.r(t),t.default=function e(t,r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.url=t||"",this.serviceLocation=r||null,this.queryParams={}}},"./src/dash/vo/PatchLocation.js":function(e,t,r){"use strict";r.r(t),t.default=function e(t,r,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.url=t||"",this.serviceLocation=r||null,this.ttl=n||NaN,this.queryParams={}}},"./src/dash/vo/PatchOperation.js":function(e,t,r){"use strict";function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.r(t);r=function(){function n(e,t,r){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");this.action=e,this.xpath=t,this.value=r,this.position=null}var e,t,r;return e=n,(t=[{key:"getMpdTarget",value:function(e){var t="remove"===this.action||"replace"===this.action||"before"===this.position||"after"===this.position;return this.xpath.getMpdTarget(e,t)}}])&&i(e.prototype,t),r&&i(e,r),n}();t.default=r},"./src/dash/vo/Period.js":function(e,t,r){"use strict";r.r(t);function n(){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null,this.nextPeriodId=null}n.DEFAULT_ID="defaultId",t.default=n},"./src/dash/vo/ProducerReferenceTime.js":function(e,t,r){"use strict";r.r(t),t.default=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.id=null,this.inband=!1,this.type="encoder",this.applicationScheme=null,this.wallClockTime=null,this.presentationTime=NaN,this.UTCTiming=null}},"./src/dash/vo/Representation.js":function(e,t,r){"use strict";r.r(t);var i=r("./src/dash/constants/DashConstants.js");function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.mimeType=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.mediaFinishedInformation={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN},this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.frameRate=null}var t,r,n;return t=e,(r=[{key:"hasInitialization",value:function(){return null!==this.initialization||null!==this.range}},{key:"hasSegments",value:function(){return this.segmentInfoType!==i.default.BASE_URL&&this.segmentInfoType!==i.default.SEGMENT_BASE&&!this.indexRange}}])&&a(t.prototype,r),n&&a(t,n),e}();t.default=r},"./src/dash/vo/RepresentationInfo.js":function(e,t,r){"use strict";r.r(t),t.default=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.id=null,this.quality=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null}},"./src/dash/vo/Segment.js":function(e,t,r){"use strict";r.r(t),t.default=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.wallStartTime=NaN,this.representation=null}},"./src/dash/vo/SimpleXPath.js":function(e,t,r){"use strict";function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.r(t);r=function(){function t(e){var n=this;if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.valid="/"==e[0],this.path=e.split("/").filter(function(e){return 0!==e.length}).map(function(e){var t={name:e},r=e.indexOf("[");return-1!=r&&(t.name=e.substring(0,r),r=e.substring(r+1,e.length-1),n.valid=n.valid&&-1==r.indexOf("["),-1!=(e=r.indexOf("="))?(t.attribute={name:r.substring(1,e),value:r.substring(e+1)},-1!=["'",'"'].indexOf(t.attribute.value[0])&&(t.attribute.value=t.attribute.value.substring(1,t.attribute.value.length-1))):t.position=parseInt(r,10)-1),t})}var e,r,n;return e=t,(r=[{key:"isValid",value:function(){return this.valid}},{key:"findsElement",value:function(){return!this.findsAttribute()}},{key:"findsAttribute",value:function(){return this.path[this.path.length-1].name.startsWith("@")}},{key:"findsTextReplace",value:function(){return"text()"===this.path[this.path.length-1].name}},{key:"getMpdTarget",value:function(e,t){for(var r=null,n=e,i=1,a="MPD";i<this.path.length&&null!==n;){var o,r=n,s=this.path[i],a=s.name;i===this.path.length-1&&(a.startsWith("@")||"text()"===a)||(0===(o=r[a+"_asArray"]||[]).length&&r[a]&&o.push(r[a]),s.position?n=o[s.position]||null:s.attribute?function(){var t=s.attribute;n=o.filter(function(e){return e[t.name]==t.value})[0]||null}():n=o[0]||null),i++}return null===n?null:a.startsWith("@")?{name:a.substring(1),leaf:n,target:n}:"text()"===a?{name:"__text",leaf:n,target:n}:{name:a,leaf:n,target:t?r:n}}}])&&i(e.prototype,r),n&&i(e,n),t}();t.default=r},"./src/dash/vo/StreamInfo.js":function(e,t,r){"use strict";r.r(t),t.default=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0}},"./src/dash/vo/UTCTiming.js":function(e,t,r){"use strict";r.r(t),t.default=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.schemeIdUri="",this.value=""}},"./src/streaming/FragmentLoader.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/streaming/constants/Constants.js"),c=r("./src/streaming/net/URLLoader.js"),f=r("./src/streaming/vo/HeadRequest.js"),d=r("./src/streaming/vo/DashJSError.js"),r=r("./src/core/FactoryMaker.js");function i(e){e=e||{};var i,a,t=this.context,o=e.eventBus,s=e.events,r=e.urlUtils,u=e.errors,l=e.streamId;return i={checkForExistence:function(t){function e(e){o.trigger(s.CHECK_FOR_EXISTENCE_COMPLETED,{request:t,exists:e})}var r;t?(r=new f.default(t.url),a.load({request:r,success:function(){e(!0)},error:function(){e(!1)}})):e(!1)},load:function(r){function n(e,t){o.trigger(s.LOADING_COMPLETED,{request:r,response:e||null,error:t||null,sender:i})}r?a.load({request:r,progress:function(e){o.trigger(s.LOADING_PROGRESS,{request:r,stream:e.stream,streamId:l}),e.data&&o.trigger(s.LOADING_DATA_PROGRESS,{request:r,response:e.data||null,error:null,sender:i})},success:function(e){n(e)},error:function(e,t,r){n(void 0,new d.default(u.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,r,t))},abort:function(e){e&&o.trigger(s.LOADING_ABANDONED,{mediaType:e.mediaType,request:e,sender:i})}}):n(void 0,new d.default(u.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,u.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},abort:function(){a&&a.abort()},reset:function(){a&&(a.abort(),a=null)}},a=(0,c.default)(t).create({errHandler:e.errHandler,errors:u,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,urlUtils:r,constants:n.default,boxParser:e.boxParser,dashConstants:e.dashConstants,requestTimeout:e.settings.get().streaming.fragmentRequestTimeout}),i}i.__dashjs_factory_name="FragmentLoader",t.default=r.default.getClassFactory(i)},"./src/streaming/ManifestLoader.js":function(e,t,r){"use strict";r.r(t);var a=r("./src/streaming/constants/Constants.js"),o=r("./src/dash/constants/DashConstants.js"),p=r("./src/streaming/controllers/XlinkController.js"),y=r("./src/streaming/net/URLLoader.js"),E=r("./src/streaming/utils/URLUtils.js"),_=r("./src/streaming/vo/TextRequest.js"),v=r("./src/streaming/vo/DashJSError.js"),T=r("./src/streaming/vo/metrics/HTTPRequest.js"),b=r("./src/core/EventBus.js"),S=r("./src/core/events/Events.js"),A=r("./src/core/errors/Errors.js"),n=r("./src/core/FactoryMaker.js"),R=r("./src/dash/parser/DashParser.js");function i(e){e=e||{};var t,s,i,u,l,c=this.context,f=e.debug,d=e.settings,g=(0,b.default)(c).getInstance(),m=(0,E.default)(c).getInstance(),h=e.mssHandler,r=e.errHandler;function n(e){g.trigger(S.default.INTERNAL_MANIFEST_LOADED,{manifest:e.manifest})}return t={load:function(o){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,r=new Date,n=new _.default(o,T.HTTPRequest.MPD_TYPE);e&&(n.serviceLocation=e),t&&(n.queryParams=t),n.requestStartDate||(n.requestStartDate=r),g.trigger(S.default.MANIFEST_LOADING_STARTED,{request:n}),i.load({request:n,success:function(e,t,r){var n,i,a;if(u)if(r&&r!==o?(i=m.parseBaseUrl(r),n=r):(m.isRelative(o)&&(o=m.resolve(o,window.location.href)),i=m.parseBaseUrl(o)),"No Content"==t)g.trigger(S.default.INTERNAL_MANIFEST_LOADED,{manifest:null});else if(null===l&&(r=null,l=-1<(t=e).indexOf("SmoothStreamingMedia")?(h&&(r=h.createMssParser(),h.createMssFragmentProcessor(),h.registerEvents()),r):-1<t.indexOf("MPD")||-1<t.indexOf("Patch")?(0,R.default)(c).create({debug:f}):r),null===l)g.trigger(S.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new v.default(A.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,A.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(o))});else{u.setMatchers(l.getMatchers()),u.setIron(l.getIron());try{a=l.parse(e)}catch(e){return void g.trigger(S.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new v.default(A.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,A.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(o))})}a?(a.url=n||o,a.originalUrl||(a.originalUrl=a.url),d&&d.get().streaming.enableManifestDurationMismatchFix&&a.mediaPresentationDuration&&1<a.Period_asArray.length&&(t=a.Period_asArray.reduce(function(e,t){return e+t.duration},0),!isNaN(t)&&a.mediaPresentationDuration>t&&(s.warn("Media presentation duration greater than duration of all periods. Setting duration to total period duration"),a.mediaPresentationDuration=t)),a.baseUri=i,a.loadedTime=new Date,u.resolveManifestOnLoad(a),g.trigger(S.default.ORIGINAL_MANIFEST_LOADED,{originalManifest:e})):g.trigger(S.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new v.default(A.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,A.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(o))})}},error:function(e,t,r){g.trigger(S.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new v.default(A.default.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,A.default.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+"".concat(o,", ").concat(r))})}})},reset:function(){g.off(S.default.XLINK_READY,n,t),h&&h.reset(),u&&(u.reset(),u=null),i&&(i.abort(),i=null)}},s=f.getLogger(t),g.on(S.default.XLINK_READY,n,t),i=(0,y.default)(c).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,urlUtils:m,constants:a.default,dashConstants:o.default,errors:A.default,requestTimeout:e.settings.get().streaming.manifestRequestTimeout}),u=(0,p.default)(c).create({errHandler:r,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,settings:e.settings}),l=null,t}i.__dashjs_factory_name="ManifestLoader";r=n.default.getClassFactory(i);t.default=r},"./src/streaming/ManifestUpdater.js":function(e,t,r){"use strict";r.r(t);var w=r("./src/core/EventBus.js"),C=r("./src/core/events/Events.js"),N=r("./src/streaming/MediaPlayerEvents.js"),n=r("./src/core/FactoryMaker.js"),D=r("./src/core/Debug.js"),M=r("./src/core/errors/Errors.js"),O=r("./src/dash/constants/DashConstants.js"),P=r("./src/streaming/utils/URLUtils.js"),L=r("./src/streaming/utils/LocationSelector.js");function i(){var e,i,a,t,o,s,u,l,c,f,d,r,g,n,m=this.context,h=(0,w.default)(m).getInstance(),p=(0,P.default)(m).getInstance();function y(){a=NaN,s=!(o=!(u=!1)),E()}function E(){null!==t&&(clearTimeout(t),t=null)}function _(e){E(),s||(isNaN(e)&&!isNaN(a)&&(e=1e3*a),isNaN(e)||(i.debug("Refresh manifest in "+e+" milliseconds."),t=setTimeout(b,e)))}function v(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=(u=!0,c.getValue()),r=t.url,n=null,i=d.getPatchLocation(t),i=f.select(i),a=null;i&&!e?(r=i.url,n=i.serviceLocation,a=i.queryParams):(e=t,e=d.getLocation(e),i=g.getSynthesizedLocationElements(e),e=e.concat(i),(i=f.select(e))&&(r=i.url,n=i.serviceLocation,a=i.queryParams)),p.isRelative(r)&&(r=p.resolve(r,t.url)),l.load(r,n,a)}function T(e){if(e){if(d.getIsPatch(e)){var t=e,r=(e=c.getValue(),d.isPatchValid(e,t)),n=r;if(r&&(r=d.getPublishTime(e),n=d.applyPatchToManifest(e,t),t=d.getPublishTime(e),n=r.getTime()!=t.getTime()),!n)return i.debug("Patch provided is invalid, performing full manifest refresh"),void v(!0);e.loadedTime=new Date}}else(e=c.getValue()).loadedTime=new Date;if(c.getValue()&&c.getValue().type===O.default.DYNAMIC&&e.type===O.default.STATIC)return h.trigger(C.default.DYNAMIC_TO_STATIC),void(s=!(u=!1));c.setValue(e);r=new Date,t=(r.getTime()-e.loadedTime.getTime())/1e3;2147483647<1e3*(a=d.getManifestUpdatePeriod(e,t))&&(a=2147483.647),h.trigger(C.default.MANIFEST_UPDATED,{manifest:e}),i.info("Manifest has been refreshed at "+r+"["+r.getTime()/1e3+"] "),o||_()}function b(){o||(u?_(n.get().streaming.manifestUpdateRetryInterval):v())}function S(e){e.error?e.error.code===M.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&r.error(e.error):T(e.manifest)}function A(){o=!1,_()}function R(){(o=!n.get().streaming.scheduling.scheduleWhilePaused)&&E()}function I(){u=!1}return e={initialize:function(){y(),h.on(C.default.STREAMS_COMPOSED,I,this),h.on(N.default.PLAYBACK_STARTED,A,this),h.on(N.default.PLAYBACK_PAUSED,R,this),h.on(C.default.INTERNAL_MANIFEST_LOADED,S,this)},setManifest:function(e){T(e)},refreshManifest:v,getIsUpdating:function(){return u},setConfig:function(e){e&&(e.manifestModel&&(c=e.manifestModel),e.adapter&&(d=e.adapter),e.manifestLoader&&(l=e.manifestLoader),e.errHandler&&(r=e.errHandler),e.locationSelector&&(f=e.locationSelector),e.settings&&(n=e.settings),e.contentSteeringController&&(g=e.contentSteeringController))},reset:function(){h.off(N.default.PLAYBACK_STARTED,A,this),h.off(N.default.PLAYBACK_PAUSED,R,this),h.off(C.default.STREAMS_COMPOSED,I,this),h.off(C.default.INTERNAL_MANIFEST_LOADED,S,this),y()}},i=(0,D.default)(m).getInstance().getLogger(e),f=(0,L.default)(m).create(),e}i.__dashjs_factory_name="ManifestUpdater",t.default=n.default.getClassFactory(i)},"./src/streaming/MediaPlayer.js":function(i,e,t){"use strict";t.r(e);var r=t("./externals/cea608-parser.js"),pe=t.n(r),ye=t("./src/streaming/constants/Constants.js"),Ee=t("./src/dash/constants/DashConstants.js"),_e=t("./src/streaming/constants/MetricsConstants.js"),ve=t("./src/streaming/controllers/PlaybackController.js"),Te=t("./src/streaming/controllers/StreamController.js"),be=t("./src/streaming/controllers/GapController.js"),Se=t("./src/streaming/controllers/CatchupController.js"),Ae=t("./src/dash/controllers/ServiceDescriptionController.js"),Re=t("./src/dash/controllers/ContentSteeringController.js"),Ie=t("./src/streaming/controllers/MediaController.js"),we=t("./src/streaming/controllers/BaseURLController.js"),Ce=t("./src/streaming/ManifestLoader.js"),Ne=t("./src/streaming/utils/ErrorHandler.js"),De=t("./src/streaming/utils/Capabilities.js"),Me=t("./src/streaming/utils/CapabilitiesFilter.js"),Oe=t("./src/streaming/utils/RequestModifier.js"),Pe=t("./src/streaming/models/URIFragmentModel.js"),Le=t("./src/streaming/models/ManifestModel.js"),Fe=t("./src/streaming/models/MediaPlayerModel.js"),xe=t("./src/streaming/controllers/AbrController.js"),je=t("./src/streaming/net/SchemeLoaderFactory.js"),ke=t("./src/streaming/models/VideoModel.js"),Ue=t("./src/streaming/models/CmcdModel.js"),Be=t("./src/streaming/models/CmsdModel.js"),Ge=t("./src/streaming/utils/DOMStorage.js"),We=t("./src/core/Debug.js"),qe=t("./src/core/errors/Errors.js"),Xe=t("./src/core/EventBus.js"),He=t("./src/core/events/Events.js"),Ye=t("./src/streaming/MediaPlayerEvents.js"),Ve=t("./src/core/FactoryMaker.js"),Qe=t("./src/core/Settings.js"),Je=t("./src/core/Version.js"),Ze=t("./src/dash/controllers/SegmentBaseController.js"),$e=t("./src/dash/DashAdapter.js"),et=t("./src/dash/DashMetrics.js"),tt=t("./src/dash/utils/TimelineConverter.js"),rt=t("./src/streaming/vo/metrics/HTTPRequest.js"),Ke=t("./externals/base64.js"),nt=t("./node_modules/codem-isoboxer/dist/iso_boxer.js"),it=t("./src/streaming/vo/DashJSError.js"),ze=t("./src/streaming/utils/SupervisorTools.js"),at=t("./src/streaming/ManifestUpdater.js"),ot=t("./src/streaming/utils/URLUtils.js"),st=t("./src/streaming/utils/BoxParser.js"),ut=t("./src/streaming/text/TextController.js"),lt=t("./src/streaming/models/CustomParametersModel.js");function n(){var e,i,r,n,a,o,s,k,u,l,U,B,c,f,t,G,d,g,m,h,p,y,E,q,_,v,T,b,S,A,R,I,w,H,Y,C,V,K,N,D="You must first call initialize() and set a source before calling this method",M="You must first call initialize() and set a valid source and view before calling this method",z="You must first call attachView() to set the video element before calling this method",W="You must first call attachSource() with a valid source before calling this method",O="MediaPlayer not initialized!",P=this.context,L=(0,Xe.default)(P).getInstance(),F=(0,Qe.default)(P).getInstance(),x=(0,We.default)(P).getInstance({settings:F});function X(){ue(null),oe(null),n=null,f&&(f.reset(),f=null),t&&(t.reset(),t=null),h&&h.reset(),F.reset(),d&&(d.reset(),d=null)}function Q(){return!!r&&!!C.getElement()}function J(){return(0,Je.getVersionString)()}function Z(){if(s)return b.isPaused();throw M}function $(){if(s)return b.getIsDynamic();throw M}function ee(e){var t=_&&_.hasVideoTrack()?ye.default.VIDEO:ye.default.AUDIO,t=I.getCurrentDVRInfo(t);if(!t)return 0;var r=b.getOriginalLiveDelay(),e=t.range.start+e;return e=e>t.range.end-r?t.range.end-r:e}function te(e){if(!s)throw M;var t=j().currentTime;return void 0!==e?t=_.getTimeRelativeToStreamId(t,e):b.getIsDynamic()&&(e=_&&_.hasVideoTrack()?ye.default.VIDEO:ye.default.AUDIO,t=null===(e=I.getCurrentDVRInfo(e))||0===t?0:Math.max(0,t-e.range.start)),t}function re(){if(!s)throw M;var e,t=j().duration;return b.getIsDynamic()&&(e=_&&_.hasVideoTrack()?ye.default.VIDEO:ye.default.AUDIO,t=(e=I.getCurrentDVRInfo(e))?e.range.end-e.range.start:0),t}function ne(e){(0,ze.checkParameterType)(e,"boolean"),k=e}function ie(){h.restoreDefaultUTCTimingSources()}function ae(){return I}function j(){if(C.getElement())return C.getElement();throw z}function oe(e){if(!a)throw O;C.setElement(e),e&&(de(),t||"function"==typeof(e=dashjs.MetricsReporting)&&(e=e(P).create(),t=e.createMetricsReporting({debug:x,eventBus:L,mediaElement:j(),adapter:g,dashMetrics:I,mediaPlayerModel:m,events:He.default,constants:ye.default,metricsConstants:_e.default})),G||"function"==typeof(e=dashjs.MssHandler)&&(qe.default.extend(e.errors),G=e(P).create({eventBus:L,mediaPlayerModel:m,dashMetrics:I,manifestModel:w,playbackController:b,streamController:_,protectionController:f,baseURLController:y,errHandler:p,events:He.default,constants:ye.default,debug:x,initSegmentType:rt.HTTPRequest.INIT_SEGMENT_TYPE,BASE64:Ke,ISOBoxer:nt,settings:F})),_&&_.switchToVideoElement(u)),s&&ce(),he(u)}function se(e){if(!o)throw D;var t=_.getActiveStreamInfo();return t?c.getTracksFor(e,t.id):[]}function ue(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:NaN;if(!a)throw O;"string"==typeof e&&V.initialize(e),null==t&&(t=NaN),isNaN(t)||(t=Math.max(0,t)),u=t,r=e,(o||s)&&ce(),Q()&&he(u)}function le(){if(!o)throw D;var e=_.getActiveStreamInfo();return e?_.getStreamById(e.id):null}function ce(){o=s=!1,g.reset(),_.reset(),T.reset(),R.reset(),b.reset(),S.reset(),A.reset(),l.reset(),c.reset(),N.reset(),f&&(F.get().streaming.protection.keepProtectionMediaKeys?f.stop():(f.reset(),f=null,de())),v.reset(),H.reset(),Y.reset()}function fe(){return(0,Ce.default)(P).create({debug:x,errHandler:p,dashMetrics:I,mediaPlayerModel:m,requestModifier:(0,Oe.default)(P).getInstance(),mssHandler:G,settings:F})}function de(){if(f)return f;var e,t=dashjs.Protection;return"function"==typeof t?(e=t(P).create(),He.default.extend(t.events),Ye.default.extend(t.events,{publicOnly:!0}),qe.default.extend(t.errors),E=E||(0,De.default)(P).getInstance(),f=e.createProtectionSystem({debug:x,errHandler:p,videoModel:C,customParametersModel:h,capabilities:E,eventBus:L,events:He.default,BASE64:Ke,constants:ye.default,cmcdModel:H,settings:F})):null}function ge(){if(!a)throw O;if(d)return d;var e,t,r=dashjs.OfflineController;return"function"==typeof r?(He.default.extend(r.events),Ye.default.extend(r.events,{publicOnly:!0}),qe.default.extend(r.errors),e=fe(),(t=(0,at.default)(P).create()).setConfig({manifestModel:w,adapter:g,manifestLoader:e,errHandler:p,contentSteeringController:A}),d=r(P).create({debug:x,manifestUpdater:t,baseURLController:y,manifestLoader:e,manifestModel:w,mediaPlayerModel:m,abrController:l,playbackController:b,adapter:g,errHandler:p,dashMetrics:I,timelineConverter:B,segmentBaseController:N,schemeLoaderFactory:U,eventBus:L,events:He.default,errors:qe.default,constants:ye.default,settings:F,dashConstants:Ee.default,urlUtils:(0,ot.default)(P).getInstance()})):null}function me(e){var t=_&&_.hasVideoTrack()?ye.default.VIDEO:ye.default.AUDIO,t=I.getCurrentDVRInfo(t);return t?e+(t.manifestInfo.availableFrom.getTime()/1e3+t.range.start):0}function he(e){var t,e=0<arguments.length&&void 0!==e?e:NaN;d&&d.resetRecords(),!o&&r&&(o=!0,i.info("Streaming Initialized"),t=fe(),_=_||(0,Te.default)(P).getInstance(),v=v||(0,ut.default)(P).create({errHandler:p,manifestModel:w,adapter:g,mediaController:c,videoModel:C,settings:F}),q.setConfig({capabilities:E,customParametersModel:h,adapter:g,settings:F,manifestModel:w,errHandler:p}),_.setConfig({capabilities:E,capabilitiesFilter:q,manifestLoader:t,manifestModel:w,mediaPlayerModel:m,customParametersModel:h,protectionController:f,textController:v,adapter:g,dashMetrics:I,errHandler:p,timelineConverter:B,videoModel:C,playbackController:b,serviceDescriptionController:S,contentSteeringController:A,abrController:l,mediaController:c,settings:F,baseURLController:y,uriFragmentModel:V,segmentBaseController:N}),T.setConfig({settings:F,playbackController:b,streamController:_,videoModel:C,timelineConverter:B,adapter:g}),b.setConfig({streamController:_,serviceDescriptionController:S,dashMetrics:I,adapter:g,videoModel:C,timelineConverter:B,settings:F}),R.setConfig({streamController:_,playbackController:b,mediaPlayerModel:m,videoModel:C,settings:F}),l.setConfig({streamController:_,domStorage:K,mediaPlayerModel:m,customParametersModel:h,cmsdModel:Y,dashMetrics:I,adapter:g,videoModel:C,settings:F}),H.setConfig({abrController:l,dashMetrics:I,playbackController:b}),Y.setConfig({}),l.initialize(),_.initialize(k,n),v.initialize(),T.initialize(),R.initialize(),H.initialize(),Y.initialize(),A.initialize(),N.initialize(),"string"==typeof r?_.load(r,e):_.loadWithManifest(r,e)),!s&&Q()&&(s=!0,i.info("Playback Initialized"))}return e={initialize:function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:NaN;E||(E=(0,De.default)(P).getInstance()).setConfig({settings:F}),p=p||(0,Ne.default)(P).getInstance(),E.supportsMediaSource()?(a||(a=!0,B=(0,tt.default)(P).getInstance(),l||(l=(0,xe.default)(P).getInstance()).setConfig({settings:F}),U=U||(0,je.default)(P).getInstance(),b=b||(0,ve.default)(P).getInstance(),c=c||(0,Ie.default)(P).getInstance(),_=_||(0,Te.default)(P).getInstance(),T=T||(0,be.default)(P).getInstance(),R=R||(0,Se.default)(P).getInstance(),S=S||(0,Ae.default)(P).getInstance(),A=A||(0,Re.default)(P).getInstance(),q=q||(0,Me.default)(P).getInstance(),g=(0,$e.default)(P).getInstance(),w=(0,Le.default)(P).getInstance(),H=(0,Ue.default)(P).getInstance(),Y=(0,Be.default)(P).getInstance(),I=(0,et.default)(P).getInstance({settings:F}),K=(0,Ge.default)(P).getInstance({settings:F}),g.setConfig({constants:ye.default,cea608parser:pe(),errHandler:p,BASE64:Ke}),(y=y||(0,we.default)(P).create()).setConfig({adapter:g,contentSteeringController:A}),S.setConfig({adapter:g}),N=N||(0,Ze.default)(P).getInstance({dashMetrics:I,mediaPlayerModel:m,errHandler:p,baseURLController:y,events:He.default,eventBus:L,debug:x,boxParser:(0,st.default)(P).getInstance(),requestModifier:(0,Oe.default)(P).getInstance(),errors:qe.default}),c.setConfig({domStorage:K,settings:F,customParametersModel:h}),m.setConfig({playbackController:b,serviceDescriptionController:S}),A.setConfig({adapter:g,errHandler:p,dashMetrics:I,mediaPlayerModel:m,manifestModel:w,serviceDescriptionController:S,eventBus:L,requestModifier:(0,Oe.default)(P).getInstance()}),ie(),ne(void 0===r||r),ge()),e&&oe(e),t&&ue(t,n),i.info("[dash.js "+J()+"] MediaPlayer has been initialized")):p.error(new it.default(qe.default.CAPABILITY_MEDIASOURCE_ERROR_CODE,qe.default.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},setConfig:function(e){e&&(e.capabilities&&(E=e.capabilities),e.capabilitiesFilter&&(q=e.capabilitiesFilter),e.streamController&&(_=e.streamController),e.textController&&(v=e.textController),e.gapController&&(T=e.gapController),e.playbackController&&(b=e.playbackController),e.serviceDescriptionController&&(S=e.serviceDescriptionController),e.contentSteeringController&&(A=e.contentSteeringController),e.catchupController&&(R=e.catchupController),e.mediaPlayerModel&&(m=e.mediaPlayerModel),e.customParametersModel&&(h=e.customParametersModel),e.abrController&&(l=e.abrController),e.schemeLoaderFactory&&(U=e.schemeLoaderFactory),e.mediaController&&(c=e.mediaController),e.settings&&(F=e.settings))},on:function(e,t,r,n){L.on(e,t,r,n)},off:function(e,t,r){L.off(e,t,r)},extend:function(e,t,r){Ve.default.extend(e,t,r,P)},attachView:oe,attachSource:ue,isReady:Q,preload:function(){if(!C.getElement()&&!o){if(!r)throw W;he(u)}},play:function(){if(!s)throw M;(!k||Z()&&s)&&b.play(!0)},isPaused:Z,pause:function(){if(!s)throw M;b.pause()},isSeeking:function(){if(s)return b.isSeeking();throw M},isDynamic:$,getLowLatencyModeEnabled:function(){if(s)return b.getLowLatencyModeEnabled();throw M},seek:function(e){if(!s)throw M;if((0,ze.checkParameterType)(e,"number"),isNaN(e))throw ye.default.BAD_ARGUMENT_ERROR;e<0&&(e=0);var e=b.getIsDynamic()?ee(e):e,t=j();!b.getIsDynamic()&&t.duration&&(e=Math.min(t.duration,e)),b.seek(e,!1,!1,!0)},seekToOriginalLive:function(){s&&$()&&b.seekToOriginalLive()},setPlaybackRate:function(e){j().playbackRate=e},getPlaybackRate:function(){return j().playbackRate},setMute:function(e){(0,ze.checkParameterType)(e,"boolean"),j().muted=e},isMuted:function(){return j().muted},setVolume:function(e){if("number"!=typeof e||isNaN(e)||e<0||1<e)throw ye.default.BAD_ARGUMENT_ERROR;j().volume=e},getVolume:function(){return j().volume},time:te,duration:re,timeAsUTC:function(){if(s)return te()<0?NaN:me(te());throw M},durationAsUTC:function(){if(s)return me(re());throw M},getActiveStream:le,getDVRWindowSize:function(){var e=_&&_.hasVideoTrack()?ye.default.VIDEO:ye.default.AUDIO;return(e=I.getCurrentDVRInfo(e))?e.manifestInfo.dvrWindowSize:0},getDVRSeekOffset:ee,getAvailableBaseUrls:function(){var e=w.getValue();return e?y.getBaseUrls(e):[]},getAvailableLocations:function(){if(!(e=w.getValue()))return[];var e=g.getLocation(e),t=A.getSynthesizedLocationElements(e);return e.concat(t)},getTargetLiveDelay:function(){if(s)return b.getOriginalLiveDelay();throw M},convertToTimeCode:function(e){e=Math.max(e,0);var t=Math.floor(e/3600),r=Math.floor(e%3600/60),e=Math.floor(e%3600%60);return(0===t?"":t<10?"0"+t.toString()+":":t.toString()+":")+(r<10?"0"+r.toString():r.toString())+":"+(e<10?"0"+e.toString():e.toString())},formatUTC:function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]&&arguments[3],e=new Date(1e3*e),i=e.toLocaleDateString(t),e=e.toLocaleTimeString(t,{hour12:r});return n?e+" "+i:e},getVersion:J,getDebug:function(){return x},getBufferLength:function(e){var t=[ye.default.VIDEO,ye.default.AUDIO,ye.default.TEXT];return e?-1!==t.indexOf(e)?I.getCurrentBufferLevel(e)||NaN:(i.warn("getBufferLength requested for invalid type"),NaN):(e=t.map(function(e){return 0<se(e).length?I.getCurrentBufferLevel(e):Number.MAX_VALUE}).reduce(function(e,t){return Math.min(e,t)}))===Number.MAX_VALUE?NaN:e},getTTMLRenderingDiv:function(){return C?C.getTTMLRenderingDiv():null},getVideoElement:j,getSource:function(){if(r)return r;throw W},updateSource:function(e){r=e,_.load(r)},getCurrentLiveLatency:function(){if(a)return s?b.getCurrentLiveLatency():NaN;throw O},getTopBitrateInfoFor:function(e){if(o)return l.getTopBitrateInfoFor(e);throw D},setAutoPlay:ne,getAutoPlay:function(){return k},getDashMetrics:ae,getQualityFor:function(e){if(o)return e!==ye.default.IMAGE?l.getQualityFor(e):(e=le())&&(e=e.getThumbnailController())?e.getCurrentTrackIndex():-1;throw D},setQualityFor:function(e,t){var r=2<arguments.length&&void 0!==arguments[2]&&arguments[2];if(!o)throw D;if(e===ye.default.IMAGE){var n=le();if(!n)return;n=n.getThumbnailController();n&&n.setTrackByIndex(t)}l.setPlaybackQuality(e,_.getActiveStreamInfo(),t,{forceReplace:r})},updatePortalSize:function(){l.setElementSize(),l.setWindowResizeEventCalled(!0)},enableText:function(e){var t=_.getActiveStreamInfo();return!(!t||!v)&&v.enableText(t.id,e)},enableForcedTextStreaming:function(e){return!(!_.getActiveStreamInfo()||!v)&&v.enableForcedTextStreaming(e)},isTextEnabled:function(){var e=_.getActiveStreamInfo();return!(!e||!v)&&v.isTextEnabled(e)},setTextTrack:function(e){if(!s)throw M;var t=_.getActiveStreamInfo();t&&v&&v.setTextTrack(t.id,e)},getBitrateInfoListFor:function(e){if(!o)throw D;var t=le();return t?t.getBitrateListFor(e):[]},getStreamsFromManifest:function(e){if(o)return g.getStreamsInfo(e);throw D},getTracksFor:se,getTracksForTypeFromManifest:function(e,t,r){if(o)return(r=r||g.getStreamsInfo(t,1)[0])?g.getAllMediaInfoForType(r,e,t):[];throw D},getCurrentTrackFor:function(e){if(!o)throw D;var t=_.getActiveStreamInfo();return c.getCurrentTrackFor(e,t.id)},setInitialMediaSettingsFor:function(e,t){if(!a)throw O;c.setInitialSettings(e,t)},getInitialMediaSettingsFor:function(e){if(a)return c.getInitialSettings(e);throw O},setCurrentTrack:function(e){if(!o)throw D;c.setTrack(e,1<arguments.length&&void 0!==arguments[1]&&arguments[1])},addABRCustomRule:function(e,t,r){h.addAbrCustomRule(e,t,r)},removeABRCustomRule:function(e){h.removeAbrCustomRule(e)},removeAllABRCustomRule:function(){h.removeAllAbrCustomRule()},getABRCustomRules:function(){return h.getAbrCustomRules()},getAverageThroughput:function(e){var t=l.getThroughputHistory(),r=b.getIsDynamic();return t?t.getAverageThroughput(e,r):0},retrieveManifest:function(e,r){var n=fe(),i=this;L.on(He.default.INTERNAL_MANIFEST_LOADED,function e(t){t.error?r(null,t.error):r(t.manifest),L.off(He.default.INTERNAL_MANIFEST_LOADED,e,i),n.reset()},i),V.initialize(e),n.load(e)},addUTCTimingSource:function(e,t){h.addUTCTimingSource(e,t)},removeUTCTimingSource:function(e,t){h.removeUTCTimingSource(e,t)},clearDefaultUTCTimingSources:function(){h.clearDefaultUTCTimingSources()},restoreDefaultUTCTimingSources:ie,setXHRWithCredentialsForType:function(e,t){h.setXHRWithCredentialsForType(e,t)},getXHRWithCredentialsForType:function(e){return h.getXHRWithCredentialsForType(e)},getProtectionController:de,attachProtectionController:function(e){f=e},setProtectionData:function(e){n=e,_&&_.setProtectionData(n)},registerLicenseRequestFilter:function(e){h.registerLicenseRequestFilter(e)},registerLicenseResponseFilter:function(e){h.registerLicenseResponseFilter(e)},unregisterLicenseRequestFilter:function(e){h.unregisterLicenseRequestFilter(e)},unregisterLicenseResponseFilter:function(e){h.unregisterLicenseResponseFilter(e)},registerCustomCapabilitiesFilter:function(e){h.registerCustomCapabilitiesFilter(e)},unregisterCustomCapabilitiesFilter:function(e){h.unregisterCustomCapabilitiesFilter(e)},setCustomInitialTrackSelectionFunction:function(e){h.setCustomInitialTrackSelectionFunction(e)},resetCustomInitialTrackSelectionFunction:function(){h.resetCustomInitialTrackSelectionFunction(null)},attachTTMLRenderingDiv:function(e){if(!C.getElement())throw z;C.setTTMLRenderingDiv(e)},attachVttRenderingDiv:function(e){if(!C.getElement())throw z;C.setVttRenderingDiv(e)},getCurrentTextTrackIndex:function(){var e=_.getActiveStreamInfo();if(e&&v)return v.getCurrentTrackIdx(e.id)},provideThumbnail:function(e,t){if("function"==typeof t)if(e<0)t(null);else{var e=b.getIsDynamic()?ee(e):e,r=_.getStreamForTime(e);if(null===r)t(null);else{r=r.getThumbnailController();if(r)return r.provide(e,t);t(null)}}},getDashAdapter:function(){return g},getOfflineController:ge,triggerSteeringRequest:function(){if(A)return A.loadSteeringData()},getCurrentSteeringResponseData:function(){if(A)return A.getCurrentSteeringResponseData()},getSettings:function(){return F.get()},updateSettings:function(e){F.update(e)},resetSettings:function(){F.reset()},reset:X,destroy:function(){X(),Ve.default.deleteSingletonInstances(P)}},i=x.getLogger(e),k=!(o=s=a=!1),u=NaN,N=g=n=d=f=null,He.default.extend(Ye.default),m=(0,Fe.default)(P).getInstance(),h=(0,lt.default)(P).getInstance(),C=(0,ke.default)(P).getInstance(),V=(0,Pe.default)(P).getInstance(),e}n.__dashjs_factory_name="MediaPlayer";r=Ve.default.getClassFactory(n);r.events=Ye.default,r.errors=qe.default,Ve.default.updateClassFactory(n.__dashjs_factory_name,r),e.default=r},"./src/streaming/MediaPlayerEvents.js":function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=s(r),t=(e=n?(e=s(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==i(e)&&"function"!=typeof e){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.r(t);r=new(function(e){var t=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e);var r=o(n);function n(){var e;if(this instanceof n)return(e=r.call(this)).AST_IN_FUTURE="astInFuture",e.BASE_URLS_UPDATED="baseUrlsUpdated",e.BUFFER_EMPTY="bufferStalled",e.BUFFER_LOADED="bufferLoaded",e.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",e.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",e.DYNAMIC_TO_STATIC="dynamicToStatic",e.ERROR="error",e.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",e.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",e.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",e.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",e.LOG="log",e.MANIFEST_LOADING_STARTED="manifestLoadingStarted",e.MANIFEST_LOADING_FINISHED="manifestLoadingFinished",e.MANIFEST_LOADED="manifestLoaded",e.METRICS_CHANGED="metricsChanged",e.METRIC_CHANGED="metricChanged",e.METRIC_ADDED="metricAdded",e.METRIC_UPDATED="metricUpdated",e.PERIOD_SWITCH_STARTED="periodSwitchStarted",e.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",e.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",e.QUALITY_CHANGE_RENDERED="qualityChangeRendered",e.TRACK_CHANGE_RENDERED="trackChangeRendered",e.STREAM_INITIALIZING="streamInitializing",e.STREAM_UPDATED="streamUpdated",e.STREAM_ACTIVATED="streamActivated",e.STREAM_DEACTIVATED="streamDeactivated",e.STREAM_INITIALIZED="streamInitialized",e.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",e.TEXT_TRACKS_ADDED="allTextTracksAdded",e.TEXT_TRACK_ADDED="textTrackAdded",e.THROUGHPUT_MEASUREMENT_STORED="throughputMeasurementStored",e.TTML_PARSED="ttmlParsed",e.TTML_TO_PARSE="ttmlToParse",e.CAPTION_RENDERED="captionRendered",e.CAPTION_CONTAINER_RESIZE="captionContainerResize",e.CAN_PLAY="canPlay",e.CAN_PLAY_THROUGH="canPlayThrough",e.PLAYBACK_ENDED="playbackEnded",e.PLAYBACK_ERROR="playbackError",e.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",e.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",e.PLAYBACK_LOADED_DATA="playbackLoadedData",e.PLAYBACK_PAUSED="playbackPaused",e.PLAYBACK_PLAYING="playbackPlaying",e.PLAYBACK_PROGRESS="playbackProgress",e.PLAYBACK_RATE_CHANGED="playbackRateChanged",e.PLAYBACK_SEEKED="playbackSeeked",e.PLAYBACK_SEEKING="playbackSeeking",e.PLAYBACK_STALLED="playbackStalled",e.PLAYBACK_STARTED="playbackStarted",e.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",e.PLAYBACK_VOLUME_CHANGED="playbackVolumeChanged",e.PLAYBACK_WAITING="playbackWaiting",e.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",e.EVENT_MODE_ON_START="eventModeOnStart",e.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",e.CONFORMANCE_VIOLATION="conformanceViolation",e.REPRESENTATION_SWITCH="representationSwitch",e.ADAPTATION_SET_REMOVED_NO_CAPABILITIES="adaptationSetRemovedNoCapabilities",e.CONTENT_STEERING_REQUEST_COMPLETED="contentSteeringRequestCompleted",e.INBAND_PRFT="inbandPrft",e;throw new TypeError("Cannot call a class as a function")}return n}(r("./src/core/events/EventsBase.js").default));t.default=r},"./src/streaming/MediaPlayerFactory.js":function(e,t,r){"use strict";r.r(t);var i=r("./src/streaming/MediaPlayer.js");l="application/dash+xml";var a,l,n,o={create:c,createAll:function(e,t){for(var r=[],n=(e=e||"[data-dashjs-player]",(t=t||document).querySelectorAll(e)),i=0;i<n.length;i++){var a=c(n[i],null);r.push(a)}for(var o=t.querySelectorAll('source[type="'+l+'"]'),s=0;s<o.length;s++){var u=c(function e(t){return/^VIDEO$/i.test(t.nodeName)?t:e(t.parentNode)}(o[s]),null);r.push(u)}return r}};function c(e,t,r){if(!e||!/^VIDEO$/i.test(e.nodeName))return null;if(e._dashjs_player)return e._dashjs_player;var n=e.id||e.name||"video element";if(!(t=t||[].slice.call(e.querySelectorAll("source")).filter(function(e){return e.type==l})[0])&&e.src)(t=document.createElement("source")).src=e.src;else if(!t&&!e.src)return null;return(r=(0,i.default)(r=r||{}).create()).initialize(e,t.src,e.autoplay),(a=a||r.getDebug().getLogger()).debug("Converted "+n+" to dash.js player and added content: "+t.src),e._dashjs_player=r}"undefined"!=typeof window&&window&&window.dashjs&&window.dashjs.skipAutoCreate||"undefined"==typeof window||!window||!window.addEventListener||("complete"===window.document.readyState?window.dashjs?o.createAll():n=window.setInterval(function(){window.dashjs&&(window.clearInterval(n),o.createAll())},500):window.addEventListener("load",function e(){window.removeEventListener("load",e),o.createAll()})),t.default=o},"./src/streaming/PreBufferSink.js":function(e,t,r){"use strict";r.r(t);var i=r("./src/core/Debug.js"),r=r("./src/core/FactoryMaker.js");function n(e){var t,a,r=this.context,o=[],n=e;function s(t,r){return o=o.filter(function(e){return!((isNaN(r)||e.start<r)&&(isNaN(t)||e.end>t))}),Promise.resolve()}return e={getAllBufferRanges:function(){for(var t=[],e=0;e<o.length;e++){var r=o[e];0===t.length||r.start>t[t.length-1].end?t.push({start:r.start,end:r.end}):t[t.length-1].end=r.end}var n={start:function(e){return t[e].start},end:function(e){return t[e].end}};return Object.defineProperty(n,"length",{get:function(){return t.length}}),n},append:function(e){return a="InitializationSegment"!==e.segmentType?(o.push(e),o.sort(function(e,t){return e.start-t.start}),null):e,t.debug("PreBufferSink appended chunk s: "+e.start+"; e: "+e.end),n&&n({chunk:e}),Promise.resolve()},remove:s,abort:function(){return Promise.resolve()},discharge:function(e,t){r=e,n=t;var r,n,i=o.filter(function(e){return(isNaN(n)||e.start<n)&&(isNaN(r)||e.end>r)});return a&&(i.push(a),a=null),s(e,t),i},reset:function(){o=[],n=a=null},updateTimestampOffset:function(){return Promise.resolve()},waitForUpdateEnd:function(e){e()},getBuffer:function(){return this}},t=(0,i.default)(r).getInstance().getLogger(e),e}n.__dashjs_factory_name="PreBufferSink";r=r.default.getClassFactory(n);t.default=r},"./src/streaming/SourceBufferSink.js":function(e,t,r){"use strict";r.r(t);var R=r("./src/core/Debug.js"),I=r("./src/streaming/vo/DashJSError.js"),n=r("./src/core/FactoryMaker.js"),w=r("./src/core/errors/Errors.js"),C=r("./src/core/Settings.js"),N=r("./src/streaming/constants/Constants.js"),D=r("./src/streaming/vo/metrics/HTTPRequest.js"),M=r("./src/core/events/Events.js");function i(e){var i,a,o,s,t,r=this.context,u=(0,C.default)(r).getInstance(),n=e.textController,l=e.eventBus,c=[],f=[],d=!1,g=e.mediaSource,m=null;function h(t){return new Promise(function(e){A(function(){o.changeType&&o.changeType(t),e()})})}function p(e){return o=n.getTextSourceBuffer(e),Promise.resolve()}function y(){if("function"==typeof o.addEventListener)try{o.addEventListener("updateend",b,!1),o.addEventListener("error",S,!1),o.addEventListener("abort",S,!1)}catch(e){t=setInterval(b,50)}else t=setInterval(b,50)}function E(n){return new Promise(function(r){o&&u.get().streaming.buffer.useAppendWindow?A(function(){try{if(!o)return void r();var e=g.duration,t=0;n&&!isNaN(n.start)&&!isNaN(n.duration)&&isFinite(n.duration)&&(e=n.start+n.duration),n&&!isNaN(n.start)&&(t=n.start),o.appendWindowEnd===e&&o.appendWindowStart===t||(o.appendWindowStart=0,o.appendWindowEnd=e+.01,o.appendWindowStart=Math.max(t-.1,0),a.debug("Updated append window for ".concat(s.type,". Set start to ").concat(o.appendWindowStart," and end to ").concat(o.appendWindowEnd))),r()}catch(e){a.warn("Failed to set append window"),r()}}):r()})}function _(e){return new Promise(function(t){o?A(function(){try{o.timestampOffset===e||isNaN(e)||(o.timestampOffset=e,a.debug("Set MSE timestamp offset to ".concat(e))),t()}catch(e){t()}}):t()})}function v(){if(!d&&0<f.length){d=!0;var t=f[0],e=(f.splice(0,1),function(){d=!1,0<f.length&&v.call(this),t&&t.data&&t.data.segmentType&&t.data.segmentType!==D.HTTPRequest.INIT_SEGMENT_TYPE&&delete t.data.bytes,t.promise.resolve({chunk:t.data})});try{m=t.request,0===t.data.bytes.byteLength?e.call(this):(o.appendBuffer?o.appendBuffer(t.data.bytes):o.append(t.data.bytes,t.data),A(e.bind(this)))}catch(e){a.fatal('SourceBuffer append failed "'+e+'"'),0<f.length?v():d=!1,delete t.data.bytes,t.promise.reject({chunk:t.data,error:new I.default(e.code,e.message)})}}}function T(){0<c.length&&(o.updating||(c.shift()(),T()))}function b(){o.updating||T()}function S(e){var e=e.target||{},t=M.default.SOURCE_BUFFER_ERROR,e={error:e,lastRequestAppended:m};e=e||{},l.trigger(t,e,{streamId:s.streamInfo.id,mediaType:i})}function A(e){c.push(e),o.updating||T()}return e={getType:function(){return i},getAllBufferRanges:function(){try{return o.buffered}catch(e){return a.error("getAllBufferRanges exception: "+e.message),null}},getBuffer:function(){return o},append:function(r){var n=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return new Promise(function(e,t){r?(f.push({data:r,promise:{resolve:e,reject:t},request:i}),A(v.bind(n))):t({chunk:r,error:new I.default(w.default.APPEND_ERROR_CODE,w.default.APPEND_ERROR_MESSAGE)})})},remove:function(i){return new Promise(function(e,t){var r=i.start,n=i.end;0<=r&&r<n?A(function(){try{o.remove(r,n),A(function(){e({from:r,to:n,unintended:!1}),i.resolve&&i.resolve()})}catch(e){t({from:r,to:n,unintended:!1,error:new I.default(w.default.REMOVE_ERROR_CODE,w.default.REMOVE_ERROR_MESSAGE)}),i.reject&&i.reject(e)}}):e()})},abort:function(){return new Promise(function(t){try{f=[],"open"===g.readyState?A(function(){try{o&&o.abort(),t()}catch(e){t()}}):(o&&o.setTextTrack&&"ended"===g.readyState&&o.abort(),t())}catch(e){t()}})},reset:function(){if(o){try{c=[];try{"function"==typeof o.removeEventListener&&(o.removeEventListener("updateend",b,!1),o.removeEventListener("error",S,!1),o.removeEventListener("abort",S,!1)),clearInterval(t)}catch(e){a.error(e)}d=!1,f=[],o.getClassName&&"TextSourceBuffer"===o.getClassName()||(a.debug("Removing sourcebuffer from media source"),g.removeSourceBuffer(o))}catch(e){}o=null}m=null},updateTimestampOffset:_,initializeForStreamSwitch:function(e,t,r){return i=(s=e).type,e=s.codec,o=r.getBuffer(),y(),(r=[]).push(new Promise(function(r){A(function(){var e=o.appendWindowStart,t=o.appendWindowEnd;o&&(o.abort(),o.appendWindowStart=e,o.appendWindowEnd=t),r()})})),r.push(E(s.streamInfo)),u.get().streaming.buffer.useChangeTypeForTrackSwitch&&r.push(h(e)),t&&void 0!==t.MSETimeOffset&&r.push(_(t.MSETimeOffset)),Promise.all(r)},initializeForFirstUse:function(t,r,e){i=(s=r).type,r=s.codec;try{if(r.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))return p(t);o=g.addSourceBuffer(r),y();var n=[];return n.push(E(s.streamInfo)),e&&void 0!==e.MSETimeOffset&&n.push(_(e.MSETimeOffset)),Promise.all(n)}catch(e){return s.type==N.default.TEXT&&!s.isFragmented||-1!==r.indexOf('codecs="stpp')||-1!==r.indexOf('codecs="vtt')||-1!==r.indexOf("text/vtt")?p(t):Promise.reject(e)}},updateAppendWindow:E,changeType:h},a=(0,R.default)(r).getInstance().getLogger(e),e}i.__dashjs_factory_name="SourceBufferSink";r=n.default.getClassFactory(i);t.default=r},"./src/streaming/Stream.js":function(e,t,r){"use strict";r.r(t);var le=r("./src/streaming/constants/Constants.js"),ce=r("./src/dash/constants/DashConstants.js"),fe=r("./src/streaming/StreamProcessor.js"),de=r("./src/streaming/controllers/FragmentController.js"),ge=r("./src/streaming/thumbnail/ThumbnailController.js"),me=r("./src/core/EventBus.js"),he=r("./src/core/events/Events.js"),pe=r("./src/core/Debug.js"),ye=r("./src/core/errors/Errors.js"),n=r("./src/core/FactoryMaker.js"),Ee=r("./src/streaming/vo/DashJSError.js"),_e=r("./src/streaming/utils/BoxParser.js"),ve=r("./src/streaming/utils/URLUtils.js"),Te=r("./src/streaming/controllers/BlacklistController.js"),be=[le.default.VIDEO,le.default.AUDIO,le.default.TEXT,le.default.MUXED,le.default.IMAGE];function i(u){u=u||{};var t,l,c,o,a,s,f,d,g,m,h,p,y,i,E,_,r,v,T=this.context,b=(0,me.default)(T).getInstance(),e=(0,ve.default)(T).getInstance(),S=u.manifestModel,j=u.mediaPlayerModel,k=u.dashMetrics,U=u.manifestUpdater,A=u.adapter,B=u.timelineConverter,G=u.capabilities,R=u.errHandler,I=u.abrController,q=u.playbackController,w=u.eventController,C=u.mediaController,N=u.protectionController,D=u.textController,M=u.videoModel,O=u.streamInfo,H=u.settings;function Y(a,e){return new Promise(function(r,t){$(),m=!0,ee();var n=M.getElement(),i=[];be.forEach(function(e){(e!==le.default.TEXT||a)&&(e!==le.default.VIDEO||!n||n&&/^VIDEO$/i.test(n.nodeName))&&i.push(V(e,a))}),Promise.all(i).then(function(){return n=e,new Promise(function(t){var r={},e=c.map(function(e){return e.createBufferSinks(n)});Promise.all(e).then(function(e){e.forEach(function(e){e&&(r[e.getType()]=e)}),t(r)}).catch(function(){t(r)})});var n}).then(function(e){var t;m=!1,0===c.length?(R.error(new Ee.default(ye.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,t="No streams to play.",S.getValue())),l.fatal(t)):P(),a&&D.createTracks(O),r(e)}).catch(function(e){t(e)})})}function V(e,t){var r=A.getAllMediaInfoForType(O,e),n=[],i=null;if(!r||0===r.length)return l.info("No "+e+" data."),Promise.resolve();e===le.default.VIDEO&&(f=!0),e===le.default.AUDIO&&(d=!0);for(var a=0,o=r.length;a<o;a++)i=r[a],e===le.default.TEXT&&i.isEmbedded&&(D.addEmbeddedTrack(O,i),n.push(i)),K(i)&&C.addTrack(i);if(0<n.length&&(C.setInitialMediaSettingsForType(e,O),D.addMediaInfosToBuffer(O,e,n)),0===(r=r.filter(function(e){return!e.isEmbedded})).length)return Promise.resolve();if(e===le.default.IMAGE)return(p=(0,ge.default)(T).create({streamInfo:O,adapter:A,baseURLController:u.baseURLController,timelineConverter:u.timelineConverter,debug:_,eventBus:b,events:he.default,dashConstants:ce.default,dashMetrics:u.dashMetrics,segmentBaseController:u.segmentBaseController})).initialize(),Promise.resolve();b.trigger(he.default.STREAM_INITIALIZING,{streamInfo:O,mediaInfo:i}),C.setInitialMediaSettingsForType(e,O);var s,t=function(e,t){var r=e&&0<e.length?e[0]:null,n=h.getModel(r?r.type:null),i=r?r.type:null,a=r?r.mimeType:null,r=r?r.isFragmented:null,o=(0,fe.default)(T).create({streamInfo:O,type:i,mimeType:a,timelineConverter:B,adapter:A,manifestModel:S,mediaPlayerModel:j,fragmentModel:n,dashMetrics:u.dashMetrics,baseURLController:u.baseURLController,segmentBaseController:u.segmentBaseController,abrController:I,playbackController:q,mediaController:C,textController:D,errHandler:R,settings:H,boxParser:E,segmentBlacklistController:y});o.initialize(t,f,r),c.push(o);for(var s=0;s<e.length;s++)o.addMediaInfo(e[s]);i===le.default.TEXT&&D.addMediaInfosToBuffer(O,i,e,n);return o}(r,t);return(s=C.getCurrentTrackFor(e,O.id))?(I.updateTopQualityIndex(s),t.selectMediaInfo(e===le.default.TEXT&&s.isEmbedded?r[0]:s)):Promise.resolve()}function K(e){var t,r=e?e.type:null;return r===le.default.MUXED?(l.fatal(t="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines"),void R.error(new Ee.default(ye.default.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,t,S.getValue()))):r===le.default.TEXT||r===le.default.IMAGE||(!e.contentProtection||G.supportsEncryptedMedia()||void R.error(new Ee.default(ye.default.CAPABILITY_MEDIAKEYS_ERROR_CODE,ye.default.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE)))}function z(e){for(var t=c?c.length:0,r=0;r<t;r++){var n=c[r].getFragmentModel();n.abortRequests(),n.resetInitialSettings(),c[r].reset(!1,e)}D&&D.deactivateStream(O),x(s=a=!(c=[])),X(!1),b.trigger(he.default.STREAM_DEACTIVATED,{streamInfo:O})}function W(e){z(e),d=f=o=!1,r=m=!(g={}),v=[]}function X(e){r=e}function Q(){return O?O.start:NaN}function J(){return O?O.id:null}function Z(){return O}function $(){if(!M||!I)throw new Error(le.default.MISSING_CONFIG_ERROR)}function n(e){e.error&&(R.error(e.error),l.fatal(e.error.message))}function ee(){var e;w&&(e=A.getEventsFor(O))&&0<e.length&&w.addInlineEvents(e,O.id)}function P(){for(var e=c.length,t=!!g.audio||!!g.video?new Ee.default(ye.default.DATA_UPDATE_FAILED_ERROR_CODE,ye.default.DATA_UPDATE_FAILED_ERROR_MESSAGE):null,r=0;r<e;r++)if(c[r].isUpdating()||m)return;if(N){N.clearMediaInfoArray();for(var n=0;n<e&&c[n];n++){var i=c[n].getType(),a=c[n].getMediaInfo();!(i===le.default.AUDIO||i===le.default.VIDEO||i===le.default.TEXT&&a.isFragmented)||(i=c[n].getMediaInfo())&&N.initializeForMedia(i)}N.handleKeySystemFromManifest()}t?R.error(t):o||(o=!0,M.waitForReadyState(le.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){b.trigger(he.default.STREAM_INITIALIZED,{streamInfo:O})}))}function te(){var e=F(),t=e.length;if(0===t)l.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined");else{for(var r=0;r<t;r++)if(!e[r].isBufferingCompleted()&&(e[r].getType()===le.default.AUDIO||e[r].getType()===le.default.VIDEO))return void l.debug("onBufferingCompleted - One streamProcessor has finished but",e[r].getType(),"one is not buffering completed");l.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),s=!0,b.trigger(he.default.STREAM_BUFFERING_COMPLETED,{streamInfo:O},{streamInfo:O})}}function re(e){g[e.mediaType]=e.error,P()}function ne(e){w&&w.addInbandEvents(e.events,O.id)}function ie(e){return e&&e.type?L(e.type):null}function L(t){return t?F().filter(function(e){return e.getType()===t})[0]:null}function F(){for(var e,t,r=[],n=0;n<c.length;n++)(e=(t=c[n]).getType())!==le.default.AUDIO&&e!==le.default.VIDEO&&e!==le.default.TEXT||r.push(t);return r}function ae(e,t){var r=O,t=t.getStreamInfo();if(!t||!r)return!0;t=A.getAdaptationForType(t.index,e,t),e=A.getAdaptationForType(r.index,e,r);return t&&e?!(!oe(e)&&oe(t)):!t&&!e}function oe(e){return e&&(e.ContentProtection||e.Representation_asArray&&0<e.Representation_asArray.length&&e.Representation_asArray[0].ContentProtection)}function se(e,t,r){r=2<arguments.length&&void 0!==r?r:null;if(!e||!e.hasOwnProperty("getStreamInfo"))return!1;e=e.getStreamInfo(),r=r?r.getStreamInfo():O;if(!e||!r)return!1;e=A.getAdaptationForType(e.index,t,e),t=A.getAdaptationForType(r.index,t,r);if(!e||!t)return!e&&!t;var r=e&&t&&e.mimeType===t.mimeType,n=t.Representation_asArray.map(function(e){return e.codecs}),t=e.Representation_asArray.map(function(e){return e.codecs}),e=t.some(function(e){return-1<n.indexOf(e)}),t=t.some(function(t){return n.some(function(e){return G.codecRootCompatibleWithCodec(e,t)})});return e||t&&r}function x(e){i=e}function ue(){return i}t={initialize:function(){b.on(he.default.BUFFERING_COMPLETED,te,t),b.on(he.default.DATA_UPDATE_COMPLETED,re,t),b.on(he.default.INBAND_EVENTS,ne,t),N&&(b.on(he.default.KEY_ERROR,n,t),b.on(he.default.SERVER_CERTIFICATE_UPDATED,n,t),b.on(he.default.LICENSE_REQUEST_COMPLETE,n,t),b.on(he.default.KEY_SYSTEM_SELECTED,n,t),b.on(he.default.KEY_SESSION_CREATED,n,t),b.on(he.default.KEY_STATUSES_CHANGED,n,t)),D.initializeForStream(O),b.trigger(he.default.STREAM_UPDATED,{streamInfo:O})},getStreamId:function(){return O?O.id:null},activate:function(e,n){return new Promise(function(t,r){if(!a)return i?(a=!0,b.trigger(he.default.STREAM_ACTIVATED,{streamInfo:O}),void t(n)):void Y(e,n).then(function(e){a=!0,b.trigger(he.default.STREAM_ACTIVATED,{streamInfo:O}),t(e)}).catch(function(e){r(e)});t(n)})},deactivate:z,getIsActive:function(){return a},getDuration:function(){return O?O.duration:NaN},getStartTime:Q,getId:J,getStreamInfo:Z,getHasAudioTrack:function(){return d},getHasVideoTrack:function(){return f},startPreloading:function(r,n){return new Promise(function(t,e){i?e():(l.info("[startPreloading] Preloading next stream with id ".concat(J())),x(!0),Y(r,n).then(function(){for(var e=0;e<c.length&&c[e];e++)c[e].setExplicitBufferingTime(Q()),c[e].getScheduleController().startScheduleTimer();t()}).catch(function(){x(!1),e()}))})},initializeForTextWithMediaSource:function(r){return new Promise(function(e,t){V(le.default.TEXT,r).then(function(){var e=L(le.default.TEXT);return e?e.createBufferSinks():Promise.resolve()}).then(function(){D.createTracks(O),e()}).catch(function(e){t(e)})})},getThumbnailController:function(){return p},getBitrateListFor:function(e){return $(),e===le.default.IMAGE?p?p.getBitrateList():[]:(e=function(e){for(var t=null,r=0;r<c.length;r++)if((t=c[r]).getType()===e)return t.getMediaInfo();return null}(e),I.getBitrateList(e))},updateData:function(l){return new Promise(function(e){m=!0,O=l,w&&ee();for(var r=[],t=0,n=c.length;t<n;t++){var i=c[t],a=i.getMediaInfo(),o=(r.push(i.updateStreamInfo(O)),A.getAllMediaInfoForType(O,i.getType()));if(o=o.filter(function(e){return!e.isEmbedded})){i.clearMediaInfoArray();for(var s=0;s<o.length;s++){var u=o[s];i.addMediaInfo(o[s]),A.areMediaInfosEqual(a,u)&&(I.updateTopQualityIndex(u),r.push(i.selectMediaInfo(u)))}}}Promise.all(r).then(function(){for(r=[];0<v.length;){var e=v.pop(),t=e.newMediaInfo,e=ie(e.oldMediaInfo);if(!e)return;r.push(e.prepareTrackSwitch()),r.push(e.selectMediaInfo(t))}return Promise.all(r)}).then(function(){m=!1,P(),b.trigger(he.default.STREAM_UPDATED,{streamInfo:O}),e()})})},reset:function(e){h&&(h.reset(),h=null),I&&O&&I.clearDataForStream(O.id),y&&(y.reset(),y=null),W(e),O=null,b.off(he.default.DATA_UPDATE_COMPLETED,re,t),b.off(he.default.BUFFERING_COMPLETED,te,t),b.off(he.default.INBAND_EVENTS,ne,t),N&&(b.off(he.default.KEY_ERROR,n,t),b.off(he.default.SERVER_CERTIFICATE_UPDATED,n,t),b.off(he.default.LICENSE_REQUEST_COMPLETE,n,t),b.off(he.default.KEY_SYSTEM_SELECTED,n,t),b.off(he.default.KEY_SESSION_CREATED,n,t),b.off(he.default.KEY_STATUSES_CHANGED,n,t))},getProcessors:F,setMediaSource:function(i){return new Promise(function(r,t){for(var e=[],n=0;n<c.length;)K(c[n].getMediaInfo())?(e.push(c[n].setMediaSource(i)),n++):(c[n].reset(),c.splice(n,1));Promise.all(e).then(function(){for(var e,t=0;t<c.length;t++)c[t].dischargePreBuffer();0===c.length&&(R.error(new Ee.default(ye.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,(e="No streams to play.")+"nostreams",S.getValue())),l.fatal(e)),r()}).catch(function(e){l.error(e),t(e)})})},isMediaCodecCompatible:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return se(e,le.default.VIDEO,t)&&se(e,le.default.AUDIO,t)},isProtectionCompatible:function(e){return!e||ae(le.default.VIDEO,e)&&ae(le.default.AUDIO,e)},getPreloaded:ue,getIsEndedEventSignaled:function(){return r},setIsEndedEventSignaled:X,getAdapter:function(){return A},getHasFinishedBuffering:function(){return s},setPreloaded:x,startScheduleControllers:function(){for(var e=c.length,t=0;t<e&&c[t];t++)c[t].getScheduleController().startScheduleTimer()},prepareTrackChange:function(e){var t,r,n,i;a&&O&&(s=!1,t=e.newMediaInfo,r=S.getValue(),A.setCurrentMediaInfo(O.id,t.type,t),(n=ie(t))&&(i=q.getTime(),l.info("Stream -  Process track changed at current time "+i),r.refreshManifestOnSwitchTrack?(v.push(e),U.getIsUpdating()||(l.debug("Stream -  Refreshing manifest for switch track"),U.refreshManifest())):n.selectMediaInfo(t).then(function(){t.type!==le.default.VIDEO&&t.type!==le.default.AUDIO||I.updateTopQualityIndex(t),n.prepareTrackSwitch()})))},prepareQualityChange:function(e){var t=L(e.mediaType);t&&t.prepareQualityChange(e)}};try{_=(0,pe.default)(T).getInstance(),l=_.getLogger(t),W(),E=(0,_e.default)(T).getInstance(),y=(0,Te.default)(T).create({updateEventName:he.default.SEGMENT_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:he.default.SEGMENT_LOCATION_BLACKLIST_ADD}),h=(0,de.default)(T).create({streamInfo:O,mediaPlayerModel:j,dashMetrics:k,errHandler:R,settings:H,boxParser:E,dashConstants:ce.default,urlUtils:e})}catch(e){throw e}return t}i.__dashjs_factory_name="Stream",t.default=n.default.getClassFactory(i)},"./src/streaming/StreamProcessor.js":function(e,t,r){"use strict";r.r(t);var ce=r("./src/streaming/constants/Constants.js"),fe=r("./src/dash/constants/DashConstants.js"),de=r("./src/streaming/constants/MetricsConstants.js"),ge=r("./src/streaming/models/FragmentModel.js"),me=r("./src/streaming/controllers/BufferController.js"),he=r("./src/streaming/text/NotFragmentedTextBufferController.js"),pe=r("./src/streaming/controllers/ScheduleController.js"),ye=r("./src/dash/controllers/RepresentationController.js"),n=r("./src/core/FactoryMaker.js"),Ee=r("./src/streaming/utils/SupervisorTools.js"),_e=r("./src/core/EventBus.js"),ve=r("./src/core/events/Events.js"),Te=r("./src/streaming/MediaPlayerEvents.js"),be=r("./src/dash/DashHandler.js"),Se=r("./src/core/errors/Errors.js"),Ae=r("./src/streaming/vo/DashJSError.js"),Re=r("./src/core/Debug.js"),Ie=r("./src/streaming/utils/RequestModifier.js"),we=r("./src/streaming/utils/URLUtils.js"),Ce=r("./src/streaming/vo/metrics/PlayList.js"),Ne=r("./src/dash/controllers/SegmentsController.js"),De=r("./src/streaming/vo/metrics/HTTPRequest.js"),Me=r("./src/streaming/utils/TimeUtils.js");function i(n){n=n||{};var i,s,o,u,r,l,c,y,a,f,d,g,m,h,p=this.context,E=(0,_e.default)(p).getInstance(),_=n.streamInfo,v=n.type,T=n.errHandler,k=n.mimeType,b=n.timelineConverter,S=n.adapter,U=n.manifestModel,A=n.mediaPlayerModel,R=n.fragmentModel,I=n.abrController,w=n.playbackController,B=n.mediaController,C=n.textController,N=n.dashMetrics,D=n.settings,M=n.boxParser,G=n.segmentBlacklistController;function q(){return _.id}function e(){return v}function O(){return S.getIsTextTrack(y.getData())}function H(){m=0,f=a=!(r=[]),h=u=null}function Y(e){return!isNaN(e)&&!isNaN(_.duration)&&isFinite(_.duration)&&e>=_.start+_.duration}function V(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];e.sender&&(w.getIsManifestUpdateInProgress()?L():O()&&!C.isTextEnabled()||l&&e.representationId&&(l.appendInitSegmentFromCache(e.representationId)||(0===(e=y.getCurrentRepresentation()).range?P():(e=d?d.getInitRequest(u,e):null)?R.executeRequest(e):t&&(c.setInitSegmentRequired(!0),L()))))}function P(e){var t,r,n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];w.getIsManifestUpdateInProgress()||l.getIsPruningInProgress()?L():(t=function(){var e,t=F();if(isNaN(m)||v===ce.default.TEXT&&!C.isTextEnabled())return null;d&&(t=y&&t?y.getRepresentationForQuality(t.quality):null,e=a?d.getSegmentRequestForTime(u,t,m):d.getNextSegmentRequest(u,t));return e}())?(a=!1,t=t,isNaN(t.startTime+t.duration)||(m=t.startTime+t.duration),t.delayLoadingTime=(new Date).getTime()+c.getTimeToLoadDelay(),c.setTimeToLoadDelay(0),function(e){var t=e.url;e.range&&(t=t.concat("_",e.range));return G.contains(t)}(t)?(s.warn("Fragment request url ".concat(t.url," for stream id ").concat(_.id," and media type ").concat(v," is on the ignore list and will be skipped")),L()):(s.debug("Next fragment request url for stream id ".concat(_.id," and media type ").concat(v," is ").concat(t.url)),R.executeRequest(t))):(t=n,n=y.getCurrentRepresentation(),!D.get().streaming.gaps.enableSeekFix||!a&&0!==w.getTime()||(o&&n.segmentInfoType!==fe.default.SEGMENT_TIMELINE||(r=d.getValidTimeAheadOfTargetTime(m,u,n,D.get().streaming.gaps.threshold)),isNaN(r)||r===m)?d.isLastSegmentRequested(n,m)?(r=d.getCurrentIndex(),s.debug("Segment requesting for stream ".concat(_.id," has finished")),E.trigger(ve.default.STREAM_REQUESTING_COMPLETED,{segmentIndex:r},{streamId:_.id,mediaType:v}),l.segmentRequestingCompleted(r),c.clearScheduleTimer()):t&&L():w.isSeeking()||0===w.getTime()?(s.warn("Adjusting playback time ".concat(r," because of gap in the manifest. Seeking by ").concat(r-m)),w.seek(r,!1,!1)):(s.warn("Adjusting buffering time ".concat(r," because of gap in the manifest. Adjusting time by ").concat(r-m)),j(r),t&&L()))}function L(){c.startScheduleTimer(w.getLowLatencyModeEnabled()?D.get().streaming.scheduling.lowLatencyTimeout:D.get().streaming.scheduling.defaultTimeout)}function K(e){e.error||l.getIsBufferingCompleted()||l.updateBufferTimestampOffset(e.currentRepresentation)}function z(e){N.addBufferState(v,e.state,c.getBufferTarget()),e.state!==de.default.BUFFER_EMPTY||w.isSeeking()||(s.info("Buffer is empty! Stalling!"),N.pushPlayListTraceMetrics(new Date,Ce.PlayListTrace.REBUFFERING_REASON))}function W(e){R.syncExecutedRequestsWithBufferedRange(l.getBuffer().getAllBufferRanges(),_.duration),e.quotaExceeded&&e.from>w.getTime()&&j(e.from),e.hasEnoughSpaceToAppend&&e.quotaExceeded&&c.startScheduleTimer()}function X(e){var t;e&&e.lastRequestAppended&&e.lastRequestAppended.url&&(t=e.lastRequestAppended.url,e.lastRequestAppended.range&&(t=t.concat("_",e.lastRequestAppended.range)),s.warn("Blacklisting segment with url ".concat(t)),G.add(t))}function Q(e){var t;s.debug("Appended bytes for ".concat(e.mediaType," and stream id ").concat(e.streamId)),e.segmentType===De.HTTPRequest.INIT_SEGMENT_TYPE&&(t=e.quality,c.setLastInitializedQuality(t),s.info("["+v+"] lastInitializedRepresentationInfo changed to "+e.quality)),h?J(h):c.startScheduleTimer(0)}function J(e){var t=R.getRequests({state:ge.default.FRAGMENT_MODEL_LOADING});if(t&&0<t.length)return s.debug("Preparing for default quality switch: Waiting for ongoing segment request to be finished before applying switch."),void(h=e);l.updateBufferTimestampOffset(e).then(function(){u.segmentAlignment||u.subSegmentAlignment?c.startScheduleTimer():ue(),h=null,f=!1}).catch(function(){h=null,f=!1})}function Z(e){s.info("onFragmentLoadingAbandoned request: "+e.request.url+" has been aborted"),w.isSeeking()||c.getSwitchTrack()||f||(s.info("onFragmentLoadingAbandoned request: "+e.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),e.request&&e.request.isInitializationRequest()?c.setInitSegmentRequired(!0):j(e.request.startTime+e.request.duration/2),c.startScheduleTimer(0))}function $(e){s.info("OnFragmentLoadingCompleted for stream id "+_.id+" and media type "+v+" - Url:",e.request?e.request.url:"undefined",e.request.range?", Range:"+e.request.range:""),O()&&c.startScheduleTimer(0),e.error&&e.request.serviceLocation&&(e=e,s.info("Fragment loading completed with an error"),e&&e.request&&e.request.type&&(e.request.type===De.HTTPRequest.INIT_SEGMENT_TYPE?V({representationId:e.request.representationId,sender:{}},!1):e.request.type===De.HTTPRequest.MEDIA_SEGMENT_TYPE&&(j(e.request.startTime+e.request.duration/2),P({},!1))))}function ee(){j(w.getTime()),c.startScheduleTimer()}function te(e){var t=e.currentTrackInfo;!t||(e=r.find(function(e){return e.index===t.index&&e.lang===t.lang}))&&ie(e).then(function(){l.setIsBufferingCompleted(!1),j(w.getTime()),c.setInitSegmentRequired(!0),c.startScheduleTimer()})}function re(e){j(e.quotaExceededTime),c.clearScheduleTimer()}function ne(){return l?l.getBuffer():null}function ie(e){e===u||e&&u&&e.type!==u.type||(u=e);var t,r,n,i,e=S.getRealAdaptation(_,u),a=S.getVoRepresentations(u);return y?(i=y.getData(),t=I.getMaxAllowedIndexFor(v,_.id),r=I.getMinAllowedIndexFor(v,_.id),i=(n=null)!==i&&i.id===e.id||v===ce.default.TEXT?I.getQualityFor(v,_.id):(n=I.getThroughputHistory().getAverageThroughput(v,o)||I.getInitialBitrateFor(v,_.id),I.getQualityForBitrate(u,n,_.id)),y.updateData(e,a,v,u.isFragmented,i=t<(i=void 0!==r&&i<r?r:i)?t:i)):Promise.resolve()}function t(){return c}function F(e){e=void 0!==e?((0,Ee.checkInteger)(e),y?y.getRepresentationForQuality(e):null):y?y.getCurrentRepresentation():null;return S.convertRepresentationToRepresentationInfo(e)}function ae(){return!!l&&l.getIsBufferingCompleted()}function oe(e){var t,r;D.get().streaming.enableManifestTimescaleMismatchFix&&(t=(e=e.chunk).bytes,e=F(e.quality),r=y&&e?y.getRepresentationForQuality(e.quality):null,e&&r&&(r.timescale=M.getMediaTimescaleFromMoov(t)))}function se(e){var t,r,n,i=e.chunk,a=i.bytes,o=i.quality,s=F(o),u=y&&s?y.getRepresentationForQuality(s.quality):null;s&&u&&(D.get().streaming.parseInbandPrft&&e.request.type===De.HTTPRequest.MEDIA_SEGMENT_TYPE&&(t=t||M.parse(a),e=u.timescale,r=e,e=(e=t).getBoxes("prft"),n=[],e.forEach(function(e){n.push(function(e,t){var r="unknown";switch(e.flags){case 0:r=fe.default.PRODUCER_REFERENCE_TIME_TYPE.ENCODER;break;case 16:r=fe.default.PRODUCER_REFERENCE_TIME_TYPE.APPLICATION;break;case 24:r=fe.default.PRODUCER_REFERENCE_TIME_TYPE.CAPTURED}var n=1e3*e.ntp_timestamp_sec+e.ntp_timestamp_frac/Math.pow(2,32)*1e3,e=(n=(0,Me.default)(p).getInstance().ntpToUTC(n),e.media_time/t);return{type:r,ntpTimestamp:n,mediaTime:e}}(e,r))}),(e=n)&&e.length&&E.trigger(Te.default.INBAND_PRFT,{data:e},{streamId:_.id,mediaType:v})),e=S.getEventsFor(s.mediaInfo,null,_),s=S.getEventsFor(s,u,_),(e&&0<e.length||s&&0<s.length)&&(u=R.getRequests({state:ge.default.FRAGMENT_MODEL_EXECUTED,quality:o,index:i.index})[0],o=function(e,t,r,n){try{for(var i={},a=[],o=r.concat(n),s=0,u=o.length;s<u;s++)i[o[s].schemeIdUri+"/"+o[s].value]=o[s];var l=e.getBoxes("emsg");if(!l||0===l.length)return a;for(var c=e.getBox("sidx"),f=!c||isNaN(c.earliest_presentation_time)||isNaN(c.timescale)?t&&!isNaN(t.mediaStartTime)?t.mediaStartTime:0:c.earliest_presentation_time/c.timescale,d=Math.max(f,0),g=y.getCurrentRepresentation(),m=0,h=l.length;m<h;m++){var p=S.getEvent(l[m],i,d,g);p&&a.push(p)}return a}catch(e){return[]}}(t=t||M.parse(a),u,e,s),E.trigger(ve.default.INBAND_EVENTS,{events:o},{streamId:_.id})))}function x(){var e=w.getTime();D.get().streaming.buffer.flushBufferAtTrackSwitch&&w.seek(e+.001,!1,!0),j(e),l.setSeekTarget(e),c.startScheduleTimer()}function ue(){var e=w.getTime(),t=l.getContinuousBufferTimeForTargetTime(e);j(isNaN(t)?e:t),c.startScheduleTimer()}function le(e){e&&!isNaN(e.time)&&(j(e.time),l.setSeekTarget(e.time))}function j(e){m=e,a=!0}return i={initialize:function(e,t,r){g=(0,Ne.default)(p).create({events:ve.default,eventBus:E,streamInfo:_,timelineConverter:b,dashConstants:fe.default,segmentBaseController:n.segmentBaseController,type:v}),d=(0,be.default)(p).create({streamInfo:_,type:v,timelineConverter:b,dashMetrics:N,mediaPlayerModel:A,baseURLController:n.baseURLController,errHandler:T,segmentsController:g,settings:D,boxParser:M,events:ve.default,eventBus:E,errors:Se.default,debug:(0,Re.default)(p).getInstance(),requestModifier:(0,Ie.default)(p).getInstance(),dashConstants:fe.default,constants:ce.default,urlUtils:(0,we.default)(p).getInstance()}),o=_.manifestInfo.isDynamic,d.initialize(o),I.registerStreamType(v,i),y=(0,ye.default)(p).create({streamInfo:_,type:v,abrController:I,dashMetrics:N,playbackController:w,timelineConverter:b,dashConstants:fe.default,events:ve.default,eventBus:E,errors:Se.default,isDynamic:o,adapter:S,segmentsController:g}),(l=function(e,t){var r=null;if(!e)return T.error(new Ae.default(Se.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,Se.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null;r=e!==ce.default.TEXT||t?(0,me.default)(p).create({streamInfo:_,type:e,mediaPlayerModel:A,manifestModel:U,fragmentModel:R,errHandler:T,mediaController:B,representationController:y,adapter:S,textController:C,abrController:I,playbackController:w,settings:D}):(0,he.default)(p).create({streamInfo:_,type:e,mimeType:k,fragmentModel:R,textController:C,errHandler:T,settings:D});return r}(v,r))&&l.initialize(e),(c=(0,pe.default)(p).create({streamInfo:_,type:v,mimeType:k,adapter:S,dashMetrics:N,mediaPlayerModel:A,fragmentModel:R,abrController:I,playbackController:w,textController:C,mediaController:B,bufferController:l,representationController:y,settings:D})).initialize(t),m=0,a=!1},getStreamId:q,getType:e,isUpdating:function(){return!!y&&y.isUpdating()},getBufferController:function(){return l},dischargePreBuffer:function(){l.dischargePreBuffer()},getFragmentModel:function(){return R},getScheduleController:t,getRepresentationController:function(){return y},getRepresentationInfo:F,getBufferLevel:function(){return l?l.getBufferLevel():0},isBufferingCompleted:ae,createBufferSinks:function(e){var t=ne();return t?Promise.resolve(t):l?l.createBufferSink(u,e):Promise.resolve(null)},updateStreamInfo:function(e){return _=e,ae()?Promise.resolve():l.updateAppendWindow()},getStreamInfo:function(){return _},selectMediaInfo:ie,clearMediaInfoArray:function(){r=[]},addMediaInfo:function(e){-1===r.indexOf(e)&&r.push(e)},prepareTrackSwitch:function(){return new Promise(function(e){s.debug("Preparing track switch for type ".concat(v));var t=v===ce.default.TEXT||D.get().streaming.trackSwitchMode[v]===ce.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&w.getTimeToStreamEnd(_)>D.get().streaming.buffer.stallThreshold;if(l.getIsBufferingCompleted()&&!t)return l.prepareForNonReplacementTrackSwitch(u.codec).then(function(){E.trigger(ve.default.BUFFERING_COMPLETED,{},{streamId:_.id,mediaType:v})}).catch(function(){E.trigger(ve.default.BUFFERING_COMPLETED,{},{streamId:_.id,mediaType:v})}),void e();c.clearScheduleTimer(),c.setSwitchTrack(!0),t?(E.trigger(ve.default.BUFFER_REPLACEMENT_STARTED,{mediaType:v,streamId:_.id},{mediaType:v,streamId:_.id}),R.abortRequests(),l.prepareForReplacementTrackSwitch(u.codec).then(function(){var e=F();return l.updateBufferTimestampOffset(e)}).then(function(){x(),e()}).catch(function(){x(),e()})):l.prepareForNonReplacementTrackSwitch(u.codec).then(function(){ue(),e()}).catch(function(){ue(),e()})})},prepareQualityChange:function(e){h&&s.warning("Canceling queued representation switch to ".concat(h.quality," for ").concat(v)),s.debug("Preparing quality switch for type ".concat(v));var t,r,n,i,a,o=e.newQuality,o=(f=!0,c.clearScheduleTimer(),y.prepareQualityChange(o),F(o));e.reason&&e.reason.forceReplace?(e=o,R.abortRequests(),E.trigger(ve.default.BUFFER_REPLACEMENT_STARTED,{mediaType:v,streamId:_.id},{mediaType:v,streamId:_.id}),l.prepareForForceReplacementQualitySwitch(e).then(function(){x(),f=!1}).catch(function(){x(),f=!1})):D.get().streaming.buffer.fastSwitchEnabled?(e=o,t=w.getTime(),r=1.5*(isNaN(e.fragmentDuration)?1:e.fragmentDuration),(n=R.getRequests({state:ge.default.FRAGMENT_MODEL_EXECUTED,time:t+r,threshold:0})[0])&&!O()?(i=l.getBufferLevel(),a=I.getAbandonmentStateFor(_.id,v),n.quality<e.quality&&r<=i&&a!==de.default.ABANDON_LOAD?l.updateBufferTimestampOffset(e).then(function(){R.abortRequests(),j(t+r),c.setCheckPlaybackQuality(!1),c.startScheduleTimer(),f=!1}).catch(function(){f=!1}):J(e)):(c.startScheduleTimer(),f=!1)):J(o),N.pushPlayListTraceMetrics(new Date,Ce.PlayListTrace.REPRESENTATION_SWITCH_STOP_REASON),N.createPlaylistTraceMetrics(o.id,1e3*w.getTime(),w.getPlaybackRate())},getMediaInfo:function(){return u},getMediaSource:function(){return l.getMediaSource()},setMediaSource:function(e){return l.setMediaSource(e,u)},getBuffer:ne,setExplicitBufferingTime:j,finalisePlayList:function(e,t){N.pushPlayListTraceMetrics(e,t)},probeNextRequest:function(){var e=F(),e=y&&e?y.getRepresentationForQuality(e.quality):null;return d.getNextSegmentRequestIdempotent(u,e)},prepareInnerPeriodPlaybackSeeking:function(n){return new Promise(function(r){if(l.hasBufferAtTime(n.seekTime))return l.pruneBuffer(),Y(l.getContinuousBufferTimeForTargetTime(n.seekTime))&&l.setIsBufferingCompleted(!0),void r();c.clearScheduleTimer(),R.abortRequests(),l.prepareForPlaybackSeek().then(function(){var e=l.getAllRangesWithSafetyFactor(n.seekTime);return l.clearBuffers(e)}).then(function(){var e,t=l.getContinuousBufferTimeForTargetTime(n.seekTime);Y(t)?(l.setIsBufferingCompleted(!0),r()):(j(t=isNaN(t)?n.seekTime:t),l.setSeekTarget(t),(t=[]).push(l.updateAppendWindow()),e=F(),t.push(l.updateBufferTimestampOffset(e)),Promise.all(t).then(function(){c.setInitSegmentRequired(!0),c.setCheckPlaybackQuality(!1),c.startScheduleTimer(),r()}))}).catch(function(e){s.error(e)})})},prepareOuterPeriodPlaybackSeeking:function(){return new Promise(function(e,t){try{c.clearScheduleTimer(),R.abortRequests(),l.prepareForPlaybackSeek().then(function(){return l.pruneAllSafely()}).then(function(){e()})}catch(e){t(e)}})},reset:function(e,t){d&&d.reset(),l&&(l.reset(e,t),l=null),c&&(c.reset(),c=null),y&&(y.reset(),y=null),g=g&&null,I&&I.unRegisterStreamType(q(),v),E.off(ve.default.DATA_UPDATE_COMPLETED,K,i),E.off(ve.default.INIT_FRAGMENT_NEEDED,V,i),E.off(ve.default.MEDIA_FRAGMENT_NEEDED,P,i),E.off(ve.default.INIT_FRAGMENT_LOADED,oe,i),E.off(ve.default.MEDIA_FRAGMENT_LOADED,se,i),E.off(ve.default.BUFFER_LEVEL_STATE_CHANGED,z,i),E.off(ve.default.BUFFER_CLEARED,W,i),E.off(ve.default.SEEK_TARGET,le,i),E.off(ve.default.FRAGMENT_LOADING_ABANDONED,Z,i),E.off(ve.default.FRAGMENT_LOADING_COMPLETED,$,i),E.off(ve.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,ee,i),E.off(ve.default.SET_NON_FRAGMENTED_TEXT,te,i),E.off(ve.default.QUOTA_EXCEEDED,re,i),E.off(ve.default.SOURCE_BUFFER_ERROR,X,i),E.off(ve.default.BYTES_APPENDED_END_FRAGMENT,Q,i),H(),_=v=null}},s=(0,Re.default)(p).getInstance().getLogger(i),H(),E.on(ve.default.DATA_UPDATE_COMPLETED,K,i,{priority:_e.default.EVENT_PRIORITY_HIGH}),E.on(ve.default.INIT_FRAGMENT_NEEDED,V,i),E.on(ve.default.MEDIA_FRAGMENT_NEEDED,P,i),E.on(ve.default.INIT_FRAGMENT_LOADED,oe,i),E.on(ve.default.MEDIA_FRAGMENT_LOADED,se,i),E.on(ve.default.BUFFER_LEVEL_STATE_CHANGED,z,i),E.on(ve.default.BUFFER_CLEARED,W,i),E.on(ve.default.SEEK_TARGET,le,i),E.on(ve.default.FRAGMENT_LOADING_ABANDONED,Z,i),E.on(ve.default.FRAGMENT_LOADING_COMPLETED,$,i),E.on(ve.default.QUOTA_EXCEEDED,re,i),E.on(ve.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,ee,i),E.on(ve.default.SET_NON_FRAGMENTED_TEXT,te,i),E.on(ve.default.SOURCE_BUFFER_ERROR,X,i),E.on(ve.default.BYTES_APPENDED_END_FRAGMENT,Q,i),i}i.__dashjs_factory_name="StreamProcessor",t.default=n.default.getClassFactory(i)},"./src/streaming/XlinkLoader.js":function(e,t,r){"use strict";r.r(t);var u=r("./src/streaming/vo/DashJSError.js"),n=r("./src/streaming/net/URLLoader.js"),l=r("./src/streaming/vo/metrics/HTTPRequest.js"),c=r("./src/streaming/vo/TextRequest.js"),i=r("./src/core/EventBus.js"),f=r("./src/core/events/Events.js"),a=r("./src/core/FactoryMaker.js"),d=r("./src/core/errors/Errors.js");function o(e){e=e||{};var a="urn:mpeg:dash:resolve-to-zero:2013",t=this.context,o=(0,i.default)(t).getInstance(),s=(0,n.default)(t).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,errors:d.default});return{load:function(r,n,i){function t(e,t){n.resolved=!0,n.resolvedContent=e||null,o.trigger(f.default.XLINK_ELEMENT_LOADED,{element:n,resolveObject:i,error:e||t?null:new u.default(d.default.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,d.default.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+r)})}var e;r===a?t(null,!0):(e=new c.default(r,l.HTTPRequest.XLINK_EXPANSION_TYPE),s.load({request:e,success:function(e){t(e)},error:function(){t(null)}}))},reset:function(){s&&(s.abort(),s=null)}}}o.__dashjs_factory_name="XlinkLoader",t.default=a.default.getClassFactory(o)},"./src/streaming/constants/ConformanceViolationConstants.js":function(e,t,r){"use strict";r.r(t),t.default={LEVELS:{SUGGESTION:"Suggestion",WARNING:"Warning",ERROR:"Error"},EVENTS:{NO_UTC_TIMING_ELEMENT:{key:"NO_UTC_TIMING_ELEMENT",message:"No UTCTiming element is present in the manifest. You may experience playback failures. For a detailed validation use https://conformance.dashif.org/"},NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE:{key:"NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE",message:'SMPTE 2052-1:2013 defines the attribute name as "imageType" and does not define "imagetype"'},INVALID_DVR_WINDOW:{key:"INVALID_DVR_WINDOW",message:"No valid segment found when applying a specification compliant DVR window calculation. Using SegmentTimeline entries as a fallback."}}}},"./src/streaming/constants/Constants.js":function(e,t,r){"use strict";function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.r(t);r=new(function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.init()}var t,r,n;return t=e,(r=[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.MUXED="muxed",this.IMAGE="image",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.CONTENT_STEERING="contentSteering",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_L2A="abrL2A",this.ABR_STRATEGY_LoLP="abrLoLP",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA="abrFetchThroughputCalculationDownloadedData",this.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING="abrFetchThroughputCalculationMoofParsing",this.ABR_FETCH_THROUGHPUT_CALCULATION_AAST="abrFetchThroughputCalculationAAST",this.LIVE_CATCHUP_MODE_DEFAULT="liveCatchupModeDefault",this.LIVE_CATCHUP_MODE_LOLP="liveCatchupModeLoLP",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)",this.TRACK_SWITCH_MODE_ALWAYS_REPLACE="alwaysReplace",this.TRACK_SWITCH_MODE_NEVER_REPLACE="neverReplace",this.TRACK_SELECTION_MODE_FIRST_TRACK="firstTrack",this.TRACK_SELECTION_MODE_HIGHEST_BITRATE="highestBitrate",this.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY="highestEfficiency",this.TRACK_SELECTION_MODE_WIDEST_RANGE="widestRange",this.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY="highestSelectionPriority",this.CMCD_MODE_QUERY="query",this.CMCD_MODE_HEADER="header",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.CC1="CC1",this.CC3="CC3",this.UTF8="utf-8",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.SERVICE_DESCRIPTION_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:scope:2019",this.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:critical:2019",this.XML="XML",this.ARRAY_BUFFER="ArrayBuffer",this.DVB_REPORTING_URL="dvb:reportingUrl",this.DVB_PROBABILITY="dvb:probability",this.VIDEO_ELEMENT_READY_STATES={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},this.FILE_LOADER_TYPES={FETCH:"fetch_loader",XHR:"xhr_loader"}}}])&&i(t.prototype,r),n&&i(t,n),e}());t.default=r},"./src/streaming/constants/MetricsConstants.js":function(e,t,r){"use strict";function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.r(t);r=new(function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.init()}var t,r,n;return t=e,(r=[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_LOADED="bufferLoaded",this.ABANDON_LOAD="abandonload",this.ALLOW_LOAD="allowload",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors",this.HTTP_REQUEST_DVB_REPORTING_TYPE="DVBReporting"}}])&&i(t.prototype,r),n&&i(t,n),e}());t.default=r},"./src/streaming/constants/ProtectionConstants.js":function(e,t,r){"use strict";function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.r(t);r=new(function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.init()}var t,r,n;return t=e,(r=[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready",this.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING="com.microsoft.playready.recommendation",this.INITIALIZATION_DATA_TYPE_CENC="cenc",this.INITIALIZATION_DATA_TYPE_KEYIDS="keyids",this.INITIALIZATION_DATA_TYPE_WEBM="webm"}}])&&i(t.prototype,r),n&&i(t,n),e}());t.default=r},"./src/streaming/controllers/AbrController.js":function(e,t,r){"use strict";r.r(t);var H=r("./src/streaming/rules/abr/ABRRulesCollection.js"),Y=r("./src/streaming/constants/Constants.js"),V=r("./src/streaming/constants/MetricsConstants.js"),K=r("./src/streaming/vo/BitrateInfo.js"),z=r("./src/streaming/models/FragmentModel.js"),W=r("./src/core/EventBus.js"),X=r("./src/core/events/Events.js"),n=r("./src/core/FactoryMaker.js"),Q=r("./src/streaming/rules/RulesContext.js"),J=r("./src/streaming/rules/SwitchRequest.js"),Z=r("./src/streaming/rules/SwitchRequestHistory.js"),$=r("./src/streaming/rules/DroppedFramesHistory.js"),ee=r("./src/streaming/rules/ThroughputHistory.js"),te=r("./src/core/Debug.js"),re=r("./src/streaming/vo/metrics/HTTPRequest.js"),ne=r("./src/streaming/utils/SupervisorTools.js"),ie=r("./src/streaming/MediaPlayerEvents.js");function i(){var l,c,f,a,o,d,g,m,s,u,h,p,y,E,_,t,v,T,b,S,A,R,I,w,C,N,D,M=this.context,r=(0,te.default)(M).getInstance(),O=(0,W.default)(M).getInstance();function e(){o={},d={},m={},g={},S={},I={},w={},C={},void 0===u&&(u=!1),A&&A.reset(),R=A=b=void 0,clearTimeout(s),s=null}function n(e){var t,r,n=e.request.mediaType,i=e.streamId;n&&i&&g[i]&&D.get().streaming.abr.autoSwitchBitrate[n]&&((t=g[i][n])&&(r=(0,Q.default)(M).create({abrController:l,streamProcessor:t,currentRequest:e.request,useBufferOccupancyABR:I[n],useL2AABR:w[n],useLoLPABR:C[n],videoModel:E}),(r=f.shouldAbandonFragment(r,i)).quality>J.default.NO_CHANGE&&t.getFragmentModel().getRequests({state:z.default.FRAGMENT_MODEL_LOADING,index:e.request.index})[0]&&(m[i][n].state=V.default.ABANDON_LOAD,S[i][n].reset(),S[i][n].push({oldValue:F(n,i),newValue:r.quality,confidence:1,reason:r.reason}),B(n,a.getActiveStreamInfo(),r.quality,r.reason),clearTimeout(s),s=setTimeout(function(){m[i][n].state=V.default.ALLOW_LOAD,s=null},D.get().streaming.abandonLoadTimeout))))}function i(e){e.mediaType===Y.default.VIDEO&&(void 0!==b&&A.push(e.streamId,b,E.getPlaybackQuality()),b=e.newQuality)}function U(e){if(e.metric!==V.default.HTTP_REQUEST||!e.value||e.value.type!==re.HTTPRequest.MEDIA_SEGMENT_TYPE||e.mediaType!==Y.default.AUDIO&&e.mediaType!==Y.default.VIDEO||R.push(e.mediaType,e.value,D.get().streaming.abr.useDeadTimeLatency),e.metric===V.default.BUFFER_LEVEL&&(e.mediaType===Y.default.AUDIO||e.mediaType===Y.default.VIDEO)&&(o=e.mediaType,s=.001*e.value.level,D.get().streaming.abr.ABRStrategy===Y.default.ABR_STRATEGY_DYNAMIC)){e=o,o=s;try{var t=_.getStableBufferTime(),r=t,n=.5*t,i=I[e],a=(i?n:r)<o;(I[e]=a)!==i&&(a?c.info("["+e+"] switching from throughput to buffer occupancy ABR rule (buffer: "+o.toFixed(3)+")."):c.info("["+e+"] switching from buffer occupancy to throughput ABR rule (buffer: "+o.toFixed(3)+")."))}catch(e){c.error(e)}}var o,s}function P(e,t){try{var r;return o[t]=o[t]||{},o[t].hasOwnProperty(e)||(o[t][e]=0),r=function(e,t,r){if(t!==Y.default.VIDEO||!D.get().streaming.abr.limitBitrateByPortal||!g[r]||!g[r][t])return e;u||k();var r=g[r][t].getStreamInfo(),n=y.getAdaptationForType(r.index,t,r).Representation_asArray,i=e;if(0<h&&0<p){for(;0<i&&n[i]&&h<n[i].width&&h-n[i-1].width<n[i].width-h;)i-=1;for(;i<n.length-1&&n[i].width===n[i+1].width;)i+=1}return i}(r=function(e,t,r){r=o[r][t],t=D.get().streaming.abr.maxRepresentationRatio[t];if(isNaN(t)||1<=t||t<0)return e;return Math.min(e,Math.round(r*t))}(r=function(e,t){var r=o[t][e],n=r;if(!g[t]||!g[t][e])return n;var i=L(e,t);void 0!==i&&(n=Math.max(r,i));r=function(e,t){try{var r=_.getAbrBitrateParameter("maxBitrate",e);return-1<r?x(g[t][e].getMediaInfo(),r,t):void 0}catch(e){return}}(e,t);void 0!==r&&(n=Math.min(n,r));return n}(e,t),e,t),e,t),r=D.get().streaming.cmsd.enabled&&D.get().streaming.cmsd.abr.applyMb?function(e,t,r){if("video"!==t)return e;var n=v.getMaxBitrate(t);if(n<0)return e;var i=q(r,"audio",F("audio",r)),i=(n-=i?i.bitrate/1e3:0,x(g[r][t].getMediaInfo(),n,r));return c.debug("Stream ID: "+r+" ["+t+"] Apply max bit rate from CMSD: "+n),Math.min(e,i)}(r,e,t):r}catch(e){return}}function L(e,t){try{var r=e,n=t;try{var i,a,o,s=_.getAbrBitrateParameter("minBitrate",r);return-1<s?(i=g[n][r].getMediaInfo(),a=j(i),o=x(i,s,n),a[o]&&o<a.length-1&&a[o].bitrate<1e3*s&&o++,o):void 0}catch(e){return}return}catch(e){return}}function F(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;try{t=t||a.getActiveStreamInfo().id;if(e&&g[t]&&g[t][e])if(t)return d[t]=d[t]||{},d[t].hasOwnProperty(e)||(d[t][e]=0),d[t][e];return 0}catch(e){return 0}}function B(e,t,r){var n,i,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;t&&t.id&&e&&(n=F(e,t=t.id),(0,ne.checkInteger)(r),i=P(e,t),r!==n&&0<=r&&r<=i&&G(e,n,r,i,a,t))}function G(e,t,r,n,i,a){var o,s,u;e&&g[a]&&g[a][e]&&(s=(o=g[a][e].getStreamInfo())&&o.manifestInfo&&o.manifestInfo.isDynamic,u=N.getCurrentBufferLevel(e),c.info("Stream ID: "+a+" ["+e+"] switch from "+t+" to "+r+"/"+n+" (buffer: "+u+") "+(i?JSON.stringify(i):".")),d[a]=d[a]||{},u=q(a,e,d[a][e]=r),O.trigger(X.default.QUALITY_CHANGE_REQUESTED,{oldQuality:t,newQuality:r,reason:i,streamInfo:o,bitrateInfo:u,maxIdx:n,mediaType:e},{streamId:o.id,mediaType:e}),a=R.getAverageThroughput(e,s),isNaN(a)||T.setSavedBitrateSettings(e,a))}function q(e,t,r){return t&&g&&g[e]&&g[e][t]&&j(g[e][t].getMediaInfo())[r]||null}function x(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,r=e&&e.type?g[r][e.type].getRepresentationInfo():null;if(D.get().streaming.abr.useDeadTimeLatency&&n&&r&&r.fragmentDuration){r=r.fragmentDuration;if(r<(n/=1e3))return 0;t*=1-n/r}for(var i=j(e),a=i.length-1;0<=a;a--)if(1e3*t>=i[a].bitrate)return a;return 0}function j(e){var t=[];if(!e||!e.bitrateList)return t;for(var r,n=e.bitrateList,i=e.type,a=0,o=n.length;a<o;a++)(r=new K.default).mediaType=i,r.qualityIndex=a,r.bitrate=n[a].bandwidth,r.width=n[a].width,r.height=n[a].height,r.scanType=n[a].scanType,t.push(r);return t}function k(){var e;E&&(e=D.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1,h=E.getClientWidth()*e,p=E.getClientHeight()*e)}return l={initialize:function(){A=(0,$.default)(M).create(),R=(0,ee.default)(M).create({settings:D}),(f=(0,H.default)(M).create({dashMetrics:N,customParametersModel:t,mediaPlayerModel:_,settings:D})).initialize(),O.on(ie.default.QUALITY_CHANGE_RENDERED,i,l),O.on(ie.default.METRIC_ADDED,U,l),O.on(X.default.LOADING_PROGRESS,n,l)},isPlayingAtTopQuality:function(e){var e=e?e.id:null,t=F(Y.default.AUDIO,e),r=F(Y.default.VIDEO,e);return t===P(Y.default.AUDIO,e)&&r===P(Y.default.VIDEO,e)},updateTopQualityIndex:function(e){var t=e.type,r=e.streamInfo.id,e=e.representationCount-1;return o[r]=o[r]||{},o[r][t]=e},clearDataForStream:function(e){A&&A.clearForStream(e),g[e]&&delete g[e],S[e]&&delete S[e],m[e]&&delete m[e]},getThroughputHistory:function(){return R},getBitrateList:j,getQualityForBitrate:x,getTopBitrateInfoFor:function(e){var t,r=(r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null)||a.getActiveStreamInfo().id;return e&&g&&g[r]&&g[r][e]?(t=P(e,r),j(g[r][e].getMediaInfo())[t]||null):null},getMinAllowedIndexFor:L,getMaxAllowedIndexFor:P,getInitialBitrateFor:function(e,t){if(!T||!T.hasOwnProperty("getSavedBitrateSettings"))throw new Error(Y.default.MISSING_CONFIG_ERROR);if(e===Y.default.TEXT)return NaN;var r=T.getSavedBitrateSettings(e),n=_.getAbrBitrateParameter("initialBitrate",e),i=D.get().streaming.abr.initialRepresentationRatio[e];return n=-1===n?-1<i?(t=g[t][e].getStreamInfo(),t=y.getAdaptationForType(t.index,e,t).Representation_asArray,Array.isArray(t)?t[Math.max(Math.round(t.length*i)-1,0)].bandwidth/1e3:0):isNaN(r)?e===Y.default.VIDEO?1e3:100:r:n},getQualityFor:F,getAbandonmentStateFor:function(e,t){return m[e]&&m[e][t]?m[e][t].state:null},setPlaybackQuality:B,checkPlaybackQuality:function(e,t){try{if(!(e&&g&&g[t]&&g[t][e]))return!1;var r;if(!A||(r=E.getPlaybackQuality())&&A.push(t,b,r),!D.get().streaming.abr.autoSwitchBitrate[e])return!1;var n=F(e,t),i=(0,Q.default)(M).create({abrController:l,switchHistory:S[t][e],droppedFramesHistory:A,streamProcessor:g[t][e],currentValue:n,useBufferOccupancyABR:I[e],useL2AABR:w[e],useLoLPABR:C[e],videoModel:E}),a=L(e,t),o=P(e,t),s=f.getMaxQuality(i),u=s.quality;return o<(u=void 0!==a&&(u>J.default.NO_CHANGE?u:n)<a?a:u)&&(u=o),S[t][e].push({oldValue:n,newValue:u}),u>J.default.NO_CHANGE&&u!==n&&(m[t][e].state===V.default.ALLOW_LOAD||u<n)?(G(e,n,u,o,s.reason,t),!0):!1}catch(e){return!1}},setElementSize:k,setWindowResizeEventCalled:function(e){u=e},registerStreamType:function(e,t){var r=t.getStreamInfo().id;g[r]||(g[r]={}),S[r]||(S[r]={}),m[r]||(m[r]={}),S[r][e]=(0,Z.default)(M).create(),g[r][e]=t,m[r][e]={},m[r][e].state=V.default.ALLOW_LOAD,t=e,(r=D.get().streaming.abr.ABRStrategy)===Y.default.ABR_STRATEGY_L2A?(I[t]=!1,C[t]=!1,w[t]=!0):r===Y.default.ABR_STRATEGY_LoLP?(I[t]=!1,C[t]=!0,w[t]=!1):r===Y.default.ABR_STRATEGY_BOLA?(I[t]=!0,C[t]=!1,w[t]=!1):r===Y.default.ABR_STRATEGY_THROUGHPUT?(I[t]=!1,C[t]=!1,w[t]=!1):r===Y.default.ABR_STRATEGY_DYNAMIC&&(I[t]=!(!I||!I[t])&&I[t],C[t]=!1,w[t]=!1),e===Y.default.VIDEO&&k()},unRegisterStreamType:function(e,t){try{g[e]&&g[e][t]&&delete g[e][t],S[e]&&S[e][t]&&delete S[e][t],m[e]&&m[e][t]&&delete m[e][t]}catch(e){}},setConfig:function(e){e&&(e.streamController&&(a=e.streamController),e.domStorage&&(T=e.domStorage),e.mediaPlayerModel&&(_=e.mediaPlayerModel),e.customParametersModel&&(t=e.customParametersModel),e.cmsdModel&&(v=e.cmsdModel),e.dashMetrics&&(N=e.dashMetrics),e.adapter&&(y=e.adapter),e.videoModel&&(E=e.videoModel),e.settings&&(D=e.settings))},reset:function(){e(),O.off(X.default.LOADING_PROGRESS,n,l),O.off(ie.default.QUALITY_CHANGE_RENDERED,i,l),O.off(ie.default.METRIC_ADDED,U,l),f&&f.reset()}},c=r.getLogger(l),e(),l}i.__dashjs_factory_name="AbrController";r=n.default.getSingletonFactory(i);r.QUALITY_DEFAULT=0,n.default.updateSingletonFactory(i.__dashjs_factory_name,r),t.default=r},"./src/streaming/controllers/BaseURLController.js":function(e,t,r){"use strict";r.r(t);var f=r("./src/streaming/models/BaseURLTreeModel.js"),d=r("./src/streaming/utils/BaseURLSelector.js"),g=r("./src/streaming/utils/URLUtils.js"),m=r("./src/dash/vo/BaseURL.js"),n=r("./src/core/FactoryMaker.js"),h=r("./src/core/EventBus.js"),p=r("./src/core/events/Events.js"),y=r("./src/streaming/MediaPlayerEvents.js");function i(){var e,t,r,n,i,a=this.context,o=(0,h.default)(a).getInstance(),s=(0,g.default)(a).getInstance();function u(e){r.invalidateSelectedIndexes(e.entry)}function l(e){r.update(e),n.chooseSelector(t.getIsDVB(e)),o.trigger(y.default.BASE_URLS_UPDATED,{baseUrls:c(e)})}function c(e){return r.getBaseUrls(e)}return e={reset:function(){r.reset(),n.reset()},initialize:function(e){r.setConfig({adapter:t,contentSteeringController:i}),l(e)},resolve:function(e){if(e=r.getForPath(e).reduce(function(e,t){t=n.select(t);return t?(s.isRelative(t.url)?e.url=s.resolve(t.url,e.url):(e.url=t.url,e.serviceLocation=t.serviceLocation),e.availabilityTimeOffset=t.availabilityTimeOffset,e.availabilityTimeComplete=t.availabilityTimeComplete,e.queryParams=t.queryParams,e):new m.default},new m.default),!s.isRelative(e.url))return e},setConfig:function(e){e.baseURLTreeModel&&(r=e.baseURLTreeModel),e.baseURLSelector&&(n=e.baseURLSelector),e.adapter&&(t=e.adapter),e.contentSteeringController&&(i=e.contentSteeringController)},getBaseUrls:c,update:l},r=(0,f.default)(a).create(),n=(0,d.default)(a).create(),o.on(p.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,u,e),e}i.__dashjs_factory_name="BaseURLController",t.default=n.default.getClassFactory(i)},"./src/streaming/controllers/BlacklistController.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/core/FactoryMaker.js"),s=r("./src/core/EventBus.js");function i(e){e=e||{};var t,r=[],n=(0,s.default)(this.context).getInstance(),i=e.updateEventName,e=e.addBlacklistEventName;function a(e){-1===r.indexOf(e)&&(r.push(e),n.trigger(i,{entry:e}))}function o(e){a(e.entry)}return t={add:a,contains:function(e){return!!(r.length&&e&&e.length)&&-1!==r.indexOf(e)},reset:function(){r=[]}},e&&n.on(e,o,t),t}i.__dashjs_factory_name="BlackListController",t.default=n.default.getClassFactory(i)},"./src/streaming/controllers/BufferController.js":function(e,t,r){"use strict";r.r(t);var ge=r("./src/streaming/constants/Constants.js"),me=r("./src/streaming/constants/MetricsConstants.js"),he=r("./src/streaming/models/FragmentModel.js"),pe=r("./src/streaming/SourceBufferSink.js"),ye=r("./src/streaming/PreBufferSink.js"),Ee=r("./src/core/EventBus.js"),_e=r("./src/core/events/Events.js"),n=r("./src/core/FactoryMaker.js"),ve=r("./src/core/Debug.js"),Te=r("./src/streaming/utils/InitCache.js"),be=r("./src/streaming/vo/DashJSError.js"),Se=r("./src/core/errors/Errors.js"),Ae=r("./src/streaming/vo/metrics/HTTPRequest.js"),Re=r("./src/streaming/MediaPlayerEvents.js"),Ie="BufferController";function i(e){e=e||{};var t,u,n,i,a,o,s,l,f,c,d,g,m,h,x,p,y,E,_,v,T,b=this.context,S=(0,Ee.default)(b).getInstance(),j=e.errHandler,k=e.fragmentModel,U=e.representationController,B=e.adapter,G=e.textController,q=e.abrController,A=e.playbackController,R=e.streamInfo,I=e.type,w=e.settings;function H(r){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return new Promise(function(e,t){o=r,f&&n&&"function"==typeof f.discharge?(c=f,V(n).then(function(){e()}).catch(function(e){t(e)})):e()})}function Y(e){return B.convertRepresentationToRepresentationInfo(U.getRepresentationForQuality(e))}function V(e){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return new Promise(function(t,r){var n,i;E&&e?o?(d=!1,n=e,i=a,new Promise(function(e,t){var r=q.getQualityFor(I,R.id);f=(0,pe.default)(b).create({mediaSource:o,textController:G,eventBus:S}),function(e,t,r){r=Y(r);return t&&t[I]&&(I===ge.default.VIDEO||I===ge.default.AUDIO)?f.initializeForStreamSwitch(e,r,t[I]):f.initializeForFirstUse(R,e,r)}(n,i,r).then(function(){return O(Y(r))}).then(function(){e(f)}).catch(function(e){u.fatal("Caught error on create SourceBuffer: "+e),j.error(new be.default(Se.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,Se.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+I)),t(e)})}).then(function(e){t(e)}).catch(function(e){r(e)})):(d=!0,function(){var n=this;return new Promise(function(e,t){var r=q.getQualityFor(I,R.id);f=(0,ye.default)(b).create(Q.bind(n)),O(Y(r)).then(function(){e(f)}).catch(function(){t()})})}().then(function(e){t(e)}).catch(function(e){r(e)})):t(null)})}function K(e){w.get().streaming.cacheInitSegments&&(u.info("Init fragment finished loading saving to",I+"'s init cache"),E.save(e.chunk)),u.debug("Append Init fragment",I," with representationId:",e.chunk.representationId," and quality:",e.chunk.quality,", data size:",e.chunk.bytes.byteLength),W(e.chunk)}function z(e){W(e.chunk,e.request)}function W(e,t){f&&(f.append(e,1<arguments.length&&void 0!==t?t:null).then(function(e){Q(e)}).catch(function(e){Q(e)}),e.mediaInfo.type===ge.default.VIDEO&&F(_e.default.VIDEO_CHUNK_RECEIVED,{chunk:e}))}function X(e){if(e&&0<e.length)for(var t=0,r=e.length;t<r;t++)u.debug("Buffered range: "+e.start(t)+" - "+e.end(t)+", currentTime = ",A.getTime())}function Q(e){var t,r,n;if(e.error)return 22===e.error.code&&(y=!0,a=.8*le(),u.warn("Quota exceeded, Critical Buffer: "+a),0<a&&(n=Math.max(.2*a,1),r=a-n,t=Math.min(w.get().streaming.buffer.bufferTimeAtTopQuality,.9*r),r=Math.min(w.get().streaming.buffer.bufferTimeAtTopQualityLongForm,.9*r),n={streaming:{buffer:{bufferToKeep:parseFloat(n.toFixed(5)),bufferTimeAtTopQuality:parseFloat(t.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(r.toFixed(5))}}},w.update(n))),void(22!==e.error.code&&fe()||(u.warn("Clearing playback buffer to overcome quota exceed situation"),F(_e.default.QUOTA_EXCEEDED,{criticalBufferLevel:a,quotaExceededTime:e.chunk.start}),M(ie())));f&&(D(),y=!1,(h=e.chunk)&&h.endFragment&&(h&&!isNaN(h.index)&&(s=Math.max(h.index,s),te()),t=f.getAllBufferRanges(),h.segmentType===Ae.HTTPRequest.MEDIA_SEGMENT_TYPE&&(X(t),C(),isNaN(T)||d||(I!==ge.default.AUDIO&&I!==ge.default.VIDEO?T=NaN:(r=A.getTime(),n=N(r,0),e=N(T,0),n&&e&&n.start===e.start?T=NaN:(n=U.getCurrentRepresentation().segmentDuration,(e=N(T,n))&&(w.get().streaming.buffer.enableSeekDecorrelationFix&&Math.abs(r-T)>n?T<=e.end&&A.seek(Math.max(T,e.start),!1,!0):r<e.start&&A.seek(e.start,!1,!0)))))),e=!1,g&&(0<g.indexOf(h)&&(e=!0),g=null),h&&!e&&F(_e.default.BYTES_APPENDED_END_FRAGMENT,{quality:h.quality,startTime:h.start,index:h.index,bufferedRanges:t,segmentType:h.segmentType,mediaType:I})))}function J(){return new Promise(function(e,t){var r=Z();if(!r||0===r.length)return C(),void e();M(r).then(function(){e()}).catch(function(e){t(e)})})}function Z(e){var t,r=[],n=f.getAllBufferRanges();return n&&0!==n.length&&(!e&&0!==e||isNaN(e)?r.push({start:n.start(0),end:n.end(n.length-1)+.5}):(t=function(e,t){var r=w.get().streaming.buffer.bufferToKeep,t=t.start(0);if(r<e-t){r=Math.max(0,e-r),e=k.getRequests({state:he.default.FRAGMENT_MODEL_EXECUTED,time:e,threshold:.01})[0];if(0<(r=e?Math.min(e.startTime,r):r))return{start:t,end:r}}return null}(e,n),e=function(e,t){var r=t.end(t.length-1)+.5,n=ce(e),i=R.manifestInfo.duration>=w.get().streaming.buffer.longFormContentDurationThreshold?w.get().streaming.buffer.bufferTimeAtTopQualityLongForm:w.get().streaming.buffer.bufferTimeAtTopQuality,a=isNaN(n)?e:Math.min(n,e+i);if(a>=t.end(t.length-1))return null;n=k.getRequests({state:he.default.FRAGMENT_MODEL_EXECUTED,time:e,threshold:.01})[0];n&&(a=Math.max(n.startTime+n.duration,a));if(w.get().streaming.buffer.avoidCurrentTimeRangePruning)for(var o=0;o<t.length;o++)if(t.start(o)<=e&&e<=t.end(o)&&t.start(o)<=a&&a<=t.end(o)){var s=a;a=o+1<t.length?t.start(o+1):t.end(o)+1,u.debug("Buffered range ["+t.start(o)+", "+t.end(o)+"] overlaps with targetTime "+e+" and range to be pruned ["+s+", "+r+"], using ["+a+", "+r+"] instead"+(a<r?"":" (no actual pruning)"));break}if(a<t.end(t.length-1))return{start:a,end:r};return null}(e,n),t&&r.push(t),e&&r.push(e))),r}function C(){(!v||I===ge.default.TEXT&&G.isTextEnabled())&&D()}function $(){r()}function ee(){r(),T=NaN}function N(e,t){if(!f)return null;var r,n,i,a,o=f.getAllBufferRanges(),s=null,u=null,l=0,c=isNaN(t)?.15:t;if(null!=o){for(a=0,i=o.length;a<i;a++)if(r=o.start(a),n=o.end(a),null===s)l=Math.abs(r-e),(r<=e&&e<n||l<=c)&&(s=r,u=n);else{if(!((l=r-u)<=c))break;u=n}if(null!==s)return{start:s,end:u}}return null}function D(){var e,t;A&&(e=A.getTime()||0,d&&(e=isNaN(T)?0:T),t=w.get().streaming.gaps.jumpGaps&&!isNaN(w.get().streaming.gaps.smallGapLimit)?w.get().streaming.gaps.smallGapLimit:NaN,i=Math.max((t=t,null===(t=N(e=e,t=w.get().streaming.gaps.jumpGaps?w.get().streaming.gaps.smallGapLimit:t))?0:t.end-e),0),F(_e.default.BUFFER_LEVEL_UPDATED,{mediaType:I,bufferLevel:i}),r())}function te(){var e=l-1<=s,t=A.getTimeToStreamEnd(R)-i<1e-5;!e&&!t||n||(L(!0),u.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED for stream id ".concat(R.id," and type ").concat(I)))}function r(){I!==ge.default.AUDIO&&I!==ge.default.VIDEO||((!A.getLowLatencyModeEnabled()&&i<w.get().streaming.buffer.stallThreshold||0===i)&&!n?re(me.default.BUFFER_EMPTY):(n||i>=w.get().streaming.buffer.stallThreshold||A.getLowLatencyModeEnabled()&&0<i)&&re(me.default.BUFFER_LOADED))}function re(e){m===e||e===me.default.BUFFER_EMPTY&&0===A.getTime()||I===ge.default.TEXT&&!G.isTextEnabled()||(m=e,F(_e.default.BUFFER_LEVEL_STATE_CHANGED,{state:e}),F(e===me.default.BUFFER_LOADED?_e.default.BUFFER_LOADED:_e.default.BUFFER_EMPTY),u.debug(e===me.default.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function ne(){!f||I===ge.default.TEXT||n||M(ie())}function ie(){var e=[],t=f.getAllBufferRanges();if(!t||0===t.length)return e;var r=A.getTime(),n=Math.max(0,r-w.get().streaming.buffer.bufferToKeep),i=k.getRequests({state:he.default.FRAGMENT_MODEL_EXECUTED,time:r,threshold:.01})[0];if(i)n=Math.min(i.startTime,n);else if(0===r&&A.getIsDynamic())return[];if(t.start(0)<=n){for(var a={start:0,end:n},o=0;o<t.length&&t.end(o)<=n;o++)a.end=t.end(o);a.start<a.end&&e.push(a)}return e}function M(r){return new Promise(function(e,t){var n;r&&f&&0!==r.length?(n=[],r.forEach(function(e){var r;n.push((r=e,new Promise(function(e,t){r.resolve=e,r.reject=t,_.push(r)})))}),p||ae(),Promise.all(n).then(function(){e()}).catch(function(e){t(e)})):e()})}function ae(){try{if(0===_.length||!f)return u.debug("Nothing to prune, halt pruning"),void(p=!(_=[]));var e=f.getBuffer();if(!e||!e.buffered||0===e.buffered.length)return u.debug("SourceBuffer is empty (or does not exist), halt pruning"),void(p=!(_=[]));var t=_.shift();u.debug("".concat(I,": Removing buffer from: ").concat(t.start," to ").concat(t.end)),p=!0,A.getTime()<t.end&&L(!1),f.remove(t).then(function(e){oe(e)}).catch(function(e){oe(e)})}catch(e){p=!1}}function oe(e){u.debug("onRemoved buffer from:",e.from,"to",e.to),f&&(X(f.getAllBufferRanges()),0===_.length&&(p=!1,D()),e.unintended&&(u.warn("Detected unintended removal from:",e.from,"to",e.to,"setting streamprocessor time to",e.from),F(_e.default.SEEK_TARGET,{time:e.from})),p?ae():(v?v=!1:D(),F(_e.default.BUFFER_CLEARED,{from:e.from,to:e.to,unintended:e.unintended,hasEnoughSpaceToAppend:fe(),quotaExceeded:y})))}function O(t){return new Promise(function(e){t&&void 0!==t.MSETimeOffset&&f&&f.updateTimestampOffset?f.updateTimestampOffset(t.MSETimeOffset).then(function(){e()}).catch(function(){e()}):e()})}function P(){return f&&!n?f.updateAppendWindow(R):Promise.resolve()}function se(){++x*(w.get().streaming.wallclockTimeUpdateInterval/1e3)>=w.get().streaming.buffer.bufferPruningInterval&&(x=0,ne())}function ue(){r()}function L(e){(n=e)?F(_e.default.BUFFERING_COMPLETED):l=Number.POSITIVE_INFINITY}function le(){try{var e,t,r=f.getAllBufferRanges(),n=0;if(!r)return n;for(t=0,e=r.length;t<e;t++)n+=r.end(t)-r.start(t);return n}catch(e){return 0}}function ce(e){try{var t=e,r=f.getAllBufferRanges();if(!r||0===r.length)return NaN;for(var n=0;t===e&&n<r.length;){var i=r.start(n),a=r.end(n);i<=t&&t<=a&&(t=a),n+=1}return t===e?NaN:t}catch(e){}}function fe(){var e=le();return isNaN(e)||e<a}function F(e,t){S.trigger(e,t||{},{streamId:R.id,mediaType:I})}function de(e,t){var r;a=Number.POSITIVE_INFINITY,m=void 0,l=Number.POSITIVE_INFINITY,h=null,y=p=n=!1,x=i=s=0,T=NaN,d=!(_=[]),f&&(r=f,f=null,e||t||r.abort().then(function(){r.reset(t),r=null})),v=!1}return t={initialize:function(e){H(e),S.on(_e.default.INIT_FRAGMENT_LOADED,K,t),S.on(_e.default.MEDIA_FRAGMENT_LOADED,z,t),S.on(_e.default.WALLCLOCK_TIME_UPDATED,se,t),S.on(Re.default.PLAYBACK_PLAYING,ee,t),S.on(Re.default.PLAYBACK_PROGRESS,C,t),S.on(Re.default.PLAYBACK_TIME_UPDATED,C,t),S.on(Re.default.PLAYBACK_RATE_CHANGED,ue,t),S.on(Re.default.PLAYBACK_STALLED,$,t)},getStreamId:function(){return R.id},getType:function(){return I},getBufferControllerType:function(){return Ie},createBufferSink:V,dischargePreBuffer:function(){if(f&&c&&"function"==typeof c.discharge){var e=c.getAllBufferRanges();if(0<e.length){for(var t="Beginning "+I+"PreBuffer discharge, adding buffer for:",r=0;r<e.length;r++)t+=" start: "+e.start(r)+", end: "+e.end(r)+";";u.debug(t)}else u.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");g=[];for(var n=c.discharge(),i=null,a=0;a<n.length;a++){var o,s=n[a];s.segmentType===Ae.HTTPRequest.INIT_SEGMENT_TYPE||(o=E.extract(s.streamId,s.representationId))&&i!==o&&(g.push(o),f.append(o),i=o),g.push(s),f.append(s)}c.reset(),c=null}},getBuffer:function(){return f},getBufferLevel:function(){return i},getRangeAt:N,hasBufferAtTime:function(e){try{var t=f.getAllBufferRanges();if(!t||0===t.length)return!1;for(var r=0;r<t.length;){var n=t.start(r),i=t.end(r);if(n<=e&&e<=i)return!0;r+=1}return!1}catch(e){return u.error(e),!1}},pruneBuffer:ne,setMediaSource:H,getMediaSource:function(){return o},appendInitSegmentFromCache:function(e){return!!(e=E.extract(R.id,e))&&(u.info("Append Init fragment",I," with representationId:",e.representationId," and quality:",e.quality,", data size:",e.bytes.byteLength),W(e),!0)},getIsBufferingCompleted:function(){return n},setIsBufferingCompleted:L,getIsPruningInProgress:function(){return p},reset:function(e,t){S.off(_e.default.INIT_FRAGMENT_LOADED,K,this),S.off(_e.default.MEDIA_FRAGMENT_LOADED,z,this),S.off(_e.default.WALLCLOCK_TIME_UPDATED,se,this),S.off(Re.default.PLAYBACK_PLAYING,ee,this),S.off(Re.default.PLAYBACK_PROGRESS,C,this),S.off(Re.default.PLAYBACK_TIME_UPDATED,C,this),S.off(Re.default.PLAYBACK_RATE_CHANGED,ue,this),S.off(Re.default.PLAYBACK_STALLED,$,this),de(e,t)},prepareForPlaybackSeek:function(){return n&&L(!1),f.abort()},prepareForReplacementTrackSwitch:function(r){return new Promise(function(e,t){f.abort().then(P).then(function(){return w.get().streaming.buffer.useChangeTypeForTrackSwitch?f.changeType(r):Promise.resolve()}).then(J).then(function(){L(!1),e()}).catch(function(e){t(e)})})},prepareForNonReplacementTrackSwitch:function(r){return new Promise(function(e,t){P().then(function(){return w.get().streaming.buffer.useChangeTypeForTrackSwitch?f.changeType(r):Promise.resolve()}).then(function(){e()}).catch(function(e){t(e)})})},prepareForForceReplacementQualitySwitch:function(r){return new Promise(function(e,t){f.abort().then(P).then(J).then(function(){return O(r)}).then(function(){L(!1),e()}).catch(function(e){t(e)})})},updateAppendWindow:P,getAllRangesWithSafetyFactor:Z,getContinuousBufferTimeForTargetTime:ce,clearBuffers:M,pruneAllSafely:J,updateBufferTimestampOffset:O,setSeekTarget:function(e){T=e},segmentRequestingCompleted:function(e){isNaN(e)||(l=e,te())}},u=(0,ve.default)(b).getInstance().getLogger(t),E=(0,Te.default)(b).getInstance(),de(),t}i.__dashjs_factory_name=Ie,t.default=n.default.getClassFactory(i)},"./src/streaming/controllers/CatchupController.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/core/FactoryMaker.js"),T=r("./src/core/Debug.js"),b=r("./src/core/EventBus.js"),S=r("./src/streaming/constants/Constants.js"),A=r("./src/streaming/MediaPlayerEvents.js"),R=r("./src/core/events/Events.js"),I=r("./src/streaming/constants/MetricsConstants.js"),w=r("./src/core/Utils.js");function i(){var e,o,s,u,l,t,c,f,d,g,r=this.context,n=(0,b.default)(r).getInstance();function i(){o=!1;var e=w.default.parseUserAgent();s=e&&e.browser&&e.browser.name&&"safari"===e.browser.name.toLowerCase()}function a(){o=!1}function m(e){e.streamId===t.getActiveStreamInfo().id&&d&&c.getLiveDelay()/2<c.getBufferLevel()&&(d=!1)}function h(e){e.streamId===t.getActiveStreamInfo().id&&(d=e.state===I.default.BUFFER_EMPTY)}function p(){f.getCatchupModeEnabled()||u.setPlaybackRate(1)}function y(){var e,t,r,n,i,a;c.getIsDynamic()&&f.getCatchupModeEnabled()&&(0<f.getCatchupPlaybackRates().max||f.getCatchupPlaybackRates().min<0)&&!c.isPaused()&&!c.isSeeking()&&function(){try{return 0<!c.getTime()||o?void 0:_()===S.default.LIVE_CATCHUP_MODE_LOLP?(e=c.getBufferLevel(),t=l.get().streaming.liveCatchup.playbackBufferMin,function(e,t){try{return 0<Math.abs(E())||e<t}catch(e){return}}(e,t)):function(){try{return 0<Math.abs(E())}catch(e){return}}();var e,t}catch(e){return}}()&&(o||u&&(e=u.getPlaybackRate(),t=f.getCatchupPlaybackRates(),r=c.getBufferLevel(),n=E(),a=f.getCatchupMaxDrift(),!isNaN(a)&&0<a&&a<n?(g.info("[CatchupController]: Low Latency catchup mechanism. Latency too high, doing a seek to live point"),o=!0,c.seekToCurrentLive(!0,!1)):(a=c.getCurrentLiveLatency(),n=c.getLiveDelay(),i=_()===S.default.LIVE_CATCHUP_MODE_LOLP?(i=l.get().streaming.liveCatchup.playbackBufferMin,function(e,t,r,n,i){{var a;i<n?(a=Math.abs(e.min),n=5*(i-n),n=2*a/(1+Math.pow(Math.E,-n)),a=1-a+n,g.debug("[LoL+ playback control_buffer-based] bufferLevel: "+i+", newRate: "+a)):(n=e.max,a=Math.abs(t-r)<=.02*r?1:(i=5*(t-r),e=2*n/(1+Math.pow(Math.E,-i)),1-n+e),g.debug("[LoL+ playback control_latency-based] latency: "+t+", newRate: "+a))}return a}(t,a,n,i,r)):function(e,t,r,n){if(d)return 1;var t=t-r,e=t<0?Math.abs(e.min):e.max,i=5*t,i=2*e/(1+Math.pow(Math.E,-i)),e=1-e+i;c.getPlaybackStalled()&&n<=r/2&&0<t&&(e=1);return e}(t,a,n,r),a=s?.25:.02/(.5/t.max),i&&Math.abs(e-i)>=a&&(g.debug("[CatchupController]: Setting playback rate to ".concat(i)),u.setPlaybackRate(i)))))}function E(){return c.getCurrentLiveLatency()-c.getLiveDelay()}function _(){var e=l.get().streaming.liveCatchup.playbackBufferMin;return l.get().streaming.liveCatchup.mode!==S.default.LIVE_CATCHUP_MODE_LOLP||null===e||isNaN(e)?S.default.LIVE_CATCHUP_MODE_DEFAULT:S.default.LIVE_CATCHUP_MODE_LOLP}function v(){f.getCatchupPlaybackRates(!0)}return e={reset:function(){n.off(A.default.BUFFER_LEVEL_UPDATED,m,e),n.off(A.default.BUFFER_LEVEL_STATE_CHANGED,h,e),n.off(A.default.PLAYBACK_PROGRESS,y,e),n.off(A.default.PLAYBACK_TIME_UPDATED,y,e),n.off(A.default.PLAYBACK_SEEKED,a,e),n.off(R.default.SETTING_UPDATED_CATCHUP_ENABLED,p,e),n.off(R.default.SETTING_UPDATED_PLAYBACK_RATE_MIN,v,e),n.off(R.default.SETTING_UPDATED_PLAYBACK_RATE_MAX,v,e),n.off(A.default.STREAM_INITIALIZED,v,e),i(),u.setPlaybackRate(1,!0)},setConfig:function(e){e&&(e.settings&&(l=e.settings),e.videoModel&&(u=e.videoModel),e.streamController&&(t=e.streamController),e.playbackController&&(c=e.playbackController),e.mediaPlayerModel&&(f=e.mediaPlayerModel))},initialize:function(){n.on(A.default.BUFFER_LEVEL_UPDATED,m,e),n.on(A.default.BUFFER_LEVEL_STATE_CHANGED,h,e),n.on(A.default.PLAYBACK_PROGRESS,y,e),n.on(A.default.PLAYBACK_TIME_UPDATED,y,e),n.on(A.default.PLAYBACK_SEEKED,a,e),n.on(R.default.SETTING_UPDATED_CATCHUP_ENABLED,p,e),n.on(R.default.SETTING_UPDATED_PLAYBACK_RATE_MIN,v,e),n.on(R.default.SETTING_UPDATED_PLAYBACK_RATE_MAX,v,e),n.on(A.default.STREAM_INITIALIZED,v,e),v()}},g=(0,T.default)(r).getInstance().getLogger(e),i(),e}i.__dashjs_factory_name="CatchupController",t.default=n.default.getSingletonFactory(i)},"./src/streaming/controllers/EventController.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/core/FactoryMaker.js"),D=r("./src/core/Debug.js"),M=r("./src/core/EventBus.js"),O=r("./src/streaming/MediaPlayerEvents.js"),P=r("./src/streaming/net/XHRLoader.js");function i(){var e,l,a,c,t,r,o,f,n,i,s,d="urn:mpeg:dash:event:2012",g=1,u="urn:mpeg:dash:event:callback:2015",m=1,h=300,p={DISCARDED:"discarded",UPDATED:"updated",ADDED:"added"},y=this.context,E=(0,M.default)(y).getInstance();function _(){if(!o||!f)throw new Error("setConfig function has to be called previously")}function v(){s=!1,a={},t=null,i=!(c={}),r=Date.now()/1e3}function T(){try{if(null!==t&&s){clearInterval(t),t=null,s=!1;try{I(c),I(a)}catch(e){l.error(e)}}}catch(e){throw e}}function b(){try{var e,t;i||(i=!0,t=(e=f.getTime())-r,t=0<r?Math.max(0,t):0,S(c,t,e),S(a,t,e),A(c),A(a),r=e,i=!1)}catch(e){i=!1,l.error(e)}}function S(o,s,u){try{w(o,function(e){if(void 0!==e){var t=isNaN(e.duration)?0:e.duration;if(e.calculatedPresentationTime<=u&&e.calculatedPresentationTime+s+t>=u)N(e,O.default.EVENT_MODE_ON_START);else if(C(u,t+s,e.calculatedPresentationTime)||function(e){try{var t=e.eventStream.period.start+e.eventStream.period.duration;return e.calculatedPresentationTime>t}catch(e){return void l.error(e)}}(e)){l.debug("Removing event ".concat(e.id," from period ").concat(e.eventStream.period.id," as it is expired or invalid"));t=o;try{var r=e.eventStream.schemeIdUri,n=e.eventStream.period.id,i=e.eventStream.value,a=e.id;t[n][r]=t[n][r].filter(function(e){return i&&e.eventStream.value&&e.eventStream.value!==i||e.id!==a}),0===t[n][r].length&&delete t[n][r]}catch(e){l.error(e)}}}})}catch(e){l.error(e)}}function A(e){try{for(var t in e)e.hasOwnProperty(t)&&0===Object.keys(e[t]).length&&delete e[t]}catch(e){l.error(e)}}function R(e,t,r){var r=2<arguments.length&&void 0!==r&&r,n=e.eventStream.schemeIdUri,i=e.eventStream.value,a=e.id,o=p.DISCARDED,s=(t[n]||(t[n]=[]),t[n].findIndex(function(e){return(!i||e.eventStream.value&&e.eventStream.value===i)&&e.id===a}));return-1===s?(t[n].push(e),e.triggeredReceivedEvent=!1,e.triggeredStartEvent=!1,o=p.ADDED):r&&(r=t[n][s],e.triggeredReceivedEvent=r.triggeredReceivedEvent,e.triggeredStartEvent=r.triggeredStartEvent,t[n][s]=e,o=p.UPDATED),o}function I(e){try{var n=f.getTime();w(e,function(e){var t=e.eventStream&&e.eventStream.period&&!isNaN(e.eventStream.period.duration)?e.eventStream.period.duration:NaN,r=e.eventStream&&e.eventStream.period&&!isNaN(e.eventStream.period.start)?e.eventStream.period.start:NaN;isNaN(t)||isNaN(r)||(t=e.calculatedPresentationTime,Math.abs(t-n)<h&&N(e,O.default.EVENT_MODE_ON_START))})}catch(e){l.error(e)}}function w(e,t){try{if(e)for(var r=Object.keys(e),n=0;n<r.length;n++)for(var i=e[r[n]],a=Object.keys(i),o=0;o<a.length;o++)i[a[o]].forEach(function(e){void 0!==e&&t(e)})}catch(e){l.error(e)}}function C(e,t,r){try{return r<e-t}catch(e){return void l.error(e)}}function N(e,t){try{var r=f.getTime(),n=e.id;if(t===O.default.EVENT_MODE_ON_RECEIVE&&!e.triggeredReceivedEvent)return l.debug("Received event ".concat(n)),e.triggeredReceivedEvent=!0,void E.trigger(e.eventStream.schemeIdUri,{event:e},{mode:t});if(!e.triggeredStartEvent){if(e.eventStream.schemeIdUri===d&&e.eventStream.value==g){if(0!==e.duration||0!==e.presentationTimeDelta){l.debug("Starting manifest refresh event ".concat(n," at ").concat(r));try{_(),o.refreshManifest()}catch(e){l.error(e)}}}else if(e.eventStream.schemeIdUri===u&&e.eventStream.value==m){l.debug("Starting callback event ".concat(n," at ").concat(r));var i=e.messageData;try{(0,P.default)(y).create({}).load({method:"get",url:i,request:{responseType:"arraybuffer"}})}catch(e){l.error(e)}}else l.debug("Starting event ".concat(n," from period ").concat(e.eventStream.period.id," at ").concat(r)),E.trigger(e.eventStream.schemeIdUri,{event:e},{mode:t});e.triggeredStartEvent=!0}}catch(e){l.error(e)}}return e={addInlineEvents:function(e,t){try{if(_(),a[t]||(a[t]={}),e)for(var r=0;r<e.length;r++){var n,i=e[r];C(f.getTime(),isNaN(i.duration)?0:i.duration,i.calculatedPresentationTime)||((n=R(i,a[t],!0))===p.ADDED?(l.debug("Added inline event with id ".concat(i.id," from period ").concat(t)),N(i,O.default.EVENT_MODE_ON_RECEIVE)):n===p.UPDATED&&l.debug("Updated inline event with id ".concat(i.id," from period ").concat(t)))}}catch(e){throw e}},addInbandEvents:function(e,t){try{_(),c[t]||(c[t]={});for(var r=0;r<e.length;r++){var n=e[r],i=f.getTime(),a=isNaN(n.duration)?0:n.duration;if(!C(i,a,n.calculatedPresentationTime))if(R(n,c[t],!1)===p.ADDED){if(n.eventStream.schemeIdUri===d){s=o=u=void 0;var o,s,u=n;try{u.eventStream.value==g&&(o=u.calculatedPresentationTime,s=4294967295==u.calculatedPresentationTime?NaN:u.calculatedPresentationTime+u.duration,E.trigger(O.default.MANIFEST_VALIDITY_CHANGED,{id:u.id,validUntil:o,newDuration:s,newManifestValidAfter:NaN},{mode:O.default.EVENT_MODE_ON_START}))}catch(e){l.error(e)}}l.debug("Added inband event with id ".concat(n.id," from period ").concat(t)),N(n,O.default.EVENT_MODE_ON_RECEIVE)}else l.debug("Inband event with scheme_id_uri ".concat(n.eventStream.schemeIdUri,", value ").concat(n.eventStream.value,", period id ").concat(t," and event id ").concat(n.id," was ignored because it has been added before."))}b()}catch(e){throw e}},getInbandEvents:function(){return c},getInlineEvents:function(){return a},start:function(){try{_(),l.debug("Start Event Controller");var e=n.get().streaming.eventControllerRefreshDelay;s||isNaN(e)||(s=!0,t=setInterval(b,e))}catch(e){throw e}},setConfig:function(e){try{if(!e)return;e.manifestUpdater&&(o=e.manifestUpdater),e.playbackController&&(f=e.playbackController),e.settings&&(n=e.settings)}catch(e){throw e}},reset:function(){T(),v()}},l=(0,D.default)(y).getInstance().getLogger(e),v(),e}i.__dashjs_factory_name="EventController",t.default=n.default.getSingletonFactory(i)},"./src/streaming/controllers/FragmentController.js":function(e,t,r){"use strict";r.r(t);var h=r("./src/streaming/constants/Constants.js"),p=r("./src/streaming/vo/DataChunk.js"),y=r("./src/streaming/models/FragmentModel.js"),E=r("./src/streaming/FragmentLoader.js"),_=r("./src/streaming/utils/RequestModifier.js"),v=r("./src/core/EventBus.js"),T=r("./src/core/events/Events.js"),b=r("./src/streaming/MediaPlayerEvents.js"),S=r("./src/core/errors/Errors.js"),n=r("./src/core/FactoryMaker.js"),A=r("./src/core/Debug.js"),R=r("./src/streaming/utils/SegmentResponseModifier.js");function i(r){r=r||{};var e,l,n,i=this.context,c=(0,v.default)(i).getInstance(),a=r.errHandler,o=r.mediaPlayerModel,s=r.dashMetrics,u=(0,A.default)(i).getInstance(),f=(0,R.default)(i).getInstance(),d=r.streamInfo;function g(){return d.id}function t(){for(var e in n)n[e].reset();n={}}function m(e){var t,r,n,i,a,o,s,u;e.sender&&(t=e.request,a=e.response,r=t.isInitializationRequest(),n=t.mediaInfo.streamInfo,e.error&&(t.mediaType===h.default.AUDIO||t.mediaType===h.default.VIDEO||t.mediaType===h.default.TEXT&&t.mediaInfo.isFragmented)&&c.trigger(T.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD,{entry:e.request.serviceLocation}),a&&n?(a=a,o=t,s=d.id,e=e.type!==T.default.FRAGMENT_LOADING_PROGRESS,(u=new p.default).streamId=s,u.mediaInfo=o.mediaInfo,u.segmentType=o.type,u.start=o.startTime,u.duration=o.duration,u.end=u.start+u.duration,u.bytes=a,u.index=o.index,u.quality=o.quality,u.representationId=o.representationId,u.endFragment=e,i=u,f.modifyResponseAsync(i).then(function(e){c.trigger(r?T.default.INIT_FRAGMENT_LOADED:T.default.MEDIA_FRAGMENT_LOADED,{chunk:e,request:t},{streamId:n.id,mediaType:t.mediaType})}).catch(function(e){l.error(e),c.trigger(r?T.default.INIT_FRAGMENT_LOADED:T.default.MEDIA_FRAGMENT_LOADED,{chunk:i,request:t},{streamId:n.id,mediaType:t.mediaType})})):l.warn("No "+t.mediaType+" bytes to push or stream is inactive."))}return e={getStreamId:g,getModel:function(e){var t=n[e];return t||(t=(0,y.default)(i).create({streamInfo:d,type:e,dashMetrics:s,fragmentLoader:(0,E.default)(i).create({dashMetrics:s,mediaPlayerModel:o,errHandler:a,requestModifier:(0,_.default)(i).getInstance(),settings:r.settings,boxParser:r.boxParser,eventBus:c,events:T.default,errors:S.default,dashConstants:r.dashConstants,urlUtils:r.urlUtils,streamId:g()}),debug:u,eventBus:c,events:T.default}),n[e]=t),t},reset:function(){c.off(b.default.FRAGMENT_LOADING_COMPLETED,m,this),c.off(b.default.FRAGMENT_LOADING_PROGRESS,m,this),t()}},l=u.getLogger(e),t(),c.on(b.default.FRAGMENT_LOADING_COMPLETED,m,e),c.on(b.default.FRAGMENT_LOADING_PROGRESS,m,e),e}i.__dashjs_factory_name="FragmentController",t.default=n.default.getClassFactory(i)},"./src/streaming/controllers/GapController.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/core/FactoryMaker.js"),b=r("./src/core/Debug.js"),S=r("./src/core/events/Events.js"),A=r("./src/core/EventBus.js"),R=r("./src/streaming/constants/Constants.js");function i(){var e,t,g,r,n,m,h,p,y,E,i,_,a=this.context,o=(0,A.default)(a).getInstance();function s(){_.debug("Stopping the gap controller"),n&&(clearInterval(n),n=null),function(){o.off(S.default.WALLCLOCK_TIME_UPDATED,d,this),o.off(S.default.INITIAL_STREAM_SWITCH,f,this),o.off(S.default.PLAYBACK_SEEKING,u,this),o.off(S.default.BUFFER_REPLACEMENT_STARTED,l,e),o.off(S.default.TRACK_CHANGE_RENDERED,c,e)}(),m=NaN,r=0,E=n=null,i={}}function u(){E&&(clearTimeout(E),E=null)}function l(e){try{if(e.streamId!==p.getActiveStreamInfo().id||e.mediaType!==R.default.VIDEO&&e.mediaType!==R.default.AUDIO)return;e.streamId===p.getActiveStreamInfo().id&&(i[e.mediaType]=!0)}catch(e){_.error(e)}}function c(e){e&&e.mediaType&&(i[e.mediaType]=!1)}function f(){if(!n)try{n||(_.debug("Starting the gap controller"),n=setInterval(function(){v()&&T(h.getTime())},100))}catch(e){}}function d(){var e;v(g.get().streaming.gaps.enableSeekFix)&&10<=++r&&(e=h.getTime(),t===e?T(e,!0):(t=e,m=NaN),r=0)}function v(e){var t,e=0<arguments.length&&void 0!==e&&e;if(p.getActiveStream())return t=Object.keys(i).some(function(e){return i[e]}),e=!!e&&(e=p.getActiveStream(),e=parseFloat((e.getStartTime()+e.getDuration()).toFixed(5)),h.getTime()+g.get().streaming.gaps.threshold>=e),!t&&g.get().streaming.gaps.jumpGaps&&0<p.getActiveStreamProcessors().length&&(!h.isSeeking()||e)&&!h.isPaused()&&!p.getIsStreamSwitchInProgress()&&!p.getHasMediaOrInitialisationError()}function T(e,t){var r,n,t=1<arguments.length&&void 0!==t&&t,i=g.get().streaming.gaps.enableStallFix,a=g.get().streaming.gaps.stallSeek,o=g.get().streaming.gaps.smallGapLimit,s=g.get().streaming.gaps.jumpLargeGaps,u=y.getBufferRange(),l=NaN,c=!1,f=function(e,t){try{if(!e||e.length<=1&&0<t)return NaN;for(var r=NaN,n=0;isNaN(r)&&n<e.length;){var i=0<n?e.end(n-1):0;t<e.start(n)&&i-t<g.get().streaming.gaps.threshold&&(r=n),n+=1}return r}catch(e){return null}}(u,e),d=(isNaN(f)||0<(d=(r=u.start(f))-e)&&(d<=o||s)&&(l=r),h.getTimeToStreamEnd());isNaN(l)&&t&&isFinite(d)&&!isNaN(d)&&d<o&&(l=parseFloat(h.getStreamEndTime().toFixed(5)),c=!0),i&&isNaN(l)&&t&&isNaN(f)&&function(e,t){for(var r=0,n=e.length;r<n;r++)if(t>=e.start(r)&&t<=e.end(r))return 1}(u,e)&&(0===a?(_.warn("Toggle play pause to break stall"),y.pause(),y.play()):(_.warn("Jumping ".concat(a,"s to break stall")),l=e+a)),0<l&&m!==l&&e<l&&!E&&(s=l-e,c?(d=(r=p.getStreamForTime(l))&&!!r.getPreloaded(),_.warn("Jumping to end of stream because of gap from ".concat(e," to ").concat(l,". Gap duration: ").concat(s)),h.seek(l,!0,d)):(o=h.getIsDynamic(),n=0<f?u.end(f-1):e,i=o?1e3*Math.max(0,s-.1):0,E=window.setTimeout(function(){h.seek(l,!0,!0),_.warn("Jumping gap occuring in period ".concat(p.getActiveStream().getStreamId()," starting at ").concat(n," and ending at ").concat(l,". Jumping by: ").concat(l-n)),E=null},i)),m=l)}return e={reset:s,setConfig:function(e){e&&(e.settings&&(g=e.settings),e.playbackController&&(h=e.playbackController),e.streamController&&(p=e.streamController),e.videoModel&&(y=e.videoModel))},initialize:function(){!function(){o.on(S.default.WALLCLOCK_TIME_UPDATED,d,this),o.on(S.default.INITIAL_STREAM_SWITCH,f,this),o.on(S.default.PLAYBACK_SEEKING,u,this),o.on(S.default.BUFFER_REPLACEMENT_STARTED,l,e),o.on(S.default.TRACK_CHANGE_RENDERED,c,e)}()}},_=(0,b.default)(a).getInstance().getLogger(e),s(),e}i.__dashjs_factory_name="GapController",t.default=n.default.getSingletonFactory(i)},"./src/streaming/controllers/MediaController.js":function(e,t,r){"use strict";r.r(t);var N=r("./src/streaming/constants/Constants.js"),D=r("./src/core/events/Events.js"),M=r("./src/core/EventBus.js"),n=r("./src/core/FactoryMaker.js"),O=r("./src/core/Debug.js"),i=r("./node_modules/bcp-47-normalize/index.js"),P=r.n(i),L=r("./node_modules/bcp-47-match/index.js");function a(){var e,i,s,u,r,a,o,l,t=this.context,c=(0,M.default)(t).getInstance();function f(e,t){return e&&s[t]&&s[t][e]?s[t][e].list:[]}function d(e,t){return e&&s[t]&&s[t][e]?s[t][e].current:null}function g(e){var t,r,n,i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];e&&e.streamInfo&&(n=d(t=e.type,r=e.streamInfo.id),s[r]&&s[r][t]&&(s[r][t].current=e,s[r][t].current&&(t!==N.default.TEXT&&!p(e,n)||t===N.default.TEXT&&e.isFragmented)&&c.trigger(D.default.CURRENT_TRACK_CHANGED,{oldMediaInfo:n,newMediaInfo:e,switchMode:u.get().streaming.trackSwitchMode[t]},{streamId:r}),i||(n=function(e){e={lang:e.lang,viewpoint:e.viewpoint,roles:e.roles,accessibility:e.accessibility,audioChannelConfiguration:e.audioChannelConfiguration,codec:e.codec};return e.lang||e.viewpoint||e.role&&0<e.role.length||e.accessibility&&0<e.accessibility.length||e.audioChannelConfiguration&&0<e.audioChannelConfiguration.length?e:null}(e))&&s[r][t].storeLastSettings&&(n.roles&&(n.role=n.roles[0],delete n.roles),n.accessibility&&(n.accessibility=n.accessibility[0]),n.audioChannelConfiguration&&(n.audioChannelConfiguration=n.audioChannelConfiguration[0]),a[t]=n,l.setSavedMediaSettings(t,n))))}function m(e,t){e&&t&&(r[e]=t)}function h(e){return e?r[e]:null}function p(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;var r=e.id===t.id,n=e.viewpoint===t.viewpoint,i=JSON.stringify(e.viewpointsWithSchemeIdUri)===JSON.stringify(t.viewpointsWithSchemeIdUri),a=e.lang===t.lang,o=e.codec===t.codec,s=e.roles.toString()===t.roles.toString(),u=JSON.stringify(e.rolesWithSchemeIdUri)===JSON.stringify(t.rolesWithSchemeIdUri),l=e.accessibility.toString()===t.accessibility.toString(),c=JSON.stringify(e.accessibilitiesWithSchemeIdUri)===JSON.stringify(t.accessibilitiesWithSchemeIdUri),f=e.audioChannelConfiguration.toString()===t.audioChannelConfiguration.toString(),e=JSON.stringify(e.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(t.audioChannelConfigurationsWithSchemeIdUri);return r&&o&&n&&i&&a&&s&&u&&l&&c&&f&&e}function n(){s={},a={},r={audio:null,video:null,text:null}}function y(e,t,r){var n=[];return e.forEach(function(e){t(r,e)&&n.push(e)}),0!==n.length?n:e}function E(e,t){return!e.lang||e.lang instanceof RegExp?t.lang.match(e.lang):""!==t.lang&&0<(0,L.extendedFilter)(t.lang,P()(e.lang)).length}function _(e,t){return void 0===e.index||null===e.index||t.index===e.index}function v(e,t){return!e.viewpoint||e.viewpoint===t.viewpoint}function T(t,e){var r=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return!t.role||!!e.roles.filter(function(e){return e===t.role})[0]||e.type===N.default.AUDIO&&r}function b(t,e){e=t.accessibility?!!e.accessibility.filter(function(e){return e===t.accessibility})[0]:!e.accessibility.length;return e}function S(t,e){return!t.audioChannelConfiguration||!!e.audioChannelConfiguration.filter(function(e){return e===t.audioChannelConfiguration})[0]}function A(e,t){return!e.codec||e.codec===t.codec}function R(e){var t,r=0,n=[];return e.forEach(function(e){t=Math.max.apply(Math,e.bitrateList.map(function(e){return e.bandwidth})),r<t?(r=t,n=[e]):t===r&&n.push(e)}),n}function I(e){var r,n=1/0,i=[];return e.forEach(function(e){var t=e.bitrateList.reduce(function(e,t){var r=Math.max(1,t.width*t.height);return e+t.bandwidth/r},0);(r=t/e.bitrateList.length)<n?(n=r,i=[e]):r===n&&i.push(e)}),i}function w(e){var t,r=0,n=[];return e.forEach(function(e){t=e.representationCount,r<t?(r=t,n=[e]):t===r&&n.push(e)}),n}function C(e,t){if(e===N.default.TEXT)return t[0];var r,n=u.get().streaming.selectionModeForInitialTrack,e=o.getCustomInitialTrackSelectionFunction();if(e&&"function"==typeof e)r=e(t);else switch(n){case N.default.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY:r=function(e){e=function(e){var t=0,r=[];return e.forEach(function(e){isNaN(e.selectionPriority)||(e.selectionPriority>t?(t=e.selectionPriority,r=[e]):e.selectionPriority===t&&r.push(e))}),r}(e);1<e.length&&(e=R(e));1<e.length&&(e=w(e));return e}(t);break;case N.default.TRACK_SELECTION_MODE_HIGHEST_BITRATE:r=function(e){e=R(e);1<e.length&&(e=w(e));return e}(t);break;case N.default.TRACK_SELECTION_MODE_FIRST_TRACK:r=t[0];break;case N.default.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:r=function(e){e=I(e);1<e.length&&(e=R(e));return e}(t);break;case N.default.TRACK_SELECTION_MODE_WIDEST_RANGE:r=function(e){var t=w(e);1<t.length&&(t=R(e));return t}(t);break;default:i.warn("Track selection mode ".concat(n," is not supported. Falling back to TRACK_SELECTION_MODE_FIRST_TRACK")),r=t[0]}return(0<r.length?r:t)[0]}return e={setInitialMediaSettingsForType:function(e,t){var r=a[e]||h(e),t=f(e,t.id),n=[];r||((r=l.getSavedMediaSettings(e))&&delete r.codec,m(e,r)),t&&0!==t.length&&(r&&(n=y(n=Array.from(t),E,r),n=y(n,_,r),n=y(n,v,r),e===N.default.AUDIO&&a[e]||(n=y(n,T,r)),n=y(n,b,r),n=y(n,S,r),n=y(n,A,r)),0===n.length?g(C(e,t),!0):1<n.length?g(C(e,n)):g(n[0]))},addTrack:function(e){if(e){var t=e.type;if((n=t)===N.default.AUDIO||n===N.default.VIDEO||n===N.default.TEXT||n===N.default.IMAGE){for(var r,n=e.streamInfo.id,i=(s[n]||(s[n]={audio:{list:[],storeLastSettings:r=u.get().streaming.saveLastMediaSettingsForCurrentStreamingSession,current:null},video:{list:[],storeLastSettings:r,current:null},text:{list:[],storeLastSettings:r,current:null},image:{list:[],storeLastSettings:r,current:null}}),s[n][t].list),a=0,o=i.length;a<o;++a)if(p(i[a],e))return;i.push(e)}}},getTracksFor:f,getCurrentTrackFor:d,isCurrentTrack:function(e){if(!e)return!1;var t=e.type,r=e.streamInfo.id;return s[r]&&s[r][t]&&p(s[r][t].current,e)},setTrack:g,selectInitialTrack:C,setInitialSettings:m,getInitialSettings:h,getTracksWithHighestBitrate:R,getTracksWithHighestEfficiency:I,getTracksWithWidestRange:w,isTracksEqual:p,matchSettings:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]&&arguments[2];try{var n,i=!1,a=(t.lang?t.lang instanceof RegExp?i=e.lang.match(t.lang):""!==e.lang&&(n=P()(t.lang))&&(i=0<(0,L.extendedFilter)(e.lang,n).length):i=!0,void 0===t.index||null===t.index||e.index===t.index),o=!t.viewpoint||t.viewpoint===e.viewpoint,s=!t.role||!!e.roles.filter(function(e){return e===t.role})[0],u=!t.accessibility||!!e.accessibility.filter(function(e){return e===t.accessibility})[0],l=!t.audioChannelConfiguration||!!e.audioChannelConfiguration.filter(function(e){return e===t.audioChannelConfiguration})[0];return i&&a&&o&&(s||e.type===N.default.AUDIO&&r)&&u&&l}catch(e){return!1}},matchSettingsLang:E,matchSettingsIndex:_,matchSettingsViewPoint:v,matchSettingsRole:T,matchSettingsAccessibility:b,matchSettingsAudioChannelConfig:S,saveTextSettingsDisabled:function(){l.setSavedMediaSettings(N.default.TEXT,null)},setConfig:function(e){e&&(e.domStorage&&(l=e.domStorage),e.settings&&(u=e.settings),e.customParametersModel&&(o=e.customParametersModel))},reset:n},i=(0,O.default)(t).getInstance().getLogger(e),n(),e}a.__dashjs_factory_name="MediaController";i=n.default.getSingletonFactory(a);n.default.updateSingletonFactory(a.__dashjs_factory_name,i),t.default=i},"./src/streaming/controllers/MediaSourceController.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/core/FactoryMaker.js"),o=r("./src/core/Debug.js");function i(){var e,r,t,n,i=this.context;function a(e){!r||"open"!==r.readyState||null===e&&isNaN(e)||r.duration!==e&&(e!==1/0||t.get().streaming.buffer.mediaSourceDurationInfinity||(e=Math.pow(2,32)),!function(e){for(var t=e.sourceBuffers,r=0;r<t.length;r++)if(t[r].updating)return 1;return}(r)?(n.info("Set MediaSource duration:"+e),r.duration=e):setTimeout(a.bind(null,e),50))}return e={createMediaSource:function(){var e="WebKitMediaSource"in window;return"MediaSource"in window?r=new MediaSource:e&&(r=new WebKitMediaSource),r},attachMediaSource:function(e){var t=window.URL.createObjectURL(r);return e.setSource(t),t},detachMediaSource:function(e){e.setSource(null)},setDuration:a,setSeekable:function(e,t){r&&"function"==typeof r.setLiveSeekableRange&&"function"==typeof r.clearLiveSeekableRange&&"open"===r.readyState&&0<=e&&e<t&&(r.clearLiveSeekableRange(),r.setLiveSeekableRange(e,t))},signalEndOfStream:function(e){if(e&&"open"===e.readyState){for(var t=e.sourceBuffers,r=0;r<t.length;r++){if(t[r].updating)return;if(0===t[r].buffered.length)return}n.info("call to mediaSource endOfStream"),e.endOfStream()}},setConfig:function(e){e&&e.settings&&(t=e.settings)}},n=(0,o.default)(i).getInstance().getLogger(e),e}i.__dashjs_factory_name="MediaSourceController",t.default=n.default.getSingletonFactory(i)},"./src/streaming/controllers/PlaybackController.js":function(e,t,r){"use strict";r.r(t);var he=r("./src/streaming/constants/Constants.js"),pe=r("./src/core/EventBus.js"),ye=r("./src/core/events/Events.js"),n=r("./src/core/FactoryMaker.js"),Ee=r("./src/core/Debug.js"),_e=r("./src/streaming/MediaPlayerEvents.js"),ve=r("./src/streaming/constants/MetricsConstants.js");function i(){var r,i,n,a,o,s,u,l,t,c,f,d,g,m,h,p,y,E,_,v,T,b,S,A,e=this.context,R=(0,pe.default)(e).getInstance();function x(){w(),p=f=c=0,S=E=!(y=!(b=m=!1)),_=NaN,u&&(R.off(ye.default.DATA_UPDATE_COMPLETED,V,r),R.off(ye.default.LOADING_PROGRESS,le,r),R.off(ye.default.MANIFEST_UPDATED,ge,r),R.off(ye.default.STREAMS_COMPOSED,me,r),R.off(_e.default.PLAYBACK_ENDED,se,r),R.off(_e.default.STREAM_INITIALIZING,fe,r),R.off(_e.default.REPRESENTATION_SWITCH,de,r),R.off(_e.default.BUFFER_LEVEL_STATE_CHANGED,W,r),L(),u.removeEventListener("canplay",K),u.removeEventListener("canplaythrough",z),u.removeEventListener("play",X),u.removeEventListener("waiting",Q),u.removeEventListener("playing",J),u.removeEventListener("pause",Z),u.removeEventListener("error",ue),u.removeEventListener("seeking",$),u.removeEventListener("seeked",ee),u.removeEventListener("timeupdate",F),u.removeEventListener("progress",te),u.removeEventListener("ratechange",re),u.removeEventListener("loadedmetadata",ne),u.removeEventListener("loadeddata",ie),u.removeEventListener("stalled",ce),u.removeEventListener("ended",ae),u.removeEventListener("volumechange",oe)),g=d=u=t=null}function j(){return parseFloat((I(0<arguments.length&&void 0!==arguments[0]?arguments[0]:null)-N()).toFixed(5))}function I(e){e=e||d;return e.start+e.duration}function k(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];d&&u&&u.getElement()?(e&&g&&B(N()),u.play()):m=!0}function w(){d&&u&&u.pause()}function C(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],r=2<arguments.length&&void 0!==arguments[2]&&arguments[2],n=3<arguments.length&&void 0!==arguments[3]&&arguments[3];d&&u&&u.getElement()&&e!==(isNaN(_)?u.getTime():_)&&((v=!0===r)||(_=e),i.info("Requesting seek to time: "+e+(v?" (internal)":"")),g&&n&&B(e),u.setCurrentTime(e,t))}function U(){var e;if(d&&u&&g)return e=n&&n.hasVideoTrack()?he.default.VIDEO:he.default.AUDIO,e=o.getCurrentDVRInfo(e),e&&e.range?e.range.end:0}function B(e){var t=new Date(l.getClientReferenceTime()),r=s.getRegularPeriods()[0],t=l.calcPresentationTimeFromWallTime(t,r);c=t-e}function N(){return d&&u?u.getTime():null}function D(){return d&&u?u.isPaused():null}function M(){return d&&u?u.isSeeking():null}function G(){return d&&u?u.isStalled():null}function q(){return d&&u?u.getPlaybackRate():null}function H(){return d&&u?u.getEnded():null}function Y(){return g}function O(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;D()||!g||0===u.getReadyState()||M()||b||(t=t||(n.hasVideoTrack()?he.default.VIDEO:he.default.AUDIO),t=function(e,t){var t=o.getCurrentDVRInfo(t),t=t?t.range:null;if(!t)return NaN;t=e>t.end?Math.max(t.end-c,t.start):0<e&&e+.25<t.start&&Math.abs(e-t.start)<31536e4?E?Math.max(t.end-c,t.start):t.start:e;return t}(e=N(),t),isNaN(t)||t===e||M()||!G()&&!T&&1!==u.getReadyState()||(i.debug("UpdateCurrentTime: Seek to actual time: ".concat(t," from currentTime: ").concat(e)),C(t,!1,!1)))}function P(){null===t&&(t=setInterval(function(){R.trigger(ye.default.WALLCLOCK_TIME_UPDATED,{isDynamic:g,time:new Date}),g&&(n.addDVRMetric(),(D()?function(){var e=Date.now();(!h||h+500<e)&&(h=e,F())}:O)())},A.get().streaming.wallclockTimeUpdateInterval))}function L(){clearInterval(t),t=null}function V(e){e=s.convertRepresentationToRepresentationInfo(e.currentRepresentation),e=e?e.mediaInfo.streamInfo:null;null!==e&&d.id===e.id&&(d=e)}function K(){R.trigger(ye.default.CAN_PLAY)}function z(){R.trigger(ye.default.CAN_PLAY_THROUGH)}function W(e){e.streamId===n.getActiveStreamInfo().id&&(T=e.state===ve.default.BUFFER_EMPTY,A.get().streaming.buffer.setStallState&&u.setStallState(e.mediaType,e.state===ve.default.BUFFER_EMPTY))}function X(){i.info("Native video element event: play"),O(),P(),R.trigger(ye.default.PLAYBACK_STARTED,{startTime:N()})}function Q(){i.info("Native video element event: waiting"),R.trigger(ye.default.PLAYBACK_WAITING,{playingTime:N()})}function J(){i.info("Native video element event: playing"),v=!1,R.trigger(ye.default.PLAYBACK_PLAYING,{playingTime:N()})}function Z(){i.info("Native video element event: pause"),R.trigger(ye.default.PLAYBACK_PAUSED,{ended:H()})}function $(){var e;v||(e=N(),isNaN(_)||_===e||(e=_),_=NaN,i.info("Seeking to: "+e),P(),R.trigger(ye.default.PLAYBACK_SEEKING,{seekTime:e,streamId:d.id}))}function ee(){i.info("Native video element event: seeked"),v=!1,R.trigger(ye.default.PLAYBACK_SEEKED)}function F(){d&&R.trigger(ye.default.PLAYBACK_TIME_UPDATED,{timeToEnd:j(),time:N(),streamId:d.id})}function te(){R.trigger(ye.default.PLAYBACK_PROGRESS,{streamId:d.id})}function re(){var e=q();i.info("Native video element event: ratechange: ",e),R.trigger(ye.default.PLAYBACK_RATE_CHANGED,{playbackRate:e})}function ne(){i.info("Native video element event: loadedmetadata"),R.trigger(ye.default.PLAYBACK_METADATA_LOADED),P()}function ie(){i.info("Native video element event: loadeddata"),R.trigger(ye.default.PLAYBACK_LOADED_DATA)}function ae(){i.info("Native video element event: ended"),w(),L();var e=n?n.getActiveStreamInfo():null;e&&R.trigger(ye.default.PLAYBACK_ENDED,{isLast:e.isLast})}function oe(){R.trigger(ye.default.PLAYBACK_VOLUME_CHANGED)}function se(e){t&&e.isLast&&(i.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended"),e=e.seekTime||I(),u.setCurrentTime(e),w(),L())}function ue(e){e=e.target||e.srcElement;R.trigger(ye.default.PLAYBACK_ERROR,{error:e.error})}function le(e){!1===e.stream&&E&&!isNaN(e.request.duration)&&(e=1.2*e.request.duration,c<e&&(i.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",e.toFixed(2)),f=c=e))}function ce(e){R.trigger(ye.default.PLAYBACK_STALLED,{e:e})}function fe(e){(e=e.mediaInfo)&&e.supplementalProperties&&"true"===e.supplementalProperties[he.default.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME]&&(i.debug("Low Latency critical SupplementalProperty set: Enabling low Latency"),E=!0)}function de(e){var t=n.getActiveStreamInfo();e&&t&&e.currentRepresentation&&e.streamId&&e.streamId===t.id&&e.mediaType&&(e.mediaType===he.default.VIDEO||e.mediaType===he.default.AUDIO)&&(y=e.currentRepresentation.availabilityTimeComplete,(E=!y)&&!S&&(S=!0))}function ge(){b=!0}function me(){b=!1}return r={initialize:function(e,t){d=e,!0!==t&&(u.addEventListener("canplay",K),u.addEventListener("canplaythrough",z),u.addEventListener("play",X),u.addEventListener("waiting",Q),u.addEventListener("playing",J),u.addEventListener("pause",Z),u.addEventListener("error",ue),u.addEventListener("seeking",$),u.addEventListener("seeked",ee),u.addEventListener("timeupdate",F),u.addEventListener("progress",te),u.addEventListener("ratechange",re),u.addEventListener("loadedmetadata",ne),u.addEventListener("loadeddata",ie),u.addEventListener("stalled",ce),u.addEventListener("ended",ae),u.addEventListener("volumechange",oe),g=d.manifestInfo.isDynamic,v=T=!1,R.on(ye.default.DATA_UPDATE_COMPLETED,V,r),R.on(ye.default.LOADING_PROGRESS,le,r),R.on(ye.default.MANIFEST_UPDATED,ge,r),R.on(ye.default.STREAMS_COMPOSED,me,r),R.on(_e.default.PLAYBACK_ENDED,se,r,{priority:pe.default.EVENT_PRIORITY_HIGH}),R.on(_e.default.STREAM_INITIALIZING,fe,r),R.on(_e.default.REPRESENTATION_SWITCH,de,r),R.on(_e.default.BUFFER_LEVEL_STATE_CHANGED,W,r),m&&(m=!1,k()))},setConfig:function(e){e&&(e.streamController&&(n=e.streamController),e.serviceDescriptionController&&(a=e.serviceDescriptionController),e.dashMetrics&&(o=e.dashMetrics),e.adapter&&(s=e.adapter),e.videoModel&&(u=e.videoModel),e.timelineConverter&&(l=e.timelineConverter),e.settings&&(A=e.settings))},getTimeToStreamEnd:j,getBufferLevel:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,r=null;return n.getActiveStreamProcessors().forEach(function(e){t&&0!==t.length&&-1!==t.indexOf(e.getType())||(e=e.getBufferLevel(),r=null===r?e:Math.min(r,e))}),r},getPlaybackStalled:function(){return T},getTime:N,getLowLatencyModeEnabled:function(){return E},getInitialCatchupModeActivated:function(){return S},getIsManifestUpdateInProgress:function(){return b},getPlaybackRate:q,getPlayedRanges:function(){return d&&u?u.getPlayedRanges():null},getEnded:H,getIsDynamic:Y,getStreamController:function(){return n},computeAndSetLiveDelay:function(e,t){var e=!isNaN(e)&&isFinite(e)?e:NaN,r=s.getSuggestedPresentationDelay(),n=a.getServiceDescriptionSettings(),n=isNaN(A.get().streaming.delay.liveDelay)?null===A.get().streaming.delay.liveDelayFragmentCount||isNaN(A.get().streaming.delay.liveDelayFragmentCount)||isNaN(e)?n&&!isNaN(n.liveDelay)&&0<n.liveDelay?n.liveDelay:!0===A.get().streaming.delay.useSuggestedPresentationDelay&&null!==r&&!isNaN(r)&&0<r?r:isNaN(e)?t&&!isNaN(t.minBufferTime)?4*t.minBufferTime:4*d.manifestInfo.minBufferTime:4*e:e*A.get().streaming.delay.liveDelayFragmentCount:A.get().streaming.delay.liveDelay;return null!==(r=s.getAvailabilityStartTime())&&(p=r),e=t&&0<t.dvrWindowSize?Math.min(n,t.dvrWindowSize):n,f=c=e},getLiveDelay:function(){return c},getOriginalLiveDelay:function(){return f},getCurrentLiveLatency:function(){if(!g||isNaN(p))return NaN;var e=N();if(isNaN(e)||0===e)return 0;var t=(new Date).getTime()+1e3*l.getClientTimeOffset();return Math.max(((t-p-1e3*e)/1e3).toFixed(3),0)},play:k,isPaused:D,isStalled:G,pause:w,isSeeking:M,getStreamEndTime:I,seek:C,seekToOriginalLive:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],r=2<arguments.length&&void 0!==arguments[2]&&arguments[2],n=U();0!==n&&C(n-(c=f),e,t,r)},seekToCurrentLive:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],r=2<arguments.length&&void 0!==arguments[2]&&arguments[2],n=U();0!==n&&C(n-c,e,t,r)},reset:x,updateCurrentTime:O,getAvailabilityStartTime:function(){return p}},i=(0,Ee.default)(e).getInstance().getLogger(r),x(),r}i.__dashjs_factory_name="PlaybackController",t.default=n.default.getSingletonFactory(i)},"./src/streaming/controllers/ScheduleController.js":function(e,t,r){"use strict";r.r(t);var F=r("./src/streaming/constants/Constants.js"),x=r("./src/streaming/models/FragmentModel.js"),j=r("./src/core/EventBus.js"),k=r("./src/core/events/Events.js"),n=r("./src/core/FactoryMaker.js"),U=r("./src/core/Debug.js"),B=r("./src/streaming/constants/MetricsConstants.js"),G=r("./src/streaming/MediaPlayerEvents.js");function i(e){e=e||{};var r,n,i,t,a,o,s,u,l,c,f,d,g=this.context,m=(0,j.default)(g).getInstance(),h=e.dashMetrics,p=e.mediaPlayerModel,y=e.fragmentModel,E=e.abrController,_=e.playbackController,v=e.textController,T=e.type,b=e.bufferController,S=e.representationController,A=e.settings;function R(e){b.getIsBufferingCompleted()||(I(),e=isNaN(e)?0:e,a=setTimeout(w,e))}function I(){a&&(clearTimeout(a),a=null)}function w(){try{if(function(){try{return T===F.default.TEXT&&!v.isTextEnabled()||_.isPaused()&&(!_.getStreamController().getInitialPlayback()||!_.getStreamController().getAutoPlay())&&!A.get().streaming.scheduling.scheduleWhilePaused}catch(e){return}}())return void I();var e;!function(){try{return S.getCurrentRepresentationInfo()&&(isNaN(l)||c||function(){var e=n.id,e=E.getMaxAllowedIndexFor(T,e);return!(!isNaN(u)&&u==e)&&(i.info("Top quality "+T+" index has changed from "+u+" to "+e),u=e,!0)}()||function(){var e=S.getCurrentRepresentationInfo();return!T||!e||h.getCurrentBufferLevel(T)<C()}())}catch(e){return}}()?R(_.getLowLatencyModeEnabled()?A.get().streaming.scheduling.lowLatencyTimeout:A.get().streaming.scheduling.defaultTimeout):(e=!1,(e=d?E.checkPlaybackQuality(T,n.id):e)||(t=S.getCurrentRepresentationInfo(),f||t.quality!==l||c?(c?(i.debug("Switch track for "+T+", representation id = "+t.id),c=!1):i.debug("Quality has changed, get init request for representationid = "+t.id),m.trigger(k.default.INIT_FRAGMENT_NEEDED,{representationId:t.id,sender:r},{streamId:n.id,mediaType:T}),f=d=!1):(i.debug("Media segment needed for ".concat(T," and stream id ").concat(n.id)),m.trigger(k.default.MEDIA_FRAGMENT_NEEDED,{},{streamId:n.id,mediaType:T}),d=!0)))}catch(e){R(_.getLowLatencyModeEnabled()?A.get().streaming.scheduling.lowLatencyTimeout:A.get().streaming.scheduling.defaultTimeout)}var t}function C(){var e=NaN,t=S.getCurrentRepresentationInfo();return T&&t?(T===F.default.TEXT?function(){try{var e,t;return v.isTextEnabled()?(e=S.getCurrentRepresentationInfo(),isNaN(e.fragmentDuration)?(t=h.getCurrentSchedulingInfo(B.default.SCHEDULING_INFO))?t.duration:0:e.fragmentDuration):0}catch(e){return 0}}:T===F.default.AUDIO&&o?function(){try{var e=h.getCurrentBufferLevel(F.default.VIDEO),t=S.getCurrentRepresentationInfo();return isNaN(t.fragmentDuration)?e+1:Math.max(e+1,t.fragmentDuration)}catch(e){return 0}}:function(){try{var e=S.getCurrentRepresentationInfo().mediaInfo.streamInfo;return E.isPlayingAtTopQuality(e)?e.manifestInfo.duration>=A.get().streaming.buffer.longFormContentDurationThreshold?A.get().streaming.buffer.bufferTimeAtTopQualityLongForm:A.get().streaming.buffer.bufferTimeAtTopQuality:p.getStableBufferTime()}catch(e){return p.getStableBufferTime()}})():e}function N(){D(!0)}function D(e){var t;_&&y&&((t=y.getRequests({state:x.default.FRAGMENT_MODEL_EXECUTED,time:_.getTime(),threshold:0})[0])&&_.getTime()>=t.startTime&&((!s.mediaInfo||t.mediaInfo.type===s.mediaInfo.type&&t.mediaInfo.index!==s.mediaInfo.index)&&e&&m.trigger(k.default.TRACK_CHANGE_RENDERED,{mediaType:T,oldMediaInfo:s.mediaInfo,newMediaInfo:t.mediaInfo,streamId:n.id}),t.quality===s.quality&&t.adaptationIndex===s.adaptationIndex||!e||(i.debug("Quality change rendered for streamId ".concat(n.id," and type ").concat(T)),m.trigger(k.default.QUALITY_CHANGE_RENDERED,{mediaType:T,oldQuality:s.quality,newQuality:t.quality,streamId:n.id})),s={mediaInfo:t.mediaInfo,quality:t.quality,adaptationIndex:t.adaptationIndex}))}function M(){y.abortRequests(),I()}function O(){A.get().streaming.scheduling.scheduleWhilePaused||R()}function P(e){h.updatePlayListTraceMetrics({playbackspeed:e.playbackRate.toString()})}function L(){d=!0,u=l=NaN,f=c=!(s={mediaInfo:void(t=0),quality:NaN,adaptationIndex:NaN})}return r={initialize:function(e){o=e,m.on(k.default.URL_RESOLUTION_FAILED,M,r),m.on(G.default.PLAYBACK_STARTED,O,r),m.on(G.default.PLAYBACK_RATE_CHANGED,P,r),m.on(G.default.PLAYBACK_TIME_UPDATED,N,r)},getType:function(){return T},getStreamId:function(){return n.id},setTimeToLoadDelay:function(e){t=e},getTimeToLoadDelay:function(){return t},setSwitchTrack:function(e){c=e},getSwitchTrack:function(){return c},startScheduleTimer:R,clearScheduleTimer:I,reset:function(){m.off(k.default.URL_RESOLUTION_FAILED,M,r),m.off(G.default.PLAYBACK_STARTED,O,r),m.off(G.default.PLAYBACK_RATE_CHANGED,P,r),m.off(G.default.PLAYBACK_TIME_UPDATED,N,r),I(),D(!1),L(),n=null},getBufferTarget:C,getPlaybackController:function(){return _},setCheckPlaybackQuality:function(e){d=e},setInitSegmentRequired:function(e){f=e},setLastInitializedQuality:function(e){l=e}},i=(0,U.default)(g).getInstance().getLogger(r),L(),n=e.streamInfo,r}i.__dashjs_factory_name="ScheduleController",t.default=n.default.getClassFactory(i)},"./src/streaming/controllers/StreamController.js":function(e,t,r){"use strict";r.r(t);var Be=r("./src/streaming/constants/Constants.js"),Ge=r("./src/streaming/constants/MetricsConstants.js"),qe=r("./src/streaming/Stream.js"),He=r("./src/streaming/ManifestUpdater.js"),Ye=r("./src/core/EventBus.js"),Ve=r("./src/core/events/Events.js"),n=r("./src/core/FactoryMaker.js"),Ke=r("./src/streaming/vo/metrics/PlayList.js"),ze=r("./src/core/Debug.js"),We=r("./src/streaming/utils/InitCache.js"),Xe=r("./src/streaming/MediaPlayerEvents.js"),Qe=r("./src/streaming/controllers/TimeSyncController.js"),Je=r("./src/streaming/controllers/MediaSourceController.js"),Ze=r("./src/streaming/vo/DashJSError.js"),$e=r("./src/core/errors/Errors.js"),et=r("./src/streaming/controllers/EventController.js"),tt=r("./src/streaming/constants/ConformanceViolationConstants.js");function rt(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(){var r,u,j,k,a,n,l,c,f,s,i,o,d,U,B,G,q,g,H,m,h,p,y,E,Y,_,v,T,b,S,A,R,I,V,K,z,t,w,e,C,W,N,X,D,Q,M,O,J,P=this.context,L=(0,Ye.default)(P).getInstance();function Z(){if(!(n&&n.hasOwnProperty("load")&&h&&h.hasOwnProperty("initialize")&&h.hasOwnProperty("reset")&&h.hasOwnProperty("getClientTimeOffset")&&l&&m&&f&&I))throw new Error(Be.default.MISSING_CONFIG_ERROR)}function $(){try{var r=c.getStreamsInfo();if(!y&&0===r.length)throw new Error("There are no periods in the MPD");y&&0<r.length&&f.updateManifestUpdateInfo({currentTime:I.getTime(),buffered:R.getBufferRange(),presentationStartTime:r[0].start,clientTimeOffset:h.getClientTimeOffset()}),0<p.length&&!function(r){0===r.length?u.warn("No periods included in the current manifest. Skipping the filtering of outdated stream objects."):p=p.filter(function(t){var e=0<r.filter(function(e){return e.id===t.getId()}).length||t.getId()===y.getId();return e||(u.debug("Removing stream ".concat(t.getId())),t.reset(!0)),e})}(r);for(var e=[],t=0,n=r.length;t<n;t++){var i=r[t];e.push(function(e){var t=Le(e.id);return t?t.updateData(e):(t=(0,qe.default)(P).create({manifestModel:l,mediaPlayerModel:K,dashMetrics:f,manifestUpdater:a,adapter:c,timelineConverter:h,capabilities:j,capabilitiesFilter:k,errHandler:m,baseURLController:d,segmentBaseController:U,textController:Y,abrController:G,playbackController:I,eventController:g,mediaController:q,protectionController:E,videoModel:R,streamInfo:e,settings:D}),p.push(t),t.initialize(),Promise.resolve())}(i)),f.addManifestUpdateStreamInfo(i)}Promise.all(e).then(function(){return new Promise(function(e,t){y?e():function e(t,r,n){try{fe();var i,a=f.getCurrentDVRInfo().range;if(a.end<a.start)return M&&clearTimeout(M),i=Math.min(1e3*(-1*(a.end-a.start)+2),2147483647),u.debug("Waiting for ".concat(i," ms before playback can start")),L.trigger(Ve.default.AST_IN_FUTURE,{delay:i}),void(M=setTimeout(function(){e(t,r,n)},i));D.get().streaming.applyProducerReferenceTime&&V.calculateProducerReferenceTimeOffsets(t);var o,s=t[0].manifestInfo;D.get().streaming.applyServiceDescription&&V.applyServiceDescription(s),c.getIsDynamic()&&(o=we(t,s),I.computeAndSetLiveDelay(o,s)),te().then(function(){var e=l.getValue();e&&d.update(e),re(),r()}).catch(function(e){u.error(e),re(),r()})}catch(e){n(e)}}(r,e,t)})}).then(function(){L.trigger(Ve.default.STREAMS_COMPOSED),_e()}).catch(function(e){throw e})}catch(e){m.error(new Ze.default($e.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,e.message+" nostreamscomposed",l.getValue())),S=!0,je()}}function ee(){Q=!0}function te(){return D.get().streaming.applyContentSteering&&o.shouldQueryBeforeStart()?o.loadSteeringData():Promise.resolve()}function re(){var e=function(){{var e,t,r;c.getIsDynamic()?(r=f.getCurrentDVRInfo(),e=r&&r.range?r.range.end:0,e=e-I.getOriginalLiveDelay(),(r=r?r.range:null)&&(isNaN(O)&&-1===O.toString().indexOf("posix:")?(t=Ae(!0),isNaN(t)||(u.info("Start time from URI parameters: ".concat(t)),e=Math.min(e,t))):(u.info("Start time provided by the app: ".concat(O)),t=Re(!0,O),isNaN(t)||(e=Math.min(e,t))),t=D.get().streaming.timeShiftBuffer.calcFromSegmentTimeline?.1:0,e=Math.max(e,r.start+t))):(r=p[0].getStreamInfo(),e=r.start,isNaN(O)?(t=Ae(!1),isNaN(t)||(u.info("Start time from URI parameters: ".concat(t)),e=Math.max(e,t))):(u.info("Start time provided by the app: ".concat(O)),r=Re(!1,O),isNaN(r)||(e=Math.max(e,r))))}return e}(),t=ce(e),t=null!==t?t:p[0];L.trigger(Ve.default.INITIAL_STREAM_SWITCH,{startTime:e}),ne(t,null,e),C=C||setInterval(function(){!T&&I.getTimeToStreamEnd()<=0&&!I.isSeeking()&&L.trigger(Ve.default.PLAYBACK_ENDED,{isLast:x().isLast})},200)}function ne(e,t,r){try{if(T||!e||t===e&&e.getIsActive())return;T=!0,L.trigger(Ve.default.PERIOD_SWITCH_STARTED,{fromStreamInfo:t?t.getStreamInfo():null,toStreamInfo:e.getStreamInfo()});var n=!1;y=e,t&&(n=le(e,t),t.deactivate(n)),r=isNaN(r)?!n&&t?e.getStreamInfo().start:NaN:r,u.info("Switch to stream ".concat(e.getId(),". Seektime is ").concat(r,", current playback time is ").concat(I.getTime(),". Seamless period switch is set to ").concat(n)),N=N.filter(function(e){return e.getId()!==y.getId()}),I.initialize(x(),!!t),R.getElement()?F(r,n,!1):ie(r,n)}catch(e){T=!1}}function F(t,r,e){var n,i=2<arguments.length&&void 0!==e&&e;function a(){var e;A&&"open"===A.readyState&&(u.debug("MediaSource is open!"),window.URL.revokeObjectURL(n),A.removeEventListener("sourceopen",a),A.removeEventListener("webkitsourceopen",a),Se(),e=f.getCurrentDVRInfo(),s.setSeekable(e.range.start,e.range.end),i?(isNaN(t)||I.seek(t,!0,!0),y.setMediaSource(A).then(function(){y.initializeForTextWithMediaSource(A)})):ie(t,r))}function o(){A.addEventListener("sourceopen",a,!1),A.addEventListener("webkitsourceopen",a,!1),n=s.attachMediaSource(R),u.debug("MediaSource attached to element.  Waiting on open...")}A?r?ie(t,r):(s.detachMediaSource(R),o()):(A=s.createMediaSource(),o())}function ie(r,e){y.activate(A,e?W:void 0,r).then(function(e){var t;e&&(0<(t=Object.keys(e)).length&&e[t[0]].getBuffer().changeType&&(X=!0),W=e),isNaN(r)||(L.trigger(Ve.default.SEEK_TARGET,{time:r},{streamId:y.getId()}),I.seek(r,!1,!0),y.startScheduleControllers()),T=!1,L.trigger(Ve.default.PERIOD_SWITCH_COMPLETED,{toStreamInfo:x()})})}function ae(e){var t,r,n,i,a=ce(e.seekTime);a&&a!==y?a&&a!==y&&(oe(a),r=a,n=(t=e)&&!isNaN(t.seekTime)?t.seekTime:NaN,a=y.getProcessors().map(function(e){return e.prepareOuterPeriodPlaybackSeeking(t)}),Promise.all(a).then(function(){ne(r,y,n)}).catch(function(e){m.error(e)})):(oe(),i=e,y.getProcessors().forEach(function(e){return e.prepareInnerPeriodPlaybackSeeking(i)}),Me(Ke.PlayListTrace.USER_REQUEST_STOP_REASON)),Oe(Ke.PlayList.SEEK_START_REASON)}function oe(){se()}function se(){N&&0<N.length&&(N.forEach(function(e){e.deactivate(!0)}),N=[])}function ue(e){if(e.newMediaInfo.streamInfo.id===y.getId()){var t;if(se(),D.get().streaming.buffer.resetSourceBuffersForTrackSwitch&&e.oldMediaInfo&&e.oldMediaInfo.codec!==e.newMediaInfo.codec)return t=I.getTime(),y.deactivate(!1),void F(t,!1,!1);y.prepareTrackChange(e)}}function le(e,t){try{return D.get().streaming.buffer.reuseExistingSourceBuffers&&(t.isProtectionCompatible(e)||Q)&&(X&&D.get().streaming.buffer.useChangeTypeForTrackSwitch||t.isMediaCodecCompatible(e,t))}catch(e){return!1}}function ce(e){if(isNaN(e))return null;for(var t=p.length,r=0;r<t;r++){var n=p[r];if(e<parseFloat((n.getStartTime()+n.getDuration()).toFixed(5)))return n}return null}function fe(){try{var e=c.getIsDynamic(),t=c.getStreamsInfo()[0].manifestInfo,r=I.getTime(),n=h.calcTimeShiftBufferWindow(p,e),i=Te();if(void 0===n.start||void 0===n.end)return;i&&0!==i.length?i.forEach(function(e){f.addDVRInfo(e.getType(),r,t,n)}):f.addDVRInfo(Be.default.VIDEO,r,t,n)}catch(e){}}function de(e){var t,r;w&&v&&(t=K.getInitialBufferLevel(),r=[Be.default.TEXT],(isNaN(t)||t<=I.getBufferLevel(r)||c.getIsDynamic()&&t>I.getLiveDelay())&&(w=!1,Oe(Ke.PlayList.INITIAL_PLAYOUT_START_REASON),I.play())),e&&e.mediaType&&f.addBufferLevel(e.mediaType,new Date,1e3*e.bufferLevel)}function ge(e){e.streamInfo.id===y.getId()&&e.reason&&e.reason.forceReplace&&se(),Le(e.streamInfo.id).prepareQualityChange(e)}function me(){var e,t;c.getIsDynamic()&&0!==I.getOriginalLiveDelay()&&y&&(0<(e=c.getStreamsInfo()).length&&(t=we(e,e=e[0].manifestInfo),I.computeAndSetLiveDelay(t,e)))}function he(){var e;Ne()&&(e=R.getPlaybackQuality())&&f.addDroppedFrames(e)}function pe(){u.debug("[onPlaybackStarted]"),!w&&t&&Oe(Ke.PlayList.RESUME_FROM_PAUSE_START_REASON),w=w&&!1,e&&(e=!1,D.get().streaming.applyContentSteering&&!o.shouldQueryBeforeStart()&&o.loadSteeringData()),t=!1}function ye(e){u.debug("[onPlaybackPaused]"),e.ended||(t=!0,Me(Ke.PlayListTrace.USER_REQUEST_STOP_REASON))}function Ee(e){u.debug("Stream with id ".concat(e.streamInfo.id," finished buffering"));e=e.streamInfo.isLast;A&&e?(u.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),s.signalEndOfStream(A)):_e()}function _e(){if(y&&y.getHasFinishedBuffering())for(var e=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;try{var t,r=e||y||null;if(r)return t=r.getStreamInfo(),p.filter(function(e){e=e.getStreamInfo();return e.start>t.start&&t.id!==e.id})}catch(e){return[]}}(y),t=0;t<e.length;){var r=e[t],n=0===t?y:e[t-1];!r.getPreloaded()&&n.getHasFinishedBuffering()&&A&&!function(e,t){t=1<arguments.length&&void 0!==t?t:null,A&&!e.getPreloaded()&&le(e,t)&&e.startPreloading(A,W).then(function(){N.push(e)})}(r,n),t+=1}}function ve(){C&&(clearInterval(C),C=null)}function Te(){return y?y.getProcessors():[]}function be(e){var t;y&&!y.getIsEndedEventSignaled()&&(y.setIsEndedEventSignaled(!0),(t=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,e=e||y||null;if(!e)return null;var t=e.getStreamInfo(),r=t.start,n=0,i=-1,a=NaN;for(;n<p.length;){var o=p[n].getStreamInfo(),s=o.start-r;0<s&&(isNaN(a)||s<a)&&t.id!==o.id&&(a=s,i=n),n+=1}if(0<=i)return p[i];return null}())?(u.debug("StreamController onEnded, found next stream with id ".concat(t.getStreamInfo().id,". Switching from ").concat(y.getStreamInfo().id," to ").concat(t.getStreamInfo().id)),ne(t,y,NaN)):(u.debug("StreamController no next stream found"),y.setIsEndedEventSignaled(!1)),Me(t?Ke.PlayListTrace.END_OF_PERIOD_STOP_REASON:Ke.PlayListTrace.END_OF_CONTENT_STOP_REASON)),e&&e.isLast&&(ve(),o.stopSteeringRequestTimer())}function Se(e){e=e||x().manifestInfo.duration;s.setDuration(e)}function Ae(e){var t=B.getURIFragmentData();if(!t||!t.t)return NaN;var r=p[0].getStreamInfo().start;return t.t=t.t.split(",")[0],Ie(e,t.t,r)}function Re(e,t){var r=0;return Ie(e,t,r=e?r:p[0].getStreamInfo().start)}function Ie(e,t,r){var n=c.getRegularPeriods()[0],t=t.toString(),i=-1!==t.indexOf("posix:")?"now"===t.substring(6)?Date.now()/1e3:parseFloat(t.substring(6)):NaN;return e&&!isNaN(i)?h.calcPresentationTimeFromWallTime(new Date(1e3*i),n):parseFloat(t)+r}function we(e,t){try{var r,n,i=NaN;return t&&!isNaN(t.maxFragmentDuration)&&isFinite(t.maxFragmentDuration)?t.maxFragmentDuration:(e&&1===e.length&&(r=e[0],n=[Be.default.VIDEO,Be.default.AUDIO,Be.default.TEXT].reduce(function(e,t){t=c.getMediaInfoForType(r,t);return t&&!1!==t.isFragmented&&e.push(t),e},[]).reduce(function(t,e){e=c.getVoRepresentations(e);return e&&0<e.length&&e.forEach(function(e){e&&t.push(e)}),t},[]).reduce(function(e,t){t=c.convertRepresentationToRepresentationInfo(t);return t&&t.fragmentDuration&&!isNaN(t.fragmentDuration)&&e.push(t.fragmentDuration),e},[]),i=Math.max.apply(Math,rt(n))),isFinite(i)?i:NaN)}catch(e){return NaN}}function Ce(e){var t,r;e.error?(S=!0,je()):(u.info("Manifest updated... updating data system wide."),t=e.manifest,c.updatePeriods(t),e=c.getUTCTimingSources(),!c.getIsDynamic()||e&&0!==e.length||L.trigger(Xe.default.CONFORMANCE_VIOLATION,{level:tt.default.LEVELS.WARNING,event:tt.default.EVENTS.NO_UTC_TIMING_ELEMENT}),r=c.getIsDynamic()?e.concat(z.getUTCTimingSources()):e,k.filterUnsupportedFeatures(t).then(function(){d.initialize(t),i.attemptSync(r,c.getIsDynamic())}))}function Ne(){return!!y&&y.getHasVideoTrack()}function De(){return!!y&&y.getHasAudioTrack()}function Me(t,r){r=r||new Date,Te().forEach(function(e){e.finalisePlayList(r,t)}),f.addPlayList()}function Oe(e){f.createPlaylistMetrics(1e3*I.getTime(),e)}function Pe(e){if(e.error){var t,r="";switch(e.error.code){case 1:r="MEDIA_ERR_ABORTED";break;case 2:r="MEDIA_ERR_NETWORK";break;case 3:r="MEDIA_ERR_DECODE",J.counts.mediaErrorDecode+=1;break;case 4:r="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:r="MEDIA_ERR_ENCRYPTED";break;default:r="UNKNOWN"}if("MEDIA_ERR_DECODE"===r&&D.get().errors.recoverAttempts.mediaErrorDecode>=J.counts.mediaErrorDecode)return u.warn("A MEDIA_ERR_DECODE occured: Resetting the MediaSource"),t=I.getTime(),y.deactivate(!1),u.warn("MediaSource has been resetted. Resuming playback from time ".concat(t)),void F(t,!1,!1);b=!0,e.error.message&&(r+=" ("+e.error.message+")"),e.error.msExtendedCode&&(r+=" (0x"+(e.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),u.fatal("Video Element Error: "+r),e.error&&u.fatal(e.error),m.error(new Ze.default(e.error.code,r)),je()}}function x(){return y?y.getStreamInfo():null}function Le(e){for(var t=0,r=p.length;t<r;t++)if(p[t].getId()===e)return p[t];return null}function Fe(e){isNaN(e.newDuration)||Se(e.newDuration)}function xe(){O=NaN,X=Q=!(v=!(t=!(e=w=!(S=b=T=!(p=[]))))),N=[],M=C=y=E=null,J={counts:{mediaErrorDecode:0}}}function je(){Z(),i.reset(),Me(b||S?Ke.PlayListTrace.FAILURE_STOP_REASON:Ke.PlayListTrace.USER_REQUEST_STOP_REASON);for(var e=0,t=p?p.length:0;e<t;e++)p[e].reset(b);L.off(Xe.default.PLAYBACK_TIME_UPDATED,he,r),L.off(Xe.default.PLAYBACK_SEEKING,ae,r),L.off(Xe.default.PLAYBACK_ERROR,Pe,r),L.off(Xe.default.PLAYBACK_STARTED,pe,r),L.off(Xe.default.PLAYBACK_PAUSED,ye,r),L.off(Xe.default.PLAYBACK_ENDED,be,r),L.off(Xe.default.METRIC_ADDED,ke,r),L.off(Xe.default.MANIFEST_VALIDITY_CHANGED,Fe,r),L.off(Xe.default.BUFFER_LEVEL_UPDATED,de,r),L.off(Xe.default.QUALITY_CHANGE_REQUESTED,ge,r),Ve.default.KEY_SESSION_UPDATED&&L.off(Ve.default.KEY_SESSION_UPDATED,ee,r),L.off(Ve.default.MANIFEST_UPDATED,Ce,r),L.off(Ve.default.STREAM_BUFFERING_COMPLETED,Ee,r),L.off(Ve.default.TIME_SYNCHRONIZATION_COMPLETED,$,r),L.off(Ve.default.CURRENT_TRACK_CHANGED,ue,r),L.off(Ve.default.SETTING_UPDATED_LIVE_DELAY,me,r),L.off(Ve.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,me,r),d.reset(),a.reset(),g.reset(),f.clearAllCurrentMetrics(),l.setValue(null),n.reset(),h.reset(),H.reset(),A&&(s.detachMediaSource(R),A=null),R=null,E&&(_=E=null,l.getValue()&&L.trigger(Ve.default.PROTECTION_DESTROYED,{data:l.getValue().url})),ve(),L.trigger(Ve.default.STREAM_TEARDOWN_COMPLETE),xe()}function ke(e){var t;e.metric===Ge.default.DVR_INFO&&(t=De()?Be.default.AUDIO:Be.default.VIDEO,e.mediaType===t&&s.setSeekable(e.value.range.start,e.value.range.end))}function Ue(){return p}return r={initialize:function(e,t){Z(),v=e,_=t,h.initialize(),(a=(0,He.default)(P).create()).setConfig({manifestModel:l,adapter:c,manifestLoader:n,errHandler:m,settings:D,contentSteeringController:o}),a.initialize(),(g=(0,et.default)(P).getInstance()).setConfig({manifestUpdater:a,playbackController:I,settings:D}),g.start(),i.setConfig({dashMetrics:f,baseURLController:d,errHandler:m,settings:D}),i.initialize(),s.setConfig({settings:D}),E&&(L.trigger(Ve.default.PROTECTION_CREATED,{controller:E}),E.setMediaElement(R.getElement()),_&&E.setProtectionData(_)),L.on(Xe.default.PLAYBACK_TIME_UPDATED,he,r),L.on(Xe.default.PLAYBACK_SEEKING,ae,r),L.on(Xe.default.PLAYBACK_ERROR,Pe,r),L.on(Xe.default.PLAYBACK_STARTED,pe,r),L.on(Xe.default.PLAYBACK_PAUSED,ye,r),L.on(Xe.default.PLAYBACK_ENDED,be,r),L.on(Xe.default.METRIC_ADDED,ke,r),L.on(Xe.default.MANIFEST_VALIDITY_CHANGED,Fe,r),L.on(Xe.default.BUFFER_LEVEL_UPDATED,de,r),L.on(Xe.default.QUALITY_CHANGE_REQUESTED,ge,r),Ve.default.KEY_SESSION_UPDATED&&L.on(Ve.default.KEY_SESSION_UPDATED,ee,r),L.on(Ve.default.MANIFEST_UPDATED,Ce,r),L.on(Ve.default.STREAM_BUFFERING_COMPLETED,Ee,r),L.on(Ve.default.TIME_SYNCHRONIZATION_COMPLETED,$,r),L.on(Ve.default.CURRENT_TRACK_CHANGED,ue,r),L.on(Ve.default.SETTING_UPDATED_LIVE_DELAY,me,r),L.on(Ve.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,me,r)},getActiveStreamInfo:x,addDVRMetric:fe,hasVideoTrack:Ne,hasAudioTrack:De,getStreamById:Le,getStreamForTime:ce,getTimeRelativeToStreamId:function(e,t){for(var r,n,i=null,a=0,o=0;o<p.length;o++){if(r=(i=p[o]).getStartTime(),n=i.getDuration(),Number.isFinite(r)&&(a=r),i.getId()===t)return e-a;Number.isFinite(n)&&(a+=n)}return null},load:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:NaN;Z(),O=t,n.load(e)},loadWithManifest:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:NaN;if(!a||!a.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously");O=t,a.setManifest(e)},getActiveStreamProcessors:Te,setConfig:function(e){e&&(e.capabilities&&(j=e.capabilities),e.capabilitiesFilter&&(k=e.capabilitiesFilter),e.manifestLoader&&(n=e.manifestLoader),e.manifestModel&&(l=e.manifestModel),e.mediaPlayerModel&&(K=e.mediaPlayerModel),e.customParametersModel&&(z=e.customParametersModel),e.protectionController&&(E=e.protectionController),e.adapter&&(c=e.adapter),e.dashMetrics&&(f=e.dashMetrics),e.errHandler&&(m=e.errHandler),e.timelineConverter&&(h=e.timelineConverter),e.videoModel&&(R=e.videoModel),e.playbackController&&(I=e.playbackController),e.serviceDescriptionController&&(V=e.serviceDescriptionController),e.contentSteeringController&&(o=e.contentSteeringController),e.textController&&(Y=e.textController),e.abrController&&(G=e.abrController),e.mediaController&&(q=e.mediaController),e.settings&&(D=e.settings),e.baseURLController&&(d=e.baseURLController),e.uriFragmentModel&&(B=e.uriFragmentModel),e.segmentBaseController&&(U=e.segmentBaseController))},setProtectionData:function(e){_=e,E&&E.setProtectionData(_)},getIsStreamSwitchInProgress:function(){return T},switchToVideoElement:function(e){y&&(I.initialize(x()),F(e,!1,!0))},getHasMediaOrInitialisationError:function(){return b||S},getStreams:Ue,getActiveStream:function(){return y},getInitialPlayback:function(){return w},getAutoPlay:function(){return v},reset:je},u=(0,ze.default)(P).getInstance().getLogger(r),i=(0,Qe.default)(P).getInstance(),s=(0,Je.default)(P).getInstance(),H=(0,We.default)(P).getInstance(),xe(),r}a.__dashjs_factory_name="StreamController",t.default=n.default.getSingletonFactory(a)},"./src/streaming/controllers/TimeSyncController.js":function(e,t,r){"use strict";r.r(t);var P=r("./src/streaming/vo/DashJSError.js"),L=r("./src/streaming/vo/metrics/HTTPRequest.js"),F=r("./src/core/EventBus.js"),x=r("./src/core/events/Events.js"),j=r("./src/core/errors/Errors.js"),n=r("./src/core/FactoryMaker.js"),k=r("./src/core/Debug.js"),U=r("./src/streaming/utils/URLUtils.js");function i(){var e,l,c,t,f,a,n,o,s,d,r,g,m,h,p,y,i=this.context,E=(0,F.default)(i).getInstance(),_=(0,U.default)(i).getInstance();function u(){o=[],m=r=d=null,g=NaN,t=c=!(s=[]),h=f.get().streaming.utcSynchronization.timeBetweenSyncAttempts}function v(){!f.get().streaming.utcSynchronization.enabled||c||t||!m||!m.value||!m.schemeIdUri||isNaN(g)||isNaN(f.get().streaming.utcSynchronization.backgroundAttempts)||r&&(Date.now()-r)/1e3<30||(o=[],t=!0,function r(n){try{if(n<=0)return void M();var i=Date.now();a[m.schemeIdUri](m.value,function(e){var t=Date.now(),t=T(i,t,e);o.push(t),r(n-1)},function(){M()})}catch(e){M()}}(isNaN(f.get().streaming.utcSynchronization.backgroundAttempts)?2:f.get().streaming.utcSynchronization.backgroundAttempts))}function T(e,t,r){return r-(t-(t-e)/2)}function b(e){var t,e=0<arguments.length&&void 0!==e?e:NaN,r=isNaN(e);r&&f.get().streaming.utcSynchronization.useManifestDateHeaderTimeSource?(t=null!==(t=n.getLatestMPDRequestHeaderValueByID("Date"))?new Date(t).getTime():Number.NaN,isNaN(t)?D(!0):D(!1,t-Date.now())):D(r,e)}function S(e){var t,r,n=Date.parse(e);return isNaN(n)&&(e=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(e=e),r=Date.UTC(parseInt(e[1],10),parseInt(e[2],10)-1,parseInt(e[3],10),parseInt(e[4],10),parseInt(e[5],10),e[6]&&(parseInt(e[6],10)||0),e[7]&&1e3*parseFloat(e[7])||0),e[9]&&e[10]&&(t=60*parseInt(e[9],10)+parseInt(e[10],10),r+=("+"===e[8]?-1:1)*t*60*1e3),n=new Date(r).getTime()),n}function A(e){return Date.parse(e)}function R(e){return Date.parse(e)}function I(e,t,r){r()}function w(e,t,r){e=S(e);isNaN(e)?r():t(e)}function C(t,e,r,n,i){var a,o,s,u=!1,l=new XMLHttpRequest,c=i?L.HTTPRequest.HEAD:L.HTTPRequest.GET,f=e.match(/\S+/g);e=f.shift(),a=function(){u||(u=!0,f.length?C(t,f.join(" "),r,n,i):n())},o=function(){var e;200===l.status&&(e=i?l.getResponseHeader("Date"):l.response,e=t(e),isNaN(e)||(r(e),u=!0))},_.isRelative(e)&&(s=y.resolve())&&(e=_.resolve(e,s.url)),l.open(c,e),l.timeout=5e3,l.onload=o,l.onloadend=a,l.send()}function N(e,t,r){C(R,e,t,r,!0)}function D(e,t){if(!isNaN(g)&&!isNaN(t)&&!e){var r=t;try{var n,i=O(r),a=isNaN(h)?30:h,o=isNaN(f.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor)?2:f.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor,s=isNaN(f.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts)?600:f.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts,u=isNaN(f.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts)?2:f.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts;i?(n=Math.min(a*o,s),l.debug("Increasing timeBetweenSyncAttempts to ".concat(n))):(n=Math.max(a/o,u),l.debug("Decreasing timeBetweenSyncAttempts to ".concat(n))),h=n}catch(e){}}e||isNaN(t)||(d=Date.now(),c=!1,r=isNaN(g),g=t,r&&v(),l.debug("Completed UTC sync. Setting client - server offset to ".concat(t))),e&&(m=null,c=!1,p.error(new P.default(j.default.TIME_SYNC_FAILED_ERROR_CODE,j.default.TIME_SYNC_FAILED_ERROR_MESSAGE))),E.trigger(x.default.UPDATE_TIME_SYNC_OFFSET,{offset:t}),E.trigger(x.default.TIME_SYNCHRONIZATION_COMPLETED)}function M(){var e;o&&0!==o.length&&(O(e=o.reduce(function(e,t){return e+t},0)/o.length)?l.debug("Completed background UTC sync. Offset is within allowed threshold and is not adjusted."):(l.debug("Completed background UTC sync. Setting client - server offset to ".concat(e)),g=e,E.trigger(x.default.UPDATE_TIME_SYNC_OFFSET,{offset:g})),t=!1,r=Date.now())}function O(e){try{if(isNaN(g))return!0;var t=f.get().streaming.utcSynchronization.maximumAllowedDrift&&!isNaN(f.get().streaming.utcSynchronization.maximumAllowedDrift)?f.get().streaming.utcSynchronization.maximumAllowedDrift:100;return g-t<=e&&e<=g+t}catch(e){return!0}}return e={initialize:function(){u(),a={"urn:mpeg:dash:utc:http-head:2014":N,"urn:mpeg:dash:utc:http-xsdate:2014":C.bind(null,S),"urn:mpeg:dash:utc:http-iso:2014":C.bind(null,A),"urn:mpeg:dash:utc:direct:2014":w,"urn:mpeg:dash:utc:http-head:2012":N,"urn:mpeg:dash:utc:http-xsdate:2012":C.bind(null,S),"urn:mpeg:dash:utc:http-iso:2012":C.bind(null,A),"urn:mpeg:dash:utc:direct:2012":w,"urn:mpeg:dash:utc:http-ntp:2014":I,"urn:mpeg:dash:utc:ntp:2014":I,"urn:mpeg:dash:utc:sntp:2014":I}},attemptSync:function(e,t){s=e,c||(!function(e){try{if(!e||!f.get().streaming.utcSynchronization.enabled)return;var t=isNaN(h)?30:h;return d&&t&&!isNaN(t)?(Date.now()-d)/1e3>=t:1}catch(e){return 1}}(t)?E.trigger(x.default.TIME_SYNCHRONIZATION_COMPLETED):(c=!0,function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;var r=t||0;if(!s||0===s.length||r>=s.length)return void b();var n=s[r];{var i;n?a.hasOwnProperty(n.schemeIdUri)?(i=(new Date).getTime(),a[n.schemeIdUri](n.value,function(e){var t=(new Date).getTime(),t=T(i,t,e);m=n,b(t)},function(){e(r+1)})):e(r+1):b()}}()))},setConfig:function(e){e&&(e.dashMetrics&&(n=e.dashMetrics),e.baseURLController&&(y=e.baseURLController),e.errHandler&&(p=e.errHandler),e.settings&&(f=e.settings))},reset:function(){u(),E.off(x.default.ATTEMPT_BACKGROUND_SYNC,v,e)}},l=(0,k.default)(i).getInstance().getLogger(e),E.on(x.default.ATTEMPT_BACKGROUND_SYNC,v,e),e}i.__dashjs_factory_name="TimeSyncController";r=n.default.getSingletonFactory(i);r.HTTP_TIMEOUT_MS=5e3,n.default.updateSingletonFactory(i.__dashjs_factory_name,r),t.default=r},"./src/streaming/controllers/XlinkController.js":function(e,t,r){"use strict";r.r(t);var o=r("./src/streaming/XlinkLoader.js"),c=r("./src/core/EventBus.js"),y=r("./src/core/events/Events.js"),n=r("./src/core/FactoryMaker.js"),f=r("./externals/xml2json.js"),E=r("./src/streaming/utils/URLUtils.js"),_=r("./src/dash/constants/DashConstants.js"),v="onLoad";function i(e){e=e||{};var t,r,d,g,n,s,i=this.context,m=(0,c.default)(i).getInstance(),u=(0,E.default)(i).getInstance();function h(e,t,r){var n,i,a={};a.elements=e,a.type=t,a.resolveType=r,0===a.elements.length&&l(a);for(var o=0;o<a.elements.length;o++)n=a.elements[o],i=u.isHTTPURL(n.url)?n.url:n.originalContent.BaseURL+n.url,s.load(i,n,a)}function a(e){var t,r=e.element,e=e.resolveObject;r.resolvedContent&&((t=0)===r.resolvedContent.indexOf("<?xml")&&(t=r.resolvedContent.indexOf("?>")+2),t=r.resolvedContent.substr(0,t)+"<response>"+r.resolvedContent.substr(t)+"</response>",r.resolvedContent=n.xml_str2json(t)),function(e){var t;for(t=0;t<e.elements.length;t++)if(!1===e.elements[t].resolved)return;return 1}(e)&&l(e)}function l(e){var t,r,n,i,a,o,s,u,l=[],c=e,f=[];for(o=c.elements.length-1;0<=o;o--){if(n=c.elements[o],i=n.type+"_asArray",n.resolvedContent){if(n.resolvedContent)for(s=0;s<n.resolvedContent[i].length;s++)a=n.resolvedContent[i][s],f.push(a)}else delete n.originalContent["xlink:actuate"],delete n.originalContent["xlink:href"],f.push(n.originalContent);for(n.parentElement[i].splice(n.index,1),u=0;u<f.length;u++)n.parentElement[i].splice(n.index+u,0,f[u]);f=[]}if(0<c.elements.length&&d.run(g),"onActuate"===e.resolveType&&m.trigger(y.default.XLINK_READY,{manifest:g}),e.resolveType===v)switch(e.type){case _.default.PERIOD:for(t=0;t<g[_.default.PERIOD+"_asArray"].length;t++)(r=g[_.default.PERIOD+"_asArray"][t]).hasOwnProperty(_.default.ADAPTATION_SET+"_asArray")&&(l=l.concat(p(r[_.default.ADAPTATION_SET+"_asArray"],r,_.default.ADAPTATION_SET,v))),r.hasOwnProperty(_.default.EVENT_STREAM+"_asArray")&&(l=l.concat(p(r[_.default.EVENT_STREAM+"_asArray"],r,_.default.EVENT_STREAM,v)));h(l,_.default.ADAPTATION_SET,v);break;case _.default.ADAPTATION_SET:m.trigger(y.default.XLINK_READY,{manifest:g})}}function p(e,t,r,n){for(var i,a,o=[],s=e.length-1;0<=s;s--)(i=e[s]).hasOwnProperty("xlink:href")&&"urn:mpeg:dash:resolve-to-zero:2013"===i["xlink:href"]&&e.splice(s,1);for(s=0;s<e.length;s++)(i=e[s]).hasOwnProperty("xlink:href")&&i.hasOwnProperty("xlink:actuate")&&i["xlink:actuate"]===n&&(a={url:i["xlink:href"],parentElement:t,type:r,index:s,resolveType:n,originalContent:i,resolvedContent:null,resolved:!1},o.push(a));return o}return t={resolveManifestOnLoad:function(e){n=new f.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:r}),(g=e).Period_asArray?h(p(g.Period_asArray,g,_.default.PERIOD,v),_.default.PERIOD,v):m.trigger(y.default.XLINK_READY,{manifest:g})},setMatchers:function(e){e&&(r=e)},setIron:function(e){e&&(d=e)},reset:function(){m.off(y.default.XLINK_ELEMENT_LOADED,a,t),s&&(s.reset(),s=null)}},m.on(y.default.XLINK_ELEMENT_LOADED,a,t),s=(0,o.default)(i).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,settings:e.settings}),t}i.__dashjs_factory_name="XlinkController",t.default=n.default.getClassFactory(i)},"./src/streaming/metrics/MetricsReporting.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/streaming/metrics/utils/DVBErrorsTranslator.js"),i=r("./src/streaming/metrics/MetricsReportingEvents.js"),a=r("./src/streaming/metrics/controllers/MetricsCollectionController.js"),o=r("./src/streaming/metrics/metrics/MetricsHandlerFactory.js"),s=r("./src/streaming/metrics/reporting/ReportingFactory.js");function u(){var t=this.context;return{createMetricsReporting:function(e){return(0,n.default)(t).getInstance({eventBus:e.eventBus,dashMetrics:e.dashMetrics,metricsConstants:e.metricsConstants,events:e.events}).initialize(),(0,a.default)(t).create(e)},getReportingFactory:function(){return(0,s.default)(t).getInstance()},getMetricsHandlerFactory:function(){return(0,o.default)(t).getInstance()}}}u.__dashjs_factory_name="MetricsReporting";r=dashjs.FactoryMaker.getClassFactory(u);r.events=i.default,dashjs.FactoryMaker.updateClassFactory(u.__dashjs_factory_name,r),t.default=r},"./src/streaming/metrics/MetricsReportingEvents.js":function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=s(r),t=(e=n?(e=s(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==i(e)&&"function"!=typeof e){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.r(t);r=new(function(e){var t=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e);var r=o(n);function n(){var e;if(this instanceof n)return(e=r.call(this)).METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",e.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",e.CMCD_DATA_GENERATED="cmcdDataGenerated",e;throw new TypeError("Cannot call a class as a function")}return n}(r("./src/core/events/EventsBase.js").default));t.default=r},"./src/streaming/metrics/controllers/MetricsCollectionController.js":function(e,t,r){"use strict";r.r(t);var u=r("./src/streaming/metrics/controllers/MetricsController.js"),l=r("./src/streaming/metrics/utils/ManifestParsing.js"),c=r("./src/streaming/metrics/MetricsReportingEvents.js");function n(i){i=i||{};var e,a={},o=this.context,t=i.eventBus,r=i.events;function n(e){var n;e.error||(n=Object.keys(a),(0,l.default)(o).getInstance({adapter:i.adapter,constants:i.constants}).getMetrics(e.manifest).forEach(function(e){var t=JSON.stringify(e);if(a.hasOwnProperty(t))n.splice(t,1);else try{var r=(0,u.default)(o).create(i);r.initialize(e),a[t]=r}catch(e){}}),n.forEach(function(e){a[e].reset(),delete a[e]}),t.trigger(c.default.METRICS_INITIALISATION_COMPLETE))}function s(){Object.keys(a).forEach(function(e){a[e].reset()}),a={}}return e={reset:function(){t.off(r.MANIFEST_UPDATED,n,e),t.off(r.STREAM_TEARDOWN_COMPLETE,s,e)}},t.on(r.MANIFEST_UPDATED,n,e),t.on(r.STREAM_TEARDOWN_COMPLETE,s,e),e}n.__dashjs_factory_name="MetricsCollectionController",t.default=dashjs.FactoryMaker.getClassFactory(n)},"./src/streaming/metrics/controllers/MetricsController.js":function(e,t,r){"use strict";r.r(t);var s=r("./src/streaming/metrics/controllers/RangeController.js"),u=r("./src/streaming/metrics/controllers/ReportingController.js"),l=r("./src/streaming/metrics/controllers/MetricsHandlersController.js");function n(t){t=t||{};var r,n,i,a=this.context;function o(){r&&r.reset(),n&&n.reset(),i&&i.reset()}return{initialize:function(e){try{(i=(0,s.default)(a).create({mediaElement:t.mediaElement})).initialize(e.Range),(n=(0,u.default)(a).create({debug:t.debug,metricsConstants:t.metricsConstants,mediaPlayerModel:t.mediaPlayerModel})).initialize(e.Reporting,i),(r=(0,l.default)(a).create({debug:t.debug,eventBus:t.eventBus,metricsConstants:t.metricsConstants,events:t.events})).initialize(e.metrics,n)}catch(e){throw o(),e}},reset:o}}n.__dashjs_factory_name="MetricsController",t.default=dashjs.FactoryMaker.getClassFactory(n)},"./src/streaming/metrics/controllers/MetricsHandlersController.js":function(e,t,r){"use strict";r.r(t);var i=r("./src/streaming/metrics/metrics/MetricsHandlerFactory.js");function n(e){var t,a=[],r=this.context,n=(e=e||{}).eventBus,o=e.events,s=(0,i.default)(r).getInstance({debug:e.debug,eventBus:e.eventBus,metricsConstants:e.metricsConstants});function u(t){a.forEach(function(e){e.handleNewMetric(t.metric,t.value,t.mediaType)})}return t={initialize:function(e,i){e.split(",").forEach(function(e,t,r){var n;-1!==e.indexOf("(")&&-1===e.indexOf(")")&&(n=r[t+1])&&-1===n.indexOf("(")&&-1!==n.indexOf(")")&&(e+=","+n,delete r[t+1]),(n=s.create(e,i))&&a.push(n)}),n.on(o.METRIC_ADDED,u,t),n.on(o.METRIC_UPDATED,u,t)},reset:function(){n.off(o.METRIC_ADDED,u,t),n.off(o.METRIC_UPDATED,u,t),a.forEach(function(e){return e.reset()}),a=[]}}}n.__dashjs_factory_name="MetricsHandlersController",t.default=dashjs.FactoryMaker.getClassFactory(n)},"./src/streaming/metrics/controllers/RangeController.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/streaming/utils/CustomTimeRanges.js");function i(e){var a,o=!1,t=this.context,s=(e=e||{}).mediaElement;return e={initialize:function(e){e&&e.length&&(e.forEach(function(e){var t=e.starttime,e=t+e.duration;a.add(t,e)}),o=!!e[0]._useWallClockTime)},reset:function(){a.clear()},isEnabled:function(){var e=a.length;if(!e)return!0;for(var t=o?(new Date).getTime()/1e3:s.currentTime,r=0;r<e;r+=1){var n=a.start(r),i=a.end(r);if(n<=t&&t<i)return!0}return!1}},a=(0,n.default)(t).create(),e}i.__dashjs_factory_name="RangeController",t.default=dashjs.FactoryMaker.getClassFactory(i)},"./src/streaming/metrics/controllers/ReportingController.js":function(e,t,r){"use strict";r.r(t);var i=r("./src/streaming/metrics/reporting/ReportingFactory.js");function n(e){var n=[],r=(0,i.default)(this.context).getInstance(e);return{initialize:function(e,t){e.some(function(e){e=r.create(e,t);if(e)return n.push(e),!0})},reset:function(){n.forEach(function(e){return e.reset()}),n=[]},report:function(t,r){n.forEach(function(e){return e.report(t,r)})}}}n.__dashjs_factory_name="ReportingController",t.default=dashjs.FactoryMaker.getClassFactory(n)},"./src/streaming/metrics/metrics/MetricsHandlerFactory.js":function(e,t,r){"use strict";r.r(t);var u=r("./src/streaming/metrics/metrics/handlers/BufferLevelHandler.js"),l=r("./src/streaming/metrics/metrics/handlers/DVBErrorsHandler.js"),c=r("./src/streaming/metrics/metrics/handlers/HttpListHandler.js"),f=r("./src/streaming/metrics/metrics/handlers/GenericMetricHandler.js");function n(n){var e,i=(n=n||{}).debug?n.debug.getLogger(e):{},a=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,o=this.context,s={BufferLevel:u.default,DVBErrors:l.default,HttpList:c.default,PlayList:f.default,RepSwitchList:f.default,TcpList:f.default};return e={create:function(t,e){var r;if(t=t.match(a)){try{(r=s[t[1]](o).create({eventBus:n.eventBus,metricsConstants:n.metricsConstants})).initialize(t[1],e,t[3],t[5])}catch(e){r=null,i.error("MetricsHandlerFactory: Could not create handler for type ".concat(t[1]," with args ").concat(t[3],", ").concat(t[5]," (").concat(e.message,")"))}return r}},register:function(e,t){s[e]=t},unregister:function(e){delete s[e]}}}n.__dashjs_factory_name="MetricsHandlerFactory",t.default=dashjs.FactoryMaker.getSingletonFactory(n)},"./src/streaming/metrics/metrics/handlers/BufferLevelHandler.js":function(e,t,r){"use strict";r.r(t);var f=r("./src/streaming/metrics/utils/HandlerHelpers.js");function n(e){e=e||{};var n,i,a,o,t,r=this.context,s=(0,f.default)(r).getInstance(),u=[],l=e.metricsConstants;function c(){var e=function(){try{return Object.keys(u).map(function(e){return u[e]}).reduce(function(e,t){return e.level<t.level?e:t})}catch(e){return}}();e&&t!==e.t&&(t=e.t,n.report(a,e))}return{initialize:function(e,t,r){t&&(i=s.validateN(r),n=t,a=s.reconstructFullMetricName(e,r),o=setInterval(c,i))},reset:function(){clearInterval(o),i=0,t=n=o=null},handleNewMetric:function(e,t,r){e===l.BUFFER_LEVEL&&(u[r]=t)}}}n.__dashjs_factory_name="BufferLevelHandler",t.default=dashjs.FactoryMaker.getClassFactory(n)},"./src/streaming/metrics/metrics/handlers/DVBErrorsHandler.js":function(e,t,r){"use strict";r.r(t);var o=r("./src/streaming/metrics/MetricsReportingEvents.js");t.default=dashjs.FactoryMaker.getClassFactory(function(e){var r,n=(e=e||{}).eventBus,i=e.metricsConstants;function a(){n.off(o.default.METRICS_INITIALISATION_COMPLETE,a,this),n.trigger(o.default.BECAME_REPORTING_PLAYER)}return{initialize:function(e,t){t&&(r=t,n.on(o.default.METRICS_INITIALISATION_COMPLETE,a,this))},reset:function(){r=null},handleNewMetric:function(e,t){e===i.DVB_ERRORS&&r&&r.report(e,t)}}})},"./src/streaming/metrics/metrics/handlers/GenericMetricHandler.js":function(e,t,r){"use strict";function n(){var r,n;return{initialize:function(e,t){r=e,n=t},reset:function(){n=null,r=void 0},handleNewMetric:function(e,t){e===r&&n&&n.report(r,t)}}}r.r(t),n.__dashjs_factory_name="GenericMetricHandler",t.default=dashjs.FactoryMaker.getClassFactory(n)},"./src/streaming/metrics/metrics/handlers/HttpListHandler.js":function(e,t,r){"use strict";r.r(t);var f=r("./src/streaming/metrics/utils/HandlerHelpers.js");function n(e){e=e||{};var i,a,o,s,u,r=[],l=(0,f.default)(this.context).getInstance(),n=e.metricsConstants;function c(){var e=r;e.length&&i&&i.report(s,e),r=[]}return{initialize:function(e,t,r,n){t&&(a=l.validateN(r),i=t,n&&n.length&&(o=n),s=l.reconstructFullMetricName(e,r,n),u=setInterval(c,a))},reset:function(){clearInterval(u),r=[],i=o=a=u=null},handleNewMetric:function(e,t){e!==n.HTTP_REQUEST||o&&o!==t.type||r.push(t)}}}n.__dashjs_factory_name="HttpListHandler",t.default=dashjs.FactoryMaker.getClassFactory(n)},"./src/streaming/metrics/reporting/ReportingFactory.js":function(e,t,r){"use strict";r.r(t);var u=r("./src/streaming/metrics/reporting/reporters/DVBReporting.js");function n(e){var t,n={"urn:dvb:dash:reporting:2014":u.default},i=this.context,a=(e=e||{}).debug?e.debug.getLogger(t):{},o=e.metricsConstants,s=e.mediaPlayerModel||{};return t={create:function(t,e){var r;try{(r=n[t.schemeIdUri](i).create({metricsConstants:o,mediaPlayerModel:s})).initialize(t,e)}catch(e){r=null,a.error("ReportingFactory: could not create Reporting with schemeIdUri ".concat(t.schemeIdUri," (").concat(e.message,")"))}return r},register:function(e,t){n[e]=t},unregister:function(e){delete n[e]}}}n.__dashjs_factory_name="ReportingFactory",t.default=dashjs.FactoryMaker.getSingletonFactory(n)},"./src/streaming/metrics/reporting/reporters/DVBReporting.js":function(e,t,r){"use strict";r.r(t);var g=r("./src/streaming/metrics/utils/MetricSerialiser.js"),m=r("./src/streaming/metrics/utils/RNG.js"),h=r("./src/streaming/models/CustomParametersModel.js");function n(e){var r,a,n,i,o,s,u,t=this.context,l=[],c=(e=e||{}).metricsConstants;function f(e,t,r){function n(){var e=l.indexOf(i);-1!==e&&(l.splice(e,1),200<=i.status&&i.status<300?t&&t():r&&r())}var i=new XMLHttpRequest;i.withCredentials=a.getXHRWithCredentialsForType(c.HTTP_REQUEST_DVB_REPORTING_TYPE);l.push(i);try{i.open("GET",e),i.onloadend=n,i.onerror=n,i.send()}catch(e){i.onerror()}}function d(){o=i=!1,u=s=null}return e={report:function(t,e){Array.isArray(e)||(e=[e]),o&&u.isEnabled()&&e.forEach(function(e){e=r.serialise(e);t!==c.DVB_ERRORS&&(e="metricname=".concat(t,"&").concat(e)),f(e="".concat(s,"?").concat(e),null,function(){o=!1})})},initialize:function(e,t){if(u=t,!(s=e.dvb_reportingUrl))throw new Error("required parameter missing (dvb:reportingUrl)");i||((t=e.dvb_probability)&&(1e3===t||t/1e3>=n.random())&&(o=!0),i=!0)},reset:function(){d()}},r=(0,g.default)(t).getInstance(),n=(0,m.default)(t).getInstance(),a=(0,h.default)(t).getInstance(),d(),e}n.__dashjs_factory_name="DVBReporting",t.default=dashjs.FactoryMaker.getClassFactory(n)},"./src/streaming/metrics/utils/DVBErrorsTranslator.js":function(e,t,r){"use strict";r.r(t);var g=r("./src/streaming/metrics/vo/DVBErrors.js"),m=r("./src/streaming/metrics/MetricsReportingEvents.js");function n(e){var t,n,r=(e=e||{}).eventBus,i=e.dashMetrics,a=e.metricsConstants,o=e.events;function s(e){var t=new g.default;if(n){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.mpdurl||(t.mpdurl=n.originalUrl||n.url),t.terror||(t.terror=new Date),i.addDVBErrors(t)}}function u(e){e.error||(n=e.manifest)}function l(e){s({errorcode:g.default.BASE_URL_CHANGED,servicelocation:e.entry})}function c(){s({errorcode:g.default.BECAME_REPORTER})}function f(e){e.metric===a.HTTP_REQUEST&&(0===(e=e.value).responsecode||null==e.responsecode||400<=e.responsecode||e.responsecode<100||600<=e.responsecode)&&s({errorcode:e.responsecode||g.default.CONNECTION_ERROR,url:e.url,terror:e.tresponse,servicelocation:e._serviceLocation})}function d(e){var t;switch(e.error?e.error.code:0){case MediaError.MEDIA_ERR_NETWORK:t=g.default.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:t=g.default.CORRUPT_MEDIA_OTHER;break;default:return}s({errorcode:t})}return t={initialize:function(){r.on(o.MANIFEST_UPDATED,u,t),r.on(o.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,l,t),r.on(o.METRIC_ADDED,f,t),r.on(o.METRIC_UPDATED,f,t),r.on(o.PLAYBACK_ERROR,d,t),r.on(m.default.BECAME_REPORTING_PLAYER,c,t)},reset:function(){r.off(o.MANIFEST_UPDATED,u,t),r.off(o.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,l,t),r.off(o.METRIC_ADDED,f,t),r.off(o.METRIC_UPDATED,f,t),r.off(o.PLAYBACK_ERROR,d,t),r.off(m.default.BECAME_REPORTING_PLAYER,c,t)}}}n.__dashjs_factory_name="DVBErrorsTranslator",t.default=dashjs.FactoryMaker.getSingletonFactory(n)},"./src/streaming/metrics/utils/HandlerHelpers.js":function(e,t,r){"use strict";function n(){return{reconstructFullMetricName:function(e,t,r){return t&&(e+="("+t,r&&r.length&&(e+=","+r),e+=")"),e},validateN:function(e){if(!e)throw new Error("missing n");if(isNaN(e))throw new Error("n is NaN");if(e<0)throw new Error("n must be positive");return e}}}r.r(t),n.__dashjs_factory_name="HandlerHelpers",t.default=dashjs.FactoryMaker.getSingletonFactory(n)},"./src/streaming/metrics/utils/ManifestParsing.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/streaming/metrics/vo/Metrics.js"),f=r("./src/streaming/metrics/vo/Range.js"),i=r("./src/streaming/metrics/vo/Reporting.js");function a(e){var l=(e=e||{}).adapter,c=e.constants;return{getMetrics:function(u){var t=[];return u&&u.Metrics_asArray&&u.Metrics_asArray.forEach(function(e){var o=new n.default,s=l.getIsDynamic(u);e.hasOwnProperty("metrics")&&(o.metrics=e.metrics,e.Range_asArray&&e.Range_asArray.forEach(function(e){var t,r,n,i,a=new f.default;a.starttime=(t=u,n=e,i=0,(r=s)?i=l.getAvailabilityStartTime(t)/1e3:(r=l.getRegularPeriods(t)).length&&(i=r[0].start),t=i,n&&n.hasOwnProperty(c.START_TIME)&&(t+=n.starttime),t),e.hasOwnProperty("duration")?a.duration=e.duration:a.duration=l.getDuration(u),a._useWallClockTime=s,o.Range.push(a)}),e.Reporting_asArray&&(e.Reporting_asArray.forEach(function(e){var t=new i.default;e.hasOwnProperty(c.SCHEME_ID_URI)&&(t.schemeIdUri=e.schemeIdUri,e.hasOwnProperty("value")&&(t.value=e.value),e.hasOwnProperty(c.DVB_REPORTING_URL)&&(t.dvb_reportingUrl=e[c.DVB_REPORTING_URL]),e.hasOwnProperty(c.DVB_PROBABILITY)&&(t.dvb_probability=e[c.DVB_PROBABILITY]),o.Reporting.push(t))}),t.push(o)))}),t}}}a.__dashjs_factory_name="ManifestParsing",t.default=dashjs.FactoryMaker.getSingletonFactory(a)},"./src/streaming/metrics/utils/MetricSerialiser.js":function(e,t,r){"use strict";function n(){return{serialise:function r(e){var t,n,i=[],a=[];for(t in e)if(e.hasOwnProperty(t)&&0!==t.indexOf("_")){if(null==(n=e[t])&&(n=""),Array.isArray(n)){if(!n.length)continue;a=[],n.forEach(function(e){var t="Object"!==Object.prototype.toString.call(e).slice(8,-1);a.push(t?e:r(e))}),n=a.map(encodeURIComponent).join(",")}else"string"==typeof n?n=encodeURIComponent(n):n instanceof Date?n=n.toISOString():"number"==typeof n&&(n=Math.round(n));i.push(t+"="+n)}return i.join("&")}}}r.r(t),n.__dashjs_factory_name="MetricSerialiser",t.default=dashjs.FactoryMaker.getSingletonFactory(n)},"./src/streaming/metrics/utils/RNG.js":function(e,t,r){"use strict";function n(){var n,i,e,a=window.crypto||window.msCrypto,t=Uint32Array,o=Math.pow(2,8*t.BYTES_PER_ELEMENT)-1,r=10;function s(){a&&(n=n||new t(r),a.getRandomValues(n),i=0)}return e={random:function(e,t){var r;return e=e||0,t=t||1,a?(i===n.length&&s(),r=n[i]/o,i+=1):r=Math.random(),r*(t-e)+e}},s(),e}r.r(t),n.__dashjs_factory_name="RNG",t.default=dashjs.FactoryMaker.getSingletonFactory(n)},"./src/streaming/metrics/vo/DVBErrors.js":function(e,t,r){"use strict";r.r(t);function n(){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null}n.SSL_CONNECTION_FAILED_PREFIX="SSL",n.DNS_RESOLUTION_FAILED="C00",n.HOST_UNREACHABLE="C01",n.CONNECTION_REFUSED="C02",n.CONNECTION_ERROR="C03",n.CORRUPT_MEDIA_ISOBMFF="M00",n.CORRUPT_MEDIA_OTHER="M01",n.BASE_URL_CHANGED="F00",n.BECAME_REPORTER="S00",t.default=n},"./src/streaming/metrics/vo/Metrics.js":function(e,t,r){"use strict";r.r(t),t.default=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.metrics="",this.Range=[],this.Reporting=[]}},"./src/streaming/metrics/vo/Range.js":function(e,t,r){"use strict";r.r(t),t.default=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.starttime=0,this.duration=1/0,this._useWallClockTime=!1}},"./src/streaming/metrics/vo/Reporting.js":function(e,t,r){"use strict";r.r(t);t.default=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.schemeIdUri="",this.value="",this.dvb_reportingUrl="",this.dvb_probability=1e3}},"./src/streaming/models/BaseURLTreeModel.js":function(e,t,r){"use strict";r.r(t);var l=r("./src/streaming/utils/ObjectUtils.js"),r=r("./src/core/FactoryMaker.js");function c(e,t){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.data={baseUrls:e||null,selectedIdx:t||f},this.children=[]}var f=NaN;function n(){var i,a,r,e=this.context,n=(0,l.default)(e).getInstance();function o(e,t,r){r=s(r);e[t]?n.areEqual(r,e[t].data.baseUrls)||(e[t].data.baseUrls=r,e[t].data.selectedIdx=f):e[t]=new c(r)}function t(e){if(!a||!a.hasOwnProperty("getBaseURLsFromElement")||!a.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously");var t=s(e);n.areEqual(t,i.data.baseUrls)||(i.data.baseUrls=t,i.data.selectedIdx=f),e&&e.Period_asArray&&e.Period_asArray.forEach(function(e,n){o(i.children,n,e),e.AdaptationSet_asArray&&e.AdaptationSet_asArray.forEach(function(e,r){o(i.children[n].children,r,e),e.Representation_asArray&&e.Representation_asArray.sort(a.getRepresentationSortFunction()).forEach(function(e,t){o(i.children[n].children[r].children,t,e)})})})}function s(e){var e=a.getBaseURLsFromElement(e),t=r.getSynthesizedBaseUrlElements(e);return e=t&&0<t.length?e.concat(t):e}function u(){i=new c}return e={reset:u,update:function(e){t(e)},getForPath:function(e){var t=i,r=[t.data];return e&&e.forEach(function(e){(t=t.children[e])&&r.push(t.data)}),r.filter(function(e){return e.baseUrls.length})},invalidateSelectedIndexes:function(t){!function t(r,e){e=e||i;r(e.data),e.children&&e.children.forEach(function(e){return t(r,e)})}(function(e){isNaN(e.selectedIdx)||t===e.baseUrls[e.selectedIdx].serviceLocation&&(e.selectedIdx=f)})},setConfig:function(e){e.adapter&&(a=e.adapter),e.contentSteeringController&&(r=e.contentSteeringController)},getBaseUrls:s},u(),e}n.__dashjs_factory_name="BaseURLTreeModel",t.default=r.default.getClassFactory(n)},"./src/streaming/models/CmcdModel.js":function(e,t,r){"use strict";r.r(t);var h=r("./src/core/EventBus.js"),p=r("./src/streaming/MediaPlayerEvents.js"),y=r("./src/streaming/metrics/MetricsReportingEvents.js"),n=r("./src/core/FactoryMaker.js"),N=r("./src/core/Settings.js"),D=r("./src/streaming/constants/Constants.js"),M=r("./src/streaming/vo/metrics/HTTPRequest.js"),O=r("./src/dash/models/DashManifestModel.js"),P=r("./src/core/Utils.js");function L(e,t){var r,n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,o=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){o=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(o)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var F="m",x="a",j="v",k="i",U="c",B="tt",G="k",q="o",H="d",Y="s",V="v",K="l";function i(){var n,e,E,_,v,T,b,S,A,R,t=this.context,s=(0,h.default)(t).getInstance(),I=(0,N.default)(t).getInstance();function r(){E={pr:1,nor:null,st:null,sf:null,sid:"".concat(P.default.generateUuid()),cid:null},A={},S={},R={},a()}function i(){a()}function a(){var e;!T||(e=T.getStreamController())&&"function"==typeof e.getActiveStream&&(e=e.getActiveStream())&&(b=e.getProcessors())}function u(e,t){var r,n={},i=L(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;e[a]&&(n[a]=e[a])}}catch(e){i.e(e)}finally{i.f()}return n}function l(e){var t=I.get().streaming.cmcd.enabledKeys;return e.filter(function(e){return t.includes(e)})}function c(e){try{var t,r,n,i,a,o,s,u,l,c,f,d,g;return e.type===M.HTTPRequest.MPD_TYPE?((y=w()).ot=F,y):e.type===M.HTTPRequest.MEDIA_SEGMENT_TYPE?(t=e.mediaType,R.hasOwnProperty(t)||(R[t]=!1),S.hasOwnProperty(t)||(S[t]=!1),A.hasOwnProperty(t)||(A[t]=!1),r=e,i=w(),a=function(e){try{var t=e.quality,r=e.mediaInfo.bitrateList;return parseInt(r[t].bandwidth/1e3)}catch(e){return null}}(r),o=function(e){try{return isNaN(e.duration)?NaN:Math.round(1e3*e.duration)}catch(e){return null}}(r),s=function(e){try{return 100*parseInt(_.getThroughputHistory().getSafeAverageThroughput(e)/100)}catch(e){return null}}(r.mediaType),u=function(e){try{var t=E.pr,r=v.getCurrentBufferLevel(e);return isNaN(t)||isNaN(r)?null:100*parseInt(r/t*10)}catch(e){return null}}(r.mediaType),l=C(r.mediaType),c=function(e){try{var t=_.getTopBitrateInfoFor(e);return Math.round(t.bitrate/1e3)}catch(e){return null}}(r.mediaType),f=E.pr,d=function(e){if(b&&0!==b.length){var t,r=L(b);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(n.getType()===e)return n.probeNextRequest()}}catch(e){r.e(e)}finally{r.f()}}}(r.mediaType),r.mediaType===D.default.VIDEO&&(n=j),r.mediaType===D.default.AUDIO&&(n=x),r.mediaType===D.default.TEXT&&(n="application/mp4"===r.mediaInfo.mimeType?B:U),g=(g=I.get().streaming.cmcd.rtp)||function(e){try{var t=T.getPlaybackRate(),r=(t=t||1,e.quality),n=e.mediaType,i=e.mediaInfo,a=e.duration;if(!i)return NaN;var o=C(n);0===o&&(o=500);var s=i.bitrateList[r].bandwidth*a/1e3/(o/t/1e3),u=I.get().streaming.cmcd.rtpSafetyFactor&&!isNaN(I.get().streaming.cmcd.rtpSafetyFactor)?I.get().streaming.cmcd.rtpSafetyFactor:5;return 100*(parseInt(s*u/100)+1)}catch(e){return NaN}}(r),isNaN(g)||(i.rtp=g),d&&(r.url!==d.url?i.nor=encodeURIComponent(P.default.getRelativeUrl(r.url,d.url)):d.range&&(i.nrr=d.range)),a&&(i.br=a),n&&(i.ot=n),isNaN(o)||(i.d=o),isNaN(s)||(i.mtp=s),isNaN(u)||(i.dl=u),isNaN(l)||(i.bl=l),isNaN(c)||(i.tb=c),isNaN(f)||1===f||(i.pr=f),A[r.mediaType]&&(i.bs=!0,A[r.mediaType]=!1),!S[r.mediaType]&&R[r.mediaType]||(i.su=!0,S[r.mediaType]=!1,R[r.mediaType]=!0),i):e.type===M.HTTPRequest.INIT_SEGMENT_TYPE?((p=w()).ot=k,p.su=!0,p):e.type===M.HTTPRequest.OTHER_TYPE||e.type===M.HTTPRequest.XLINK_EXPANSION_TYPE?((h=w()).ot=q,h):e.type===M.HTTPRequest.LICENSE?((m=w()).ot=G,m):null}catch(e){return null}var m,h,p,y}function w(){var e={},t=(I.get().streaming.cmcd.cid?I.get().streaming.cmcd:E).cid;return e.v=1,e.sid=(I.get().streaming.cmcd.sid?I.get().streaming.cmcd:E).sid,e.sid="".concat(e.sid),t&&(e.cid="".concat(t)),isNaN(E.pr)||1===E.pr||null===E.pr||(e.pr=E.pr),E.st&&(e.st=E.st),E.sf&&(e.sf=E.sf),e}function C(e){try{var t=v.getCurrentBufferLevel(e);return isNaN(t)?null:100*parseInt(10*t)}catch(e){return null}}function o(e){try{E.pr=e.playbackRate}catch(e){}}function f(e){try{var t=n.getIsDynamic(e.data)?K:V,r=e.protocol&&"MSS"===e.protocol?Y:H;E.st="".concat(t),E.sf="".concat(r)}catch(e){}}function d(e){try{e.state&&e.mediaType&&e.state===p.default.BUFFER_EMPTY&&(A[e.mediaType]||(A[e.mediaType]=!0),S[e.mediaType]||(S[e.mediaType]=!0))}catch(e){}}function g(){for(var e in A)A.hasOwnProperty(e)&&(A[e]=!0);for(var t in S)S.hasOwnProperty(t)&&(S[t]=!0)}function m(n){try{if(!n)return null;var e=Object.keys(n).sort(function(e,t){return e.localeCompare(t)}),i=e.length,t=e.reduce(function(e,t,r){return"v"===t&&1===n[t]||("string"==typeof n[t]&&"ot"!==t&&"sf"!==t&&"st"!==t?e+="".concat(t,"=").concat(JSON.stringify(n[t])):e+="".concat(t,"=").concat(n[t]),r<i-1&&(e+=",")),e},"");return t=(t=t.replace(/=true/g,"")).replace(/,\s*$/,"")}catch(e){return null}}return e={getQueryParameter:function(e){try{var t,r;return I.get().streaming.cmcd&&I.get().streaming.cmcd.enabled?(r=m(function(r){try{var t=I.get().streaming.cmcd.enabledKeys;return Object.keys(r).filter(function(e){return t.includes(e)}).reduce(function(e,t){return e[t]=r[t],e},{})}catch(e){return r}}(t=c(e))),s.trigger(y.default.CMCD_DATA_GENERATED,{url:e.url,mediaType:e.mediaType,cmcdData:t,cmcdString:r}),{key:"CMCD",value:r}):null}catch(e){return null}},getHeaderParameters:function(e){try{var t,r,n,i,a,o;return I.get().streaming.cmcd&&I.get().streaming.cmcd.enabled?(r=u(t=c(e),l(["br","d","ot","tb"])),n=u(t,l(["bl","dl","mtp","nor","nrr","su"])),i=u(t,l(["bs","rtp"])),a=u(t,l(["cid","pr","sf","sid","st","v"])),o={"CMCD-Object":m(r),"CMCD-Request":m(n),"CMCD-Status":m(i),"CMCD-Session":m(a)},s.trigger(y.default.CMCD_DATA_GENERATED,{url:e.url,mediaType:e.mediaType,cmcdData:t,headers:o}),o):null}catch(e){return null}},setConfig:function(e){e&&(e.abrController&&(_=e.abrController),e.dashMetrics&&(v=e.dashMetrics),e.playbackController&&(T=e.playbackController))},reset:function(){s.off(p.default.PLAYBACK_RATE_CHANGED,o,this),s.off(p.default.MANIFEST_LOADED,f,this),s.off(p.default.BUFFER_LEVEL_STATE_CHANGED,d,e),s.off(p.default.PLAYBACK_SEEKED,g,e),r()},initialize:function(){s.on(p.default.PLAYBACK_RATE_CHANGED,o,e),s.on(p.default.MANIFEST_LOADED,f,e),s.on(p.default.BUFFER_LEVEL_STATE_CHANGED,d,e),s.on(p.default.PLAYBACK_SEEKED,g,e),s.on(p.default.PERIOD_SWITCH_COMPLETED,i,e)}},n=(0,O.default)(t).getInstance(),r(),e}i.__dashjs_factory_name="CmcdModel",t.default=n.default.getSingletonFactory(i)},"./src/streaming/models/CmsdModel.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/core/EventBus.js"),p=r("./src/core/events/Events.js"),a=r("./src/core/Debug.js");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){y=function(e,t){return new r(e,void 0,t)};var n=c(RegExp),i=RegExp.prototype,a=new WeakMap;function r(e,t,r){t=n.call(this,e,t);return a.set(t,r||a.get(e)),t}var o=r,s=n;if("function"!=typeof s&&null!==s)throw new TypeError("Super expression must either be null or a function");function u(r,e){var n=a.get(e);return Object.keys(n).reduce(function(e,t){return e[t]=r[n[t]],e},Object.create(null))}return o.prototype=Object.create(s&&s.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),s&&f(o,s),r.prototype.exec=function(e){e=i.exec.call(this,e);return e&&(e.groups=u(e,this)),e},r.prototype[Symbol.replace]=function(e,t){var r,n;return"string"==typeof t?(r=a.get(this),i[Symbol.replace].call(this,e,t.replace(/\$<([^>]+)>/g,function(e,t){return"$"+r[t]}))):"function"==typeof t?(n=this,i[Symbol.replace].call(this,e,function(){var e=[];return e.push.apply(e,arguments),"object"!==l(e[e.length-1])&&e.push(u(e,n)),t.apply(this,e)})):i[Symbol.replace].call(this,e,t)},y.apply(this,arguments)}function c(e){var r="function"==typeof Map?new Map:void 0;return(c=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return o(e,arguments,s(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),f(t,e)})(e)}function o(e,t,r){return(o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),1}catch(e){return}}()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);t=new(Function.bind.apply(e,n));return r&&f(t,r.prototype),t}).apply(null,arguments)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u="dynamic",E="etp",_="mb",v="ot",T="rd",b="rtt",S="o",A="stream",R=[_,"st","sf","v"],I={video:"v",audio:"a",text:"tt",stream:A},w=/^[-0-9]/;function d(){var e,l,c,f,t=this.context,d=(0,i.default)(t).getInstance();function r(){c={},f={}}function g(t){t&&Object.keys(t).forEach(function(e){R.includes(e)||delete t[e]})}function m(e){return!e||"false"!==e.toLowerCase()&&(w.test(e)?parseInt(e,10):e.replace(/["]+/g,""))}function h(e){return I[e]||S}function n(e,t,r){e="static"===e?c:f,t=e[t]||{},e=e[A]||{};return t[r]||e[r]}return e={setConfig:function(){},initialize:function(){},reset:function(){r()},parseResponseHeaders:function(e,t){for(var r=null,n=null,i=e.split("\r\n"),a=i.length-1;0<=a;a--){var o=i[a].match(y(/^((?:(?!:)[\s\S])*):[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(.*)$/,{key:1,value:2}));if(o&&o.groups){var s=o.groups.key.toLowerCase(),u=o.groups.value;switch(s){case"cmsd-static":r=function(e){try{for(var t={},r=e.split(","),n=0;n<r.length;n++){var i=r[n].split("="),a=i[0],o=m(i[1]);t[a]=o}return t}catch(e){l.error("Failed to parse CMSD-Static response header value:",e)}}(u),d.trigger(p.default.CMSD_STATIC_HEADER,r);break;case"cmsd-dynamic":n=n||function(e){try{for(var t={},r=e.split(","),n=r[r.length-1].split(";"),i=1;i<n.length;i++){var a=n[i].split("="),o=a[0],s=m(a[1]);t[o]=s}return t}catch(e){return l.error("Failed to parse CMSD-Dynamic response header value:",e),[]}}(u)}}}return e=A,r&&r[v]?e=r[v]:t&&(e=h(t)),g(c[e]),g(f[e]),r&&(c[e]=Object.assign(c[e]||{},r)),n&&(f[e]=Object.assign(f[e]||{},n)),{static:r,dynamic:n}},getMaxBitrate:function(e){return e=h(e),(e=n(u,e,_))||-1},getEstimatedThroughput:function(e){return e=h(e),(e=n(u,e,E))||null},getResponseDelay:function(e){return e=h(e),(e=n(u,e,T))||null},getRoundTripTime:function(e){return e=h(e),(e=n(u,e,b))||null}},l=(0,a.default)(t).getInstance().getLogger(e),r(),e}d.__dashjs_factory_name="CmsdModel",t.default=n.default.getSingletonFactory(d)},"./src/streaming/models/CustomParametersModel.js":function(e,t,r){"use strict";r.r(t);var m=r("./src/dash/vo/UTCTiming.js"),n=r("./src/core/FactoryMaker.js"),h=r("./src/core/Settings.js"),p=r("./src/streaming/utils/SupervisorTools.js"),y=r("./src/streaming/rules/abr/ABRRulesCollection.js"),E=r("./src/streaming/constants/Constants.js");function i(){var i,n,t,r,a,o,s,e=this.context,u=(0,h.default)(e).getInstance();function l(){t=[],r=[],a=[],s=[],o=null,i=[]}function c(e,r){var n=-1;e.some(function(e,t){if(e===r)return n=t,!0}),n<0||e.splice(n,1)}function f(e){for(var t=0;t<s.length;t++)if(s[t].rulename===e)return t;return-1}function d(e,t){g(e,t);var r=new m.default;r.schemeIdUri=e,r.value=t,i.push(r)}function g(r,n){(0,p.checkParameterType)(r,"string"),(0,p.checkParameterType)(n,"string"),i.forEach(function(e,t){e.schemeIdUri===r&&e.value===n&&i.splice(t,1)})}return n={default:!(e={getCustomInitialTrackSelectionFunction:function(){return o},setCustomInitialTrackSelectionFunction:function(e){o=e},resetCustomInitialTrackSelectionFunction:function(){o=null},getLicenseResponseFilters:function(){return r},getLicenseRequestFilters:function(){return t},getCustomCapabilitiesFilters:function(){return a},registerCustomCapabilitiesFilter:function(e){a.push(e)},registerLicenseResponseFilter:function(e){r.push(e)},registerLicenseRequestFilter:function(e){t.push(e)},unregisterCustomCapabilitiesFilter:function(e){c(a,e)},unregisterLicenseResponseFilter:function(e){c(r,e)},unregisterLicenseRequestFilter:function(e){c(t,e)},addAbrCustomRule:function(e,t,r){if("string"!=typeof e||e!==y.default.ABANDON_FRAGMENT_RULES&&e!==y.default.QUALITY_SWITCH_RULES||"string"!=typeof t)throw E.default.BAD_ARGUMENT_ERROR;var n=f(t);-1===n?s.push({type:e,rulename:t,rule:r}):(s[n].type=e,s[n].rule=r)},removeAllAbrCustomRule:function(){s=[]},removeAbrCustomRule:function(e){e?-1!==(e=f(e))&&s.splice(e,1):s=[]},getAbrCustomRules:function(){return s},addUTCTimingSource:d,removeUTCTimingSource:g,getUTCTimingSources:function(){return i},clearDefaultUTCTimingSources:function(){i=[]},restoreDefaultUTCTimingSources:function(){var e=u.get().streaming.utcSynchronization.defaultTimingSource;d(e.scheme,e.value)},setXHRWithCredentialsForType:function t(e,r){e?n[e]=!!r:Object.keys(n).forEach(function(e){t(e,r)})},getXHRWithCredentialsForType:function(e){return void 0===(e=n[e])?n.default:e},setConfig:function(){},reset:function(){l()}})},l(),e}i.__dashjs_factory_name="CustomParametersModel",t.default=n.default.getSingletonFactory(i)},"./src/streaming/models/FragmentModel.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/core/FactoryMaker.js"),v=r("./src/streaming/vo/FragmentRequest.js"),T="loading",b="executed";function i(e){var t,a,i,r=(e=e||{}).eventBus,n=e.events,o=e.dashMetrics,s=e.fragmentLoader,u=e.debug,l=e.streamInfo,c=e.type;function f(n){var i;return!!n&&(i=!1,a.some(function(e){if(t=n,r=e,!isNaN(t.index)&&t.startTime===r.startTime&&t.adaptationIndex===r.adaptationIndex&&t.type===r.type||(t=n,r=e,isNaN(t.index)&&isNaN(r.index)&&t.quality===r.quality)||(t=e,(r=n).action===v.default.ACTION_COMPLETE&&r.action===t.action))return i=!0;var t,r}),i)}function d(e){return isNaN(e.duration)?.25:Math.min(e.duration/8,.5)}function g(r){a=a.filter(function(e){var t=d(e);return isNaN(e.startTime)||void 0!==r&&e.startTime>=r-t})}function m(r,n){n<=r+.5||(a=a.filter(function(e){var t=d(e);return isNaN(e.startTime)||e.startTime>=n-t||isNaN(e.duration)||e.startTime+e.duration<=r+t}))}function h(e,t){o.addSchedulingInfo(e,t),o.addRequestsQueue(e.mediaType,i,a)}function p(e){e.sender===s&&(i.splice(i.indexOf(e.request),1),e.response&&!e.error&&a.push(e.request),h(e.request,e.error?"failed":b),r.trigger(n.FRAGMENT_LOADING_COMPLETED,{request:e.request,response:e.response,error:e.error,sender:this},{streamId:l.id,mediaType:c}))}function y(e){e.sender===s&&r.trigger(n.FRAGMENT_LOADING_PROGRESS,{request:e.request,response:e.response,error:e.error,sender:this},{streamId:l.id,mediaType:c})}function E(e){e.sender===s&&r.trigger(n.FRAGMENT_LOADING_ABANDONED,{request:e.request},{streamId:l.id,mediaType:c})}function _(){a=[],i=[]}return t=u.getLogger(e={getStreamId:function(){return l.id},getType:function(){return c},getRequests:function(t){var e=t?t.state instanceof Array?t.state:[t.state]:[],r=[];return e.forEach(function(e){e=function(e){var t;switch(e){case T:t=i;break;case b:t=a;break;default:t=[]}return t}(e);r=r.concat(function(e,r){if(r.hasOwnProperty("time"))return[function(e,t,r){for(var n=e.length-1;0<=n;n--){var i=e[n],a=i.startTime,o=a+i.duration;if(r=isNaN(r)?d(i):r,!isNaN(a)&&!isNaN(o)&&a<=t+r&&t-r<o||isNaN(a)&&isNaN(t))return i}return null}(e,r.time,r.threshold)];return e.filter(function(e){for(var t in r)if("state"!==t&&r.hasOwnProperty(t)&&e[t]!=r[t])return!1;return!0})}(e,t))}),r},isFragmentLoaded:f,isFragmentLoadedOrPending:function(e){var t,r=!1,n=0;if(!(r=f(e)))for(n=0;n<i.length;n++)t=i[n],e.url===t.url&&e.startTime===t.startTime&&(r=!0);return r},removeExecutedRequestsBeforeTime:g,removeExecutedRequestsAfterTime:function(t){a=a.filter(function(e){return isNaN(e.startTime)||void 0!==t&&e.startTime<t})},syncExecutedRequestsWithBufferedRange:function(e,t){if(e&&0!==e.length){for(var r=0,n=0,i=e.length;n<i;n++)m(r,e.start(n)),r=e.end(n);0<t&&m(r,t)}else g()},abortRequests:function(){t.debug("abort requests"),s.abort(),i=[]},executeRequest:function(e){e.action===v.default.ACTION_DOWNLOAD?(h(e,T),i.push(e),e=e,r.trigger(n.FRAGMENT_LOADING_STARTED,{request:e},{streamId:l.id,mediaType:c}),s.load(e)):t.warn("Unknown request action.")},reset:function(){r.off(n.LOADING_COMPLETED,p,this),r.off(n.LOADING_DATA_PROGRESS,y,this),r.off(n.LOADING_ABANDONED,E,this),s&&s.reset(),_()},resetInitialSettings:_,addExecutedRequest:function(e){a.push(e)}}),_(),r.on(n.LOADING_COMPLETED,p,e),r.on(n.LOADING_DATA_PROGRESS,y,e),r.on(n.LOADING_ABANDONED,E,e),e}i.__dashjs_factory_name="FragmentModel";r=n.default.getClassFactory(i);r.FRAGMENT_MODEL_LOADING=T,r.FRAGMENT_MODEL_EXECUTED=b,r.FRAGMENT_MODEL_CANCELED="canceled",r.FRAGMENT_MODEL_FAILED="failed",n.default.updateClassFactory(i.__dashjs_factory_name,r),t.default=r},"./src/streaming/models/LowLatencyThroughputModel.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/core/Debug.js"),r=r("./src/core/FactoryMaker.js");function i(){var e,c,t=this.context,f={};function r(){c=(0,n.default)(t).getInstance().getLogger(e)}function d(e){var t,r=!0,n=e.reduce(function(e,t){return e+t.bufferLevelAtSegmentEnd},0)/e.length;return e.forEach(function(e){Math.abs(e.bufferLevelAtSegmentEnd/e.bufferLevelAtSegmentStart)<.95&&(r=!1),e.bufferLevelAtSegmentEnd/n<.8&&(r=!1),t?t>e.bitrate&&(r=!1):t=e.bitrate}),r}return e={setup:r,addMeasurement:function(t,e,r,n,i){t&&t.mediaType&&!f[t.mediaType]&&(f[t.mediaType]=[]);var a=t.mediaInfo.bitrateList.find(function(e){return e.id===t.representationId});f[t.mediaType].push({index:t.index,repId:t.representationId,mediaType:t.mediaType,requestTimeMS:n,adjustedAvailabilityStartTimeMS:t.availabilityStartTime.getTime(),segDurationMS:1e3*t.duration,chunksDurationMS:r.reduce(function(e,t){return e+t.chunkDownloadDurationMS},0),segmentBytes:r.reduce(function(e,t){return e+t.chunkBytes},0),bitrate:a&&a.bandwidth,bitrateList:t.mediaInfo.bitrateList,chunkMeasurements:r,fetchDownloadDurationMS:e,throughputCapacityDelayMS:i,getEstimatedBufferLevel:function(e){for(var t={},r=0,n=0,i=0,a=0,o=e.length,s=0;s<o;++s)r+=e[s].chunkDownloadTimeRelativeMS,n+=e[s].bufferLevel,i+=e[s].chunkDownloadTimeRelativeMS*e[s].bufferLevel,a+=e[s].chunkDownloadTimeRelativeMS*e[s].chunkDownloadTimeRelativeMS;return t.m=(i-r*n/o)/(a-r*r/o),t.b=n/o-t.m*r/o,function(e){return t.m*e+t.b}}(r.slice(1))}),10<f[t.mediaType].length&&f[t.mediaType].shift()},getThroughputCapacityDelayMS:function(e,t){return(e=f[e.mediaType]&&f[e.mediaType].slice(-3))&&!(e.length<3)&&d(e)?250<t/4?250:t/4:0},getEstimatedDownloadDurationMS:function(e){var t=f[e.mediaType].slice(-1).pop(),e=f[e.mediaType].slice(-3),r=t.chunkMeasurements.slice(-1).pop().chunkDownloadTimeRelativeMS;t.bufferLevelAtSegmentStart=t.getEstimatedBufferLevel(r/2),t.bufferLevelAtSegmentEnd=t.getEstimatedBufferLevel(r);e=(r=d(e))?.6:.8;if(t.isBufferStable&&1.05*t.segDurationMS<t.fetchDownloadDurationMS)return t.fetchDownloadDurationMS;if(!r||t.segDurationMS<t.fetchDownloadDurationMS)return.8*t.fetchDownloadDurationMS;if(t.adjustedAvailabilityStartTimeMS<=t.requestTimeMS+t.throughputCapacityDelayMS-t.segDurationMS)return.8*t.fetchDownloadDurationMS;for(var n=t.requestTimeMS+t.throughputCapacityDelayMS-t.adjustedAvailabilityStartTimeMS,i=0,a=0,o=0,s=0;s<t.chunkMeasurements.length;s++){var u=t.chunkMeasurements[s];if(n<a+u.chunkDownloadDurationMS)break;a+=u.chunkDownloadDurationMS,i+=u.chunkBytes,o++}if(n<0&&c.warn("request time was before adjusted availibitly start time"),i&&a&&o>.2*t.chunkMeasurements.length)return r=t.segmentBytes/(i/a),t.fetchDownloadDurationMS<r?t.fetchDownloadDurationMS*e:r*e;var l=t.bitrate;return t.bitrateList.some(function(e){if(e.bandwidth>t.bitrate)return l=e.bandwidth,!0}),l===t.bitrate?t.fetchDownloadDurationMS*e:e*t.segmentBytes*8*1e3/l}},r(),e}i.__dashjs_factory_name="LowLatencyThroughputModel",t.default=r.default.getSingletonFactory(i)},"./src/streaming/models/ManifestModel.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/core/EventBus.js"),i=r("./src/core/events/Events.js"),r=r("./src/core/FactoryMaker.js");function a(){var t,e=this.context,r=(0,n.default)(e).getInstance();return{getValue:function(){return t},setValue:function(e){(t=e)&&r.trigger(i.default.MANIFEST_LOADED,{data:e})}}}a.__dashjs_factory_name="ManifestModel",t.default=r.default.getSingletonFactory(a)},"./src/streaming/models/MediaPlayerModel.js":function(e,t,r){"use strict";r.r(t);var l=r("./src/core/Debug.js"),n=r("./src/core/FactoryMaker.js"),c=r("./src/core/Settings.js");function i(){var e,r,n,i,t=this.context,a=(0,c.default)(t).getInstance();function o(e,t){return isNaN(e)?0:0<e?(t&&r.warn("Supplied minimum playback rate is a positive value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):e<-.5?(t&&r.warn("Supplied minimum playback rate is out of range and will be limited to ".concat(-.5,": ").concat(-50,"% playback speed.")),-.5):e}function s(e,t){return isNaN(e)?0:e<0?(t&&r.warn("Supplied maximum playback rate is a negative value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):1<e?(t&&r.warn("Supplied maximum playback rate is out of range and will be limited to ".concat(1,": ").concat(200,"% playback speed.")),1):e}function u(){var e=0<a.get().streaming.buffer.stableBufferTime?a.get().streaming.buffer.stableBufferTime:a.get().streaming.buffer.fastSwitchEnabled?20:12,t=n.getLiveDelay();return!isNaN(t)&&0<t?Math.min(e,t):e}return e={getCatchupMaxDrift:function(){if(!isNaN(a.get().streaming.liveCatchup.maxDrift)&&0<a.get().streaming.liveCatchup.maxDrift)return a.get().streaming.liveCatchup.maxDrift;var e=i.getServiceDescriptionSettings();return e&&e.liveCatchup&&!isNaN(e.liveCatchup.maxDrift)&&0<e.liveCatchup.maxDrift?e.liveCatchup.maxDrift:12},getCatchupModeEnabled:function(){return null!==a.get().streaming.liveCatchup.enabled?a.get().streaming.liveCatchup.enabled:n.getInitialCatchupModeActivated()},getStableBufferTime:u,getInitialBufferLevel:function(){var e=a.get().streaming.buffer.initialBufferLevel;return isNaN(e)||e<0?0:Math.min(u(),e)},getRetryAttemptsForType:function(e){var t=isNaN(a.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:a.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return n.getLowLatencyModeEnabled()?a.get().streaming.retryAttempts[e]*t:a.get().streaming.retryAttempts[e]},getRetryIntervalsForType:function(e){var t=isNaN(a.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:a.get().streaming.retryIntervals.lowLatencyReductionFactor;return n.getLowLatencyModeEnabled()?a.get().streaming.retryIntervals[e]/t:a.get().streaming.retryIntervals[e]},getCatchupPlaybackRates:function(e){var t=a.get().streaming.liveCatchup.playbackRate;return isNaN(t.min)&&isNaN(t.max)?!(t=i.getServiceDescriptionSettings())||!t.liveCatchup||isNaN(t.liveCatchup.playbackRate.min)&&isNaN(t.liveCatchup.playbackRate.max)?{min:-.5,max:.5}:{min:o((t=t.liveCatchup.playbackRate).min,e),max:s(t.max,e)}:{min:o(t.min,e),max:s(t.max,e)}},getAbrBitrateParameter:function(e,t){try{var r=a.get().streaming.abr[e][t];if(!isNaN(r)&&-1!==r)return r;var n=i.getServiceDescriptionSettings();return n&&n[e]&&!isNaN(n[e][t])?n[e][t]:-1}catch(e){return-1}},setConfig:function(e){e.playbackController&&(n=e.playbackController),e.serviceDescriptionController&&(i=e.serviceDescriptionController)},reset:function(){}},r=(0,l.default)(t).getInstance().getLogger(e),e}i.__dashjs_factory_name="MediaPlayerModel",t.default=n.default.getSingletonFactory(i)},"./src/streaming/models/MetricsModel.js":function(e,t,r){"use strict";r.r(t);var g=r("./src/streaming/constants/Constants.js"),v=r("./src/streaming/constants/MetricsConstants.js"),u=r("./src/streaming/vo/MetricsList.js"),T=r("./src/streaming/vo/metrics/HTTPRequest.js"),c=r("./src/streaming/vo/metrics/RepresentationSwitch.js"),m=r("./src/streaming/vo/metrics/BufferLevel.js"),h=r("./src/streaming/vo/metrics/BufferState.js"),p=r("./src/streaming/vo/metrics/DVRInfo.js"),y=r("./src/streaming/vo/metrics/DroppedFrames.js"),E=r("./src/streaming/vo/metrics/ManifestUpdate.js"),b=r("./src/streaming/vo/metrics/SchedulingInfo.js"),S=r("./src/core/EventBus.js"),A=r("./src/streaming/vo/metrics/RequestsQueue.js"),R=r("./src/core/events/Events.js"),r=r("./src/core/FactoryMaker.js");function n(e){var n,i=(e=e||{}).settings,e=this.context,a=(0,S.default)(e).getInstance();function t(){a.trigger(R.default.METRICS_CHANGED)}function o(e){a.trigger(R.default.METRIC_CHANGED,{mediaType:e}),t()}function l(e,t,r){a.trigger(R.default.METRIC_UPDATED,{mediaType:e,metric:t,value:r}),o(e)}function f(e,t,r){a.trigger(R.default.METRIC_ADDED,{mediaType:e,metric:t,value:r}),o(e)}function s(e,t){var r=null;return e&&(n.hasOwnProperty(e)?r=n[e]:t||(r=new u.default,n[e]=r)),r}function d(e,t,r){e=s(e);null!==e&&(e[t].push(r),e[t].length>i.get().streaming.metrics.maxListDepth&&e[t].shift())}function _(e,t,r){d(e,t,r),f(e,t,r)}return n={},{clearCurrentMetricsForType:function(e){delete n[e],o(e)},clearAllCurrentMetrics:function(){n={},t()},getMetricsFor:s,addHttpRequest:function e(t,r,n,i,a,o,s,u,l,c,f,d,g,m,h,p,y){var E=new T.HTTPRequest;o&&o!==i&&(e(t,null,n,i,a,null,null,u,l,null,null,null,g,null,null,p,y),E.actualurl=o),E.tcpid=r,E.type=n,E.url=i,E.range=u,E.trequest=l,E.tresponse=c,E.responsecode=d,E.cmsd=y,E._tfinish=f,E._stream=t,E._mediaduration=g,E._quality=a,E._responseHeaders=m,E._serviceLocation=s,E._fileLoaderType=p,h?h.forEach(function(e){var t,r,n,i;t=E,r=e.s,n=e.d,e=e.b,(i=new T.HTTPRequestTrace).s=r,i.d=n,i.b=e,t.trace.push(i),t.interval||(t.interval=0),t.interval+=n}):(delete E.interval,delete E.trace),_(t,v.default.HTTP_REQUEST,E)},addRepresentationSwitch:function(e,t,r,n,i){var a=new c.default;a.t=t,a.mt=r,a.to=n,i?a.lto=i:delete a.lto,_(e,v.default.TRACK_SWITCH,a)},addBufferLevel:function(e,t,r){var n=new m.default;n.t=t,n.level=r,_(e,v.default.BUFFER_LEVEL,n)},addBufferState:function(e,t,r){var n=new h.default;n.target=r,n.state=t,_(e,v.default.BUFFER_STATE,n)},addDVRInfo:function(e,t,r,n){var i=new p.default;i.time=t,i.range=n,i.manifestInfo=r,_(e,v.default.DVR_INFO,i)},addDroppedFrames:function(e,t){var r=new y.default,n=s(e).DroppedFrames;t&&(r.time=t.creationTime,r.droppedFrames=t.droppedVideoFrames,0<n.length&&n[n.length-1]==r||_(e,v.default.DROPPED_FRAMES,r))},addSchedulingInfo:function(e,t,r,n,i,a,o,s,u){var l=new b.default;l.mediaType=e,l.t=t,l.type=r,l.startTime=n,l.availabilityStartTime=i,l.duration=a,l.quality=o,l.range=s,l.state=u,_(e,v.default.SCHEDULING_INFO,l)},addRequestsQueue:function(e,t,r){var n=new A.default;n.loadingRequests=t,n.executedRequests=r,s(e).RequestsQueue=n,f(e,v.default.REQUESTS_QUEUE,n)},addManifestUpdate:function(e,t,r,n,i,a,o,s,u,l){var c=new E.ManifestUpdate;c.mediaType=e,c.type=t,c.requestTime=r,c.fetchTime=n,c.availabilityStartTime=i,c.presentationStartTime=a,c.clientTimeOffset=o,c.currentTime=s,c.buffered=u,c.latency=l,d(g.default.STREAM,v.default.MANIFEST_UPDATE,c),f(e,v.default.MANIFEST_UPDATE,c)},updateManifestUpdateInfo:function(e,t){if(e){for(var r in t)e[r]=t[r];l(e.mediaType,v.default.MANIFEST_UPDATE,e)}},addManifestUpdateStreamInfo:function(e,t,r,n,i){var a;e&&((a=new E.ManifestUpdateStreamInfo).id=t,a.index=r,a.start=n,a.duration=i,e.streamInfo.push(a),l(e.mediaType,v.default.MANIFEST_UPDATE_STREAM_INFO,e))},addManifestUpdateRepresentationInfo:function(e,t,r,n,i,a,o,s){var u;e&&e.representationInfo&&((u=new E.ManifestUpdateRepresentationInfo).id=t,u.index=r,u.streamIndex=n,u.mediaType=i,u.startNumber=o,u.fragmentInfoType=s,u.presentationTimeOffset=a,e.representationInfo.push(u),l(e.mediaType,v.default.MANIFEST_UPDATE_TRACK_INFO,e))},addPlayList:function(e){e.trace&&Array.isArray(e.trace)?e.trace.forEach(function(e){e.hasOwnProperty("subreplevel")&&!e.subreplevel&&delete e.subreplevel}):delete e.trace,_(g.default.STREAM,v.default.PLAY_LIST,e)},addDVBErrors:function(e){_(g.default.STREAM,v.default.DVB_ERRORS,e)}}}n.__dashjs_factory_name="MetricsModel",t.default=r.default.getSingletonFactory(n)},"./src/streaming/models/URIFragmentModel.js":function(e,t,r){"use strict";r.r(t);var l=r("./src/streaming/vo/URIFragmentData.js"),r=r("./src/core/FactoryMaker.js");function n(){var u;return{initialize:function(e){if(u=new l.default,!e)return null;var t=e.indexOf("#");if(-1!==t)for(var r=e.substr(t+1).split("&"),n=0,i=r.length;n<i;++n){var a,o=r[n],s=o.indexOf("=");-1!==s&&(a=o.substring(0,s),u.hasOwnProperty(a)&&(u[a]=o.substr(s+1)))}},getURIFragmentData:function(){return u}}}n.__dashjs_factory_name="URIFragmentModel",t.default=r.default.getSingletonFactory(n)},"./src/streaming/models/VideoModel.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/core/FactoryMaker.js"),b=r("./src/core/EventBus.js"),S=r("./src/core/events/Events.js"),A=r("./src/core/Debug.js"),R=r("./src/streaming/constants/Constants.js"),I=new Map([[R.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,"loadedmetadata"],[R.default.VIDEO_ELEMENT_READY_STATES.HAVE_CURRENT_DATA,"loadeddata"],[R.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,"canplay"],[R.default.VIDEO_ELEMENT_READY_STATES.HAVE_ENOUGH_DATA,"canplaythrough"]]);function i(){var e,t,o,r,n,i,a,s,u,l="element is not video or audio DOM type!",c=this.context,f=(0,b.default)(c).getInstance(),d=[];function g(){o&&(o.playbackRate=s||1,o.removeEventListener("canplay",g))}function m(){return 0<d.length}function h(){var e;o&&m()&&0===o.playbackRate&&((e=document.createEvent("Event")).initEvent("waiting",!0,!1),o.dispatchEvent(e))}function p(e,t){o&&o.addEventListener(e,t)}function y(e,t){o&&o.removeEventListener(e,t)}function E(){return o?o.readyState:NaN}function _(){return o?o.buffered:null}function v(e,t,r,n,i){if(o)for(var a=0;a<o.textTracks.length;a++)if(o.textTracks[a].kind===e&&(!t||o.textTracks[a].label==t)&&o.textTracks[a].language===r&&o.textTracks[a].isTTML===n&&o.textTracks[a].isEmbedded===i)return o.textTracks[a];return null}function T(e,t){var r,n;return e===R.default.VIDEO_ELEMENT_READY_STATES.HAVE_NOTHING||E()>=e?(t(),null):(e=I.get(e),n=t,p(r=e,i),{func:i,event:r});function i(){y(r,i),n(r)}}return e={addEventListener:p,addTextTrack:function(e,t,r,n,i){if(!o)return null;var a=v(e,t,r,n,i);return a||((a=o.addTextTrack(e,t,r)).isEmbedded=i,a.isTTML=n),a},appendChild:function(e){o&&(o.appendChild(e),void 0!==e.isTTML&&(o.textTracks[o.textTracks.length-1].isTTML=e.isTTML,o.textTracks[o.textTracks.length-1].isEmbedded=e.isEmbedded))},getBufferRange:_,getClientHeight:function(){return o?o.clientHeight:NaN},getClientWidth:function(){return o?o.clientWidth:NaN},getElement:function(){return o},getEnded:function(){return o?o.ended:null},getPlaybackQuality:function(){if(!o)return null;var e="webkitDroppedFrameCount"in o&&"webkitDecodedFrameCount"in o,t=null;return"getVideoPlaybackQuality"in o?t=o.getVideoPlaybackQuality():e&&(t={droppedVideoFrames:o.webkitDroppedFrameCount,totalVideoFrames:o.webkitDroppedFrameCount+o.webkitDecodedFrameCount,creationTime:new Date}),t},getPlaybackRate:function(){return o?o.playbackRate:null},getPlayedRanges:function(){return o?o.played:null},getReadyState:E,getSource:function(){return o?o.src:null},getTTMLRenderingDiv:function(){return i},getTextTrack:v,getTextTracks:function(){return o?o.textTracks:[]},getTime:function(){return o?isNaN(r)?o.currentTime:r:null},getVideoHeight:function(){return o?o.videoHeight:NaN},getVideoRelativeOffsetLeft:function(){var e;return o&&(e=o.parentNode.host||o.parentNode)?o.getBoundingClientRect().left-e.getBoundingClientRect().left:NaN},getVideoRelativeOffsetTop:function(){var e;return o&&(e=o.parentNode.host||o.parentNode)?o.getBoundingClientRect().top-e.getBoundingClientRect().top:NaN},getVideoWidth:function(){return o?o.videoWidth:NaN},getVttRenderingDiv:function(){return a},initialize:function(){f.on(S.default.PLAYBACK_PLAYING,h,this)},isPaused:function(){return o?o.paused:null},isSeeking:function(){return o?o.seeking||!isNaN(r):null},isStalled:m,pause:function(){o&&(o.pause(),o.autoplay=!1)},play:function(){var e;o&&(o.autoplay=!0,(e=o.play())&&e.catch&&"undefined"!=typeof Promise&&e.catch(function(e){"NotAllowedError"===e.name&&f.trigger(S.default.PLAYBACK_NOT_ALLOWED),t.warn("Caught pending play exception - continuing (".concat(e,")"))}))},removeChild:function(e){o&&o.removeChild(e)},removeEventListener:y,reset:function(){clearTimeout(u),f.off(S.default.PLAYBACK_PLAYING,h,this)},setCurrentTime:function(e,t){o&&(n&&n.func&&n.event&&y(n.event,n.func),r=e,n=T(R.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){if(o)if(o.currentTime===r)r=NaN;else try{r=t?function(e){var t=_(),r=e,n=9999999999;if(t)for(var i=0;i<t.length;i++){var a=t.start(i),o=t.end(i),s=Math.abs(a-e),u=Math.abs(o-e);if(a<=e&&e<=o)return e;s<n&&(n=s,r=a),u<n&&(n=u,r=o)}return r}(r):r,isNaN(r)||(o.currentTime=r),r=NaN}catch(e){0===o.readyState&&e.code===e.INVALID_STATE_ERR&&(u=setTimeout(function(){o.currentTime=r,r=NaN},400))}}))},setElement:function(e){if(!(null==e||e&&/^(VIDEO|AUDIO)$/i.test(e.nodeName)))throw l;(o=e)&&(o.preload="auto")},setPlaybackRate:function(e){o&&(!(1<arguments.length&&void 0!==arguments[1]&&arguments[1])&&o.readyState<=2&&0<e?o.addEventListener("canplay",g):o.playbackRate=e)},setSource:function(e){o&&(e?o.src=e:(o.removeAttribute("src"),o.load()))},setStallState:function(e,t){(t?function(e){null!==e&&o&&!o.seeking&&-1===d.indexOf(e)&&d.push(e)}:function(e){var t=d.indexOf(e);null!==e&&-1!==t&&d.splice(t,1)})(e)},setTTMLRenderingDiv:function(e){(i=e).style.position="absolute",i.style.display="flex",i.style.overflow="hidden",i.style.pointerEvents="none",i.style.top=0,i.style.left=0},setVttRenderingDiv:function(e){a=e},waitForReadyState:T},t=(0,A.default)(c).getInstance().getLogger(e),r=NaN,e}i.__dashjs_factory_name="VideoModel",t.default=n.default.getSingletonFactory(i)},"./src/streaming/net/FetchLoader.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/core/Settings.js"),M=r("./src/streaming/constants/Constants.js"),a=r("./src/streaming/utils/RequestModifier.js");function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return r}}(e,t)||P(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e){var I,t=this.context,o=(e=e||{}).requestModifier,w=e.lowLatencyThroughputModel,C=e.boxParser,s=(0,i.default)(t).getInstance();function r(T){var e,t=new Date,b=T.request,r=new Headers;if(b.range&&r.append("Range","bytes="+b.range),T.headers)for(var n in T.headers){var i=T.headers[n];i&&r.append(n,i)}b.requestStartDate||(b.requestStartDate=t),o&&o.modifyRequestHeader&&o.modifyRequestHeader({setRequestHeader:function(e,t){r.append(e,t)}},{url:T.url}),"function"==typeof window.AbortController&&(e=new AbortController,(T.abortController=e).signal.onabort=T.onabort);var a={method:T.method,headers:r,credentials:T.withCredentials?"include":void 0,signal:e?e.signal:void 0},S=s.get().streaming.abr.fetchThroughputCalculationMode,A=Date.now(),R=0;new Promise(function(e){if(S===M.default.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&w&&(R=w.getThroughputCapacityDelayMS(b,1e3*I.getCurrentBufferLevel(b.mediaType))))return setTimeout(e,R);e()}).then(function(){var v=Date.now();fetch(T.url,a).then(function(e){T.response||(T.response={}),T.response.status=e.status,T.response.statusText=e.statusText,T.response.responseURL=e.url,e.ok||T.onerror();var t,i="",r=function(e,t){var r,n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=P(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,o=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){o=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(o)throw i}}}}(e.headers.keys());try{for(r.s();!(t=r.n()).done;){var n=t.value;i+=n+": "+e.headers.get(n)+"\r\n"}}catch(e){r.e(e)}finally{r.f()}if(T.response.responseHeaders=i,!e.body)return e.arrayBuffer().then(function(e){e={loaded:(T.response.response=e).byteLength,total:e.byteLength,stream:!1};T.progress(e),T.onload(),T.onend()});var a,o,s,u,l,c,f=parseInt(e.headers.get("Content-Length"),10),d=0,g=!1,m=new Uint8Array,h=0,p=(S===M.default.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&w?(a=v,o=0,u=O(e.body.tee(),2),s=u[0],u=u[1],l=s.getReader(),c=[],l.read().then(function e(t){var r,n=t.value,t=t.done;return o=Date.now(),n&&n.length&&(r=o-a,n=n.length,c.push({chunkDownloadTimeRelativeMS:o-v,chunkDownloadDurationMS:r,chunkBytes:n,kbps:Math.round(8*n/(r/1e3)),bufferLevel:I.getCurrentBufferLevel(b.mediaType)})),t?(n=o-v,r=c.reduce(function(e,t){return e+t.chunkBytes},0),w.addMeasurement(b,n,c,A,R,i),void T.progress({loaded:r,total:r,lengthComputable:!0,time:w.getEstimatedDownloadDurationMS(b),stream:!0})):(a=Date.now(),l.read().then(e))}),T.reader=u.getReader()):T.reader=e.body.getReader(),[]),y=[],E=[],_=!0;N(T,function e(t){var r,n,i=t.value;if(t.done)return m&&(S!==M.default.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&(r=t=null,S===M.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING?(t=function(r,n){try{e=r.filter(function(e,t){return t<r.length-1}),t=n.filter(function(e,t){return t<n.length-1});var e,t,i=[];if(1<e.length){for(var a,o,s=0,u=0,l=0;l<e.length;l++)e[l]&&t[l]&&(1<(a=t[l].ts-e[l].ts)?(i.push(8*t[l].bytes/a),u=0):(0===u&&(u=e[l].ts,s=0),1<(o=t[l].ts-u)?(s+=t[l].bytes,i.push(8*s/o),u=0):s+=t[l].bytes));if(0<i.length)return i.reduce(function(e,t){return e+t},0)/i.length}return null}catch(e){return null}}(y,E))&&(r=8*d/t):S===M.default.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA&&(r=D(p,d)),T.progress({loaded:d,total:isNaN(f)?d:f,lengthComputable:!0,time:r,stream:!0})),T.response.response=m.buffer),T.onload(),void T.onend();i&&0<i.length&&(m=function(e,t){if(0===e.length)return t;var r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}(m,i),d+=i.length,p.push({ts:Date.now(),bytes:i.length}),S===M.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&_&&C.findLastTopIsoBoxCompleted(["moof"],m,h).found&&(_=!1,y.push({ts:performance.now(),bytes:i.length})),(t=C.findLastTopIsoBoxCompleted(["moov","mdat"],m,h)).found?(r=t.lastCompletedOffset+t.size,S!==M.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING||_||(_=!0,E.push({ts:performance.now(),bytes:m.length})),m=r===m.length?(n=m,new Uint8Array):(n=new Uint8Array(m.subarray(0,r)),m.subarray(r)),T.progress({data:n.buffer,lengthComputable:!1,noTrace:!0}),h=0):(h=t.lastCompletedOffset,g||(T.progress({lengthComputable:!1,noTrace:!0}),g=!0))),N(T,e)})}).catch(function(e){T.onerror&&T.onerror(e)})})}function N(t,e){t.reader.read().then(e).catch(function(e){t.onerror&&200===t.response.status&&t.onerror(e)})}function D(r,t){try{var n,i;return 1<(r=r.filter(function(e){return e.bytes>t/4/r.length})).length?(n=0,i=(r[r.length-1].ts-r[0].ts)/r.length,r.forEach(function(e,t){var t=r[t+1];t&&(t=t.ts-e.ts,n+=t<i?t:0)}),n):null}catch(e){return null}}return{load:function(e){o&&o.modifyRequest?(0,a.modifyRequest)(e,o).then(function(){return r(e)}):r(e)},abort:function(e){if(e.abortController)e.abortController.abort();else if(e.reader)try{e.reader.cancel(),e.onabort()}catch(e){}},calculateDownloadedTime:D,setup:function(e){I=e.dashMetrics}}}s.__dashjs_factory_name="FetchLoader";r=n.default.getClassFactory(s);t.default=r},"./src/streaming/net/HTTPLoader.js":function(e,t,r){"use strict";r.r(t);var B=r("./src/streaming/net/XHRLoader.js"),G=r("./src/streaming/net/FetchLoader.js"),q=r("./src/streaming/vo/metrics/HTTPRequest.js"),n=r("./src/core/FactoryMaker.js"),H=r("./src/streaming/vo/DashJSError.js"),i=r("./src/streaming/models/CmcdModel.js"),a=r("./src/streaming/models/CmsdModel.js"),Y=r("./src/core/Utils.js"),o=r("./src/core/Debug.js"),s=r("./src/core/EventBus.js"),V=r("./src/core/events/Events.js"),u=r("./src/core/Settings.js"),K=r("./src/streaming/constants/Constants.js"),l=r("./src/streaming/models/LowLatencyThroughputModel.js"),c=r("./src/streaming/models/CustomParametersModel.js");function f(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}function d(e){var T,b,S,A,R,I,w,C,N,t,D=this.context,M=(e=e||{}).errHandler,O=e.dashMetrics,P=e.mediaPlayerModel,L=e.requestModifier,F=e.boxParser,r=e.errors,x=e.requestTimeout||0,j=(0,s.default)(D).getInstance(),k=(0,u.default)(D).getInstance();function U(r,t){var a,o=r.request,s=[],n=!0,i=!0,u=new Date,l=u,c=0,f=null,d=null;if(!L||!O||!M)throw new Error("config object is not correct or missing");function g(e){i=!1,p(e),o.type===q.HTTPRequest.MPD_TYPE&&(O.addManifestUpdate(o),j.trigger(V.default.MANIFEST_LOADING_FINISHED,{request:o}))}function m(){if(f&&(clearTimeout(f),f=null),-1!==T.indexOf(a)&&(T.splice(T.indexOf(a),1),i))if(g(!1),0<t){try{k.get().streaming.utcSynchronization.enableBackgroundSyncAfterSegmentDownloadError&&o.type===q.HTTPRequest.MEDIA_SEGMENT_TYPE&&P.getRetryAttemptsForType(q.HTTPRequest.MEDIA_SEGMENT_TYPE)===t&&j.trigger(V.default.ATTEMPT_BACKGROUND_SYNC)}catch(e){}t--;var e={config:r};S.push(e),e.timeout=setTimeout(function(){-1!==S.indexOf(e)&&(S.splice(S.indexOf(e),1),U(r,t))},P.getRetryIntervalsForType(o.type))}else o.type!==q.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE&&(M.error(new H.default(A[o.type],o.url+" is not available",{request:o,response:a.response})),r.error&&r.error(o,"error",a.response.statusText,a.response),r.complete&&r.complete(o,a.response.statusText))}var e,h,p=function(e){o.requestStartDate=u,o.requestEndDate=new Date,o.firstByteDate=o.firstByteDate||u,o.fileLoaderType=d;var t=a.response?a.response.responseURL:null,r=a.response?a.response.status:null,n=a.response&&a.response.getAllResponseHeaders?a.response.getAllResponseHeaders():a.response?a.response.responseHeaders:null,i=n&&k.get().streaming.cmsd&&k.get().streaming.cmsd.enabled?I.parseResponseHeaders(n,o.mediaType):null;O.addHttpRequest(o,t,r,n,e?s:null,i)},d=o.hasOwnProperty("availabilityTimeComplete")&&!1===o.availabilityTimeComplete&&window.fetch&&"arraybuffer"===o.responseType&&o.type===q.HTTPRequest.MEDIA_SEGMENT_TYPE?((e=(0,G.default)(D).create({requestModifier:L,lowLatencyThroughputModel:C,boxParser:F})).setup({dashMetrics:O}),K.default.FILE_LOADER_TYPES.FETCH):(e=(0,B.default)(D).create({requestModifier:L}),K.default.FILE_LOADER_TYPES.XHR),y=null,E=L.modifyRequestURL?L.modifyRequestURL(o.url):o.url,_=(k.get().streaming.cmcd&&k.get().streaming.cmcd.enabled&&((v=k.get().streaming.cmcd.mode)===K.default.CMCD_MODE_QUERY?(_=function(e){try{var t=[],r=R.getQueryParameter(e);return r&&t.push(r),t}catch(e){return[]}}(o),E=Y.default.addAditionalQueryParameterToUrl(E,_)):v===K.default.CMCD_MODE_HEADER&&(y=R.getHeaderParameters(o))),w.getXHRWithCredentialsForType(o.type)),v=(o.queryParams&&(v=Object.keys(o.queryParams).map(function(e){return{key:e,value:o.queryParams[e]}}),E=Y.default.addAditionalQueryParameterToUrl(E,v)),o.url=E,a={url:E,method:q.HTTPRequest.GET,withCredentials:_,request:o,onload:function(){200<=a.response.status&&a.response.status<=299&&(g(!0),r.success&&r.success(a.response.response,a.response.statusText,a.response.responseURL),r.complete&&r.complete(o,a.response.statusText))},onend:m,onerror:m,progress:function(e){var t=new Date;n&&(n=!1,(!e.lengthComputable||e.lengthComputable&&e.total!==e.loaded)&&(o.firstByteDate=t)),e.lengthComputable&&(o.bytesLoaded=e.loaded,o.bytesTotal=e.total),e.noTrace||(s.push({s:l,d:e.time||t.getTime()-l.getTime(),b:[e.loaded?e.loaded-c:0]}),l=t,c=e.loaded),f&&(clearTimeout(f),f=null),0<k.get().streaming.fragmentRequestProgressTimeout&&(f=setTimeout(function(){N.warn("Abort request "+a.url+" due to progress timeout"),a.response.onabort=null,a.loader.abort(a),m()},k.get().streaming.fragmentRequestProgressTimeout)),r.progress&&e&&r.progress(e)},onabort:function(){p(!0),f&&(clearTimeout(f),f=null),r.abort&&r.abort(o)},ontimeout:function(e){var t;e=e.lengthComputable?(t=e.loaded/e.total*100,"Request timeout: loaded: "+e.loaded+", out of: "+e.total+" : "+t.toFixed(3)+"% Completed"):"Request timeout: non-computable download size",N.warn(e)},loader:e,timeout:x,headers:y},(new Date).getTime());isNaN(o.delayLoadingTime)||v>=o.delayLoadingTime?(T.push(a),e.load(a)):(h={httpRequest:a},b.push(h),h.delayTimeout=setTimeout(function(){if(-1!==b.indexOf(h)){b.splice(b.indexOf(h),1);try{u=new Date,l=u,T.push(h.httpRequest),e.load(h.httpRequest)}catch(e){h.httpRequest.onerror()}}},o.delayLoadingTime-v))}return e={load:function(e){e.request?U(e,P.getRetryAttemptsForType(e.request.type)):e.error&&e.error(e.request,"error")},abort:function(){S.forEach(function(e){clearTimeout(e.timeout),e.config.request&&e.config.abort&&e.config.abort(e.config.request)}),S=[],b.forEach(function(e){return clearTimeout(e.delayTimeout)}),b=[],T.forEach(function(e){e.request.type!==q.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE&&(e.onloadend=e.onerror=e.onprogress=void 0,e.loader.abort(e))}),T=[]}},N=(0,o.default)(D).getInstance().getLogger(e),T=[],b=[],S=[],R=(0,i.default)(D).getInstance(),I=(0,a.default)(D).getInstance(),C=(0,l.default)(D).getInstance(),w=(0,c.default)(D).getInstance(),f(t={},q.HTTPRequest.MPD_TYPE,r.DOWNLOAD_ERROR_ID_MANIFEST_CODE),f(t,q.HTTPRequest.XLINK_EXPANSION_TYPE,r.DOWNLOAD_ERROR_ID_XLINK_CODE),f(t,q.HTTPRequest.INIT_SEGMENT_TYPE,r.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),f(t,q.HTTPRequest.MEDIA_SEGMENT_TYPE,r.DOWNLOAD_ERROR_ID_CONTENT_CODE),f(t,q.HTTPRequest.INDEX_SEGMENT_TYPE,r.DOWNLOAD_ERROR_ID_CONTENT_CODE),f(t,q.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,r.DOWNLOAD_ERROR_ID_CONTENT_CODE),f(t,q.HTTPRequest.OTHER_TYPE,r.DOWNLOAD_ERROR_ID_CONTENT_CODE),A=t,e}d.__dashjs_factory_name="HTTPLoader";r=n.default.getClassFactory(d);t.default=r},"./src/streaming/net/SchemeLoaderFactory.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/streaming/net/HTTPLoader.js");function a(){var r;function e(){r={}}function t(){e()}return e(),{getLoader:function(e){for(var t in r)if(r.hasOwnProperty(t)&&e.startsWith(t))return r[t];return i.default},registerLoader:function(e,t){r[e]=t},unregisterLoader:function(e){r[e]&&delete r[e]},unregisterAllLoader:e,reset:t}}a.__dashjs_factory_name="SchemeLoaderFactory";r=n.default.getSingletonFactory(a);t.default=r},"./src/streaming/net/URLLoader.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/core/FactoryMaker.js"),o=r("./src/streaming/net/SchemeLoaderFactory.js");function i(r){r=r||{};var n,i,a=this.context;return n=(0,o.default)(a).getInstance(),{load:function(e){var t;i||(t=n.getLoader(e&&e.request?e.request.url:null),i=t(a).create({errHandler:r.errHandler,mediaPlayerModel:r.mediaPlayerModel,requestModifier:r.requestModifier,dashMetrics:r.dashMetrics,boxParser:r.boxParser||null,constants:r.constants||null,dashConstants:r.dashConstants||null,urlUtils:r.urlUtils||null,requestTimeout:isNaN(r.requestTimeout)?0:r.requestTimeout,errors:r.errors})),i.load(e)},abort:function(){i&&i.abort()}}}i.__dashjs_factory_name="URLLoader";r=n.default.getClassFactory(i);t.default=r},"./src/streaming/net/XHRLoader.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/streaming/utils/RequestModifier.js");function a(e){var o=(e=e||{}).requestModifier;function t(e){var t=new Date,r=e.request,n=new XMLHttpRequest;if(n.open(e.method,e.url,!0),r.responseType&&(n.responseType=r.responseType),r.range&&n.setRequestHeader("Range","bytes="+r.range),r.requestStartDate||(r.requestStartDate=t),o&&o.modifyRequestHeader&&(n=o.modifyRequestHeader(n,{url:e.url})),e.headers)for(var i in e.headers){var a=e.headers[i];a&&n.setRequestHeader(i,a)}n.withCredentials=e.withCredentials,n.onload=e.onload,n.onloadend=e.onend,n.onerror=e.onerror,n.onprogress=e.progress,n.onabort=e.onabort,n.ontimeout=e.ontimeout,n.timeout=e.timeout,n.send(),e.response=n}return{load:function(e){o&&o.modifyRequest?(0,i.modifyRequest)(e,o).then(function(){return t(e)}):t(e)},abort:function(e){(e=e.response).onloadend=e.onerror=e.onprogress=void 0,e.abort()}}}a.__dashjs_factory_name="XHRLoader";r=n.default.getClassFactory(a);t.default=r},"./src/streaming/protection/CommonEncryption.js":function(e,t,r){"use strict";function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.r(t);var d={attributes:["Laurl","laurl"],prefixes:["clearkey","dashif"]},r=function(){function r(){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function")}var e,t,n;return e=r,n=[{key:"findCencContentProtection",value:function(e){for(var t=null,r=0;r<e.length;++r){var n=e[r];"urn:mpeg:dash:mp4protection:2011"!==n.schemeIdUri.toLowerCase()||"cenc"!==n.value.toLowerCase()&&"cbcs"!==n.value.toLowerCase()||(t=n)}return t}},{key:"getPSSHData",value:function(e){var t=8,r=new DataView(e),n=r.getUint8(t);return t+=20,0<n&&(t+=4+16*r.getUint32(t)),e.slice(t+=4)}},{key:"getPSSHForKeySystem",value:function(e,t){t=r.parsePSSHList(t);return e&&t.hasOwnProperty(e.uuid.toLowerCase())?t[e.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(e,t){return"pssh"in e?(e.pssh.__text=e.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),t.decodeArray(e.pssh.__text).buffer):null}},{key:"parsePSSHList",value:function(e){if(null==e)return[];for(var t=new DataView(e.buffer||e),r={},n=0;;){var i,a,o=void 0,s=n;if(n>=t.buffer.byteLength)break;if(i=n+t.getUint32(n),n+=4,1886614376!==t.getUint32(n))n=i;else if(n+=4,0!==(a=t.getUint8(n))&&1!==a)n=i;else{n++,n+=3;for(var o="",u=void 0,l=void 0,u=0;u<4;u++)o+=1===(l=t.getUint8(n+u).toString(16)).length?"0"+l:l;for(n+=4,o+="-",u=0;u<2;u++)o+=1===(l=t.getUint8(n+u).toString(16)).length?"0"+l:l;for(n+=2,o+="-",u=0;u<2;u++)o+=1===(l=t.getUint8(n+u).toString(16)).length?"0"+l:l;for(n+=2,o+="-",u=0;u<2;u++)o+=1===(l=t.getUint8(n+u).toString(16)).length?"0"+l:l;for(n+=2,o+="-",u=0;u<6;u++)o+=1===(l=t.getUint8(n+u).toString(16)).length?"0"+l:l;n=n+6+4,r[o=o.toLowerCase()]=t.buffer.slice(s,i),n=i}}return r}},{key:"getLicenseServerUrlFromMediaInfo",value:function(e,t){try{if(!e||0===e.length)return null;for(var r=0,n=null;r<e.length&&!n;){var i=e[r];if(i&&i.contentProtection&&0<i.contentProtection.length){var a=i.contentProtection.filter(function(e){return e.schemeIdUri&&e.schemeIdUri===t});if(a&&0<a.length)for(var o=0;o<a.length&&!n;){for(var s=a[o],u=0;u<d.attributes.length&&!n;){for(var l=0,c=d.attributes[u];l<d.prefixes.length&&!n;){var f=d.prefixes[l];s[c]&&s[c].__prefix&&s[c].__prefix===f&&s[c].__text&&(n=s[c].__text),l+=1}u+=1}o+=1}}r+=1}return n}catch(e){return null}}}],(t=null)&&i(e.prototype,t),n&&i(e,n),r}();t.default=r},"./src/streaming/protection/Protection.js":function(e,t,r){"use strict";r.r(t);var d=r("./src/streaming/protection/controllers/ProtectionController.js"),g=r("./src/streaming/protection/controllers/ProtectionKeyController.js"),n=r("./src/streaming/protection/ProtectionEvents.js"),i=r("./src/streaming/protection/errors/ProtectionErrors.js"),m=r("./src/streaming/protection/models/ProtectionModel_21Jan2015.js"),h=r("./src/streaming/protection/models/ProtectionModel_3Feb2014.js"),p=r("./src/streaming/protection/models/ProtectionModel_01b.js"),y=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],E=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function a(){var l,c=this.context;function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];if("function"==typeof e[n[Object.keys(n)[0]]])return n}return null}return l={createProtectionSystem:function(e){var t,r,n,i,a,o=null,s=(0,g.default)(c).getInstance(),u=(s.setConfig({debug:e.debug,BASE64:e.BASE64,settings:e.settings}),s.initialize(),r=(t=e).debug,n=r.getLogger(l),i=t.eventBus,u=t.errHandler,(a=t.videoModel?t.videoModel.getElement():null)&&void 0===a.onencrypted||a&&void 0===a.mediaKeys?f(a,E)?(n.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),(0,h.default)(c).create({debug:r,eventBus:i,events:t.events,api:f(a,E)})):f(a,y)?(n.info("EME detected on this user agent! (ProtectionModel_01b)"),(0,p.default)(c).create({debug:r,eventBus:i,errHandler:u,events:t.events,api:f(a,y)})):(n.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(n.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),(0,m.default)(c).create({debug:r,eventBus:i,events:t.events})));return!o&&u&&(o=(0,d.default)(c).create({protectionModel:u,protectionKeyController:s,eventBus:e.eventBus,debug:e.debug,events:e.events,BASE64:e.BASE64,constants:e.constants,cmcdModel:e.cmcdModel,customParametersModel:e.customParametersModel,settings:e.settings}),e.capabilities.setEncryptedMediaSupported(!0)),o}}}a.__dashjs_factory_name="Protection";r=dashjs.FactoryMaker.getClassFactory(a);r.events=n.default,r.errors=i.default,dashjs.FactoryMaker.updateClassFactory(a.__dashjs_factory_name,r),t.default=r},"./src/streaming/protection/ProtectionEvents.js":function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=s(r),t=(e=n?(e=s(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==i(e)&&"function"!=typeof e){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.r(t);r=new(function(e){var t=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e);var r=o(n);function n(){var e;if(this instanceof n)return(e=r.call(this)).INTERNAL_KEY_MESSAGE="internalKeyMessage",e.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",e.KEY_ADDED="public_keyAdded",e.KEY_ERROR="public_keyError",e.KEY_MESSAGE="public_keyMessage",e.KEY_SESSION_CLOSED="public_keySessionClosed",e.KEY_SESSION_CREATED="public_keySessionCreated",e.KEY_SESSION_REMOVED="public_keySessionRemoved",e.KEY_STATUSES_CHANGED="public_keyStatusesChanged",e.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",e.KEY_SYSTEM_SELECTED="public_keySystemSelected",e.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",e.LICENSE_REQUEST_SENDING="public_licenseRequestSending",e.NEED_KEY="needkey",e.PROTECTION_CREATED="public_protectioncreated",e.PROTECTION_DESTROYED="public_protectiondestroyed",e.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",e.TEARDOWN_COMPLETE="protectionTeardownComplete",e.VIDEO_ELEMENT_SELECTED="videoElementSelected",e.KEY_SESSION_UPDATED="public_keySessionUpdated",e;throw new TypeError("Cannot call a class as a function")}return n}(r("./src/core/events/EventsBase.js").default));t.default=r},"./src/streaming/protection/controllers/ProtectionController.js":function(e,t,r){"use strict";r.r(t);var U=r("./src/streaming/protection/CommonEncryption.js"),B=r("./src/streaming/protection/vo/MediaCapability.js"),G=r("./src/streaming/protection/vo/KeySystemConfiguration.js"),q=r("./src/streaming/protection/errors/ProtectionErrors.js"),H=r("./src/streaming/vo/DashJSError.js"),Y=r("./src/streaming/protection/vo/LicenseRequest.js"),V=r("./src/streaming/protection/vo/LicenseResponse.js"),K=r("./src/streaming/vo/metrics/HTTPRequest.js"),z=r("./src/core/Utils.js"),W=r("./src/streaming/constants/Constants.js"),r=r("./src/core/FactoryMaker.js");function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e){var t,_,a,v,u,i,l,T,c,b,S,A=(e=e||{}).protectionKeyController,R=e.protectionModel,I=e.eventBus,w=e.events,x=e.debug,j=e.BASE64,f=e.constants,o=[],C=e.cmcdModel,N=e.settings,D=e.customParametersModel;function r(){if(!(I&&I.hasOwnProperty("on")&&A&&A.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")}function s(e,t){if(T||c)T&&d();else{var r=e,n=t;if(!c){c=!0;var i=[];r=r.sort(function(e,t){return(u&&u[e.ks.systemString]&&0<=u[e.ks.systemString].priority?u[e.ks.systemString].priority:r.length)-(u&&u[t.ks.systemString]&&0<=u[t.ks.systemString].priority?u[t.ks.systemString].priority:r.length)});for(var a,o=0;o<r.length;o++){var s=function(e){var t=e.protData,r=[],n=[],i=t&&t.audioRobustness&&0<t.audioRobustness.length?t.audioRobustness:l,a=t&&t.videoRobustness&&0<t.videoRobustness.length?t.videoRobustness:l,e=e.sessionType,o=t&&t.distinctiveIdentifier?t.distinctiveIdentifier:"optional",t=t&&t.persistentState?t.persistentState:"temporary"===e?"optional":"required";return v.forEach(function(e){e.type===f.AUDIO?r.push(new B.default(e.codec,i)):e.type===f.VIDEO&&n.push(new B.default(e.codec,a))}),new G.default(r,n,o,t,[e])}(r[o]);i.push({ks:r[o].ks,configs:[s],protData:r[o].protData})}R.requestKeySystemAccess(i).then(function(e){e=(a=e.data).mksa&&a.mksa.selectedSystemString?a.mksa.selectedSystemString:a.keySystem.systemString;return _.info("DRM: KeySystem Access Granted for system string ("+e+")!  Selecting key system..."),R.selectKeySystem(a)}).then(function(e){T=e,c=!1,R&&(I.trigger(w.KEY_SYSTEM_SELECTED,{data:a}),(e=M(T))&&e.serverCertificate&&0<e.serverCertificate.length&&R.setServerCertificate(j.decodeArray(e.serverCertificate).buffer),d())}).catch(function(e){T=null,c=!1,n||I.trigger(w.KEY_SYSTEM_SELECTED,{data:null,error:new H.default(q.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,q.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+e.error)})})}}}function d(){for(var e,t=0;t<a.length;t++)for(e=0;e<a[t].length;e++)if(T===a[t][e].ks){var r,n=a[t][e],i=(r=i=void 0,n);A.isClearKey(T)&&i.protData&&i.protData.hasOwnProperty("clearkeys")&&0!==Object.keys(i.protData.clearkeys).length&&(r={kids:Object.keys(i.protData.clearkeys)},i.initData=(new TextEncoder).encode(JSON.stringify(r))),i.sessionId?g(i):null!==i.initData&&m(i);break}a=[]}function g(e){r(),R.loadKeySession(e)}function m(e){var t=U.default.getPSSHForKeySystem(T,e?e.initData:null);if(t){if(!function(e){if(!e)return;try{for(var t=R.getSessions(),r=0;r<t.length;r++)if(t[r].getKeyId()===e)return 1;return}catch(e){return}}(e.keyId)&&!h(t))try{e.initData=t,R.createKeySession(e)}catch(e){I.trigger(w.KEY_SESSION_CREATED,{data:null,error:new H.default(q.default.KEY_SESSION_CREATED_ERROR_CODE,q.default.KEY_SESSION_CREATED_ERROR_MESSAGE+e.message)})}}else e&&e.initData?R.createKeySession(e):I.trigger(w.KEY_SESSION_CREATED,{data:null,error:new H.default(q.default.KEY_SESSION_CREATED_ERROR_CODE,q.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(T?T.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function M(e){if(e){e=e.systemString;if(u)return e in u?u[e]:null}return null}function h(e){if(e)try{for(var t=R.getAllInitData(),r=0;r<t.length;r++)if(A.initDataEquals(e,t[r]))return _.debug("DRM: Ignoring initData because we have already seen it!"),1;return}catch(e){return}}function n(e){r(),e?(R.setMediaElement(e),I.on(w.NEED_KEY,F,t)):null===e&&(R.setMediaElement(e),I.off(w.NEED_KEY,F,t))}function p(e){e.error?I.trigger(w.KEY_STATUSES_CHANGED,{data:null,error:e.error}):_.debug("DRM: key status = "+e.status)}function y(e){_.debug("DRM: onKeyMessage");var n,t,r,i,a,o,s,u,l,c,f,d,g=e.data,m=(I.trigger(w.KEY_MESSAGE,{data:g}),g.messageType||"license-request"),h=g.message,p=g.sessionToken,y=M(T),E=A.getLicenseServerModelInstance(T,y,m),m={sessionToken:p,messageType:m};if(h&&0!==h.byteLength){if(!E)return _.debug("DRM: License server request not required for this message (type = "+e.data.messageType+").  Session ID = "+p.getSessionId()),void O(m);if(A.isClearKey(T)){var e=A.processClearKeyLicenseRequest(T,y,h);if(e&&e.keyPairs&&0<e.keyPairs.length)return _.debug("DRM: ClearKey license request handled by application!"),O(m),void R.updateKeySession(p,e)}n=E,h=y,l=(p=g).sessionToken,c=p.messageType||"license-request",f={sessionToken:l,messageType:c},d=T?T.systemString:null,(e=function(e,t,r,n,i){var a=null,o=n.message;{var s;e&&e.serverURL?"string"==typeof(s=e.serverURL)&&""!==s?a=s:"object"===X(s)&&s.hasOwnProperty(t)&&(a=s[t]):e&&e.laURL&&""!==e.laURL?a=e.laURL:(a=U.default.getLicenseServerUrlFromMediaInfo(v,T.schemeIdURI))||A.isClearKey(T)||(s=U.default.getPSSHData(r.initData),a=(a=T.getLicenseServerURLFromInitData(s))||n.laURL)}return a=i.getServerURLFromMessage(a,o,t)}(h,c,l,p,n))?(t=!(E={}),h&&P(E,h.httpRequestHeaders),p=p.message,y=T.getRequestHeadersFromMessage(p),P(E,y),Object.keys(E).forEach(function(e){"authorization"===e.toLowerCase()&&(t=!0)}),h&&"boolean"==typeof h.withCredentials&&(t=h.withCredentials),r=function(t){var e,r;R&&(200<=t.status&&t.status<=299?(e=z.default.parseHttpHeaders(t.getAllResponseHeaders?t.getAllResponseHeaders():null),r=new V.default(t.responseURL,e,t.response),k(D.getLicenseResponseFilters(),r).then(function(){var e=n.getLicenseMessage(r.data,d,c);null!==e?(O(f),R.updateKeySession(l,e)):L(t,f,d,c,n)})):L(t,f,d,c,n))},i=function(e){O(f,new H.default(q.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,q.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+d+' update, XHR aborted. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState))},a=function(e){O(f,new H.default(q.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,q.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+d+' update, XHR error. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState))},y=T.getLicenseRequestFromMessage(p),p=n.getHTTPMethod(c),g=n.getResponseType(d,c),o=h&&!isNaN(h.httpTimeout)?h.httpTimeout:8e3,h=l.getSessionId()||null,s=new Y.default(e,p,g,E,t,c,h,y),u=isNaN(N.get().streaming.retryAttempts[K.HTTPRequest.LICENSE])?3:N.get().streaming.retryAttempts[K.HTTPRequest.LICENSE],k(D.getLicenseRequestFilters(),s).then(function(){!function t(r,n,i,a,o,s){var e=new XMLHttpRequest;N.get().streaming.cmcd&&N.get().streaming.cmcd.enabled&&N.get().streaming.cmcd.mode===W.default.CMCD_MODE_QUERY&&(l=C.getQueryParameter({url:r.url,type:K.HTTPRequest.LICENSE}))&&(r.url=z.default.addAditionalQueryParameterToUrl(r.url,[l]));e.open(r.method,r.url,!0);e.responseType=r.responseType;e.withCredentials=r.withCredentials;0<i&&(e.timeout=i);for(var u in r.headers)e.setRequestHeader(u,r.headers[u]);if(N.get().streaming.cmcd&&N.get().streaming.cmcd.enabled){var l=N.get().streaming.cmcd.mode;if(l===W.default.CMCD_MODE_HEADER){var c=C.getHeaderParameters({url:r.url,type:K.HTTPRequest.LICENSE});if(c)for(var f in c){var d=c[f];d&&e.setRequestHeader(f,d)}}}var g=function(){n--;var e=isNaN(N.get().streaming.retryIntervals[K.HTTPRequest.LICENSE])?1e3:N.get().streaming.retryIntervals[K.HTTPRequest.LICENSE];S=setTimeout(function(){t(r,n,i,a,o,s)},e)};e.onload=function(){b=null,200<=this.status&&this.status<=299||n<=0?a(this):(_.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+n),g())};e.ontimeout=e.onerror=function(){b=null,n<=0?s(this):(_.warn("License request network request failed . Retrying it... Pending retries: "+n),g())};e.onabort=function(){o(this)};I.trigger(w.LICENSE_REQUEST_SENDING,{url:r.url,headers:r.headers,payload:r.data,sessionId:r.sessionId});b=e;e.send(r.data)}(s,u,o,r,i,a)})):O(f,new H.default(q.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,q.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE))}else O(m,new H.default(q.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,q.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function O(e,t){I.trigger(w.LICENSE_REQUEST_COMPLETE,{data:e,error:t})}function E(){b&&(b.onloadend=b.onerror=b.onprogress=void 0,b.abort(),b=null),S&&(clearTimeout(S),S=null)}function P(e,t){if(t)for(var r in t)e[r]=t[r]}function L(e,t,r,n,i){var a="NONE",o=null;e.response&&(a=i.getErrorResponse(e.response,r,n),o={serverResponse:e.response||null,responseCode:e.status||null,responseText:e.statusText||null}),O(t,new H.default(q.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,q.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+r+' update, XHR complete. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState+".  Response is "+a,o))}function k(e,r){return e?e.reduce(function(e,t){return e.then(function(){return t(r)})},Promise.resolve()):Promise.resolve()}function F(e,t){if(!N.get().streaming.protection.ignoreEmeEncryptedEvent)if(_.debug("DRM: onNeedKey"),"cenc"!==e.key.initDataType)_.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+e.key.initDataType);else if(0===v.length&&(_.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(t=void 0===t?1:t+1)<5))o.push(setTimeout(function(){F(e,t)},500));else{var r=e.key.initData;if(ArrayBuffer.isView(r)&&(r=r.buffer),T){var n=U.default.getPSSHForKeySystem(T,r);if(n&&h(n))return}_.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(r)));n=A.getSupportedKeySystemsFromSegmentPssh(r,u,i);0===n.length?_.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!"):(r=n,a.push(r),s(r,!1))}}return t={initializeForMedia:function(e){if(!e)throw new Error("mediaInfo can not be null or undefined");r(),v.push(e)},clearMediaInfoArray:function(){v=[]},handleKeySystemFromManifest:function(){var t;v&&0!==v.length&&(t=[],v.forEach(function(e){e=A.getSupportedKeySystemsFromContentProtection(e.contentProtection,u,i);0<e.length&&(0===t.length&&(t=e),a.push(e))}),t&&0<t.length&&s(t,!0))},createKeySession:m,loadKeySession:g,removeKeySession:function(e){r(),R.removeKeySession(e)},closeKeySession:function(e){r(),R.closeKeySession(e)},setServerCertificate:function(e){r(),R.setServerCertificate(e)},setMediaElement:n,setSessionType:function(e){i=e},setRobustnessLevel:function(e){l=e},setProtectionData:function(e){u=e,A.setProtectionData(e)},getSupportedKeySystemsFromContentProtection:function(e){return r(),A.getSupportedKeySystemsFromContentProtection(e,u,i)},getKeySystems:function(){return A?A.getKeySystems():[]},setKeySystems:function(e){A&&A.setKeySystems(e)},stop:function(){E(),R&&R.stop()},reset:function(){I.off(w.INTERNAL_KEY_MESSAGE,y,t),I.off(w.INTERNAL_KEY_STATUS_CHANGED,p,t),r(),E(),n(null),T=null,c=!1,R&&(R.reset(),R=null),o.forEach(function(e){return clearTimeout(e)}),o=[],v=[],a=[]}},_=x.getLogger(t),a=[],v=[],i="temporary",l="",S=b=null,I.on(w.INTERNAL_KEY_MESSAGE,y,t),I.on(w.INTERNAL_KEY_STATUS_CHANGED,p,t),t}n.__dashjs_factory_name="ProtectionController",t.default=r.default.getClassFactory(n)},"./src/streaming/protection/controllers/ProtectionKeyController.js":function(e,t,r){"use strict";r.r(t);var h=r("./src/streaming/protection/CommonEncryption.js"),l=r("./src/streaming/protection/drm/KeySystemClearKey.js"),c=r("./src/streaming/protection/drm/KeySystemW3CClearKey.js"),p=r("./src/streaming/protection/drm/KeySystemWidevine.js"),y=r("./src/streaming/protection/drm/KeySystemPlayReady.js"),E=r("./src/streaming/protection/servers/DRMToday.js"),_=r("./src/streaming/protection/servers/PlayReady.js"),v=r("./src/streaming/protection/servers/Widevine.js"),T=r("./src/streaming/protection/servers/ClearKey.js"),b=r("./src/streaming/constants/ProtectionConstants.js");function n(){var t,r,n,f,i,a,o,s,u=this.context;function d(e,t){return t&&e in t?t[e]:null}function g(e,t){return e&&e.sessionId?e.sessionId:t&&t.sessionId?t.sessionId:null}function m(e,t){return e&&e.sessionType?e.sessionType:t}return t={initialize:function(){var e;f=[],e=(0,y.default)(u).getInstance({BASE64:i,settings:a}),f.push(e),e=(0,p.default)(u).getInstance({BASE64:i}),f.push(e),e=(0,l.default)(u).getInstance({BASE64:i}),f.push(e),o=e,e=(0,c.default)(u).getInstance({BASE64:i,debug:r}),f.push(e),s=e},setProtectionData:function(e){for(var t,r=0;r<f.length;r++){var n=f[r];n.hasOwnProperty("init")&&n.init((n=n.systemString,void 0,t=null,t=e?n in e?e[n]:null:t))}},isClearKey:function(e){return e===o||e===s},initDataEquals:function(e,t){if(e.byteLength!==t.byteLength)return!1;for(var r=new Uint8Array(e),n=new Uint8Array(t),i=0;i<r.length;i++)if(r[i]!==n[i])return!1;return!0},getKeySystems:function(){return f},setKeySystems:function(e){f=e},getKeySystemBySystemString:function(e){for(var t=0;t<f.length;t++)if(f[t].systemString===e)return f[t];return null},getSupportedKeySystemsFromContentProtection:function(e,t,r){var n=[];if(e)for(var i=h.default.findCencContentProtection(e),a=0;a<f.length;++a)for(var o,s,u,l=d((o=f[a]).systemString,t),c=0;c<e.length;++c)(u=e[c]).schemeIdUri.toLowerCase()===o.schemeIdURI&&(s=o.getInitData(u,i),n.push({ks:f[a],keyId:u.keyId,initData:s,protData:l,cdmData:o.getCDMData(l?l.cdmData:null),sessionId:g(l,u),sessionType:m(l,r)}));return n},getSupportedKeySystemsFromSegmentPssh:function(e,t,r){for(var n=[],i=h.default.parsePSSHList(e),a=0;a<f.length;++a){var o,s=d((o=f[a]).systemString,t);o.uuid in i&&n.push({ks:o,initData:i[o.uuid],protData:s,cdmData:o.getCDMData(s?s.cdmData:null),sessionId:g(s),sessionType:m(s,r)})}return n},getLicenseServerModelInstance:function(e,t,r){return"license-release"===r||"individualization-request"===r?null:(r=null,t&&t.hasOwnProperty("drmtoday")?r=(0,E.default)(u).getInstance({BASE64:i}):e.systemString===b.default.WIDEVINE_KEYSTEM_STRING?r=(0,v.default)(u).getInstance():e.systemString===b.default.PLAYREADY_KEYSTEM_STRING?r=(0,_.default)(u).getInstance():e.systemString===b.default.CLEARKEY_KEYSTEM_STRING&&(r=(0,T.default)(u).getInstance()),r)},processClearKeyLicenseRequest:function(e,t,r){try{return e.getClearKeysFromProtectionData(t,r)}catch(e){return n.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(e){e&&(e.debug&&(r=e.debug,n=r.getLogger(t)),e.BASE64&&(i=e.BASE64),e.settings&&(a=e.settings))}}}n.__dashjs_factory_name="ProtectionKeyController",t.default=dashjs.FactoryMaker.getSingletonFactory(n)},"./src/streaming/protection/drm/KeySystemClearKey.js":function(e,t,r){"use strict";r.r(t);var u=r("./src/streaming/protection/vo/KeyPair.js"),l=r("./src/streaming/protection/vo/ClearKeyKeySet.js"),a=r("./src/streaming/protection/CommonEncryption.js"),r=r("./src/streaming/constants/ProtectionConstants.js"),n="e2719d58-a985-b3c9-781a-b030af78d30e",o=r.default.CLEARKEY_KEYSTEM_STRING;function i(e){var i=(e=e||{}).BASE64;return{uuid:n,schemeIdURI:"urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e",systemString:o,getInitData:function(e,t){try{var r,n=a.default.parseInitDataFromContentProtection(e,i);return!n&&t&&(r={kids:[function(e){try{var t=e.replace(/-/g,"");return(t=btoa(t.match(/\w{2}/g).map(function(e){return String.fromCharCode(parseInt(e,16))}).join(""))).replace(/=/g,"").replace(/\//g,"_").replace(/\+/g,"-")}catch(e){return null}}(t["cenc:default_KID"])]},n=(new TextEncoder).encode(JSON.stringify(r))),n}catch(e){return null}},getRequestHeadersFromMessage:function(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function(e){return JSON.stringify(JSON.parse(String.fromCharCode.apply(null,new Uint8Array(e))))},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(e,t){var r=null;if(e){for(var n=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),i=[],a=0;a<n.kids.length;a++){var o=n.kids[a],s=e.clearkeys&&e.clearkeys.hasOwnProperty(o)?e.clearkeys[o]:null;if(!s)throw new Error("DRM: ClearKey keyID ("+o+") is not known!");i.push(new u.default(o,s))}r=new l.default(i)}return r}}}i.__dashjs_factory_name="KeySystemClearKey",t.default=dashjs.FactoryMaker.getSingletonFactory(i)},"./src/streaming/protection/drm/KeySystemPlayReady.js":function(e,t,r){"use strict";r.r(t);var c=r("./src/streaming/protection/CommonEncryption.js"),r=r("./src/streaming/constants/ProtectionConstants.js"),n="9a04f079-9840-4286-ab92-e65be0885f95",i=r.default.PLAYREADY_KEYSTEM_STRING;function a(e){var o="utf-16",u=(e=e||{}).BASE64,s=e.settings;function l(){if(!u||!u.hasOwnProperty("decodeArray")||!u.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return{uuid:n,schemeIdURI:"urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95",systemString:i,getInitData:function(e){var t,r,n,i=new Uint8Array([112,115,115,104,0,0,0,0]),a=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),o=0,s=null;if(l(),!e)return null;if("pssh"in e)return c.default.parseInitDataFromContentProtection(e,u);if("pro"in e)s=u.decodeArray(e.pro.__text);else{if(!("prheader"in e))return null;s=u.decodeArray(e.prheader.__text)}return e=s.length,t=4+i.length+a.length+4+e,n=new ArrayBuffer(t),r=new Uint8Array(n),(n=new DataView(n)).setUint32(0,t),o+=4,r.set(i,4),o+=i.length,r.set(a,o),o+=a.length,n.setUint32(o,e),r.set(s,o+=4),r.buffer},getRequestHeadersFromMessage:function(e){var t={},r=new DOMParser;if(s&&s.get().streaming.protection.detectPlayreadyMessageFormat&&"utf-16"===o&&e&&e.byteLength%2==1)return t["Content-Type"]="text/xml; charset=utf-8",t;for(var e=new("utf-16"===o?Uint16Array:Uint8Array)(e),e=String.fromCharCode.apply(null,e),n=(r=r.parseFromString(e,"application/xml")).getElementsByTagName("name"),i=r.getElementsByTagName("value"),a=0;a<n.length;a++)t[n[a].childNodes[0].nodeValue]=i[a].childNodes[0].nodeValue;return t.hasOwnProperty("Content")&&(t["Content-Type"]=t.Content,delete t.Content),t.hasOwnProperty("Content-Type")||(t["Content-Type"]="text/xml; charset=utf-8"),t},getLicenseRequestFromMessage:function(e){var t=null,r=new DOMParser;if(s&&s.get().streaming.protection.detectPlayreadyMessageFormat&&"utf-16"===o&&e&&e.byteLength%2==1)return e;var n=new("utf-16"===o?Uint16Array:Uint8Array)(e),n=(l(),String.fromCharCode.apply(null,n));return(r=r.parseFromString(n,"application/xml")).getElementsByTagName("PlayReadyKeyMessage")[0]?(n=r.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue,t=n?u.decode(n):t):e},getLicenseServerURLFromInitData:function(e){if(e)for(var t=new DataView(e),r=t.getUint16(4,!0),n=6,i=new DOMParser,a=0;a<r;a++){var o=t.getUint16(n,!0),s=(n+=2,t.getUint16(n,!0));if(n+=2,1!==o)n+=s;else{o=e.slice(n,n+s),s=String.fromCharCode.apply(null,new Uint16Array(o)),o=i.parseFromString(s,"application/xml");if(o.getElementsByTagName("LA_URL")[0]){s=o.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(s)return s}if(o.getElementsByTagName("LUI_URL")[0]){s=o.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(s)return s}}}return null},getCDMData:function(e){var t,r,n,i;if(l(),!e)return null;for(t=[],i=0;i<e.length;++i)t.push(e.charCodeAt(i)),t.push(0);for(t=String.fromCharCode.apply(null,t),t=u.encode(t),r='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",t),n=[],i=0;i<r.length;++i)n.push(r.charCodeAt(i)),n.push(0);return new Uint8Array(n).buffer},setPlayReadyMessageFormat:function(e){if("utf-8"!==e&&"utf-16"!==e)throw new Error('Specified message format is not one of "utf-8" or "utf-16"');o=e}}}a.__dashjs_factory_name="KeySystemPlayReady",t.default=dashjs.FactoryMaker.getSingletonFactory(a)},"./src/streaming/protection/drm/KeySystemW3CClearKey.js":function(e,t,r){"use strict";r.r(t);var l=r("./src/streaming/protection/vo/KeyPair.js"),c=r("./src/streaming/protection/vo/ClearKeyKeySet.js"),n=r("./src/streaming/protection/CommonEncryption.js"),r=r("./src/streaming/constants/ProtectionConstants.js"),i="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",a=r.default.CLEARKEY_KEYSTEM_STRING;function o(e){var t=e.BASE64,u=e.debug.getLogger(void 0);return{uuid:i,schemeIdURI:"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",systemString:a,getInitData:function(e){return n.default.parseInitDataFromContentProtection(e,t)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(e,t){var r=null;if(e){for(var n=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),i=[],a=0;a<n.kids.length;a++){var o=n.kids[a],s=e.clearkeys&&e.clearkeys.hasOwnProperty(o)?e.clearkeys[o]:null;if(!s)throw new Error("DRM: ClearKey keyID ("+o+") is not known!");i.push(new l.default(o,s))}r=new c.default(i),u.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return r}}}o.__dashjs_factory_name="KeySystemW3CClearKey",t.default=dashjs.FactoryMaker.getSingletonFactory(o)},"./src/streaming/protection/drm/KeySystemWidevine.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/streaming/protection/CommonEncryption.js"),r=r("./src/streaming/constants/ProtectionConstants.js"),i="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",a=r.default.WIDEVINE_KEYSTEM_STRING;function o(e){var t=(e=e||{}).BASE64;return{uuid:i,schemeIdURI:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",systemString:a,getInitData:function(e){return n.default.parseInitDataFromContentProtection(e,t)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null}}}o.__dashjs_factory_name="KeySystemWidevine",t.default=dashjs.FactoryMaker.getSingletonFactory(o)},"./src/streaming/protection/errors/ProtectionErrors.js":function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=s(r),t=(e=n?(e=s(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==i(e)&&"function"!=typeof e){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.r(t);r=new(function(e){var t=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e);var r=o(n);function n(){var e;if(this instanceof n)return(e=r.call(this)).MEDIA_KEYERR_CODE=100,e.MEDIA_KEYERR_UNKNOWN_CODE=101,e.MEDIA_KEYERR_CLIENT_CODE=102,e.MEDIA_KEYERR_SERVICE_CODE=103,e.MEDIA_KEYERR_OUTPUT_CODE=104,e.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,e.MEDIA_KEYERR_DOMAIN_CODE=106,e.MEDIA_KEY_MESSAGE_ERROR_CODE=107,e.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,e.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,e.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,e.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,e.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,e.KEY_SESSION_CREATED_ERROR_CODE=113,e.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,e.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",e.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",e.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",e.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",e.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",e.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",e.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",e.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",e.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",e.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",e.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",e.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",e.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",e.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --",e;throw new TypeError("Cannot call a class as a function")}return n}(r("./src/core/errors/ErrorsBase.js").default));t.default=r},"./src/streaming/protection/models/ProtectionModel_01b.js":function(e,t,r){"use strict";r.r(t);var _=r("./src/streaming/protection/controllers/ProtectionKeyController.js"),v=r("./src/streaming/protection/vo/NeedKey.js"),T=r("./src/streaming/vo/DashJSError.js"),b=r("./src/streaming/protection/vo/KeyMessage.js"),S=r("./src/streaming/protection/vo/KeySystemConfiguration.js"),A=r("./src/streaming/protection/vo/KeySystemAccess.js"),R=r("./src/streaming/protection/errors/ProtectionErrors.js");function n(e){var a,h,i,p,o,s,u,r,t=this.context,y=(e=e||{}).eventBus,E=e.events,n=e.debug,l=e.api,c=e.errHandler;function f(){h&&m();for(var e=0;e<s.length;e++)d(s[e]);y.trigger(E.TEARDOWN_COMPLETE)}function d(t){try{h[l.cancelKeyRequest](i.systemString,t.sessionId)}catch(e){y.trigger(E.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+t.sessionId+") "+e.message})}}function g(e,t){if(t&&e){for(var r=e.length,n=0;n<r;n++)if(e[n].sessionId==t)return e[n];return null}return null}function m(){h.removeEventListener(l.keyerror,r),h.removeEventListener(l.needkey,r),h.removeEventListener(l.keymessage,r),h.removeEventListener(l.keyadded,r)}return a=n.getLogger(e={getAllInitData:function(){for(var e=[],t=0;t<o.length;t++)e.push(o[t].initData);for(var r=0;r<s.length;r++)e.push(s[r].initData);return e},getSessions:function(){return s.concat(o)},requestKeySystemAccess:function(m){return new Promise(function(e,t){for(var r,n=(n=h)||document.createElement("video"),i=!1,a=0;a<m.length;a++)for(var o=m[a].ks.systemString,s=m[a].configs,u=null,l=0;l<s.length;l++){var c=s[l].videoCapabilities;if(c&&0!==c.length)for(var u=[],f=0;f<c.length;f++)""!==n.canPlayType(c[f].contentType,o)&&u.push(c[f]);if(u&&0!==u.length){var i=!0,d=new S.default(null,u),g=p.getKeySystemBySystemString(o),g=new A.default(g,d);y.trigger(E.KEY_SYSTEM_ACCESS_COMPLETE,{data:g}),e({data:g});break}}i||(y.trigger(E.KEY_SYSTEM_ACCESS_COMPLETE,{error:r="Key system access denied! -- No valid audio/video content configurations detected!"}),t({error:r}))})},selectKeySystem:function(e){return i=e.keySystem,Promise.resolve(i)},setMediaElement:function(e){if(h!==e){if(h){m();for(var t=0;t<s.length;t++)d(s[t]);s=[]}(h=e)&&(h.addEventListener(l.keyerror,r),h.addEventListener(l.needkey,r),h.addEventListener(l.keymessage,r),h.addEventListener(l.keyadded,r),y.trigger(E.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(e){if(!i)throw new Error("Can not create sessions until you have selected a key system");var t;if(u||0===s.length)return t={sessionId:null,keyId:e.keyId,initData:e.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}},o.push(t),h[l.generateKeyRequest](i.systemString,new Uint8Array(e.initData)),t;throw new Error("Multiple sessions not allowed!")},updateKeySession:function(e,t){var r=e.sessionId;if(p.isClearKey(i))for(var n=0;n<t.keyPairs.length;n++)h[l.addKey](i.systemString,t.keyPairs[n].key,t.keyPairs[n].keyID,r);else h[l.addKey](i.systemString,new Uint8Array(t),new Uint8Array(e.initData),r);y.trigger(E.KEY_SESSION_UPDATED)},closeKeySession:d,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:f,reset:f}),o=[],s=[],p=(i=h=null,_.default)(t).getInstance(),r={handleEvent:function(e){var t=null;switch(e.type){case l.needkey:var r=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;y.trigger(E.NEED_KEY,{key:new v.default(r,"cenc")});break;case l.keyerror:if(t=(t=g(s,e.sessionId))||g(o,e.sessionId)){var n=R.default.MEDIA_KEYERR_CODE,i="";switch(e.errorCode.code){case 1:n=R.default.MEDIA_KEYERR_UNKNOWN_CODE,i+="MEDIA_KEYERR_UNKNOWN - "+R.default.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:n=R.default.MEDIA_KEYERR_CLIENT_CODE,i+="MEDIA_KEYERR_CLIENT - "+R.default.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:n=R.default.MEDIA_KEYERR_SERVICE_CODE,i+="MEDIA_KEYERR_SERVICE - "+R.default.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:n=R.default.MEDIA_KEYERR_OUTPUT_CODE,i+="MEDIA_KEYERR_OUTPUT - "+R.default.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:n=R.default.MEDIA_KEYERR_HARDWARECHANGE_CODE,i+="MEDIA_KEYERR_HARDWARECHANGE - "+R.default.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:n=R.default.MEDIA_KEYERR_DOMAIN_CODE,i+="MEDIA_KEYERR_DOMAIN - "+R.default.MEDIA_KEYERR_DOMAIN_MESSAGE}i+="  System Code = "+e.systemCode,y.trigger(E.KEY_ERROR,{error:new T.default(n,i,t)})}else a.error("No session token found for key error");break;case l.keyadded:(t=(t=g(s,e.sessionId))||g(o,e.sessionId))?(a.debug("DRM: Key added."),y.trigger(E.KEY_ADDED,{data:t})):a.debug("No session token found for key added");break;case l.keymessage:(u=null!==e.sessionId&&void 0!==e.sessionId)?!(t=g(s,e.sessionId))&&0<o.length&&(t=o.shift(),s.push(t),t.sessionId=e.sessionId,y.trigger(E.KEY_SESSION_CREATED,{data:t})):0<o.length&&(t=o.shift(),s.push(t),0!==o.length&&c.error(new T.default(R.default.MEDIA_KEY_MESSAGE_ERROR_CODE,R.default.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),t?(r=ArrayBuffer.isView(e.message)?e.message.buffer:e.message,t.keyMessage=r,y.trigger(E.INTERNAL_KEY_MESSAGE,{data:new b.default(t,r,e.defaultURL)})):a.warn("No session token found for key message")}}},e}n.__dashjs_factory_name="ProtectionModel_01b",t.default=dashjs.FactoryMaker.getClassFactory(n)},"./src/streaming/protection/models/ProtectionModel_21Jan2015.js":function(e,t,r){"use strict";r.r(t);var y=r("./src/streaming/protection/controllers/ProtectionKeyController.js"),E=r("./src/streaming/protection/vo/NeedKey.js"),_=r("./src/streaming/protection/errors/ProtectionErrors.js"),v=r("./src/streaming/vo/DashJSError.js"),T=r("./src/streaming/protection/vo/KeyMessage.js"),b=r("./src/streaming/protection/vo/KeySystemAccess.js"),S=r("./src/streaming/constants/ProtectionConstants.js"),A={};function n(e){var u,a,n,o,s,i,l,t=this.context,c=(e=e||{}).eventBus,f=e.events,e=e.debug;function d(r,n){return new Promise(function(e,t){!function t(r,n,i,a,o){var s=r[i];u.debug("Requesting key system access for system string ".concat(s));navigator.requestMediaKeySystemAccess(s,n).then(function(e){e.selectedSystemString=s,a(e)}).catch(function(e){i+1<r.length?t(r,n,i+1,a,o):o(e)})}(r,n,0,e,t)})}function g(e){if(!e||!e.session)return Promise.resolve;var t=e.session;return t.removeEventListener("keystatuseschange",e),t.removeEventListener("message",e),t.close()}function m(e){for(var t=0;t<s.length;t++)if(s[t]===e){s.splice(t,1);break}}function h(e){var t,r;return e&&0<e.length&&(e[0]&&("string"==typeof e[0]?t=e[0]:r=e[0]),e[1]&&("string"==typeof e[1]?t=e[1]:r=e[1])),{status:t,keyId:r}}function p(t,e){var r={session:t,keyId:e.keyId,initData:e.initData,sessionId:e.sessionId,sessionType:e.sessionType,handleEvent:function(e){switch(e.type){case"keystatuseschange":c.trigger(f.KEY_STATUSES_CHANGED,{data:this}),e.target.keyStatuses.forEach(function(){var e=h(arguments);"expired"===e.status?c.trigger(f.INTERNAL_KEY_STATUS_CHANGED,{error:new v.default(_.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,_.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)}):c.trigger(f.INTERNAL_KEY_STATUS_CHANGED,e)});break;case"message":var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;c.trigger(f.INTERNAL_KEY_MESSAGE,{data:new T.default(this,t,void 0,e.messageType)})}},getKeyId:function(){return this.keyId},getSessionId:function(){return t.sessionId},getSessionType:function(){return this.sessionType},getExpirationTime:function(){return t.expiration},getKeyStatuses:function(){return t.keyStatuses},getUsable:function(){var e=!1;return t.keyStatuses.forEach(function(){"usable"===h(arguments).status&&(e=!0)}),e}};return t.addEventListener("keystatuseschange",r),t.addEventListener("message",r),t.closed.then(function(){m(r),u.debug("DRM: Session closed.  SessionID = "+r.getSessionId()),c.trigger(f.KEY_SESSION_CLOSED,{data:r.getSessionId()})}),s.push(r),r}return u=e.getLogger(e={getAllInitData:function(){for(var e=[],t=0;t<s.length;t++)s[t].initData&&e.push(s[t].initData);return e},getSessions:function(){return s},requestKeySystemAccess:function(r){return new Promise(function(e,t){!function r(n,i,a,o){if(void 0===navigator.requestMediaKeySystemAccess||"function"!=typeof navigator.requestMediaKeySystemAccess)return e="Insecure origins are not allowed",c.trigger(f.KEY_SYSTEM_ACCESS_COMPLETE,{error:e}),void o({error:e});var e=n[i].protData&&n[i].protData.systemStringPriority?n[i].protData.systemStringPriority:null;var t=n[i].configs;var s=n[i].ks;var u=s.systemString;e=e||A[u]||[u];d(e,t).then(function(e){var t="function"==typeof e.getConfiguration?e.getConfiguration():null,t=new b.default(s,t);t.mksa=e,c.trigger(f.KEY_SYSTEM_ACCESS_COMPLETE,{data:t}),a({data:t})}).catch(function(e){var t;i+1<n.length?r(n,i+1,a,o):(t="Key system access denied! ",c.trigger(f.KEY_SYSTEM_ACCESS_COMPLETE,{error:t+e.message}),o({error:t+e.message}))})}(r,0,e,t)})},selectKeySystem:function(r){return new Promise(function(e,t){r.mksa.createMediaKeys().then(function(e){return a=r.keySystem,o=e,n?n.setMediaKeys(o):Promise.resolve()}).then(function(){e(a)}).catch(function(){t({error:"Error selecting keys system ("+r.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})})},setMediaElement:function(e){n!==e&&(n&&(n.removeEventListener("encrypted",i),n.setMediaKeys&&n.setMediaKeys(null)),(n=e)&&(n.addEventListener("encrypted",i),n.setMediaKeys&&o&&n.setMediaKeys(o)))},setServerCertificate:function(e){if(!a||!o)throw new Error("Can not set server certificate until you have selected a key system");o.setServerCertificate(e).then(function(){u.info("DRM: License server certificate successfully updated."),c.trigger(f.SERVER_CERTIFICATE_UPDATED)}).catch(function(e){c.trigger(f.SERVER_CERTIFICATE_UPDATED,{error:new v.default(_.default.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,_.default.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+e.name)})})},createKeySession:function(e){if(!a||!o)throw new Error("Can not create sessions until you have selected a key system");var t=o.createSession(e.sessionType),r=p(t,e),n=a.systemString===S.default.CLEARKEY_KEYSTEM_STRING&&(e.initData||e.protData&&e.protData.clearkeys)?S.default.INITIALIZATION_DATA_TYPE_KEYIDS:S.default.INITIALIZATION_DATA_TYPE_CENC;t.generateRequest(n,e.initData).then(function(){u.debug("DRM: Session created.  SessionID = "+r.getSessionId()),c.trigger(f.KEY_SESSION_CREATED,{data:r})}).catch(function(e){m(r),c.trigger(f.KEY_SESSION_CREATED,{data:null,error:new v.default(_.default.KEY_SESSION_CREATED_ERROR_CODE,_.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+e.name)})})},updateKeySession:function(t,e){var r=t.session;l.isClearKey(a)&&(e=e.toJWK()),r.update(e).then(function(){c.trigger(f.KEY_SESSION_UPDATED)}).catch(function(e){c.trigger(f.KEY_ERROR,{error:new v.default(_.default.MEDIA_KEYERR_CODE,"Error sending update() message! "+e.name,t)})})},loadKeySession:function(e){if(!a||!o)throw new Error("Can not load sessions until you have selected a key system");for(var t=e.sessionId,r=0;r<s.length;r++)if(t===s[r].sessionId)return void u.warn("DRM: Ignoring session ID because we have already seen it!");var n=o.createSession(e.sessionType),i=p(n,e);n.load(t).then(function(e){e?(u.debug("DRM: Session loaded.  SessionID = "+i.getSessionId()),c.trigger(f.KEY_SESSION_CREATED,{data:i})):(m(i),c.trigger(f.KEY_SESSION_CREATED,{data:null,error:new v.default(_.default.KEY_SESSION_CREATED_ERROR_CODE,_.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+t+")")}))}).catch(function(e){m(i),c.trigger(f.KEY_SESSION_CREATED,{data:null,error:new v.default(_.default.KEY_SESSION_CREATED_ERROR_CODE,_.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+t+")! "+e.name)})})},removeKeySession:function(t){t.session.remove().then(function(){u.debug("DRM: Session removed.  SessionID = "+t.getSessionId()),c.trigger(f.KEY_SESSION_REMOVED,{data:t.getSessionId()})},function(e){c.trigger(f.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+t.getSessionId()+"). "+e.name})})},closeKeySession:function(t){g(t).catch(function(e){m(t),c.trigger(f.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+t.getSessionId()+") "+e.name})})},stop:function(){for(var e,t=0;t<s.length;t++)(e=s[t]).getUsable()||(g(e),m(e))},reset:function(){var e=s.length;if(0!==e)for(var t,r=0;r<e;r++)g(t=t=s[r]),m(t),0===s.length&&(n?(n.removeEventListener("encrypted",i),n.setMediaKeys(null).then(function(){c.trigger(f.TEARDOWN_COMPLETE)})):c.trigger(f.TEARDOWN_COMPLETE));else c.trigger(f.TEARDOWN_COMPLETE)}}),s=[],l=(o=n=a=null,y.default)(t).getInstance(),i={handleEvent:function(e){var t;"encrypted"===e.type&&e.initData&&(t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData,c.trigger(f.NEED_KEY,{key:new E.default(t,e.initDataType)}))}},e}A[S.default.PLAYREADY_KEYSTEM_STRING]=[S.default.PLAYREADY_KEYSTEM_STRING,S.default.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING],A[S.default.WIDEVINE_KEYSTEM_STRING]=[S.default.WIDEVINE_KEYSTEM_STRING],A[S.default.CLEARKEY_KEYSTEM_STRING]=[S.default.CLEARKEY_KEYSTEM_STRING],n.__dashjs_factory_name="ProtectionModel_21Jan2015",t.default=dashjs.FactoryMaker.getClassFactory(n)},"./src/streaming/protection/models/ProtectionModel_3Feb2014.js":function(e,t,r){"use strict";r.r(t);var g=r("./src/streaming/protection/controllers/ProtectionKeyController.js"),m=r("./src/streaming/protection/vo/NeedKey.js"),h=r("./src/streaming/vo/DashJSError.js"),p=r("./src/streaming/protection/errors/ProtectionErrors.js"),T=r("./src/streaming/protection/vo/KeyMessage.js"),b=r("./src/streaming/protection/vo/KeySystemConfiguration.js"),S=r("./src/streaming/protection/vo/KeySystemAccess.js");function n(e){var r,n,i,a,o,s,t,y,u=this.context,E=(e=e||{}).eventBus,_=e.events,l=e.debug,v=e.api;function c(){try{for(var e=0;e<s.length;e++)f(s[e]);n&&n.removeEventListener(v.needkey,t),E.trigger(_.TEARDOWN_COMPLETE)}catch(e){E.trigger(_.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+e.message})}}function f(e){var t=e.session;t.removeEventListener(v.error,e),t.removeEventListener(v.message,e),t.removeEventListener(v.ready,e),t.removeEventListener(v.close,e);for(var r=0;r<s.length;r++)if(s[r]===e){s.splice(r,1);break}t[v.release]()}function d(){function e(){n.removeEventListener("loadedmetadata",t),n[v.setMediaKeys](a),E.trigger(_.VIDEO_ELEMENT_SELECTED)}var t=null;1<=n.readyState?e():(t=e.bind(this),n.addEventListener("loadedmetadata",t))}return r=l.getLogger(e={getAllInitData:function(){for(var e=[],t=0;t<s.length;t++)e.push(s[t].initData);return e},getSessions:function(){return s},requestKeySystemAccess:function(p){return new Promise(function(e,t){for(var r,n=!1,i=0;i<p.length;i++)for(var a=p[i].ks.systemString,o=p[i].configs,s=null,u=null,l=0;l<o.length;l++){var c=o[l].audioCapabilities,f=o[l].videoCapabilities;if(c&&0!==c.length)for(var s=[],d=0;d<c.length;d++)window[v.MediaKeys].isTypeSupported(a,c[d].contentType)&&s.push(c[d]);if(f&&0!==f.length)for(var u=[],g=0;g<f.length;g++)window[v.MediaKeys].isTypeSupported(a,f[g].contentType)&&u.push(f[g]);if(!(!s&&!u||s&&0===s.length||u&&0===u.length)){var n=!0,m=new b.default(s,u),h=y.getKeySystemBySystemString(a),h=new S.default(h,m);E.trigger(_.KEY_SYSTEM_ACCESS_COMPLETE,{data:h}),e({data:h});break}}n||(E.trigger(_.KEY_SYSTEM_ACCESS_COMPLETE,{error:r="Key system access denied! -- No valid audio/video content configurations detected!"}),t({error:r}))})},selectKeySystem:function(r){return new Promise(function(e,t){try{a=r.mediaKeys=new window[v.MediaKeys](r.keySystem.systemString),i=r.keySystem,o=r,n&&d(),e(i)}catch(e){t({error:"Error selecting keys system ("+i.systemString+")! Could not create MediaKeys -- TODO"})}})},setMediaElement:function(e){n!==e&&(n&&n.removeEventListener(v.needkey,t),(n=e)&&(n.addEventListener(v.needkey,t),a&&d()))},createKeySession:function(e){if(!i||!a||!o)throw new Error("Can not create sessions until you have selected a key system");var t=null;if(null===(t=null===(t=o.ksConfiguration.videoCapabilities&&0<o.ksConfiguration.videoCapabilities.length?o.ksConfiguration.videoCapabilities[0]:t)&&o.ksConfiguration.audioCapabilities&&0<o.ksConfiguration.audioCapabilities.length?o.ksConfiguration.audioCapabilities[0]:t))throw new Error("Can not create sessions for unknown content types.");t=t.contentType,t=a.createSession(t,new Uint8Array(e.initData),e.cdmData?new Uint8Array(e.cdmData):null),e={session:t,keyId:e.keyId,initData:e.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(e){switch(e.type){case v.error:E.trigger(_.KEY_ERROR,{error:new h.default(p.default.MEDIA_KEYERR_CODE,"KeyError",this)});break;case v.message:var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;E.trigger(_.INTERNAL_KEY_MESSAGE,{data:new T.default(this,t,e.destinationURL)});break;case v.ready:r.debug("DRM: Key added."),E.trigger(_.KEY_ADDED);break;case v.close:r.debug("DRM: Session closed.  SessionID = "+this.getSessionId()),E.trigger(_.KEY_SESSION_CLOSED,{data:this.getSessionId()})}}},t.addEventListener(v.error,e),t.addEventListener(v.message,e),t.addEventListener(v.ready,e),t.addEventListener(v.close,e),s.push(e),r.debug("DRM: Session created.  SessionID = "+e.getSessionId()),E.trigger(_.KEY_SESSION_CREATED,{data:e})},updateKeySession:function(e,t){e=e.session,y.isClearKey(i)?e.update(new Uint8Array(t.toJWK())):e.update(new Uint8Array(t)),E.trigger(_.KEY_SESSION_UPDATED)},closeKeySession:f,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:c,reset:c}),s=[],y=(o=a=i=n=null,g.default)(u).getInstance(),t={handleEvent:function(e){e.type===v.needkey&&e.initData&&(e=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData,E.trigger(_.NEED_KEY,{key:new m.default(e,"cenc")}))}},e}n.__dashjs_factory_name="ProtectionModel_3Feb2014",t.default=dashjs.FactoryMaker.getClassFactory(n)},"./src/streaming/protection/servers/ClearKey.js":function(e,t,r){"use strict";r.r(t);var a=r("./src/streaming/protection/vo/KeyPair.js"),o=r("./src/streaming/protection/vo/ClearKeyKeySet.js");function n(){return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"json"},getLicenseMessage:function(e){if(!e.hasOwnProperty("keys"))return null;for(var t=[],r=0;r<e.keys.length;r++){var n=e.keys[r],i=n.kid.replace(/=/g,""),n=n.k.replace(/=/g,"");t.push(new a.default(i,n))}return new o.default(t)},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}}n.__dashjs_factory_name="ClearKey",t.default=dashjs.FactoryMaker.getSingletonFactory(n)},"./src/streaming/protection/servers/DRMToday.js":function(e,t,r){"use strict";r.r(t);var i=r("./src/streaming/constants/ProtectionConstants.js");function n(e){var r=(e=e||{}).BASE64,n={};return n[i.default.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(e){return r.decodeArray(e.license)},getErrorResponse:function(e){return e}},n[i.default.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}},{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(e){return n[e].responseType},getLicenseMessage:function(e,t){if(r&&r.hasOwnProperty("decodeArray"))return n[t].getLicenseMessage(e);throw new Error("Missing config parameter(s)")},getErrorResponse:function(e,t){return n[t].getErrorResponse(e)}}}n.__dashjs_factory_name="DRMToday",t.default=dashjs.FactoryMaker.getSingletonFactory(n)},"./src/streaming/protection/servers/PlayReady.js":function(e,t,r){"use strict";r.r(t);r=r("./src/core/FactoryMaker.js");function n(){var s="http://schemas.xmlsoap.org/soap/envelope/";function u(e){e=String.fromCharCode.apply(null,new Uint8Array(e));return decodeURIComponent(escape(e))}return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(e){return function(e){if(window.DOMParser){var t=u(e),t=(new window.DOMParser).parseFromString(t,"text/xml"),t=t?t.getElementsByTagNameNS(s,"Envelope")[0]:null,t=t?t.getElementsByTagNameNS(s,"Body")[0]:null;if(t?t.getElementsByTagNameNS(s,"Fault")[0]:null)return null}return e}.call(this,e)},getErrorResponse:function(e){return function(e){var t="",r="",n="";if(window.DOMParser){var e=u(e),i=(new window.DOMParser).parseFromString(e,"text/xml"),i=i?i.getElementsByTagNameNS(s,"Envelope")[0]:null,i=i?i.getElementsByTagNameNS(s,"Body")[0]:null,i=i?i.getElementsByTagNameNS(s,"Fault")[0]:null,a=i?i.getElementsByTagName("detail")[0]:null,a=a?a.getElementsByTagName("Exception")[0]:null,o=null;if(null===i)return e;t=(o=i.getElementsByTagName("faultstring")[0].firstChild)?o.nodeValue:null,null!==a&&(r=(o=a.getElementsByTagName("StatusCode")[0])?o.firstChild.nodeValue:null,e=(n=(o=a.getElementsByTagName("Message")[0])?o.firstChild.nodeValue:null)?n.lastIndexOf("[")+1:-1,i=n?n.indexOf("]"):-1,n=n?n.substring(e,i):"")}return a="code: ".concat(r,", name: ").concat(t),n&&(a+=", message: ".concat(n)),a}.call(this,e)}}}n.__dashjs_factory_name="PlayReady",t.default=r.default.getSingletonFactory(n)},"./src/streaming/protection/servers/Widevine.js":function(e,t,r){"use strict";function n(){return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}}r.r(t),n.__dashjs_factory_name="Widevine",t.default=dashjs.FactoryMaker.getSingletonFactory(n)},"./src/streaming/protection/vo/ClearKeyKeySet.js":function(e,t,r){"use strict";function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.r(t);r=function(){function r(e,t){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");if(t&&"persistent"!==t&&"temporary"!==t)throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=e,this.type=t}var e,t,n;return e=r,(t=[{key:"toJWK",value:function(){for(var e=this.keyPairs.length,t={keys:[]},r=0;r<e;r++){var n={kty:"oct",alg:"A128KW",kid:this.keyPairs[r].keyID,k:this.keyPairs[r].key};t.keys.push(n)}this.type&&(t.type=this.type);var i=JSON.stringify(t),a=i.length,o=new ArrayBuffer(a),s=new Uint8Array(o);for(r=0;r<a;r++)s[r]=i.charCodeAt(r);return o}}])&&i(e.prototype,t),n&&i(e,n),r}();t.default=r},"./src/streaming/protection/vo/KeyMessage.js":function(e,t,r){"use strict";r.r(t),t.default=function e(t,r,n,i){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.sessionToken=t,this.message=r,this.defaultURL=n,this.messageType=i||"license-request"}},"./src/streaming/protection/vo/KeyPair.js":function(e,t,r){"use strict";r.r(t),t.default=function e(t,r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.keyID=t,this.key=r}},"./src/streaming/protection/vo/KeySystemAccess.js":function(e,t,r){"use strict";r.r(t),t.default=function e(t,r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.keySystem=t,this.ksConfiguration=r}},"./src/streaming/protection/vo/KeySystemConfiguration.js":function(e,t,r){"use strict";r.r(t),t.default=function e(t,r,n,i,a){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.initDataTypes=["cenc"],t&&t.length&&(this.audioCapabilities=t),r&&r.length&&(this.videoCapabilities=r),this.distinctiveIdentifier=n,this.persistentState=i,this.sessionTypes=a}},"./src/streaming/protection/vo/LicenseRequest.js":function(e,t,r){"use strict";r.r(t),t.default=function e(t,r,n,i,a,o,s,u){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.url=t,this.method=r,this.responseType=n,this.headers=i,this.withCredentials=a,this.messageType=o,this.sessionId=s,this.data=u}},"./src/streaming/protection/vo/LicenseResponse.js":function(e,t,r){"use strict";r.r(t),t.default=function e(t,r,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.url=t,this.headers=r,this.data=n}},"./src/streaming/protection/vo/MediaCapability.js":function(e,t,r){"use strict";r.r(t),t.default=function e(t,r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.contentType=t,this.robustness=r}},"./src/streaming/protection/vo/NeedKey.js":function(e,t,r){"use strict";r.r(t),t.default=function e(t,r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.initData=t,this.initDataType=r}},"./src/streaming/rules/DroppedFramesHistory.js":function(e,t,r){"use strict";r.r(t);r=r("./src/core/FactoryMaker.js");function n(){var a={},o={},s={};return{push:function(e,t,r){var n,i;t&&(a[e]||(a[e]=[],o[e]=0,s[e]=0),i=r&&r.droppedVideoFrames?r.droppedVideoFrames:0,r=r&&r.totalVideoFrames?r.totalVideoFrames:0,n=i-o[e],o[e]=i,i=r-s[e],s[e]=r,r=a[e],isNaN(t)||(r[t]?(r[t].droppedVideoFrames+=n,r[t].totalVideoFrames+=i):r[t]={droppedVideoFrames:n,totalVideoFrames:i}))},getFrameHistory:function(e){return a[e]},clearForStream:function(e){try{delete a[e],delete o[e],delete s[e]}catch(e){}},reset:function(){a={},o={},s={}}}}n.__dashjs_factory_name="DroppedFramesHistory";r=r.default.getClassFactory(n);t.default=r},"./src/streaming/rules/RulesContext.js":function(e,t,r){"use strict";r.r(t);r=r("./src/core/FactoryMaker.js");function n(e){var t=(e=e||{}).abrController,r=e.switchHistory,n=e.droppedFramesHistory,i=e.currentRequest,a=e.useBufferOccupancyABR,o=e.useL2AABR,s=e.useLoLPABR,u=e.streamProcessor?e.streamProcessor.getScheduleController():null,l=e.streamProcessor?e.streamProcessor.getRepresentationInfo():null,c=e.videoModel||null;function f(){return l?l.mediaInfo:null}return{getMediaType:function(){var e=f();return e?e.type:null},getMediaInfo:f,getDroppedFramesHistory:function(){return n},getCurrentRequest:function(){return i},getSwitchHistory:function(){return r},getStreamInfo:function(){var e=f();return e?e.streamInfo:null},getScheduleController:function(){return u},getAbrController:function(){return t},getRepresentationInfo:function(){return l},useBufferOccupancyABR:function(){return a},useL2AABR:function(){return o},useLoLPABR:function(){return s},getVideoModel:function(){return c}}}n.__dashjs_factory_name="RulesContext",t.default=r.default.getClassFactory(n)},"./src/streaming/rules/SwitchRequest.js":function(e,t,r){"use strict";r.r(t);var r=r("./src/core/FactoryMaker.js"),n={DEFAULT:.5,STRONG:1,WEAK:0};function i(e,t,r){return{quality:void 0===e?-1:e,reason:void 0===t?null:t,priority:(e=r)!==n.DEFAULT&&e!==n.STRONG&&e!==n.WEAK?n.DEFAULT:e}}i.__dashjs_factory_name="SwitchRequest";var a=r.default.getClassFactory(i);a.NO_CHANGE=-1,a.PRIORITY=n,r.default.updateClassFactory(i.__dashjs_factory_name,a),t.default=a},"./src/streaming/rules/SwitchRequestHistory.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/core/FactoryMaker.js"),o=r("./src/streaming/rules/SwitchRequest.js");function i(){var i=[],a=[];return{push:function(e){e.newValue===o.default.NO_CHANGE&&(e.newValue=e.oldValue),i[e.oldValue]||(i[e.oldValue]={noDrops:0,drops:0,dropSize:0});var t=(r=e.newValue-e.oldValue)<0?1:0,r=t?-r:0,n=t?0:1;i[e.oldValue].drops+=t,i[e.oldValue].dropSize+=r,i[e.oldValue].noDrops+=n,a.push({idx:e.oldValue,noDrop:n,drop:t,dropSize:r}),8<a.length&&(e=a.shift(),i[e.idx].drops-=e.drop,i[e.idx].dropSize-=e.dropSize,i[e.idx].noDrops-=e.noDrop)},getSwitchRequests:function(){return i},reset:function(){i=[],a=[]}}}i.__dashjs_factory_name="SwitchRequestHistory";r=n.default.getClassFactory(i);t.default=r},"./src/streaming/rules/ThroughputHistory.js":function(e,t,r){"use strict";r.r(t);var A=r("./src/streaming/constants/Constants.js"),n=r("./src/core/FactoryMaker.js"),R=r("./src/core/EventBus.js"),I=r("./src/streaming/MediaPlayerEvents.js");function i(e){var u,l,c,f,t=this.context,d=20,s=3,g=4,m=4,h=1.3,p=1.3,r=8,n=3,i=2,a=1,y=(e=e||{}).settings,E=(0,R.default)(t).getInstance();function _(e,t,r,n){var i=Math.pow(.5,r/n.fast),i=(e.fastEstimate=(1-i)*t+i*e.fastEstimate,Math.pow(.5,r/n.slow));e.slowEstimate=(1-i)*t+i*e.slowEstimate,e.totalWeight+=r}function o(e,t,r){{if(y.get().streaming.abr.movingAverageMethod===A.default.MOVING_AVERAGE_SLIDING_WINDOW)return o=function(e,t,r){var n,i=e?(n=u[t],r?s:g):(n=l[t],m);if(n){if(i>=n.length)i=n.length;else if(e)for(var a=1;a<i;++a){var o=n[n.length-a]/n[n.length-a-1];if((p<=o||o<=1/h)&&(i+=1)===n.length)break}}else i=0;return i}(a=e,n=t,o=r),a=(a?u:l)[n],0!==o&&a&&0!==a.length?(a=a.slice(-o)).reduce(function(e,t){return e+t})/a.length:NaN;var n=e,i=t,a=n?S.throughputHalfLife:S.latencyHalfLife;if(!(i=(n?c:f)[i])||i.totalWeight<=0)return NaN;var o=i.fastEstimate/(1-Math.pow(.5,i.totalWeight/a.fast)),i=i.slowEstimate/(1-Math.pow(.5,i.totalWeight/a.slow));return n?Math.min(o,i):Math.max(o,i)}}function v(e,t){return o(!0,e,t)}function T(e){u[e]=u[e]||[],l[e]=l[e]||[],c[e]=c[e]||{fastEstimate:0,slowEstimate:0,totalWeight:0},f[e]=f[e]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function b(){u={},l={},c={},f={}}var S={throughputHalfLife:{fast:n,slow:r},latencyHalfLife:{fast:a,slow:i}};return b(),{push:function(e,t,r){if(t.trace&&t.trace.length){var n=t.tresponse.getTime()-t.trequest.getTime()||1,i=t._tfinish.getTime()-t.tresponse.getTime()||1,a=t.trace.reduce(function(e,t){return e+t.b[0]},0),o=0,s=0;if(0!==(o=t._fileLoaderType&&t._fileLoaderType===A.default.FILE_LOADER_TYPES.FETCH?t.trace.reduce(function(e,t){return e+t.d},0):r?i:n+i)&&(s=Math.round(8*a/o)),t.cmsd&&(r=t.cmsd.dynamic&&t.cmsd.dynamic.etp?t.cmsd.dynamic.etp:null)&&0<(a=y.get().streaming.cmsd.abr.etpWeightRatio)&&a<=1&&(s=s*(1-a)+r*a),T(e),o=i,(r=e)===A.default.VIDEO?o<y.get().streaming.cacheLoadThresholds[A.default.VIDEO]:r===A.default.AUDIO&&o<y.get().streaming.cacheLoadThresholds[A.default.AUDIO]){if(0<u[e].length&&!u[e].hasCachedEntries)return;u[e].hasCachedEntries=!0}else u[e]&&u[e].hasCachedEntries&&(delete u[a=e],delete l[a],delete c[a],delete f[a],T(a));u[e].push(s),E.trigger(I.default.THROUGHPUT_MEASUREMENT_STORED,{throughput:s,mediaType:e,httpRequest:t}),u[e].length>d&&u[e].shift(),l[e].push(n),l[e].length>d&&l[e].shift(),_(c[e],s,.001*i,S.throughputHalfLife),_(f[e],n,1,S.latencyHalfLife)}},getAverageThroughput:v,getSafeAverageThroughput:function(e,t){return e=v(e,t),isNaN(e)||(e*=y.get().streaming.abr.bandwidthSafetyFactor),e},getAverageLatency:function(e){return o(!1,e)},reset:b}}i.__dashjs_factory_name="ThroughputHistory",t.default=n.default.getClassFactory(i)},"./src/streaming/rules/abr/ABRRulesCollection.js":function(e,t,r){"use strict";r.r(t);var c=r("./src/streaming/rules/abr/ThroughputRule.js"),f=r("./src/streaming/rules/abr/InsufficientBufferRule.js"),d=r("./src/streaming/rules/abr/AbandonRequestsRule.js"),g=r("./src/streaming/rules/abr/DroppedFramesRule.js"),m=r("./src/streaming/rules/abr/SwitchHistoryRule.js"),h=r("./src/streaming/rules/abr/BolaRule.js"),p=r("./src/streaming/rules/abr/L2ARule.js"),y=r("./src/streaming/rules/abr/lolp/LoLpRule.js"),n=r("./src/core/FactoryMaker.js"),E=r("./src/streaming/rules/SwitchRequest.js"),_=r("./src/streaming/constants/Constants.js"),v="qualitySwitchRules",T="abandonFragmentRules";function i(e){var r,n,u=this.context,t=(e=e||{}).mediaPlayerModel,i=e.customParametersModel,a=e.dashMetrics,o=e.settings;function s(e){return e.filter(function(e){return e.quality>E.default.NO_CHANGE})}function l(e){var t,r,n,i,a,o={},s=null;if(0!==e.length){for(o[E.default.PRIORITY.STRONG]={quality:E.default.NO_CHANGE,reason:null},o[E.default.PRIORITY.WEAK]={quality:E.default.NO_CHANGE,reason:null},o[E.default.PRIORITY.DEFAULT]={quality:E.default.NO_CHANGE,reason:null},t=0,r=e.length;t<r;t+=1)(n=e[t]).quality!==E.default.NO_CHANGE&&(o[n.priority].quality===E.default.NO_CHANGE||o[n.priority].quality>n.quality)&&(o[n.priority].quality=n.quality,o[n.priority].reason=n.reason||null);return o[E.default.PRIORITY.WEAK].quality!==E.default.NO_CHANGE&&(s=o[E.default.PRIORITY.WEAK]),o[E.default.PRIORITY.DEFAULT].quality!==E.default.NO_CHANGE&&(s=o[E.default.PRIORITY.DEFAULT]),(s=o[E.default.PRIORITY.STRONG].quality!==E.default.NO_CHANGE?o[E.default.PRIORITY.STRONG]:s)&&(i=s.quality,a=s.reason),(0,E.default)(u).create(i,a)}}return{initialize:function(){r=[],n=[],o.get().streaming.abr.useDefaultABRRules&&(o.get().streaming.abr.ABRStrategy===_.default.ABR_STRATEGY_L2A?r.push((0,p.default)(u).create({dashMetrics:a,settings:o})):o.get().streaming.abr.ABRStrategy===_.default.ABR_STRATEGY_LoLP?r.push((0,y.default)(u).create({dashMetrics:a})):(r.push((0,h.default)(u).create({dashMetrics:a,mediaPlayerModel:t,settings:o})),r.push((0,c.default)(u).create({dashMetrics:a})),o.get().streaming.abr.additionalAbrRules.insufficientBufferRule&&r.push((0,f.default)(u).create({dashMetrics:a,settings:o})),o.get().streaming.abr.additionalAbrRules.switchHistoryRule&&r.push((0,m.default)(u).create()),o.get().streaming.abr.additionalAbrRules.droppedFramesRule&&r.push((0,g.default)(u).create()),o.get().streaming.abr.additionalAbrRules.abandonRequestsRule&&n.push((0,d.default)(u).create({dashMetrics:a,mediaPlayerModel:t,settings:o})))),i.getAbrCustomRules().forEach(function(e){e.type===v&&r.push(e.rule(u).create()),e.type===T&&n.push(e.rule(u).create())})},reset:function(){[r,n].forEach(function(e){e&&e.length&&e.forEach(function(e){return e.reset&&e.reset()})}),r=[],n=[]},getMaxQuality:function(t){return l(s(r.map(function(e){return e.getMaxIndex(t)})))||(0,E.default)(u).create()},getMinSwitchRequest:l,shouldAbandonFragment:function(t,r){return l(s(n.map(function(e){return e.shouldAbandon(t,r)})))||(0,E.default)(u).create()},getQualitySwitchRules:function(){return r}}}i.__dashjs_factory_name="ABRRulesCollection";r=n.default.getClassFactory(i);r.QUALITY_SWITCH_RULES=v,r.ABANDON_FRAGMENT_RULES=T,n.default.updateSingletonFactory(i.__dashjs_factory_name,r),t.default=r},"./src/streaming/rules/abr/AbandonRequestsRule.js":function(e,t,r){"use strict";r.r(t);var y=r("./src/streaming/rules/SwitchRequest.js"),n=r("./src/core/FactoryMaker.js"),i=r("./src/core/Debug.js");function E(e){var l,c,f,d,g=this.context,m=(e=e||{}).mediaPlayerModel,h=e.dashMetrics,p=e.settings;function t(){c={},f={},d=[]}return e={shouldAbandon:function(e){var t=(0,y.default)(g).create(y.default.NO_CHANGE,{name:E.__dashjs_factory_name});if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("getCurrentRequest")&&e.hasOwnProperty("getRepresentationInfo")&&e.hasOwnProperty("getAbrController")))return t;var r=e.getMediaInfo(),n=e.getMediaType(),i=(i=e.getStreamInfo())?i.id:null,a=e.getCurrentRequest();if(!isNaN(a.index)){if(o=n,u=a.index,c[o]=c[o]||{},c[o][u]=c[o][u]||{},m.getStableBufferTime()<h.getCurrentBufferLevel(n))return t;var o=c[n][a.index];if(null===o||null===a.firstByteDate||f.hasOwnProperty(o.id))return t;if(void 0===o.firstByteTime&&(d[n]=[],o.firstByteTime=a.firstByteDate.getTime(),o.segmentDuration=a.duration,o.bytesTotal=a.bytesTotal,o.id=a.index),o.bytesLoaded=a.bytesLoaded,o.elapsedTime=(new Date).getTime()-o.firstByteTime,0<o.bytesLoaded&&0<o.elapsedTime&&(u=n,a=Math.round(8*o.bytesLoaded/o.elapsedTime),d[u]=d[u]||[],d[u].push(a)),5<=d[n].length&&500<o.elapsedTime&&o.bytesLoaded<o.bytesTotal){var s,u=d[n].reduce(function(e,t){return e+t},0);if(o.measuredBandwidthInKbps=Math.round(u/d[n].length),o.estimatedTimeOfDownload=+(8*o.bytesTotal/o.measuredBandwidthInKbps/1e3).toFixed(2),o.estimatedTimeOfDownload<1.8*o.segmentDuration||0===e.getRepresentationInfo().quality)return t;f.hasOwnProperty(o.id)||(a=e.getAbrController(),u=o.bytesTotal-o.bytesLoaded,e=a.getBitrateList(r),r=a.getQualityForBitrate(r,o.measuredBandwidthInKbps*p.get().streaming.abr.bandwidthSafetyFactor,i),s=void 0!==(s=a.getMinAllowedIndexFor(n,i))?Math.max(s,r):r,o.bytesTotal*e[s].bitrate/e[a.getQualityFor(n,i)].bitrate<u&&(t.quality=s,t.reason.throughput=o.measuredBandwidthInKbps,t.reason.fragmentID=o.id,t.reason.rule=this.getClassName(),f[o.id]=o,l.debug("["+n+"] frag id",o.id," is asking to abandon and switch to quality to ",s," measured bandwidth was",o.measuredBandwidthInKbps),delete c[n][o.id]))}else o.bytesLoaded===o.bytesTotal&&delete c[n][o.id]}return t},reset:t},l=(0,i.default)(g).getInstance().getLogger(e),t(),e}E.__dashjs_factory_name="AbandonRequestsRule",t.default=n.default.getClassFactory(E)},"./src/streaming/rules/abr/BolaRule.js":function(e,t,r){"use strict";r.r(t);var g=r("./src/streaming/constants/MetricsConstants.js"),D=r("./src/streaming/rules/SwitchRequest.js"),n=r("./src/core/FactoryMaker.js"),m=r("./src/streaming/vo/metrics/HTTPRequest.js"),h=r("./src/core/EventBus.js"),p=r("./src/core/events/Events.js"),y=r("./src/core/Debug.js"),E=r("./src/streaming/MediaPlayerEvents.js"),_=r("./src/streaming/constants/Constants.js");function i(e){var t,T,b,S=this.context,A=(e=e||{}).dashMetrics,a=e.mediaPlayerModel,r=(0,h.default)(S).getInstance();function o(e,t,n){var r=n.reduce(function(e,t,r){return t>n[e]?r:e},0);if(0===r)return null;e=Math.max(e,10+2*t.length),t=(n[r]-1)/(e/10-1);return{gp:t,Vp:10/t}}function R(e){var t={},e=e.getMediaInfo().bitrateList.map(function(e){return e.bandwidth}),r=(r=e.map(function(e){return Math.log(e)})).map(function(e){return e-r[0]+1}),n=a.getStableBufferTime(),i=o(n,e,r);return i?(t.state=1,t.bitrates=e,t.utilities=r,t.stableBufferTime=n,t.Vp=i.Vp,t.gp=i.gp,t.lastQuality=0,I(t)):t.state=0,t}function I(e){e.placeholderBuffer=0,e.mostAdvancedSegmentStart=NaN,e.lastSegmentWasReplacement=!1,e.lastSegmentStart=NaN,e.lastSegmentDurationS=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN}function w(e,t){var r,n,i=a.getStableBufferTime();e.stableBufferTime===i||(r=o(i,e.bitrates,e.utilities)).Vp===e.Vp&&r.gp===e.gp||(n=(t=A.getCurrentBufferLevel(t))+e.placeholderBuffer,n=(n-=10)*(r.Vp/e.Vp)+10,e.stableBufferTime=i,e.Vp=r.Vp,e.gp=r.gp,e.placeholderBuffer=Math.max(0,n-t))}function C(e,t){return e.Vp*(e.utilities[t]+e.gp)}function N(e,t){for(var r,n,i=e.bitrates[t],a=e.utilities[t],o=0,s=t-1;0<=s;--s)e.utilities[s]<e.utilities[t]&&(r=e.bitrates[s],n=e.utilities[s],n=e.Vp*(e.gp+(i*n-r*a)/(i-r)),o=Math.max(o,n));return o}function n(e){for(var t in e.mediaType===_.default.AUDIO?[_.default.AUDIO]:b)b.hasOwnProperty(t)&&2===b[t].state&&(b[t].placeholderBuffer=0)}function i(){for(var e in b)!b.hasOwnProperty(e)||0!==(e=b[e]).state&&(e.state=1,I(e))}function s(e){var t,r;e&&e.chunk&&e.chunk.mediaInfo&&((t=b[e.chunk.mediaInfo.type])&&0!==t.state&&(r=e.chunk.start,isNaN(t.mostAdvancedSegmentStart)||r>t.mostAdvancedSegmentStart?(t.mostAdvancedSegmentStart=r,t.lastSegmentWasReplacement=!1):t.lastSegmentWasReplacement=!0,t.lastSegmentStart=r,t.lastSegmentDurationS=e.chunk.duration,t.lastQuality=e.chunk.quality,l(t,e.chunk.mediaInfo.type)))}function u(e){var t;e&&e.metric===g.default.HTTP_REQUEST&&e.value&&e.value.type===m.HTTPRequest.MEDIA_SEGMENT_TYPE&&e.value.trace&&e.value.trace.length&&((t=b[e.mediaType])&&0!==t.state&&(t.lastSegmentRequestTimeMs=e.value.trequest.getTime(),t.lastSegmentFinishTimeMs=e.value._tfinish.getTime(),l(t,e.mediaType)))}function l(e,t){var r;isNaN(e.lastSegmentStart)||isNaN(e.lastSegmentRequestTimeMs)||isNaN(e.placeholderBuffer)||(e.placeholderBuffer*=.99,isNaN(e.lastSegmentFinishTimeMs)||(t=A.getCurrentBufferLevel(t)+.001*(e.lastSegmentFinishTimeMs-e.lastSegmentRequestTimeMs),r=C(e,e.lastQuality),r=Math.max(0,r-t),e.placeholderBuffer=Math.min(r,e.placeholderBuffer)),e.lastSegmentWasReplacement&&!isNaN(e.lastSegmentDurationS)&&(e.placeholderBuffer+=e.lastSegmentDurationS),e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN)}function c(e){var t;e&&(t=b[e.mediaType])&&0!==t.state&&(t.abrQuality=e.newQuality)}function f(e){var t,r;e&&(t=b[e.mediaType])&&0!==t.state&&(e=A.getCurrentBufferLevel(e.mediaType),r=0<t.abrQuality?N(t,t.abrQuality):10,r=Math.max(0,r-e),t.placeholderBuffer=Math.min(t.placeholderBuffer,r))}function d(){b={}}return t={getMaxIndex:function(e){var t=(0,D.default)(S).create();if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("getScheduleController")&&e.hasOwnProperty("getStreamInfo")&&e.hasOwnProperty("getAbrController")&&e.hasOwnProperty("useBufferOccupancyABR")))return t;var r=e.getMediaInfo(),n=e.getMediaType(),i=e.getScheduleController(),a=e.getStreamInfo(),o=e.getAbrController(),s=o.getThroughputHistory(),u=a?a.id:null,a=a&&a.manifestInfo&&a.manifestInfo.isDynamic,l=e.useBufferOccupancyABR();if(t.reason=t.reason||{},!l)return t;i.setTimeToLoadDelay(0),e=(l=e).getMediaType(),(c=b[e])?0!==c.state&&w(c,e):(c=R(l),b[e]=c);var c,f=c;if(0===f.state)return t;var d,g,m=A.getCurrentBufferLevel(n),h=s.getAverageThroughput(n,a),p=s.getSafeAverageThroughput(n,a),y=s.getAverageLatency(n);if(t.reason.state=f.state,t.reason.throughput=h,t.reason.latency=y,isNaN(h))return t;switch(f.state){case 1:E=o.getQualityForBitrate(r,p,u,y),t.quality=E,t.reason.throughput=p,f.placeholderBuffer=Math.max(0,N(f,E)-m),f.lastQuality=E,!isNaN(f.lastSegmentDurationS)&&m>=f.lastSegmentDurationS&&(f.state=2);break;case 2:d=f,g=n,v=Date.now(),isNaN(d.lastSegmentFinishTimeMs)?isNaN(d.lastCallTimeMs)||(_=.001*(v-d.lastCallTimeMs),d.placeholderBuffer+=Math.max(0,_)):(_=.001*(v-d.lastSegmentFinishTimeMs),d.placeholderBuffer+=Math.max(0,_)),d.lastCallTimeMs=v,d.lastSegmentStart=NaN,d.lastSegmentRequestTimeMs=NaN,d.lastSegmentFinishTimeMs=NaN,w(d,g);var E=function(e,t){for(var r=e.bitrates.length,n=NaN,i=NaN,a=0;a<r;++a){var o=(e.Vp*(e.utilities[a]+e.gp)-t)/e.bitrates[a];(isNaN(i)||i<=o)&&(i=o,n=a)}return n}(f,m+f.placeholderBuffer),_=o.getQualityForBitrate(r,p,u,y),v=(E>f.lastQuality&&_<E&&(E=Math.max(_,f.lastQuality)),Math.max(0,m+f.placeholderBuffer-C(f,E)));v<=f.placeholderBuffer?(f.placeholderBuffer-=v,v=0):(v-=f.placeholderBuffer,f.placeholderBuffer=0,E<o.getMaxAllowedIndexFor(n,u)?i.setTimeToLoadDelay(1e3*v):v=0),t.quality=E,t.reason.throughput=h,t.reason.latency=y,t.reason.bufferLevel=m,t.reason.placeholderBuffer=f.placeholderBuffer,t.reason.delay=v,f.lastQuality=E;break;default:T.debug("BOLA ABR rule invoked in bad state."),t.quality=o.getQualityForBitrate(r,p,u,y),t.reason.state=f.state,t.reason.throughput=p,t.reason.latency=y,f.state=1,I(f)}return t},reset:function(){d(),r.off(E.default.BUFFER_EMPTY,n,t),r.off(E.default.PLAYBACK_SEEKING,i,t),r.off(E.default.METRIC_ADDED,u,t),r.off(E.default.QUALITY_CHANGE_REQUESTED,c,t),r.off(E.default.FRAGMENT_LOADING_ABANDONED,f,t),r.off(p.default.MEDIA_FRAGMENT_LOADED,s,t)}},T=(0,y.default)(S).getInstance().getLogger(t),d(),r.on(E.default.BUFFER_EMPTY,n,t),r.on(E.default.PLAYBACK_SEEKING,i,t),r.on(E.default.METRIC_ADDED,u,t),r.on(E.default.QUALITY_CHANGE_REQUESTED,c,t),r.on(E.default.FRAGMENT_LOADING_ABANDONED,f,t),r.on(p.default.MEDIA_FRAGMENT_LOADED,s,t),t}i.__dashjs_factory_name="BolaRule",t.default=n.default.getClassFactory(i)},"./src/streaming/rules/abr/DroppedFramesRule.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/core/FactoryMaker.js"),c=r("./src/streaming/rules/SwitchRequest.js"),i=r("./src/core/Debug.js");function a(){var e,u,l=this.context;return e={getMaxIndex:function(e){var t=(0,c.default)(l).create();if(!e||!e.hasOwnProperty("getDroppedFramesHistory"))return t;var r=e.getDroppedFramesHistory(),e=e.getStreamInfo().id;if(r){var n=r.getFrameHistory(e);if(!n||0===n.length)return t;for(var i,a=0,o=c.default.NO_CHANGE,s=1;s<n.length;s++)if(n[s]&&(a=n[s].droppedVideoFrames,375<(i=n[s].totalVideoFrames)&&.15<a/i)){u.debug("index: "+(o=s-1)+" Dropped Frames: "+a+" Total Frames: "+i);break}return(0,c.default)(l).create(o,{droppedFrames:a})}return t}},u=(0,i.default)(l).getInstance().getLogger(e),e}a.__dashjs_factory_name="DroppedFramesRule",t.default=n.default.getClassFactory(a)},"./src/streaming/rules/abr/InsufficientBufferRule.js":function(e,t,r){"use strict";r.r(t);var s=r("./src/core/EventBus.js"),u=r("./src/core/events/Events.js"),n=r("./src/core/FactoryMaker.js"),m=r("./src/core/Debug.js"),h=r("./src/streaming/rules/SwitchRequest.js"),p=r("./src/streaming/constants/Constants.js"),y=r("./src/streaming/constants/MetricsConstants.js"),E=r("./src/streaming/MediaPlayerEvents.js");function i(e){e=e||{};var t,l,c,f=.5,r=2,d=this.context,n=(0,s.default)(d).getInstance(),g=e.dashMetrics;function i(){(c={})[p.default.VIDEO]={ignoreCount:r},c[p.default.AUDIO]={ignoreCount:r}}function a(){i()}function o(e){isNaN(e.startTime)||e.mediaType!==p.default.AUDIO&&e.mediaType!==p.default.VIDEO||0<c[e.mediaType].ignoreCount&&c[e.mediaType].ignoreCount--}return t={getMaxIndex:function(e){var t=(0,h.default)(d).create();if(!e||!e.hasOwnProperty("getMediaType"))return t;if(!g||!g.hasOwnProperty("getCurrentBufferLevel")||!g.hasOwnProperty("getCurrentBufferState"))throw new Error(p.default.MISSING_CONFIG_ERROR);var r,n=e.getMediaType(),i=g.getCurrentBufferState(n),a=e.getRepresentationInfo().fragmentDuration,o=(u=e.getStreamInfo())?u.id:null,s=e.getScheduleController(),u=u&&u.manifestInfo&&u.manifestInfo.isDynamic,s=s.getPlaybackController().getLowLatencyModeEnabled();return r=n,!s&&0<c[r].ignoreCount||!a||(i&&i.state===y.default.BUFFER_EMPTY?(l.debug("["+n+"] Switch to index 0; buffer is empty."),t.quality=0,t.reason="InsufficientBufferRule: Buffer is empty"):(s=e.getMediaInfo(),i=(r=e.getAbrController()).getThroughputHistory(),e=g.getCurrentBufferLevel(n),u=i.getAverageThroughput(n,u),i=i.getAverageLatency(n),t.quality=r.getQualityForBitrate(s,u*(e/a)*f,o,i),t.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering")),t},reset:function(){i(),n.off(E.default.PLAYBACK_SEEKING,a,t),n.off(u.default.BYTES_APPENDED_END_FRAGMENT,o,t)}},l=(0,m.default)(d).getInstance().getLogger(t),i(),n.on(E.default.PLAYBACK_SEEKING,a,t),n.on(u.default.BYTES_APPENDED_END_FRAGMENT,o,t),t}i.__dashjs_factory_name="InsufficientBufferRule",t.default=n.default.getClassFactory(i)},"./src/streaming/rules/abr/L2ARule.js":function(e,t,r){"use strict";r.r(t);var l=r("./src/streaming/constants/MetricsConstants.js"),G=r("./src/streaming/rules/SwitchRequest.js"),n=r("./src/core/FactoryMaker.js"),q=r("./src/streaming/vo/metrics/HTTPRequest.js"),c=r("./src/core/EventBus.js"),f=r("./src/core/events/Events.js"),d=r("./src/core/Debug.js"),H=r("./src/streaming/constants/Constants.js");function i(e){var t,P,L,F,x=this.context,j=(e=e||{}).dashMetrics,r=(0,c.default)(x).getInstance();function k(e){var t={},e=e.getMediaInfo(),r=e.bitrateList.map(function(e){return e.bandwidth/1e3});return t.state=1,t.bitrates=r,t.lastQuality=0,(r=e)&&r.type&&(L[r.type]={},L[r.type].w=[],L[r.type].prev_w=[],L[r.type].Q=0,L[r.type].segment_request_start_s=0,L[r.type].segment_download_finish_s=0,L[r.type].B_target=1.5),U(t),t}function U(e){e.placeholderBuffer=0,e.mostAdvancedSegmentStart=NaN,e.lastSegmentWasReplacement=!1,e.lastSegmentStart=NaN,e.lastSegmentDurationS=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN,e.lastSegmentUrl=""}function n(){for(var e in P)!P.hasOwnProperty(e)||0!==(e=P[e]).state&&(e.state=1,U(e))}function i(e){var t,r,n;e&&e.chunk&&e.chunk.mediaInfo&&(t=P[e.chunk.mediaInfo.type],r=L[e.chunk.mediaInfo.type],t&&0!==t.state&&(n=e.chunk.start,isNaN(t.mostAdvancedSegmentStart)||n>t.mostAdvancedSegmentStart?(t.mostAdvancedSegmentStart=n,t.lastSegmentWasReplacement=!1):t.lastSegmentWasReplacement=!0,t.lastSegmentStart=n,t.lastSegmentDurationS=e.chunk.duration,t.lastQuality=e.chunk.quality,o(t,r)))}function a(e){var t,r;e&&e.metric===l.default.HTTP_REQUEST&&e.value&&e.value.type===q.HTTPRequest.MEDIA_SEGMENT_TYPE&&e.value.trace&&e.value.trace.length&&(t=P[e.mediaType],r=L[e.mediaType],t&&0!==t.state&&(t.lastSegmentRequestTimeMs=e.value.trequest.getTime(),t.lastSegmentFinishTimeMs=e.value._tfinish.getTime(),o(t,r)))}function o(e,t){isNaN(e.lastSegmentStart)||isNaN(e.lastSegmentRequestTimeMs)||(t.segment_request_start_s=.001*e.lastSegmentRequestTimeMs,t.segment_download_finish_s=.001*e.lastSegmentFinishTimeMs,e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN)}function s(e){var t;e&&e.mediaType&&((t=P[e.mediaType])&&0!==t.state&&(t.abrQuality=e.newQuality))}function B(e,t){if(e.length!==t.length)return-1;for(var r=0,n=0;n<e.length;n++)r+=e[n]*t[n];return r}function u(){P={},L={}}return t={getMaxIndex:function(e){var t,r=(0,G.default)(x).create(),n=Math.pow(4,.99),i=Math.max(Math.pow(4,1),n*Math.sqrt(4)),a=e.getMediaInfo(),o=e.getMediaType(),s=a.bitrateList.map(function(e){return e.bandwidth}),u=s.length,l=e.getScheduleController(),c=e.getStreamInfo(),f=e.getAbrController(),d=f.getThroughputHistory(),g=c&&c.manifestInfo&&c.manifestInfo.isDynamic,m=e.useL2AABR(),h=j.getCurrentBufferLevel(o,!0),p=d.getSafeAverageThroughput(o,g),y=d.getAverageThroughput(o,g),E=d.getAverageLatency(o),_=e.getVideoModel().getPlaybackRate();if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("getScheduleController")&&e.hasOwnProperty("getStreamInfo")&&e.hasOwnProperty("getAbrController")&&e.hasOwnProperty("useL2AABR")))return r;if(r.reason=r.reason||{},!m||o===H.default.AUDIO)return r;l.setTimeToLoadDelay(0),d=(g=e).getMediaType(),(m=P[d])||(m=k(g),P[d]=m);var v=m;if(0===v.state)return r;var T=L[o];if(!T)return r;if(r.reason.state=v.state,r.reason.throughput=y,r.reason.latency=E,isNaN(y))return r;switch(v.state){case 1:if(t=f.getQualityForBitrate(a,p,c.id,E),r.quality=t,r.reason.throughput=p,v.lastQuality=t,!isNaN(v.lastSegmentDurationS)&&h>=T.B_target){v.state=2,T.Q=n;for(var b=0;b<u;++b)b===v.lastQuality?T.prev_w[b]=1:T.prev_w[b]=0}break;case 2:var S=[],A=j.getCurrentHttpRequest(o).trace.reduce(function(e,t){return e+t.d},0),R=j.getCurrentHttpRequest(o).trace.reduce(function(e,t){return e+t.b[0]},0),I=Math.round(8*R/A),R=j.getCurrentHttpRequest(o);if(I<1&&(I=1),R.url===v.lastSegmentUrl||R.type===q.HTTPRequest.INIT_SEGMENT_TYPE)t=v.lastQuality;else{for(var w=v.lastSegmentDurationS,C=1,N=0;N<u;++N)s[N]=s[N]/1e3,_*s[N]>I&&(C=-1),T.w[N]=T.prev_w[N]+C*(w/(2*i))*((T.Q+n)*(_*s[N]/I));T.w=function(e){for(var t=e.length,r=!1,n=[],i=0;i<t;++i)n[i]=e[i];for(var a=e.sort(function(e,t){return t-e}),o=0,s=0,u=[],l=0;l<t-1;++l)if((s=((o+=a[l])-1)/(l+1))>=a[l+1]){r=!0;break}r||(s=(o+a[t-1]-1)/t);for(var c=0;c<t;++c)u[c]=Math.max(n[c]-s,0);return u}(T.w);for(var D=0;D<u;++D)S[D]=T.w[D]-T.prev_w[D],T.prev_w[D]=T.w[D];T.Q=Math.max(0,T.Q-w+w*_*((B(s,T.prev_w)+B(s,S))/I));for(var M=[],O=0;O<u;++O)M[O]=Math.abs(s[O]-B(T.w,s));s[t=(t=M.indexOf(Math.min.apply(Math,M)))>v.lastQuality&&s[v.lastQuality+1]<=I?v.lastQuality+1:t]>=I&&(T.Q=2*Math.max(n,T.Q)),v.lastSegmentUrl=R.url}r.quality=t,r.reason.throughput=y,r.reason.latency=E,r.reason.bufferLevel=h,v.lastQuality=r.quality;break;default:F.debug("L2A ABR rule invoked in bad state."),r.quality=f.getQualityForBitrate(a,p,c.id,E),r.reason.state=v.state,r.reason.throughput=p,r.reason.latency=E,v.state=1,U(v)}return r},reset:function(){u(),r.off(f.default.PLAYBACK_SEEKING,n,t),r.off(f.default.MEDIA_FRAGMENT_LOADED,i,t),r.off(f.default.METRIC_ADDED,a,t),r.off(f.default.QUALITY_CHANGE_REQUESTED,s,t)}},F=(0,d.default)(x).getInstance().getLogger(t),u(),r.on(f.default.PLAYBACK_SEEKING,n,t),r.on(f.default.MEDIA_FRAGMENT_LOADED,i,t),r.on(f.default.METRIC_ADDED,a,t),r.on(f.default.QUALITY_CHANGE_REQUESTED,s,t),t}i.__dashjs_factory_name="L2ARule",t.default=n.default.getClassFactory(i)},"./src/streaming/rules/abr/SwitchHistoryRule.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/core/Debug.js"),l=r("./src/streaming/rules/SwitchRequest.js");function a(){var e,s,u=this.context;return e={getMaxIndex:function(e){for(var t=(e=e?e.getSwitchHistory():null)?e.getSwitchRequests():[],r=0,n=0,i=0,a=(0,l.default)(u).create(),o=0;o<t.length;o++)if(void 0!==t[o]&&(r+=t[o].drops,n+=t[o].noDrops,i+=t[o].dropSize,6<=r+n&&.075<r/n)){a.quality=0<o&&0<t[o].drops?o-1:o,a.reason={index:a.quality,drops:r,noDrops:n,dropSize:i},s.debug("Switch history rule index: "+a.quality+" samples: "+(r+n)+" drops: "+r);break}return a}},s=(0,i.default)(u).getInstance().getLogger(e),e}a.__dashjs_factory_name="SwitchHistoryRule",t.default=n.default.getClassFactory(a)},"./src/streaming/rules/abr/ThroughputRule.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/core/FactoryMaker.js"),g=r("./src/streaming/rules/SwitchRequest.js"),m=r("./src/streaming/constants/Constants.js"),h=r("./src/streaming/constants/MetricsConstants.js");function i(e){var f=this.context,d=(e=e||{}).dashMetrics;return{getMaxIndex:function(e){var t=(0,g.default)(f).create();if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("useBufferOccupancyABR")&&e.hasOwnProperty("getAbrController")&&e.hasOwnProperty("getScheduleController")))return t;if(!d||!d.hasOwnProperty("getCurrentBufferState"))throw new Error(m.default.MISSING_CONFIG_ERROR);var r=e.getMediaInfo(),n=e.getMediaType(),i=d.getCurrentBufferState(n),a=e.getScheduleController(),o=e.getAbrController(),s=(u=e.getStreamInfo())?u.id:null,u=u&&u.manifestInfo?u.manifestInfo.isDynamic:null,l=(c=o.getThroughputHistory()).getSafeAverageThroughput(n,u),c=c.getAverageLatency(n),e=e.useBufferOccupancyABR();return isNaN(l)||!i||e||o.getAbandonmentStateFor(s,n)===h.default.ABANDON_LOAD||i.state!==h.default.BUFFER_LOADED&&!u||(t.quality=o.getQualityForBitrate(r,l,s,c),a.setTimeToLoadDelay(0),t.reason={throughput:l,latency:c}),t},reset:function(){}}}i.__dashjs_factory_name="ThroughputRule",t.default=n.default.getClassFactory(i)},"./src/streaming/rules/abr/lolp/LearningAbrController.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/core/Debug.js"),F="manual_weight_selection",x="random_weight_selection",a="dynamic_weight_selection";function o(){var e,S,A,R,I,w,C,N,D,t=this.context;function r(){R=1,I=100,w=0,N=C=A=null,D=a}function M(){var e=0;if(A)for(var t=0;t<A.length;t++){var r=A[t];r.state.throughput>e&&(e=r.state.throughput)}return e}function O(e,r,n){e=e.map(function(e,t){return n[t]*Math.pow(e-r[t],2)}).reduce(function(e,t){return e+t});return(e<0?-1:1)*Math.sqrt(Math.abs(e))}function P(e,t,r){for(var n,i,a=0;a<t.length;a++){var o=t[a],s=O([o.state.throughput,o.state.latency,o.state.rebuffer,o.state.switch],[e.state.throughput,e.state.latency,e.state.rebuffer,e.state.switch],[1,1,1,1]),s=Math.exp(-1*Math.pow(s,2)/(2*Math.pow(.1,2)));n=r,s=s,i=void 0,o=(o=o).state,i=[.01,.01,.01,.01],o.throughput=o.throughput+(n[0]-o.throughput)*i[0]*s,o.latency=o.latency+(n[1]-o.latency)*i[1]*s,o.rebuffer=o.rebuffer+(n[2]-o.rebuffer)*i[2]*s,o.switch=o.switch+(n[3]-o.switch)*i[3]*s}}function L(e,t,r,n,i,a,o){C=C||N[N.length-1];e=e.findWeightVector(t,r,n,i,a,o);null!==e&&-1!==e&&(C=e)}return e={getNextQuality:function(e,t,r,n,i,a,o){var s=r,u=n,l=t,c=function(e){if(!A){A=[];var t=e.bitrateList,r=[];w=t[0].bandwidth,t.forEach(function(e){r.push(e.bandwidth),e.bandwidth<w&&(w=e.bandwidth)}),R=function(e){return e=e.map(function(e){return Math.pow(e,2)}).reduce(function(e,t){return e+t}),Math.sqrt(e)}(r);for(var n=0;n<t.length;n++){var i={qualityIndex:n,bitrate:t[n].bandwidth,state:{throughput:t[n].bandwidth/R,latency:0,rebuffer:0,switch:0}};A.push(i)}N=function(e){for(var t=[],r=function(e){for(var t=[],r=0;r<e;r++){var n=[Math.random()*M(),Math.random(),Math.random(),Math.random()];t.push(n)}return t}(Math.pow(e.length,2)),n=(t.push(r[0]),[1,1,1,1]),i=1;i<e.length;i++){for(var a=null,o=null,s=0;s<r.length;s++){for(var u=r[s],l=null,c=0;c<t.length;c++){var f=O(u,t[c],n);(null===l||f<l)&&(l=f)}(null===o||o<l)&&(a=u,o=l)}t.push(a)}for(var d=null,g=null,m=0;m<t.length;m++){for(var h=0,p=0;p<t.length;p++)m!==p&&(h+=O(t[m],t[p],n));(null===d||d<h)&&(d=h,g=m)}var y=[];y.push(t[g]),t.splice(g,1);for(;0<t.length;){for(var E=null,_=null,v=0;v<t.length;v++){var T=O(y[0],t[v],n);(null===E||T<E)&&(E=T,_=v)}y.push(t[_]),t.splice(_,1)}return y}(A)}return A}(e),f=t/R;1<f&&(f=M()),r/=I,S.debug("getNextQuality called throughput:".concat(f," latency:").concat(r," bufferSize:").concat(n," currentQualityIndex:").concat(a," playbackRate:").concat(i));var d=(e=c[a]).bitrate*o.getSegmentDuration()/l,g=Math.max(0,d-u);if(u-d<o.getMinBuffer())return S.debug("Buffer is low for bitrate= ".concat(e.bitrate," downloadTime=").concat(d," currentBuffer=").concat(u," rebuffer=").concat(g)),function(e,t){var r=0,n=e;if(A)for(var i=0;i<A.length;i++){var a=A[i];a.bitrate<e.bitrate&&a.bitrate>r&&t>a.bitrate&&(r=a.bitrate,n=a)}return n}(e,l).qualityIndex;switch(D){case F:C=[.4,.4,.4,.4];break;case x:C=function(e,t){for(var r=[],n=Math.sqrt(2/e),i=0;i<t;i++)r.push(Math.random()*n);return C=r}(c.length,4);break;default:L(o,c,s,u,g,l,i)}for(var m=null,h=null,p=null,y=0;y<c.length;y++){var E=c[y],_=E.state,_=[_.throughput,_.latency,_.rebuffer,_.switch],v=C.slice(),T=o.getNextBufferWithBitrate(E.bitrate,u,l),b=T<o.getMinBuffer(),T=(b&&S.debug("Buffer is low for bitrate=".concat(E.bitrate," downloadTime=").concat(d," currentBuffer=").concat(u," nextBuffer=").concat(T)),(E.bitrate>t-1e4||b)&&E.bitrate!==w&&(v[0]=100),O(_,[f,0,0,0],v));(null===m||T<m)&&(m=T,h=E.qualityIndex,p=E)}return n=Math.abs(e.bitrate-p.bitrate)/R,P(e,c,[f,r,g,n]),P(p,c,[f,0,0,n]),h},reset:function(){r()}},S=(0,i.default)(t).getInstance().getLogger(e),r(),e}o.__dashjs_factory_name="LearningAbrController",t.default=n.default.getClassFactory(o)},"./src/streaming/rules/abr/lolp/LoLpQoEEvaluator.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/core/FactoryMaker.js"),c=r("./src/streaming/rules/abr/lolp/QoeInfo.js");function i(){var i,a,o,s;function e(){s=o=a=i=null}function u(e,t,r,n){var i=new c.default;return i.type=e,i.weights.bitrateReward=t||1,i.weights.bitrateSwitchPenalty=1,i.weights.rebufferPenalty=r||1e3,i.weights.latencyPenalty=[],i.weights.latencyPenalty.push({threshold:1.1,penalty:.05*n}),i.weights.latencyPenalty.push({threshold:1e8,penalty:.1*r}),i.weights.playbackSpeedPenalty=n||200,i}function l(e,t,r,n,i){i.bitrateWSum+=i.weights.bitrateReward*e,i.lastBitrate&&(i.bitrateSwitchWSum+=i.weights.bitrateSwitchPenalty*Math.abs(e-i.lastBitrate)),i.lastBitrate=e,i.rebufferWSum+=i.weights.rebufferPenalty*t;for(var a=0;a<i.weights.latencyPenalty.length;a++){var o=i.weights.latencyPenalty[a];if(r<=o.threshold){i.latencyWSum+=o.penalty*r;break}}i.playbackSpeedWSum+=i.weights.playbackSpeedPenalty*Math.abs(1-n),i.totalQoe=i.bitrateWSum-i.bitrateSwitchWSum-i.rebufferWSum-i.latencyWSum-i.playbackSpeedWSum}return e(),{setupPerSegmentQoe:function(e,t,r){i=u("segment",e,t,r),a=e,o=t,s=r},logSegmentMetrics:function(e,t,r,n){i&&l(e,t,r,n,i)},getPerSegmentQoe:function(){return i},calculateSingleUseQoe:function(e,t,r,n){var i=null;return(i=a&&o&&s?u("segment",a,o,s):i)?(l(e,t,r,n,i),i.totalQoe):0},reset:function(){e()}}}i.__dashjs_factory_name="LoLpQoeEvaluator",t.default=n.default.getClassFactory(i)},"./src/streaming/rules/abr/lolp/LoLpRule.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/core/Debug.js"),i=r("./src/core/FactoryMaker.js"),a=r("./src/streaming/rules/abr/lolp/LearningAbrController.js"),o=r("./src/streaming/rules/abr/lolp/LoLpQoEEvaluator.js"),M=r("./src/streaming/rules/SwitchRequest.js"),O=r("./src/streaming/constants/MetricsConstants.js"),P=r("./src/streaming/rules/abr/lolp/LoLpWeightSelector.js"),L=r("./src/streaming/constants/Constants.js");function s(e){var I,w,C,N=(e=e||{}).dashMetrics,D=this.context;return e={getMaxIndex:function(e){try{var t=(0,M.default)(D).create(),r=e.getMediaInfo().type,n=e.getAbrController(),i=e.getStreamInfo(),a=n.getQualityFor(r,i.id),o=e.getMediaInfo(),s=N.getCurrentBufferState(r),u=e.getScheduleController(),l=N.getCurrentBufferLevel(r,!0),c=i&&i.manifestInfo?i.manifestInfo.isDynamic:null,f=u.getPlaybackController(),d=f.getCurrentLiveLatency();if(!e.useLoLPABR()||r===L.default.AUDIO)return t;var d=d||0,g=f.getPlaybackRate(),m=n.getThroughputHistory().getSafeAverageThroughput(r,c);if(I.debug("Throughput ".concat(Math.round(m)," kbps")),isNaN(m)||!s)return t;if(n.getAbandonmentStateFor(i.id,r)===O.default.ABANDON_LOAD)return t;for(var h=o.bitrateList,p=e.getRepresentationInfo().fragmentDuration,y=h[0].bandwidth/1e3,E=h[h.length-1].bandwidth/1e3,_=0;_<h.length;_++){var v=h[_].bandwidth/1e3;E<v?E=v:v<y&&(y=v)}var T=h[a].bandwidth/1e3,b=N.getCurrentHttpRequest(r,!0),S=(b.tresponse.getTime()-b.trequest.getTime())/1e3,A=p<S?S-p:0,R=(C.setupPerSegmentQoe(p,E,y),C.logSegmentMetrics(T,A,d,g),(0,P.default)(D).create({targetLatency:1.5,bufferMin:.3,segmentDuration:p,qoeEvaluator:C}));return t.quality=w.getNextQuality(o,1e3*m,d,l,g,a,R),t.reason={throughput:m,latency:d},t.priority=M.default.PRIORITY.STRONG,u.setTimeToLoadDelay(0),t.quality!==a&&I.debug("[TgcLearningRule]["+r+"] requesting switch to index: ",t.quality,"Average throughput",Math.round(m),"kbps"),t}catch(e){throw e}},reset:function(){w.reset(),C.reset()}},I=(0,n.default)(D).getInstance().getLogger(e),w=(0,a.default)(D).create(),C=(0,o.default)(D).create(),e}s.__dashjs_factory_name="LoLPRule",t.default=i.default.getClassFactory(s)},"./src/streaming/rules/abr/lolp/LoLpWeightSelector.js":function(e,t,r){"use strict";r.r(t);r=r("./src/core/FactoryMaker.js");function n(e){var r,n,m=e.targetLatency,h=e.bufferMin,p=e.segmentDuration,y=e.qoeEvaluator;function t(){return p}function E(e,t){e=p<t?e-p:e+p-t;return e}return e={getMinBuffer:function(){return h},getSegmentDuration:t,getNextBufferWithBitrate:function(e,t,r){return E(t,e*p/r)},getNextBuffer:E,findWeightVector:function(e,o,s,t,u,l){var c=null,f=null,d=null,g=Math.abs(o-n);return e.forEach(function(a){r.forEach(function(e){e[0];var t=e[1],r=e[2],n=(e[3],a.bitrate*p/u),i=E(s,n),r=0===r?10:1/r,n=r*Math.max(1e-5,n-i),t=(r=0===t?10:1/t)*a.state.latency,r=y.calculateSingleUseQoe(a.bitrate,n,t,l);(null===c||c<r)&&function(e,t,r){if(m+r<e)return;return h<=t}(o,i,g)&&(c=r,f=e,d=a.bitrate)})}),n=o,f=null===f&&null===d?-1:f}},r=function(u,e){return function e(t,r,n){if(n===r)return t;for(var i=t.length,a=0;a<i;a++)for(var o=t.shift(),s=0;s<u.length;s++)t.push(o.concat(u[s]));return e(t,r,n+1)}(u.map(function(e){return[e]}),e,1)}([.2,.4,.6,.8,1],4),n=0,e}n.__dashjs_factory_name="LoLpWeightSelector",t.default=r.default.getClassFactory(n)},"./src/streaming/rules/abr/lolp/QoeInfo.js":function(e,t,r){"use strict";r.r(t),t.default=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0}},"./src/streaming/text/EmbeddedTextHtmlRender.js":function(e,t,r){"use strict";r.r(t);r=r("./src/core/FactoryMaker.js");function n(){var j=0;function r(e){return"red"===e?"rgb(255, 0, 0)":"green"===e?"rgb(0, 255, 0)":"blue"===e?"rgb(0, 0, 255)":"cyan"===e?"rgb(0, 255, 255)":"magenta"===e?"rgb(255, 0, 255)":"yellow"===e?"rgb(255, 255, 0)":"white"===e?"rgb(255, 255, 255)":"black"===e?"rgb(0, 0, 0)":e}function k(e,t){e=e.videoHeight/15;return t?"font-size: "+e+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(t.foreground?r(t.foreground):"rgb(255, 255, 255)")+"; font-style: "+(t.italics?"italic":"normal")+"; text-decoration: "+(t.underline?"underline":"none")+"; white-space: pre; background-color: "+(t.background?r(t.background):"transparent")+";":"font-size: "+e+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}return{createHTMLCaptionsFromScreen:function(e,t,r,x){for(var n=null,i=!1,a=-1,o={start:t,end:r,spans:[]},s="style_cea608_white_black",u={},l={},c=[],f=0;f<15;++f){var d=x.rows[f],g="",m=null;if(!1===d.isEmpty()){var h=function(e){for(var t="",r=0;r<e.length;++r)t+=e[r].uchar;return t.length-t.replace(/^\s+/,"").length}(d.chars);null===n&&(n={x:h,y1:f,y2:f+1,p:[]}),h!==a&&i&&(n.p.push(o),o={start:t,end:r,spans:[]},n.y2=f,n.name="region_"+n.x+"_"+n.y1+"_"+n.y2,!1===u.hasOwnProperty(n.name)?(c.push(n),u[n.name]=n):u[n.name].p.contat(n.p),n={x:h,y1:f,y2:f+1,p:[]});for(var p=0;p<d.chars.length;++p){var y,E=d.chars[p],_=E.penState;null!==m&&_.equals(m)||(0<g.trim().length&&(o.spans.push({name:s,line:g,row:f}),g=""),y="style_cea608_"+_.foreground+"_"+_.background,_.underline&&(y+="_underline"),_.italics&&(y+="_italics"),l.hasOwnProperty(y)||(l[y]=JSON.parse(JSON.stringify(_))),m=_,s=y),g+=E.uchar}0<g.trim().length&&o.spans.push({name:s,line:g,row:f}),i=!0,a=h}else i=!1,a=-1,n&&(n.p.push(o),o={start:t,end:r,spans:[]},n.y2=f,n.name="region_"+n.x+"_"+n.y1+"_"+n.y2,!1===u.hasOwnProperty(n.name)?(c.push(n),u[n.name]=n):u[n.name].p.contat(n.p),n=null)}n&&(n.p.push(o),n.y2=f+1,n.name="region_"+n.x+"_"+n.y1+"_"+n.y2,!1===u.hasOwnProperty(n.name)?(c.push(n),u[n.name]=n):u[n.name].p.contat(n.p),n=null);var v=[];for(f=0;f<c.length;++f){var T=c[f],b="sub_cea608_"+j++,S=document.createElement("div"),A=(S.id=b,"left: "+3.125*T.x+"%; top: "+6.66*T.y1+"%; width: "+(100-3.125*T.x)+"%; height: "+6.66*Math.max(T.y2-1-T.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"),A=(S.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+A,document.createElement("div")),R=(A.className="paragraph bodyStyle",A.style.cssText=k(e),document.createElement("div"));R.className="cueUniWrapper",R.style.cssText="unicode-bidi: normal; direction: ltr;";for(var I=0;I<T.p.length;++I)for(var w=T.p[I],C=0,N=0;N<w.spans.length;++N){var D,M,O,P=w.spans[N];0<P.line.length&&(0!==N&&C!=P.row&&((D=document.createElement("br")).className="lineBreak",R.appendChild(D)),D=!1,C===P.row&&(D=!0),C=P.row,M=l[P.name],(O=document.createElement("span")).className="spanPadding "+P.name+" customSpanColor",O.style.cssText=k(e,M),0!==N&&D?N===w.spans.length-1?O.textContent=P.line.replace(/\s+$/g,""):O.textContent=P.line:1<w.spans.length&&N<w.spans.length-1&&P.row===w.spans[N+1].row?O.textContent=P.line.replace(/^\s+/g,""):O.textContent=P.line.trim(),R.appendChild(O))}A.appendChild(R),S.appendChild(A);var L,F={bodyStyle:["%",90]};for(L in l)l.hasOwnProperty(L)&&(F[L]=["%",90]);v.push({type:"html",start:t,end:r,cueHTMLElement:S,cueID:b,cellResolution:[32,15],isFromCEA608:!0,fontSize:F,lineHeight:{},linePadding:{}})}return v}}}n.__dashjs_factory_name="EmbeddedTextHtmlRender",t.default=r.default.getSingletonFactory(n)},"./src/streaming/text/NotFragmentedTextBufferController.js":function(e,t,r){"use strict";r.r(t);var p=r("./src/core/EventBus.js"),y=r("./src/core/events/Events.js"),n=r("./src/core/FactoryMaker.js"),E=r("./src/streaming/utils/InitCache.js"),_=r("./src/streaming/SourceBufferSink.js"),v=r("./src/streaming/vo/DashJSError.js"),T=r("./src/core/errors/Errors.js"),b="NotFragmentedTextBufferController";function i(e){e=e||{};var t,r,n,i,a,o,s=this.context,u=(0,p.default)(s).getInstance(),l=e.textController,c=e.errHandler,f=e.streamInfo,d=e.type;function g(e){i=e}function m(e){var t;r!==e&&(r=e)&&(e=y.default.BUFFERING_COMPLETED,t=(t=void 0)||{},u.trigger(e,t,{streamId:f.id,mediaType:d}))}function h(e){e.chunk.bytes&&!r&&(o.save(e.chunk),a.append(e.chunk),m(!0))}return i=null,o=(r=n=!(t={initialize:function(e){g(e)},getStreamId:function(){return f.id},getType:function(){return d},getBufferControllerType:function(){return b},createBufferSink:function(r){return new Promise(function(e,t){try{(a=(0,_.default)(s).create({mediaSource:i,textController:l,eventBus:u})).initializeForFirstUse(f,r),n||(a.getBuffer()&&"function"==typeof a.getBuffer().initialize&&a.getBuffer().initialize(),n=!0),e(a)}catch(e){c.error(new v.default(T.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,T.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+d)),t(e)}})},dischargePreBuffer:function(){},getBuffer:function(){return a},getBufferLevel:function(){return 0},getRangeAt:function(){return null},pruneBuffer:function(){},hasBufferAtTime:function(){return!0},getAllRangesWithSafetyFactor:function(){return[]},getContinuousBufferTimeForTargetTime:function(){return Number.POSITIVE_INFINITY},setMediaSource:g,getMediaSource:function(){return i},appendInitSegmentFromCache:function(e){return null!==o.extract(f.id,e)},getIsBufferingCompleted:function(){return r},setIsBufferingCompleted:m,getIsPruningInProgress:function(){return!1},reset:function(e){u.off(y.default.INIT_FRAGMENT_LOADED,h,t),!e&&a&&(a.abort(),a.reset(),a=null)},clearBuffers:function(){return Promise.resolve()},prepareForPlaybackSeek:function(){return Promise.resolve()},prepareForReplacementTrackSwitch:function(){return r=!1,Promise.resolve()},setSeekTarget:function(){},updateAppendWindow:function(){return Promise.resolve()},pruneAllSafely:function(){return Promise.resolve()},updateBufferTimestampOffset:function(){return Promise.resolve()},segmentRequestingCompleted:function(){}}),E.default)(s).getInstance(),u.on(y.default.INIT_FRAGMENT_LOADED,h,t),t}i.__dashjs_factory_name=b,t.default=n.default.getClassFactory(i)},"./src/streaming/text/TextController.js":function(e,t,r){"use strict";r.r(t);var w=r("./src/streaming/constants/Constants.js"),n=r("./src/core/FactoryMaker.js"),C=r("./src/streaming/text/TextSourceBuffer.js"),N=r("./src/streaming/text/TextTracks.js"),D=r("./src/streaming/utils/VTTParser.js"),M=r("./src/streaming/utils/VttCustomRenderingParser.js"),O=r("./src/streaming/utils/TTMLParser.js"),P=r("./src/core/EventBus.js"),L=r("./src/core/events/Events.js"),F=r("./src/streaming/MediaPlayerEvents.js"),x=r("./src/streaming/utils/SupervisorTools.js");function i(e){var t,a,c,f,n,i,o,d,g,r,s,u,l=this.context,m=e.adapter,h=e.errHandler,p=e.manifestModel,y=e.mediaController,E=e.videoModel,_=e.settings;function v(e){var r,t=e.tracks,n=e.index,i=e.streamId;!1===_.get().streaming.text.defaultEnabled&&!S()||u?A(i,-1):((e=y.getCurrentTrackFor(w.default.TEXT,i))&&(r={lang:e.lang,role:e.roles[0],index:e.index,codec:e.codec,accessibility:e.accessibility[0]},t.some(function(e,t){if(y.matchSettings(r,e))return A(i,t),n=t,!0})),g=!1),a[i].lastEnabledIndex=n,d.trigger(F.default.TEXT_TRACKS_ADDED,{enabled:S(),index:n,tracks:t,streamId:i}),s=!0}function T(e){try{var t=e.streamId;if(!f[t]||isNaN(e.time))return;f[t].manualCueProcessing(e.time)}catch(e){}}function b(e){try{var t=e.streamId;if(!f[t])return;f[t].disableManualTracks()}catch(e){}}function S(){return g&&!r?!1:!0}function A(e,t){(g=-1===t)&&y&&y.saveTextSettingsDisabled();var r=R(e);if(r!==t&&f[e]){f[e].disableManualTracks(),f[e].setModeForTrackIdx(r,w.default.TEXT_HIDDEN),f[e].setCurrentTrackIdx(t),f[e].setModeForTrackIdx(t,w.default.TEXT_SHOWING);t=f[e].getCurrentTrackInfo();if(t&&t.isFragmented&&!t.isEmbedded){var n=e,i=t,a=r;if(c[n])for(var o=c[n].getConfig().fragmentedTracks,s=0;s<o.length;s++){var u,l=o[s];i.lang===l.lang&&(l.id?i.id===l.id:i.index===l.index)&&(u=y.getCurrentTrackFor(w.default.TEXT,n),(l.id?u.id!==l.id:u.index!==l.index)?(f[n].deleteCuesFromTrackIdx(a),c[n].setCurrentFragmentedTrackIdx(s)):-1===a&&d.trigger(L.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,{},{streamId:n,mediaType:w.default.TEXT}))}}else t&&!t.isFragmented&&d.trigger(L.default.SET_NON_FRAGMENTED_TEXT,{currentTrackInfo:t},{streamId:e,mediaType:w.default.TEXT});y.setTrack(t)}}function R(e){return f[e].getCurrentTrackIdx()}function I(){c={},f={},a={},u=s=!(g=!0)}return n=(u=s=r=!(t={deactivateStream:function(e){e&&(e=e.id,c[e]&&c[e].resetMediaInfos(),f[e]&&f[e].deleteAllTextTracks())},initialize:function(){d.on(L.default.TEXT_TRACKS_QUEUE_INITIALIZED,v,t),_.get().streaming.text.webvtt.customRenderingEnabled&&(d.on(L.default.PLAYBACK_TIME_UPDATED,T,t),d.on(L.default.PLAYBACK_SEEKING,b,t))},initializeForStream:function(e){var t=e.id,r=(0,N.default)(l).create({videoModel:E,settings:_,streamInfo:e});r.initialize(),f[t]=r,(r=(0,C.default)(l).create({errHandler:h,adapter:m,manifestModel:p,mediaController:y,videoModel:E,textTracks:r,vttParser:n,vttCustomRenderingParser:i,ttmlParser:o,streamInfo:e,settings:_})).initialize(),c[t]=r,a[t]={},a[t].lastEnabledIndex=-1},createTracks:function(e){e=e.id,f[e]&&f[e].createTracks()},getTextSourceBuffer:function(e){if(e=e.id,c&&c[e])return c[e]},getAllTracksAreDisabled:function(){return g},addEmbeddedTrack:function(e,t){e=e.id,c[e]&&c[e].addEmbeddedTrack(t)},enableText:function(e,t){return(0,x.checkParameterType)(t,"boolean"),S()!==t&&(t&&A(e,a[e].lastEnabledIndex),t||(a[e].lastEnabledIndex=R(e),s?A(e,-1):u=!0)),!0},isTextEnabled:S,setTextTrack:A,getCurrentTrackIdx:R,enableForcedTextStreaming:function(e){return(0,x.checkParameterType)(e,"boolean"),r=e,!0},addMediaInfosToBuffer:function(e,t,r){e=e.id,c[e]&&c[e].addMediaInfos(t,r,3<arguments.length&&void 0!==arguments[3]?arguments[3]:null)},reset:function(){I(),d.off(L.default.TEXT_TRACKS_QUEUE_INITIALIZED,v,t),_.get().streaming.text.webvtt.customRenderingEnabled&&(d.off(L.default.PLAYBACK_TIME_UPDATED,T,t),d.off(L.default.PLAYBACK_SEEKING,b,t)),Object.keys(c).forEach(function(e){c[e].resetEmbedded(),c[e].reset()})}}),D.default)(l).getInstance(),i=(0,M.default)(l).getInstance(),o=(0,O.default)(l).getInstance(),d=(0,P.default)(l).getInstance(),I(),t}i.__dashjs_factory_name="TextController",t.default=n.default.getClassFactory(i)},"./src/streaming/text/TextSourceBuffer.js":function(e,t,r){"use strict";r.r(t);var Q=r("./src/streaming/constants/Constants.js"),J=r("./src/streaming/vo/metrics/HTTPRequest.js"),p=r("./src/streaming/vo/TextTrackInfo.js"),y=r("./src/streaming/utils/BoxParser.js"),E=r("./src/streaming/utils/CustomTimeRanges.js"),n=r("./src/core/FactoryMaker.js"),_=r("./src/core/Debug.js"),v=r("./src/streaming/text/EmbeddedTextHtmlRender.js"),Z=r("./node_modules/codem-isoboxer/dist/iso_boxer.js"),i=r("./externals/cea608-parser.js"),$=r.n(i),T=r("./src/core/EventBus.js"),b=r("./src/core/events/Events.js"),ee=r("./src/streaming/vo/DashJSError.js"),te=r("./src/core/errors/Errors.js");function a(e){var C,N,D,M,l,O,P,L,c,F,x,j,k,U,B,G,q,H=e.errHandler,Y=e.manifestModel,f=e.mediaController,V=e.videoModel,K=e.textTracks,z=e.vttParser,r=e.vttCustomRenderingParser,u=e.ttmlParser,d=e.streamInfo,h=e.settings,g=this.context,t=(0,T.default)(g).getInstance(),n=!1;function i(){L=NaN,F=O=null,P=!(c=[]),l=[],M=null}function a(e){e=e.chunk;e.mediaInfo.embeddedCaptions&&o(e.bytes,e)}function m(e){x=e}function o(e,t){var r=t.mediaInfo,n=r.type,i=r.mimeType,i=r.codec||i;if(i)if(-1!==r.codec.indexOf("application/mp4")){if(r=e,b=i,"InitializationSegment"===(v=t).segmentType)P=!0,L=D.getMediaTimescaleFromMoov(r);else if(P)if(0<(T=(T=D.getSamplesInfo(r)).sampleList).length&&(F=T[0].cts-v.start*L),0<=b.search(Q.default.STPP))!function(e,t,r){var n,i;for(M=null!==M?M:X(r),n=0;n<t.length;n++){var a=t[n],o=a.cts,s=W(),u=s+o/L,l=u+a.duration/L,u=(C.buffered.add(u,l),new DataView(e,a.offset,a.subSizes[0])),l=Z.Utils.dataViewToString(u,Q.default.UTF8),c=[],f=a.offset+a.subSizes[0];for(i=1;i<a.subSizes.length;i++){var d=new Uint8Array(e,f,a.subSizes[i]),d=String.fromCharCode.apply(null,d);c.push(d),f+=a.subSizes[i]}try{var g=Y.getValue().ttmlTimeIsRelative?o/L:0,m=M.parse(l,g,o/L,(o+a.duration)/L,c);K.addCaptions(x,s,m)}catch(e){O.removeExecutedRequestsBeforeTime(),this.remove(),N.error("TTML parser error: "+e.message)}}}(r,T,b);else{var a,o,s,u=r,l=T,c=[];for(a=0;a<l.length;a++){var f=l[a];f.cts-=F;var d=W()+f.cts/L,g=d+f.duration/L,d=(C.buffered.add(d,g),u.slice(f.offset,f.offset+f.size)),m=Z.parseBuffer(d);for(o=0;o<m.boxes.length;o++){var h=m.boxes[o];if(N.debug("VTT box1: "+h.type),"vtte"!==h.type&&"vttc"===h.type){N.debug("VTT vttc boxes.length = "+h.boxes.length);var p={styles:{}};for(s=0;s<h.boxes.length;s++){var y=h.boxes[s];if(N.debug("VTT box2: "+y.type),"payl"===y.type)p.start=f.cts/L,p.end=(f.cts+f.duration)/L,p.data=y.cue_text;else if("sttg"===y.type&&y.settings&&""!==y.settings)try{var E=y.settings.split(" ");p.styles=z.getCaptionStyles(E)}catch(e){}}p&&p.data&&(c.push(p),N.debug("VTT  ".concat(p.start," - ").concat(p.end," :  ").concat(p.data)))}}}0<c.length&&K.addCaptions(x,0,c)}}else if(n===Q.default.VIDEO){var _,v=e;if((b=t).segmentType===J.HTTPRequest.INIT_SEGMENT_TYPE)0===k&&(k=D.getMediaTimescaleFromMoov(v));else if(b.segmentType===J.HTTPRequest.MEDIA_SEGMENT_TYPE)if(0===k)N.warn("CEA-608: No timescale for embeddedTextTrack yet");else{var T=(r=D.getSamplesInfo(v)).lastSequenceNumber,n=Math.trunc(b.start),b=Math.trunc(b.end);if(G[0]||G[1]||!function(){for(var e=0;e<j.length;e++){if(-1===(t=K.getTrackIdxForId(j[e].id)))return N.warn("CEA-608: data before track is ready.");var t=function(n){return function(e,t,r){(e=V.getTTMLRenderingDiv()?q.createHTMLCaptionsFromScreen(V.getElement(),e,t,r):[{start:e,end:t,data:r.getDisplayText(),styles:{}}])&&K.addCaptions(n,0,e)}}(t);G[e]=new($().Cea608Parser)(e+1,{newCue:t},null)}}(),k){if(function(e,t,r,n,i){return null!==e&&null!==t&&null!==n&&null!==i&&(t!==e?t!==e+r:n!==i)}(U,T,r.numSequences,B,n))for(_=0;_<G.length;_++)G[_]&&G[_].reset();for(var S=function(e,t){if(0===t.length)return null;for(var r={splits:[],fields:[[],[]]},n=new DataView(e),i=0;i<t.length;i++)for(var a=t[i],o=$().findCea608Nalus(n,a.offset,a.size),s=null,u=0,l=0;l<o.length;l++)for(var c,f=$().extractCea608DataFromRange(n,o[l]),d=0;d<2;d++)0<f[d].length&&(a.cts!==s?u=0:u+=1,c=W(),r.fields[d].push([a.cts+c*k,f[d],u]),s=a.cts);return r.fields.forEach(function(e){e.sort(function(e,t){return e[0]===t[0]?e[2]-t[2]:e[0]-t[0]})}),r}(v,r.sampleList),A=0;A<G.length;A++){var R=S.fields[A],I=G[A];if(I)for(_=0;_<R.length;_++)I.addData(R[_][0]/k,R[_][1])}U=T,B=b}}}else{var w,n=e,r=t,e=i,n=new DataView(n,0,n.byteLength);n=Z.Utils.dataViewToString(n,Q.default.UTF8);try{w=X(e).parse(n,0),K.addCaptions(K.getCurrentTrackIdx(),0,w),C.buffered&&C.buffered.add(r.start,r.end)}catch(e){H.error(new ee.default(te.default.TIMED_TEXT_ERROR_ID_PARSE_CODE,te.default.TIMED_TEXT_ERROR_MESSAGE_PARSE+e.message,n))}}else N.error("No text type defined")}function W(){return isNaN(C.timestampOffset)?0:C.timestampOffset}function X(e){var t;return 0<=e.search(Q.default.VTT)?t=h.get().streaming.text.webvtt.customRenderingEnabled&&r?r:z:(0<=e.search(Q.default.TTML)||0<=e.search(Q.default.STPP))&&(t=u),t}function s(t){j.forEach(function(e){e=K.getTrackIdxForId(e.id);0<=e&&K.deleteCuesFromTrackIdx(e,t.from,t.to)})}return C={initialize:function(){n||(j=[],G=[],n=!(k=0),q=(B=U=x=null,v.default)(g).getInstance(),t.on(b.default.VIDEO_CHUNK_RECEIVED,a,C),t.on(b.default.BUFFER_CLEARED,s,C))},addMediaInfos:function(e,t,r){if(l=l.concat(t),e===Q.default.TEXT&&t[0].isFragmented&&!t[0].isEmbedded){O=r,C.buffered=(0,E.default)(g).create(),c=f.getTracksFor(Q.default.TEXT,d.id).filter(function(e){return e.isFragmented});for(var n=f.getCurrentTrackFor(Q.default.TEXT,d.id),i=0;i<c.length;i++)if(c[i]===n){m(i);break}}for(var a=0;a<t.length;a++){o=u=s=void 0;var o,s=t[a],u=new p.default;for(o in s)u[o]=s[o];u.labels=s.labels,u.defaultTrack=function(e){var t=!1;1<j.length&&e.isEmbedded?t=e.id&&e.id===Q.default.CC1:1===j.length?e.id&&"string"==typeof e.id&&"CC"===e.id.substring(0,2)&&(t=!0):0===j.length&&(t=e.index===l[0].index);return t}(s),u.isFragmented=s.isFragmented,u.isEmbedded=!!s.isEmbedded,u.isTTML=function(e){return e.codec&&0<=e.codec.search(Q.default.STPP)||e.mimeType&&0<=e.mimeType.search(Q.default.TTML)}(s),u.kind=function(e,t){e=e.roles&&0<e.roles.length?t[e.roles[0]]:t.caption;return e=e===t.caption||e===t.subtitle?e:t.caption}(s,{subtitle:"subtitles",caption:"captions"}),K.addTextTrack(u)}},resetMediaInfos:function(){l=[]},getStreamId:function(){return d.id},append:o,abort:function(){},addEmbeddedTrack:function(e){if(n&&e)if(e.id===Q.default.CC1||e.id===Q.default.CC3){for(var t=0;t<j.length;t++)if(j[t].id===e.id)return;j.push(e)}else N.warn("Embedded track "+e.id+" not supported!")},resetEmbedded:function(){t.off(b.default.VIDEO_CHUNK_RECEIVED,a,C),t.off(b.default.BUFFER_CLEARED,s,C),K&&K.deleteAllTextTracks(),n=!1,j=[],G=[null,null],B=U=null},getConfig:function(){return{fragmentModel:O,fragmentedTracks:c,videoModel:V}},setCurrentFragmentedTrackIdx:m,remove:function(e,t){void 0===e&&e===t&&(e=C.buffered.start(0),t=C.buffered.end(C.buffered.length-1)),C.buffered.remove(e,t),K.deleteCuesFromTrackIdx(x,e,t)},reset:function(){i(),l=[],D=null}},N=(0,_.default)(g).getInstance().getLogger(C),D=(0,y.default)(g).getInstance(),i(),C}a.__dashjs_factory_name="TextSourceBuffer",t.default=n.default.getClassFactory(a)},"./src/streaming/text/TextTracks.js":function(e,t,r){"use strict";r.r(t);var x=r("./src/streaming/constants/Constants.js"),j=r("./src/core/EventBus.js"),k=r("./src/core/events/Events.js"),U=r("./src/streaming/MediaPlayerEvents.js"),n=r("./src/core/FactoryMaker.js"),B=r("./src/core/Debug.js"),G=r("./node_modules/imsc/src/main/js/main.js");function q(e,t){var r,n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,o=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){o=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(o)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var H=["text","align","fontSize","id","isd","line","lineAlign","lineHeight","linePadding","position","positionAlign","region","size","snapToLines","vertical"];function i(e){var s,u,l,c,f,m,h,p,y,E,d,n,_,v,r,T,i,t=this.context,b=(0,j.default)(t).getInstance(),S=e.videoModel,g=e.streamInfo,A=e.settings;function R(e,t){var r=S.getClientWidth(),n=S.getClientHeight(),i=S.getVideoWidth(),a=S.getVideoHeight(),o=S.getVideoRelativeOffsetTop(),s=S.getVideoRelativeOffsetLeft();if(0!==i&&0!==a){var u=i/a,l=!1,r=(e.isFromCEA608&&(u=3.5/3,l=!0),function(e,t,r,n,i,a){var o=0,s=0,r=(r/n<e/t?o=(s=t)/n*r:s=(o=e)/r*n,0),n=0;return i<o/s?r=(n=s)*i:n=(r=o)/i,s=(e-r)/2,o=(t-n)/2,a?{x:s+.1*r,y:o+.1*n,w:.8*r,h:.8*n}:{x:s,y:o,w:r,h:n}}.call(this,r,n,i,a,u,l)),n=r.w,i=r.h,a=r.x,u=r.y;if(n!=p||i!=y||a!=m||u!=h||t){m=a+s,h=u+o,p=n,y=i,!E||(l=E.style)&&(l.left=m+"px",l.top=h+"px",l.width=p+"px",l.height=y+"px",l.zIndex=_&&document[_]||v?T:null,b.trigger(U.default.CAPTION_CONTAINER_RESIZE));var c=e.activeCues;if(c)for(var f=c.length,d=0;d<f;++d){var g=c[d];g.scaleCue(g)}}}}function I(e){var t,r,n,i=p,a=y;if(e.cellResolution){var o=[i/e.cellResolution[0],a/e.cellResolution[1]];if(e.linePadding)for(t in e.linePadding)if(e.linePadding.hasOwnProperty(t))for(var s=(e.linePadding[t]*o[0]).toString(),u=document.getElementsByClassName("spanPadding"),l=0;l<u.length;l++)u[l].style.cssText=u[l].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+s),u[l].style.cssText=u[l].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+s);if(e.fontSize){for(t in e.fontSize)if(e.fontSize.hasOwnProperty(t)){"%"===e.fontSize[t][0]?r=e.fontSize[t][1]/100:"c"===e.fontSize[t][0]&&(r=e.fontSize[t][1]),s=(r*o[1]).toString();for(var c="defaultFontSize"!==t?document.getElementsByClassName(t):document.getElementsByClassName("paragraph"),f=0;f<c.length;f++)c[f].style.cssText=c[f].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+s)}if(e.lineHeight)for(t in e.lineHeight)if(e.lineHeight.hasOwnProperty(t)){"%"===e.lineHeight[t][0]?n=e.lineHeight[t][1]/100:"c"===e.fontSize[t][0]&&(n=e.lineHeight[t][1]),s=(n*o[1]).toString(),c=document.getElementsByClassName(t);for(var d=0;d<c.length;d++)c[d].style.cssText=c[d].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+s)}}}e.isd&&((i=document.getElementById(e.cueID))&&E.removeChild(i),C(e))}function w(e,t){var r=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,n=/^#(.*)$/;return r.test(t)?(r=r.exec(t),r=parseInt(r[4],10)-1,"data:image/png;base64,"+btoa(e.images[r])):n.test(t)?(r=n.exec(t)[1],"data:image/png;base64,"+e.embeddedImages[r]):t}function C(t){var e;E&&(e=document.createElement("div"),E.appendChild(e),r=(0,G.renderHTML)(t.isd,e,function(e){return w(t,e)},E.clientHeight,E.clientWidth,!1,function(e){s.info("renderCaption :",e)},r,!0),e.id=t.cueID,b.trigger(U.default.CAPTION_RENDERED,{captionDiv:e,currentTrackIdx:f}))}function N(e,t){if(A.get().streaming.text.extendSegmentedCues&&(t.cues&&0!==t.cues.length))return(t=t.cues[t.cues.length-1]).endTime<e.startTime?void 0:function(e,t,r){for(var n=0;n<r.length;n++){var i=r[n];if(JSON.stringify(e[i])!==JSON.stringify(t[i]))return}return 1}(t,e,H)&&(t.endTime=Math.max(t.endTime,e.endTime),1)}function D(e,t,r){var n=O(e);if(n&&Array.isArray(r)&&0!==r.length)for(var i=0;i<r.length;i++){var a=void 0,o=r[i];n.cellResolution=o.cellResolution,n.isFromCEA608=o.isFromCEA608,isNaN(o.start)||isNaN(o.end)||(a="html"===o.type&&E?function(e,t,r){var n=this,t=new u(e.start+t,e.end+t,"");t.cueHTMLElement=e.cueHTMLElement,t.isd=e.isd,t.images=e.images,t.embeddedImages=e.embeddedImages,t.cueID=e.cueID,t.scaleCue=I.bind(n),t.cellResolution=e.cellResolution,t.lineHeight=e.lineHeight,t.linePadding=e.linePadding,t.fontSize=e.fontSize,E.style.left=m+"px",E.style.top=h+"px",E.style.width=p+"px",E.style.height=y+"px",t.isd&&function t(r,e){e&&e.forEach(function(e){e.kind&&"image"===e.kind&&(e.src=w(r,e.src)),t(r,e.contents)})}(t,t.isd.contents);return t.onenter=function(){r.mode===x.default.TEXT_SHOWING&&(this.isd?(C(this),s.debug("Cue enter id:"+this.cueID)):(E.appendChild(this.cueHTMLElement),I.call(n,this),b.trigger(U.default.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:f})))},t.onexit=function(){if(E)for(var e=E.childNodes,t=0;t<e.length;++t)e[t].id===this.cueID&&(s.debug("Cue exit id:"+e[t].id),E.removeChild(e[t]),--t)},t}(o,t,n):o.data?function(e,t,r){t=new u(e.start-t,e.end-t,e.data);if(t.cueID="".concat(t.startTime,"_").concat(t.endTime),t.isActive=!1,e.styles)try{void 0!==e.styles.align&&"align"in t&&(t.align=e.styles.align),void 0!==e.styles.line&&"line"in t&&(t.line=e.styles.line),void 0!==e.styles.snapToLines&&"snapToLines"in t&&(t.snapToLines=e.styles.snapToLines),void 0!==e.styles.position&&"position"in t&&(t.position=e.styles.position),void 0!==e.styles.size&&"size"in t&&(t.size=e.styles.size)}catch(e){s.error(e)}return t.onenter=function(){r.mode===x.default.TEXT_SHOWING&&b.trigger(U.default.CAPTION_RENDERED,{currentTrackIdx:f})},t}(o,t,n):null);try{a?function(e,t){if(!e.cues)return;for(var r=0;r<e.cues.length;r++)if(e.cues[r].startTime===t.startTime&&e.cues[r].endTime===t.endTime)return 1;return}(n,a)||(A.get().streaming.text.webvtt.customRenderingEnabled?(n.manualCueList||(n.manualCueList=[]),n.manualCueList.push(a)):N(a,n)||n.addCue(a)):s.error("Impossible to display subtitles. You might have missed setting a TTML rendering div via player.attachTTMLRenderingDiv(TTMLRenderingDiv)")}catch(e){throw L(n),n.addCue(a),e}}}function M(e){if(d)for(var t=d.childNodes,r=0;r<t.length;++r)t[r].id===e.cueID&&(d.removeChild(t[r]),--r)}function a(){var e,t=[],r=q(S.getTextTracks());try{for(r.s();!(e=r.n()).done;){var n=e.value;n.manualMode===x.default.TEXT_SHOWING&&t.push(n)}}catch(e){r.e(e)}finally{r.f()}return t}function O(e){return 0<=e&&l[e]?S.getTextTrack(l[e].kind,l[e].id,l[e].lang,l[e].isTTML,l[e].isEmbedded):null}function P(e){var t,r=this;e!==f&&(t=O(f=e),function(e){F.call(this),(e&&"html"===e.renderingType?function(){var e=document.getElementById("native-cue-style");if(!e){(e=document.createElement("style")).id="native-cue-style",document.head.appendChild(e);var e=e.sheet,t=S.getElement();try{t&&(t.id?e.insertRule("#"+t.id+"::cue {background: transparent}",0):0!==t.classList.length?e.insertRule("."+t.className+"::cue {background: transparent}",0):e.insertRule("video::cue {background: transparent}",0))}catch(e){s.info(""+e.message)}}}:o).call(this)}.call(this,t),n&&(clearInterval(n),n=null),t&&"html"===t.renderingType&&(R.call(this,t,!0),window.ResizeObserver?(i=new window.ResizeObserver(function(){R.call(r,t,!0)})).observe(S.getElement()):n=setInterval(R.bind(this,t),500)))}function L(e,t,r){var n=!(3<arguments.length&&void 0!==arguments[3])||arguments[3];if(e&&(e.cues||e.manualCueList)){var i=e.cues&&0<e.cues.length?"native":"custom",a="native"==i?e.cues:e.manualCueList;if(a&&0!==a.length)for(var o=a.length-1;0<=o;o--)!function(e,t,r,n){return n=!(3<arguments.length&&void 0!==n)||n,e&&((isNaN(t)||(n?e.startTime:e.endTime)>=t)&&(isNaN(r)||(n?e.endTime:e.startTime)<=r))}(a[o],t,r,n)||("native"==i?(a[o].onexit&&a[o].onexit(),e.removeCue(a[o])):(M(a[o]),delete e.manualCueList[o]))}}function o(){var e=document.getElementById("native-cue-style");e&&document.head.removeChild(e)}function F(){if(E)for(;E.firstChild;)E.removeChild(E.firstChild)}return e={initialize:function(){"undefined"!=typeof window&&"undefined"!=typeof navigator&&(u=window.VTTCue||window.TextTrackCue,l=[],c=[],v=!(f=-1),T=2147483647,r=n=d=E=null,void(y=p=h=m=0)!==document.fullscreenElement?_="fullscreenElement":void 0!==document.webkitIsFullScreen?_="webkitIsFullScreen":document.msFullscreenElement?_="msFullscreenElement":document.mozFullScreen&&(_="mozFullScreen"))},getStreamId:function(){return g.id},addTextTrack:function(e){l.push(e)},addCaptions:D,createTracks:function(){l.sort(function(e,t){return e.index-t.index}),E=S.getTTMLRenderingDiv(),d=S.getVttRenderingDiv();for(var e,t,r,n=-1,i=0;i<l.length;i++){e=l[i],r=t=o=a=void 0,a=e.kind,o=void 0!==e.id?e.id:e.lang,t=e.lang,r=e.isTTML,e=e.isEmbedded;var a=S.addTextTrack(a,o,t,r,e),o=(c.push(a),l[i].defaultTrack&&(a.default=!0,n=i),O(i));o&&(o.mode=x.default.TEXT_SHOWING,E&&(l[i].isTTML||l[i].isEmbedded)?o.renderingType="html":o.renderingType="default"),D(i,0,l[i].captionData),b.trigger(U.default.TEXT_TRACK_ADDED)}if(P.call(this,n),0<=n){b.on(U.default.PLAYBACK_METADATA_LOADED,function e(){var t=O(n);t&&"html"===t.renderingType&&R.call(this,t,!0),b.off(U.default.PLAYBACK_METADATA_LOADED,e,this)},this);for(var s=0;s<l.length;s++){var u=O(s);u&&(u.mode=s===n?x.default.TEXT_SHOWING:x.default.TEXT_HIDDEN,u.manualMode=s===n?x.default.TEXT_SHOWING:x.default.TEXT_HIDDEN)}}b.trigger(k.default.TEXT_TRACKS_QUEUE_INITIALIZED,{index:f,tracks:l,streamId:g.id})},getCurrentTrackIdx:function(){return f},setCurrentTrackIdx:P,getTrackIdxForId:function(e){for(var t=-1,r=0;r<l.length;r++)if(l[r].id===e){t=r;break}return t},getCurrentTrackInfo:function(){return l[f]},setModeForTrackIdx:function(e,t){(e=O(e))&&e.mode!==t&&(e.mode=t),e&&e.manualMode!==t&&(e.manualMode=t)},deleteCuesFromTrackIdx:function(e,t,r){(e=O(e))&&L(e,t,r)},deleteAllTextTracks:function(){for(var e=c?c.length:0,t=0;t<e;t++){var r=O(t);r&&L.call(this,r,g.start,g.start+g.duration,!1)}c=[],l=[],n&&(clearInterval(n),n=null),i&&S&&(i.unobserve(S.getElement()),i=null),f=-1,F.call(this)},deleteTextTrack:function(e){S.removeChild(c[e]),c.splice(e,1)},manualCueProcessing:function(t){var e=a();e&&0<e.length&&((e=e[0].manualCueList)&&0<e.length&&e.forEach(function(e){e.startTime<=t&&e.endTime>=t&&!e.isActive?(e.isActive=!0,WebVTT.processCues(window,[e],d,e.cueID)):e.isActive&&(e.startTime>t||e.endTime<t)&&(e.isActive=!1,M(e))}))},disableManualTracks:function(){var e=a();e&&0<e.length&&((e=e[0].manualCueList)&&0<e.length&&e.forEach(function(e){if(e.isActive&&(e.isActive=!1,d))for(var t=d.childNodes,r=0;r<t.length;++r)t[r].id===e.cueID&&(d.removeChild(t[r]),--r)}))}},s=(0,B.default)(t).getInstance().getLogger(e),e}i.__dashjs_factory_name="TextTracks",t.default=n.default.getClassFactory(i)},"./src/streaming/thumbnail/ThumbnailController.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/core/FactoryMaker.js"),s=r("./src/streaming/constants/Constants.js"),u=r("./src/streaming/vo/Thumbnail.js"),l=r("./src/streaming/thumbnail/ThumbnailTracks.js"),c=r("./src/streaming/vo/BitrateInfo.js"),f=r("./src/dash/utils/SegmentsUtils.js");function i(e){var t,o,r=this.context,n=e.streamInfo;function i(e){o.setTrackByIndex(e)}function a(){o&&o.reset()}return t={getStreamId:function(){return n.id},initialize:function(){o.addTracks();var e=o.getTracks();e&&0<e.length&&i(0)},provide:function(e,t){if("function"==typeof t){var r=o.getCurrentTrack();if(!r||r.segmentDuration<=0||null==e)t(null);else{(n=o.getThumbnailRequestForTime(e))&&(r.segmentDuration=n.duration);var n,i=e%r.segmentDuration,i=Math.floor(i*r.tilesHor*r.tilesVert/r.segmentDuration),a=new u.default;if(a.width=Math.floor(r.widthPerTile),a.height=Math.floor(r.heightPerTile),a.x=Math.floor(i%r.tilesHor)*r.widthPerTile,a.y=Math.floor(i/r.tilesHor)*r.heightPerTile,"readThumbnail"in r)return r.readThumbnail(e,function(e){a.url=e,t(a)});n?(a.url=n.url,r.segmentDuration=NaN):(i=Math.floor(e/r.segmentDuration),a.url=(n=i,n+=(e=r).startNumber,i=(0,f.replaceTokenForTemplate)(e.templateUrl,"Number",n),i=(0,f.replaceTokenForTemplate)(i,"Time",(n-1)*e.segmentDuration*e.timescale),i=(0,f.replaceTokenForTemplate)(i,"Bandwidth",e.bandwidth),(0,f.unescapeDollarsInTemplate)(i))),t(a)}}},setTrackByIndex:i,getCurrentTrackIndex:function(){return o.getCurrentTrackIndex()},getBitrateList:function(){var e=o.getTracks(),r=0;return e.map(function(e){var t=new c.default;return t.mediaType=s.default.IMAGE,t.qualityIndex=r++,t.bitrate=e.bitrate,t.width=e.width,t.height=e.height,t})},reset:a},a(),o=(0,l.default)(r).create({streamInfo:n,adapter:e.adapter,baseURLController:e.baseURLController,timelineConverter:e.timelineConverter,debug:e.debug,eventBus:e.eventBus,events:e.events,dashConstants:e.dashConstants,dashMetrics:e.dashMetrics,segmentBaseController:e.segmentBaseController}),t}i.__dashjs_factory_name="ThumbnailController",t.default=n.default.getClassFactory(i)},"./src/streaming/thumbnail/ThumbnailTracks.js":function(e,t,r){"use strict";r.r(t),r.d(t,{THUMBNAILS_SCHEME_ID_URIS:function(){return D}});var T=r("./src/streaming/constants/Constants.js"),b=r("./src/dash/constants/DashConstants.js"),n=r("./src/core/FactoryMaker.js"),S=r("./src/streaming/vo/ThumbnailTrackInfo.js"),A=r("./src/streaming/utils/URLUtils.js"),R=r("./src/dash/utils/SegmentsUtils.js"),I=r("./src/streaming/utils/BoxParser.js"),w=r("./src/streaming/net/XHRLoader.js"),C=r("./src/dash/DashHandler.js"),N=r("./src/dash/controllers/SegmentsController.js"),D=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];function i(e){var t,i,a,o,s,u,l,c,r=this.context,f=e.adapter,d=e.baseURLController,n=e.streamInfo,g=e.timelineConverter,m=e.debug,h=e.eventBus,p=e.events,y=e.dashConstants,E=(0,A.default)(r).getInstance();function _(r,e){var t,n=new S.default;n.id=r.id,n.bitrate=r.bandwidth,n.width=r.width,n.height=r.height,n.tilesHor=1,n.tilesVert=1,r.essentialProperties&&r.essentialProperties.forEach(function(e){0<=D.indexOf(e.schemeIdUri)&&e.value&&(2!==(e=e.value.split("x")).length||isNaN(e[0])||isNaN(e[1])||(n.tilesHor=parseInt(e[0],10),n.tilesVert=parseInt(e[1],10)))}),e?u.updateSegmentData(r).then(function(e){var t,i,a;t=n,a=[],e=function(e,t){var r,n,i,a=[],o=0;for(r=0,n=e.segments.length;r<n;r++)i=e.segments[r],(i=(0,R.getTimeBasedSegment)(g,f.getIsDynamic(),t,i.startTime,i.duration,i.timescale,i.media,i.mediaRange,o))&&(a.push(i),i=null,o++);return a}(e=e,i=r),i.segments=e,t.segmentDuration=i.segments[0].duration,t.readThumbnail=function(t,n){var r=null;a.some(function(e){if(e.start<=t&&e.end>t)return r=e.url,!0}),r?n(r):i.segments.some(function(r){var e;if(r.mediaStartTime<=t&&r.mediaStartTime+r.duration>t)return e=d.resolve(i.path),l.load({method:"get",url:e.url,request:{range:r.mediaRange,responseType:"arraybuffer"},onload:function(e){var t=c.getSamplesInfo(e.target.response),e=new Blob([e.target.response.slice(t.sampleList[0].offset,t.sampleList[0].offset+t.sampleList[0].size)],{type:"image/jpeg"}),t=window.URL.createObjectURL(e);a.push({start:r.mediaStartTime,end:r.mediaStartTime+r.duration,url:t}),n&&n(t)}}),!0})}}):(n.startNumber=r.startNumber,n.segmentDuration=r.segmentDuration,n.timescale=r.timescale,n.templateUrl=(e=r,(t=E.isRelative(e.media)?E.resolve(e.media,d.resolve(e.path).url):e.media)?(0,R.replaceIDForTemplate)(t,e.id):"")),0<n.tilesHor&&0<n.tilesVert&&(n.widthPerTile=n.width/n.tilesHor,n.heightPerTile=n.height/n.tilesVert,i.push(n))}function v(){i=[],o=-1,s=null}return t={getTracks:function(){return i},addTracks:function(){var e;n&&f&&(s=f.getMediaInfoForType(n,T.default.IMAGE))&&((e=f.getVoRepresentations(s))&&0<e.length&&e.forEach(function(e){(e.segmentInfoType===b.default.SEGMENT_TEMPLATE&&0<e.segmentDuration&&e.media||e.segmentInfoType===b.default.SEGMENT_TIMELINE)&&_(e),e.segmentInfoType===b.default.SEGMENT_BASE&&_(e,!0)}),0<i.length&&i.sort(function(e,t){return e.bitrate-t.bitrate}))},reset:v,setTrackByIndex:function(e){i&&0!==i.length&&(e>=i.length&&(e=i.length-1),o=e)},getCurrentTrack:function(){return o<0?null:i[o]},getCurrentTrackIndex:function(){return o},getThumbnailRequestForTime:function(e){for(var t,r=f.getVoRepresentations(s),n=0;n<r.length;n++)if(i[o].id===r[n].id){t=r[n];break}return a.getSegmentRequestForTime(s,t,e)}},v(),l=(0,w.default)(r).create({}),c=(0,I.default)(r).getInstance(),u=(0,N.default)(r).create({events:p,eventBus:h,streamInfo:n,timelineConverter:g,dashConstants:y,dashMetrics:e.dashMetrics,segmentBaseController:e.segmentBaseController,type:T.default.IMAGE}),(a=(0,C.default)(r).create({streamInfo:n,type:T.default.IMAGE,timelineConverter:g,segmentsController:u,baseURLController:d,debug:m,eventBus:h,events:p,dashConstants:y,urlUtils:E})).initialize(!!f&&f.getIsDynamic()),t}i.__dashjs_factory_name="ThumbnailTracks",t.default=n.default.getClassFactory(i)},"./src/streaming/utils/BaseURLSelector.js":function(e,t,r){"use strict";r.r(t);var c=r("./src/core/errors/Errors.js"),f=r("./src/core/EventBus.js"),d=r("./src/core/events/Events.js"),g=r("./src/streaming/controllers/BlacklistController.js"),m=r("./src/streaming/utils/baseUrlResolution/DVBSelector.js"),h=r("./src/streaming/utils/baseUrlResolution/BasicSelector.js"),n=r("./src/core/FactoryMaker.js"),p=r("./src/streaming/vo/DashJSError.js"),y=r("./src/streaming/utils/SupervisorTools.js"),E=r("./src/streaming/utils/baseUrlResolution/ContentSteeringSelector.js"),_=r("./src/core/Settings.js");function i(){var e,t,r,n,i,a,o=this.context,s=(0,f.default)(o).getInstance(),u=(0,_.default)(o).getInstance();function l(){t.reset()}return e={chooseSelector:function(e){(0,y.checkParameterType)(e,"boolean"),a=e?n:r},select:function(e){var t;if(e)return u.get().streaming.applyContentSteering&&(t=i.selectBaseUrlIndex(e),isNaN(t)||-1===t||(e.selectedIdx=t)),isNaN(e.selectedIdx)?(t=a.select(e.baseUrls))?(e.selectedIdx=e.baseUrls.indexOf(t),t):(s.trigger(d.default.URL_RESOLUTION_FAILED,{error:new p.default(c.default.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,c.default.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(a===r&&l())):e.baseUrls[e.selectedIdx]},reset:l,setConfig:function(e){e.selector&&(a=e.selector),e.contentSteeringSelector&&(i=e.contentSteeringSelector)}},t=(0,g.default)(o).create({updateEventName:d.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,addBlacklistEventName:d.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD}),r=(0,h.default)(o).create({blacklistController:t}),n=(0,m.default)(o).create({blacklistController:t}),(i=(0,E.default)(o).create()).setConfig({blacklistController:t}),a=r,e}i.__dashjs_factory_name="BaseURLSelector",t.default=n.default.getClassFactory(i)},"./src/streaming/utils/BoxParser.js":function(e,t,r){"use strict";r.r(t);var i=r("./src/core/Debug.js"),a=r("./src/streaming/utils/IsoFile.js"),n=r("./src/core/FactoryMaker.js"),o=r("./node_modules/codem-isoboxer/dist/iso_boxer.js"),c=r("./src/streaming/vo/IsoBoxSearchInfo.js");function s(){var n,e,r=this.context;function D(e){if(!e)return null;void 0===e.fileStart&&(e.fileStart=0);var e=o.parseBuffer(e),t=(0,a.default)(r).create();return t.setData(e),t}function u(e,t){return e[t+3]>>>0|e[t+2]<<8>>>0|e[t+1]<<16>>>0|e[t]<<24>>>0}function l(e,t){return String.fromCharCode(e[t++])+String.fromCharCode(e[t++])+String.fromCharCode(e[t++])+String.fromCharCode(e[t])}return e={parse:D,findLastTopIsoBoxCompleted:function(e,t,r){if(void 0===r&&(r=0),!t||r+8>=t.byteLength)return new c.default(0,!1);for(var n,i=t instanceof ArrayBuffer?new Uint8Array(t):t,a=0;r<i.byteLength;){var o=u(i,r),s=l(i,r+4);if(0===o)break;r+o<=i.byteLength&&(0<=e.indexOf(s)?n=new c.default(r,!0,o):a=r+o),r+=o}return n||new c.default(a,!1)},getMediaTimescaleFromMoov:function(e){return(e=(e=D(e))?e.getBox("mdhd"):void 0)?e.timescale:NaN},getSamplesInfo:function(e){if(!e||0===e.byteLength)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};for(var t,r,n=(e=D(e)).getBoxes("moof"),i=e.getBoxes("mfhd"),e=e.getBoxes("moof").length,i=i[i.length-1].sequence_number,a=[],o=-1,s=-1,u=0;u<n.length;u++)for(var l=n[u],c=l.getChildBoxes("traf"),f=0;f<c.length;f++){for(var d=c[f],g=d.getChildBox("tfhd"),m=d.getChildBox("tfdt"),h=m.baseMediaDecodeTime,p=d.getChildBoxes("trun"),y=d.getChildBoxes("subs"),E=0;E<p.length;E++)for(var _=p[E],v=_.sample_count,T=(g.base_data_offset||0)+(_.data_offset||0),b=0;b<v;b++){var S,A=void 0!==(S=_.samples[b]).sample_duration?S.sample_duration:g.default_sample_duration,R=void 0!==S.sample_size?S.sample_size:g.default_sample_size,I={dts:h,cts:h+(void 0!==S.sample_composition_time_offset?S.sample_composition_time_offset:0),duration:A,offset:l.offset+T,size:R,subSizes:[R]};if(y)for(t=0;t<y.length;t++){var w=y[t];if(o<w.entry_count-1&&s<b&&(o++,s+=w.entries[o].sample_delta),b==s){I.subSizes=[];for(var C=w.entries[o],N=0;N<C.subsample_count;N++)I.subSizes.push(C.subsamples[N].subsample_size)}}a.push(I),T+=R,h+=A}r=h-m.baseMediaDecodeTime}return{sampleList:a,lastSequenceNumber:i,totalDuration:r,numSequences:e}},findInitRange:function(e){var t=null;if(!(e=D(e)))return t;var r=e.getBox("ftyp"),e=e.getBox("moov");return n.debug("Searching for initialization."),e&&e.isComplete&&(r=(r||e).offset,e=e.offset+e.size-1,n.debug("Found the initialization.  Range: "+(t=r+"-"+e))),t},parsePayload:function(e,t,r){if(void 0===r&&(r=0),!t||r+8>=t.byteLength)return new c.default(0,!1);for(var n,i=t instanceof ArrayBuffer?new Uint8Array(t):t,a=0;r<i.byteLength;){var o=u(i,r),s=l(i,r+4);if(0===o)break;r+o<=i.byteLength&&(0<=e.indexOf(s)?n=new c.default(r,!0,o,s):a=r+o),r+=o}return n||new c.default(a,!1)}},n=(0,i.default)(r).getInstance().getLogger(e),e}s.__dashjs_factory_name="BoxParser",t.default=n.default.getSingletonFactory(s)},"./src/streaming/utils/Capabilities.js":function(e,t,r){"use strict";r.r(t),r.d(t,{supportsMediaSource:function(){return o}});var n=r("./src/core/FactoryMaker.js"),i=r("./src/streaming/thumbnail/ThumbnailTracks.js"),u=r("./src/streaming/constants/Constants.js"),a=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];function o(){var e="WebKitMediaSource"in window,t="MediaSource"in window;return e||t}function s(){var e,s,t;return t=!(e={setConfig:function(e){e&&e.settings&&(s=e.settings)},supportsMediaSource:o,supportsEncryptedMedia:function(){return t},supportsCodec:function(e,t){return t!==u.default.AUDIO&&t!==u.default.VIDEO?Promise.resolve(!0):(i=e,a=t,s.get().streaming.capabilities.useMediaCapabilitiesApi&&navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo&&(i.codec&&a===u.default.AUDIO||a===u.default.VIDEO&&i.codec&&i.width&&i.height&&i.bitrate&&i.framerate)?(r=e,n=t,new Promise(function(t){var e;r&&r.codec?((e={type:"media-source"})[n]={},e[n].contentType=r.codec,e[n].width=r.width,e[n].height=r.height,e[n].bitrate=parseInt(r.bitrate),e[n].framerate=parseFloat(r.framerate),navigator.mediaCapabilities.decodingInfo(e).then(function(e){t(e.supported)}).catch(function(){t(!1)})):t(!1)})):(o=e,new Promise(function(e){var t;o&&o.codec?(t=o.codec,o.width&&o.height&&(t+=';width="'+o.width+'";height="'+o.height+'"'),"MediaSource"in window&&MediaSource.isTypeSupported(t)||"WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(t)?e(!0):e(!1)):e(!1)})));var r,n,i,a,o},setEncryptedMediaSupported:function(e){t=e},supportsEssentialProperty:function(e){try{return-1!==i.THUMBNAILS_SCHEME_ID_URIS.indexOf(e.schemeIdUri)}catch(e){return!0}},codecRootCompatibleWithCodec:function(e,t){for(var r,n=e.split(".")[0],e=0===t.indexOf(n),i=0;i<a.length;i++)if(a[i].codec===n){r=a[i];break}return r?e||r.compatibleCodecs.some(function(e){return 0===t.indexOf(e)}):e}}),e}s.__dashjs_factory_name="Capabilities",t.default=n.default.getSingletonFactory(s)},"./src/streaming/utils/CapabilitiesFilter.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/core/FactoryMaker.js"),c=r("./src/core/Debug.js"),f=r("./src/streaming/constants/Constants.js"),d=r("./src/core/EventBus.js"),g=r("./src/core/events/Events.js");function i(){var e,o,s,i,a,u,t=this.context,l=(0,d.default)(t).getInstance();function r(t,e){if(!e||!e.Period_asArray||0===e.Period_asArray.length)return Promise.resolve();var i=[];return e.Period_asArray.forEach(function(e){var r,n;i.push((r=e,n=t,new Promise(function(e){var t;r&&r.AdaptationSet_asArray&&0!==r.AdaptationSet_asArray.length?(t=[],r.AdaptationSet_asArray.forEach(function(e){var i,a;o.getIsTypeOf(e,n)&&t.push((i=e,a=n,new Promise(function(e){var r,n;i.Representation_asArray&&0!==i.Representation_asArray.length?(r=[],n=[],i.Representation_asArray.forEach(function(e,t){t=o.getCodec(i,t,!1),e=function(e,t,r){switch(e){case f.default.VIDEO:return function(e,t){var r=e.width||null,n=e.height||null,i=e.frameRate||null,e=e.bandwidth||null;return{codec:t,width:r,height:n,framerate:i,bitrate:e}}(t,r);case f.default.AUDIO:return function(e,t){var r=e.audioSamplingRate||null,e=e.bandwidth||null;return{codec:t,bitrate:e,samplerate:r}}(t,r);default:return null}}(a,e,t);n.push(e),r.push(s.supportsCodec(e,a))}),Promise.all(r).then(function(r){i.Representation_asArray=i.Representation_asArray.filter(function(e,t){return r[t]||u.debug("[Stream] Codec ".concat(n[t].codec," not supported ")),r[t]}),e()}).catch(function(){e()})):e()})))}),Promise.all(t).then(function(){r.AdaptationSet_asArray=r.AdaptationSet_asArray.filter(function(e){var t=e.Representation_asArray&&0<e.Representation_asArray.length;return t||(l.trigger(g.default.ADAPTATION_SET_REMOVED_NO_CAPABILITIES,{adaptationSet:e}),u.warn("AdaptationSet has been removed because of no supported Representation")),t}),e()}).catch(function(){e()})):e()})))}),Promise.all(i)}return e={setConfig:function(e){e&&(e.adapter&&(o=e.adapter),e.capabilities&&(s=e.capabilities),e.settings&&(i=e.settings),e.customParametersModel&&(a=e.customParametersModel))},filterUnsupportedFeatures:function(n){return new Promise(function(t){var e=[];e.push(r(f.default.VIDEO,n)),e.push(r(f.default.AUDIO,n)),Promise.all(e).then(function(){var e,r;i.get().streaming.capabilities.filterUnsupportedEssentialProperties&&(e=n)&&e.Period_asArray&&0!==e.Period_asArray.length&&e.Period_asArray.forEach(function(e){e.AdaptationSet_asArray=e.AdaptationSet_asArray.filter(function(e){return!e.Representation_asArray||0===e.Representation_asArray.length||(e.Representation_asArray=e.Representation_asArray.filter(function(e){var t=o.getEssentialPropertiesForRepresentation(e);if(t&&0<t.length)for(var r=0;r<t.length;){if(!s.supportsEssentialProperty(t[r]))return u.debug("[Stream] EssentialProperty not supported: "+t[r].schemeIdUri),!1;r+=1}return!0}),e.Representation_asArray&&0<e.Representation_asArray.length)})}),e=n,(r=a.getCustomCapabilitiesFilters())&&0!==r.length&&e&&e.Period_asArray&&0!==e.Period_asArray.length&&e.Period_asArray.forEach(function(e){e.AdaptationSet_asArray=e.AdaptationSet_asArray.filter(function(e){return!e.Representation_asArray||0===e.Representation_asArray.length||(e.Representation_asArray=e.Representation_asArray.filter(function(t){return!r.some(function(e){return!e(t)})}),e.Representation_asArray&&0<e.Representation_asArray.length)})}),t()}).catch(function(){t()})})}},u=(0,c.default)(t).getInstance().getLogger(e),e}i.__dashjs_factory_name="CapabilitiesFilter",t.default=n.default.getSingletonFactory(i)},"./src/streaming/utils/CustomTimeRanges.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/streaming/utils/SupervisorTools.js");function a(){return{customTimeRangeArray:[],length:0,add:function(e,t){for(var r=0;r<this.customTimeRangeArray.length&&e>this.customTimeRangeArray[r].start;r++);for(this.customTimeRangeArray.splice(r,0,{start:e,end:t}),r=0;r<this.customTimeRangeArray.length-1;r++)this.mergeRanges(r,r+1)&&r--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(e,t){for(var r=0;r<this.customTimeRangeArray.length;r++)if(e<=this.customTimeRangeArray[r].start&&t>=this.customTimeRangeArray[r].end)this.customTimeRangeArray.splice(r,1),r--;else{if(e>this.customTimeRangeArray[r].start&&t<this.customTimeRangeArray[r].end){this.customTimeRangeArray.splice(r+1,0,{start:t,end:this.customTimeRangeArray[r].end}),this.customTimeRangeArray[r].end=e;break}e>this.customTimeRangeArray[r].start&&e<this.customTimeRangeArray[r].end?this.customTimeRangeArray[r].end=e:t>this.customTimeRangeArray[r].start&&t<this.customTimeRangeArray[r].end&&(this.customTimeRangeArray[r].start=t)}this.length=this.customTimeRangeArray.length},mergeRanges:function(e,t){var r=this.customTimeRangeArray[e],n=this.customTimeRangeArray[t];return r.start<=n.start&&n.start<=r.end&&r.end<=n.end?(r.end=n.end,this.customTimeRangeArray.splice(t,1),!0):n.start<=r.start&&r.start<=n.end&&n.end<=r.end?(r.start=n.start,this.customTimeRangeArray.splice(t,1),!0):n.start<=r.start&&r.start<=n.end&&r.end<=n.end?(this.customTimeRangeArray.splice(e,1),!0):r.start<=n.start&&n.start<=r.end&&n.end<=r.end&&(this.customTimeRangeArray.splice(t,1),!0)},start:function(e){return(0,i.checkInteger)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].start},end:function(e){return(0,i.checkInteger)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].end}}}a.__dashjs_factory_name="CustomTimeRanges",t.default=n.default.getClassFactory(a)},"./src/streaming/utils/DOMStorage.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/core/FactoryMaker.js"),a=r("./src/core/Debug.js"),c=r("./src/streaming/constants/Constants.js"),f=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],d="dashjs_?_bitrate",g="dashjs_?_settings",m="localStorage",h="lastBitrate",p="lastMediaSettings";function i(e){var o,r,t=this.context,s=(e=e||{}).settings;function n(e){if(void 0!==r)return r;r=!1;var t;try{"undefined"!=typeof window&&(t=window[e])}catch(e){return o.warn("DOMStorage access denied: "+e.message),r}if(!t||e!==m&&"sessionStorage"!==e)return r;try{t.setItem("1","1"),t.removeItem("1"),r=!0}catch(e){o.warn("DOMStorage is supported, but cannot be used: "+e.message)}return r}function i(){return 6e5*Math.round((new Date).getTime()/6e5)}function u(e,t){return n(e)&&s.get().streaming[t+"CachingInfo"].enabled}function l(){if(!s)throw new Error(c.default.MISSING_CONFIG_ERROR)}return e={getSavedBitrateSettings:function(e){if(l(),!s.get().streaming.lastBitrateCachingInfo.enabled)return NaN;var t=NaN;if(u(m,h)){var r=d.replace(/\?/,e);try{var n=JSON.parse(localStorage.getItem(r))||{},i=(new Date).getTime()-parseInt(n.timestamp,10)>=s.get().streaming.lastBitrateCachingInfo.ttl||!1,a=parseFloat(n.bitrate);isNaN(a)||i?i&&localStorage.removeItem(r):(t=a,o.debug("Last saved bitrate for "+e+" was "+a))}catch(e){return null}}return t},setSavedBitrateSettings:function(e,t){if(u(m,h)&&t){e=d.replace(/\?/,e);try{localStorage.setItem(e,JSON.stringify({bitrate:t.toFixed(3),timestamp:i()}))}catch(e){o.error(e.message)}}},getSavedMediaSettings:function(e){if(l(),!s.get().streaming.lastMediaSettingsCachingInfo.enabled)return null;var t=null;if(u(m,p)){e=g.replace(/\?/,e);try{var r=JSON.parse(localStorage.getItem(e))||{},n=(new Date).getTime()-parseInt(r.timestamp,10)>=s.get().streaming.lastMediaSettingsCachingInfo.ttl||!1,t=r.settings;n&&(localStorage.removeItem(e),t=null)}catch(e){return null}}return t},setSavedMediaSettings:function(e,t){if(u(m,p)){e=g.replace(/\?/,e);try{localStorage.setItem(e,JSON.stringify({settings:t,timestamp:i()}))}catch(e){o.error(e.message)}}}},o=(0,a.default)(t).getInstance().getLogger(e),n(m)&&f.forEach(function(e){var t=localStorage.getItem(e.oldKey);if(t){localStorage.removeItem(e.oldKey);try{localStorage.setItem(e.newKey,t)}catch(e){o.error(e.message)}}}),e}i.__dashjs_factory_name="DOMStorage";r=n.default.getSingletonFactory(i);t.default=r},"./src/streaming/utils/DefaultURLUtils.js":function(e,t,r){"use strict";r.r(t);r=r("./src/core/FactoryMaker.js");function n(){function e(t,e){try{return new window.URL(t,e).toString()}catch(e){return t}}function t(e,t){var r=s;return t&&c(e)?(f(e)&&(r=u),r=(r=d(e)?l:r)(t),t="/"!==r.charAt(r.length-1)&&"/"!==e.charAt(0)?"/":"",[r,e].join(t)):e}var r,n=/^[a-z][a-z0-9+\-_.]*:/i,i=/^https?:\/\//i,a=/^https:\/\//i,o=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i;function s(e){var t=e.indexOf("/"),r=e.lastIndexOf("/");return-1!==t?r===t+1?e:(e=-1!==e.indexOf("?")?e.substring(0,e.indexOf("?")):e).substring(0,r+1):""}function u(e){e=e.match(o);return e?e[1]:""}function l(e){e=e.match(n);return e?e[0]:""}function c(e){return!n.test(e)}function f(e){return c(e)&&"/"===e.charAt(0)}function d(e){return 0===e.indexOf("//")}try{new window.URL("x","http://y");r=e}catch(e){}finally{r=r||t}return{parseBaseUrl:s,parseOrigin:u,parseScheme:l,isRelative:c,isPathAbsolute:f,isSchemeRelative:d,isHTTPURL:function(e){return i.test(e)},isHTTPS:function(e){return a.test(e)},removeHostname:function(e){return/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(e)[2].substring(1)},resolve:function(e,t){return r(e,t)}}}n.__dashjs_factory_name="DefaultURLUtils",t.default=r.default.getSingletonFactory(n)},"./src/streaming/utils/EBMLParser.js":function(e,t,r){"use strict";r.r(t);r=r("./src/core/FactoryMaker.js");function n(e){e=e||{};var r,u=new DataView(e.data),l=0;function n(e,t){var r=!0,n=0;if(void 0===t&&(t=!1),n=16777215<e.tag?(u.getUint32(l)!==e.tag&&(r=!1),4):65535<e.tag?(256*u.getUint16(l)+u.getUint8(l+2)!==e.tag&&(r=!1),3):255<e.tag?(u.getUint16(l)!==e.tag&&(r=!1),2):(u.getUint8(l)!==e.tag&&(r=!1),1),r||!e.required||t)return r&&(l+=n),r;throw new Error("required tag not found")}function i(e){for(var t=1,r=128,n=-1,i=0,a=u.getUint8(l),o=0,o=0;o<8;o+=1){if((a&r)===r){i=void 0===e?a&~r:a,n=o;break}r>>=1}for(o=0;o<n;o+=1,t+=1)i=i<<8|255&u.getUint8(l+t);return l+=t,i}return r={getPos:function(){return l},setPos:function(e){l=e},consumeTag:n,consumeTagAndSize:function(e,t){return(e=n(e,t))&&i(),e},parseTag:function(e){var t;return n(e),t=i(),r[e.parse](t)},skipOverElement:function(e,t){return(e=n(e,t))&&(t=i(),l+=t),e},getMatroskaCodedNum:i,getMatroskaFloat:function(e){var t;switch(e){case 4:t=u.getFloat32(l),l+=4;break;case 8:t=u.getFloat64(l),l+=8}return t},getMatroskaUint:function(e){if(4<e){for(var t=e,r=Math.floor(Number.MAX_SAFE_INTEGER/256),n=0,i=0;i<t;i+=1){if(r<n)throw new Error("Value exceeds safe integer limit");n*=256;var a=u.getUint8(l+i);if(n>Number.MAX_SAFE_INTEGER-a)throw new Error("Value exceeds safe integer limit");n+=a}return l+=t,n}for(var o=0,s=0;s<e;s+=1)o=(o<<=8)|255&u.getUint8(l+s);return l+=e,o>>>0},moreData:function(){return l<u.byteLength}}}n.__dashjs_factory_name="EBMLParser",t.default=r.default.getClassFactory(n)},"./src/streaming/utils/ErrorHandler.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/core/EventBus.js"),i=r("./src/core/events/Events.js"),r=r("./src/core/FactoryMaker.js");function a(){var e=this.context,t=(0,n.default)(e).getInstance();return{error:function(e){t.trigger(i.default.ERROR,{error:e})}}}a.__dashjs_factory_name="ErrorHandler",t.default=r.default.getSingletonFactory(a)},"./src/streaming/utils/InitCache.js":function(e,t,r){"use strict";r.r(t);r=r("./src/core/FactoryMaker.js");function n(){var n={};return{save:function(e){var t=e.streamId,r=e.representationId;n[t]=n[t]||{},n[t][r]=e},extract:function(e,t){return n&&n[e]&&n[e][t]?n[e][t]:null},reset:function(){n={}}}}n.__dashjs_factory_name="InitCache",t.default=r.default.getSingletonFactory(n)},"./src/streaming/utils/IsoFile.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/streaming/vo/IsoBox.js"),r=r("./src/core/FactoryMaker.js");function i(){var o;function t(e){var t=[];if(!e||!o||"function"!=typeof o.fetchAll)return t;for(var r,n=o.fetchAll(e),i=0,a=n.length;i<a;i++)(r=s(n[i]))&&t.push(r);return t}function s(e){if(!e)return null;var t=new n.default(e);return e.hasOwnProperty("_incomplete")&&(t.isComplete=!e._incomplete),t}return{getBox:function(e){return e&&o&&o.boxes&&0!==o.boxes.length&&"function"==typeof o.fetch?s(o.fetch(e)):null},getBoxes:t,setData:function(e){o=e},getLastBox:function(){if(!o||!o.boxes||!o.boxes.length)return null;var e=t(o.boxes[o.boxes.length-1].type);return 0<e.length?e[e.length-1]:null}}}i.__dashjs_factory_name="IsoFile",t.default=r.default.getClassFactory(i)},"./src/streaming/utils/LocationSelector.js":function(e,t,r){"use strict";r.r(t);var i=r("./src/core/events/Events.js"),a=r("./src/streaming/controllers/BlacklistController.js"),n=r("./src/core/FactoryMaker.js"),s=r("./src/core/Settings.js"),u=r("./src/dash/controllers/ContentSteeringController.js");function o(){var e,o,r,t=this.context,n=(0,s.default)(t).getInstance();return e={select:function(e){if(!e||0===e.length)return null;var t=null;return t=(t=n.get().streaming.applyContentSteering?function(e){var t=r.getCurrentSteeringResponseData();if(t&&t.pathwayPriority&&0<t.pathwayPriority.length)return function(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],i=0,a=null;for(;i<r.length;)if("break"===function(){var t=r[i],e=n.findIndex(function(e){return e.serviceLocation&&e.serviceLocation===t});if(-1!==e&&!o.contains(n[e].serviceLocation))return a=n[e],"break";i+=1}())break;return a}(t.pathwayPriority,e);return null}(e):t)||e[0]},setConfig:function(e){e.blacklistController&&(o=e.blacklistController),e.contentSteeringController&&(r=e.contentSteeringController)},reset:function(){o.reset()}},o=(0,a.default)(t).create({updateEventName:i.default.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:i.default.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD}),r=(0,u.default)(t).getInstance(),e}o.__dashjs_factory_name="LocationSelector",t.default=n.default.getClassFactory(o)},"./src/streaming/utils/ObjectUtils.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./node_modules/fast-deep-equal/index.js"),a=r.n(i);function o(){return{areEqual:function(e,t){return a()(e,t)}}}o.__dashjs_factory_name="ObjectUtils",t.default=n.default.getSingletonFactory(o)},"./src/streaming/utils/RequestModifier.js":function(e,t,r){"use strict";r.r(t),r.d(t,{modifyRequest:function(){return n}});r=r("./src/core/FactoryMaker.js");function n(e,t){var r={url:e.url,method:e.method,headers:Object.assign({},e.headers),credentials:e.withCredentials?"include":void 0};return Promise.resolve(t.modifyRequest(r)).then(function(){return Object.assign(e,r,{withCredentials:"include"===r.credentials})})}function i(){return{modifyRequest:null,modifyRequestURL:function(e){return e},modifyRequestHeader:function(e,t){return t.url,e}}}i.__dashjs_factory_name="RequestModifier",t.default=r.default.getSingletonFactory(i)},"./src/streaming/utils/SegmentResponseModifier.js":function(e,t,r){"use strict";r.r(t);r=r("./src/core/FactoryMaker.js");function n(){return{modifyResponseAsync:function(e){return Promise.resolve(e)}}}n.__dashjs_factory_name="SegmentResponseModifier",t.default=r.default.getSingletonFactory(n)},"./src/streaming/utils/SupervisorTools.js":function(e,t,r){"use strict";r.r(t),r.d(t,{checkInteger:function(){return o},checkIsVideoOrAudioType:function(){return u},checkParameterType:function(){return a},checkRange:function(){return s}});var n=r("./src/streaming/constants/Constants.js");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(i(e)!==t)throw n.default.BAD_ARGUMENT_ERROR}function o(e){if(!(null!==e&&!isNaN(e)&&e%1==0))throw n.default.BAD_ARGUMENT_ERROR+" : argument is not an integer"}function s(e,t,r){if(e<t||r<e)throw n.default.BAD_ARGUMENT_ERROR+" : argument out of range"}function u(e){if("string"!=typeof e||e!==n.default.AUDIO&&e!==n.default.VIDEO)throw n.default.BAD_ARGUMENT_ERROR}},"./src/streaming/utils/TTMLParser.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/core/Debug.js"),a=r("./src/core/EventBus.js"),T=r("./src/core/events/Events.js"),b=r("./node_modules/imsc/src/main/js/main.js"),S=r("./src/streaming/MediaPlayerEvents.js"),A=r("./src/streaming/constants/ConformanceViolationConstants.js");function o(){var e,E,t=this.context,_=(0,a.default)(t).getInstance(),v=0;return e={parse:function(e,t,r,n,i){var a,o="",s=[],u={},l={},c="",f="",d={onOpenTag:function(e,t,r){r[" imagetype"]&&!r[" imageType"]&&(_.trigger(S.default.CONFORMANCE_VIOLATION,{level:A.default.LEVELS.ERROR,event:A.default.EVENTS.NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE}),r[" imageType"]=r[" imagetype"]),"image"!==t||"http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"!==e&&"http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"!==e||(r[" imageType"]&&"PNG"===r[" imageType"].value?c=r["http://www.w3.org/XML/1998/namespace id"].value:E.warn("smpte-tt imageType != PNG. Discarded"))},onCloseTag:function(){c&&(l[c]=f.trim()),c=f=""},onText:function(e){c&&(f+=e)}};if(!e)throw o="no ttml data to parse",new Error(o);u.data=e,_.trigger(T.default.TTML_TO_PARSE,u);for(var g,m=(0,b.fromXML)(u.data,function(e){o=e},d),h=(_.trigger(T.default.TTML_PARSED,{ttmlString:u.data,ttmlDoc:m}),m.getMediaTimeEvents()),p=0;p<h.length;p++){var y=(0,b.generateISD)(m,h[p],function(e){o=e});y.contents.some(function(e){return e.contents.length})&&(g=h[p]+t)<(a=h[p+1]+t)&&s.push({start:g,end:a,type:"html",cueID:(g=void 0,g="cue_TTML_"+v,v++,g),isd:y,images:i,embeddedImages:l})}if(""!==o)throw E.error(o),new Error(o);return s}},E=(0,i.default)(t).getInstance().getLogger(e),e}o.__dashjs_factory_name="TTMLParser",t.default=n.default.getSingletonFactory(o)},"./src/streaming/utils/TimeUtils.js":function(e,t,r){"use strict";r.r(t);r=r("./src/core/FactoryMaker.js");function n(){return{ntpToUTC:function(e){var t=new Date(Date.UTC(1900,0,1,0,0,0));return new Date(t.getTime()+e).getTime()}}}n.__dashjs_factory_name="TimeUtils",t.default=r.default.getSingletonFactory(n)},"./src/streaming/utils/URLUtils.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/core/FactoryMaker.js"),o=r("./src/streaming/utils/DefaultURLUtils.js");function i(){var i,a=[],e=this.context;function r(e,t,r){var n=function(e){for(var t=0;t<a.length;t++)if(a[t].regex.test(e))return a[t].utils;return i}(r||t);return(n&&"function"==typeof n[e]?n:i)[e](t,r)}return i=(0,o.default)(e).getInstance(),{registerUrlRegex:function(e,t){a.push({regex:e,utils:t})},parseBaseUrl:function(e){return r("parseBaseUrl",e)},parseOrigin:function(e){return r("parseOrigin",e)},parseScheme:function(e){return r("parseScheme",e)},isRelative:function(e){return r("isRelative",e)},isPathAbsolute:function(e){return r("isPathAbsolute",e)},isSchemeRelative:function(e){return r("isSchemeRelative",e)},isHTTPURL:function(e){return r("isHTTPURL",e)},isHTTPS:function(e){return r("isHTTPS",e)},removeHostname:function(e){return r("removeHostname",e)},resolve:function(e,t){return r("resolve",e,t)}}}i.__dashjs_factory_name="URLUtils";r=n.default.getSingletonFactory(i);t.default=r},"./src/streaming/utils/VTTParser.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/core/FactoryMaker.js"),i=r("./src/core/Debug.js");function a(){var e,l,c,f,d,g,t=this.context;function m(e){var t=e.split(":"),r=t.length-1;return e=60*parseInt(t[r-1],10)+parseFloat(t[r]),2==r&&(e+=3600*parseInt(t[0],10)),e}function h(e){var n={};return e.forEach(function(e){var t,r;1<e.split(/:/).length&&(r=!1,(t=e.split(/:/)[1])&&-1!=t.search(/%/)&&(r=!0,t=parseInt(t.replace(/%/,""),10)),(e.match(/align/)||e.match(/A/))&&(n.align=t),(e.match(/line/)||e.match(/L/))&&(n.line="auto"===t?t:parseInt(t,10),r&&(n.snapToLines=!1)),(e.match(/position/)||e.match(/P/))&&(n.position=t),(e.match(/size/)||e.match(/S/))&&(n.size=t))}),n}return e={parse:function(e){var t=[];if(!e)return t;for(var r=(e=e.split(c)).length,n=-1,i=0;i<r;i++){var a,o,s,u=e[i];0<u.length&&"WEBVTT"!==u&&u.match(f)&&(s=void 0,u=(u=u).split(f),(s=u[1].split(g)).shift(),u[1]=s[0],s.shift(),s=(u={cuePoints:u,styles:h(s)}).cuePoints,u=u.styles,a=function(e,t){var r,n=t,i="",a="";for(;""!==e[n]&&n<e.length;)n++;if(1<(r=n-t))for(var o=0;o<r;o++){if((a=e[t+o]).match(f)){i="";break}i+=a,o!==r-1&&(i+="\n")}else(a=e[t]).match(f)||(i=a);return i}(e,i+1),o=m(s[0].replace(d,"")),s=m(s[1].replace(d,"")),!isNaN(o)&&!isNaN(s)&&n<=o&&o<s?""!==a?t.push({start:n=o,end:s,data:a,styles:u}):l.error("Skipping cue due to empty/malformed cue text"):l.error("Skipping cue due to incorrect cue timing"))}return t},getCaptionStyles:h},l=(0,i.default)(t).getInstance().getLogger(e),c=/(?:\r\n|\r|\n)/gm,f=/-->/,d=/(^[\s]+|[\s]+$)/g,g=/\s\b/g,e}a.__dashjs_factory_name="VTTParser",t.default=n.default.getSingletonFactory(a)},"./src/streaming/utils/VttCustomRenderingParser.js":function(e,t,r){"use strict";r.r(t);r=r("./src/core/FactoryMaker.js");function n(){var e,r;e={parse:function(e){var t=[];return r.oncue=function(e){e.start=e.startTime,e.end=e.endTime,e.data=e.text,e.styles={align:e.align,line:e.line,position:e.position,size:e.size},t.push(e)},r.parse(e),t}};try{window&&window.WebVTT&&window.WebVTT.Parser&&(r=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder()))}catch(e){}return e}n.__dashjs_factory_name="VttCustomRenderingParser",t.default=r.default.getSingletonFactory(n)},"./src/streaming/utils/baseUrlResolution/BasicSelector.js":function(e,t,r){"use strict";r.r(t);r=r("./src/core/FactoryMaker.js");function n(e){var n=(e=e||{}).blacklistController;return{select:function(e){var t,r=0;return t=e&&e.some(function(e,t){return r=t,!n.contains(e.serviceLocation)})?e[r]:t}}}n.__dashjs_factory_name="BasicSelector",t.default=r.default.getClassFactory(n)},"./src/streaming/utils/baseUrlResolution/ContentSteeringSelector.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/core/FactoryMaker.js"),a=r("./src/dash/controllers/ContentSteeringController.js");function i(){var e,n,o,t=this.context;function i(e,t){for(var r=0<arguments.length&&void 0!==e?e:[],n=1<arguments.length&&void 0!==t?t:[],i=0,a=NaN;i<r.length&&"break"!==function(){var t=r[i],e=n.findIndex(function(e){return e.serviceLocation&&e.serviceLocation===t});if(-1!==e&&!o.contains(n[e].serviceLocation))return a=e,"break";i+=1}(););return a}return e={selectBaseUrlIndex:function(e){var t=NaN,r=(!isNaN(e.selectedIdx)||(r=n.getSteeringDataFromManifest())&&0<r.defaultServiceLocationArray.length&&(t=i(r.defaultServiceLocationArray,e.baseUrls)),n.getCurrentSteeringResponseData());return t=e.baseUrls&&e.baseUrls.length&&r&&r.pathwayPriority&&r.pathwayPriority.length?i(r.pathwayPriority,e.baseUrls):t},setConfig:function(e){e.blacklistController&&(o=e.blacklistController),e.contentSteeringController&&(n=e.contentSteeringController)}},n=(0,a.default)(t).getInstance(),e}i.__dashjs_factory_name="ContentSteeringSelector",t.default=n.default.getClassFactory(i)},"./src/streaming/utils/baseUrlResolution/DVBSelector.js":function(e,t,r){"use strict";r.r(t);r=r("./src/core/FactoryMaker.js");function n(e){var r=(e=e||{}).blacklistController;return{select:function(e){return e&&function(e){var r,t=0,n=[],i=0;if((e=e.sort(function(e,t){e=e.dvb_priority-t.dvb_priority;return isNaN(e)?0:e}).filter(function(e,t,r){return!t||r[0].dvb_priority&&e.dvb_priority&&r[0].dvb_priority===e.dvb_priority})).length)return 1<e.length&&(e.forEach(function(e){t+=e.dvb_weight,n.push(t)}),r=Math.floor(Math.random()*(t-1)),n.every(function(e,t){return i=t,!(r<e)})),e[i]}((t=[],e.filter(function(e){return!r.contains(e.serviceLocation)||(e.dvb_priority&&t.push(e.dvb_priority),!1)}).filter(function(e){return!t.length||!e.dvb_priority||-1===t.indexOf(e.dvb_priority)})));var t}}}n.__dashjs_factory_name="DVBSelector",t.default=r.default.getClassFactory(n)},"./src/streaming/vo/BitrateInfo.js":function(e,t,r){"use strict";r.r(t),t.default=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN}},"./src/streaming/vo/DashJSError.js":function(e,t,r){"use strict";r.r(t),t.default=function e(t,r,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.code=t||null,this.message=r||null,this.data=n||null}},"./src/streaming/vo/DataChunk.js":function(e,t,r){"use strict";r.r(t),t.default=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null}},"./src/streaming/vo/FragmentRequest.js":function(e,t,r){"use strict";r.r(t);var i=r("./src/streaming/vo/metrics/HTTPRequest.js");function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.action=t.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaStartTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=e||null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null}var e,r,n;return e=t,(r=[{key:"isInitializationRequest",value:function(){return this.type&&this.type===i.HTTPRequest.INIT_SEGMENT_TYPE}},{key:"setInfo",value:function(e){this.type=e&&e.init?i.HTTPRequest.INIT_SEGMENT_TYPE:i.HTTPRequest.MEDIA_SEGMENT_TYPE,this.url=e&&e.url?e.url:null,this.range=e&&e.range?e.range.start+"-"+e.range.end:null,this.mediaType=e&&e.mediaType?e.mediaType:null}}])&&a(e.prototype,r),n&&a(e,n),t}();r.ACTION_DOWNLOAD="download",r.ACTION_COMPLETE="complete",t.default=r},"./src/streaming/vo/HeadRequest.js":function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=s(r),t=(e=n?(e=s(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==i(e)&&"function"!=typeof e){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.r(t);r=function(e){var t=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e);var r=o(n);function n(e){if(this instanceof n)return(e=r.call(this,e)).checkForExistenceOnly=!0,e;throw new TypeError("Cannot call a class as a function")}return n}(r("./src/streaming/vo/FragmentRequest.js").default);t.default=r},"./src/streaming/vo/IsoBox.js":function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.r(t);r=function(){function s(e){if(!(this instanceof s))throw new TypeError("Cannot call a class as a function");if(this.offset=e._offset,this.type=e.type,this.size=e.size,this.boxes=[],e.boxes)for(var t=0;t<e.boxes.length;t++)this.boxes.push(new s(e.boxes[t]));switch(this.isComplete=!0,e.type){case"sidx":if(this.timescale=e.timescale,this.earliest_presentation_time=e.earliest_presentation_time,this.first_offset=e.first_offset,this.references=e.references,e.references){this.references=[];for(var r=0;r<e.references.length;r++){var n={reference_type:e.references[r].reference_type,referenced_size:e.references[r].referenced_size,subsegment_duration:e.references[r].subsegment_duration};this.references.push(n)}}break;case"emsg":this.id=e.id,this.version=1===e.version?1:0,this.value=e.value,this.timescale=e.timescale,this.scheme_id_uri=e.scheme_id_uri,this.presentation_time_delta=1===e.version?e.presentation_time:e.presentation_time_delta,this.event_duration=e.event_duration,this.message_data=e.message_data;break;case"mdhd":this.timescale=e.timescale;break;case"mfhd":this.sequence_number=e.sequence_number;break;case"subs":this.entry_count=e.entry_count,this.entries=e.entries;break;case"tfhd":this.base_data_offset=e.base_data_offset,this.sample_description_index=e.sample_description_index,this.default_sample_duration=e.default_sample_duration,this.default_sample_size=e.default_sample_size,this.default_sample_flags=e.default_sample_flags,this.flags=e.flags;break;case"tfdt":this.version=e.version,this.baseMediaDecodeTime=e.baseMediaDecodeTime,this.flags=e.flags;break;case"trun":if(this.sample_count=e.sample_count,this.first_sample_flags=e.first_sample_flags,this.data_offset=e.data_offset,this.flags=e.flags,this.samples=e.samples,e.samples){this.samples=[];for(var i=0,a=e.samples.length;i<a;i++){var o={sample_size:e.samples[i].sample_size,sample_duration:e.samples[i].sample_duration,sample_composition_time_offset:e.samples[i].sample_composition_time_offset};this.samples.push(o)}}break;case"prft":this.version=e.version,this.reference_track_ID=e.reference_track_ID,this.ntp_timestamp_sec=e.ntp_timestamp_sec,this.ntp_timestamp_frac=e.ntp_timestamp_frac,this.media_time=e.media_time,this.flags=e.flags}}var e,t,r;return e=s,(t=[{key:"getChildBox",value:function(e){for(var t=0;t<this.boxes.length;t++)if(this.boxes[t].type===e)return this.boxes[t]}},{key:"getChildBoxes",value:function(e){for(var t=[],r=0;r<this.boxes.length;r++)this.boxes[r].type===e&&t.push(this.boxes[r]);return t}}])&&n(e.prototype,t),r&&n(e,r),s}();t.default=r},"./src/streaming/vo/IsoBoxSearchInfo.js":function(e,t,r){"use strict";r.r(t),t.default=function e(t,r,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.lastCompletedOffset=t,this.found=r,this.size=n}},"./src/streaming/vo/MetricsList.js":function(e,t,r){"use strict";r.r(t),t.default=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]}},"./src/streaming/vo/TextRequest.js":function(e,t,r){"use strict";r.r(t);var a=r("./src/streaming/constants/Constants.js");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=u(r),t=(e=n?(e=u(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==i(e)&&"function"!=typeof e){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r=function(e){var t=i;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e);var n=s(i);function i(e,t){var r;if(this instanceof i)return(r=n.call(this)).url=e||null,r.type=t||null,r.mediaType=a.default.STREAM,r.responseType="",r;throw new TypeError("Cannot call a class as a function")}return i}(r("./src/streaming/vo/FragmentRequest.js").default);t.default=r},"./src/streaming/vo/TextTrackInfo.js":function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=s(r),t=(e=n?(e=s(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==i(e)&&"function"!=typeof e){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.r(t);r=function(e){var t=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e);var r=o(n);function n(){var e;if(this instanceof n)return(e=r.call(this)).captionData=null,e.label=null,e.defaultTrack=!1,e.kind=null,e.isFragmented=!1,e.isEmbedded=!1,e.isTTML=null,e;throw new TypeError("Cannot call a class as a function")}return n}(r("./src/dash/vo/MediaInfo.js").default);t.default=r},"./src/streaming/vo/Thumbnail.js":function(e,t,r){"use strict";r.r(t),t.default=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.url=null,this.width=null,this.height=null,this.x=null,this.y=null}},"./src/streaming/vo/ThumbnailTrackInfo.js":function(e,t,r){"use strict";r.r(t),t.default=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""}},"./src/streaming/vo/URIFragmentData.js":function(e,t,r){"use strict";r.r(t),t.default=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null}},"./src/streaming/vo/metrics/BufferLevel.js":function(e,t,r){"use strict";r.r(t),t.default=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.t=null,this.level=null}},"./src/streaming/vo/metrics/BufferState.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/streaming/constants/MetricsConstants.js");t.default=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.target=null,this.state=n.default.BUFFER_EMPTY}},"./src/streaming/vo/metrics/DVRInfo.js":function(e,t,r){"use strict";r.r(t),t.default=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.time=null,this.range=null,this.manifestInfo=null}},"./src/streaming/vo/metrics/DroppedFrames.js":function(e,t,r){"use strict";r.r(t),t.default=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.time=null,this.droppedFrames=null}},"./src/streaming/vo/metrics/HTTPRequest.js":function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.r(t),r.d(t,{HTTPRequest:function(){return i},HTTPRequestTrace:function(){return a}});var i=function e(){n(this,e),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this.cmsd=null,this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null,this._fileLoaderType=null},a=function e(){n(this,e),this.s=null,this.d=null,this.b=[]};i.GET="GET",i.HEAD="HEAD",i.MPD_TYPE="MPD",i.XLINK_EXPANSION_TYPE="XLinkExpansion",i.INIT_SEGMENT_TYPE="InitializationSegment",i.INDEX_SEGMENT_TYPE="IndexSegment",i.MEDIA_SEGMENT_TYPE="MediaSegment",i.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",i.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",i.DVB_REPORTING_TYPE="DVBReporting",i.LICENSE="license",i.CONTENT_STEERING_TYPE="ContentSteering",i.OTHER_TYPE="other"},"./src/streaming/vo/metrics/ManifestUpdate.js":function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.r(t),r.d(t,{ManifestUpdate:function(){return i},ManifestUpdateRepresentationInfo:function(){return o},ManifestUpdateStreamInfo:function(){return a}});var i=function e(){n(this,e),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]},a=function e(){n(this,e),this.id=null,this.index=null,this.start=null,this.duration=null},o=function e(){n(this,e),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null}},"./src/streaming/vo/metrics/PlayList.js":function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.r(t),r.d(t,{PlayList:function(){return i},PlayListTrace:function(){return a}});var i=function e(){n(this,e),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]},a=(i.INITIAL_PLAYOUT_START_REASON="initial_playout",i.SEEK_START_REASON="seek",i.RESUME_FROM_PAUSE_START_REASON="resume",i.METRICS_COLLECTION_START_REASON="metrics_collection_start",function e(){n(this,e),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null});a.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",a.REBUFFERING_REASON="rebuffering",a.USER_REQUEST_STOP_REASON="user_request",a.END_OF_PERIOD_STOP_REASON="end_of_period",a.END_OF_CONTENT_STOP_REASON="end_of_content",a.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",a.FAILURE_STOP_REASON="failure"},"./src/streaming/vo/metrics/RepresentationSwitch.js":function(e,t,r){"use strict";r.r(t),t.default=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.t=null,this.mt=null,this.to=null,this.lto=null}},"./src/streaming/vo/metrics/RequestsQueue.js":function(e,t,r){"use strict";r.r(t),t.default=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.loadingRequests=[],this.executedRequests=[]}},"./src/streaming/vo/metrics/SchedulingInfo.js":function(e,t,r){"use strict";r.r(t),t.default=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null}},"./node_modules/bcp-47-match/index.js":function(e,t){"use strict";function r(l,c){return function(e,t){var r,n,i,a=f(e,"tag"),o=f(null==t?"*":t,"range"),s=[],u=-1;for(;++u<o.length;)if(r=o[u].toLowerCase(),c||"*"!==r){for(n=-1,i=[];++n<a.length;)if(l(a[n].toLowerCase(),r)){if(!c)return a[n];s.push(a[n])}else i.push(a[n]);a=i}return c?s:void 0}}function f(e,t){e=e&&"string"==typeof e?[e]:e;if(e&&"object"==typeof e&&"length"in e)return e;throw new Error("Invalid "+t+" `"+e+"`, expected non-empty string")}t.basicFilter=r(function(e,t){return"*"===t||e===t||-1<e.indexOf(t+"-")},!0),t.extendedFilter=r(function(e,t){var r=e.split("-"),n=t.split("-"),i=0,a=0;if("*"!==n[a]&&r[i]!==n[a])return;i++,a++;for(;a<n.length;)if("*"===n[a])a++;else{if(!r[i])return;if(r[i]===n[a])i++,a++;else{if(1===r[i].length)return;i++}}return 1},!0),t.lookup=r(function(e,t){var r,n=t;for(;;){if("*"===n||e===n)return 1;if((r=n.lastIndexOf("-"))<0)return;"-"===n.charAt(r-2)&&(r-=2),n=n.slice(0,r)}})},"./node_modules/bcp-47-normalize/index.js":function(e,t,r){"use strict";e.exports=r("./node_modules/bcp-47-normalize/lib/index.js")},"./node_modules/bcp-47-normalize/lib/index.js":function(e,t,r){"use strict";var s=r("./node_modules/bcp-47/index.js"),u=r("./node_modules/bcp-47-match/index.js"),l=r("./node_modules/bcp-47-normalize/lib/matches.json"),c=r("./node_modules/bcp-47-normalize/lib/fields.json"),f=r("./node_modules/bcp-47-normalize/lib/defaults.json"),d=r("./node_modules/bcp-47-normalize/lib/many.json"),g=(e.exports=function(e,t){var r,n=t||{},i=s.parse(String(e||"").toLowerCase(),n),a=s.stringify(i),o=-1;if(!a)return a;for(;++o<l.length;)u.extendedFilter(a,l[o].from).length&&(h(i,l[o].from,l[o].to),a=s.stringify(i));o=-1;for(;++o<c.length;)p(i,c[o].from.field,c[o].from.value)&&y(i,c[o].to.field,c[o].to.value);a=s.stringify(Object.assign({},i,m)),o=-1;for(;++o<f.length;)a===f[o]&&(h(i,f[o],f[o].split("-").slice(0,-1).join("-")),a=s.stringify(Object.assign({},i,m)));if(i.extensions.sort(E),n.warning)for(r in d)g.call(d[r],i[r])&&n.warning("Deprecated "+r+" `"+i[r]+"`, expected one of `"+d[r][i[r]].join("`, `")+"`",null,7);i.script&&(i.script=i.script.charAt(0).toUpperCase()+i.script.slice(1));i.region&&(i.region=i.region.toUpperCase());return s.stringify(i)},{}.hasOwnProperty),n=new Intl.Collator,m={variants:[],extensions:[],privateuse:[],irregular:null,regular:null};function h(e,t,r){var n,i=s.parse(t),a=s.parse(r),o=[];for(n in i)i[n]&&i[n].length&&p(e,n,i[n])&&o.push(n);for(n in a)a[n]&&a[n].length&&(-1<o.indexOf(n)||!e[n]||!e[n].length)&&y(e,n,a[n])}function p(e,t,r){var n,i,a,o,s=!1;if(r){if((i=n=e[t])&&"object"==typeof n)for(i=[],a=-1;++a<n.length;)o=n[a],r.indexOf(o)<0?i.push(o):s=!0;else n===r&&(s=!(i=null));e[t]=i}return s}function y(e,t,r){var n,i,a,o=e[t];if(o&&"object"==typeof o)for(n=[].concat(r),i=-1;++i<n.length;)a=n[i],o.indexOf(a)<0&&o.push(a);else e[t]=r}function E(e,t){return n.compare(e.singleton,t.singleton)}},"./node_modules/bcp-47/index.js":function(e,t,r){"use strict";t.parse=r("./node_modules/bcp-47/lib/parse.js"),t.stringify=r("./node_modules/bcp-47/lib/stringify.js")},"./node_modules/bcp-47/lib/parse.js":function(e,t,r){"use strict";var d=r("./node_modules/is-alphanumerical/index.js"),g=r("./node_modules/is-alphabetical/index.js"),m=r("./node_modules/is-decimal/index.js"),h=r("./node_modules/bcp-47/lib/regular.json"),p=r("./node_modules/bcp-47/lib/normalize.json"),y=(e.exports=function e(t,r){var n=r||{};var i=E();var a=String(t);var o=a.toLowerCase();var s=0;var u;var l;var c;if(null==t)throw new Error("Expected string, got `"+t+"`");if(y.call(p,o))return(null==n.normalize||n.normalize)&&p[o]?e(p[o]):(i[-1===h.indexOf(o)?"irregular":"regular"]=a,i);for(;g(o.charCodeAt(s))&&s<9;)s++;if(1<s&&s<9){if(i.language=a.slice(0,s),s<4)for(l=0;45===o.charCodeAt(s)&&g(o.charCodeAt(s+1))&&g(o.charCodeAt(s+2))&&g(o.charCodeAt(s+3))&&!g(o.charCodeAt(s+4));){if(2<l)return f(s,3,"Too many extended language subtags, expected at most 3 subtags");i.extendedLanguageSubtags.push(a.slice(s+1,s+4)),s+=4,l++}for(45===o.charCodeAt(s)&&g(o.charCodeAt(s+1))&&g(o.charCodeAt(s+2))&&g(o.charCodeAt(s+3))&&g(o.charCodeAt(s+4))&&!g(o.charCodeAt(s+5))&&(i.script=a.slice(s+1,s+5),s+=5),45===o.charCodeAt(s)&&(g(o.charCodeAt(s+1))&&g(o.charCodeAt(s+2))&&!g(o.charCodeAt(s+3))?(i.region=a.slice(s+1,s+3),s+=3):m(o.charCodeAt(s+1))&&m(o.charCodeAt(s+2))&&m(o.charCodeAt(s+3))&&!m(o.charCodeAt(s+4))&&(i.region=a.slice(s+1,s+4),s+=4));45===o.charCodeAt(s);){for(c=u=s+1;d(o.charCodeAt(c));){if(7<c-u)return f(c,1,"Too long variant, expected at most 8 characters");c++}if(!(4<c-u||3<c-u&&m(o.charCodeAt(u))))break;i.variants.push(a.slice(u,c)),s=c}for(;45===o.charCodeAt(s)&&120!==o.charCodeAt(s+1)&&d(o.charCodeAt(s+1))&&45===o.charCodeAt(s+2)&&d(o.charCodeAt(s+3));){for(c=s+2,l=0;45===o.charCodeAt(c)&&d(o.charCodeAt(c+1))&&d(o.charCodeAt(c+2));)for(c=(u=c+1)+2,l++;d(o.charCodeAt(c));){if(7<c-u)return f(c,2,"Too long extension, expected at most 8 characters");c++}if(!l)return f(c,4,"Empty extension, extensions must have at least 2 characters of content");i.extensions.push({singleton:a.charAt(s+1),extensions:a.slice(s+3,c).split("-")}),s=c}}else s=0;if(0===s&&120===o.charCodeAt(s)||45===o.charCodeAt(s)&&120===o.charCodeAt(s+1))for(c=s=s?s+2:1;45===o.charCodeAt(c)&&d(o.charCodeAt(c+1));){for(c=u=s+1;d(o.charCodeAt(c));){if(7<c-u)return f(c,5,"Too long private-use area, expected at most 8 characters");c++}i.privateuse.push(a.slice(s+1,c)),s=c}if(s!==a.length)return f(s,6,"Found superfluous content after tag");return i;function f(e,t,r){return n.warning&&n.warning(r,t,e),n.forgiving?i:E()}},{}.hasOwnProperty);function E(){return{language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null}}},"./node_modules/bcp-47/lib/stringify.js":function(e){"use strict";e.exports=function(e){var t,r,n,e=e||{},i=[];if(e.irregular||e.regular)return e.irregular||e.regular;if(e.language)for(i=i.concat(e.language,e.extendedLanguageSubtags||[],e.script||[],e.region||[],e.variants||[]),t=e.extensions||[],r=-1;++r<t.length;)(n=t[r]).singleton&&n.extensions&&n.extensions.length&&(i=i.concat(n.singleton,n.extensions));e.privateuse&&e.privateuse.length&&(i=i.concat("x",e.privateuse));return i.join("-")}},"./node_modules/buffer/index.js":function(e,r,t){"use strict";var A=t("./node_modules/buffer/node_modules/base64-js/index.js"),a=t("./node_modules/buffer/node_modules/ieee754/index.js"),t="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null,n=(r.Buffer=f,r.SlowBuffer=function(e){+e!=e&&(e=0);return f.alloc(+e)},r.INSPECT_MAX_BYTES=50,2147483647);function s(e){if(n<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');e=new Uint8Array(e);return Object.setPrototypeOf(e,f.prototype),e}function f(e,t,r){if("number"!=typeof e)return i(e,t,r);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return u(e)}function i(e,t,r){if("string"==typeof e){var n=e,i=t;if(!f.isEncoding(i="string"==typeof i&&""!==i?i:"utf8"))throw new TypeError("Unknown encoding: "+i);var a=0|g(n,i),o=s(a);return o=(n=o.write(n,i))!==a?o.slice(0,n):o}if(ArrayBuffer.isView(e))return O(i=e,Uint8Array)?c((a=new Uint8Array(i)).buffer,a.byteOffset,a.byteLength):l(i);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(O(e,ArrayBuffer)||e&&O(e.buffer,ArrayBuffer))return c(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(O(e,SharedArrayBuffer)||e&&O(e.buffer,SharedArrayBuffer)))return c(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return f.from(n,t,r);o=function(e){{var t,r;if(f.isBuffer(e))return t=0|d(e.length),0===(r=s(t)).length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||P(e.length)?s(0):l(e);if("Buffer"===e.type&&Array.isArray(e.data))return l(e.data)}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return f.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function o(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function u(e){return o(e),s(e<0?0:0|d(e))}function l(e){for(var t=e.length<0?0:0|d(e.length),r=s(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function c(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');e=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r);return Object.setPrototypeOf(e,f.prototype),e}function d(e){if(n<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|e}function g(e,t){if(f.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||O(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=2<arguments.length&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return N(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return D(e).length;default:if(i)return n?-1:N(e).length;t=(""+t).toLowerCase(),i=!0}}function m(e,t,r){var n,i=!1;if((t=void 0===t||t<0?0:t)>this.length)return"";if((r=void 0===r||r>this.length?this.length:r)<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":var a=this,o=t,s=r,u=a.length;(!s||s<0||u<s)&&(s=u);for(var l="",c=o=!o||o<0?0:o;c<s;++c)l+=L[a[c]];return l;case"utf8":case"utf-8":return R(this,t,r);case"ascii":var f=this,u=t,d=r,g="";d=Math.min(f.length,d);for(var m=u;m<d;++m)g+=String.fromCharCode(127&f[m]);return g;case"latin1":case"binary":var h=this,o=t,p=r,y="";p=Math.min(h.length,p);for(var E=o;E<p;++E)y+=String.fromCharCode(h[E]);return y;case"base64":return _=this,n=r,0===(v=t)&&n===_.length?A.fromByteArray(_):A.fromByteArray(_.slice(v,n));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var _=t,v=r,T=this.slice(_,v),b="",S=0;S<T.length-1;S+=2)b+=String.fromCharCode(T[S]+256*T[S+1]);return b;default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function h(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function p(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),(r=(r=P(r=+r)?i?0:e.length-1:r)<0?e.length+r:r)>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=f.from(t,n)),f.isBuffer(t))return 0===t.length?-1:y(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?(i?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,r):y(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function y(e,t,r,n,i){var a=1,o=e.length,s=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o/=a=2,s/=2,r/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i)for(var l=-1,c=r;c<o;c++)if(u(e,c)===u(t,-1===l?0:c-l)){if(c-(l=-1===l?c:l)+1===s)return l*a}else-1!==l&&(c-=c-l),l=-1;else for(c=r=o<r+s?o-s:r;0<=c;c--){for(var f=!0,d=0;d<s;d++)if(u(e,c+d)!==u(t,d)){f=!1;break}if(f)return c}return-1}function E(e,t,r,n){return M(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function _(e,t,r,n){return M(function(e,t){for(var r,n,i=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,n=n%256,i.push(n),i.push(r);return i}(t,e.length-r),e,r,n)}function R(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var a,o,s,u,l=e[i],c=null,f=239<l?4:223<l?3:191<l?2:1;if(i+f<=r)switch(f){case 1:l<128&&(c=l);break;case 2:128==(192&(a=e[i+1]))&&127<(u=(31&l)<<6|63&a)&&(c=u);break;case 3:a=e[i+1],o=e[i+2],128==(192&a)&&128==(192&o)&&2047<(u=(15&l)<<12|(63&a)<<6|63&o)&&(u<55296||57343<u)&&(c=u);break;case 4:a=e[i+1],o=e[i+2],s=e[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&65535<(u=(15&l)<<18|(63&a)<<12|(63&o)<<6|63&s)&&u<1114112&&(c=u)}null===c?(c=65533,f=1):65535<c&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=f}var d=n,g=d.length;if(g<=v)return String.fromCharCode.apply(String,d);for(var m="",h=0;h<g;)m+=String.fromCharCode.apply(String,d.slice(h,h+=v));return m}r.kMaxLength=n,(f.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}}),f.poolSize=8192,f.from=i,Object.setPrototypeOf(f.prototype,Uint8Array.prototype),Object.setPrototypeOf(f,Uint8Array),f.alloc=function(e,t,r){return t=t,r=r,o(e=e),!(e<=0)&&void 0!==t?"string"==typeof r?s(e).fill(t,r):s(e).fill(t):s(e)},f.allocUnsafe=u,f.allocUnsafeSlow=u,f.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==f.prototype},f.compare=function(e,t){if(O(e,Uint8Array)&&(e=f.from(e,e.offset,e.byteLength)),O(t,Uint8Array)&&(t=f.from(t,t.offset,t.byteLength)),!f.isBuffer(e)||!f.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,i=0,a=Math.min(r,n);i<a;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},f.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return f.alloc(0);if(void 0===t)for(i=t=0;i<e.length;++i)t+=e[i].length;for(var r=f.allocUnsafe(t),n=0,i=0;i<e.length;++i){var a=e[i];if(O(a,Uint8Array))n+a.length>r.length?f.from(a).copy(r,n):Uint8Array.prototype.set.call(r,a,n);else{if(!f.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,n)}n+=a.length}return r},f.byteLength=g,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)h(this,t,t+1);return this},f.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)h(this,t,t+3),h(this,t+1,t+2);return this},f.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)h(this,t,t+7),h(this,t+1,t+6),h(this,t+2,t+5),h(this,t+3,t+4);return this},f.prototype.toLocaleString=f.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?R(this,0,e):m.apply(this,arguments)},f.prototype.equals=function(e){if(f.isBuffer(e))return this===e||0===f.compare(this,e);throw new TypeError("Argument must be a Buffer")},f.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES,e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim();return this.length>t&&(e+=" ... "),"<Buffer "+e+">"},t&&(f.prototype[t]=f.prototype.inspect),f.prototype.compare=function(e,t,r,n,i){if(O(e,Uint8Array)&&(e=f.from(e,e.offset,e.byteLength)),!f.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),(t=void 0===t?0:t)<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(i<=n&&r<=t)return 0;if(i<=n)return-1;if(r<=t)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(t>>>=0),s=Math.min(a,o),u=this.slice(n,i),l=e.slice(t,r),c=0;c<s;++c)if(u[c]!==l[c]){a=u[c],o=l[c];break}return a<o?-1:o<a?1:0},f.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},f.prototype.indexOf=function(e,t,r){return p(this,e,t,r,!0)},f.prototype.lastIndexOf=function(e,t,r){return p(this,e,t,r,!1)},f.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||i<r)&&(r=i),0<e.length&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n=n||"utf8";for(var a,o,s,u=!1;;)switch(n){case"hex":var l=this,c=e,f=t,d=r,g=(f=Number(f)||0,l.length-f);(!d||g<(d=Number(d)))&&(d=g),(g=c.length)/2<d&&(d=g/2);for(var m=0;m<d;++m){var h=parseInt(c.substr(2*m,2),16);if(P(h))return m;l[f+m]=h}return m;case"utf8":case"utf-8":return g=t,s=r,M(N(e,(o=this).length-g),o,g,s);case"ascii":case"latin1":case"binary":return E(this,e,t,r);case"base64":return o=this,s=t,a=r,M(D(e),o,s,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,e,t,r);default:if(u)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),u=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var v=4096;function T(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(r<e+t)throw new RangeError("Trying to access beyond buffer length")}function b(e,t,r,n,i,a){if(!f.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<t||t<a)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function S(e,t,r,n){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function I(e,t,r,n,i){return t=+t,r>>>=0,i||S(e,0,r,4),a.write(e,t,r,n,23,4),r+4}function w(e,t,r,n,i){return t=+t,r>>>=0,i||S(e,0,r,8),a.write(e,t,r,n,52,8),r+8}f.prototype.slice=function(e,t){var r=this.length,r=((e=~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),t<e&&(t=e),this.subarray(e,t));return Object.setPrototypeOf(r,f.prototype),r},f.prototype.readUintLE=f.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||T(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return n},f.prototype.readUintBE=f.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||T(e,t,this.length);for(var n=this[e+--t],i=1;0<t&&(i*=256);)n+=this[e+--t]*i;return n},f.prototype.readUint8=f.prototype.readUInt8=function(e,t){return e>>>=0,t||T(e,1,this.length),this[e]},f.prototype.readUint16LE=f.prototype.readUInt16LE=function(e,t){return e>>>=0,t||T(e,2,this.length),this[e]|this[e+1]<<8},f.prototype.readUint16BE=f.prototype.readUInt16BE=function(e,t){return e>>>=0,t||T(e,2,this.length),this[e]<<8|this[e+1]},f.prototype.readUint32LE=f.prototype.readUInt32LE=function(e,t){return e>>>=0,t||T(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},f.prototype.readUint32BE=f.prototype.readUInt32BE=function(e,t){return e>>>=0,t||T(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},f.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||T(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return(i*=128)<=n&&(n-=Math.pow(2,8*t)),n},f.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||T(e,t,this.length);for(var n=t,i=1,a=this[e+--n];0<n&&(i*=256);)a+=this[e+--n]*i;return(i*=128)<=a&&(a-=Math.pow(2,8*t)),a},f.prototype.readInt8=function(e,t){return e>>>=0,t||T(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},f.prototype.readInt16LE=function(e,t){e>>>=0,t||T(e,2,this.length);t=this[e]|this[e+1]<<8;return 32768&t?4294901760|t:t},f.prototype.readInt16BE=function(e,t){e>>>=0,t||T(e,2,this.length);t=this[e+1]|this[e]<<8;return 32768&t?4294901760|t:t},f.prototype.readInt32LE=function(e,t){return e>>>=0,t||T(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},f.prototype.readInt32BE=function(e,t){return e>>>=0,t||T(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},f.prototype.readFloatLE=function(e,t){return e>>>=0,t||T(e,4,this.length),a.read(this,e,!0,23,4)},f.prototype.readFloatBE=function(e,t){return e>>>=0,t||T(e,4,this.length),a.read(this,e,!1,23,4)},f.prototype.readDoubleLE=function(e,t){return e>>>=0,t||T(e,8,this.length),a.read(this,e,!0,52,8)},f.prototype.readDoubleBE=function(e,t){return e>>>=0,t||T(e,8,this.length),a.read(this,e,!1,52,8)},f.prototype.writeUintLE=f.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||b(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,a=0;for(this[t]=255&e;++a<r&&(i*=256);)this[t+a]=e/i&255;return t+r},f.prototype.writeUintBE=f.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||b(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,a=1;for(this[t+i]=255&e;0<=--i&&(a*=256);)this[t+i]=e/a&255;return t+r},f.prototype.writeUint8=f.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||b(this,e,t,1,255,0),this[t]=255&e,t+1},f.prototype.writeUint16LE=f.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||b(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},f.prototype.writeUint16BE=f.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||b(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},f.prototype.writeUint32LE=f.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||b(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},f.prototype.writeUint32BE=f.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||b(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},f.prototype.writeIntLE=function(e,t,r,n){e=+e,t>>>=0,n||b(this,e,t,r,(n=Math.pow(2,8*r-1))-1,-n);var i=0,a=1,o=0;for(this[t]=255&e;++i<r&&(a*=256);)e<0&&0===o&&0!==this[t+i-1]&&(o=1),this[t+i]=(e/a>>0)-o&255;return t+r},f.prototype.writeIntBE=function(e,t,r,n){e=+e,t>>>=0,n||b(this,e,t,r,(n=Math.pow(2,8*r-1))-1,-n);var i=r-1,a=1,o=0;for(this[t+i]=255&e;0<=--i&&(a*=256);)e<0&&0===o&&0!==this[t+i+1]&&(o=1),this[t+i]=(e/a>>0)-o&255;return t+r},f.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||b(this,e,t,1,127,-128),this[t]=255&(e=e<0?255+e+1:e),t+1},f.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||b(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},f.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||b(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},f.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||b(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},f.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||b(this,e,t,4,2147483647,-2147483648),this[t]=(e=e<0?4294967295+e+1:e)>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},f.prototype.writeFloatLE=function(e,t,r){return I(this,e,t,!0,r)},f.prototype.writeFloatBE=function(e,t,r){return I(this,e,t,!1,r)},f.prototype.writeDoubleLE=function(e,t,r){return w(this,e,t,!0,r)},f.prototype.writeDoubleBE=function(e,t,r){return w(this,e,t,!1,r)},f.prototype.copy=function(e,t,r,n){if(!f.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r=r||0,n||0===n||(n=this.length),t>=e.length&&(t=e.length),(n=0<n&&n<r?r:n)===r)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length);var i=(n=e.length-t<n-r?e.length-t+r:n)-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},f.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!f.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var i;1===e.length&&(i=e.charCodeAt(0),("utf8"===n&&i<128||"latin1"===n)&&(e=i))}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var a;if(t>>>=0,r=void 0===r?this.length:r>>>0,"number"==typeof(e=e||0))for(a=t;a<r;++a)this[a]=e;else{var o=f.isBuffer(e)?e:f.from(e,n),s=o.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<r-t;++a)this[a+t]=o[a%s]}return this};var C=/[^+/0-9A-Za-z-_]/g;function N(e,t){t=t||1/0;for(var r,n=e.length,i=null,a=[],o=0;o<n;++o){if(55295<(r=e.charCodeAt(o))&&r<57344){if(!i){if(56319<r){-1<(t-=3)&&a.push(239,191,189);continue}if(o+1===n){-1<(t-=3)&&a.push(239,191,189);continue}i=r;continue}if(r<56320){-1<(t-=3)&&a.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&-1<(t-=3)&&a.push(239,191,189);if(i=null,r<128){if(--t<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function D(e){return A.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(C,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function M(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function O(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function P(e){return e!=e}var L=function(){for(var e="0123456789abcdef",t=new Array(256),r=0;r<16;++r)for(var n=16*r,i=0;i<16;++i)t[n+i]=e[r]+e[i];return t}()},"./node_modules/buffer/node_modules/base64-js/index.js":function(e,t){"use strict";t.byteLength=function(e){var e=c(e),t=e[0],e=e[1];return 3*(t+e)/4-e},t.toByteArray=function(e){var t,r,n=c(e),i=n[0],n=n[1],a=new l(function(e,t){return 3*(e+t)/4-t}(i,n)),o=0,s=0<n?i-4:i;for(r=0;r<s;r+=4)t=u[e.charCodeAt(r)]<<18|u[e.charCodeAt(r+1)]<<12|u[e.charCodeAt(r+2)]<<6|u[e.charCodeAt(r+3)],a[o++]=t>>16&255,a[o++]=t>>8&255,a[o++]=255&t;2===n&&(t=u[e.charCodeAt(r)]<<2|u[e.charCodeAt(r+1)]>>4,a[o++]=255&t);1===n&&(t=u[e.charCodeAt(r)]<<10|u[e.charCodeAt(r+1)]<<4|u[e.charCodeAt(r+2)]>>2,a[o++]=t>>8&255,a[o++]=255&t);return a},t.fromByteArray=function(e){for(var t,r=e.length,n=r%3,i=[],a=0,o=r-n;a<o;a+=16383)i.push(function(e,t,r){for(var n,i=[],a=t;a<r;a+=3)n=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),i.push(function(e){return s[e>>18&63]+s[e>>12&63]+s[e>>6&63]+s[63&e]}(n));return i.join("")}(e,a,o<a+16383?o:a+16383));1==n?(t=e[r-1],i.push(s[t>>2]+s[t<<4&63]+"==")):2==n&&(t=(e[r-2]<<8)+e[r-1],i.push(s[t>>10]+s[t>>4&63]+s[t<<2&63]+"="));return i.join("")};for(var s=[],u=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,i=r.length;n<i;++n)s[n]=r[n],u[r.charCodeAt(n)]=n;function c(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");e=e.indexOf("="),t=(e=-1===e?t:e)===t?0:4-e%4;return[e,t]}u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},"./node_modules/buffer/node_modules/ieee754/index.js":function(e,t){t.read=function(e,t,r,n,i){var a,o,s=8*i-n-1,u=(1<<s)-1,l=u>>1,c=-7,f=r?i-1:0,d=r?-1:1,i=e[t+f];for(f+=d,a=i&(1<<-c)-1,i>>=-c,c+=s;0<c;a=256*a+e[t+f],f+=d,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=n;0<c;o=256*o+e[t+f],f+=d,c-=8);if(0===a)a=1-l;else{if(a===u)return o?NaN:1/0*(i?-1:1);o+=Math.pow(2,n),a-=l}return(i?-1:1)*o*Math.pow(2,a-n)},t.write=function(e,t,r,n,i,a){var o,s,u=8*a-i-1,l=(1<<u)-1,c=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:a-1,g=n?1:-1,a=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(n=Math.pow(2,-o))<1&&(o--,n*=2),2<=(t+=1<=o+c?f/n:f*Math.pow(2,1-c))*n&&(o++,n/=2),l<=o+c?(s=0,o=l):1<=o+c?(s=(t*n-1)*Math.pow(2,i),o+=c):(s=t*Math.pow(2,c-1)*Math.pow(2,i),o=0));8<=i;e[r+d]=255&s,d+=g,s/=256,i-=8);for(o=o<<i|s,u+=i;0<u;e[r+d]=255&o,d+=g,o/=256,u-=8);e[r+d-g]|=128*a}},"./node_modules/codem-isoboxer/dist/iso_boxer.js":function(e,t){var i={parseBuffer:function(e){return new a(e).parse()},addBoxProcessor:function(e,t){"string"==typeof e&&"function"==typeof t&&(n.prototype._boxProcessors[e]=t)},createFile:function(){return new a},createBox:function(e,t,r){e=n.create(e);return t&&t.append(e,r),e},createFullBox:function(e,t,r){e=i.createBox(e,t,r);return e.version=0,e.flags=0,e},Utils:{}},a=(i.Utils.dataViewToString=function(e,t){t=t||"utf-8";if("undefined"!=typeof TextDecoder)return new TextDecoder(t).decode(e);var r=[],n=0;if("utf-8"===t)for(;n<e.byteLength;){var i=e.getUint8(n++);i<128||(i<224?(i=(31&i)<<6,i|=63&e.getUint8(n++)):i=i<240?(i=(15&i)<<12,(i|=(63&e.getUint8(n++))<<6)|63&e.getUint8(n++)):(i=(7&i)<<18,(i=(i|=(63&e.getUint8(n++))<<12)|(63&e.getUint8(n++))<<6)|63&e.getUint8(n++))),r.push(String.fromCharCode(i))}else for(;n<e.byteLength;)r.push(String.fromCharCode(e.getUint8(n++)));return r.join("")},i.Utils.utf8ToByteArray=function(e){var t,r;if("undefined"!=typeof TextEncoder)t=(new TextEncoder).encode(e);else for(t=[],r=0;r<e.length;++r){var n=e.charCodeAt(r);n<128?t.push(n):(n<2048?t.push(192|n>>6):(n<65536?t.push(224|n>>12):(t.push(240|n>>18),t.push(128|63&n>>12)),t.push(128|63&n>>6)),t.push(128|63&n))}return t},i.Utils.appendBox=function(e,t,r){if(t._offset=e._cursor.offset,t._root=e._root||e,t._raw=e._raw,t._parent=e,-1!==r)if(null==r)e.boxes.push(t);else{var n,i=-1;if("number"==typeof r)i=r;else{if("string"==typeof r)n=r;else{if("object"!=typeof r||!r.type)return void e.boxes.push(t);n=r.type}for(var a=0;a<e.boxes.length;a++)if(n===e.boxes[a].type){i=a+1;break}}e.boxes.splice(i,0,t)}},t.parseBuffer=i.parseBuffer,t.addBoxProcessor=i.addBoxProcessor,t.createFile=i.createFile,t.createBox=i.createBox,t.createFullBox=i.createFullBox,t.Utils=i.Utils,i.Cursor=function(e){this.offset=void 0===e?0:e},function(e){this._cursor=new i.Cursor,this.boxes=[],e&&(this._raw=new DataView(e))}),n=(a.prototype.fetch=function(e){e=this.fetchAll(e,!0);return e.length?e[0]:null},a.prototype.fetchAll=function(e,t){var r=[];return a._sweep.call(this,e,r,t),r},a.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var e=n.parse(this);if(void 0===e.type)break;this.boxes.push(e)}return this},a._sweep=function(e,t,r){for(var n in this.type&&this.type==e&&t.push(this),this.boxes){if(t.length&&r)return;a._sweep.call(this.boxes[n],e,t,r)}},a.prototype.write=function(){for(var e=0,t=0;t<this.boxes.length;t++)e+=this.boxes[t].getLength(!1);var r=new Uint8Array(e);for(this._rawo=new DataView(r.buffer),this.bytes=r,t=this._cursor.offset=0;t<this.boxes.length;t++)this.boxes[t].write();return r.buffer},a.prototype.append=function(e,t){i.Utils.appendBox(this,e,t)},function(){this._cursor=new i.Cursor});n.parse=function(e){var t=new n;return t._offset=e._cursor.offset,t._root=e._root||e,t._raw=e._raw,t._parent=e,t._parseBox(),e._cursor.offset=t._raw.byteOffset+t._raw.byteLength,t},n.create=function(e){var t=new n;return t.type=e,t.boxes=[],t},n.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],n.prototype._boxProcessors={},n.prototype._procField=function(e,t,r){this._parsing?this[e]=this._readField(t,r):this._writeField(t,r,this[e])},n.prototype._procFieldArray=function(e,t,r,n){var i;if(this._parsing)for(this[e]=[],i=0;i<t;i++)this[e][i]=this._readField(r,n);else for(i=0;i<this[e].length;i++)this._writeField(r,n,this[e][i])},n.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},n.prototype._procEntries=function(e,t,r){var n;if(this._parsing)for(this[e]=[],n=0;n<t;n++)this[e].push({}),r.call(this,this[e][n]);else for(n=0;n<t;n++)r.call(this,this[e][n])},n.prototype._procSubEntries=function(e,t,r,n){var i;if(this._parsing)for(e[t]=[],i=0;i<r;i++)e[t].push({}),n.call(this,e[t][i]);else for(i=0;i<r;i++)n.call(this,e[t][i])},n.prototype._procEntryField=function(e,t,r,n){this._parsing?e[t]=this._readField(r,n):this._writeField(r,n,e[t])},n.prototype._procSubBoxes=function(e,t){var r;if(this._parsing)for(this[e]=[],r=0;r<t;r++)this[e].push(n.parse(this));else for(r=0;r<t;r++)this._rawo?this[e][r].write():this.size+=this[e][r].getLength()},n.prototype._readField=function(e,t){switch(e){case"uint":return this._readUint(t);case"int":return this._readInt(t);case"template":return this._readTemplate(t);case"string":return-1===t?this._readTerminatedString():this._readString(t);case"data":return this._readData(t);case"utf8":return this._readUTF8String();default:return-1}},n.prototype._readInt=function(e){var t=null,r=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:t=this._raw.getInt8(r);break;case 16:t=this._raw.getInt16(r);break;case 32:t=this._raw.getInt32(r);break;case 64:var n=this._raw.getInt32(r),i=this._raw.getInt32(4+r),t=n*Math.pow(2,32)+i}return this._cursor.offset+=e>>3,t},n.prototype._readUint=function(e){var t,r,n=null,i=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:n=this._raw.getUint8(i);break;case 16:n=this._raw.getUint16(i);break;case 24:n=((t=this._raw.getUint16(i))<<8)+(r=this._raw.getUint8(2+i));break;case 32:n=this._raw.getUint32(i);break;case 64:t=this._raw.getUint32(i),r=this._raw.getUint32(4+i),n=t*Math.pow(2,32)+r}return this._cursor.offset+=e>>3,n},n.prototype._readString=function(e){for(var t="",r=0;r<e;r++){var n=this._readUint(8);t+=String.fromCharCode(n)}return t},n.prototype._readTemplate=function(e){return this._readUint(e/2)+this._readUint(e/2)/Math.pow(2,e/2)},n.prototype._readTerminatedString=function(){for(var e="";this._cursor.offset-this._offset<this._raw.byteLength;){var t=this._readUint(8);if(0===t)break;e+=String.fromCharCode(t)}return e},n.prototype._readData=function(e){var t,e=0<e?e:this._raw.byteLength-(this._cursor.offset-this._offset);return 0<e?(t=new Uint8Array(this._raw.buffer,this._cursor.offset,e),this._cursor.offset+=e,t):null},n.prototype._readUTF8String=function(){var e=this._raw.byteLength-(this._cursor.offset-this._offset),t=null;return 0<e&&(t=new DataView(this._raw.buffer,this._cursor.offset,e),this._cursor.offset+=e),t&&i.Utils.dataViewToString(t)},n.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type)?this._parseContainerBox():this._data=this._readData())}},n.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},n.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(n.parse(this))},n.prototype.append=function(e,t){i.Utils.appendBox(this,e,t)},n.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.size+=this.boxes[e].getLength();return this._data&&this._writeData(this._data),this.size},n.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.boxes[e].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},n.prototype._writeInt=function(e,t){if(this._rawo){var r=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setInt8(r,t);break;case 16:this._rawo.setInt16(r,t);break;case 32:this._rawo.setInt32(r,t);break;case 64:var n=Math.floor(t/Math.pow(2,32)),i=t-n*Math.pow(2,32);this._rawo.setUint32(r,n),this._rawo.setUint32(4+r,i)}this._cursor.offset+=e>>3}else this.size+=e>>3},n.prototype._writeUint=function(e,t){if(this._rawo){var r,n,i=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setUint8(i,t);break;case 16:this._rawo.setUint16(i,t);break;case 24:n=255&t,this._rawo.setUint16(i,r=(16776960&t)>>8),this._rawo.setUint8(2+i,n);break;case 32:this._rawo.setUint32(i,t);break;case 64:n=t-(r=Math.floor(t/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(i,r),this._rawo.setUint32(4+i,n)}this._cursor.offset+=e>>3}else this.size+=e>>3},n.prototype._writeString=function(e,t){for(var r=0;r<e;r++)this._writeUint(8,t.charCodeAt(r))},n.prototype._writeTerminatedString=function(e){if(0!==e.length){for(var t=0;t<e.length;t++)this._writeUint(8,e.charCodeAt(t));this._writeUint(8,0)}},n.prototype._writeTemplate=function(e,t){var r=Math.floor(t),t=(t-r)*Math.pow(2,e/2);this._writeUint(e/2,r),this._writeUint(e/2,t)},n.prototype._writeData=function(e){if(e)if(this._rawo){if(e instanceof Array){for(var t=this._cursor.offset-this._rawo.byteOffset,r=0;r<e.length;r++)this._rawo.setInt8(t+r,e[r]);this._cursor.offset+=e.length}e instanceof Uint8Array&&(this._root.bytes.set(e,this._cursor.offset),this._cursor.offset+=e.length)}else this.size+=e.length},n.prototype._writeUTF8String=function(e){var t=i.Utils.utf8ToByteArray(e);if(this._rawo)for(var r=new DataView(this._rawo.buffer,this._cursor.offset,t.length),n=0;n<t.length;n++)r.setUint8(n,t[n]);else this.size+=t.length},n.prototype._writeField=function(e,t,r){switch(e){case"uint":this._writeUint(t,r);break;case"int":this._writeInt(t,r);break;case"template":this._writeTemplate(t,r);break;case"string":-1==t?this._writeTerminatedString(r):this._writeString(t,r);break;case"data":this._writeData(r);break;case"utf8":this._writeUTF8String(r)}},n.prototype._boxProcessors.avc1=n.prototype._boxProcessors.avc2=n.prototype._boxProcessors.avc3=n.prototype._boxProcessors.avc4=n.prototype._boxProcessors.hvc1=n.prototype._boxProcessors.hev1=n.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},n.prototype._boxProcessors.ctts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"sample_count","uint",32),this._procEntryField(e,"sample_offset",1===this.version?"int":"uint",32)})},n.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},n.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"segment_duration","uint",1===this.version?64:32),this._procEntryField(e,"media_time","int",1===this.version?64:32),this._procEntryField(e,"media_rate_integer","int",16),this._procEntryField(e,"media_rate_fraction","int",16)})},n.prototype._boxProcessors.emsg=function(){this._procFullBox(),1==this.version?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},n.prototype._boxProcessors.free=n.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},n.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},n.prototype._boxProcessors.ftyp=n.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var e=-1;this._parsing&&(e=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",e,"string",4)},n.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},n.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},n.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._parsing||"string"!=typeof this.language||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},n.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",1==this.version?64:32)},n.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},n.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},n.prototype._boxProcessors.mp4a=n.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},n.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},n.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},n.prototype._boxProcessors.prft=function(){this._procFullBox(),this._procField("reference_track_ID","uint",32),this._procField("ntp_timestamp_sec","uint",32),this._procField("ntp_timestamp_frac","uint",32),this._procField("media_time","uint",1==this.version?64:32)},n.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},n.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},n.prototype._boxProcessors.sdtp=function(){this._procFullBox();var e=-1;this._parsing&&(e=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",e,"uint",8)},n.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",1==this.version?64:32),this._procField("first_offset","uint",1==this.version?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(e){this._parsing||(e.reference=(1&e.reference_type)<<31,e.reference|=2147483647&e.referenced_size,e.sap=(1&e.starts_with_SAP)<<31,e.sap|=(3&e.SAP_type)<<28,e.sap|=268435455&e.SAP_delta_time),this._procEntryField(e,"reference","uint",32),this._procEntryField(e,"subsegment_duration","uint",32),this._procEntryField(e,"sap","uint",32),this._parsing&&(e.reference_type=e.reference>>31&1,e.referenced_size=2147483647&e.reference,e.starts_with_SAP=e.sap>>31&1,e.SAP_type=e.sap>>28&7,e.SAP_delta_time=268435455&e.sap)})},n.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},n.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(e){this._procEntryField(e,"ranges_count","uint",32),this._procSubEntries(e,"ranges",e.ranges_count,function(e){this._procEntryField(e,"level","uint",8),this._procEntryField(e,"range_size","uint",24)})})},n.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},n.prototype._boxProcessors.sttg=function(){this._procField("settings","utf8")},n.prototype._boxProcessors.stts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"sample_count","uint",32),this._procEntryField(e,"sample_delta","uint",32)})},n.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"sample_delta","uint",32),this._procEntryField(e,"subsample_count","uint",16),this._procSubEntries(e,"subsamples",e.subsample_count,function(e){this._procEntryField(e,"subsample_size","uint",1===this.version?32:16),this._procEntryField(e,"subsample_priority","uint",8),this._procEntryField(e,"discardable","uint",8),this._procEntryField(e,"codec_specific_parameters","uint",32)})})},n.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},n.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",1==this.version?64:32)},n.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},n.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(e){this._procEntryField(e,"time","uint",1===this.version?64:32),this._procEntryField(e,"moof_offset","uint",1===this.version?64:32),this._procEntryField(e,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(e,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(e,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},n.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},n.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},n.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(e){256&this.flags&&this._procEntryField(e,"sample_duration","uint",32),512&this.flags&&this._procEntryField(e,"sample_size","uint",32),1024&this.flags&&this._procEntryField(e,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(e,"sample_composition_time_offset",1===this.version?"int":"uint",32)})},n.prototype._boxProcessors["url "]=n.prototype._boxProcessors["urn "]=function(){this._procFullBox(),"urn "===this.type&&this._procField("name","string",-1),this._procField("location","string",-1)},n.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},n.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},n.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},n.prototype._boxProcessors.vtte=function(){}},"./node_modules/es6-promise/auto.js":function(e,t,r){"use strict";e.exports=r("./node_modules/es6-promise/dist/es6-promise.js").polyfill()},"./node_modules/es6-promise/dist/es6-promise.js":function(e,t,ne){e.exports=function(){"use strict";function n(e){var t=typeof e;return e!==null&&(t==="object"||t==="function")}function u(e){return typeof e==="function"}var e=void 0;if(Array.isArray)e=Array.isArray;else e=function(e){return Object.prototype.toString.call(e)==="[object Array]"};var r=e,i=0,t=void 0,a=void 0,o=function e(t,r){p[i]=t;p[i+1]=r;i+=2;if(i===2)if(a)a(y);else E()};function s(e){a=e}function l(e){o=e}var c=typeof window!=="undefined"?window:undefined,f=c||{},d=f.MutationObserver||f.WebKitMutationObserver,g=typeof self==="undefined"&&typeof process!=="undefined"&&{}.toString.call(process)==="[object process]",m=typeof Uint8ClampedArray!=="undefined"&&typeof importScripts!=="undefined"&&typeof MessageChannel!=="undefined";function x(){return function(){return process.nextTick(y)}}function j(){if(typeof t!=="undefined")return function(){t(y)};return h()}function k(){var e=0;var t=new d(y);var r=document.createTextNode("");t.observe(r,{characterData:true});return function(){r.data=e=++e%2}}function U(){var e=new MessageChannel;e.port1.onmessage=y;return function(){return e.port2.postMessage(0)}}function h(){var e=setTimeout;return function(){return e(y,1)}}var p=new Array(1e3);function y(){for(var e=0;e<i;e+=2){var t=p[e];var r=p[e+1];t(r);p[e]=undefined;p[e+1]=undefined}i=0}function B(){try{var e=Function("return this")().require("vertx");t=e.runOnLoop||e.runOnContext;return j()}catch(e){return h()}}var E=void 0;if(g)E=x();else if(d)E=k();else if(m)E=U();else if(c===undefined&&"function"==="function")E=B();else E=h();function _(e,t){var r=this;var n=new this.constructor(b);if(n[T]===undefined)L(n);var i=r._state;if(i){var a=arguments[i-1];o(function(){return O(i,n,a,r._result)})}else D(r,n,e,t);return n}function v(e){var t=this;if(e&&typeof e==="object"&&e.constructor===t)return e;var r=new t(b);w(r,e);return r}var T=Math.random().toString(36).substring(2);function b(){}var S=void 0,A=1,R=2;function G(){return new TypeError("You cannot resolve a promise with itself")}function q(){return new TypeError("A promises callback cannot return that same promise.")}function H(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}function Y(e,n,i){o(function(t){var r=false;var e=H(i,n,function(e){if(r)return;r=true;if(n!==e)w(t,e);else C(t,e)},function(e){if(r)return;r=true;N(t,e)},"Settle: "+(t._label||" unknown promise"));if(!r&&e){r=true;N(t,e)}},e)}function V(t,e){if(e._state===A)C(t,e._result);else if(e._state===R)N(t,e._result);else D(e,undefined,function(e){return w(t,e)},function(e){return N(t,e)})}function I(e,t,r){if(t.constructor===e.constructor&&r===_&&t.constructor.resolve===v)V(e,t);else if(r===undefined)C(e,t);else if(u(r))Y(e,t,r);else C(e,t)}function w(t,e){if(t===e)N(t,G());else if(n(e)){var r=void 0;try{r=e.then}catch(e){N(t,e);return}I(t,e,r)}else C(t,e)}function K(e){if(e._onerror)e._onerror(e._result);M(e)}function C(e,t){if(e._state!==S)return;e._result=t;e._state=A;if(e._subscribers.length!==0)o(M,e)}function N(e,t){if(e._state!==S)return;e._state=R;e._result=t;o(K,e)}function D(e,t,r,n){var i=e._subscribers;var a=i.length;e._onerror=null;i[a]=t;i[a+A]=r;i[a+R]=n;if(a===0&&e._state)o(M,e)}function M(e){var t=e._subscribers;var r=e._state;if(t.length===0)return;var n=void 0,i=void 0,a=e._result;for(var o=0;o<t.length;o+=3){n=t[o];i=t[o+r];if(n)O(r,n,i,a);else i(a)}e._subscribers.length=0}function O(e,t,r,n){var i=u(r),a=void 0,o=void 0,s=true;if(i){try{a=r(n)}catch(e){s=false;o=e}if(t===a){N(t,q());return}}else a=n;if(t._state!==S);else if(i&&s)w(t,a);else if(s===false)N(t,o);else if(e===A)C(t,a);else if(e===R)N(t,a)}function z(r,e){try{e(function e(t){w(r,t)},function e(t){N(r,t)})}catch(e){N(r,e)}}var P=0;function W(){return P++}function L(e){e[T]=P++;e._state=undefined;e._result=undefined;e._subscribers=[]}function X(){return new Error("Array Methods must be provided an Array")}var Q=function(){function e(e,t){this._instanceConstructor=e;this.promise=new e(b);if(!this.promise[T])L(this.promise);if(r(t)){this.length=t.length;this._remaining=t.length;this._result=new Array(this.length);if(this.length===0)C(this.promise,this._result);else{this.length=this.length||0;this._enumerate(t);if(this._remaining===0)C(this.promise,this._result)}}else N(this.promise,X())}e.prototype._enumerate=function e(t){for(var r=0;this._state===S&&r<t.length;r++)this._eachEntry(t[r],r)};e.prototype._eachEntry=function e(t,r){var n=this._instanceConstructor;var i=n.resolve;if(i===v){var a=void 0;var o=void 0;var s=false;try{a=t.then}catch(e){s=true;o=e}if(a===_&&t._state!==S)this._settledAt(t._state,r,t._result);else if(typeof a!=="function"){this._remaining--;this._result[r]=t}else if(n===F){var u=new n(b);if(s)N(u,o);else I(u,t,a);this._willSettleAt(u,r)}else this._willSettleAt(new n(function(e){return e(t)}),r)}else this._willSettleAt(i(t),r)};e.prototype._settledAt=function e(t,r,n){var i=this.promise;if(i._state===S){this._remaining--;if(t===R)N(i,n);else this._result[r]=n}if(this._remaining===0)C(i,this._result)};e.prototype._willSettleAt=function e(t,r){var n=this;D(t,undefined,function(e){return n._settledAt(A,r,e)},function(e){return n._settledAt(R,r,e)})};return e}();function J(e){return new Q(this,e).promise}function Z(i){var a=this;if(!r(i))return new a(function(e,t){return t(new TypeError("You must pass an array to race."))});else return new a(function(e,t){var r=i.length;for(var n=0;n<r;n++)a.resolve(i[n]).then(e,t)})}function $(e){var t=this;var r=new t(b);N(r,e);return r}function ee(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function te(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var F=function(){function t(e){this[T]=W();this._result=this._state=undefined;this._subscribers=[];if(b!==e){typeof e!=="function"&&ee();this instanceof t?z(this,e):te()}}t.prototype.catch=function e(t){return this.then(null,t)};t.prototype.finally=function e(t){var r=this;var n=r.constructor;if(u(t))return r.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){throw e})});return r.then(t,t)};return t}();function re(){var e=void 0;if(typeof ne.g!=="undefined")e=ne.g;else if(typeof self!=="undefined")e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if(r==="[object Promise]"&&!t.cast)return}e.Promise=F}return F.prototype.then=_,F.all=J,F.race=Z,F.resolve=v,F.reject=$,F._setScheduler=s,F._setAsap=l,F._asap=o,F.polyfill=re,F.Promise=F}()},"./node_modules/events/events.js":function(e){"use strict";var t="object"==typeof Reflect?Reflect:null,u=t&&"function"==typeof t.apply?t.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};var r=t&&"function"==typeof t.ownKeys?t.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},n=Number.isNaN||function(e){return e!=e};function i(){i.init.call(this)}e.exports=i,e.exports.once=function(s,u){return new Promise(function(e,t){function r(e){s.removeListener(u,n),t(e)}function n(){"function"==typeof s.removeListener&&s.removeListener("error",r),e([].slice.call(arguments))}var i,a,o;m(s,u,n,{once:!0}),"error"!==u&&(a=r,o={once:!0},"function"==typeof(i=s).on&&m(i,"error",a,o))})},(i.EventEmitter=i).prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var a=10;function l(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function o(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function s(e,t,r,n){var i,a;return l(r),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,r.listener||r),i=e._events),a=i[t]),void 0===a?(a=i[t]=r,++e._eventsCount):("function"==typeof a?a=i[t]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),0<(i=o(e))&&a.length>i&&!a.warned&&(a.warned=!0,(n=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",n.emitter=e,n.type=t,n.count=a.length,r=n,console&&console.warn&&console.warn(r))),e}function c(e,t,r){e={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},t=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(e);return t.listener=r,e.wrapFn=t}function f(e,t,r){e=e._events;if(void 0===e)return[];e=e[t];{if(void 0===e)return[];if("function"==typeof e)return r?[e.listener||e]:[e];if(r){for(var n=e,i=new Array(n.length),a=0;a<i.length;++a)i[a]=n[a].listener||n[a];return i}return g(e,e.length)}}function d(e){var t=this._events;if(void 0!==t){t=t[e];if("function"==typeof t)return 1;if(void 0!==t)return t.length}return 0}function g(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function m(r,n,i,a){if("function"==typeof r.on)a.once?r.once(n,i):r.on(n,i);else{if("function"!=typeof r.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r);r.addEventListener(n,function e(t){a.once&&r.removeEventListener(n,e),i(t)})}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return o(this)},i.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){if((a=0<t.length?t[0]:a)instanceof Error)throw a;n=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw n.context=a,n}var a=i[e];if(void 0===a)return!1;if("function"==typeof a)u(a,this,t);else for(var o=a.length,s=g(a,o),r=0;r<o;++r)u(s[r],this,t);return!0},i.prototype.on=i.prototype.addListener=function(e,t){return s(this,e,t,!1)},i.prototype.prependListener=function(e,t){return s(this,e,t,!0)},i.prototype.once=function(e,t){return l(t),this.on(e,c(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return l(t),this.prependListener(e,c(this,e,t)),this},i.prototype.off=i.prototype.removeListener=function(e,t){var r,n,i,a,o;if(l(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,a=r.length-1;0<=a;a--)if(r[a]===t||r[a].listener===t){o=r[a].listener,i=a;break}if(i<0)return this;if(0===i)r.shift();else{for(var s=r,u=i;u+1<s.length;u++)s[u]=s[u+1];s.pop()}1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,o||t)}return this},i.prototype.removeAllListeners=function(e){var t,r=this._events;if(void 0===r)return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){for(var n,i=Object.keys(r),a=0;a<i.length;++a)"removeListener"!==(n=i[a])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(a=t.length-1;0<=a;a--)this.removeListener(e,t[a]);return this},i.prototype.listeners=function(e){return f(this,e,!0)},i.prototype.rawListeners=function(e){return f(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):d.call(e,t)},i.prototype.listenerCount=d,i.prototype.eventNames=function(){return 0<this._eventsCount?r(this._events):[]}},"./node_modules/fast-deep-equal/index.js":function(e){"use strict";var l=Array.isArray,c=Object.keys,f=Object.prototype.hasOwnProperty;e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){var n,i,a=l(t),o=l(r);if(a&&o){if((s=t.length)!=r.length)return!1;for(n=s;0!=n--;)if(!e(t[n],r[n]))return!1;return!0}if(a!=o)return!1;a=t instanceof Date,o=r instanceof Date;if(a!=o)return!1;if(a&&o)return t.getTime()==r.getTime();a=t instanceof RegExp,o=r instanceof RegExp;if(a!=o)return!1;if(a&&o)return t.toString()==r.toString();var s,u=c(t);if((s=u.length)!==c(r).length)return!1;for(n=s;0!=n--;)if(!f.call(r,u[n]))return!1;for(n=s;0!=n--;)if(!e(t[i=u[n]],r[i]))return!1;return!0}return t!=t&&r!=r}},"./node_modules/imsc/src/main/js/doc.js":function(n,e,t){function m(e,t,r,n){var i=n&&"seq"===n.timeContainer,a=0,o=(n&&(a=i&&r?r.end:n.begin),t.begin=t.explicit_begin?t.explicit_begin+a:a,t.begin),s=null;if("sets"in t)for(var u=0;u<t.sets.length;u++)m(e,t.sets[u],s,t),o="seq"===t.timeContainer?t.sets[u].end:Math.max(o,t.sets[u].end),s=t.sets[u];if("contents"in t){if("contents"in t)for(var l=0;l<t.contents.length;l++)m(e,t.contents[l],s,t),o="seq"===t.timeContainer?t.contents[l].end:Math.max(o,t.contents[l].end),s=t.contents[l]}else o=i?t.begin:Number.POSITIVE_INFINITY;null!==t.explicit_end&&null!==t.explicit_dur?t.end=Math.min(t.begin+t.explicit_dur,a+t.explicit_end):null===t.explicit_end&&null!==t.explicit_dur?t.end=t.begin+t.explicit_dur:null!==t.explicit_end&&null===t.explicit_dur?t.end=a+t.explicit_end:t.end=o,delete t.explicit_begin,delete t.explicit_dur,delete t.explicit_end,e._registerEvent(t)}function h(e){this.node=e}function p(){this.events=[],this.head=new y,this.body=null}function y(){this.styling=new E,this.layout=new T}function E(){this.styles={},this.initials={}}function _(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function v(){this.styleAttrs=null}function T(){this.regions={}}function b(e,t){r.call(this,"image"),this.src=e,this.type=t}function r(e){this.kind=e}function i(e){this.id=e}function o(e){this.regionID=e}function s(e){this.styleAttrs=e}function u(e){this.sets=e}function l(e){this.contents=e}function c(e,t,r){this.explicit_begin=e,this.explicit_end=t,this.explicit_dur=r}function S(){r.call(this,"body")}function A(){r.call(this,"div")}function R(){r.call(this,"p")}function I(){r.call(this,"span")}function a(){r.call(this,"span")}function w(){r.call(this,"br")}function C(){}function j(){}function k(e){return e&&"xml:id"in e.attributes&&e.attributes["xml:id"].value||null}function f(e){return e&&"style"in e.attributes?e.attributes.style.value.split(" "):[]}function d(e,t){var r={};if(null!==e)for(var n in e.attributes){var i,a=e.attributes[n].uri+" "+e.attributes[n].local,o=F.byQName[a];void 0!==o&&(null!==(i=o.parse(e.attributes[n].value))?(r[a]=i,o===F.byName.zIndex&&M(t,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):O(t,"Cannot parse styling attribute "+a+" --\x3e "+e.attributes[n].value))}return r}function g(e,t,r){for(var n in e.attributes)if(e.attributes[n].uri===t&&e.attributes[n].local===r)return e.attributes[n].value;return null}function N(e,t,r){var n,i=null;return null!==(n=/^(\d+(?:\.\d+)?)f$/.exec(r))?null!==t&&(i=parseFloat(n[1])/t):null!==(n=/^(\d+(?:\.\d+)?)t$/.exec(r))?null!==e&&(i=parseFloat(n[1])/e):null!==(n=/^(\d+(?:\.\d+)?)ms$/.exec(r))?i=parseFloat(n[1])/1e3:null!==(n=/^(\d+(?:\.\d+)?)s$/.exec(r))?i=parseFloat(n[1]):null!==(n=/^(\d+(?:\.\d+)?)h$/.exec(r))?i=3600*parseFloat(n[1]):null!==(n=/^(\d+(?:\.\d+)?)m$/.exec(r))?i=60*parseFloat(n[1]):null!==(n=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(r))?i=3600*parseInt(n[1])+60*parseInt(n[2])+parseFloat(n[3]):null!==(n=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(r))&&null!==t&&(i=3600*parseInt(n[1])+60*parseInt(n[2])+parseInt(n[3])+(null===n[4]?0:parseInt(n[4])/t)),i}function U(e,t,r,n){for(var i=t.length-1;0<=i;i--){var a=t[i];a in e.styles?D(e.styles[a].styleAttrs,r):O(n,"Non-existant style id referenced")}}function D(e,t){for(var r in e)!e.hasOwnProperty(r)||r in t||(t[r]=e[r])}function M(e,t){if(e&&e.warn&&e.warn(t))throw t}function O(e,t){if(e&&e.error&&e.error(t))throw t}function P(e,t){throw e&&e.fatal&&e.fatal(t),t}function B(e,t){for(var r=0,n=e.length-1;r<=n;){var i,a=e[i=Math.floor((r+n)/2)];if(a<t)r=i+1;else{if(!(t<a))return{found:!0,index:i};n=i-1}}return{found:!1,index:r}}var G,L,F,x;e=e,G="undefined"==typeof sax?t("./node_modules/sax/lib/sax.js"):sax,L="undefined"==typeof imscNames?t("./node_modules/imsc/src/main/js/names.js"):imscNames,F="undefined"==typeof imscStyles?t("./node_modules/imsc/src/main/js/styles.js"):imscStyles,x="undefined"==typeof imscUtils?t("./node_modules/imsc/src/main/js/utils.js"):imscUtils,e.fromXML=function(e,s,u){var t,r,n=G.parser(!0,{xmlns:!0}),l=[],c=[],f=[],d=0,g=null,i=(n.onclosetag=function(e){if(l[0]instanceof C)null!==g.head&&null!==g.head.styling&&U(g.head.styling,l[0].styleRefs,l[0].styleAttrs,s),delete l[0].styleRefs;else if(l[0]instanceof E)for(var t in l[0].styles)l[0].styles.hasOwnProperty(t)&&!function e(t,r,n){for(;0<r.styleRefs.length;){var i=r.styleRefs.pop();i in t.styles?(e(t,t.styles[i],n),D(t.styles[i].styleAttrs,r.styleAttrs)):O(n,"Non-existant style id referenced")}}(l[0],l[0].styles[t],s);else if(l[0]instanceof R||l[0]instanceof I){if(1<l[0].contents.length){for(var r=[l[0].contents[0]],n=1;n<l[0].contents.length;n++)l[0].contents[n]instanceof a&&r[r.length-1]instanceof a?r[r.length-1].text+=l[0].contents[n].text:r.push(l[0].contents[n]);l[0].contents=r}l[0]instanceof I&&1===l[0].contents.length&&l[0].contents[0]instanceof a&&(l[0].text=l[0].contents[0].text,delete l[0].contents)}else l[0]instanceof h&&(l[0].node.uri===L.ns_tt&&"metadata"===l[0].node.local?d--:0<d&&u&&"onCloseTag"in u&&u.onCloseTag());f.shift(),c.shift(),l.shift()},n.ontext=function(e){if(void 0!==l[0])if(l[0]instanceof I||l[0]instanceof R){if(l[0]instanceof I){var t=l[0].styleAttrs[F.byName.ruby.qname];if("container"===t||"textContainer"===t||"baseContainer"===t)return}t=new a;t.initFromText(g,l[0],e,c[0],f[0],s),l[0].contents.push(t)}else l[0]instanceof h&&0<d&&u&&"onText"in u&&u.onText(e)},n.onopentag=function(e){var t,r,n=e.attributes["xml:space"],n=(n?f.unshift(n.value):0===f.length?f.unshift("default"):f.unshift(f[0]),e.attributes["xml:lang"]);if(n?c.unshift(n.value):0===c.length?c.unshift(""):c.unshift(c[0]),e.uri===L.ns_tt)if("tt"===e.local)null!==g&&P(s,"Two <tt> elements at ("+this.line+","+this.column+")"),(g=new p).initFromNode(e,c[0],s),l.unshift(g);else if("head"===e.local)l[0]instanceof p||P(s,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),l.unshift(g.head);else if("styling"===e.local)l[0]instanceof y||P(s,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),l.unshift(g.head.styling);else if("style"===e.local)l[0]instanceof E?((r=new _).initFromNode(e,s),r.id?g.head.styling.styles[r.id]=r:O(s,"<style> element missing @id attribute"),l.unshift(r)):l[0]instanceof C?((r=new _).initFromNode(e,s),D(r.styleAttrs,l[0].styleAttrs),l.unshift(r)):P(s,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")");else if("initial"===e.local)if(l[0]instanceof E){for(var i in(t=new v).initFromNode(e,s),t.styleAttrs)t.styleAttrs.hasOwnProperty(i)&&(g.head.styling.initials[i]=t.styleAttrs[i]);l.unshift(t)}else P(s,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")");else"layout"===e.local?(l[0]instanceof y||P(s,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),l.unshift(g.head.layout)):"region"===e.local?(l[0]instanceof T||P(s,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")"),(n=new C).initFromNode(g,e,c[0],s),!n.id||n.id in g.head.layout.regions?O(s,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):g.head.layout.regions[n.id]=n,l.unshift(n)):"body"===e.local?(l[0]instanceof p||P(s,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==g.body&&P(s,"Second <body> element at "+this.line+","+this.column+")"),(r=new S).initFromNode(g,e,c[0],s),g.body=r,l.unshift(r)):"div"===e.local?(l[0]instanceof A||l[0]instanceof S||P(s,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")"),(n=new A).initFromNode(g,l[0],e,c[0],s),(r=n.styleAttrs[F.byName.backgroundImage.qname])&&(n.contents.push(new b(r)),delete n.styleAttrs[F.byName.backgroundImage.qname]),l[0].contents.push(n),l.unshift(n)):"image"===e.local?(l[0]instanceof A||P(s,"Parent of <image> element is not <div> at "+this.line+","+this.column+")"),(r=new b).initFromNode(g,l[0],e,c[0],s),l[0].contents.push(r),l.unshift(r)):"p"===e.local?(l[0]instanceof A||P(s,"Parent of <p> element is not <div> at "+this.line+","+this.column+")"),(n=new R).initFromNode(g,l[0],e,c[0],s),l[0].contents.push(n),l.unshift(n)):"span"===e.local?(l[0]instanceof I||l[0]instanceof R||P(s,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")"),(r=new I).initFromNode(g,l[0],e,c[0],f[0],s),l[0].contents.push(r),l.unshift(r)):"br"===e.local?(l[0]instanceof I||l[0]instanceof R||P(s,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")"),(n=new w).initFromNode(g,l[0],e,c[0],s),l[0].contents.push(n),l.unshift(n)):"set"===e.local?(l[0]instanceof I||l[0]instanceof R||l[0]instanceof A||l[0]instanceof S||l[0]instanceof C||l[0]instanceof w||P(s,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")"),(r=new j).initFromNode(g,l[0],e,s),l[0].sets.push(r),l.unshift(r)):l.unshift(new h(e));else l.unshift(new h(e));if(l[0]instanceof h)if(e.uri===L.ns_tt&&"metadata"===e.local)d++;else if(0<d&&u&&"onOpenTag"in u){var a,o=[];for(a in e.attributes)o[e.attributes[a].uri+" "+e.attributes[a].local]={uri:e.attributes[a].uri,local:e.attributes[a].local,value:e.attributes[a].value};u.onOpenTag(e.uri,e.local,o)}},n.write(e).close(),delete g.head.styling.styles,!1);for(t in g.head.layout.regions)if(g.head.layout.regions.hasOwnProperty(t)){i=!0;break}for(r in i||(n=C.prototype.createDefaultRegion(g.lang),g.head.layout.regions[n.id]=n),g.head.layout.regions)g.head.layout.regions.hasOwnProperty(r)&&m(g,g.head.layout.regions[r],null,null);return g.body&&m(g,g.body,null,null),g.body&&function e(t){if(!("contents"in t))return;var r="styleAttrs"in t?t.styleAttrs[F.byName.ruby.qname]:null;var n="span"===t.kind&&("container"===r||"textContainer"===r||"baseContainer"===r);for(var i=t.contents.length-1;0<=i;i--)!n||"styleAttrs"in t.contents[i]&&F.byName.ruby.qname in t.contents[i].styleAttrs?e(t.contents[i]):delete t.contents[i]}(g.body),g},p.prototype.initFromNode=function(e,t,r){var n=function(e,t){var e=g(e,L.ns_ttp,"cellResolution"),r=15,n=32;null!==e&&(null!==(e=/(\d+) (\d+)/.exec(e))?(n=parseInt(e[1]),r=parseInt(e[2])):M(t,"Malformed cellResolution value (using initial value instead)"));return{w:n,h:r}}(e,r),n=(this.cellLength={h:new x.ComputedLength(0,1/n.h),w:new x.ComputedLength(1/n.w,0)},function(e,t){var r,n=g(e,L.ns_ttp,"frameRate"),i=30;null!==n&&(null!==(r=/(\d+)/.exec(n))?i=parseInt(r[1]):M(t,"Malformed frame rate attribute (using initial value instead)"));var a=g(e,L.ns_ttp,"frameRateMultiplier"),o=1;null!==a&&(null!==(r=/(\d+) (\d+)/.exec(a))?o=parseInt(r[1])/parseInt(r[2]):M(t,"Malformed frame rate multiplier attribute (using initial value instead)"));a=o*i,o=1,i=g(e,L.ns_ttp,"tickRate");null===i?null!==n&&(o=a):null!==(r=/(\d+)/.exec(i))?o=parseInt(r[1]):M(t,"Malformed tick rate attribute (using initial value instead)");return{effectiveFrameRate:a,tickRate:o}}(e,r)),n=(this.effectiveFrameRate=n.effectiveFrameRate,this.tickRate=n.tickRate,this.aspectRatio=function(e,t){var r=g(e,L.ns_ittp,"aspectRatio");null===r&&(r=g(e,L.ns_ttp,"displayAspectRatio"));e=null;{var n;null!==r&&(null!==(r=/(\d+)\s+(\d+)/.exec(r))?(n=parseInt(r[1]),r=parseInt(r[2]),0!==n&&0!==r?e=n/r:O(t,"Illegal aspectRatio values (ignoring)")):O(t,"Malformed aspectRatio attribute (ignoring)"))}return e}(e,r),g(e,L.ns_ttp,"timeBase")),n=(null!==n&&"media"!==n&&P(r,"Unsupported time base"),function(e,t){e=g(e,L.ns_tts,"extent");if(null===e)return null;e=e.split(" ");if(2!==e.length)return M(t,"Malformed extent (ignoring)"),null;var r=x.parseLength(e[0]),e=x.parseLength(e[1]);return e&&r?{h:e,w:r}:(M(t,"Malformed extent values (ignoring)"),null)}(e,r));null===n?this.pxLength={h:null,w:null}:("px"===n.h.unit&&"px"===n.w.unit||P(r,"Extent on TT must be in px or absent"),this.pxLength={h:new x.ComputedLength(0,1/n.h.value),w:new x.ComputedLength(1/n.w.value,0)}),this.dimensions={h:new x.ComputedLength(0,1),w:new x.ComputedLength(1,0)},this.lang=t},p.prototype._registerEvent=function(e){var t;e.end<=e.begin||((t=B(this.events,e.begin)).found||this.events.splice(t.index,0,e.begin),e.end===Number.POSITIVE_INFINITY||(t=B(this.events,e.end)).found||this.events.splice(t.index,0,e.end))},p.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},p.prototype.getMediaTimeEvents=function(){return this.events},_.prototype.initFromNode=function(e,t){this.id=k(e),this.styleAttrs=d(e,t),this.styleRefs=f(e)},v.prototype.initFromNode=function(e,t){for(var r in this.styleAttrs={},e.attributes){var n;e.attributes[r].uri!==L.ns_itts&&e.attributes[r].uri!==L.ns_ebutts&&e.attributes[r].uri!==L.ns_tts||(n=e.attributes[r].uri+" "+e.attributes[r].local,this.styleAttrs[n]=e.attributes[r].value)}},b.prototype.initFromNode=function(e,t,r,n,i){this.src="src"in r.attributes?r.attributes.src.value:null,this.src||O(i,"Invalid image@src attribute"),this.type="type"in r.attributes?r.attributes.type.value:null,this.type||O(i,"Invalid image@type attribute"),s.prototype.initFromNode.call(this,e,t,r,i),c.prototype.initFromNode.call(this,e,t,r,i),u.prototype.initFromNode.call(this,e,t,r,i),o.prototype.initFromNode.call(this,e,t,r,i),this.lang=n},i.prototype.initFromNode=function(e,t,r,n){this.id=k(r)},o.prototype.initFromNode=function(e,t,r,n){this.regionID=(r=r)&&"region"in r.attributes?r.attributes.region.value:""},s.prototype.initFromNode=function(e,t,r,n){this.styleAttrs=d(r,n),null!==e.head&&null!==e.head.styling&&U(e.head.styling,f(r),this.styleAttrs,n)},u.prototype.initFromNode=function(e,t,r,n){this.sets=[]},l.prototype.initFromNode=function(e,t,r,n){this.contents=[]},c.prototype.initFromNode=function(e,t,r,n){e=function(e,t,r){var n=null;t&&"begin"in t.attributes&&null===(n=N(e.tickRate,e.effectiveFrameRate,t.attributes.begin.value))&&M(r,"Malformed begin value "+t.attributes.begin.value+" (using 0)");var i=null;t&&"dur"in t.attributes&&null===(i=N(e.tickRate,e.effectiveFrameRate,t.attributes.dur.value))&&M(r,"Malformed dur value "+t.attributes.dur.value+" (ignoring)");var a=null;t&&"end"in t.attributes&&null===(a=N(e.tickRate,e.effectiveFrameRate,t.attributes.end.value))&&M(r,"Malformed end value (ignoring)");return{explicit_begin:n,explicit_end:a,explicit_dur:i}}(e,r,n);this.explicit_begin=e.explicit_begin,this.explicit_end=e.explicit_end,this.explicit_dur=e.explicit_dur,this.timeContainer=function(e,t){e=e&&"timeContainer"in e.attributes?e.attributes.timeContainer.value:null;return e&&"par"!==e?"seq"===e?"seq":(O(t,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}(r,n)},S.prototype.initFromNode=function(e,t,r,n){s.prototype.initFromNode.call(this,e,null,t,n),c.prototype.initFromNode.call(this,e,null,t,n),u.prototype.initFromNode.call(this,e,null,t,n),o.prototype.initFromNode.call(this,e,null,t,n),l.prototype.initFromNode.call(this,e,null,t,n),this.lang=r},A.prototype.initFromNode=function(e,t,r,n,i){s.prototype.initFromNode.call(this,e,t,r,i),c.prototype.initFromNode.call(this,e,t,r,i),u.prototype.initFromNode.call(this,e,t,r,i),o.prototype.initFromNode.call(this,e,t,r,i),l.prototype.initFromNode.call(this,e,t,r,i),this.lang=n},R.prototype.initFromNode=function(e,t,r,n,i){s.prototype.initFromNode.call(this,e,t,r,i),c.prototype.initFromNode.call(this,e,t,r,i),u.prototype.initFromNode.call(this,e,t,r,i),o.prototype.initFromNode.call(this,e,t,r,i),l.prototype.initFromNode.call(this,e,t,r,i),this.lang=n},I.prototype.initFromNode=function(e,t,r,n,i,a){s.prototype.initFromNode.call(this,e,t,r,a),c.prototype.initFromNode.call(this,e,t,r,a),u.prototype.initFromNode.call(this,e,t,r,a),o.prototype.initFromNode.call(this,e,t,r,a),l.prototype.initFromNode.call(this,e,t,r,a),this.space=i,this.lang=n},a.prototype.initFromText=function(e,t,r,n,i,a){c.prototype.initFromNode.call(this,e,t,null,a),this.text=r,this.space=i,this.lang=n},w.prototype.initFromNode=function(e,t,r,n,i){o.prototype.initFromNode.call(this,e,t,r,i),c.prototype.initFromNode.call(this,e,t,r,i),this.lang=n},C.prototype.createDefaultRegion=function(e){var t=new C;return i.call(t,""),s.call(t,{}),u.call(t,[]),c.call(t,0,Number.POSITIVE_INFINITY,null),this.lang=e,t},C.prototype.initFromNode=function(e,t,r,n){i.prototype.initFromNode.call(this,e,null,t,n),c.prototype.initFromNode.call(this,e,null,t,n),u.prototype.initFromNode.call(this,e,null,t,n),this.styleAttrs=d(t,n),this.styleRefs=f(t),this.lang=r},j.prototype.initFromNode=function(e,t,r,n){c.prototype.initFromNode.call(this,e,t,r,n);var i,a=d(r,n);for(i in this.qname=null,this.value=null,a)if(a.hasOwnProperty(i)){if(this.qname){O(n,"More than one style specified on set");break}this.qname=i,this.value=a[i]}}},"./node_modules/imsc/src/main/js/html.js":function(e,t,r){"undefined"==typeof imscNames&&r("./node_modules/imsc/src/main/js/names.js");var p="undefined"==typeof imscStyles?r("./node_modules/imsc/src/main/js/styles.js"):imscStyles;function y(e){for(var t,r,n=0;n<e.length;n++)for(var i=e[n],a=1;a<i.elements.length;){var o=i.elements[a-1],s=i.elements[a];(function(e,t){if("SPAN"!==e.tagName||"SPAN"!==t.tagName||e._isd_element!==t._isd_element)return;e.textContent+=t.textContent;for(var r=0;r<t.style.length;r++){var n=t.style[r];(0<=n.indexOf("border")||0<=n.indexOf("padding")||0<=n.indexOf("margin"))&&(e.style[n]=t.style[n])}return t.parentElement.removeChild(t),1})(o.node,s.node)?i.elements.splice(a,1):a++}for(var u=[],l=0;l<e.length;l++)for(var c=0;c<e[l].elements.length;c++)(r=function e(t,r,n){{if(t.style.backgroundColor)return n&&!r.includes(t)&&r.push(t),t.style.backgroundColor;if("SPAN"===t.parentElement.nodeName)return e(t.parentElement,r,!0)}return}(t=e[l].elements[c].node,u,!1))&&(t.style.backgroundColor=r);for(var f=0;f<u.length;f++)u[f].style.backgroundColor=""}function E(e,t,r){if(null!==e)for(var n=0;n<e.length;n++){var i,a=e[n].elements.length,o=Math.ceil(t)+"px",s="-"+Math.ceil(t)+"px";0===a||((a=e[n].elements[e[n].start_elem])!==(i=e[n].elements[e[n].end_elem])||0!=(elementBoundingRect=a.node.getBoundingClientRect()).width&&0!=elementBoundingRect.height)&&("lr"===r.ipd?(a.node.style.marginLeft=s,a.node.style.paddingLeft=o):"rl"===r.ipd?(a.node.style.paddingRight=o,a.node.style.marginRight=s):"tb"===r.ipd&&(a.node.style.paddingTop=o,a.node.style.marginTop=s),"lr"===r.ipd?(i.node.style.marginRight=s,i.node.style.paddingRight=o):"rl"===r.ipd?(i.node.style.paddingLeft=o,i.node.style.marginLeft=s):"tb"===r.ipd&&(i.node.style.paddingBottom=o,i.node.style.marginBottom=s))}}function _(e){for(var t=0;t<e.length-1;t++){var r,n=e[t].elements.length;0!==n&&!1===e[t].br&&(r=document.createElement("br"),(n=e[t].elements[n-1].node).parentElement.insertBefore(r,n.nextSibling))}}function v(e,t){for(var r=0;r<e.length;r++)for(var n,i=0;i<e[r].te.length;i++)e[r].te[i].style[o]&&"none"!==e[r].te[i].style[o]||(n="tb"===t.bpd?0===r?"left over":"left under":"rl"===t.bpd?0===r?"right under":"left under":0===r?"left under":"right under",e[r].te[i].style[o]=n)}function T(e,t){for(var r=0;r<e.length;r++)for(var n,i=0;i<e[r].rbc.length;i++)e[r].rbc[i].style[f]||(n=c?0===r?"before":"after":"tb"===t.bpd||"rl"===t.bpd?0===r?"over":"under":0===r?"under":"over",e[r].rbc[i].style[f]=n)}function b(e,t){for(var r=0;r<e.length;r++){for(var n,i,a=document.createElement("ruby"),o=document.createElement("rb"),o=(o.textContent="",a.appendChild(o),t.rubyReserve[1].toUsedLength(t.w,t.h)+"px"),s=("both"===t.rubyReserve[0]||"outside"===t.rubyReserve[0]&&1==e.length?((i=document.createElement("rtc")).style[f]=c?"after":"under",i.textContent="",i.style.fontSize=o,(n=document.createElement("rtc")).style[f]=c?"before":"over",n.textContent="",n.style.fontSize=o,a.appendChild(i),a.appendChild(n)):((i=document.createElement("rtc")).textContent="",i.style.fontSize=o,n="after"===t.rubyReserve[0]||"outside"===t.rubyReserve[0]&&0<r?c?"after":"tb"===t.bpd||"rl"===t.bpd?"under":"over":c?"before":"tb"===t.bpd||"rl"===t.bpd?"over":"under",i.style[f]=n,a.appendChild(i)),null),u=0;u<e[r].rbc.length;u++)if("ruby"===e[r].rbc[u].localName){for(var s=e[r].rbc[u],l=0;l<s.style.length;l++)a.style.setProperty(s.style.item(l),s.style.getPropertyValue(s.style.item(l)));break}(s=s||e[r].elements[0].node).parentElement.insertBefore(a,s)}}function S(e,t,r,n){for(var i=Math.sign(r-t),a=0;a<=e.length;a++){var o,s,u,l=0===a?Math.round(t):a===e.length?Math.round(r):Math.round((e[a-1].after+e[a].before)/2);if(0<a&&e[a-1])for(s=0;s<e[a-1].elements.length;s++)o=i*(l-(u=e[a-1].elements[s]).after)+"px","lr"===n.bpd?u.node.style.paddingRight=o:"rl"===n.bpd?u.node.style.paddingLeft=o:"tb"===n.bpd&&(u.node.style.paddingBottom=o);if(a<e.length)for(s=0;s<e[a].elements.length;s++)o=i*((u=e[a].elements[s]).before-l)+"px","lr"===n.bpd?u.node.style.paddingLeft=o:"rl"===n.bpd?u.node.style.paddingRight=o:"tb"===n.bpd&&(u.node.style.paddingTop=o)}}function A(e,t){this.id=e,this.plist=t}function R(e,t){var r={before:null,after:null,start:null,end:null};return"tb"===t.bpd?(r.before=e.top,r.after=e.bottom,"lr"===t.ipd?(r.start=e.left,r.end=e.right):(r.start=e.right,r.end=e.left)):"lr"===t.bpd?(r.before=e.left,r.after=e.right,r.start=e.top,r.end=e.bottom):"rl"===t.bpd&&(r.before=e.right,r.after=e.left,r.start=e.top,r.end=e.bottom),r}function I(e,t,r,n){if("rt"!==t.localName&&"rtc"!==t.localName){var i,a,o,s,u=t.style.backgroundColor||n;if(0===t.childElementCount)"span"===t.localName||"rb"===t.localName?(n=R(t.getBoundingClientRect(),e),0!==r.length&&(i=n.before,a=n.after,o=r[r.length-1].before,s=r[r.length-1].after,a<s&&o<i||s<=a&&i<=o)?(s=Math.sign(n.after-n.before),a=Math.sign(n.end-n.start),s*(n.before-r[r.length-1].before)<0&&(r[r.length-1].before=n.before),0<s*(n.after-r[r.length-1].after)&&(r[r.length-1].after=n.after),a*(n.start-r[r.length-1].start)<0&&(r[r.length-1].start=n.start,r[r.length-1].start_elem=r[r.length-1].elements.length),0<a*(n.end-r[r.length-1].end)&&(r[r.length-1].end=n.end,r[r.length-1].end_elem=r[r.length-1].elements.length)):r.push({before:n.before,after:n.after,start:n.start,end:n.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1}),r[r.length-1].text+=t.textContent,r[r.length-1].elements.push({node:t,bgcolor:u,before:n.before,after:n.after})):"br"===t.localName&&0!==r.length&&(r[r.length-1].br=!0);else for(var l=t.firstChild;l;)l.nodeType===Node.ELEMENT_NODE&&(I(e,l,r,u),"ruby"===l.localName||"rtc"===l.localName?0<r.length&&r[r.length-1].rbc.push(l):"span"===l.localName&&l.style[d]&&"none"!==l.style[d]&&0<r.length&&r[r.length-1].te.push(l)),l=l.nextSibling}}function w(e,t,r,n){"none"!==n.style&&("auto"===n.style?t.style[d]="filled":t.style[d]=n.style+" "+n.symbol,"before"!==n.position&&"after"!==n.position||(e="tb"===e.bpd?"before"===n.position?"left over":"left under":"rl"===e.bpd?"before"===n.position?"right under":"left under":"before"===n.position?"left under":"right under",t.style[o]=e))}function n(e,t){this.qname=e,this.map=t}"undefined"==typeof imscUtils&&r("./node_modules/imsc/src/main/js/utils.js"),t.render=function(e,t,r,n,i,a,o,s,u){var l,n=n||t.clientHeight,i=i||t.clientWidth,c=(null!==e.aspectRatio&&(i<(l=n*e.aspectRatio)?n=Math.round(i/e.aspectRatio):i=l),document.createElement("div")),f=(c.style.position="relative",c.style.width=i+"px",c.style.height=n+"px",c.style.margin="auto",c.style.top=0,c.style.bottom=0,c.style.left=0,c.style.right=0,c.style.zIndex=0,{h:n,w:i,regionH:null,regionW:null,imgResolver:r,displayForcedOnlyMode:a||!1,isd:e,errorHandler:o,previousISDState:s,enableRollUp:u||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null});if(t.appendChild(c),"contents"in e)for(var d=0;d<e.contents.length;d++)!function e(t,r,n,i){var a;if("region"===n.kind)(a=document.createElement("div")).style.position="absolute";else if("body"===n.kind)a=document.createElement("div");else if("div"===n.kind)a=document.createElement("div");else if("image"===n.kind)a=document.createElement("img"),null!==t.imgResolver&&null!==n.src&&((c=t.imgResolver(n.src,a))&&(a.src=c),a.height=t.regionH,a.width=t.regionW);else if("p"===n.kind)a=document.createElement("p");else if("span"===n.kind)if("container"===n.styleAttrs[p.byName.ruby.qname])a=document.createElement("ruby"),t.ruby=!0;else if("base"===n.styleAttrs[p.byName.ruby.qname])a=document.createElement("rb");else if("text"===n.styleAttrs[p.byName.ruby.qname])a=document.createElement("rt");else if("baseContainer"===n.styleAttrs[p.byName.ruby.qname])a=document.createElement("rbc");else if("textContainer"===n.styleAttrs[p.byName.ruby.qname])a=document.createElement("rtc");else{if("delimiter"===n.styleAttrs[p.byName.ruby.qname])return;a=document.createElement("span")}else"br"===n.kind&&(a=document.createElement("br"));if(!a)return void N(t.errorHandler,"Error processing ISD element kind: "+n.kind);!n.lang||"region"!==n.kind&&n.lang===i.lang||(a.lang=n.lang);r.appendChild(a);a.style.margin="0";"region"===n.kind?"lrtb"===(c=n.styleAttrs[p.byName.writingMode.qname])||"lr"===c?(t.ipd="lr",t.bpd="tb"):"rltb"===c||"rl"===c?(t.ipd="rl",t.bpd="tb"):"tblr"===c?(t.ipd="tb",t.bpd="lr"):"tbrl"!==c&&"tb"!==c||(t.ipd="tb",t.bpd="rl"):"p"===n.kind&&"tb"===t.bpd&&(i=n.styleAttrs[p.byName.direction.qname],t.ipd="ltr"===i?"lr":"rl");for(var o=0;o<C.length;o++){var s=C[o],u=n.styleAttrs[s.qname];void 0!==u&&null!==s.map&&s.map(t,a,n,u)}var l=a;r=n.styleAttrs[p.byName.linePadding.qname];!r||r.isZero()||0<(c=r.toUsedLength(t.w,t.h))&&(i=Math.ceil(c)+"px","tb"===t.bpd?(l.style.paddingLeft=i,l.style.paddingRight=i):(l.style.paddingTop=i,l.style.paddingBottom=i),t.lp=r);var c=n.styleAttrs[p.byName.multiRowAlign.qname];c&&"auto"!==c&&((i=document.createElement("span")).style.display="inline-block",i.style.textAlign=c,a.appendChild(i),l=i,t.mra=c);r=n.styleAttrs[p.byName.rubyReserve.qname];r&&"none"!==r[0]&&(t.rubyReserve=r);n.styleAttrs[p.byName.fillLineGap.qname]&&(t.flg=!0);if("span"===n.kind&&n.text){var f=n.styleAttrs[p.byName.textEmphasis.qname];if(f&&"none"!==f.style&&(t.textEmphasis=!0),p.byName.textCombine.qname in n.styleAttrs&&"all"===n.styleAttrs[p.byName.textCombine.qname])a.textContent=n.text,f&&w(t,a,0,f);else for(var d="",g=0;g<n.text.length;g++){d+=n.text.charAt(g);var m=n.text.charCodeAt(g);(m<55296||56319<m||g===n.text.length-1)&&((m=document.createElement("span")).textContent=d,f&&w(t,m,0,f),a.appendChild(m),d="",m._isd_element=n)}}if("contents"in n)for(var h=0;h<n.contents.length;h++)e(t,l,n.contents[h],n);i=[];"p"===n.kind&&(I(t,l,i,null),t.rubyReserve&&(b(i,t),t.rubyReserve=null),(t.ruby||t.rubyReserve)&&(T(i,t),t.ruby=null),t.textEmphasis&&(v(i,t),t.textEmphasis=null),t.mra&&(_(i),t.mra=null),t.lp&&(E(i,t.lp.toUsedLength(t.w,t.h),t),t.lp=null),y(i),t.flg&&(c=R(l.getBoundingClientRect(),t),S(i,c.before,c.after,t),t.flg=null));"region"===n.kind&&"tb"===t.bpd&&t.enableRollUp&&0<n.contents.length&&"after"===n.styleAttrs[p.byName.displayAlign.qname]&&(I(t,l,i,null),r=""===n.id?"_":n.id,c=new A(r,i),t.currentISDState[c.id]=c,t.previousISDState&&c.id in t.previousISDState&&0<t.previousISDState[c.id].plist.length&&1<c.plist.length&&c.plist[c.plist.length-2].text===t.previousISDState[c.id].plist[t.previousISDState[c.id].plist.length-1].text&&(r=a.firstElementChild,i=c.plist[c.plist.length-1].after-c.plist[c.plist.length-1].before,r.style.bottom="-"+i+"px",r.style.transition="transform 0.4s",r.style.position="relative",r.style.transform="translateY(-"+i+"px)"))}(f,c,e.contents[d],e);return f.currentISDState};for(var C=[new n("http://www.w3.org/ns/ttml#styling backgroundColor",function(e,t,r,n){0!==n[3]&&(t.style.backgroundColor="rgba("+n[0].toString()+","+n[1].toString()+","+n[2].toString()+","+(n[3]/255).toString()+")")}),new n("http://www.w3.org/ns/ttml#styling color",function(e,t,r,n){t.style.color="rgba("+n[0].toString()+","+n[1].toString()+","+n[2].toString()+","+(n[3]/255).toString()+")"}),new n("http://www.w3.org/ns/ttml#styling direction",function(e,t,r,n){t.style.direction=n}),new n("http://www.w3.org/ns/ttml#styling display",function(e,t,r,n){}),new n("http://www.w3.org/ns/ttml#styling displayAlign",function(e,t,r,n){t.style.display="flex",t.style.flexDirection="column","before"===n?t.style.justifyContent="flex-start":"center"===n?t.style.justifyContent="center":"after"===n&&(t.style.justifyContent="flex-end")}),new n("http://www.w3.org/ns/ttml#styling extent",function(e,t,r,n){e.regionH=n.h.toUsedLength(e.w,e.h),e.regionW=n.w.toUsedLength(e.w,e.h);var n=0,i=0,r=r.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];r&&(n=r[0].toUsedLength(e.w,e.h)+r[2].toUsedLength(e.w,e.h),i=r[1].toUsedLength(e.w,e.h)+r[3].toUsedLength(e.w,e.h)),t.style.height=e.regionH-n+"px",t.style.width=e.regionW-i+"px"}),new n("http://www.w3.org/ns/ttml#styling fontFamily",function(e,t,r,n){for(var i=[],a=0;a<n.length;a++)"monospaceSerif"===n[a]?(i.push("Courier New"),i.push('"Liberation Mono"'),i.push("Courier"),i.push("monospace")):"proportionalSansSerif"===n[a]?(i.push("Arial"),i.push("Helvetica"),i.push('"Liberation Sans"'),i.push("sans-serif")):"monospace"===n[a]?i.push("monospace"):"sansSerif"===n[a]?i.push("sans-serif"):"serif"===n[a]?i.push("serif"):"monospaceSansSerif"===n[a]?(i.push("Consolas"),i.push("monospace")):"proportionalSerif"===n[a]?i.push("serif"):i.push(n[a]);if(0<i.length){for(var o=[i[0]],s=1;s<i.length;s++)-1==o.indexOf(i[s])&&o.push(i[s]);i=o}t.style.fontFamily=i.join(",")}),new n("http://www.w3.org/ns/ttml#styling shear",function(e,t,r,n){0!==n&&(n=-.9*n,"tb"===e.bpd?t.style.transform="skewX("+n+"deg)":t.style.transform="skewY("+n+"deg)")}),new n("http://www.w3.org/ns/ttml#styling fontSize",function(e,t,r,n){t.style.fontSize=n.toUsedLength(e.w,e.h)+"px"}),new n("http://www.w3.org/ns/ttml#styling fontStyle",function(e,t,r,n){t.style.fontStyle=n}),new n("http://www.w3.org/ns/ttml#styling fontWeight",function(e,t,r,n){t.style.fontWeight=n}),new n("http://www.w3.org/ns/ttml#styling lineHeight",function(e,t,r,n){t.style.lineHeight="normal"===n?"normal":n.toUsedLength(e.w,e.h)+"px"}),new n("http://www.w3.org/ns/ttml#styling opacity",function(e,t,r,n){t.style.opacity=n}),new n("http://www.w3.org/ns/ttml#styling origin",function(e,t,r,n){t.style.top=n.h.toUsedLength(e.w,e.h)+"px",t.style.left=n.w.toUsedLength(e.w,e.h)+"px"}),new n("http://www.w3.org/ns/ttml#styling overflow",function(e,t,r,n){t.style.overflow=n}),new n("http://www.w3.org/ns/ttml#styling padding",function(e,t,r,n){var i=[];i[0]=n[0].toUsedLength(e.w,e.h)+"px",i[1]=n[3].toUsedLength(e.w,e.h)+"px",i[2]=n[2].toUsedLength(e.w,e.h)+"px",i[3]=n[1].toUsedLength(e.w,e.h)+"px",t.style.padding=i.join(" ")}),new n("http://www.w3.org/ns/ttml#styling position",function(e,t,r,n){t.style.top=n.h.toUsedLength(e.w,e.h)+"px",t.style.left=n.w.toUsedLength(e.w,e.h)+"px"}),new n("http://www.w3.org/ns/ttml#styling rubyAlign",function(e,t,r,n){t.style.rubyAlign="spaceAround"===n?"space-around":"center"}),new n("http://www.w3.org/ns/ttml#styling rubyPosition",function(e,t,r,n){"before"!==n&&"after"!==n||(e=c?n:"tb"===e.bpd||"rl"===e.bpd?"before"===n?"over":"under":"before"===n?"under":"over",t.parentElement.style[f]=e)}),new n("http://www.w3.org/ns/ttml#styling showBackground",null),new n("http://www.w3.org/ns/ttml#styling textAlign",function(e,t,r,n){e="start"===n?"rl"===e.ipd?"right":"left":"end"===n?"rl"===e.ipd?"left":"right":n;t.style.textAlign=e}),new n("http://www.w3.org/ns/ttml#styling textDecoration",function(e,t,r,n){t.style.textDecoration=n.join(" ").replace("lineThrough","line-through")}),new n("http://www.w3.org/ns/ttml#styling textOutline",function(e,t,r,n){}),new n("http://www.w3.org/ns/ttml#styling textShadow",function(e,t,r,n){r=r.styleAttrs[p.byName.textOutline.qname];if("none"===n&&"none"===r)t.style.textShadow="";else{var i=[];if("none"!==r&&(r="rgba("+r.color[0].toString()+","+r.color[1].toString()+","+r.color[2].toString()+","+(r.color[3]/255).toString()+")",i.push("1px 1px 1px "+r),i.push("-1px 1px 1px "+r),i.push("1px -1px 1px "+r),i.push("-1px -1px 1px "+r)),"none"!==n)for(var a=0;a<n.length;a++)i.push(n[a].x_off.toUsedLength(e.w,e.h)+"px "+n[a].y_off.toUsedLength(e.w,e.h)+"px "+n[a].b_radius.toUsedLength(e.w,e.h)+"px rgba("+n[a].color[0].toString()+","+n[a].color[1].toString()+","+n[a].color[2].toString()+","+(n[a].color[3]/255).toString()+")");t.style.textShadow=i.join(",")}}),new n("http://www.w3.org/ns/ttml#styling textCombine",function(e,t,r,n){t.style.textCombineUpright=n}),new n("http://www.w3.org/ns/ttml#styling textEmphasis",function(e,t,r,n){}),new n("http://www.w3.org/ns/ttml#styling unicodeBidi",function(e,t,r,n){n="bidiOverride"===n?"bidi-override":n;t.style.unicodeBidi=n}),new n("http://www.w3.org/ns/ttml#styling visibility",function(e,t,r,n){t.style.visibility=n}),new n("http://www.w3.org/ns/ttml#styling wrapOption",function(e,t,r,n){"wrap"===n?"preserve"===r.space?t.style.whiteSpace="pre-wrap":t.style.whiteSpace="normal":"preserve"===r.space?t.style.whiteSpace="pre":t.style.whiteSpace="noWrap"}),new n("http://www.w3.org/ns/ttml#styling writingMode",function(e,t,r,n){"lrtb"===n||"lr"===n||"rltb"===n||"rl"===n?t.style.writingMode="horizontal-tb":"tblr"===n?t.style.writingMode="vertical-lr":"tbrl"!==n&&"tb"!==n||(t.style.writingMode="vertical-rl")}),new n("http://www.w3.org/ns/ttml#styling zIndex",function(e,t,r,n){t.style.zIndex=n}),new n("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(e,t,r,n){e.displayForcedOnlyMode&&!1===n&&(t.style.visibility="hidden")})],i={},a=0;a<C.length;a++)i[C[a].qname]=C[a];var c="webkitRubyPosition"in window.getComputedStyle(document.documentElement),f=c?"webkitRubyPosition":"rubyPosition",d="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",o="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition";function N(e,t){if(e&&e.error&&e.error(t))throw t}},"./node_modules/imsc/src/main/js/isd.js":function(e,t,r){function O(e){for(var t,r,n,i,a=0;a<e.length;)"br"===(r=e[a]).kind||"preserve"===r.space?a++:(t=r.text.replace(/[\t\r\n ]+/g," "),/^[ ]/.test(t)&&(0===a||"br"===(n=e[a-1]).kind||/[\r\n\t ]$/.test(n.text))&&(t=t.substring(1)),0===(r.text=t).length?e.splice(a,1):a++);for(a=0;a<e.length;a++)"br"===(r=e[a]).kind||"preserve"===r.space?a++:/[ ]$/.test(r.text)&&(a===e.length-1||("br"===(i=e[a+1]).kind||"preserve"===i.space&&/^[\r\n]/.test(i.text)))&&(r.text=r.text.slice(0,-1))}function P(e,t){if("contents"in e)for(var r=0;r<e.contents.length;r++){var n=e.contents[r],i=n.styleAttrs[j.byName.ruby.qname];("span"!==n.kind||"textContainer"!==i&&"text"!==i)&&("contents"in n?P(n,t):("span"===n.kind&&0!==n.text.length||"br"===n.kind)&&t.push(n))}}function L(e){if("br"===e.kind)return!1;if("text"in e)return 0===e.text.length;if("contents"in e){for(var t=e.contents.length;t--;)L(e.contents[t])&&e.contents.splice(t,1);return 0===e.contents.length}}function p(e){this.contents=[],this.aspectRatio=e.aspectRatio,this.lang=e.lang}function F(e){for(var t in this.kind=e.kind||"region",this.lang=e.lang,e.id&&(this.id=e.id),this.styleAttrs={},e.styleAttrs)e.styleAttrs.hasOwnProperty(t)&&(this.styleAttrs[t]=e.styleAttrs[t]);"src"in e&&(this.src=e.src),"type"in e&&(this.type=e.type),"text"in e?this.text=e.text:("region"===this.kind||"contents"in e)&&(this.contents=[]),"space"in e&&(this.space=e.space)}function x(e,t){if(e&&e.error&&e.error(t))throw t}var j,k,U;t=t,"undefined"==typeof imscNames&&r("./node_modules/imsc/src/main/js/names.js"),j="undefined"==typeof imscStyles?r("./node_modules/imsc/src/main/js/styles.js"):imscStyles,k="undefined"==typeof imscUtils?r("./node_modules/imsc/src/main/js/utils.js"):imscUtils,t.generateISD=function(e,t,r){var n,i,a,o,s,u,l=new p(e),c={},f={},d={},g=e.head.styling.initials[j.byName.showBackground.qname],m=e.head.styling.initials[j.byName.backgroundColor.qname];for(n in e.head.layout.regions)e.head.layout.regions.hasOwnProperty(n)&&(a=(i=e.head.layout.regions[n]).styleAttrs[j.byName.showBackground.qname]||g,o=i.styleAttrs[j.byName.backgroundColor.qname]||m,d[i.id]=("always"===a||void 0===a)&&void 0!==o&&!(t<i.begin||t>=i.end));function h(t,e){if(e.contents){var r,n={};for(r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n.contents=[],e.contents.filter(function(e){return!(t<e.begin||t>=e.end)}).forEach(function(e){e=h(t,e);e.regionID&&(d[e.regionID]=!0),null!==e&&n.contents.push(e)}),n}return e}for(s in e.body&&e.body.regionID&&(d[e.body.regionID]=!0),f=null!==e.body?h(t,e.body):null,void 0!==d[""]&&(d[""]=!0),d)!d[s]||null!==(u=function e(t,r,n,i,a,o,s,u,l){if(r<s.begin||r>=s.end)return null;var c="regionID"in s&&""!==s.regionID?s.regionID:o;if(null!==a&&c!==n.id&&(!("contents"in s)||"contents"in s&&0===s.contents.length||""!==c))return null;var f=new F(s);if("sets"in s)for(var d=0;d<s.sets.length;d++)r<s.sets[d].begin||r>=s.sets[d].end||(f.styleAttrs[s.sets[d].qname]=s.sets[d].value);var g={};for(var m in f.styleAttrs)f.styleAttrs.hasOwnProperty(m)&&(g[m]=!0,"region"!==f.kind||m!==j.byName.writingMode.qname||j.byName.direction.qname in f.styleAttrs||("lrtb"===(m=f.styleAttrs[m])||"lr"===m?f.styleAttrs[j.byName.direction.qname]="ltr":"rltb"!==m&&"rl"!==m||(f.styleAttrs[j.byName.direction.qname]="rtl")));if(null!==a)for(var h=0;h<j.all.length;h++){var p,y,E,_=j.all[h];_.qname===j.byName.textDecoration.qname?(y=a.styleAttrs[_.qname],E=f.styleAttrs[_.qname],p=[],void 0===E?p=y:-1===E.indexOf("none")?((-1===E.indexOf("noUnderline")&&-1!==y.indexOf("underline")||-1!==E.indexOf("underline"))&&p.push("underline"),(-1===E.indexOf("noLineThrough")&&-1!==y.indexOf("lineThrough")||-1!==E.indexOf("lineThrough"))&&p.push("lineThrough"),(-1===E.indexOf("noOverline")&&-1!==y.indexOf("overline")||-1!==E.indexOf("overline"))&&p.push("overline")):p.push("none"),f.styleAttrs[_.qname]=p):_.qname!==j.byName.fontSize.qname||_.qname in f.styleAttrs||"span"!==f.kind||"textContainer"!==f.styleAttrs[j.byName.ruby.qname]?_.qname!==j.byName.fontSize.qname||_.qname in f.styleAttrs||"span"!==f.kind||"text"!==f.styleAttrs[j.byName.ruby.qname]?_.inherit&&_.qname in a.styleAttrs&&!(_.qname in f.styleAttrs)&&(f.styleAttrs[_.qname]=a.styleAttrs[_.qname]):(y=a.styleAttrs[j.byName.fontSize.qname],"textContainer"===a.styleAttrs[j.byName.ruby.qname]?f.styleAttrs[_.qname]=y:f.styleAttrs[_.qname]=new k.ComputedLength(.5*y.rw,.5*y.rh)):(E=a.styleAttrs[j.byName.fontSize.qname],f.styleAttrs[_.qname]=new k.ComputedLength(.5*E.rw,.5*E.rh))}for(var v=0;v<j.all.length;v++){var T,b=j.all[v];b.qname in f.styleAttrs||b.qname===j.byName.position.qname&&j.byName.origin.qname in f.styleAttrs||b.qname===j.byName.origin.qname&&j.byName.position.qname in f.styleAttrs||null!==(T=t.head.styling.initials[b.qname]||b.initial)&&("region"===f.kind||!1===b.inherit&&null!==T)&&(null!==(T=b.parse(T))?(f.styleAttrs[b.qname]=T,g[b.qname]=!0):x(u,"Invalid initial value for '"+b.qname+"' on element '"+f.kind))}for(var S=0;S<j.all.length;S++){var A,R=j.all[S];R.qname in g&&null!==R.compute&&(null!==(A=R.compute(t,a,f,f.styleAttrs[R.qname],l))?f.styleAttrs[R.qname]=A:(f.styleAttrs[R.qname]=R.compute(t,a,f,R.parse(R.initial),l),x(u,"Style '"+R.qname+"' on element '"+f.kind+"' cannot be computed")))}if("none"===f.styleAttrs[j.byName.display.qname])return null;var I=null;null===a?I=null===i?[]:[i]:"contents"in s&&(I=s.contents);for(var w=0;null!==I&&w<I.length;w++){var C=e(t,r,n,i,f,c,I[w],u,l);null!==C&&f.contents.push(C.element)}for(var N in f.styleAttrs){var D,M;f.styleAttrs.hasOwnProperty(N)&&(D=!1,"span"===f.kind&&(M=f.styleAttrs[j.byName.ruby.qname],D=(D=(D=("container"===M||"textContainer"===M||"baseContainer"===M)&&-1!==U.indexOf(N))||"container"!==M&&N===j.byName.rubyAlign.qname)||!("textContainer"===M||"text"===M)&&N===j.byName.rubyPosition.qname),D||"applies"in(M=j.byQName[N])&&(D=-1===M.applies.indexOf(f.kind)),D&&delete f.styleAttrs[N])}o=f.styleAttrs[j.byName.ruby.qname];"p"!==f.kind&&("span"!==f.kind||"textContainer"!==o&&"text"!==o)||(P(f,o=[]),O(o),L(f));if("div"===f.kind&&j.byName.backgroundImage.qname in f.styleAttrs||"br"===f.kind||"image"===f.kind||"contents"in f&&0<f.contents.length||"span"===f.kind&&null!==f.text||"region"===f.kind&&"always"===f.styleAttrs[j.byName.showBackground.qname])return{region_id:c,element:f};return null}(e,t,e.head.layout.regions[s],f,null,"",e.head.layout.regions[s],r,c))&&l.contents.push(u.element);return l},U=[j.byName.color.qname,j.byName.textCombine.qname,j.byName.textDecoration.qname,j.byName.textEmphasis.qname,j.byName.textOutline.qname,j.byName.textShadow.qname]},"./node_modules/imsc/src/main/js/main.js":function(e,t,r){t.generateISD=r("./node_modules/imsc/src/main/js/isd.js").generateISD,t.fromXML=r("./node_modules/imsc/src/main/js/doc.js").fromXML,t.renderHTML=r("./node_modules/imsc/src/main/js/html.js").render},"./node_modules/imsc/src/main/js/names.js":function(e,t){(t=t).ns_tt="http://www.w3.org/ns/ttml",t.ns_tts="http://www.w3.org/ns/ttml#styling",t.ns_ttp="http://www.w3.org/ns/ttml#parameter",t.ns_xml="http://www.w3.org/XML/1998/namespace",t.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",t.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",t.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",t.ns_ebutts="urn:ebu:tt:style"},"./node_modules/imsc/src/main/js/styles.js":function(e,t,r){var n,i,u=t,t="undefined"==typeof imscNames?r("./node_modules/imsc/src/main/js/names.js"):imscNames,l="undefined"==typeof imscUtils?r("./node_modules/imsc/src/main/js/utils.js"):imscUtils;function a(e,t,r,n,i,a,o,s){this.name=t,this.ns=e,this.qname=e+" "+t,this.inherit=i,this.animatable=a,this.initial=r,this.applies=n,this.parse=o,this.compute=s}for(n in u.all=[new a(t.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,l.parseColor,null),new a(t.ns_tts,"color","white",["span"],!0,!0,l.parseColor,null),new a(t.ns_tts,"direction","ltr",["p","span"],!0,!0,function(e){return e},null),new a(t.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(e){return e},null),new a(t.ns_tts,"displayAlign","before",["region"],!1,!0,function(e){return e},null),new a(t.ns_tts,"extent","auto",["tt","region"],!1,!0,function(e){if("auto"===e)return e;e=e.split(" ");if(2!==e.length)return null;var t=l.parseLength(e[0]),e=l.parseLength(e[1]);return e&&t?{h:e,w:t}:null},function(e,t,r,n,i){var a,o;if("auto"===n)a=new l.ComputedLength(0,1);else if(null===(a=l.toComputedLength(n.h.value,n.h.unit,null,e.dimensions.h,null,e.pxLength.h)))return null;if("auto"===n)o=new l.ComputedLength(1,0);else if(null===(o=l.toComputedLength(n.w.value,n.w.unit,null,e.dimensions.w,null,e.pxLength.w)))return null;return{h:a,w:o}}),new a(t.ns_tts,"fontFamily","default",["span","p"],!0,!0,function(e){for(var t=e.split(","),r=[],n=0;n<t.length;n++)"'"!==t[n].charAt(0)&&'"'!==t[n].charAt(0)&&"default"===t[n]?r.push("monospaceSerif"):r.push(t[n]);return r},null),new a(t.ns_tts,"shear","0%",["p"],!0,!0,l.parseLength,function(e,t,r,n){return"%"!==n.unit?null:100<Math.abs(n.value)?100*Math.sign(n.value):n.value}),new a(t.ns_tts,"fontSize","1c",["span","p"],!0,!0,l.parseLength,function(e,t,r,n,i){return l.toComputedLength(n.value,n.unit,null!==t?t.styleAttrs[u.byName.fontSize.qname]:e.cellLength.h,null!==t?t.styleAttrs[u.byName.fontSize.qname]:e.cellLength.h,e.cellLength.h,e.pxLength.h)}),new a(t.ns_tts,"fontStyle","normal",["span","p"],!0,!0,function(e){return e},null),new a(t.ns_tts,"fontWeight","normal",["span","p"],!0,!0,function(e){return e},null),new a(t.ns_tts,"lineHeight","normal",["p"],!0,!0,function(e){return"normal"===e?e:l.parseLength(e)},function(e,t,r,n,i){var a;if("normal"===n)a=n;else if(null===(a=l.toComputedLength(n.value,n.unit,r.styleAttrs[u.byName.fontSize.qname],r.styleAttrs[u.byName.fontSize.qname],e.cellLength.h,e.pxLength.h)))return null;return a}),new a(t.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new a(t.ns_tts,"origin","auto",["region"],!1,!0,function(e){if("auto"===e)return e;e=e.split(" ");if(2!==e.length)return null;var t=l.parseLength(e[0]),e=l.parseLength(e[1]);return e&&t?{h:e,w:t}:null},function(e,t,r,n,i){var a,o;if("auto"===n)a=new l.ComputedLength(0,0);else if(null===(a=l.toComputedLength(n.h.value,n.h.unit,null,e.dimensions.h,null,e.pxLength.h)))return null;if("auto"===n)o=new l.ComputedLength(0,0);else if(null===(o=l.toComputedLength(n.w.value,n.w.unit,null,e.dimensions.w,null,e.pxLength.w)))return null;return{h:a,w:o}}),new a(t.ns_tts,"overflow","hidden",["region"],!1,!0,function(e){return e},null),new a(t.ns_tts,"padding","0px",["region"],!1,!0,function(e){var t=e.split(" ");if(4<t.length)return null;for(var r=[],n=0;n<t.length;n++){var i=l.parseLength(t[n]);if(!i)return null;r.push(i)}return r},function(e,t,r,n,i){var a;if(1===n.length)a=[n[0],n[0],n[0],n[0]];else if(2===n.length)a=[n[0],n[1],n[0],n[1]];else if(3===n.length)a=[n[0],n[1],n[2],n[1]];else{if(4!==n.length)return null;a=[n[0],n[1],n[2],n[3]]}n=r.styleAttrs[u.byName.writingMode.qname];if("lrtb"===n||"lr"===n)a=[a[0],a[3],a[2],a[1]];else if("rltb"===n||"rl"===n)a=[a[0],a[1],a[2],a[3]];else if("tblr"===n)a=[a[3],a[0],a[1],a[2]];else{if("tbrl"!==n&&"tb"!==n)return null;a=[a[3],a[2],a[1],a[0]]}for(var o=[],s=0;s<a.length;s++)if(0===a[s].value)o[s]=new l.ComputedLength(0,0);else if(o[s]=l.toComputedLength(a[s].value,a[s].unit,r.styleAttrs[u.byName.fontSize.qname],0===s||2===s?r.styleAttrs[u.byName.extent.qname].h:r.styleAttrs[u.byName.extent.qname].w,0===s||2===s?e.cellLength.h:e.cellLength.w,0===s||2===s?e.pxLength.h:e.pxLength.w),null===o[s])return null;return o}),new a(t.ns_tts,"position","top left",["region"],!1,!0,function(e){return l.parsePosition(e)},function(e,t,r,n){var i,a=l.toComputedLength(n.v.offset.value,n.v.offset.unit,null,new l.ComputedLength(-r.styleAttrs[u.byName.extent.qname].h.rw,e.dimensions.h.rh-r.styleAttrs[u.byName.extent.qname].h.rh),null,e.pxLength.h);return null===a?null:("bottom"===n.v.edge&&(a=new l.ComputedLength(-a.rw-r.styleAttrs[u.byName.extent.qname].h.rw,e.dimensions.h.rh-a.rh-r.styleAttrs[u.byName.extent.qname].h.rh)),i=l.toComputedLength(n.h.offset.value,n.h.offset.unit,null,new l.ComputedLength(e.dimensions.w.rw-r.styleAttrs[u.byName.extent.qname].w.rw,-r.styleAttrs[u.byName.extent.qname].w.rh),null,e.pxLength.w),null===a?null:{h:a,w:i="right"===n.h.edge?new l.ComputedLength(e.dimensions.w.rw-i.rw-r.styleAttrs[u.byName.extent.qname].w.rw,-i.rh-r.styleAttrs[u.byName.extent.qname].w.rh):i})}),new a(t.ns_tts,"ruby","none",["span"],!1,!0,function(e){return e},null),new a(t.ns_tts,"rubyAlign","center",["span"],!0,!0,function(e){return"center"!==e&&"spaceAround"!==e?null:e},null),new a(t.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(e){return e},null),new a(t.ns_tts,"rubyReserve","none",["p"],!0,!0,function(e){var e=e.split(" "),t=[null,null];if(0===e.length||2<e.length)return null;if("none"!==e[0]&&"both"!==e[0]&&"after"!==e[0]&&"before"!==e[0]&&"outside"!==e[0])return null;if(t[0]=e[0],2===e.length&&"none"!==e[0]){e=l.parseLength(e[1]);if(!e)return null;t[1]=e}return t},function(e,t,r,n,i){if("none"===n[0])return n;var a=null;return null===(a=null===n[1]?new l.ComputedLength(.5*r.styleAttrs[u.byName.fontSize.qname].rw,.5*r.styleAttrs[u.byName.fontSize.qname].rh):l.toComputedLength(n[1].value,n[1].unit,r.styleAttrs[u.byName.fontSize.qname],r.styleAttrs[u.byName.fontSize.qname],e.cellLength.h,e.pxLength.h))?null:[n[0],a]}),new a(t.ns_tts,"showBackground","always",["region"],!1,!0,function(e){return e},null),new a(t.ns_tts,"textAlign","start",["p"],!0,!0,function(e){return e},function(e,t,r,n,i){return"left"===n?"start":"right"===n?"end":n}),new a(t.ns_tts,"textCombine","none",["span"],!0,!0,function(e){return"none"===e||"all"===e?e:null},null),new a(t.ns_tts,"textDecoration","none",["span"],!0,!0,function(e){return e.split(" ")},null),new a(t.ns_tts,"textEmphasis","none",["span"],!0,!0,function(e){for(var t=e.split(" "),r={style:null,symbol:null,color:null,position:null},n=0;n<t.length;n++)if("none"===t[n]||"auto"===t[n])r.style=t[n];else if("filled"===t[n]||"open"===t[n])r.style=t[n];else if("circle"===t[n]||"dot"===t[n]||"sesame"===t[n])r.symbol=t[n];else if("current"===t[n])r.color=t[n];else if("outside"===t[n]||"before"===t[n]||"after"===t[n])r.position=t[n];else if(r.color=l.parseColor(t[n]),null===r.color)return null;return null==r.style&&null==r.symbol?r.style="auto":(r.symbol=r.symbol||"circle",r.style=r.style||"filled"),r.position=r.position||"outside",r.color=r.color||"current",r},null),new a(t.ns_tts,"textOutline","none",["span"],!0,!0,function(e){if("none"===e)return e;var t={},e=e.split(" ");if(0===e.length||2<e.length)return null;var r=l.parseColor(e[0]);if(null!==(t.color=r)&&e.shift(),1!==e.length)return null;r=l.parseLength(e[0]);return r?(t.thickness=r,t):null},function(e,t,r,n,i){if("none"===n)return n;var a={};return null===n.color?a.color=r.styleAttrs[u.byName.color.qname]:a.color=n.color,a.thickness=l.toComputedLength(n.thickness.value,n.thickness.unit,r.styleAttrs[u.byName.fontSize.qname],r.styleAttrs[u.byName.fontSize.qname],e.cellLength.h,e.pxLength.h),null===a.thickness?null:a}),new a(t.ns_tts,"textShadow","none",["span"],!0,!0,l.parseTextShadow,function(e,t,r,n){if("none"===n)return n;for(var i=[],a=0;a<n.length;a++){var o={};if(o.x_off=l.toComputedLength(n[a][0].value,n[a][0].unit,null,r.styleAttrs[u.byName.fontSize.qname],null,e.pxLength.w),null===o.x_off)return null;if(o.y_off=l.toComputedLength(n[a][1].value,n[a][1].unit,null,r.styleAttrs[u.byName.fontSize.qname],null,e.pxLength.h),null===o.y_off)return null;if(null===n[a][2])o.b_radius=0;else if(o.b_radius=l.toComputedLength(n[a][2].value,n[a][2].unit,null,r.styleAttrs[u.byName.fontSize.qname],null,e.pxLength.h),null===o.b_radius)return null;null===n[a][3]?o.color=r.styleAttrs[u.byName.color.qname]:o.color=n[a][3],i.push(o)}return i}),new a(t.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(e){return e},null),new a(t.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(e){return e},null),new a(t.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(e){return e},null),new a(t.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(e){return e},null),new a(t.ns_tts,"zIndex","auto",["region"],!1,!0,function(e){var t;return"auto"===e?t=e:(t=parseInt(e),isNaN(t)&&(t=null)),t},null),new a(t.ns_ebutts,"linePadding","0c",["p"],!0,!1,l.parseLength,function(e,t,r,n,i){return l.toComputedLength(n.value,n.unit,null,null,e.cellLength.w,null)}),new a(t.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(e){return e},null),new a(t.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(e){return e},null),new a(t.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(e){return"true"===e},null),new a(t.ns_itts,"fillLineGap","false",["p"],!0,!0,function(e){return"true"===e},null)],u.byQName={},u.all)u.byQName[u.all[n].qname]=u.all[n];for(i in u.byName={},u.all)u.byName[u.all[i].name]=u.all[i]},"./node_modules/imsc/src/main/js/utils.js":function(e,t){var l,n,i,a,o,r;n=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,i=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,a=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,o={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]},(l=t).parseColor=function(e){var t=null,r=o[e.toLowerCase()];return void 0!==r?t=r:null!==(r=n.exec(e))?t=[parseInt(r[1],16),parseInt(r[2],16),parseInt(r[3],16),void 0!==r[4]?parseInt(r[4],16):255]:null!==(r=i.exec(e))?t=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3]),255]:null!==(r=a.exec(e))&&(t=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3]),parseInt(r[4])]),t},r=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/,l.parseLength=function(e){var t=null;return t=null!==(e=r.exec(e))?{value:parseFloat(e[1]),unit:e[2]}:t},l.parseTextShadow=function(e){for(var t=e.match(/([^\(,\)]|\([^\)]+\))+/g),r=[],n=0;n<t.length;n++){var i=t[n].split(" ");if(1===i.length&&"none"===i[0])return"none";if(1<i.length&&i.length<5){var a=[null,null,null,null],o=l.parseLength(i.shift());if(null===o)return null;if(a[0]=o,null===(o=l.parseLength(i.shift())))return null;if(a[1]=o,0===i.length)r.push(a);else if(null!==(o=l.parseLength(i[0]))&&(a[2]=o,i.shift()),0===i.length)r.push(a);else{o=l.parseColor(i[0]);if(null===o)return null;a[3]=o,r.push(a)}}}return r},l.parsePosition=function(e){function t(e){return"center"===e||"left"===e||"top"===e||"bottom"===e||"right"===e}var r=e.split(" ");if(4<r.length)return null;for(var n=0;n<r.length;n++)if(!t(r[n])){var i=l.parseLength(r[n]);if(null===i)return null;r[n]=i}for(var a={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}},o=0;o<r.length;){var s=r[o++];if(t(s)){var u={value:0,unit:"%"};2!==r.length&&o<r.length&&!t(r[o])&&(u=r[o++]),"right"===s?(a.h.edge=s,a.h.offset=u):"bottom"===s?(a.v.edge=s,a.v.offset=u):"left"===s?a.h.offset=u:"top"===s&&(a.v.offset=u)}else{if(1!==r.length&&2!==r.length)return null;1===o?a.h.offset=s:a.v.offset=s}}return a},l.ComputedLength=function(e,t){this.rw=e,this.rh=t},l.ComputedLength.prototype.toUsedLength=function(e,t){return e*this.rw+t*this.rh},l.ComputedLength.prototype.isZero=function(){return 0===this.rw&&0===this.rh},l.toComputedLength=function(e,t,r,n,i,a){return"%"===t&&n?new l.ComputedLength(n.rw*e/100,n.rh*e/100):"em"===t&&r?new l.ComputedLength(r.rw*e,r.rh*e):"c"===t&&i?new l.ComputedLength(e*i.rw,e*i.rh):"px"===t&&a?new l.ComputedLength(e*a.rw,e*a.rh):"rh"===t?new l.ComputedLength(0,e/100):"rw"===t?new l.ComputedLength(e/100,0):null}},"./node_modules/is-alphabetical/index.js":function(e){"use strict";e.exports=function(e){e="string"==typeof e?e.charCodeAt(0):e;return 97<=e&&e<=122||65<=e&&e<=90}},"./node_modules/is-alphanumerical/index.js":function(e,t,r){"use strict";var n=r("./node_modules/is-alphabetical/index.js"),i=r("./node_modules/is-decimal/index.js");e.exports=function(e){return n(e)||i(e)}},"./node_modules/is-decimal/index.js":function(e){"use strict";e.exports=function(e){e="string"==typeof e?e.charCodeAt(0):e;return 48<=e&&e<=57}},"./node_modules/path-browserify/index.js":function(e){"use strict";function d(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function a(e,t){for(var r,n="",i=0,a=-1,o=0,s=0;s<=e.length;++s){if(s<e.length)r=e.charCodeAt(s);else{if(47===r)break;r=47}if(47===r){if(a!==s-1&&1!==o)if(a!==s-1&&2===o){if(n.length<2||2!==i||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(2<n.length){var u=n.lastIndexOf("/");if(u!==n.length-1){i=-1===u?(n="",0):(n=n.slice(0,u)).length-1-n.lastIndexOf("/"),a=s,o=0;continue}}else if(2===n.length||1===n.length){n="",a=s,o=i=0;continue}t&&(0<n.length?n+="/..":n="..",i=2)}else 0<n.length?n+="/"+e.slice(a+1,s):n=e.slice(a+1,s),i=s-a-1;a=s,o=0}else 46===r&&-1!==o?++o:o=-1}return n}var g={resolve:function(){for(var e,t="",r=!1,n=arguments.length-1;-1<=n&&!r;n--){var i=0<=n?arguments[n]:e=void 0===e?process.cwd():e;d(i),0!==i.length&&(t=i+"/"+t,r=47===i.charCodeAt(0))}return t=a(t,!r),r?0<t.length?"/"+t:"/":0<t.length?t:"."},normalize:function(e){if(d(e),0===e.length)return".";var t=47===e.charCodeAt(0),r=47===e.charCodeAt(e.length-1);return 0<(e=0!==(e=a(e,!t)).length||t?e:".").length&&r&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return d(e),0<e.length&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,t=0;t<arguments.length;++t){var r=arguments[t];d(r),0<r.length&&(void 0===e?e=r:e+="/"+r)}return void 0===e?".":g.normalize(e)},relative:function(e,t){if(d(e),d(t),e===t)return"";if((e=g.resolve(e))===(t=g.resolve(t)))return"";for(var r=1;r<e.length&&47===e.charCodeAt(r);++r);for(var n=e.length,i=n-r,a=1;a<t.length&&47===t.charCodeAt(a);++a);for(var o=t.length-a,s=i<o?i:o,u=-1,l=0;l<=s;++l){if(l===s){if(s<o){if(47===t.charCodeAt(a+l))return t.slice(a+l+1);if(0===l)return t.slice(a+l)}else s<i&&(47===e.charCodeAt(r+l)?u=l:0===l&&(u=0));break}var c=e.charCodeAt(r+l);if(c!==t.charCodeAt(a+l))break;47===c&&(u=l)}for(var f="",l=r+u+1;l<=n;++l)l!==n&&47!==e.charCodeAt(l)||(0===f.length?f+="..":f+="/..");return 0<f.length?f+t.slice(a+u):(47===t.charCodeAt(a+=u)&&++a,t.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(d(e),0===e.length)return".";for(var t=47===e.charCodeAt(0),r=-1,n=!0,i=e.length-1;1<=i;--i)if(47===e.charCodeAt(i)){if(!n){r=i;break}}else n=!1;return-1===r?t?"/":".":t&&1===r?"//":e.slice(0,r)},basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');d(e);var r=0,n=-1,i=!0;if(void 0!==t&&0<t.length&&t.length<=e.length){if(t.length===e.length&&t===e)return"";for(var a=t.length-1,o=-1,s=e.length-1;0<=s;--s){var u=e.charCodeAt(s);if(47===u){if(!i){r=s+1;break}}else-1===o&&(i=!1,o=s+1),0<=a&&(u===t.charCodeAt(a)?-1==--a&&(n=s):(a=-1,n=o))}return r===n?n=o:-1===n&&(n=e.length),e.slice(r,n)}for(s=e.length-1;0<=s;--s)if(47===e.charCodeAt(s)){if(!i){r=s+1;break}}else-1===n&&(i=!1,n=s+1);return-1===n?"":e.slice(r,n)},extname:function(e){d(e);for(var t=-1,r=0,n=-1,i=!0,a=0,o=e.length-1;0<=o;--o){var s=e.charCodeAt(o);if(47===s){if(i)continue;r=o+1;break}-1===n&&(i=!1,n=o+1),46===s?-1===t?t=o:1!==a&&(a=1):-1!==t&&(a=-1)}return-1===t||-1===n||0===a||1===a&&t===n-1&&t===r+1?"":e.slice(t,n)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return t="/",r=(e=e).dir||e.root,n=e.base||(e.name||"")+(e.ext||""),r?r===e.root?r+n:r+t+n:n;var t,r,n},parse:function(e){d(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;for(var r,n=47===e.charCodeAt(0),i=n?(t.root="/",1):0,a=-1,o=0,s=-1,u=!0,l=e.length-1,c=0;i<=l;--l){if(47===(r=e.charCodeAt(l))){if(u)continue;o=l+1;break}-1===s&&(u=!1,s=l+1),46===r?-1===a?a=l:1!==c&&(c=1):-1!==a&&(c=-1)}return-1===a||-1===s||0===c||1===c&&a===s-1&&a===o+1?-1!==s&&(t.base=t.name=0===o&&n?e.slice(1,s):e.slice(o,s)):(0===o&&n?(t.name=e.slice(1,a),t.base=e.slice(1,s)):(t.name=e.slice(o,a),t.base=e.slice(o,s)),t.ext=e.slice(a,s)),0<o?t.dir=e.slice(0,o-1):n&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};g.posix=g,e.exports=g},"./node_modules/safe-buffer/index.js":function(e,t,r){var n=r("./node_modules/buffer/index.js"),i=n.Buffer;function a(e,t){for(var r in e)t[r]=e[r]}function o(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(a(n,t),t.Buffer=o),a(i,o),o.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},o.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");e=i(e);return void 0!==t?"string"==typeof r?e.fill(t,r):e.fill(t):e.fill(0),e},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},"./node_modules/sax/lib/sax.js":function(x,e,r){var s=e;s.parser=function(e,t){return new o(e,t)},s.SAXParser=o,s.SAXStream=a,s.createStream=function(e,t){return new a(e,t)},s.MAX_BUFFER_LENGTH=65536;var n,u=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function o(e,t){if(!(this instanceof o))return new o(e,t);for(var r=this,n=r,i=0,a=u.length;i<a;i++)n[u[i]]="";r.q=r.c="",r.bufferCheckPosition=s.MAX_BUFFER_LENGTH,r.opt=t||{},r.opt.lowercase=r.opt.lowercase||r.opt.lowercasetags,r.looseCase=r.opt.lowercase?"toLowerCase":"toUpperCase",r.tags=[],r.closed=r.closedRoot=r.sawRoot=!1,r.tag=r.error=null,r.strict=!!e,r.noscript=!(!e&&!r.opt.noscript),r.state=T.BEGIN,r.strictEntities=r.opt.strictEntities,r.ENTITIES=r.strictEntities?Object.create(s.XML_ENTITIES):Object.create(s.ENTITIES),r.attribList=[],r.opt.xmlns&&(r.ns=Object.create(U)),r.trackPosition=!1!==r.opt.position,r.trackPosition&&(r.position=r.line=r.column=0),b(r,"onready")}s.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t,r=[];for(t in e)e.hasOwnProperty(t)&&r.push(t);return r}),o.prototype={end:function(){w(this)},write:function(e){var t=this;if(this.error)throw this.error;if(t.closed)return I(t,"Cannot write after close. Assign an onready handler.");if(null===e)return w(t);"object"==typeof e&&(e=e.toString());var r,n,i=0,a="";for(;;){if(a=L(e,i++),!(t.c=a))break;switch(t.trackPosition&&(t.position++,"\n"===a?(t.line++,t.column=0):t.column++),t.state){case T.BEGIN:if(t.state=T.BEGIN_WHITESPACE,"\ufeff"===a)continue;P(t,a);continue;case T.BEGIN_WHITESPACE:P(t,a);continue;case T.TEXT:if(t.sawRoot&&!t.closedRoot){for(var o=i-1;a&&"<"!==a&&"&"!==a;)(a=L(e,i++))&&t.trackPosition&&(t.position++,"\n"===a?(t.line++,t.column=0):t.column++);t.textNode+=e.substring(o,i-1)}"<"!==a||t.sawRoot&&t.closedRoot&&!t.strict?(!y(g,a)||t.sawRoot&&!t.closedRoot||C(t,"Text data outside of root node."),"&"===a?t.state=T.TEXT_ENTITY:t.textNode+=a):(t.state=T.OPEN_WAKA,t.startTagPosition=t.position);continue;case T.SCRIPT:"<"===a?t.state=T.SCRIPT_ENDING:t.script+=a;continue;case T.SCRIPT_ENDING:"/"===a?t.state=T.CLOSE_TAG:(t.script+="<"+a,t.state=T.SCRIPT);continue;case T.OPEN_WAKA:"!"===a?(t.state=T.SGML_DECL,t.sgmlDecl=""):p(g,a)||(p(m,a)?(t.state=T.OPEN_TAG,t.tagName=a):"/"===a?(t.state=T.CLOSE_TAG,t.tagName=""):"?"===a?(t.state=T.PROC_INST,t.procInstName=t.procInstBody=""):(C(t,"Unencoded <"),t.startTagPosition+1<t.position&&(o=t.position-t.startTagPosition,a=new Array(o).join(" ")+a),t.textNode+="<"+a,t.state=T.TEXT));continue;case T.SGML_DECL:(t.sgmlDecl+a).toUpperCase()===j?(S(t,"onopencdata"),t.state=T.CDATA,t.sgmlDecl="",t.cdata=""):t.sgmlDecl+a==="--"?(t.state=T.COMMENT,t.comment="",t.sgmlDecl=""):(t.sgmlDecl+a).toUpperCase()===k?(t.state=T.DOCTYPE,(t.doctype||t.sawRoot)&&C(t,"Inappropriately located doctype declaration"),t.doctype="",t.sgmlDecl=""):">"===a?(S(t,"onsgmldeclaration",t.sgmlDecl),t.sgmlDecl="",t.state=T.TEXT):(p(l,a)&&(t.state=T.SGML_DECL_QUOTED),t.sgmlDecl+=a);continue;case T.SGML_DECL_QUOTED:a===t.q&&(t.state=T.SGML_DECL,t.q=""),t.sgmlDecl+=a;continue;case T.DOCTYPE:">"===a?(t.state=T.TEXT,S(t,"ondoctype",t.doctype),t.doctype=!0):(t.doctype+=a,"["===a?t.state=T.DOCTYPE_DTD:p(l,a)&&(t.state=T.DOCTYPE_QUOTED,t.q=a));continue;case T.DOCTYPE_QUOTED:t.doctype+=a,a===t.q&&(t.q="",t.state=T.DOCTYPE);continue;case T.DOCTYPE_DTD:t.doctype+=a,"]"===a?t.state=T.DOCTYPE:p(l,a)&&(t.state=T.DOCTYPE_DTD_QUOTED,t.q=a);continue;case T.DOCTYPE_DTD_QUOTED:t.doctype+=a,a===t.q&&(t.state=T.DOCTYPE_DTD,t.q="");continue;case T.COMMENT:"-"===a?t.state=T.COMMENT_ENDING:t.comment+=a;continue;case T.COMMENT_ENDING:"-"===a?(t.state=T.COMMENT_ENDED,t.comment=R(t.opt,t.comment),t.comment&&S(t,"oncomment",t.comment),t.comment=""):(t.comment+="-"+a,t.state=T.COMMENT);continue;case T.COMMENT_ENDED:">"!==a?(C(t,"Malformed comment"),t.comment+="--"+a,t.state=T.COMMENT):t.state=T.TEXT;continue;case T.CDATA:"]"===a?t.state=T.CDATA_ENDING:t.cdata+=a;continue;case T.CDATA_ENDING:"]"===a?t.state=T.CDATA_ENDING_2:(t.cdata+="]"+a,t.state=T.CDATA);continue;case T.CDATA_ENDING_2:">"===a?(t.cdata&&S(t,"oncdata",t.cdata),S(t,"onclosecdata"),t.cdata="",t.state=T.TEXT):"]"===a?t.cdata+="]":(t.cdata+="]]"+a,t.state=T.CDATA);continue;case T.PROC_INST:"?"===a?t.state=T.PROC_INST_ENDING:p(g,a)?t.state=T.PROC_INST_BODY:t.procInstName+=a;continue;case T.PROC_INST_BODY:if(!t.procInstBody&&p(g,a))continue;"?"===a?t.state=T.PROC_INST_ENDING:t.procInstBody+=a;continue;case T.PROC_INST_ENDING:">"===a?(S(t,"onprocessinginstruction",{name:t.procInstName,body:t.procInstBody}),t.procInstName=t.procInstBody="",t.state=T.TEXT):(t.procInstBody+="?"+a,t.state=T.PROC_INST_BODY);continue;case T.OPEN_TAG:p(h,a)?t.tagName+=a:(function(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,r=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(r.ns=t.ns);e.attribList.length=0,S(e,"onopentagstart",r)}(t),">"===a?M(t):"/"===a?t.state=T.OPEN_TAG_SLASH:(y(g,a)&&C(t,"Invalid character in tag name"),t.state=T.ATTRIB));continue;case T.OPEN_TAG_SLASH:">"===a?(M(t,!0),O(t)):(C(t,"Forward-slash in opening tag not followed by >"),t.state=T.ATTRIB);continue;case T.ATTRIB:if(p(g,a))continue;">"===a?M(t):"/"===a?t.state=T.OPEN_TAG_SLASH:p(m,a)?(t.attribName=a,t.attribValue="",t.state=T.ATTRIB_NAME):C(t,"Invalid attribute name");continue;case T.ATTRIB_NAME:"="===a?t.state=T.ATTRIB_VALUE:">"===a?(C(t,"Attribute without value"),t.attribValue=t.attribName,D(t),M(t)):p(g,a)?t.state=T.ATTRIB_NAME_SAW_WHITE:p(h,a)?t.attribName+=a:C(t,"Invalid attribute name");continue;case T.ATTRIB_NAME_SAW_WHITE:if("="===a)t.state=T.ATTRIB_VALUE;else{if(p(g,a))continue;C(t,"Attribute without value"),t.tag.attributes[t.attribName]="",t.attribValue="",S(t,"onattribute",{name:t.attribName,value:""}),t.attribName="",">"===a?M(t):p(m,a)?(t.attribName=a,t.state=T.ATTRIB_NAME):(C(t,"Invalid attribute name"),t.state=T.ATTRIB)}continue;case T.ATTRIB_VALUE:if(p(g,a))continue;p(l,a)?(t.q=a,t.state=T.ATTRIB_VALUE_QUOTED):(C(t,"Unquoted attribute value"),t.state=T.ATTRIB_VALUE_UNQUOTED,t.attribValue=a);continue;case T.ATTRIB_VALUE_QUOTED:if(a!==t.q){"&"===a?t.state=T.ATTRIB_VALUE_ENTITY_Q:t.attribValue+=a;continue}D(t),t.q="",t.state=T.ATTRIB_VALUE_CLOSED;continue;case T.ATTRIB_VALUE_CLOSED:p(g,a)?t.state=T.ATTRIB:">"===a?M(t):"/"===a?t.state=T.OPEN_TAG_SLASH:p(m,a)?(C(t,"No whitespace between attributes"),t.attribName=a,t.attribValue="",t.state=T.ATTRIB_NAME):C(t,"Invalid attribute name");continue;case T.ATTRIB_VALUE_UNQUOTED:if(y(c,a)){"&"===a?t.state=T.ATTRIB_VALUE_ENTITY_U:t.attribValue+=a;continue}D(t),">"===a?M(t):t.state=T.ATTRIB;continue;case T.CLOSE_TAG:if(t.tagName)">"===a?O(t):p(h,a)?t.tagName+=a:t.script?(t.script+="</"+t.tagName,t.tagName="",t.state=T.SCRIPT):(y(g,a)&&C(t,"Invalid tagname in closing tag"),t.state=T.CLOSE_TAG_SAW_WHITE);else{if(p(g,a))continue;y(m,a)?t.script?(t.script+="</"+a,t.state=T.SCRIPT):C(t,"Invalid tagname in closing tag."):t.tagName=a}continue;case T.CLOSE_TAG_SAW_WHITE:if(p(g,a))continue;">"===a?O(t):C(t,"Invalid characters in closing tag");continue;case T.TEXT_ENTITY:case T.ATTRIB_VALUE_ENTITY_Q:case T.ATTRIB_VALUE_ENTITY_U:switch(t.state){case T.TEXT_ENTITY:r=T.TEXT,n="textNode";break;case T.ATTRIB_VALUE_ENTITY_Q:r=T.ATTRIB_VALUE_QUOTED,n="attribValue";break;case T.ATTRIB_VALUE_ENTITY_U:r=T.ATTRIB_VALUE_UNQUOTED,n="attribValue"}";"===a?(t[n]+=function(e){var t,r=e.entity,n=r.toLowerCase(),i="";if(e.ENTITIES[r])return e.ENTITIES[r];if(e.ENTITIES[n])return e.ENTITIES[n];"#"===(r=n).charAt(0)&&(i="x"===r.charAt(1)?(r=r.slice(2),(t=parseInt(r,16)).toString(16)):(r=r.slice(1),(t=parseInt(r,10)).toString(10)));return r=r.replace(/^0+/,""),i.toLowerCase()===r?String.fromCodePoint(t):(C(e,"Invalid character entity"),"&"+e.entity+";")}(t),t.entity="",t.state=r):p(t.entity.length?G:B,a)?t.entity+=a:(C(t,"Invalid character in entity name"),t[n]+="&"+t.entity+a,t.entity="",t.state=r);continue;default:throw new Error(t,"Unknown state: "+t.state)}}t.position>=t.bufferCheckPosition&&!function(e){for(var t=Math.max(s.MAX_BUFFER_LENGTH,10),r=0,n=0,i=u.length;n<i;n++){var a=e[u[n]].length;if(t<a)switch(u[n]){case"textNode":A(e);break;case"cdata":S(e,"oncdata",e.cdata),e.cdata="";break;case"script":S(e,"onscript",e.script),e.script="";break;default:I(e,"Max buffer length exceeded: "+u[n])}r=Math.max(r,a)}var o=s.MAX_BUFFER_LENGTH-r;e.bufferCheckPosition=o+e.position}(t);return t},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var e;A(e=this),""!==e.cdata&&(S(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(S(e,"onscript",e.script),e.script="")}};try{n=r("./node_modules/stream-browserify/index.js").Stream}catch(e){n=function(){}}var i=s.EVENTS.filter(function(e){return"error"!==e&&"end"!==e});function a(e,t){if(!(this instanceof a))return new a(e,t);n.apply(this),this._parser=new o(e,t),this.writable=!0,this.readable=!0;var r=this;this._parser.onend=function(){r.emit("end")},this._parser.onerror=function(e){r.emit("error",e),r._parser.error=null},this._decoder=null,i.forEach(function(t){Object.defineProperty(r,"on"+t,{get:function(){return r._parser["on"+t]},set:function(e){if(!e)return r.removeAllListeners(t),r._parser["on"+t]=e;r.on(t,e)},enumerable:!0,configurable:!1})})}(a.prototype=Object.create(n.prototype,{constructor:{value:a}})).write=function(e){var t;return"function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(e)&&(this._decoder||(t=r("./node_modules/string_decoder/lib/string_decoder.js").StringDecoder,this._decoder=new t("utf8")),e=this._decoder.write(e)),this._parser.write(e.toString()),this.emit("data",e),!0},a.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},a.prototype.on=function(t,e){var r=this;return r._parser["on"+t]||-1===i.indexOf(t)||(r._parser["on"+t]=function(){var e=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);e.splice(0,0,t),r.emit.apply(r,e)}),n.prototype.on.call(r,t,e)};var l="'\"",c=(g="\r\n\t ")+">",j="[CDATA[",k="DOCTYPE",f="http://www.w3.org/XML/1998/namespace",d="http://www.w3.org/2000/xmlns/",U={xml:f,xmlns:d},g=t(g),m=(t("0124356789"),t("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"),/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/),h=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,B=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,G=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function t(e){return e.split("").reduce(function(e,t){return e[t]=!0,e},{})}function p(e,t){return"[object RegExp]"===Object.prototype.toString.call(e)?t.match(e):e[t]}function y(e,t){return!p(e,t)}var E,_,v,l=t(l),c=t(c),T=0;for(E in s.STATE={BEGIN:T++,BEGIN_WHITESPACE:T++,TEXT:T++,TEXT_ENTITY:T++,OPEN_WAKA:T++,SGML_DECL:T++,SGML_DECL_QUOTED:T++,DOCTYPE:T++,DOCTYPE_QUOTED:T++,DOCTYPE_DTD:T++,DOCTYPE_DTD_QUOTED:T++,COMMENT_STARTING:T++,COMMENT:T++,COMMENT_ENDING:T++,COMMENT_ENDED:T++,CDATA:T++,CDATA_ENDING:T++,CDATA_ENDING_2:T++,PROC_INST:T++,PROC_INST_BODY:T++,PROC_INST_ENDING:T++,OPEN_TAG:T++,OPEN_TAG_SLASH:T++,ATTRIB:T++,ATTRIB_NAME:T++,ATTRIB_NAME_SAW_WHITE:T++,ATTRIB_VALUE:T++,ATTRIB_VALUE_QUOTED:T++,ATTRIB_VALUE_CLOSED:T++,ATTRIB_VALUE_UNQUOTED:T++,ATTRIB_VALUE_ENTITY_Q:T++,ATTRIB_VALUE_ENTITY_U:T++,CLOSE_TAG:T++,CLOSE_TAG_SAW_WHITE:T++,SCRIPT:T++,SCRIPT_ENDING:T++},s.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},s.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(s.ENTITIES).forEach(function(e){var t=s.ENTITIES[e],t="number"==typeof t?String.fromCharCode(t):t;s.ENTITIES[e]=t}),s.STATE)s.STATE[s.STATE[E]]=E;function b(e,t,r){e[t]&&e[t](r)}function S(e,t,r){e.textNode&&A(e),b(e,t,r)}function A(e){e.textNode=R(e.opt,e.textNode),e.textNode&&b(e,"ontext",e.textNode),e.textNode=""}function R(e,t){return e.trim&&(t=t.trim()),t=e.normalize?t.replace(/\s+/g," "):t}function I(e,t){return A(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,b(e,"onerror",t),e}function w(e){return e.sawRoot&&!e.closedRoot&&C(e,"Unclosed root tag"),e.state!==T.BEGIN&&e.state!==T.BEGIN_WHITESPACE&&e.state!==T.TEXT&&I(e,"Unexpected end"),A(e),e.c="",e.closed=!0,b(e,"onend"),o.call(e,e.strict,e.opt),e}function C(e,t){if("object"!=typeof e||!(e instanceof o))throw new Error("bad call to strictFail");e.strict&&I(e,t)}function N(e,t){var r=e.indexOf(":")<0?["",e]:e.split(":"),n=r[0],r=r[1];return t&&"xmlns"===e&&(n="xmlns",r=""),{prefix:n,local:r}}function D(e){var t,r,n;e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName)||(e.opt.xmlns?(r=(t=N(e.attribName,!0)).prefix,t=t.local,"xmlns"===r&&("xml"===t&&e.attribValue!==f?C(e,"xml: prefix must be bound to "+f+"\nActual: "+e.attribValue):"xmlns"===t&&e.attribValue!==d?C(e,"xmlns: prefix must be bound to "+d+"\nActual: "+e.attribValue):(r=e.tag,n=e.tags[e.tags.length-1]||e,r.ns===n.ns&&(r.ns=Object.create(n.ns)),r.ns[t]=e.attribValue)),e.attribList.push([e.attribName,e.attribValue])):(e.tag.attributes[e.attribName]=e.attribValue,S(e,"onattribute",{name:e.attribName,value:e.attribValue}))),e.attribName=e.attribValue=""}function M(t,e){if(t.opt.xmlns){var r=t.tag,n=N(t.tagName),n=(r.prefix=n.prefix,r.local=n.local,r.uri=r.ns[n.prefix]||"",r.prefix&&!r.uri&&(C(t,"Unbound namespace prefix: "+JSON.stringify(t.tagName)),r.uri=n.prefix),t.tags[t.tags.length-1]||t);r.ns&&n.ns!==r.ns&&Object.keys(r.ns).forEach(function(e){S(t,"onopennamespace",{prefix:e,uri:r.ns[e]})});for(var i=0,a=t.attribList.length;i<a;i++){var o=t.attribList[i],s=o[0],o=o[1],u=N(s,!0),l=u.prefix,u=u.local,c=""!==l&&r.ns[l]||"",o={name:s,value:o,prefix:l,local:u,uri:c};l&&"xmlns"!==l&&!c&&(C(t,"Unbound namespace prefix: "+JSON.stringify(l)),o.uri=l),t.tag.attributes[s]=o,S(t,"onattribute",o)}t.attribList.length=0}t.tag.isSelfClosing=!!e,t.sawRoot=!0,t.tags.push(t.tag),S(t,"onopentag",t.tag),e||(t.noscript||"script"!==t.tagName.toLowerCase()?t.state=T.TEXT:t.state=T.SCRIPT,t.tag=null,t.tagName=""),t.attribName=t.attribValue="",t.attribList.length=0}function O(r){if(!r.tagName)return C(r,"Weird empty close tag."),r.textNode+="</>",void(r.state=T.TEXT);if(r.script){if("script"!==r.tagName)return r.script+="</"+r.tagName+">",r.tagName="",void(r.state=T.SCRIPT);S(r,"onscript",r.script),r.script=""}for(var e=r.tags.length,t=r.tagName,n=t=r.strict?t:t[r.looseCase]();e--&&r.tags[e].name!==n;)C(r,"Unexpected close tag");if(e<0)return C(r,"Unmatched closing tag: "+r.tagName),r.textNode+="</"+r.tagName+">",void(r.state=T.TEXT);r.tagName=t;for(var i=r.tags.length;i-- >e;){var a,o=r.tag=r.tags.pop(),s=(r.tagName=r.tag.name,S(r,"onclosetag",r.tagName),{});for(a in o.ns)s[a]=o.ns[a];var u=r.tags[r.tags.length-1]||r;r.opt.xmlns&&o.ns!==u.ns&&Object.keys(o.ns).forEach(function(e){var t=o.ns[e];S(r,"onclosenamespace",{prefix:e,uri:t})})}0===e&&(r.closedRoot=!0),r.tagName=r.attribValue=r.attribName="",r.attribList.length=0,r.state=T.TEXT}function P(e,t){"<"===t?(e.state=T.OPEN_WAKA,e.startTagPosition=e.position):y(g,t)&&(C(e,"Non-whitespace before first tag."),e.textNode=t,e.state=T.TEXT)}function L(e,t){var r="";return r=t<e.length?e.charAt(t):r}function F(){var e=[],t=-1,r=arguments.length;if(!r)return"";for(var n="";++t<r;){var i=Number(arguments[t]);if(!isFinite(i)||i<0||1114111<i||v(i)!==i)throw RangeError("Invalid code point: "+i);i<=65535?e.push(i):(i-=65536,e.push(55296+(i>>10),i%1024+56320)),(t+1===r||16384<e.length)&&(n+=_.apply(null,e),e.length=0)}return n}T=s.STATE,String.fromCodePoint||(_=String.fromCharCode,v=Math.floor,Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:F,configurable:!0,writable:!0}):String.fromCodePoint=F)},"./node_modules/stream-browserify/index.js":function(e,t,r){e.exports=n;var c=r("./node_modules/events/events.js").EventEmitter;function n(){c.call(this)}r("./node_modules/stream-browserify/node_modules/inherits/inherits_browser.js")(n,c),n.Readable=r("./node_modules/stream-browserify/node_modules/readable-stream/lib/_stream_readable.js"),n.Writable=r("./node_modules/stream-browserify/node_modules/readable-stream/lib/_stream_writable.js"),n.Duplex=r("./node_modules/stream-browserify/node_modules/readable-stream/lib/_stream_duplex.js"),n.Transform=r("./node_modules/stream-browserify/node_modules/readable-stream/lib/_stream_transform.js"),n.PassThrough=r("./node_modules/stream-browserify/node_modules/readable-stream/lib/_stream_passthrough.js"),n.finished=r("./node_modules/stream-browserify/node_modules/readable-stream/lib/internal/streams/end-of-stream.js"),n.pipeline=r("./node_modules/stream-browserify/node_modules/readable-stream/lib/internal/streams/pipeline.js"),(n.Stream=n).prototype.pipe=function(t,e){var r=this;function n(e){t.writable&&!1===t.write(e)&&r.pause&&r.pause()}function i(){r.readable&&r.resume&&r.resume()}r.on("data",n),t.on("drain",i),t._isStdio||e&&!1===e.end||(r.on("end",o),r.on("close",s));var a=!1;function o(){a||(a=!0,t.end())}function s(){a||(a=!0,"function"==typeof t.destroy&&t.destroy())}function u(e){if(l(),0===c.listenerCount(this,"error"))throw e}function l(){r.removeListener("data",n),t.removeListener("drain",i),r.removeListener("end",o),r.removeListener("close",s),r.removeListener("error",u),t.removeListener("error",u),r.removeListener("end",l),r.removeListener("close",l),t.removeListener("close",l)}return r.on("error",u),t.on("error",u),r.on("end",l),r.on("close",l),t.on("close",l),t.emit("pipe",r),t}},"./node_modules/stream-browserify/node_modules/inherits/inherits_browser.js":function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){var r;t&&(e.super_=t,(r=function(){}).prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e)}},"./node_modules/stream-browserify/node_modules/readable-stream/errors-browser.js":function(e){"use strict";var n={};function t(e,i,t){var r=function(n){var e,t;function r(e,t,r){return n.call(this,(e=e,t=t,r=r,"string"==typeof i?i:i(e,t,r)))||this}return t=n,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t,r}(t=t||Error);r.prototype.name=t.name,r.prototype.code=e,n[e]=r}function u(e,t){var r;return Array.isArray(e)?(r=e.length,e=e.map(function(e){return String(e)}),2<r?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])):"of ".concat(t," ").concat(String(e))}t("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),t("ERR_INVALID_ARG_TYPE",function(e,t,r){var n,i,a,o,s;return"string"==typeof t&&(o="not ",t.substr(!a||a<0?0:+a,o.length)===o)?(n="must not be",t=t.replace(/^not /,"")):n="must be",a=e,o=" argument",(void 0===s||s>a.length)&&(s=a.length),a=a.substring(s-o.length,s)===o?"The ".concat(e," ").concat(n," ").concat(u(t,"type")):(s=(i="number"!=typeof i?0:i)+(a=".").length>(s=e).length||-1===s.indexOf(a,i)?"argument":"property",'The "'.concat(e,'" ').concat(s," ").concat(n," ").concat(u(t,"type"))),a+=". Received type ".concat(typeof r)},TypeError),t("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),t("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),t("ERR_STREAM_PREMATURE_CLOSE","Premature close"),t("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),t("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),t("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),t("ERR_STREAM_WRITE_AFTER_END","write after end"),t("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),t("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),t("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.codes=n},"./node_modules/stream-browserify/node_modules/readable-stream/lib/_stream_duplex.js":function(e,t,r){"use strict";var n=Object.keys||function(e){var t,r=[];for(t in e)r.push(t);return r},i=(e.exports=l,r("./node_modules/stream-browserify/node_modules/readable-stream/lib/_stream_readable.js")),a=r("./node_modules/stream-browserify/node_modules/readable-stream/lib/_stream_writable.js");r("./node_modules/stream-browserify/node_modules/inherits/inherits_browser.js")(l,i);for(var o=n(a.prototype),s=0;s<o.length;s++){var u=o[s];l.prototype[u]||(l.prototype[u]=a.prototype[u])}function l(e){if(!(this instanceof l))return new l(e);i.call(this,e),a.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||process.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},"./node_modules/stream-browserify/node_modules/readable-stream/lib/_stream_passthrough.js":function(e,t,r){"use strict";e.exports=i;var n=r("./node_modules/stream-browserify/node_modules/readable-stream/lib/_stream_transform.js");function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}r("./node_modules/stream-browserify/node_modules/inherits/inherits_browser.js")(i,n),i.prototype._transform=function(e,t,r){r(null,e)}},"./node_modules/stream-browserify/node_modules/readable-stream/lib/_stream_readable.js":function(e,x,i){"use strict";function m(e,t){return e.listeners(t).length}(e.exports=T).ReadableState=v,i("./node_modules/events/events.js").EventEmitter;var n,a=i("./node_modules/stream-browserify/node_modules/readable-stream/lib/internal/streams/stream-browser.js"),c=i("./node_modules/buffer/index.js").Buffer,f=i.g.Uint8Array||function(){};var o,t,r,e=i("?19e6"),h=e&&e.debuglog?e.debuglog("stream"):function(){},s=i("./node_modules/stream-browserify/node_modules/readable-stream/lib/internal/streams/buffer_list.js"),e=i("./node_modules/stream-browserify/node_modules/readable-stream/lib/internal/streams/destroy.js"),u=i("./node_modules/stream-browserify/node_modules/readable-stream/lib/internal/streams/state.js").getHighWaterMark,l=i("./node_modules/stream-browserify/node_modules/readable-stream/errors-browser.js").codes,d=l.ERR_INVALID_ARG_TYPE,g=l.ERR_STREAM_PUSH_AFTER_EOF,p=l.ERR_METHOD_NOT_IMPLEMENTED,y=l.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,E=(i("./node_modules/stream-browserify/node_modules/inherits/inherits_browser.js")(T,a),e.errorOrDestroy),_=["error","close","destroy","pause","resume"];function v(e,t,r){n=n||i("./node_modules/stream-browserify/node_modules/readable-stream/lib/_stream_duplex.js"),"boolean"!=typeof r&&(r=t instanceof n),this.objectMode=!!(e=e||{}).objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=u(this,e,"readableHighWaterMark",r),this.buffer=new s,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(o=o||i("./node_modules/string_decoder/lib/string_decoder.js").StringDecoder,this.decoder=new o(e.encoding),this.encoding=e.encoding)}function T(e){if(n=n||i("./node_modules/stream-browserify/node_modules/readable-stream/lib/_stream_duplex.js"),!(this instanceof T))return new T(e);var t=this instanceof n;this._readableState=new v(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),a.call(this)}function b(e,t,r,n,i){h("readableAddChunk",t);var a,o,s,u,l=e._readableState;if(null===t)l.reading=!1,o=e,s=l,h("onEofChunk"),s.ended||(s.decoder&&(u=s.decoder.end())&&u.length&&(s.buffer.push(u),s.length+=s.objectMode?1:u.length),s.ended=!0,s.sync?I(o):(s.needReadable=!1,s.emittedReadable||(s.emittedReadable=!0,w(o))));else if(a=i?a:function(e,t){var r;!function(e){return c.isBuffer(e)||e instanceof f}(t)&&"string"!=typeof t&&void 0!==t&&!e.objectMode&&(r=new d("chunk",["string","Buffer","Uint8Array"],t));return r}(l,t))E(e,a);else if(l.objectMode||t&&0<t.length)if("string"==typeof t||l.objectMode||Object.getPrototypeOf(t)===c.prototype||(u=t,t=c.from(u)),n)l.endEmitted?E(e,new y):S(e,l,t,!0);else if(l.ended)E(e,new g);else{if(l.destroyed)return!1;l.reading=!1,l.decoder&&!r?(t=l.decoder.write(t),l.objectMode||0!==t.length?S(e,l,t,!1):C(e,l)):S(e,l,t,!1)}else n||(l.reading=!1,C(e,l));return!l.ended&&(l.length<l.highWaterMark||0===l.length)}function S(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&I(e)),C(e,t)}Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),T.prototype.destroy=e.destroy,T.prototype._undestroy=e.undestroy,T.prototype._destroy=function(e,t){t(e)},T.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=c.from(e,t),t=""),r=!0),b(this,e,t,!1,r)},T.prototype.unshift=function(e){return b(this,e,null,!0,!1)},T.prototype.isPaused=function(){return!1===this._readableState.flowing},T.prototype.setEncoding=function(e){for(var t=new(o=o||i("./node_modules/string_decoder/lib/string_decoder.js").StringDecoder)(e),r=(this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding,this._readableState.buffer.head),n="";null!==r;)n+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==n&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var A=1073741824;function R(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?(t.flowing&&t.length?t.buffer.head.data:t).length:(e>t.highWaterMark&&(t.highWaterMark=(A<=(r=e)?r=A:(r--,r=(r=(r=(r=(r|=r>>>1)|r>>>2)|r>>>4)|r>>>8)|r>>>16,r++),r)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0));var r}function I(e){var t=e._readableState;h("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(h("emitReadable",t.flowing),t.emittedReadable=!0,process.nextTick(w,e))}function w(e){var t=e._readableState;h("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,O(e)}function C(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(N,e,t))}function N(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(h("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function D(e){var t=e._readableState;t.readableListening=0<e.listenerCount("readable"),t.resumeScheduled&&!t.paused?t.flowing=!0:0<e.listenerCount("data")&&e.resume()}function M(e){h("readable nexttick read 0"),e.read(0)}function j(e,t){h("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),O(e),t.flowing&&!t.reading&&e.read(0)}function O(e){var t=e._readableState;for(h("flow",t.flowing);t.flowing&&null!==e.read(););}function P(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function L(e){var t=e._readableState;h("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,process.nextTick(k,t,e))}function k(e,t){h("endReadableNT",e.endEmitted,e.length),e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy&&(!(e=t._writableState)||e.autoDestroy&&e.finished)&&t.destroy())}function F(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}T.prototype.read=function(e){h("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:0<t.length)||t.ended))return h("read: emitReadable",t.length,t.ended),(0===t.length&&t.ended?L:I)(this),null;if(0===(e=R(e,t))&&t.ended)return 0===t.length&&L(this),null;var n=t.needReadable;return h("need readable",n),(0===t.length||t.length-e<t.highWaterMark)&&h("length less than watermark",n=!0),t.ended||t.reading?h("reading or ended",n=!1):n&&(h("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=R(r,t))),null===(n=0<e?P(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&L(this)),null!==n&&this.emit("data",n),n},T.prototype._read=function(e){E(this,new p("_read()"))},T.prototype.pipe=function(r,e){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=r;break;case 1:i.pipes=[i.pipes,r];break;default:i.pipes.push(r)}i.pipesCount+=1,h("pipe count=%d opts=%j",i.pipesCount,e);e=(!e||!1!==e.end)&&r!==process.stdout&&r!==process.stderr?o:g;function a(e,t){h("onunpipe"),e===n&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,h("cleanup"),r.removeListener("close",f),r.removeListener("finish",d),r.removeListener("drain",s),r.removeListener("error",c),r.removeListener("unpipe",a),n.removeListener("end",o),n.removeListener("end",g),n.removeListener("data",l),u=!0,!i.awaitDrain||r._writableState&&!r._writableState.needDrain||s())}function o(){h("onend"),r.end()}i.endEmitted?process.nextTick(e):n.once("end",e),r.on("unpipe",a);t=n;var t,s=function(){var e=t._readableState;h("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&m(t,"data")&&(e.flowing=!0,O(t))},u=(r.on("drain",s),!1);function l(e){h("ondata");e=r.write(e);h("dest.write",e),!1===e&&((1===i.pipesCount&&i.pipes===r||1<i.pipesCount&&-1!==F(i.pipes,r))&&!u&&(h("false write response, pause",i.awaitDrain),i.awaitDrain++),n.pause())}function c(e){h("onerror",e),g(),r.removeListener("error",c),0===m(r,"error")&&E(r,e)}function f(){r.removeListener("finish",d),g()}function d(){h("onfinish"),r.removeListener("close",f),g()}function g(){h("unpipe"),n.unpipe(r)}return n.on("data",l),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(r,"error",c),r.once("close",f),r.once("finish",d),r.emit("pipe",n),i.flowing||(h("pipe resume"),n.resume()),r},T.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e=e||t.pipes,t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<i;a++)n[a].emit("unpipe",this,{hasUnpiped:!1});return this}var o=F(t.pipes,e);return-1===o||(t.pipes.splice(o,1),--t.pipesCount,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},T.prototype.addListener=T.prototype.on=function(e,t){var t=a.prototype.on.call(this,e,t),r=this._readableState;return"data"===e?(r.readableListening=0<this.listenerCount("readable"),!1!==r.flowing&&this.resume()):"readable"!==e||r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,h("on readable",r.length,r.reading),r.length?I(this):r.reading||process.nextTick(M,this)),t},T.prototype.removeListener=function(e,t){t=a.prototype.removeListener.call(this,e,t);return"readable"===e&&process.nextTick(D,this),t},T.prototype.removeAllListeners=function(e){var t=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||process.nextTick(D,this),t},T.prototype.resume=function(){var e,t,r=this._readableState;return r.flowing||(h("resume"),r.flowing=!r.readableListening,e=this,(t=r).resumeScheduled||(t.resumeScheduled=!0,process.nextTick(j,e,t))),r.paused=!1,this},T.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},T.prototype.wrap=function(t){var e,r=this,n=this._readableState,i=!1;for(e in t.on("end",function(){var e;h("wrapped end"),n.decoder&&!n.ended&&(e=n.decoder.end())&&e.length&&r.push(e),r.push(null)}),t.on("data",function(e){h("wrapped data"),n.decoder&&(e=n.decoder.write(e)),n.objectMode&&null==e||(n.objectMode||e&&e.length)&&!r.push(e)&&(i=!0,t.pause())}),t)void 0===this[e]&&"function"==typeof t[e]&&(this[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e));for(var a=0;a<_.length;a++)t.on(_[a],this.emit.bind(this,_[a]));return this._read=function(e){h("wrapped _read",e),i&&(i=!1,t.resume())},this},"function"==typeof Symbol&&(T.prototype[Symbol.asyncIterator]=function(){return(t=void 0===t?i("./node_modules/stream-browserify/node_modules/readable-stream/lib/internal/streams/async_iterator.js"):t)(this)}),Object.defineProperty(T.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(T.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(T.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),T._fromList=P,Object.defineProperty(T.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(T.from=function(e,t){return(r=void 0===r?i("./node_modules/stream-browserify/node_modules/readable-stream/lib/internal/streams/from-browser.js"):r)(T,e,t)})},"./node_modules/stream-browserify/node_modules/readable-stream/lib/_stream_transform.js":function(e,t,r){"use strict";e.exports=u;var e=r("./node_modules/stream-browserify/node_modules/readable-stream/errors-browser.js").codes,n=e.ERR_METHOD_NOT_IMPLEMENTED,i=e.ERR_MULTIPLE_CALLBACK,a=e.ERR_TRANSFORM_ALREADY_TRANSFORMING,o=e.ERR_TRANSFORM_WITH_LENGTH_0,s=r("./node_modules/stream-browserify/node_modules/readable-stream/lib/_stream_duplex.js");function u(e){if(!(this instanceof u))return new u(e);s.call(this,e),this._transformState={afterTransform:function(e,t){var r=this._transformState,n=(r.transforming=!1,r.writecb);if(null===n)return this.emit("error",new i);r.writechunk=null,(r.writecb=null)!=t&&this.push(t),n(e),(r=this._readableState).reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",l)}function l(){var r=this;"function"!=typeof this._flush||this._readableState.destroyed?c(this,null,null):this._flush(function(e,t){c(r,e,t)})}function c(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new o;if(e._transformState.transforming)throw new a;e.push(null)}r("./node_modules/stream-browserify/node_modules/inherits/inherits_browser.js")(u,s),u.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},u.prototype._transform=function(e,t,r){r(new n("_transform()"))},u.prototype._write=function(e,t,r){var n=this._transformState;n.writecb=r,n.writechunk=e,n.writeencoding=t,n.transforming||(r=this._readableState,(n.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark))},u.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},u.prototype._destroy=function(e,t){s.prototype._destroy.call(this,e,function(e){t(e)})}},"./node_modules/stream-browserify/node_modules/readable-stream/lib/_stream_writable.js":function(e,t,r){"use strict";function f(a){var o=this;this.next=null,this.entry=null,this.finish=function(){var e=o,t=a,r=void 0,n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}}(e.exports=S).WritableState=b;var n,e={deprecate:r("./node_modules/util-deprecate/browser.js")},i=r("./node_modules/stream-browserify/node_modules/readable-stream/lib/internal/streams/stream-browser.js"),d=r("./node_modules/buffer/index.js").Buffer,g=r.g.Uint8Array||function(){};var a,o=r("./node_modules/stream-browserify/node_modules/readable-stream/lib/internal/streams/destroy.js"),s=r("./node_modules/stream-browserify/node_modules/readable-stream/lib/internal/streams/state.js").getHighWaterMark,u=r("./node_modules/stream-browserify/node_modules/readable-stream/errors-browser.js").codes,m=u.ERR_INVALID_ARG_TYPE,l=u.ERR_METHOD_NOT_IMPLEMENTED,h=u.ERR_MULTIPLE_CALLBACK,c=u.ERR_STREAM_CANNOT_PIPE,p=u.ERR_STREAM_DESTROYED,y=u.ERR_STREAM_NULL_VALUES,E=u.ERR_STREAM_WRITE_AFTER_END,_=u.ERR_UNKNOWN_ENCODING,v=o.errorOrDestroy;function T(){}function b(e,c,t){n=n||r("./node_modules/stream-browserify/node_modules/readable-stream/lib/_stream_duplex.js"),"boolean"!=typeof t&&(t=c instanceof n),this.objectMode=!!(e=e||{}).objectMode,t&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=s(this,e,"writableHighWaterMark",t),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;t=(this.destroyed=!1)===e.decodeStrings;this.decodeStrings=!t,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){var t=c,r=t._writableState,n=r.sync,i=r.writecb;if("function"!=typeof i)throw new h;var a,o,s,u,l=r;l.writing=!1,l.writecb=null,l.length-=l.writelen,l.writelen=0,e?(l=t,o=n,s=e,u=i,--(a=r).pendingcb,o?(process.nextTick(u,s),process.nextTick(N,l,a),l._writableState.errorEmitted=!0,v(l,s)):(u(s),l._writableState.errorEmitted=!0,v(l,s),N(l,a))):((e=w(r)||t.destroyed)||r.corked||r.bufferProcessing||!r.bufferedRequest||I(t,r),n?process.nextTick(R,t,r,e,i):R(t,r,e,i))},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new f(this)}r("./node_modules/stream-browserify/node_modules/inherits/inherits_browser.js")(S,i),b.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t};try{Object.defineProperty(b.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}function S(e){var t=this instanceof(n=n||r("./node_modules/stream-browserify/node_modules/readable-stream/lib/_stream_duplex.js"));if(!t&&!a.call(S,this))return new S(e);this._writableState=new b(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),i.call(this)}function A(e,t,r,n,i,a,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new p("write")):r?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1}function R(e,t,r,n){var i;r||(r=e,0===(i=t).length&&i.needDrain&&(i.needDrain=!1,r.emit("drain"))),t.pendingcb--,n(),N(e,t)}function I(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){for(var n=t.bufferedRequestCount,i=new Array(n),n=t.corkedRequestsFree,a=(n.entry=r,0),o=!0;r;)(i[a]=r).isBuf||(o=!1),r=r.next,a+=1;i.allBuffers=o,A(e,t,!0,t.length,i,"",n.finish),t.pendingcb++,t.lastBufferedRequest=null,n.next?(t.corkedRequestsFree=n.next,n.next=null):t.corkedRequestsFree=new f(t),t.bufferedRequestCount=0}else{for(;r;){var s=r.chunk,u=r.encoding,l=r.callback;if(A(e,t,!1,t.objectMode?1:s.length,s,u,l),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function w(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function C(t,r){t._final(function(e){r.pendingcb--,e&&v(t,e),r.prefinished=!0,t.emit("prefinish"),N(t,r)})}function N(e,t){var r,n,i=w(t);return i&&(r=e,(n=t).prefinished||n.finalCalled||("function"!=typeof r._final||n.destroyed?(n.prefinished=!0,r.emit("prefinish")):(n.pendingcb++,n.finalCalled=!0,process.nextTick(C,r,n))),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy&&(!(r=e._readableState)||r.autoDestroy&&r.endEmitted)&&e.destroy())),i}"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(a=Function.prototype[Symbol.hasInstance],Object.defineProperty(S,Symbol.hasInstance,{value:function(e){return!!a.call(this,e)||this===S&&(e&&e._writableState instanceof b)}})):a=function(e){return e instanceof this},S.prototype.pipe=function(){v(this,new c)},S.prototype.write=function(e,t,r){var n,i,a,o,s,u,l=this._writableState,c=!1,f=!l.objectMode&&(f=e,d.isBuffer(f)||f instanceof g);return f&&!d.isBuffer(e)&&(o=e,e=d.from(o)),"function"==typeof t&&(r=t,t=null),t=f?"buffer":t||l.defaultEncoding,"function"!=typeof r&&(r=T),l.ending?(o=this,s=r,u=new E,v(o,u),process.nextTick(s,u)):!f&&(s=this,u=l,i=r,null===(n=e)?a=new y:"string"==typeof n||u.objectMode||(a=new m("chunk",["string","Buffer"],n)),a&&(v(s,a),!void process.nextTick(i,a)))||(l.pendingcb++,c=function(e,t,r,n,i,a){r||(o=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=d.from(t,r));return t}(t,n,i),n!==o&&(r=!0,i="buffer",n=o));var o=t.objectMode?1:n.length,s=(t.length+=o,t.length<t.highWaterMark);s||(t.needDrain=!0);{var u;t.writing||t.corked?(u=t.lastBufferedRequest,t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:a,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1):A(e,t,!1,o,n,i,a)}return s}(this,l,f,e,t,r)),c},S.prototype.cork=function(){this._writableState.corked++},S.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||I(this,e))},S.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase()))return this._writableState.defaultEncoding=e,this;throw new _(e)},Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),S.prototype._write=function(e,t,r){r(new l("_write()"))},S.prototype._writev=null,S.prototype.end=function(e,t,r){var n=this._writableState;if("function"==typeof e?(r=e,t=e=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),!n.ending){e=this,t=n,n=r;t.ending=!0,N(e,t),n&&(t.finished?process.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}return this},Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),S.prototype.destroy=o.destroy,S.prototype._undestroy=o.undestroy,S.prototype._destroy=function(e,t){t(e)}},"./node_modules/stream-browserify/node_modules/readable-stream/lib/internal/streams/async_iterator.js":function(e,t,r){"use strict";var n;function i(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}var a=r("./node_modules/stream-browserify/node_modules/readable-stream/lib/internal/streams/end-of-stream.js"),o=Symbol("lastResolve"),s=Symbol("lastReject"),u=Symbol("error"),l=Symbol("ended"),c=Symbol("lastPromise"),f=Symbol("handlePromise"),d=Symbol("stream");function g(e,t){return{value:e,done:t}}function m(e){var t,r=e[o];null!==r&&null!==(t=e[d].read())&&(e[c]=null,e[o]=null,e[s]=null,r(g(t,!1)))}var r=Object.getPrototypeOf(function(){}),h=Object.setPrototypeOf((i(n={get stream(){return this[d]},next:function(){var r=this,e=this[u];if(null!==e)return Promise.reject(e);if(this[l])return Promise.resolve(g(void 0,!0));if(this[d].destroyed)return new Promise(function(e,t){process.nextTick(function(){r[u]?t(r[u]):e(g(void 0,!0))})});var t,n,i,e=this[c];if(e)t=new Promise((n=e,i=this,function(e,t){n.then(function(){i[l]?e(g(void 0,!0)):i[f](e,t)},t)}));else{e=this[d].read();if(null!==e)return Promise.resolve(g(e,!1));t=new Promise(this[f])}return this[c]=t}},Symbol.asyncIterator,function(){return this}),i(n,"return",function(){var e=this;return new Promise(function(t,r){e[d].destroy(null,function(e){e?r(e):t(g(void 0,!0))})})}),n),r);e.exports=function(e){var t,n=Object.create(h,(i(t={},d,{value:e,writable:!0}),i(t,o,{value:null,writable:!0}),i(t,s,{value:null,writable:!0}),i(t,u,{value:null,writable:!0}),i(t,l,{value:e._readableState.endEmitted,writable:!0}),i(t,f,{value:function(e,t){var r=n[d].read();r?(n[c]=null,n[o]=null,n[s]=null,e(g(r,!1))):(n[o]=e,n[s]=t)},writable:!0}),t));return n[c]=null,a(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code)return null!==(t=n[s])&&(n[c]=null,n[o]=null,n[s]=null,t(e)),void(n[u]=e);var t=n[o];null!==t&&(n[c]=null,n[o]=null,t(g(void 0,!(n[s]=null)))),n[l]=!0}),e.on("readable",function(e){process.nextTick(m,e)}.bind(null,n)),n}},"./node_modules/stream-browserify/node_modules/readable-stream/lib/internal/streams/buffer_list.js":function(e,t,r){"use strict";function a(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function i(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?a(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=r("./node_modules/buffer/index.js").Buffer,u=r("?3e83").inspect,l=u&&u.custom||"inspect";e.exports=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.head=null,this.tail=null,this.length=0}var t,r,n;return t=e,(r=[{key:"push",value:function(e){e={data:e,next:null};0<this.length?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(e){e={data:e,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){var e;if(0!==this.length)return e=this.head.data,1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return s.alloc(0);for(var t,r,n=s.allocUnsafe(e>>>0),i=this.head,a=0;i;)t=i.data,r=a,s.prototype.copy.call(t,n,r),a+=i.data.length,i=i.next;return n}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,a=e>i.length?i.length:e;if(a===i.length?n+=i:n+=i.slice(0,e),0===(e-=a)){a===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t).data=i.slice(a);break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=s.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,a=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,a),0===(e-=a)){a===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r).data=i.slice(a);break}++n}return this.length-=n,t}},{key:l,value:function(e,t){return u(this,i({},t,{depth:0,customInspect:!1}))}}])&&o(t.prototype,r),n&&o(t,n),e}()},"./node_modules/stream-browserify/node_modules/readable-stream/lib/internal/streams/destroy.js":function(e){"use strict";function a(e,t){s(e,t),o(e)}function o(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function s(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(s,this,e)):process.nextTick(s,this,e)):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?r._writableState?r._writableState.errorEmitted?process.nextTick(o,r):(r._writableState.errorEmitted=!0,process.nextTick(a,r,e)):process.nextTick(a,r,e):t?(process.nextTick(o,r),t(e)):process.nextTick(o,r)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}},"./node_modules/stream-browserify/node_modules/readable-stream/lib/internal/streams/end-of-stream.js":function(e,t,r){"use strict";var y=r("./node_modules/stream-browserify/node_modules/readable-stream/errors-browser.js").codes.ERR_STREAM_PREMATURE_CLOSE;function E(){}e.exports=function e(t,r,n){if("function"==typeof r)return e(t,null,r);function i(){t.writable||a()}function a(){h=!(m=!1),g||n.call(t)}function o(){p=!(g=!1),m||n.call(t)}function s(e){n.call(t,e)}function u(){var e;return g&&!p?(t._readableState&&t._readableState.ended||(e=new y),n.call(t,e)):m&&!h?(t._writableState&&t._writableState.ended||(e=new y),n.call(t,e)):void 0}function l(){t.req.on("finish",a)}c=n||E,f=!1,n=function(){if(!f){f=!0;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];c.apply(this,t)}};var c,f,d,g=(r=r||{}).readable||!1!==r.readable&&t.readable,m=r.writable||!1!==r.writable&&t.writable,h=t._writableState&&t._writableState.finished,p=t._readableState&&t._readableState.endEmitted;return(d=t).setHeader&&"function"==typeof d.abort?(t.on("complete",a),t.on("abort",u),t.req?l():t.on("request",l)):m&&!t._writableState&&(t.on("end",i),t.on("close",i)),t.on("end",o),t.on("finish",a),!1!==r.error&&t.on("error",s),t.on("close",u),function(){t.removeListener("complete",a),t.removeListener("abort",u),t.removeListener("request",l),t.req&&t.req.removeListener("finish",a),t.removeListener("end",i),t.removeListener("close",i),t.removeListener("finish",a),t.removeListener("end",o),t.removeListener("error",s),t.removeListener("close",u)}}},"./node_modules/stream-browserify/node_modules/readable-stream/lib/internal/streams/from-browser.js":function(e){e.exports=function(){throw new Error("Readable.from is not available in the browser")}},"./node_modules/stream-browserify/node_modules/readable-stream/lib/internal/streams/pipeline.js":function(e,t,u){"use strict";var l;var r=u("./node_modules/stream-browserify/node_modules/readable-stream/errors-browser.js").codes,s=r.ERR_MISSING_ARGS,c=r.ERR_STREAM_DESTROYED;function f(e){if(e)throw e}function d(r,e,t,n){i=n,a=!1;var i,a,o=!(n=function(){a||(a=!0,i.apply(void 0,arguments))}),s=(r.on("close",function(){o=!0}),(l=void 0===l?u("./node_modules/stream-browserify/node_modules/readable-stream/lib/internal/streams/end-of-stream.js"):l)(r,{readable:e,writable:t},function(e){if(e)return n(e);o=!0,n()}),!1);return function(e){var t;if(!o&&!s)return s=!0,(t=r).setHeader&&"function"==typeof t.abort?r.abort():"function"==typeof r.destroy?r.destroy():void n(e||new c("pipe"))}}function g(e){e()}function m(e,t){return e.pipe(t)}e.exports=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];var r,i,a=!(r=n).length||"function"!=typeof r[r.length-1]?f:r.pop();if((n=Array.isArray(n[0])?n[0]:n).length<2)throw new s("streams");var o=n.map(function(e,t){var r=t<n.length-1;return d(e,r,0<t,function(e){i=i||e,e&&o.forEach(g),r||(o.forEach(g),a(i))})});return n.reduce(m)}},"./node_modules/stream-browserify/node_modules/readable-stream/lib/internal/streams/state.js":function(e,t,r){"use strict";var o=r("./node_modules/stream-browserify/node_modules/readable-stream/errors-browser.js").codes.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,r,n){a=n,i=r;var i,a=null!=(t=t).highWaterMark?t.highWaterMark:a?t[i]:null;if(null==a)return e.objectMode?16:16384;if(!isFinite(a)||Math.floor(a)!==a||a<0)throw new o(n?r:"highWaterMark",a);return Math.floor(a)}}},"./node_modules/stream-browserify/node_modules/readable-stream/lib/internal/streams/stream-browser.js":function(e,t,r){e.exports=r("./node_modules/events/events.js").EventEmitter},"./node_modules/string_decoder/lib/string_decoder.js":function(e,t,r){"use strict";var n=r("./node_modules/safe-buffer/index.js").Buffer,i=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"==typeof t||n.isEncoding!==i&&i(e))return t||e;throw new Error("Unknown encoding: "+e)}function o(e){var t;switch(this.encoding=a(e),this.encoding){case"utf16le":this.text=l,this.end=c,t=4;break;case"utf8":this.fillLast=u,t=4;break;case"base64":this.text=f,this.end=d,t=3;break;default:return this.write=g,void(this.end=m)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function u(e){var t,r=this.lastTotal-this.lastNeed,n=(t=this,128!=(192&(n=e)[0])?(t.lastNeed=0,""):1<t.lastNeed&&1<n.length?128!=(192&n[1])?(t.lastNeed=1,""):2<t.lastNeed&&2<n.length&&128!=(192&n[2])?(t.lastNeed=2,""):void 0:void 0);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,r,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,r,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2!=0)return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1);t=e.toString("utf16le",t);if(t){var r=t.charCodeAt(t.length-1);if(55296<=r&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],t.slice(0,-1)}return t}function c(e){var t,e=e&&e.length?this.write(e):"";return this.lastNeed?(t=this.lastTotal-this.lastNeed,e+this.lastChar.toString("utf16le",0,t)):e}function f(e,t){var r=(e.length-t)%3;return 0==r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1==r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function d(e){e=e&&e.length?this.write(e):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function g(e){return e.toString(this.encoding)}function m(e){return e&&e.length?this.write(e):""}(t.StringDecoder=o).prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},o.prototype.end=function(e){e=e&&e.length?this.write(e):"";return this.lastNeed?e+"":e},o.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var i=s(t[n]);if(0<=i)return 0<i&&(e.lastNeed=i-1),i;if(--n<r||-2===i)return 0;if(0<=(i=s(t[n])))return 0<i&&(e.lastNeed=i-2),i;if(--n<r||-2===i)return 0;if(0<=(i=s(t[n])))return 0<i&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;r=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},"./node_modules/ua-parser-js/src/ua-parser.js":function(k,U,B){var G;!function(i,f){"use strict";function e(e){for(var t={},r=0;r<e.length;r++)t[e[r].toUpperCase()]=e[r];return t}function a(e,t){return typeof e===m&&-1!==L(t).indexOf(L(e))}function o(e,t){if(typeof e===m)return e=e.replace(/^\s\s*/,l).replace(/\s\s*$/,l),typeof t==c?e:e.substring(0,255)}function s(e,t){for(var r,n,i,a,o,s=0;s<t.length&&!a;){for(var u=t[s],l=t[s+1],c=r=0;c<u.length&&!a;)if(a=u[c++].exec(e))for(n=0;n<l.length;n++)o=a[++r],typeof(i=l[n])===g&&0<i.length?2===i.length?typeof i[1]==d?this[i[0]]=i[1].call(this,o):this[i[0]]=i[1]:3===i.length?typeof i[1]!==d||i[1].exec&&i[1].test?this[i[0]]=o?o.replace(i[1],i[2]):f:this[i[0]]=o?i[1].call(this,o,i[2]):f:4===i.length&&(this[i[0]]=o?i[3].call(this,o.replace(i[1],i[2])):f):this[i]=o||f;s+=2}}function t(e,t){for(var r in t)if(typeof t[r]===g&&0<t[r].length){for(var n=0;n<t[r].length;n++)if(a(t[r][n],e))return"?"===r?f:r}else if(a(t[r],e))return"?"===r?f:r;return e}function u(e,t){if(typeof e===g&&(t=e,e=f),!(this instanceof u))return new u(e,t).getResult();var r=e||(typeof i!=c&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:l),n=t?function(e,t){var r,n={};for(r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n}(j,t):j;return this.getBrowser=function(){var e,t={};return t.name=f,t[E]=f,s.call(t,r,n.browser),t.major=typeof(e=t.version)===m?e.replace(/[^\d\.]/g,l).split(".")[0]:f,t},this.getCPU=function(){var e={};return e[_]=f,s.call(e,r,n.cpu),e},this.getDevice=function(){var e={};return e[y]=f,e[h]=f,e.type=f,s.call(e,r,n.device),e},this.getEngine=function(){var e={};return e.name=f,e[E]=f,s.call(e,r,n.engine),e},this.getOS=function(){var e={};return e.name=f,e[E]=f,s.call(e,r,n.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=typeof e===m&&255<e.length?o(e,255):e,this},this.setUA(r),this}var n,l="",d="function",c="undefined",g="object",m="string",h="model",r="name",p="type",y="vendor",E="version",_="architecture",v="console",T="mobile",b="tablet",S="smarttv",A="wearable",R="Amazon",I="BlackBerry",w="Browser",C="Chrome",N="Firefox",D="Google",M="Microsoft",O="Opera",P="Samsung",L=function(e){return e.toLowerCase()},x={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},j={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[E,[r,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[E,[r,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[r,E],[/opios[\/ ]+([\w\.]+)/i],[E,[r,O+" Mini"]],[/\bopr\/([\w\.]+)/i],[E,[r,O]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[r,E],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[E,[r,"UC"+w]],[/\bqbcore\/([\w\.]+)/i],[E,[r,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[E,[r,"WeChat"]],[/konqueror\/([\w\.]+)/i],[E,[r,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[E,[r,"IE"]],[/yabrowser\/([\w\.]+)/i],[E,[r,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[r,/(.+)/,"$1 Secure "+w],E],[/\bfocus\/([\w\.]+)/i],[E,[r,N+" Focus"]],[/\bopt\/([\w\.]+)/i],[E,[r,O+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[E,[r,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[E,[r,"Dolphin"]],[/coast\/([\w\.]+)/i],[E,[r,O+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[E,[r,"MIUI "+w]],[/fxios\/([-\w\.]+)/i],[E,[r,N]],[/\bqihu|(qi?ho?o?|360)browser/i],[[r,"360 "+w]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[r,/(.+)/,"$1 "+w],E],[/(comodo_dragon)\/([\w\.]+)/i],[[r,/_/g," "],E],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[r,E],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[r],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[r,"Facebook"],E],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[r,E],[/\bgsa\/([\w\.]+) .*safari\//i],[E,[r,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[E,[r,C+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[r,C+" WebView"],E],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[E,[r,"Android "+w]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[r,E],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[E,[r,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[E,r],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[r,[E,t,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[r,E],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[r,"Netscape"],E],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[E,[r,N+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[r,E]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[_,"amd64"]],[/(ia32(?=;))/i],[[_,L]],[/((?:i[346]|x)86)[;\)]/i],[[_,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[_,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[_,"armhf"]],[/windows (ce|mobile); ppc;/i],[[_,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[_,/ower/,l,L]],[/(sun4\w)[;\)]/i],[[_,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[_,L]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[h,[y,P],[p,b]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[h,[y,P],[p,T]],[/\((ip(?:hone|od)[\w ]*);/i],[h,[y,"Apple"],[p,T]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[h,[y,"Apple"],[p,b]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[h,[y,"Huawei"],[p,b]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[h,[y,"Huawei"],[p,T]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[h,/_/g," "],[y,"Xiaomi"],[p,T]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[h,/_/g," "],[y,"Xiaomi"],[p,b]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[h,[y,"OPPO"],[p,T]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[h,[y,"Vivo"],[p,T]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[h,[y,"Realme"],[p,T]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[h,[y,"Motorola"],[p,T]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[h,[y,"Motorola"],[p,b]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[h,[y,"LG"],[p,b]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[h,[y,"LG"],[p,T]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[h,[y,"Lenovo"],[p,b]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[h,/_/g," "],[y,"Nokia"],[p,T]],[/(pixel c)\b/i],[h,[y,D],[p,b]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[h,[y,D],[p,T]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[h,[y,"Sony"],[p,T]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[h,"Xperia Tablet"],[y,"Sony"],[p,b]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[h,[y,"OnePlus"],[p,T]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[h,[y,R],[p,b]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[h,/(.+)/g,"Fire Phone $1"],[y,R],[p,T]],[/(playbook);[-\w\),; ]+(rim)/i],[h,y,[p,b]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[h,[y,I],[p,T]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[h,[y,"ASUS"],[p,b]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[h,[y,"ASUS"],[p,T]],[/(nexus 9)/i],[h,[y,"HTC"],[p,b]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[y,[h,/_/g," "],[p,T]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[h,[y,"Acer"],[p,b]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[h,[y,"Meizu"],[p,T]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[h,[y,"Sharp"],[p,T]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[y,h,[p,T]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[y,h,[p,b]],[/(surface duo)/i],[h,[y,M],[p,b]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[h,[y,"Fairphone"],[p,T]],[/(u304aa)/i],[h,[y,"AT&T"],[p,T]],[/\bsie-(\w*)/i],[h,[y,"Siemens"],[p,T]],[/\b(rct\w+) b/i],[h,[y,"RCA"],[p,b]],[/\b(venue[\d ]{2,7}) b/i],[h,[y,"Dell"],[p,b]],[/\b(q(?:mv|ta)\w+) b/i],[h,[y,"Verizon"],[p,b]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[h,[y,"Barnes & Noble"],[p,b]],[/\b(tm\d{3}\w+) b/i],[h,[y,"NuVision"],[p,b]],[/\b(k88) b/i],[h,[y,"ZTE"],[p,b]],[/\b(nx\d{3}j) b/i],[h,[y,"ZTE"],[p,T]],[/\b(gen\d{3}) b.+49h/i],[h,[y,"Swiss"],[p,T]],[/\b(zur\d{3}) b/i],[h,[y,"Swiss"],[p,b]],[/\b((zeki)?tb.*\b) b/i],[h,[y,"Zeki"],[p,b]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[y,"Dragon Touch"],h,[p,b]],[/\b(ns-?\w{0,9}) b/i],[h,[y,"Insignia"],[p,b]],[/\b((nxa|next)-?\w{0,9}) b/i],[h,[y,"NextBook"],[p,b]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[y,"Voice"],h,[p,T]],[/\b(lvtel\-)?(v1[12]) b/i],[[y,"LvTel"],h,[p,T]],[/\b(ph-1) /i],[h,[y,"Essential"],[p,T]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[h,[y,"Envizen"],[p,b]],[/\b(trio[-\w\. ]+) b/i],[h,[y,"MachSpeed"],[p,b]],[/\btu_(1491) b/i],[h,[y,"Rotor"],[p,b]],[/(shield[\w ]+) b/i],[h,[y,"Nvidia"],[p,b]],[/(sprint) (\w+)/i],[y,h,[p,T]],[/(kin\.[onetw]{3})/i],[[h,/\./g," "],[y,M],[p,T]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[h,[y,"Zebra"],[p,b]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[h,[y,"Zebra"],[p,T]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[y,h,[p,v]],[/droid.+; (shield) bui/i],[h,[y,"Nvidia"],[p,v]],[/(playstation [345portablevi]+)/i],[h,[y,"Sony"],[p,v]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[h,[y,M],[p,v]],[/smart-tv.+(samsung)/i],[y,[p,S]],[/hbbtv.+maple;(\d+)/i],[[h,/^/,"SmartTV"],[y,P],[p,S]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[y,"LG"],[p,S]],[/(apple) ?tv/i],[y,[h,"Apple TV"],[p,S]],[/crkey/i],[[h,C+"cast"],[y,D],[p,S]],[/droid.+aft(\w)( bui|\))/i],[h,[y,R],[p,S]],[/\(dtv[\);].+(aquos)/i],[h,[y,"Sharp"],[p,S]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[y,o],[h,o],[p,S]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[p,S]],[/((pebble))app/i],[y,h,[p,A]],[/droid.+; (glass) \d/i],[h,[y,D],[p,A]],[/droid.+; (wt63?0{2,3})\)/i],[h,[y,"Zebra"],[p,A]],[/(quest( 2)?)/i],[h,[y,"Facebook"],[p,A]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[y,[p,"embedded"]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[h,[p,T]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[h,[p,b]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[p,b]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[p,T]],[/(android[-\w\. ]{0,9});.+buil/i],[h,[y,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[E,[r,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[E,[r,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[r,E],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[E,r]],os:[[/microsoft (windows) (vista|xp)/i],[r,E],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[r,[E,t,x]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[r,"Windows"],[E,t,x]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[E,/_/g,"."],[r,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[r,"Mac OS"],[E,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[E,r],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[r,E],[/\(bb(10);/i],[E,[r,I]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[E,[r,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[E,[r,N+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[E,[r,"webOS"]],[/crkey\/([\d\.]+)/i],[E,[r,C+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[r,"Chromium OS"],E],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[r,E],[/(sunos) ?([\w\.\d]*)/i],[[r,"Solaris"],E],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[r,E]]},F=(u.VERSION="1.0.2",u.BROWSER=e([r,E,"major"]),u.CPU=e([_]),u.DEVICE=e([h,y,p,v,T,S,b,A,"embedded"]),u.ENGINE=u.OS=e([r,E]),typeof U!=c?(U=k.exports?k.exports=u:U).UAParser=u:"function"===d&&B.amdO?(G=function(){return u}.call(U,B,U,k))!==f&&(k.exports=G):typeof i!=c&&(i.UAParser=u),typeof i!=c&&(i.jQuery||i.Zepto));F&&!F.ua&&(n=new u,F.ua=n.getResult(),F.ua.get=function(){return n.getUA()},F.ua.set=function(e){n.setUA(e);var t,r=n.getResult();for(t in r)F.ua[t]=r[t]})}("object"==typeof window?window:this)},"./node_modules/util-deprecate/browser.js":function(e,t,r){function n(e){try{if(!r.g.localStorage)return}catch(e){return}e=r.g.localStorage[e];return null!=e&&"true"===String(e).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}},"?3e83":function(){},"?19e6":function(){},"./node_modules/bcp-47-normalize/lib/defaults.json":function(e){"use strict";e.exports=JSON.parse('["mni-beng-in","mni-mtei-in","sat-deva-in","sat-olck-in","shi-latn-ma","shi-tfng-ma","vai-latn-lr","vai-vaii-lr","yue-hans-cn","yue-hant-hk","az-arab-ir","az-cyrl-az","az-latn-az","bm-nkoo-ml","bs-cyrl-ba","bs-latn-ba","en-dsrt-us","ff-adlm-gn","ff-latn-sn","ha-arab-ng","hi-latn-in","iu-latn-ca","ks-arab-in","ks-deva-in","mn-mong-cn","ms-arab-my","pa-arab-pk","pa-guru-in","sd-arab-pk","sd-deva-in","sr-cyrl-rs","sr-latn-rs","su-latn-id","uz-arab-af","uz-cyrl-uz","uz-latn-uz","zh-hans-cn","zh-hant-tw","mni-beng","sat-olck","shi-tfng","vai-vaii","yue-hant","az-latn","bs-latn","ff-latn","jbo-001","ks-arab","pa-guru","prg-001","sd-arab","sr-cyrl","su-latn","uz-latn","zh-hans","agq-cm","ar-001","arn-cl","asa-tz","ast-es","bas-cm","bem-zm","bez-tz","bgn-pk","blt-vn","brx-in","bss-cm","byn-er","cad-us","cch-ng","ccp-bd","ceb-ph","cgg-ug","chr-us","cic-us","ckb-iq","dav-ke","dje-ne","doi-in","dsb-de","dua-cm","dyo-sn","ebu-ke","eo-001","ewo-cm","fil-ph","fur-it","gaa-gh","gez-et","gsw-ch","guz-ke","haw-us","hsb-de","ia-001","ife-tg","io-001","jgo-cm","jmc-tz","kab-dz","kaj-ng","kam-ke","kcg-ng","kde-tz","kea-cv","ken-cm","khq-ml","kkj-cm","kln-ke","kok-in","kpe-lr","ksb-tz","ksf-cm","ksh-de","lag-tz","lkt-us","lrc-ir","luo-ke","luy-ke","mai-in","mas-ke","mer-ke","mfe-mu","mgh-mz","mgo-cm","moh-ca","mua-cm","mus-us","myv-ru","mzn-ir","naq-na","nds-de","nmg-cm","nnh-cm","nqo-gn","nso-za","nus-ss","nyn-ug","osa-us","pcm-ng","quc-gt","rof-tz","rwk-tz","sah-ru","saq-ke","sbp-tz","scn-it","sdh-ir","seh-mz","ses-ml","sid-et","sma-se","smj-se","smn-fi","sms-fi","ssy-er","syr-iq","szl-pl","teo-ug","tig-er","trv-tw","trw-pk","twq-ne","tzm-ma","vo-001","vun-tz","wae-ch","wal-et","wbp-au","xog-ug","yav-cm","yi-001","zgh-ma","aa-et","af-za","ak-gh","am-et","an-es","as-in","ba-ru","be-by","bg-bg","bm-ml","bn-bd","bo-cn","br-fr","ca-es","ce-ru","co-fr","cs-cz","cu-ru","cv-ru","cy-gb","da-dk","de-de","dv-mv","dz-bt","ee-gh","el-gr","en-us","es-es","et-ee","eu-es","fa-ir","fi-fi","fo-fo","fr-fr","fy-nl","ga-ie","gd-gb","gl-es","gn-py","gu-in","gv-im","ha-ng","he-il","hi-in","hr-hr","hu-hu","hy-am","id-id","ig-ng","ii-cn","is-is","it-it","iu-ca","ja-jp","jv-id","ka-ge","ki-ke","kk-kz","kl-gl","km-kh","kn-in","ko-kr","ku-tr","kw-gb","ky-kg","lb-lu","lg-ug","ln-cd","lo-la","lt-lt","lu-cd","lv-lv","mg-mg","mi-nz","mk-mk","ml-in","mn-mn","mr-in","ms-my","mt-mt","my-mm","nb-no","nd-zw","ne-np","nl-nl","nn-no","nr-za","nv-us","ny-mw","oc-fr","om-et","or-in","os-ge","pl-pl","ps-af","pt-br","qu-pe","rm-ch","rn-bi","ro-ro","ru-ru","rw-rw","sa-in","sc-it","se-no","sg-cf","si-lk","sk-sk","sl-si","sn-zw","so-so","sq-al","ss-za","st-za","sv-se","sw-tz","ta-in","te-in","tg-tj","th-th","ti-et","tk-tm","tn-za","to-to","tr-tr","ts-za","tt-ru","ug-cn","uk-ua","ur-pk","ve-za","vi-vn","wa-be","wo-sn","xh-za","yo-ng","zu-za"]')},"./node_modules/bcp-47-normalize/lib/fields.json":function(e){"use strict";e.exports=JSON.parse('[{"from":{"field":"script","value":"qaai"},"to":{"field":"script","value":"zinh"}},{"from":{"field":"region","value":"bu"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"ct"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"dd"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"dy"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"fx"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"hv"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"jt"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"mi"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"nh"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"nq"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"pu"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"pz"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"qu"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"rh"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"tp"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"uk"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"vd"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"wk"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"yd"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"zr"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"230"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"280"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"736"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"886"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"958"},"to":{"field":"region","value":"aa"}},{"from":{"field":"region","value":"020"},"to":{"field":"region","value":"ad"}},{"from":{"field":"region","value":"784"},"to":{"field":"region","value":"ae"}},{"from":{"field":"region","value":"004"},"to":{"field":"region","value":"af"}},{"from":{"field":"region","value":"028"},"to":{"field":"region","value":"ag"}},{"from":{"field":"region","value":"660"},"to":{"field":"region","value":"ai"}},{"from":{"field":"region","value":"008"},"to":{"field":"region","value":"al"}},{"from":{"field":"region","value":"051"},"to":{"field":"region","value":"am"}},{"from":{"field":"region","value":"024"},"to":{"field":"region","value":"ao"}},{"from":{"field":"region","value":"010"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"032"},"to":{"field":"region","value":"ar"}},{"from":{"field":"region","value":"016"},"to":{"field":"region","value":"as"}},{"from":{"field":"region","value":"040"},"to":{"field":"region","value":"at"}},{"from":{"field":"region","value":"036"},"to":{"field":"region","value":"au"}},{"from":{"field":"region","value":"533"},"to":{"field":"region","value":"aw"}},{"from":{"field":"region","value":"248"},"to":{"field":"region","value":"ax"}},{"from":{"field":"region","value":"031"},"to":{"field":"region","value":"az"}},{"from":{"field":"region","value":"070"},"to":{"field":"region","value":"ba"}},{"from":{"field":"region","value":"052"},"to":{"field":"region","value":"bb"}},{"from":{"field":"region","value":"050"},"to":{"field":"region","value":"bd"}},{"from":{"field":"region","value":"056"},"to":{"field":"region","value":"be"}},{"from":{"field":"region","value":"854"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"100"},"to":{"field":"region","value":"bg"}},{"from":{"field":"region","value":"048"},"to":{"field":"region","value":"bh"}},{"from":{"field":"region","value":"108"},"to":{"field":"region","value":"bi"}},{"from":{"field":"region","value":"204"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"652"},"to":{"field":"region","value":"bl"}},{"from":{"field":"region","value":"060"},"to":{"field":"region","value":"bm"}},{"from":{"field":"region","value":"096"},"to":{"field":"region","value":"bn"}},{"from":{"field":"region","value":"068"},"to":{"field":"region","value":"bo"}},{"from":{"field":"region","value":"535"},"to":{"field":"region","value":"bq"}},{"from":{"field":"region","value":"076"},"to":{"field":"region","value":"br"}},{"from":{"field":"region","value":"044"},"to":{"field":"region","value":"bs"}},{"from":{"field":"region","value":"064"},"to":{"field":"region","value":"bt"}},{"from":{"field":"region","value":"104"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"074"},"to":{"field":"region","value":"bv"}},{"from":{"field":"region","value":"072"},"to":{"field":"region","value":"bw"}},{"from":{"field":"region","value":"112"},"to":{"field":"region","value":"by"}},{"from":{"field":"region","value":"084"},"to":{"field":"region","value":"bz"}},{"from":{"field":"region","value":"124"},"to":{"field":"region","value":"ca"}},{"from":{"field":"region","value":"166"},"to":{"field":"region","value":"cc"}},{"from":{"field":"region","value":"180"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"140"},"to":{"field":"region","value":"cf"}},{"from":{"field":"region","value":"178"},"to":{"field":"region","value":"cg"}},{"from":{"field":"region","value":"756"},"to":{"field":"region","value":"ch"}},{"from":{"field":"region","value":"384"},"to":{"field":"region","value":"ci"}},{"from":{"field":"region","value":"184"},"to":{"field":"region","value":"ck"}},{"from":{"field":"region","value":"152"},"to":{"field":"region","value":"cl"}},{"from":{"field":"region","value":"120"},"to":{"field":"region","value":"cm"}},{"from":{"field":"region","value":"156"},"to":{"field":"region","value":"cn"}},{"from":{"field":"region","value":"170"},"to":{"field":"region","value":"co"}},{"from":{"field":"region","value":"188"},"to":{"field":"region","value":"cr"}},{"from":{"field":"region","value":"192"},"to":{"field":"region","value":"cu"}},{"from":{"field":"region","value":"132"},"to":{"field":"region","value":"cv"}},{"from":{"field":"region","value":"531"},"to":{"field":"region","value":"cw"}},{"from":{"field":"region","value":"162"},"to":{"field":"region","value":"cx"}},{"from":{"field":"region","value":"196"},"to":{"field":"region","value":"cy"}},{"from":{"field":"region","value":"203"},"to":{"field":"region","value":"cz"}},{"from":{"field":"region","value":"278"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"276"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"262"},"to":{"field":"region","value":"dj"}},{"from":{"field":"region","value":"208"},"to":{"field":"region","value":"dk"}},{"from":{"field":"region","value":"212"},"to":{"field":"region","value":"dm"}},{"from":{"field":"region","value":"214"},"to":{"field":"region","value":"do"}},{"from":{"field":"region","value":"012"},"to":{"field":"region","value":"dz"}},{"from":{"field":"region","value":"218"},"to":{"field":"region","value":"ec"}},{"from":{"field":"region","value":"233"},"to":{"field":"region","value":"ee"}},{"from":{"field":"region","value":"818"},"to":{"field":"region","value":"eg"}},{"from":{"field":"region","value":"732"},"to":{"field":"region","value":"eh"}},{"from":{"field":"region","value":"232"},"to":{"field":"region","value":"er"}},{"from":{"field":"region","value":"724"},"to":{"field":"region","value":"es"}},{"from":{"field":"region","value":"231"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"246"},"to":{"field":"region","value":"fi"}},{"from":{"field":"region","value":"242"},"to":{"field":"region","value":"fj"}},{"from":{"field":"region","value":"238"},"to":{"field":"region","value":"fk"}},{"from":{"field":"region","value":"583"},"to":{"field":"region","value":"fm"}},{"from":{"field":"region","value":"234"},"to":{"field":"region","value":"fo"}},{"from":{"field":"region","value":"250"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"249"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"266"},"to":{"field":"region","value":"ga"}},{"from":{"field":"region","value":"826"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"308"},"to":{"field":"region","value":"gd"}},{"from":{"field":"region","value":"268"},"to":{"field":"region","value":"ge"}},{"from":{"field":"region","value":"254"},"to":{"field":"region","value":"gf"}},{"from":{"field":"region","value":"831"},"to":{"field":"region","value":"gg"}},{"from":{"field":"region","value":"288"},"to":{"field":"region","value":"gh"}},{"from":{"field":"region","value":"292"},"to":{"field":"region","value":"gi"}},{"from":{"field":"region","value":"304"},"to":{"field":"region","value":"gl"}},{"from":{"field":"region","value":"270"},"to":{"field":"region","value":"gm"}},{"from":{"field":"region","value":"324"},"to":{"field":"region","value":"gn"}},{"from":{"field":"region","value":"312"},"to":{"field":"region","value":"gp"}},{"from":{"field":"region","value":"226"},"to":{"field":"region","value":"gq"}},{"from":{"field":"region","value":"300"},"to":{"field":"region","value":"gr"}},{"from":{"field":"region","value":"239"},"to":{"field":"region","value":"gs"}},{"from":{"field":"region","value":"320"},"to":{"field":"region","value":"gt"}},{"from":{"field":"region","value":"316"},"to":{"field":"region","value":"gu"}},{"from":{"field":"region","value":"624"},"to":{"field":"region","value":"gw"}},{"from":{"field":"region","value":"328"},"to":{"field":"region","value":"gy"}},{"from":{"field":"region","value":"344"},"to":{"field":"region","value":"hk"}},{"from":{"field":"region","value":"334"},"to":{"field":"region","value":"hm"}},{"from":{"field":"region","value":"340"},"to":{"field":"region","value":"hn"}},{"from":{"field":"region","value":"191"},"to":{"field":"region","value":"hr"}},{"from":{"field":"region","value":"332"},"to":{"field":"region","value":"ht"}},{"from":{"field":"region","value":"348"},"to":{"field":"region","value":"hu"}},{"from":{"field":"region","value":"360"},"to":{"field":"region","value":"id"}},{"from":{"field":"region","value":"372"},"to":{"field":"region","value":"ie"}},{"from":{"field":"region","value":"376"},"to":{"field":"region","value":"il"}},{"from":{"field":"region","value":"833"},"to":{"field":"region","value":"im"}},{"from":{"field":"region","value":"356"},"to":{"field":"region","value":"in"}},{"from":{"field":"region","value":"086"},"to":{"field":"region","value":"io"}},{"from":{"field":"region","value":"368"},"to":{"field":"region","value":"iq"}},{"from":{"field":"region","value":"364"},"to":{"field":"region","value":"ir"}},{"from":{"field":"region","value":"352"},"to":{"field":"region","value":"is"}},{"from":{"field":"region","value":"380"},"to":{"field":"region","value":"it"}},{"from":{"field":"region","value":"832"},"to":{"field":"region","value":"je"}},{"from":{"field":"region","value":"388"},"to":{"field":"region","value":"jm"}},{"from":{"field":"region","value":"400"},"to":{"field":"region","value":"jo"}},{"from":{"field":"region","value":"392"},"to":{"field":"region","value":"jp"}},{"from":{"field":"region","value":"404"},"to":{"field":"region","value":"ke"}},{"from":{"field":"region","value":"417"},"to":{"field":"region","value":"kg"}},{"from":{"field":"region","value":"116"},"to":{"field":"region","value":"kh"}},{"from":{"field":"region","value":"296"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"174"},"to":{"field":"region","value":"km"}},{"from":{"field":"region","value":"659"},"to":{"field":"region","value":"kn"}},{"from":{"field":"region","value":"408"},"to":{"field":"region","value":"kp"}},{"from":{"field":"region","value":"410"},"to":{"field":"region","value":"kr"}},{"from":{"field":"region","value":"414"},"to":{"field":"region","value":"kw"}},{"from":{"field":"region","value":"136"},"to":{"field":"region","value":"ky"}},{"from":{"field":"region","value":"398"},"to":{"field":"region","value":"kz"}},{"from":{"field":"region","value":"418"},"to":{"field":"region","value":"la"}},{"from":{"field":"region","value":"422"},"to":{"field":"region","value":"lb"}},{"from":{"field":"region","value":"662"},"to":{"field":"region","value":"lc"}},{"from":{"field":"region","value":"438"},"to":{"field":"region","value":"li"}},{"from":{"field":"region","value":"144"},"to":{"field":"region","value":"lk"}},{"from":{"field":"region","value":"430"},"to":{"field":"region","value":"lr"}},{"from":{"field":"region","value":"426"},"to":{"field":"region","value":"ls"}},{"from":{"field":"region","value":"440"},"to":{"field":"region","value":"lt"}},{"from":{"field":"region","value":"442"},"to":{"field":"region","value":"lu"}},{"from":{"field":"region","value":"428"},"to":{"field":"region","value":"lv"}},{"from":{"field":"region","value":"434"},"to":{"field":"region","value":"ly"}},{"from":{"field":"region","value":"504"},"to":{"field":"region","value":"ma"}},{"from":{"field":"region","value":"492"},"to":{"field":"region","value":"mc"}},{"from":{"field":"region","value":"498"},"to":{"field":"region","value":"md"}},{"from":{"field":"region","value":"499"},"to":{"field":"region","value":"me"}},{"from":{"field":"region","value":"663"},"to":{"field":"region","value":"mf"}},{"from":{"field":"region","value":"450"},"to":{"field":"region","value":"mg"}},{"from":{"field":"region","value":"584"},"to":{"field":"region","value":"mh"}},{"from":{"field":"region","value":"807"},"to":{"field":"region","value":"mk"}},{"from":{"field":"region","value":"466"},"to":{"field":"region","value":"ml"}},{"from":{"field":"region","value":"496"},"to":{"field":"region","value":"mn"}},{"from":{"field":"region","value":"446"},"to":{"field":"region","value":"mo"}},{"from":{"field":"region","value":"580"},"to":{"field":"region","value":"mp"}},{"from":{"field":"region","value":"474"},"to":{"field":"region","value":"mq"}},{"from":{"field":"region","value":"478"},"to":{"field":"region","value":"mr"}},{"from":{"field":"region","value":"500"},"to":{"field":"region","value":"ms"}},{"from":{"field":"region","value":"470"},"to":{"field":"region","value":"mt"}},{"from":{"field":"region","value":"480"},"to":{"field":"region","value":"mu"}},{"from":{"field":"region","value":"462"},"to":{"field":"region","value":"mv"}},{"from":{"field":"region","value":"454"},"to":{"field":"region","value":"mw"}},{"from":{"field":"region","value":"484"},"to":{"field":"region","value":"mx"}},{"from":{"field":"region","value":"458"},"to":{"field":"region","value":"my"}},{"from":{"field":"region","value":"508"},"to":{"field":"region","value":"mz"}},{"from":{"field":"region","value":"516"},"to":{"field":"region","value":"na"}},{"from":{"field":"region","value":"540"},"to":{"field":"region","value":"nc"}},{"from":{"field":"region","value":"562"},"to":{"field":"region","value":"ne"}},{"from":{"field":"region","value":"574"},"to":{"field":"region","value":"nf"}},{"from":{"field":"region","value":"566"},"to":{"field":"region","value":"ng"}},{"from":{"field":"region","value":"558"},"to":{"field":"region","value":"ni"}},{"from":{"field":"region","value":"528"},"to":{"field":"region","value":"nl"}},{"from":{"field":"region","value":"578"},"to":{"field":"region","value":"no"}},{"from":{"field":"region","value":"524"},"to":{"field":"region","value":"np"}},{"from":{"field":"region","value":"520"},"to":{"field":"region","value":"nr"}},{"from":{"field":"region","value":"570"},"to":{"field":"region","value":"nu"}},{"from":{"field":"region","value":"554"},"to":{"field":"region","value":"nz"}},{"from":{"field":"region","value":"512"},"to":{"field":"region","value":"om"}},{"from":{"field":"region","value":"591"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"604"},"to":{"field":"region","value":"pe"}},{"from":{"field":"region","value":"258"},"to":{"field":"region","value":"pf"}},{"from":{"field":"region","value":"598"},"to":{"field":"region","value":"pg"}},{"from":{"field":"region","value":"608"},"to":{"field":"region","value":"ph"}},{"from":{"field":"region","value":"586"},"to":{"field":"region","value":"pk"}},{"from":{"field":"region","value":"616"},"to":{"field":"region","value":"pl"}},{"from":{"field":"region","value":"666"},"to":{"field":"region","value":"pm"}},{"from":{"field":"region","value":"612"},"to":{"field":"region","value":"pn"}},{"from":{"field":"region","value":"630"},"to":{"field":"region","value":"pr"}},{"from":{"field":"region","value":"275"},"to":{"field":"region","value":"ps"}},{"from":{"field":"region","value":"620"},"to":{"field":"region","value":"pt"}},{"from":{"field":"region","value":"585"},"to":{"field":"region","value":"pw"}},{"from":{"field":"region","value":"600"},"to":{"field":"region","value":"py"}},{"from":{"field":"region","value":"634"},"to":{"field":"region","value":"qa"}},{"from":{"field":"region","value":"959"},"to":{"field":"region","value":"qm"}},{"from":{"field":"region","value":"960"},"to":{"field":"region","value":"qn"}},{"from":{"field":"region","value":"962"},"to":{"field":"region","value":"qp"}},{"from":{"field":"region","value":"963"},"to":{"field":"region","value":"qq"}},{"from":{"field":"region","value":"964"},"to":{"field":"region","value":"qr"}},{"from":{"field":"region","value":"965"},"to":{"field":"region","value":"qs"}},{"from":{"field":"region","value":"966"},"to":{"field":"region","value":"qt"}},{"from":{"field":"region","value":"967"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"968"},"to":{"field":"region","value":"qv"}},{"from":{"field":"region","value":"969"},"to":{"field":"region","value":"qw"}},{"from":{"field":"region","value":"970"},"to":{"field":"region","value":"qx"}},{"from":{"field":"region","value":"971"},"to":{"field":"region","value":"qy"}},{"from":{"field":"region","value":"972"},"to":{"field":"region","value":"qz"}},{"from":{"field":"region","value":"638"},"to":{"field":"region","value":"re"}},{"from":{"field":"region","value":"642"},"to":{"field":"region","value":"ro"}},{"from":{"field":"region","value":"688"},"to":{"field":"region","value":"rs"}},{"from":{"field":"region","value":"643"},"to":{"field":"region","value":"ru"}},{"from":{"field":"region","value":"646"},"to":{"field":"region","value":"rw"}},{"from":{"field":"region","value":"682"},"to":{"field":"region","value":"sa"}},{"from":{"field":"region","value":"090"},"to":{"field":"region","value":"sb"}},{"from":{"field":"region","value":"690"},"to":{"field":"region","value":"sc"}},{"from":{"field":"region","value":"729"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"752"},"to":{"field":"region","value":"se"}},{"from":{"field":"region","value":"702"},"to":{"field":"region","value":"sg"}},{"from":{"field":"region","value":"654"},"to":{"field":"region","value":"sh"}},{"from":{"field":"region","value":"705"},"to":{"field":"region","value":"si"}},{"from":{"field":"region","value":"744"},"to":{"field":"region","value":"sj"}},{"from":{"field":"region","value":"703"},"to":{"field":"region","value":"sk"}},{"from":{"field":"region","value":"694"},"to":{"field":"region","value":"sl"}},{"from":{"field":"region","value":"674"},"to":{"field":"region","value":"sm"}},{"from":{"field":"region","value":"686"},"to":{"field":"region","value":"sn"}},{"from":{"field":"region","value":"706"},"to":{"field":"region","value":"so"}},{"from":{"field":"region","value":"740"},"to":{"field":"region","value":"sr"}},{"from":{"field":"region","value":"728"},"to":{"field":"region","value":"ss"}},{"from":{"field":"region","value":"678"},"to":{"field":"region","value":"st"}},{"from":{"field":"region","value":"222"},"to":{"field":"region","value":"sv"}},{"from":{"field":"region","value":"534"},"to":{"field":"region","value":"sx"}},{"from":{"field":"region","value":"760"},"to":{"field":"region","value":"sy"}},{"from":{"field":"region","value":"748"},"to":{"field":"region","value":"sz"}},{"from":{"field":"region","value":"796"},"to":{"field":"region","value":"tc"}},{"from":{"field":"region","value":"148"},"to":{"field":"region","value":"td"}},{"from":{"field":"region","value":"260"},"to":{"field":"region","value":"tf"}},{"from":{"field":"region","value":"768"},"to":{"field":"region","value":"tg"}},{"from":{"field":"region","value":"764"},"to":{"field":"region","value":"th"}},{"from":{"field":"region","value":"762"},"to":{"field":"region","value":"tj"}},{"from":{"field":"region","value":"772"},"to":{"field":"region","value":"tk"}},{"from":{"field":"region","value":"626"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"795"},"to":{"field":"region","value":"tm"}},{"from":{"field":"region","value":"788"},"to":{"field":"region","value":"tn"}},{"from":{"field":"region","value":"776"},"to":{"field":"region","value":"to"}},{"from":{"field":"region","value":"792"},"to":{"field":"region","value":"tr"}},{"from":{"field":"region","value":"780"},"to":{"field":"region","value":"tt"}},{"from":{"field":"region","value":"798"},"to":{"field":"region","value":"tv"}},{"from":{"field":"region","value":"158"},"to":{"field":"region","value":"tw"}},{"from":{"field":"region","value":"834"},"to":{"field":"region","value":"tz"}},{"from":{"field":"region","value":"804"},"to":{"field":"region","value":"ua"}},{"from":{"field":"region","value":"800"},"to":{"field":"region","value":"ug"}},{"from":{"field":"region","value":"581"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"840"},"to":{"field":"region","value":"us"}},{"from":{"field":"region","value":"858"},"to":{"field":"region","value":"uy"}},{"from":{"field":"region","value":"860"},"to":{"field":"region","value":"uz"}},{"from":{"field":"region","value":"336"},"to":{"field":"region","value":"va"}},{"from":{"field":"region","value":"670"},"to":{"field":"region","value":"vc"}},{"from":{"field":"region","value":"862"},"to":{"field":"region","value":"ve"}},{"from":{"field":"region","value":"092"},"to":{"field":"region","value":"vg"}},{"from":{"field":"region","value":"850"},"to":{"field":"region","value":"vi"}},{"from":{"field":"region","value":"704"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"548"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"876"},"to":{"field":"region","value":"wf"}},{"from":{"field":"region","value":"882"},"to":{"field":"region","value":"ws"}},{"from":{"field":"region","value":"973"},"to":{"field":"region","value":"xa"}},{"from":{"field":"region","value":"974"},"to":{"field":"region","value":"xb"}},{"from":{"field":"region","value":"975"},"to":{"field":"region","value":"xc"}},{"from":{"field":"region","value":"976"},"to":{"field":"region","value":"xd"}},{"from":{"field":"region","value":"977"},"to":{"field":"region","value":"xe"}},{"from":{"field":"region","value":"978"},"to":{"field":"region","value":"xf"}},{"from":{"field":"region","value":"979"},"to":{"field":"region","value":"xg"}},{"from":{"field":"region","value":"980"},"to":{"field":"region","value":"xh"}},{"from":{"field":"region","value":"981"},"to":{"field":"region","value":"xi"}},{"from":{"field":"region","value":"982"},"to":{"field":"region","value":"xj"}},{"from":{"field":"region","value":"983"},"to":{"field":"region","value":"xk"}},{"from":{"field":"region","value":"984"},"to":{"field":"region","value":"xl"}},{"from":{"field":"region","value":"985"},"to":{"field":"region","value":"xm"}},{"from":{"field":"region","value":"986"},"to":{"field":"region","value":"xn"}},{"from":{"field":"region","value":"987"},"to":{"field":"region","value":"xo"}},{"from":{"field":"region","value":"988"},"to":{"field":"region","value":"xp"}},{"from":{"field":"region","value":"989"},"to":{"field":"region","value":"xq"}},{"from":{"field":"region","value":"990"},"to":{"field":"region","value":"xr"}},{"from":{"field":"region","value":"991"},"to":{"field":"region","value":"xs"}},{"from":{"field":"region","value":"992"},"to":{"field":"region","value":"xt"}},{"from":{"field":"region","value":"993"},"to":{"field":"region","value":"xu"}},{"from":{"field":"region","value":"994"},"to":{"field":"region","value":"xv"}},{"from":{"field":"region","value":"995"},"to":{"field":"region","value":"xw"}},{"from":{"field":"region","value":"996"},"to":{"field":"region","value":"xx"}},{"from":{"field":"region","value":"997"},"to":{"field":"region","value":"xy"}},{"from":{"field":"region","value":"998"},"to":{"field":"region","value":"xz"}},{"from":{"field":"region","value":"720"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"887"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"175"},"to":{"field":"region","value":"yt"}},{"from":{"field":"region","value":"710"},"to":{"field":"region","value":"za"}},{"from":{"field":"region","value":"894"},"to":{"field":"region","value":"zm"}},{"from":{"field":"region","value":"716"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"999"},"to":{"field":"region","value":"zz"}},{"from":{"field":"variants","value":"aaland"},"to":{"field":"region","value":"ax"}},{"from":{"field":"variants","value":"polytoni"},"to":{"field":"variants","value":"polyton"}},{"from":{"field":"variants","value":"heploc"},"to":{"field":"variants","value":"alalc97"}},{"from":{"field":"variants","value":"arevela"},"to":{"field":"language","value":"hy"}},{"from":{"field":"variants","value":"arevmda"},"to":{"field":"language","value":"hyw"}}]')},"./node_modules/bcp-47-normalize/lib/many.json":function(e){"use strict";e.exports=JSON.parse('{"region":{"172":["ru","am","az","by","ge","kg","kz","md","tj","tm","ua","uz"],"200":["cz","sk"],"530":["cw","sx","bq"],"532":["cw","sx","bq"],"536":["sa","iq"],"582":["fm","mh","mp","pw"],"810":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"830":["je","gg"],"890":["rs","me","si","hr","mk","ba"],"891":["rs","me"],"an":["cw","sx","bq"],"cs":["rs","me"],"fq":["aq","tf"],"nt":["sa","iq"],"pc":["fm","mh","mp","pw"],"su":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yu":["rs","me"],"062":["034","143"],"ant":["cw","sx","bq"],"scg":["rs","me"],"ntz":["sa","iq"],"sun":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yug":["rs","me"]}}')},"./node_modules/bcp-47-normalize/lib/matches.json":function(e){"use strict";e.exports=JSON.parse('[{"from":"in","to":"id"},{"from":"iw","to":"he"},{"from":"ji","to":"yi"},{"from":"jw","to":"jv"},{"from":"mo","to":"ro"},{"from":"scc","to":"sr"},{"from":"scr","to":"hr"},{"from":"aam","to":"aas"},{"from":"adp","to":"dz"},{"from":"aue","to":"ktz"},{"from":"ayx","to":"nun"},{"from":"bgm","to":"bcg"},{"from":"bjd","to":"drl"},{"from":"ccq","to":"rki"},{"from":"cjr","to":"mom"},{"from":"cka","to":"cmr"},{"from":"cmk","to":"xch"},{"from":"coy","to":"pij"},{"from":"cqu","to":"quh"},{"from":"drh","to":"mn"},{"from":"drw","to":"fa-af"},{"from":"gav","to":"dev"},{"from":"gfx","to":"vaj"},{"from":"ggn","to":"gvr"},{"from":"gti","to":"nyc"},{"from":"guv","to":"duz"},{"from":"hrr","to":"jal"},{"from":"ibi","to":"opa"},{"from":"ilw","to":"gal"},{"from":"jeg","to":"oyb"},{"from":"kgc","to":"tdf"},{"from":"kgh","to":"kml"},{"from":"koj","to":"kwv"},{"from":"krm","to":"bmf"},{"from":"ktr","to":"dtp"},{"from":"kvs","to":"gdj"},{"from":"kwq","to":"yam"},{"from":"kxe","to":"tvd"},{"from":"kzj","to":"dtp"},{"from":"kzt","to":"dtp"},{"from":"lii","to":"raq"},{"from":"lmm","to":"rmx"},{"from":"meg","to":"cir"},{"from":"mst","to":"mry"},{"from":"mwj","to":"vaj"},{"from":"myt","to":"mry"},{"from":"nad","to":"xny"},{"from":"ncp","to":"kdz"},{"from":"nnx","to":"ngv"},{"from":"nts","to":"pij"},{"from":"oun","to":"vaj"},{"from":"pcr","to":"adx"},{"from":"pmc","to":"huw"},{"from":"pmu","to":"phr"},{"from":"ppa","to":"bfy"},{"from":"ppr","to":"lcq"},{"from":"pry","to":"prt"},{"from":"puz","to":"pub"},{"from":"sca","to":"hle"},{"from":"skk","to":"oyb"},{"from":"tdu","to":"dtp"},{"from":"thc","to":"tpo"},{"from":"thx","to":"oyb"},{"from":"tie","to":"ras"},{"from":"tkk","to":"twm"},{"from":"tlw","to":"weo"},{"from":"tmp","to":"tyj"},{"from":"tne","to":"kak"},{"from":"tnf","to":"fa-af"},{"from":"tsf","to":"taj"},{"from":"uok","to":"ema"},{"from":"xba","to":"cax"},{"from":"xia","to":"acn"},{"from":"xkh","to":"waw"},{"from":"xsj","to":"suj"},{"from":"ybd","to":"rki"},{"from":"yma","to":"lrr"},{"from":"ymt","to":"mtm"},{"from":"yos","to":"zom"},{"from":"yuu","to":"yug"},{"from":"asd","to":"snz"},{"from":"dit","to":"dif"},{"from":"llo","to":"ngt"},{"from":"myd","to":"aog"},{"from":"nns","to":"nbr"},{"from":"sgn-br","to":"bzs"},{"from":"sgn-co","to":"csn"},{"from":"sgn-de","to":"gsg"},{"from":"sgn-dk","to":"dsl"},{"from":"sgn-fr","to":"fsl"},{"from":"sgn-gb","to":"bfi"},{"from":"sgn-gr","to":"gss"},{"from":"sgn-ie","to":"isg"},{"from":"sgn-it","to":"ise"},{"from":"sgn-jp","to":"jsl"},{"from":"sgn-mx","to":"mfs"},{"from":"sgn-ni","to":"ncs"},{"from":"sgn-nl","to":"dse"},{"from":"sgn-no","to":"nsi"},{"from":"sgn-pt","to":"psr"},{"from":"sgn-se","to":"swl"},{"from":"sgn-us","to":"ase"},{"from":"sgn-za","to":"sfs"},{"from":"no-bokmal","to":"nb"},{"from":"no-nynorsk","to":"nn"},{"from":"aa-saaho","to":"ssy"},{"from":"sh","to":"sr-latn"},{"from":"cnr","to":"sr-me"},{"from":"no","to":"nb"},{"from":"tl","to":"fil"},{"from":"az-az","to":"az-latn-az"},{"from":"bs-ba","to":"bs-latn-ba"},{"from":"ha-latn-gh","to":"ha-gh"},{"from":"ha-latn-ne","to":"ha-ne"},{"from":"ha-latn-ng","to":"ha-ng"},{"from":"kk-cyrl-kz","to":"kk-kz"},{"from":"ky-cyrl-kg","to":"ky-kg"},{"from":"ks-arab-in","to":"ks-in"},{"from":"mn-cyrl-mn","to":"mn-mn"},{"from":"ms-latn-bn","to":"ms-bn"},{"from":"ms-latn-my","to":"ms-my"},{"from":"ms-latn-sg","to":"ms-sg"},{"from":"pa-in","to":"pa-guru-in"},{"from":"pa-pk","to":"pa-arab-pk"},{"from":"shi-ma","to":"shi-tfng-ma"},{"from":"sr-ba","to":"sr-cyrl-ba"},{"from":"sr-me","to":"sr-latn-me"},{"from":"sr-rs","to":"sr-cyrl-rs"},{"from":"sr-xk","to":"sr-cyrl-xk"},{"from":"tzm-latn-ma","to":"tzm-ma"},{"from":"ug-arab-cn","to":"ug-cn"},{"from":"uz-af","to":"uz-arab-af"},{"from":"uz-uz","to":"uz-latn-uz"},{"from":"vai-lr","to":"vai-vaii-lr"},{"from":"yue-cn","to":"yue-hans-cn"},{"from":"yue-hk","to":"yue-hant-hk"},{"from":"zh-cn","to":"zh-hans-cn"},{"from":"zh-hk","to":"zh-hant-hk"},{"from":"zh-mo","to":"zh-hant-mo"},{"from":"zh-sg","to":"zh-hans-sg"},{"from":"zh-tw","to":"zh-hant-tw"},{"from":"aju","to":"jrb"},{"from":"als","to":"sq"},{"from":"arb","to":"ar"},{"from":"ayr","to":"ay"},{"from":"azj","to":"az"},{"from":"bcc","to":"bal"},{"from":"bcl","to":"bik"},{"from":"bxk","to":"luy"},{"from":"bxr","to":"bua"},{"from":"cld","to":"syr"},{"from":"cmn","to":"zh"},{"from":"cwd","to":"cr"},{"from":"dgo","to":"doi"},{"from":"dhd","to":"mwr"},{"from":"dik","to":"din"},{"from":"diq","to":"zza"},{"from":"lbk","to":"bnc"},{"from":"ekk","to":"et"},{"from":"emk","to":"man"},{"from":"esk","to":"ik"},{"from":"fat","to":"ak"},{"from":"fuc","to":"ff"},{"from":"gaz","to":"om"},{"from":"gbo","to":"grb"},{"from":"gno","to":"gon"},{"from":"gug","to":"gn"},{"from":"gya","to":"gba"},{"from":"hdn","to":"hai"},{"from":"hea","to":"hmn"},{"from":"ike","to":"iu"},{"from":"kmr","to":"ku"},{"from":"knc","to":"kr"},{"from":"kng","to":"kg"},{"from":"knn","to":"kok"},{"from":"kpv","to":"kv"},{"from":"lvs","to":"lv"},{"from":"mhr","to":"chm"},{"from":"mup","to":"raj"},{"from":"khk","to":"mn"},{"from":"npi","to":"ne"},{"from":"ojg","to":"oj"},{"from":"ory","to":"or"},{"from":"pbu","to":"ps"},{"from":"pes","to":"fa"},{"from":"plt","to":"mg"},{"from":"pnb","to":"lah"},{"from":"quz","to":"qu"},{"from":"rmy","to":"rom"},{"from":"spy","to":"kln"},{"from":"src","to":"sc"},{"from":"swh","to":"sw"},{"from":"ttq","to":"tmh"},{"from":"tw","to":"ak"},{"from":"umu","to":"del"},{"from":"uzn","to":"uz"},{"from":"xpe","to":"kpe"},{"from":"xsl","to":"den"},{"from":"ydd","to":"yi"},{"from":"zai","to":"zap"},{"from":"zsm","to":"ms"},{"from":"zyb","to":"za"},{"from":"him","to":"srx"},{"from":"mnk","to":"man"},{"from":"bh","to":"bho"},{"from":"prs","to":"fa-af"},{"from":"swc","to":"sw-cd"},{"from":"aar","to":"aa"},{"from":"abk","to":"ab"},{"from":"ave","to":"ae"},{"from":"afr","to":"af"},{"from":"aka","to":"ak"},{"from":"amh","to":"am"},{"from":"arg","to":"an"},{"from":"ara","to":"ar"},{"from":"asm","to":"as"},{"from":"ava","to":"av"},{"from":"aym","to":"ay"},{"from":"aze","to":"az"},{"from":"bak","to":"ba"},{"from":"bel","to":"be"},{"from":"bul","to":"bg"},{"from":"bih","to":"bho"},{"from":"bis","to":"bi"},{"from":"bam","to":"bm"},{"from":"ben","to":"bn"},{"from":"bod","to":"bo"},{"from":"bre","to":"br"},{"from":"bos","to":"bs"},{"from":"cat","to":"ca"},{"from":"che","to":"ce"},{"from":"cha","to":"ch"},{"from":"cos","to":"co"},{"from":"cre","to":"cr"},{"from":"ces","to":"cs"},{"from":"chu","to":"cu"},{"from":"chv","to":"cv"},{"from":"cym","to":"cy"},{"from":"dan","to":"da"},{"from":"deu","to":"de"},{"from":"div","to":"dv"},{"from":"dzo","to":"dz"},{"from":"ewe","to":"ee"},{"from":"ell","to":"el"},{"from":"eng","to":"en"},{"from":"epo","to":"eo"},{"from":"spa","to":"es"},{"from":"est","to":"et"},{"from":"eus","to":"eu"},{"from":"fas","to":"fa"},{"from":"ful","to":"ff"},{"from":"fin","to":"fi"},{"from":"fij","to":"fj"},{"from":"fao","to":"fo"},{"from":"fra","to":"fr"},{"from":"fry","to":"fy"},{"from":"gle","to":"ga"},{"from":"gla","to":"gd"},{"from":"glg","to":"gl"},{"from":"grn","to":"gn"},{"from":"guj","to":"gu"},{"from":"glv","to":"gv"},{"from":"hau","to":"ha"},{"from":"heb","to":"he"},{"from":"hin","to":"hi"},{"from":"hmo","to":"ho"},{"from":"hrv","to":"hr"},{"from":"hat","to":"ht"},{"from":"hun","to":"hu"},{"from":"hye","to":"hy"},{"from":"her","to":"hz"},{"from":"ina","to":"ia"},{"from":"ind","to":"id"},{"from":"ile","to":"ie"},{"from":"ibo","to":"ig"},{"from":"iii","to":"ii"},{"from":"ipk","to":"ik"},{"from":"ido","to":"io"},{"from":"isl","to":"is"},{"from":"ita","to":"it"},{"from":"iku","to":"iu"},{"from":"jpn","to":"ja"},{"from":"jav","to":"jv"},{"from":"kat","to":"ka"},{"from":"kon","to":"kg"},{"from":"kik","to":"ki"},{"from":"kua","to":"kj"},{"from":"kaz","to":"kk"},{"from":"kal","to":"kl"},{"from":"khm","to":"km"},{"from":"kan","to":"kn"},{"from":"kor","to":"ko"},{"from":"kau","to":"kr"},{"from":"kas","to":"ks"},{"from":"kur","to":"ku"},{"from":"kom","to":"kv"},{"from":"cor","to":"kw"},{"from":"kir","to":"ky"},{"from":"lat","to":"la"},{"from":"ltz","to":"lb"},{"from":"lug","to":"lg"},{"from":"lim","to":"li"},{"from":"lin","to":"ln"},{"from":"lao","to":"lo"},{"from":"lit","to":"lt"},{"from":"lub","to":"lu"},{"from":"lav","to":"lv"},{"from":"mlg","to":"mg"},{"from":"mah","to":"mh"},{"from":"mri","to":"mi"},{"from":"mkd","to":"mk"},{"from":"mal","to":"ml"},{"from":"mon","to":"mn"},{"from":"mol","to":"ro"},{"from":"mar","to":"mr"},{"from":"msa","to":"ms"},{"from":"mlt","to":"mt"},{"from":"mya","to":"my"},{"from":"nau","to":"na"},{"from":"nob","to":"nb"},{"from":"nde","to":"nd"},{"from":"nep","to":"ne"},{"from":"ndo","to":"ng"},{"from":"nld","to":"nl"},{"from":"nno","to":"nn"},{"from":"nor","to":"nb"},{"from":"nbl","to":"nr"},{"from":"nav","to":"nv"},{"from":"nya","to":"ny"},{"from":"oci","to":"oc"},{"from":"oji","to":"oj"},{"from":"orm","to":"om"},{"from":"ori","to":"or"},{"from":"oss","to":"os"},{"from":"pan","to":"pa"},{"from":"pli","to":"pi"},{"from":"pol","to":"pl"},{"from":"pus","to":"ps"},{"from":"por","to":"pt"},{"from":"que","to":"qu"},{"from":"roh","to":"rm"},{"from":"run","to":"rn"},{"from":"ron","to":"ro"},{"from":"rus","to":"ru"},{"from":"kin","to":"rw"},{"from":"san","to":"sa"},{"from":"srd","to":"sc"},{"from":"snd","to":"sd"},{"from":"sme","to":"se"},{"from":"sag","to":"sg"},{"from":"hbs","to":"sr-latn"},{"from":"sin","to":"si"},{"from":"slk","to":"sk"},{"from":"slv","to":"sl"},{"from":"smo","to":"sm"},{"from":"sna","to":"sn"},{"from":"som","to":"so"},{"from":"sqi","to":"sq"},{"from":"srp","to":"sr"},{"from":"ssw","to":"ss"},{"from":"sot","to":"st"},{"from":"sun","to":"su"},{"from":"swe","to":"sv"},{"from":"swa","to":"sw"},{"from":"tam","to":"ta"},{"from":"tel","to":"te"},{"from":"tgk","to":"tg"},{"from":"tha","to":"th"},{"from":"tir","to":"ti"},{"from":"tuk","to":"tk"},{"from":"tgl","to":"fil"},{"from":"tsn","to":"tn"},{"from":"ton","to":"to"},{"from":"tur","to":"tr"},{"from":"tso","to":"ts"},{"from":"tat","to":"tt"},{"from":"twi","to":"ak"},{"from":"tah","to":"ty"},{"from":"uig","to":"ug"},{"from":"ukr","to":"uk"},{"from":"urd","to":"ur"},{"from":"uzb","to":"uz"},{"from":"ven","to":"ve"},{"from":"vie","to":"vi"},{"from":"vol","to":"vo"},{"from":"wln","to":"wa"},{"from":"wol","to":"wo"},{"from":"xho","to":"xh"},{"from":"yid","to":"yi"},{"from":"yor","to":"yo"},{"from":"zha","to":"za"},{"from":"zho","to":"zh"},{"from":"zul","to":"zu"},{"from":"alb","to":"sq"},{"from":"arm","to":"hy"},{"from":"baq","to":"eu"},{"from":"bur","to":"my"},{"from":"chi","to":"zh"},{"from":"cze","to":"cs"},{"from":"dut","to":"nl"},{"from":"fre","to":"fr"},{"from":"geo","to":"ka"},{"from":"ger","to":"de"},{"from":"gre","to":"el"},{"from":"ice","to":"is"},{"from":"mac","to":"mk"},{"from":"mao","to":"mi"},{"from":"may","to":"ms"},{"from":"per","to":"fa"},{"from":"rum","to":"ro"},{"from":"slo","to":"sk"},{"from":"tib","to":"bo"},{"from":"wel","to":"cy"}]')},"./node_modules/bcp-47/lib/normalize.json":function(e){"use strict";e.exports=JSON.parse('{"en-gb-oed":"en-GB-oxendict","i-ami":"ami","i-bnn":"bnn","i-default":null,"i-enochian":null,"i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-mingo":null,"i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","sgn-be-fr":"sfb","sgn-be-nl":"vgt","sgn-ch-de":"sgg","art-lojban":"jbo","cel-gaulish":null,"no-bok":"nb","no-nyn":"nn","zh-guoyu":"cmn","zh-hakka":"hak","zh-min":null,"zh-min-nan":"nan","zh-xiang":"hsn"}')},"./node_modules/bcp-47/lib/regular.json":function(e){"use strict";e.exports=JSON.parse('["art-lojban","cel-gaulish","no-bok","no-nyn","zh-guoyu","zh-hakka","zh-min","zh-min-nan","zh-xiang"]')}},n={},o.amdO={},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,{a:t}),t},o.d=function(e,t){for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u={},function(){"use strict";o.r(u),o.d(u,{Debug:function(){return a.default},MediaPlayer:function(){return e.MediaPlayer},MediaPlayerFactory:function(){return i.default},MetricsReporting:function(){return r.default},Protection:function(){return n.default},supportsMediaSource:function(){return t.supportsMediaSource}});var e=o("./index_mediaplayerOnly.js"),t=o("./src/streaming/utils/Capabilities.js"),r=o("./src/streaming/metrics/MetricsReporting.js"),n=o("./src/streaming/protection/Protection.js"),i=o("./src/streaming/MediaPlayerFactory.js"),a=o("./src/core/Debug.js");dashjs.Protection=n.default,dashjs.MetricsReporting=r.default,dashjs.MediaPlayerFactory=i.default,dashjs.Debug=a.default,dashjs.supportsMediaSource=t.supportsMediaSource,u.default=dashjs}(),u=u.default;function o(e){var t=n[e];if(void 0!==t)return t.exports;t=n[e]={exports:{}};return r[e].call(t.exports,t,t.exports,o),t.exports}var r,n,u});

!function t(e){var r,i;r=this,i=function(){"use strict";function r(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function i(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){s(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function n(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,m(i.key),i)}}function a(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t,e,r){return(e=m(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o(){return o=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},o.apply(this,arguments)}function l(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,h(t,e)}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},u(t)}function h(t,e){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},h(t,e)}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function c(t,e,r){return c=d()?Reflect.construct.bind():function(t,e,r){var i=[null];i.push.apply(i,e);var n=new(Function.bind.apply(t,i));return r&&h(n,r.prototype),n},c.apply(null,arguments)}function f(t){var e="function"==typeof Map?new Map:void 0;return f=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,i)}function i(){return c(t,arguments,u(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),h(i,t)},f(t)}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}function v(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return g(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}function p(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var y={exports:{}};!function(t,e){var r,i,n,a,s;r=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,n=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,s={buildAbsoluteURL:function(t,e,r){if(r=r||{},t=t.trim(),!(e=e.trim())){if(!r.alwaysNormalize)return t;var n=s.parseURL(t);if(!n)throw new Error("Error trying to parse base URL.");return n.path=s.normalizePath(n.path),s.buildURLFromParts(n)}var a=s.parseURL(e);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return r.alwaysNormalize?(a.path=s.normalizePath(a.path),s.buildURLFromParts(a)):e;var o=s.parseURL(t);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var l=i.exec(o.path);o.netLoc=l[1],o.path=l[2]}o.netLoc&&!o.path&&(o.path="/");var u={scheme:o.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(u.netLoc=o.netLoc,"/"!==a.path[0]))if(a.path){var h=o.path,d=h.substring(0,h.lastIndexOf("/")+1)+a.path;u.path=s.normalizePath(d)}else u.path=o.path,a.params||(u.params=o.params,a.query||(u.query=o.query));return null===u.path&&(u.path=r.alwaysNormalize?s.normalizePath(a.path):a.path),s.buildURLFromParts(u)},parseURL:function(t){var e=r.exec(t);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(n,"");t.length!==(t=t.replace(a,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}},t.exports=s}(y);var T=y.exports,E=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},S=function(t){return t.MEDIA_ATTACHING="hlsMediaAttaching",t.MEDIA_ATTACHED="hlsMediaAttached",t.MEDIA_DETACHING="hlsMediaDetaching",t.MEDIA_DETACHED="hlsMediaDetached",t.BUFFER_RESET="hlsBufferReset",t.BUFFER_CODECS="hlsBufferCodecs",t.BUFFER_CREATED="hlsBufferCreated",t.BUFFER_APPENDING="hlsBufferAppending",t.BUFFER_APPENDED="hlsBufferAppended",t.BUFFER_EOS="hlsBufferEos",t.BUFFER_FLUSHING="hlsBufferFlushing",t.BUFFER_FLUSHED="hlsBufferFlushed",t.MANIFEST_LOADING="hlsManifestLoading",t.MANIFEST_LOADED="hlsManifestLoaded",t.MANIFEST_PARSED="hlsManifestParsed",t.LEVEL_SWITCHING="hlsLevelSwitching",t.LEVEL_SWITCHED="hlsLevelSwitched",t.LEVEL_LOADING="hlsLevelLoading",t.LEVEL_LOADED="hlsLevelLoaded",t.LEVEL_UPDATED="hlsLevelUpdated",t.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",t.LEVELS_UPDATED="hlsLevelsUpdated",t.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",t.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",t.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",t.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",t.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",t.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",t.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",t.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",t.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",t.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",t.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",t.CUES_PARSED="hlsCuesParsed",t.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",t.INIT_PTS_FOUND="hlsInitPtsFound",t.FRAG_LOADING="hlsFragLoading",t.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",t.FRAG_LOADED="hlsFragLoaded",t.FRAG_DECRYPTED="hlsFragDecrypted",t.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",t.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",t.FRAG_PARSING_METADATA="hlsFragParsingMetadata",t.FRAG_PARSED="hlsFragParsed",t.FRAG_BUFFERED="hlsFragBuffered",t.FRAG_CHANGED="hlsFragChanged",t.FPS_DROP="hlsFpsDrop",t.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",t.ERROR="hlsError",t.DESTROYING="hlsDestroying",t.KEY_LOADING="hlsKeyLoading",t.KEY_LOADED="hlsKeyLoaded",t.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",t.BACK_BUFFER_REACHED="hlsBackBufferReached",t}({}),L=function(t){return t.NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError",t}({}),R=function(t){return t.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",t.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",t.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",t.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_EMPTY_ERROR="levelEmptyError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_PARSING_ERROR="levelParsingError",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",t.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.FRAG_GAP="fragGap",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.INTERNAL_EXCEPTION="internalException",t.INTERNAL_ABORTED="aborted",t.UNKNOWN="unknown",t}({}),A=function(){},k={trace:A,debug:A,log:A,warn:A,info:A,error:A},b=k;function D(t){var e=self.console[t];return e?e.bind(self.console,"["+t+"] >"):A}function I(t,e){if(self.console&&!0===t||"object"==typeof t){!function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];r.forEach((function(e){b[e]=t[e]?t[e].bind(t):D(e)}))}(t,"debug","log","info","warn","error");try{b.log('Debug logs enabled for "'+e+'" in hls.js version 1.4.12')}catch(t){b=k}}else b=k}var w=b,C=/^(\d+)x(\d+)$/,_=/(.+?)=(".*?"|.*?)(?:,|$)/g,P=function(){function t(e){for(var r in"string"==typeof e&&(e=t.parseAttrList(e)),e)e.hasOwnProperty(r)&&("X-"===r.substring(0,2)&&(this.clientAttrs=this.clientAttrs||[],this.clientAttrs.push(r)),this[r]=e[r])}var e=t.prototype;return e.decimalInteger=function(t){var e=parseInt(this[t],10);return e>Number.MAX_SAFE_INTEGER?1/0:e},e.hexadecimalInteger=function(t){if(this[t]){var e=(this[t]||"0x").slice(2);e=(1&e.length?"0":"")+e;for(var r=new Uint8Array(e.length/2),i=0;i<e.length/2;i++)r[i]=parseInt(e.slice(2*i,2*i+2),16);return r}return null},e.hexadecimalIntegerAsNumber=function(t){var e=parseInt(this[t],16);return e>Number.MAX_SAFE_INTEGER?1/0:e},e.decimalFloatingPoint=function(t){return parseFloat(this[t])},e.optionalFloat=function(t,e){var r=this[t];return r?parseFloat(r):e},e.enumeratedString=function(t){return this[t]},e.bool=function(t){return"YES"===this[t]},e.decimalResolution=function(t){var e=C.exec(this[t]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}},t.parseAttrList=function(t){var e,r={};for(_.lastIndex=0;null!==(e=_.exec(t));){var i=e[2];0===i.indexOf('"')&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),r[e[1].trim()]=i}return r},t}();function x(t){return"SCTE35-OUT"===t||"SCTE35-IN"===t}var F=function(){function t(t,e){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,e){var r=e.attr;for(var i in r)if(Object.prototype.hasOwnProperty.call(t,i)&&t[i]!==r[i]){w.warn('DATERANGE tag attribute: "'+i+'" does not match for tags with ID: "'+t.ID+'"'),this._badValueForSameId=i;break}t=o(new P({}),r,t)}if(this.attr=t,this._startDate=new Date(t["START-DATE"]),"END-DATE"in this.attr){var n=new Date(this.attr["END-DATE"]);E(n.getTime())&&(this._endDate=n)}}return a(t,[{key:"id",get:function(){return this.attr.ID}},{key:"class",get:function(){return this.attr.CLASS}},{key:"startDate",get:function(){return this._startDate}},{key:"endDate",get:function(){if(this._endDate)return this._endDate;var t=this.duration;return null!==t?new Date(this._startDate.getTime()+1e3*t):null}},{key:"duration",get:function(){if("DURATION"in this.attr){var t=this.attr.decimalFloatingPoint("DURATION");if(E(t))return t}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}},{key:"plannedDuration",get:function(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}},{key:"endOnNext",get:function(){return this.attr.bool("END-ON-NEXT")}},{key:"isValid",get:function(){return!!this.id&&!this._badValueForSameId&&E(this.startDate.getTime())&&(null===this.duration||this.duration>=0)&&(!this.endOnNext||!!this.class)}}]),t}(),M=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}},O="audio",N="video",U="audiovideo",B=function(){function t(t){var e;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=((e={})[O]=null,e[N]=null,e[U]=null,e),this.baseurl=t}return t.prototype.setByteRange=function(t,e){var r=t.split("@",2),i=[];1===r.length?i[0]=e?e.byteRangeEndOffset:0:i[0]=parseInt(r[1]),i[1]=parseInt(r[0])+i[0],this._byteRange=i},a(t,[{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=T.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(t){this._url=t}}]),t}(),G=function(t){function e(e,r){var i;return(i=t.call(this,r)||this)._decryptdata=null,i.rawProgramDateTime=null,i.programDateTime=null,i.tagList=[],i.duration=0,i.sn=0,i.levelkeys=void 0,i.type=void 0,i.loader=null,i.keyLoader=null,i.level=-1,i.cc=0,i.startPTS=void 0,i.endPTS=void 0,i.startDTS=void 0,i.endDTS=void 0,i.start=0,i.deltaPTS=void 0,i.maxStartPTS=void 0,i.minEndPTS=void 0,i.stats=new M,i.urlId=0,i.data=void 0,i.bitrateTest=!1,i.title=null,i.initSegment=null,i.endList=void 0,i.gap=void 0,i.type=e,i}l(e,t);var r=e.prototype;return r.setKeyFormat=function(t){if(this.levelkeys){var e=this.levelkeys[t];e&&!this._decryptdata&&(this._decryptdata=e.getDecryptData(this.sn))}},r.abortRequests=function(){var t,e;null==(t=this.loader)||t.abort(),null==(e=this.keyLoader)||e.abort()},r.setElementaryStreamInfo=function(t,e,r,i,n,a){void 0===a&&(a=!1);var s=this.elementaryStreams,o=s[t];o?(o.startPTS=Math.min(o.startPTS,e),o.endPTS=Math.max(o.endPTS,r),o.startDTS=Math.min(o.startDTS,i),o.endDTS=Math.max(o.endDTS,n)):s[t]={startPTS:e,endPTS:r,startDTS:i,endDTS:n,partial:a}},r.clearElementaryStreamInfo=function(){var t=this.elementaryStreams;t[O]=null,t[N]=null,t[U]=null},a(e,[{key:"decryptdata",get:function(){if(!this.levelkeys&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){var t=this.levelkeys.identity;if(t)this._decryptdata=t.getDecryptData(this.sn);else{var e=Object.keys(this.levelkeys);if(1===e.length)return this._decryptdata=this.levelkeys[e[0]].getDecryptData(this.sn)}}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!E(this.programDateTime))return null;var t=E(this.duration)?this.duration:0;return this.programDateTime+1e3*t}},{key:"encrypted",get:function(){var t;if(null!=(t=this._decryptdata)&&t.encrypted)return!0;if(this.levelkeys){var e=Object.keys(this.levelkeys),r=e.length;if(r>1||1===r&&this.levelkeys[e[0]].encrypted)return!0}return!1}}]),e}(B),K=function(t){function e(e,r,i,n,a){var s;(s=t.call(this,i)||this).fragOffset=0,s.duration=0,s.gap=!1,s.independent=!1,s.relurl=void 0,s.fragment=void 0,s.index=void 0,s.stats=new M,s.duration=e.decimalFloatingPoint("DURATION"),s.gap=e.bool("GAP"),s.independent=e.bool("INDEPENDENT"),s.relurl=e.enumeratedString("URI"),s.fragment=r,s.index=n;var o=e.enumeratedString("BYTERANGE");return o&&s.setByteRange(o,a),a&&(s.fragOffset=a.fragOffset+a.duration),s}return l(e,t),a(e,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var t=this.elementaryStreams;return!!(t.audio||t.video||t.audiovideo)}}]),e}(B),H=function(){function t(t){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=t}return t.prototype.reloaded=function(t){if(!t)return this.advanced=!0,void(this.updated=!0);var e=this.lastPartSn-t.lastPartSn,r=this.lastPartIndex-t.lastPartIndex;this.updated=this.endSN!==t.endSN||!!r||!!e||!this.live,this.advanced=this.endSN>t.endSN||e>0||0===e&&r>0,this.updated||this.advanced?this.misses=Math.floor(.6*t.misses):this.misses=t.misses+1,this.availabilityDelay=t.availabilityDelay},a(t,[{key:"hasProgramDateTime",get:function(){return!!this.fragments.length&&E(this.fragments[this.fragments.length-1].programDateTime)}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||10}},{key:"drift",get:function(){var t=this.driftEndTime-this.driftStartTime;return t>0?1e3*(this.driftEnd-this.driftStart)/t:1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var t;return null!=(t=this.partList)&&t.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var t;return null!=(t=this.fragments)&&t.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var t;return null!=(t=this.partList)&&t.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var t;return null!=(t=this.partList)&&t.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}]),t}();function V(t){return Uint8Array.from(atob(t),(function(t){return t.charCodeAt(0)}))}function Y(t){var e,r,i=t.split(":"),n=null;if("data"===i[0]&&2===i.length){var a=i[1].split(";"),s=a[a.length-1].split(",");if(2===s.length){var o="base64"===s[0],l=s[1];o?(a.splice(-1,1),n=V(l)):(e=W(l).subarray(0,16),(r=new Uint8Array(16)).set(e,16-e.length),n=r)}}return n}function W(t){return Uint8Array.from(unescape(encodeURIComponent(t)),(function(t){return t.charCodeAt(0)}))}var j={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},q="org.w3.clearkey",X="com.apple.streamingkeydelivery",z="com.microsoft.playready",Q="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";function $(t){switch(t){case X:return j.FAIRPLAY;case z:return j.PLAYREADY;case Q:return j.WIDEVINE;case q:return j.CLEARKEY}}var J="edef8ba979d64acea3c827dcd51d21ed";function Z(t){switch(t){case j.FAIRPLAY:return X;case j.PLAYREADY:return z;case j.WIDEVINE:return Q;case j.CLEARKEY:return q}}function tt(t){var e=t.drmSystems,r=t.widevineLicenseUrl,i=e?[j.FAIRPLAY,j.WIDEVINE,j.PLAYREADY,j.CLEARKEY].filter((function(t){return!!e[t]})):[];return!i[j.WIDEVINE]&&r&&i.push(j.WIDEVINE),i}var et="undefined"!=typeof self&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;function rt(t,e,r){return Uint8Array.prototype.slice?t.slice(e,r):new Uint8Array(Array.prototype.slice.call(t,e,r))}var it,nt=function(t,e){return e+10<=t.length&&73===t[e]&&68===t[e+1]&&51===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},at=function(t,e){return e+10<=t.length&&51===t[e]&&68===t[e+1]&&73===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},st=function(t,e){for(var r=e,i=0;nt(t,e);)i+=10,i+=ot(t,e+6),at(t,e+10)&&(i+=10),e+=i;if(i>0)return t.subarray(r,r+i)},ot=function(t,e){var r=0;return r=(127&t[e])<<21,r|=(127&t[e+1])<<14,r|=(127&t[e+2])<<7,r|=127&t[e+3]},lt=function(t,e){return nt(t,e)&&ot(t,e+6)+10<=t.length-e},ut=function(t){return t&&"PRIV"===t.key&&"com.apple.streaming.transportStreamTimestamp"===t.info},ht=function(t){var e=String.fromCharCode(t[0],t[1],t[2],t[3]),r=ot(t,4);return{type:e,size:r,data:t.subarray(10,10+r)}},dt=function(t){for(var e=0,r=[];nt(t,e);){for(var i=ot(t,e+6),n=(e+=10)+i;e+8<n;){var a=ht(t.subarray(e)),s=ct(a);s&&r.push(s),e+=a.size+10}at(t,e)&&(e+=10)}return r},ct=function(t){return"PRIV"===t.type?ft(t):"W"===t.type[0]?vt(t):gt(t)},ft=function(t){if(!(t.size<2)){var e=pt(t.data,!0),r=new Uint8Array(t.data.subarray(e.length+1));return{key:t.type,info:e,data:r.buffer}}},gt=function(t){if(!(t.size<2)){if("TXXX"===t.type){var e=1,r=pt(t.data.subarray(e),!0);e+=r.length+1;var i=pt(t.data.subarray(e));return{key:t.type,info:r,data:i}}var n=pt(t.data.subarray(1));return{key:t.type,data:n}}},vt=function(t){if("WXXX"===t.type){if(t.size<2)return;var e=1,r=pt(t.data.subarray(e),!0);e+=r.length+1;var i=pt(t.data.subarray(e));return{key:t.type,info:r,data:i}}var n=pt(t.data);return{key:t.type,data:n}},mt=function(t){if(8===t.data.byteLength){var e=new Uint8Array(t.data),r=1&e[3],i=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return i/=45,r&&(i+=47721858.84),Math.round(i)}},pt=function(t,e){void 0===e&&(e=!1);var r=yt();if(r){var i=r.decode(t);if(e){var n=i.indexOf("\0");return-1!==n?i.substring(0,n):i}return i.replace(/\0/g,"")}for(var a,s,o,l=t.length,u="",h=0;h<l;){if(0===(a=t[h++])&&e)return u;if(0!==a&&3!==a)switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:u+=String.fromCharCode(a);break;case 12:case 13:s=t[h++],u+=String.fromCharCode((31&a)<<6|63&s);break;case 14:s=t[h++],o=t[h++],u+=String.fromCharCode((15&a)<<12|(63&s)<<6|(63&o)<<0)}}return u};function yt(){return it||void 0===self.TextDecoder||(it=new self.TextDecoder("utf-8")),it}var Tt=function(t){for(var e="",r=0;r<t.length;r++){var i=t[r].toString(16);i.length<2&&(i="0"+i),e+=i}return e},Et=Math.pow(2,32)-1,St=[].push,Lt={video:1,audio:2,id3:3,text:4};function Rt(t){return String.fromCharCode.apply(null,t)}function At(t,e){var r=t[e]<<8|t[e+1];return r<0?65536+r:r}function kt(t,e){var r=bt(t,e);return r<0?4294967296+r:r}function bt(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}function Dt(t,e,r){t[e]=r>>24,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=255&r}function It(t,e){var r=[];if(!e.length)return r;for(var i=t.byteLength,n=0;n<i;){var a=kt(t,n),s=a>1?n+a:i;if(Rt(t.subarray(n+4,n+8))===e[0])if(1===e.length)r.push(t.subarray(n+8,s));else{var o=It(t.subarray(n+8,s),e.slice(1));o.length&&St.apply(r,o)}n=s}return r}function wt(t){var e=[],r=t[0],i=8,n=kt(t,i);i+=4,i+=0===r?8:16,i+=2;var a=t.length+0,s=At(t,i);i+=2;for(var o=0;o<s;o++){var l=i,u=kt(t,l);l+=4;var h=2147483647&u;if(1==(2147483648&u)>>>31)return w.warn("SIDX has hierarchical references (not supported)"),null;var d=kt(t,l);l+=4,e.push({referenceSize:h,subsegmentDuration:d,info:{duration:d/n,start:a,end:a+h-1}}),a+=h,i=l+=4}return{earliestPresentationTime:0,timescale:n,version:r,referencesCount:s,references:e}}function Ct(t){for(var e=[],r=It(t,["moov","trak"]),i=0;i<r.length;i++){var n=r[i],a=It(n,["tkhd"])[0];if(a){var s=a[0],o=0===s?12:20,l=kt(a,o),u=It(n,["mdia","mdhd"])[0];if(u){var h=kt(u,o=0===(s=u[0])?12:20),d=It(n,["mdia","hdlr"])[0];if(d){var c=Rt(d.subarray(8,12)),f={soun:O,vide:N}[c];if(f){var g=It(n,["mdia","minf","stbl","stsd"])[0],v=void 0;g&&(v=Rt(g.subarray(12,16))),e[l]={timescale:h,type:f},e[f]={timescale:h,id:l,codec:v}}}}}}return It(t,["moov","mvex","trex"]).forEach((function(t){var r=kt(t,4),i=e[r];i&&(i.default={duration:kt(t,12),flags:kt(t,20)})})),e}function _t(t){var e=It(t,["schm"])[0];if(e){var r=Rt(e.subarray(4,8));if("cbcs"===r||"cenc"===r)return It(t,["schi","tenc"])[0]}return w.error("[eme] missing 'schm' box"),null}function Pt(t){var e=kt(t,0),r=8;1&e&&(r+=4),4&e&&(r+=4);for(var i=0,n=kt(t,4),a=0;a<n;a++)256&e&&(i+=kt(t,r),r+=4),512&e&&(r+=4),1024&e&&(r+=4),2048&e&&(r+=4);return i}function xt(t,e){var r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),r}function Ft(t,e){var r=[],i=e.samples,n=e.timescale,a=e.id,s=!1;return It(i,["moof"]).map((function(o){var l=o.byteOffset-8;It(o,["traf"]).map((function(o){var u=It(o,["tfdt"]).map((function(t){var e=t[0],r=kt(t,4);return 1===e&&(r*=Math.pow(2,32),r+=kt(t,8)),r/n}))[0];return void 0!==u&&(t=u),It(o,["tfhd"]).map((function(u){var h=kt(u,4),d=16777215&kt(u,0),c=0,f=0!=(16&d),g=0,v=0!=(32&d),m=8;h===a&&(0!=(1&d)&&(m+=8),0!=(2&d)&&(m+=4),0!=(8&d)&&(c=kt(u,m),m+=4),f&&(g=kt(u,m),m+=4),v&&(m+=4),"video"===e.type&&(s=function(t){if(!t)return!1;var e=t.indexOf("."),r=e<0?t:t.substring(0,e);return"hvc1"===r||"hev1"===r||"dvh1"===r||"dvhe"===r}(e.codec)),It(o,["trun"]).map((function(a){var o=a[0],u=16777215&kt(a,0),h=0!=(1&u),d=0,f=0!=(4&u),v=0!=(256&u),m=0,p=0!=(512&u),y=0,T=0!=(1024&u),E=0!=(2048&u),S=0,L=kt(a,4),R=8;h&&(d=kt(a,R),R+=4),f&&(R+=4);for(var A=d+l,k=0;k<L;k++){if(v?(m=kt(a,R),R+=4):m=c,p?(y=kt(a,R),R+=4):y=g,T&&(R+=4),E&&(S=0===o?kt(a,R):bt(a,R),R+=4),e.type===N)for(var b=0;b<y;){var D=kt(i,A);Mt(s,i[A+=4])&&Ot(i.subarray(A,A+D),s?2:1,t+S/n,r),A+=D,b+=D+4}t+=m/n}})))}))}))})),r}function Mt(t,e){if(t){var r=e>>1&63;return 39===r||40===r}return 6==(31&e)}function Ot(t,e,r,i){var n=Nt(t),a=0;a+=e;for(var s=0,o=0,l=!1,u=0;a<n.length;){s=0;do{if(a>=n.length)break;s+=u=n[a++]}while(255===u);o=0;do{if(a>=n.length)break;o+=u=n[a++]}while(255===u);var h=n.length-a;if(!l&&4===s&&a<n.length){if(l=!0,181===n[a++]){var d=At(n,a);if(a+=2,49===d){var c=kt(n,a);if(a+=4,1195456820===c){var f=n[a++];if(3===f){var g=n[a++],v=64&g,m=v?2+3*(31&g):0,p=new Uint8Array(m);if(v){p[0]=g;for(var y=1;y<m;y++)p[y]=n[a++]}i.push({type:f,payloadType:s,pts:r,bytes:p})}}}}}else if(5===s&&o<h){if(l=!0,o>16){for(var T=[],E=0;E<16;E++){var S=n[a++].toString(16);T.push(1==S.length?"0"+S:S),3!==E&&5!==E&&7!==E&&9!==E||T.push("-")}for(var L=o-16,R=new Uint8Array(L),A=0;A<L;A++)R[A]=n[a++];i.push({payloadType:s,pts:r,uuid:T.join(""),userData:pt(R),userDataBytes:R})}}else if(o<h)a+=o;else if(o>h)break}}function Nt(t){for(var e=t.byteLength,r=[],i=1;i<e-2;)0===t[i]&&0===t[i+1]&&3===t[i+2]?(r.push(i+2),i+=2):i++;if(0===r.length)return t;var n=e-r.length,a=new Uint8Array(n),s=0;for(i=0;i<n;s++,i++)s===r[0]&&(s++,r.shift()),a[i]=t[s];return a}function Ut(t,e,r){if(16!==t.byteLength)throw new RangeError("Invalid system id");var i,n,a;if(e){i=1,n=new Uint8Array(16*e.length);for(var s=0;s<e.length;s++){var o=e[s];if(16!==o.byteLength)throw new RangeError("Invalid key");n.set(o,16*s)}}else i=0,n=new Uint8Array;i>0?(a=new Uint8Array(4),e.length>0&&new DataView(a.buffer).setUint32(0,e.length,!1)):a=new Uint8Array;var l=new Uint8Array(4);return r&&r.byteLength>0&&new DataView(l.buffer).setUint32(0,r.byteLength,!1),function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];for(var n=r.length,a=8,s=n;s--;)a+=r[s].byteLength;var o=new Uint8Array(a);for(o[0]=a>>24&255,o[1]=a>>16&255,o[2]=a>>8&255,o[3]=255&a,o.set(t,4),s=0,a=8;s<n;s++)o.set(r[s],a),a+=r[s].byteLength;return o}([112,115,115,104],new Uint8Array([i,0,0,0]),t,a,n,l,r||new Uint8Array)}var Bt={},Gt=function(){function t(t,e,r,i,n){void 0===i&&(i=[1]),void 0===n&&(n=null),this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=t,this.uri=e,this.keyFormat=r,this.keyFormatVersions=i,this.iv=n,this.encrypted=!!t&&"NONE"!==t,this.isCommonEncryption=this.encrypted&&"AES-128"!==t}t.clearKeyUriToKeyIdMap=function(){Bt={}};var e=t.prototype;return e.isSupported=function(){if(this.method){if("AES-128"===this.method||"NONE"===this.method)return!0;if("identity"===this.keyFormat)return"SAMPLE-AES"===this.method;switch(this.keyFormat){case X:case Q:case z:case q:return-1!==["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)}}return!1},e.getDecryptData=function(e){if(!this.encrypted||!this.uri)return null;if("AES-128"===this.method&&this.uri&&!this.iv){"number"!=typeof e&&("AES-128"!==this.method||this.iv||w.warn('missing IV for initialization segment with method="'+this.method+'" - compliance issue'),e=0);var r=function(t){for(var e=new Uint8Array(16),r=12;r<16;r++)e[r]=t>>8*(15-r)&255;return e}(e);return new t(this.method,this.uri,"identity",this.keyFormatVersions,r)}var i=Y(this.uri);if(i)switch(this.keyFormat){case Q:this.pssh=i,i.length>=22&&(this.keyId=i.subarray(i.length-22,i.length-6));break;case z:var n=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=Ut(n,null,i);var a=new Uint16Array(i.buffer,i.byteOffset,i.byteLength/2),s=String.fromCharCode.apply(null,Array.from(a)),o=s.substring(s.indexOf("<"),s.length),l=(new DOMParser).parseFromString(o,"text/xml").getElementsByTagName("KID")[0];if(l){var u=l.childNodes[0]?l.childNodes[0].nodeValue:l.getAttribute("VALUE");if(u){var h=V(u).subarray(0,16);!function(t){var e=function(t,e,r){var i=t[e];t[e]=t[r],t[r]=i};e(t,0,3),e(t,1,2),e(t,4,5),e(t,6,7)}(h),this.keyId=h}}break;default:var d=i.subarray(0,16);if(16!==d.length){var c=new Uint8Array(16);c.set(d,16-d.length),d=c}this.keyId=d}if(!this.keyId||16!==this.keyId.byteLength){var f=Bt[this.uri];if(!f){var g=Object.keys(Bt).length%Number.MAX_SAFE_INTEGER;f=new Uint8Array(16),new DataView(f.buffer,12,4).setUint32(0,g),Bt[this.uri]=f}this.keyId=f}return this},t}(),Kt=/\{\$([a-zA-Z0-9-_]+)\}/g;function Ht(t){return Kt.test(t)}function Vt(t,e,r){if(null!==t.variableList||t.hasVariableRefs)for(var i=r.length;i--;){var n=r[i],a=e[n];a&&(e[n]=Yt(t,a))}}function Yt(t,e){if(null!==t.variableList||t.hasVariableRefs){var r=t.variableList;return e.replace(Kt,(function(e){var i=e.substring(2,e.length-1),n=null==r?void 0:r[i];return void 0===n?(t.playlistParsingError||(t.playlistParsingError=new Error('Missing preceding EXT-X-DEFINE tag for Variable Reference: "'+i+'"')),e):n}))}return e}function Wt(t,e,r){var i,n,a=t.variableList;if(a||(t.variableList=a={}),"QUERYPARAM"in e){i=e.QUERYPARAM;try{var s=new self.URL(r).searchParams;if(!s.has(i))throw new Error('"'+i+'" does not match any query parameter in URI: "'+r+'"');n=s.get(i)}catch(e){t.playlistParsingError||(t.playlistParsingError=new Error("EXT-X-DEFINE QUERYPARAM: "+e.message))}}else i=e.NAME,n=e.VALUE;i in a?t.playlistParsingError||(t.playlistParsingError=new Error('EXT-X-DEFINE duplicate Variable Name declarations: "'+i+'"')):a[i]=n||""}function jt(t,e,r){var i=e.IMPORT;if(r&&i in r){var n=t.variableList;n||(t.variableList=n={}),n[i]=r[i]}else t.playlistParsingError||(t.playlistParsingError=new Error('EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "'+i+'"'))}function qt(){if("undefined"!=typeof self)return self.MediaSource||self.WebKitMediaSource}var Xt={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dva1:!0,dvav:!0,dvh1:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}},zt=qt();function Qt(t,e){var r;return null!=(r=null==zt?void 0:zt.isTypeSupported((e||"video")+'/mp4;codecs="'+t+'"'))&&r}var $t=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,Jt=/#EXT-X-MEDIA:(.*)/g,Zt=/^#EXT(?:INF|-X-TARGETDURATION):/m,te=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),ee=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),re=function(){function t(){}return t.findGroup=function(t,e){for(var r=0;r<t.length;r++){var i=t[r];if(i.id===e)return i}},t.convertAVC1ToAVCOTI=function(t){var e=t.split(".");if(e.length>2){var r=e.shift()+".";return r+=parseInt(e.shift()).toString(16),r+=("000"+parseInt(e.shift()).toString(16)).slice(-4)}return t},t.resolve=function(t,e){return T.buildAbsoluteURL(e,t,{alwaysNormalize:!0})},t.isMediaPlaylist=function(t){return Zt.test(t)},t.parseMasterPlaylist=function(e,r){var i,n={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:Ht(e)},a=[];for($t.lastIndex=0;null!=(i=$t.exec(e));)if(i[1]){var s,o=new P(i[1]);Vt(n,o,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]);var l=Yt(n,i[2]),u={attrs:o,bitrate:o.decimalInteger("AVERAGE-BANDWIDTH")||o.decimalInteger("BANDWIDTH"),name:o.NAME,url:t.resolve(l,r)},h=o.decimalResolution("RESOLUTION");h&&(u.width=h.width,u.height=h.height),ae((o.CODECS||"").split(/[ ,]+/).filter((function(t){return t})),u),u.videoCodec&&-1!==u.videoCodec.indexOf("avc1")&&(u.videoCodec=t.convertAVC1ToAVCOTI(u.videoCodec)),null!=(s=u.unknownCodecs)&&s.length||a.push(u),n.levels.push(u)}else if(i[3]){var d=i[3],c=i[4];switch(d){case"SESSION-DATA":var f=new P(c);Vt(n,f,["DATA-ID","LANGUAGE","VALUE","URI"]);var g=f["DATA-ID"];g&&(null===n.sessionData&&(n.sessionData={}),n.sessionData[g]=f);break;case"SESSION-KEY":var v=ie(c,r,n);v.encrypted&&v.isSupported()?(null===n.sessionKeys&&(n.sessionKeys=[]),n.sessionKeys.push(v)):w.warn('[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "'+c+'"');break;case"DEFINE":var m=new P(c);Vt(n,m,["NAME","VALUE","QUERYPARAM"]),Wt(n,m,r);break;case"CONTENT-STEERING":var p=new P(c);Vt(n,p,["SERVER-URI","PATHWAY-ID"]),n.contentSteering={uri:t.resolve(p["SERVER-URI"],r),pathwayId:p["PATHWAY-ID"]||"."};break;case"START":n.startTimeOffset=ne(c)}}var y=a.length>0&&a.length<n.levels.length;return n.levels=y?a:n.levels,0===n.levels.length&&(n.playlistParsingError=new Error("no levels found in manifest")),n},t.parseMasterPlaylistMedia=function(e,r,i){var n,a={},s=i.levels,o={AUDIO:s.map((function(t){return{id:t.attrs.AUDIO,audioCodec:t.audioCodec}})),SUBTITLES:s.map((function(t){return{id:t.attrs.SUBTITLES,textCodec:t.textCodec}})),"CLOSED-CAPTIONS":[]},l=0;for(Jt.lastIndex=0;null!==(n=Jt.exec(e));){var u=new P(n[1]),h=u.TYPE;if(h){var d=o[h],c=a[h]||[];a[h]=c,Vt(i,u,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]);var f={attrs:u,bitrate:0,id:l++,groupId:u["GROUP-ID"]||"",instreamId:u["INSTREAM-ID"],name:u.NAME||u.LANGUAGE||"",type:h,default:u.bool("DEFAULT"),autoselect:u.bool("AUTOSELECT"),forced:u.bool("FORCED"),lang:u.LANGUAGE,url:u.URI?t.resolve(u.URI,r):""};if(null!=d&&d.length){var g=t.findGroup(d,f.groupId)||d[0];se(f,g,"audioCodec"),se(f,g,"textCodec")}c.push(f)}}return a},t.parseLevelPlaylist=function(t,e,r,i,n,a){var s,l,u,h=new H(e),d=h.fragments,c=null,f=0,g=0,v=0,m=0,p=null,y=new G(i,e),T=-1,S=!1;for(te.lastIndex=0,h.m3u8=t,h.hasVariableRefs=Ht(t);null!==(s=te.exec(t));){S&&(S=!1,(y=new G(i,e)).start=v,y.sn=f,y.cc=m,y.level=r,c&&(y.initSegment=c,y.rawProgramDateTime=c.rawProgramDateTime,c.rawProgramDateTime=null));var L=s[1];if(L){y.duration=parseFloat(L);var R=(" "+s[2]).slice(1);y.title=R||null,y.tagList.push(R?["INF",L,R]:["INF",L])}else if(s[3]){if(E(y.duration)){y.start=v,u&&ue(y,u,h),y.sn=f,y.level=r,y.cc=m,y.urlId=n,d.push(y);var A=(" "+s[3]).slice(1);y.relurl=Yt(h,A),oe(y,p),p=y,v+=y.duration,f++,g=0,S=!0}}else if(s[4]){var k=(" "+s[4]).slice(1);p?y.setByteRange(k,p):y.setByteRange(k)}else if(s[5])y.rawProgramDateTime=(" "+s[5]).slice(1),y.tagList.push(["PROGRAM-DATE-TIME",y.rawProgramDateTime]),-1===T&&(T=d.length);else{if(!(s=s[0].match(ee))){w.warn("No matches on slow regex match for level playlist!");continue}for(l=1;l<s.length&&void 0===s[l];l++);var b=(" "+s[l]).slice(1),D=(" "+s[l+1]).slice(1),I=s[l+2]?(" "+s[l+2]).slice(1):"";switch(b){case"PLAYLIST-TYPE":h.type=D.toUpperCase();break;case"MEDIA-SEQUENCE":f=h.startSN=parseInt(D);break;case"SKIP":var C=new P(D);Vt(h,C,["RECENTLY-REMOVED-DATERANGES"]);var _=C.decimalInteger("SKIPPED-SEGMENTS");if(E(_)){h.skippedSegments=_;for(var x=_;x--;)d.unshift(null);f+=_}var M=C.enumeratedString("RECENTLY-REMOVED-DATERANGES");M&&(h.recentlyRemovedDateranges=M.split("\t"));break;case"TARGETDURATION":h.targetduration=Math.max(parseInt(D),1);break;case"VERSION":h.version=parseInt(D);break;case"EXTM3U":break;case"ENDLIST":h.live=!1;break;case"#":(D||I)&&y.tagList.push(I?[D,I]:[D]);break;case"DISCONTINUITY":m++,y.tagList.push(["DIS"]);break;case"GAP":y.gap=!0,y.tagList.push([b]);break;case"BITRATE":y.tagList.push([b,D]);break;case"DATERANGE":var O=new P(D);Vt(h,O,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),Vt(h,O,O.clientAttrs);var N=new F(O,h.dateRanges[O.ID]);N.isValid||h.skippedSegments?h.dateRanges[N.id]=N:w.warn('Ignoring invalid DATERANGE tag: "'+D+'"'),y.tagList.push(["EXT-X-DATERANGE",D]);break;case"DEFINE":var U=new P(D);Vt(h,U,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in U?jt(h,U,a):Wt(h,U,e);break;case"DISCONTINUITY-SEQUENCE":m=parseInt(D);break;case"KEY":var B=ie(D,e,h);if(B.isSupported()){if("NONE"===B.method){u=void 0;break}u||(u={}),u[B.keyFormat]&&(u=o({},u)),u[B.keyFormat]=B}else w.warn('[Keys] Ignoring invalid EXT-X-KEY tag: "'+D+'"');break;case"START":h.startTimeOffset=ne(D);break;case"MAP":var V=new P(D);if(Vt(h,V,["BYTERANGE","URI"]),y.duration){var Y=new G(i,e);le(Y,V,r,u),c=Y,y.initSegment=c,c.rawProgramDateTime&&!y.rawProgramDateTime&&(y.rawProgramDateTime=c.rawProgramDateTime)}else le(y,V,r,u),c=y,S=!0;break;case"SERVER-CONTROL":var W=new P(D);h.canBlockReload=W.bool("CAN-BLOCK-RELOAD"),h.canSkipUntil=W.optionalFloat("CAN-SKIP-UNTIL",0),h.canSkipDateRanges=h.canSkipUntil>0&&W.bool("CAN-SKIP-DATERANGES"),h.partHoldBack=W.optionalFloat("PART-HOLD-BACK",0),h.holdBack=W.optionalFloat("HOLD-BACK",0);break;case"PART-INF":var j=new P(D);h.partTarget=j.decimalFloatingPoint("PART-TARGET");break;case"PART":var q=h.partList;q||(q=h.partList=[]);var X=g>0?q[q.length-1]:void 0,z=g++,Q=new P(D);Vt(h,Q,["BYTERANGE","URI"]);var $=new K(Q,y,e,z,X);q.push($),y.duration+=$.duration;break;case"PRELOAD-HINT":var J=new P(D);Vt(h,J,["URI"]),h.preloadHint=J;break;case"RENDITION-REPORT":var Z=new P(D);Vt(h,Z,["URI"]),h.renditionReports=h.renditionReports||[],h.renditionReports.push(Z);break;default:w.warn("line parsed but not handled: "+s)}}}p&&!p.relurl?(d.pop(),v-=p.duration,h.partList&&(h.fragmentHint=p)):h.partList&&(oe(y,p),y.cc=m,h.fragmentHint=y,u&&ue(y,u,h));var tt=d.length,et=d[0],rt=d[tt-1];if((v+=h.skippedSegments*h.targetduration)>0&&tt&&rt){h.averagetargetduration=v/tt;var it=rt.sn;h.endSN="initSegment"!==it?it:0,h.live||(rt.endList=!0),et&&(h.startCC=et.cc)}else h.endSN=0,h.startCC=0;return h.fragmentHint&&(v+=h.fragmentHint.duration),h.totalduration=v,h.endCC=m,T>0&&function(t,e){for(var r=t[e],i=e;i--;){var n=t[i];if(!n)return;n.programDateTime=r.programDateTime-1e3*n.duration,r=n}}(d,T),h},t}();function ie(t,e,r){var i,n,a=new P(t);Vt(r,a,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]);var s=null!=(i=a.METHOD)?i:"",o=a.URI,l=a.hexadecimalInteger("IV"),u=a.KEYFORMATVERSIONS,h=null!=(n=a.KEYFORMAT)?n:"identity";o&&a.IV&&!l&&w.error("Invalid IV: "+a.IV);var d=o?re.resolve(o,e):"",c=(u||"1").split("/").map(Number).filter(Number.isFinite);return new Gt(s,d,h,c,l)}function ne(t){var e=new P(t).decimalFloatingPoint("TIME-OFFSET");return E(e)?e:null}function ae(t,e){["video","audio","text"].forEach((function(r){var i=t.filter((function(t){return function(t,e){var r=Xt[e];return!!r&&!0===r[t.slice(0,4)]}(t,r)}));if(i.length){var n=i.filter((function(t){return 0===t.lastIndexOf("avc1",0)||0===t.lastIndexOf("mp4a",0)}));e[r+"Codec"]=n.length>0?n[0]:i[0],t=t.filter((function(t){return-1===i.indexOf(t)}))}})),e.unknownCodecs=t}function se(t,e,r){var i=e[r];i&&(t[r]=i)}function oe(t,e){t.rawProgramDateTime?t.programDateTime=Date.parse(t.rawProgramDateTime):null!=e&&e.programDateTime&&(t.programDateTime=e.endProgramDateTime),E(t.programDateTime)||(t.programDateTime=null,t.rawProgramDateTime=null)}function le(t,e,r,i){t.relurl=e.URI,e.BYTERANGE&&t.setByteRange(e.BYTERANGE),t.level=r,t.sn="initSegment",i&&(t.levelkeys=i),t.initSegment=null}function ue(t,e,r){t.levelkeys=e;var i=r.encryptedFragments;i.length&&i[i.length-1].levelkeys===e||!Object.keys(e).some((function(t){return e[t].isCommonEncryption}))||i.push(t)}var he="manifest",de="level",ce="audioTrack",fe="subtitleTrack",ge="main",ve="audio",me="subtitle";function pe(t){switch(t.type){case ce:return ve;case fe:return me;default:return ge}}function ye(t,e){var r=t.url;return void 0!==r&&0!==r.indexOf("data:")||(r=e.url),r}var Te=function(){function t(t){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=t,this.registerListeners()}var e=t.prototype;return e.startLoad=function(t){},e.stopLoad=function(){this.destroyInternalLoaders()},e.registerListeners=function(){var t=this.hls;t.on(S.MANIFEST_LOADING,this.onManifestLoading,this),t.on(S.LEVEL_LOADING,this.onLevelLoading,this),t.on(S.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),t.on(S.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},e.unregisterListeners=function(){var t=this.hls;t.off(S.MANIFEST_LOADING,this.onManifestLoading,this),t.off(S.LEVEL_LOADING,this.onLevelLoading,this),t.off(S.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),t.off(S.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},e.createInternalLoader=function(t){var e=this.hls.config,r=e.pLoader,i=e.loader,n=new(r||i)(e);return this.loaders[t.type]=n,n},e.getInternalLoader=function(t){return this.loaders[t.type]},e.resetInternalLoader=function(t){this.loaders[t]&&delete this.loaders[t]},e.destroyInternalLoaders=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy(),this.resetInternalLoader(t)}},e.destroy=function(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()},e.onManifestLoading=function(t,e){var r=e.url;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:he,url:r,deliveryDirectives:null})},e.onLevelLoading=function(t,e){var r=e.id,i=e.level,n=e.url,a=e.deliveryDirectives;this.load({id:r,level:i,responseType:"text",type:de,url:n,deliveryDirectives:a})},e.onAudioTrackLoading=function(t,e){var r=e.id,i=e.groupId,n=e.url,a=e.deliveryDirectives;this.load({id:r,groupId:i,level:null,responseType:"text",type:ce,url:n,deliveryDirectives:a})},e.onSubtitleTrackLoading=function(t,e){var r=e.id,i=e.groupId,n=e.url,a=e.deliveryDirectives;this.load({id:r,groupId:i,level:null,responseType:"text",type:fe,url:n,deliveryDirectives:a})},e.load=function(t){var e,r,i,n=this,a=this.hls.config,s=this.getInternalLoader(t);if(s){var l=s.context;if(l&&l.url===t.url)return void w.trace("[playlist-loader]: playlist request ongoing");w.log("[playlist-loader]: aborting previous loader for type: "+t.type),s.abort()}if(r=t.type===he?a.manifestLoadPolicy.default:o({},a.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),s=this.createInternalLoader(t),null!=(e=t.deliveryDirectives)&&e.part&&(t.type===de&&null!==t.level?i=this.hls.levels[t.level].details:t.type===ce&&null!==t.id?i=this.hls.audioTracks[t.id].details:t.type===fe&&null!==t.id&&(i=this.hls.subtitleTracks[t.id].details),i)){var u=i.partTarget,h=i.targetduration;if(u&&h){var d=1e3*Math.max(3*u,.8*h);r=o({},r,{maxTimeToFirstByteMs:Math.min(d,r.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(d,r.maxTimeToFirstByteMs)})}}var c=r.errorRetry||r.timeoutRetry||{},f={loadPolicy:r,timeout:r.maxLoadTimeMs,maxRetry:c.maxNumRetry||0,retryDelay:c.retryDelayMs||0,maxRetryDelay:c.maxRetryDelayMs||0},g={onSuccess:function(t,e,r,i){var a=n.getInternalLoader(r);n.resetInternalLoader(r.type);var s=t.data;0===s.indexOf("#EXTM3U")?(e.parsing.start=performance.now(),re.isMediaPlaylist(s)?n.handleTrackOrLevelPlaylist(t,e,r,i||null,a):n.handleMasterPlaylist(t,e,r,i)):n.handleManifestParsingError(t,r,new Error("no EXTM3U delimiter"),i||null,e)},onError:function(t,e,r,i){n.handleNetworkError(e,r,!1,t,i)},onTimeout:function(t,e,r){n.handleNetworkError(e,r,!0,void 0,t)}};s.load(t,f,g)},e.handleMasterPlaylist=function(t,e,r,i){var n=this.hls,a=t.data,s=ye(t,r),o=re.parseMasterPlaylist(a,s);if(o.playlistParsingError)this.handleManifestParsingError(t,r,o.playlistParsingError,i,e);else{var l=o.contentSteering,u=o.levels,h=o.sessionData,d=o.sessionKeys,c=o.startTimeOffset,f=o.variableList;this.variableList=f;var g=re.parseMasterPlaylistMedia(a,s,o),v=g.AUDIO,m=void 0===v?[]:v,p=g.SUBTITLES,y=g["CLOSED-CAPTIONS"];m.length&&(m.some((function(t){return!t.url}))||!u[0].audioCodec||u[0].attrs.AUDIO||(w.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),m.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new P({}),bitrate:0,url:""}))),n.trigger(S.MANIFEST_LOADED,{levels:u,audioTracks:m,subtitles:p,captions:y,contentSteering:l,url:s,stats:e,networkDetails:i,sessionData:h,sessionKeys:d,startTimeOffset:c,variableList:f})}},e.handleTrackOrLevelPlaylist=function(t,e,r,i,n){var a=this.hls,s=r.id,o=r.level,l=r.type,u=ye(t,r),h=E(s)?s:0,d=E(o)?o:h,c=pe(r),f=re.parseLevelPlaylist(t.data,u,d,c,h,this.variableList);if(l===he){var g={attrs:new P({}),bitrate:0,details:f,name:"",url:u};a.trigger(S.MANIFEST_LOADED,{levels:[g],audioTracks:[],url:u,stats:e,networkDetails:i,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}e.parsing.end=performance.now(),r.levelDetails=f,this.handlePlaylistLoaded(f,t,e,r,i,n)},e.handleManifestParsingError=function(t,e,r,i,n){this.hls.trigger(S.ERROR,{type:L.NETWORK_ERROR,details:R.MANIFEST_PARSING_ERROR,fatal:e.type===he,url:t.url,err:r,error:r,reason:r.message,response:t,context:e,networkDetails:i,stats:n})},e.handleNetworkError=function(t,e,r,n,a){void 0===r&&(r=!1);var s="A network "+(r?"timeout":"error"+(n?" (status "+n.code+")":""))+" occurred while loading "+t.type;t.type===de?s+=": "+t.level+" id: "+t.id:t.type!==ce&&t.type!==fe||(s+=" id: "+t.id+' group-id: "'+t.groupId+'"');var o=new Error(s);w.warn("[playlist-loader]: "+s);var l=R.UNKNOWN,u=!1,h=this.getInternalLoader(t);switch(t.type){case he:l=r?R.MANIFEST_LOAD_TIMEOUT:R.MANIFEST_LOAD_ERROR,u=!0;break;case de:l=r?R.LEVEL_LOAD_TIMEOUT:R.LEVEL_LOAD_ERROR,u=!1;break;case ce:l=r?R.AUDIO_TRACK_LOAD_TIMEOUT:R.AUDIO_TRACK_LOAD_ERROR,u=!1;break;case fe:l=r?R.SUBTITLE_TRACK_LOAD_TIMEOUT:R.SUBTITLE_LOAD_ERROR,u=!1}h&&this.resetInternalLoader(t.type);var d={type:L.NETWORK_ERROR,details:l,fatal:u,url:t.url,loader:h,context:t,error:o,networkDetails:e,stats:a};if(n){var c=(null==e?void 0:e.url)||t.url;d.response=i({url:c,data:void 0},n)}this.hls.trigger(S.ERROR,d)},e.handlePlaylistLoaded=function(t,e,r,i,n,a){var s=this.hls,o=i.type,l=i.level,u=i.id,h=i.groupId,d=i.deliveryDirectives,c=ye(e,i),f=pe(i),g="number"==typeof i.level&&f===ge?l:void 0;if(t.fragments.length){t.targetduration||(t.playlistParsingError=new Error("Missing Target Duration"));var v=t.playlistParsingError;if(v)s.trigger(S.ERROR,{type:L.NETWORK_ERROR,details:R.LEVEL_PARSING_ERROR,fatal:!1,url:c,error:v,reason:v.message,response:e,context:i,level:g,parent:f,networkDetails:n,stats:r});else switch(t.live&&a&&(a.getCacheAge&&(t.ageHeader=a.getCacheAge()||0),a.getCacheAge&&!isNaN(t.ageHeader)||(t.ageHeader=0)),o){case he:case de:s.trigger(S.LEVEL_LOADED,{details:t,level:g||0,id:u||0,stats:r,networkDetails:n,deliveryDirectives:d});break;case ce:s.trigger(S.AUDIO_TRACK_LOADED,{details:t,id:u||0,groupId:h||"",stats:r,networkDetails:n,deliveryDirectives:d});break;case fe:s.trigger(S.SUBTITLE_TRACK_LOADED,{details:t,id:u||0,groupId:h||"",stats:r,networkDetails:n,deliveryDirectives:d})}}else{var m=new Error("No Segments found in Playlist");s.trigger(S.ERROR,{type:L.NETWORK_ERROR,details:R.LEVEL_EMPTY_ERROR,fatal:!1,url:c,error:m,reason:m.message,response:e,context:i,level:g,parent:f,networkDetails:n,stats:r})}},t}();function Ee(t,e){var r;try{r=new Event("addtrack")}catch(t){(r=document.createEvent("Event")).initEvent("addtrack",!1,!1)}r.track=t,e.dispatchEvent(r)}function Se(t,e){var r=t.mode;if("disabled"===r&&(t.mode="hidden"),t.cues&&!t.cues.getCueById(e.id))try{if(t.addCue(e),!t.cues.getCueById(e.id))throw new Error("addCue is failed for: "+e)}catch(r){w.debug("[texttrack-utils]: "+r);try{var i=new self.TextTrackCue(e.startTime,e.endTime,e.text);i.id=e.id,t.addCue(i)}catch(t){w.debug("[texttrack-utils]: Legacy TextTrackCue fallback failed: "+t)}}"disabled"===r&&(t.mode=r)}function Le(t){var e=t.mode;if("disabled"===e&&(t.mode="hidden"),t.cues)for(var r=t.cues.length;r--;)t.removeCue(t.cues[r]);"disabled"===e&&(t.mode=e)}function Re(t,e,r,i){var n=t.mode;if("disabled"===n&&(t.mode="hidden"),t.cues&&t.cues.length>0)for(var a=function(t,e,r){var i=[],n=function(t,e){if(e<t[0].startTime)return 0;var r=t.length-1;if(e>t[r].endTime)return-1;for(var i=0,n=r;i<=n;){var a=Math.floor((n+i)/2);if(e<t[a].startTime)n=a-1;else{if(!(e>t[a].startTime&&i<r))return a;i=a+1}}return t[i].startTime-e<e-t[n].startTime?i:n}(t,e);if(n>-1)for(var a=n,s=t.length;a<s;a++){var o=t[a];if(o.startTime>=e&&o.endTime<=r)i.push(o);else if(o.startTime>r)return i}return i}(t.cues,e,r),s=0;s<a.length;s++)i&&!i(a[s])||t.removeCue(a[s]);"disabled"===n&&(t.mode=n)}var Ae="org.id3",ke="com.apple.quicktime.HLS",be="https://aomedia.org/emsg/ID3";function De(){if("undefined"!=typeof self)return self.WebKitDataCue||self.VTTCue||self.TextTrackCue}var Ie=function(){var t=De();try{new t(0,Number.POSITIVE_INFINITY,"")}catch(t){return Number.MAX_VALUE}return Number.POSITIVE_INFINITY}();function we(t,e){return t.getTime()/1e3-e}var Ce=function(){function t(t){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=t,this._registerListeners()}var e=t.prototype;return e.destroy=function(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null},e._registerListeners=function(){var t=this.hls;t.on(S.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(S.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(S.MANIFEST_LOADING,this.onManifestLoading,this),t.on(S.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),t.on(S.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(S.LEVEL_UPDATED,this.onLevelUpdated,this)},e._unregisterListeners=function(){var t=this.hls;t.off(S.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(S.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(S.MANIFEST_LOADING,this.onManifestLoading,this),t.off(S.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),t.off(S.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(S.LEVEL_UPDATED,this.onLevelUpdated,this)},e.onMediaAttached=function(t,e){this.media=e.media},e.onMediaDetaching=function(){this.id3Track&&(Le(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})},e.onManifestLoading=function(){this.dateRangeCuesAppended={}},e.createTrack=function(t){var e=this.getID3Track(t.textTracks);return e.mode="hidden",e},e.getID3Track=function(t){if(this.media){for(var e=0;e<t.length;e++){var r=t[e];if("metadata"===r.kind&&"id3"===r.label)return Ee(r,this.media),r}return this.media.addTextTrack("metadata","id3")}},e.onFragParsingMetadata=function(t,e){if(this.media){var r=this.hls.config,i=r.enableEmsgMetadataCues,n=r.enableID3MetadataCues;if(i||n){var a=e.samples;this.id3Track||(this.id3Track=this.createTrack(this.media));for(var s=De(),o=0;o<a.length;o++){var l=a[o].type;if((l!==be||i)&&n){var u=dt(a[o].data);if(u){var h=a[o].pts,d=h+a[o].duration;d>Ie&&(d=Ie),d-h<=0&&(d=h+.25);for(var c=0;c<u.length;c++){var f=u[c];if(!ut(f)){this.updateId3CueEnds(h,l);var g=new s(h,d,"");g.value=f,l&&(g.type=l),this.id3Track.addCue(g)}}}}}}}},e.updateId3CueEnds=function(t,e){var r,i=null==(r=this.id3Track)?void 0:r.cues;if(i)for(var n=i.length;n--;){var a=i[n];a.type===e&&a.startTime<t&&a.endTime===Ie&&(a.endTime=t)}},e.onBufferFlushing=function(t,e){var r=e.startOffset,i=e.endOffset,n=e.type,a=this.id3Track,s=this.hls;if(s){var o=s.config,l=o.enableEmsgMetadataCues,u=o.enableID3MetadataCues;a&&(l||u)&&Re(a,r,i,"audio"===n?function(t){return t.type===Ae&&u}:"video"===n?function(t){return t.type===be&&l}:function(t){return t.type===Ae&&u||t.type===be&&l})}},e.onLevelUpdated=function(t,e){var r=this,i=e.details;if(this.media&&i.hasProgramDateTime&&this.hls.config.enableDateRangeMetadataCues){var n=this.dateRangeCuesAppended,a=this.id3Track,s=i.dateRanges,o=Object.keys(s);if(a)for(var l=Object.keys(n).filter((function(t){return!o.includes(t)})),u=function(){var t=l[h];Object.keys(n[t].cues).forEach((function(e){a.removeCue(n[t].cues[e])})),delete n[t]},h=l.length;h--;)u();var d=i.fragments[i.fragments.length-1];if(0!==o.length&&E(null==d?void 0:d.programDateTime)){this.id3Track||(this.id3Track=this.createTrack(this.media));for(var c=d.programDateTime/1e3-d.start,f=De(),g=function(){var t=o[v],e=s[t],i=n[t],a=(null==i?void 0:i.cues)||{},l=(null==i?void 0:i.durationKnown)||!1,u=we(e.startDate,c),h=Ie,d=e.endDate;if(d)h=we(d,c),l=!0;else if(e.endOnNext&&!l){var g=o.reduce((function(t,r){var i=s[r];return i.class===e.class&&i.id!==r&&i.startDate>e.startDate&&t.push(i),t}),[]).sort((function(t,e){return t.startDate.getTime()-e.startDate.getTime()}))[0];g&&(h=we(g.startDate,c),l=!0)}for(var m,p,y=Object.keys(e.attr),T=0;T<y.length;T++){var E=y[T];if("ID"!==(p=E)&&"CLASS"!==p&&"START-DATE"!==p&&"DURATION"!==p&&"END-DATE"!==p&&"END-ON-NEXT"!==p){var S=a[E];if(S)l&&!i.durationKnown&&(S.endTime=h);else{var L=e.attr[E];S=new f(u,h,""),x(E)&&(m=L,L=Uint8Array.from(m.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer),S.value={key:E,data:L},S.type=ke,S.id=t,r.id3Track.addCue(S),a[E]=S}}}n[t]={cues:a,dateRange:e,durationKnown:l}},v=0;v<o.length;v++)g()}}},t}(),_e=function(){function t(t){var e=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return e.timeupdate()},this.hls=t,this.config=t.config,this.registerListeners()}var e=t.prototype;return e.destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},e.registerListeners=function(){this.hls.on(S.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(S.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(S.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(S.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(S.ERROR,this.onError,this)},e.unregisterListeners=function(){this.hls.off(S.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(S.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(S.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(S.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(S.ERROR,this.onError,this)},e.onMediaAttached=function(t,e){this.media=e.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},e.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},e.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},e.onLevelUpdated=function(t,e){var r=e.details;this.levelDetails=r,r.advanced&&this.timeupdate(),!r.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},e.onError=function(t,e){var r;e.details===R.BUFFER_STALLED_ERROR&&(this.stallCount++,null!=(r=this.levelDetails)&&r.live&&w.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},e.timeupdate=function(){var t=this.media,e=this.levelDetails;if(t&&e){this.currentTime=t.currentTime;var r=this.computeLatency();if(null!==r){this._latency=r;var i=this.config,n=i.lowLatencyMode,a=i.maxLiveSyncPlaybackRate;if(n&&1!==a){var s=this.targetLatency;if(null!==s){var o=r-s,l=o<Math.min(this.maxLatency,s+e.targetduration);if(e.live&&l&&o>.05&&this.forwardBufferLength>1){var u=Math.min(2,Math.max(1,a)),h=Math.round(2/(1+Math.exp(-.75*o-this.edgeStalled))*20)/20;t.playbackRate=Math.min(u,Math.max(1,h))}else 1!==t.playbackRate&&0!==t.playbackRate&&(t.playbackRate=1)}}}}},e.estimateLiveEdge=function(){var t=this.levelDetails;return null===t?null:t.edge+t.age},e.computeLatency=function(){var t=this.estimateLiveEdge();return null===t?null:t-this.currentTime},a(t,[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var t=this.config,e=this.levelDetails;return void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:e?t.liveMaxLatencyDurationCount*e.targetduration:0}},{key:"targetLatency",get:function(){var t=this.levelDetails;if(null===t)return null;var e=t.holdBack,r=t.partHoldBack,i=t.targetduration,n=this.config,a=n.liveSyncDuration,s=n.liveSyncDurationCount,o=n.lowLatencyMode,l=this.hls.userConfig,u=o&&r||e;(l.liveSyncDuration||l.liveSyncDurationCount||0===u)&&(u=void 0!==a?a:s*i);var h=i;return u+Math.min(1*this.stallCount,h)}},{key:"liveSyncPosition",get:function(){var t=this.estimateLiveEdge(),e=this.targetLatency,r=this.levelDetails;if(null===t||null===e||null===r)return null;var i=r.edge,n=t-e-this.edgeStalled,a=i-r.totalduration,s=i-(this.config.lowLatencyMode&&r.partTarget||r.targetduration);return Math.min(Math.max(a,n),s)}},{key:"drift",get:function(){var t=this.levelDetails;return null===t?1:t.drift}},{key:"edgeStalled",get:function(){var t=this.levelDetails;if(null===t)return 0;var e=3*(this.config.lowLatencyMode&&t.partTarget||t.targetduration);return Math.max(t.age-e,0)}},{key:"forwardBufferLength",get:function(){var t=this.media,e=this.levelDetails;if(!t||!e)return 0;var r=t.buffered.length;return(r?t.buffered.end(r-1):e.edge)-this.currentTime}}]),t}(),Pe=["NONE","TYPE-0","TYPE-1",null],xe="",Fe="YES",Me="v2",Oe=function(){function t(t,e,r){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=t,this.part=e,this.skip=r}return t.prototype.addDirectives=function(t){var e=new self.URL(t);return void 0!==this.msn&&e.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&e.searchParams.set("_HLS_part",this.part.toString()),this.skip&&e.searchParams.set("_HLS_skip",this.skip),e.href},t}(),Ne=function(){function t(t){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[t.url],this._attrs=[t.attrs],this.bitrate=t.bitrate,t.details&&(this.details=t.details),this.id=t.id||0,this.name=t.name,this.width=t.width||0,this.height=t.height||0,this.audioCodec=t.audioCodec,this.videoCodec=t.videoCodec,this.unknownCodecs=t.unknownCodecs,this.codecSet=[t.videoCodec,t.audioCodec].filter((function(t){return t})).join(",").replace(/\.[^.,]+/g,"")}return t.prototype.addFallback=function(t){this.url.push(t.url),this._attrs.push(t.attrs)},a(t,[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"attrs",get:function(){return this._attrs[this._urlId]}},{key:"pathwayId",get:function(){return this.attrs["PATHWAY-ID"]||"."}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(t){var e=t%this.url.length;this._urlId!==e&&(this.fragmentError=0,this.loadError=0,this.details=void 0,this._urlId=e)}},{key:"audioGroupId",get:function(){var t;return null==(t=this.audioGroupIds)?void 0:t[this.urlId]}},{key:"textGroupId",get:function(){var t;return null==(t=this.textGroupIds)?void 0:t[this.urlId]}}]),t}();function Ue(t,e){var r=e.startPTS;if(E(r)){var i,n=0;e.sn>t.sn?(n=r-t.start,i=t):(n=t.start-r,i=e),i.duration!==n&&(i.duration=n)}else e.sn>t.sn?t.cc===e.cc&&t.minEndPTS?e.start=t.start+(t.minEndPTS-t.start):e.start=t.start+t.duration:e.start=Math.max(t.start-e.duration,0)}function Be(t,e,r,i,n,a){i-r<=0&&(w.warn("Fragment should have a positive duration",e),i=r+e.duration,a=n+e.duration);var s=r,o=i,l=e.startPTS,u=e.endPTS;if(E(l)){var h=Math.abs(l-r);E(e.deltaPTS)?e.deltaPTS=Math.max(h,e.deltaPTS):e.deltaPTS=h,s=Math.max(r,l),r=Math.min(r,l),n=Math.min(n,e.startDTS),o=Math.min(i,u),i=Math.max(i,u),a=Math.max(a,e.endDTS)}var d=r-e.start;0!==e.start&&(e.start=r),e.duration=i-e.start,e.startPTS=r,e.maxStartPTS=s,e.startDTS=n,e.endPTS=i,e.minEndPTS=o,e.endDTS=a;var c,f=e.sn;if(!t||f<t.startSN||f>t.endSN)return 0;var g=f-t.startSN,v=t.fragments;for(v[g]=e,c=g;c>0;c--)Ue(v[c],v[c-1]);for(c=g;c<v.length-1;c++)Ue(v[c],v[c+1]);return t.fragmentHint&&Ue(v[v.length-1],t.fragmentHint),t.PTSKnown=t.alignedSliding=!0,d}function Ge(t,e){for(var r=null,i=t.fragments,n=i.length-1;n>=0;n--){var a=i[n].initSegment;if(a){r=a;break}}t.fragmentHint&&delete t.fragmentHint.endPTS;var s,l,u,h,d,c=0;if(function(t,e,r){for(var i=e.skippedSegments,n=Math.max(t.startSN,e.startSN)-e.startSN,a=(t.fragmentHint?1:0)+(i?e.endSN:Math.min(t.endSN,e.endSN))-e.startSN,s=e.startSN-t.startSN,o=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,l=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,u=n;u<=a;u++){var h=l[s+u],d=o[u];i&&!d&&u<i&&(d=e.fragments[u]=h),h&&d&&r(h,d)}}(t,e,(function(t,i){t.relurl&&(c=t.cc-i.cc),E(t.startPTS)&&E(t.endPTS)&&(i.start=i.startPTS=t.startPTS,i.startDTS=t.startDTS,i.maxStartPTS=t.maxStartPTS,i.endPTS=t.endPTS,i.endDTS=t.endDTS,i.minEndPTS=t.minEndPTS,i.duration=t.endPTS-t.startPTS,i.duration&&(s=i),e.PTSKnown=e.alignedSliding=!0),i.elementaryStreams=t.elementaryStreams,i.loader=t.loader,i.stats=t.stats,i.urlId=t.urlId,t.initSegment&&(i.initSegment=t.initSegment,r=t.initSegment)})),r&&(e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments).forEach((function(t){var e;t.initSegment&&t.initSegment.relurl!==(null==(e=r)?void 0:e.relurl)||(t.initSegment=r)})),e.skippedSegments)if(e.deltaUpdateFailed=e.fragments.some((function(t){return!t})),e.deltaUpdateFailed){w.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var f=e.skippedSegments;f--;)e.fragments.shift();e.startSN=e.fragments[0].sn,e.startCC=e.fragments[0].cc}else e.canSkipDateRanges&&(e.dateRanges=(l=t.dateRanges,u=e.dateRanges,h=e.recentlyRemovedDateranges,d=o({},l),h&&h.forEach((function(t){delete d[t]})),Object.keys(u).forEach((function(t){var e=new F(u[t].attr,d[t]);e.isValid?d[t]=e:w.warn('Ignoring invalid Playlist Delta Update DATERANGE tag: "'+JSON.stringify(u[t].attr)+'"')})),d));var g=e.fragments;if(c){w.warn("discontinuity sliding from playlist, take drift into account");for(var v=0;v<g.length;v++)g[v].cc+=c}e.skippedSegments&&(e.startCC=e.fragments[0].cc),function(t,e,r){if(t&&e)for(var i=0,n=0,a=t.length;n<=a;n++){var s=t[n],o=e[n+i];s&&o&&s.index===o.index&&s.fragment.sn===o.fragment.sn?r(s,o):i--}}(t.partList,e.partList,(function(t,e){e.elementaryStreams=t.elementaryStreams,e.stats=t.stats})),s?Be(e,s,s.startPTS,s.endPTS,s.startDTS,s.endDTS):Ke(t,e),g.length&&(e.totalduration=e.edge-g[0].start),e.driftStartTime=t.driftStartTime,e.driftStart=t.driftStart;var m=e.advancedDateTime;if(e.advanced&&m){var p=e.edge;e.driftStart||(e.driftStartTime=m,e.driftStart=p),e.driftEndTime=m,e.driftEnd=p}else e.driftEndTime=t.driftEndTime,e.driftEnd=t.driftEnd,e.advancedDateTime=t.advancedDateTime}function Ke(t,e){var r=e.startSN+e.skippedSegments-t.startSN,i=t.fragments;r<0||r>=i.length||He(e,i[r].start)}function He(t,e){if(e){for(var r=t.fragments,i=t.skippedSegments;i<r.length;i++)r[i].start+=e;t.fragmentHint&&(t.fragmentHint.start+=e)}}function Ve(t,e,r){var i;return null!=t&&t.details?Ye(null==(i=t.details)?void 0:i.partList,e,r):null}function Ye(t,e,r){if(t)for(var i=t.length;i--;){var n=t[i];if(n.index===r&&n.fragment.sn===e)return n}return null}function We(t){switch(t.details){case R.FRAG_LOAD_TIMEOUT:case R.KEY_LOAD_TIMEOUT:case R.LEVEL_LOAD_TIMEOUT:case R.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function je(t,e){var r=We(e);return t.default[(r?"timeout":"error")+"Retry"]}function qe(t,e){var r="linear"===t.backoff?1:Math.pow(2,e);return Math.min(r*t.retryDelayMs,t.maxRetryDelayMs)}function Xe(t){return i(i({},t),{errorRetry:null,timeoutRetry:null})}function ze(t,e,r,i){return!!t&&e<t.maxNumRetry&&(function(t){return 0===t&&!1===navigator.onLine||!!t&&(t<400||t>499)}(i)||!!r)}var Qe=function(t,e){for(var r=0,i=t.length-1,n=null,a=null;r<=i;){var s=e(a=t[n=(r+i)/2|0]);if(s>0)r=n+1;else{if(!(s<0))return a;i=n-1}}return null};function $e(t,e,r,i){void 0===r&&(r=0),void 0===i&&(i=0);var n=null;if(t?n=e[t.sn-e[0].sn+1]||null:0===r&&0===e[0].start&&(n=e[0]),n&&0===Je(r,i,n))return n;var a=Qe(e,Je.bind(null,r,i));return!a||a===t&&n?n:a}function Je(t,e,r){if(void 0===t&&(t=0),void 0===e&&(e=0),r.start<=t&&r.start+r.duration>t)return 0;var i=Math.min(e,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-i<=t?1:r.start-i>t&&r.start?-1:0}function Ze(t,e,r){var i=1e3*Math.min(e,r.duration+(r.deltaPTS?r.deltaPTS:0));return(r.endProgramDateTime||0)-i>t}var tr,er=3e5,rr=0,ir=2,nr=5,ar=0,sr=1,or=2,lr=function(){function t(t){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=t,this.log=w.log.bind(w,"[info]:"),this.warn=w.warn.bind(w,"[warning]:"),this.error=w.error.bind(w,"[error]:"),this.registerListeners()}var e=t.prototype;return e.registerListeners=function(){var t=this.hls;t.on(S.ERROR,this.onError,this),t.on(S.MANIFEST_LOADING,this.onManifestLoading,this),t.on(S.LEVEL_UPDATED,this.onLevelUpdated,this)},e.unregisterListeners=function(){var t=this.hls;t&&(t.off(S.ERROR,this.onError,this),t.off(S.ERROR,this.onErrorOut,this),t.off(S.MANIFEST_LOADING,this.onManifestLoading,this),t.off(S.LEVEL_UPDATED,this.onLevelUpdated,this))},e.destroy=function(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}},e.startLoad=function(t){this.playlistError=0},e.stopLoad=function(){},e.getVariantLevelIndex=function(t){return(null==t?void 0:t.type)===ge?t.level:this.hls.loadLevel},e.onManifestLoading=function(){this.playlistError=0,this.penalizedRenditions={}},e.onLevelUpdated=function(){this.playlistError=0},e.onError=function(t,e){var r,i;if(!e.fatal){var n=this.hls,a=e.context;switch(e.details){case R.FRAG_LOAD_ERROR:case R.FRAG_LOAD_TIMEOUT:case R.KEY_LOAD_ERROR:case R.KEY_LOAD_TIMEOUT:return void(e.errorAction=this.getFragRetryOrSwitchAction(e));case R.FRAG_PARSING_ERROR:if(null!=(r=e.frag)&&r.gap)return void(e.errorAction={action:rr,flags:ar});case R.FRAG_GAP:case R.FRAG_DECRYPT_ERROR:return e.errorAction=this.getFragRetryOrSwitchAction(e),void(e.errorAction.action=ir);case R.LEVEL_EMPTY_ERROR:case R.LEVEL_PARSING_ERROR:var s,o,l=e.parent===ge?e.level:n.loadLevel;return void(e.details===R.LEVEL_EMPTY_ERROR&&null!=(s=e.context)&&null!=(o=s.levelDetails)&&o.live?e.errorAction=this.getPlaylistRetryOrSwitchAction(e,l):(e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,l)));case R.LEVEL_LOAD_ERROR:case R.LEVEL_LOAD_TIMEOUT:return void("number"==typeof(null==a?void 0:a.level)&&(e.errorAction=this.getPlaylistRetryOrSwitchAction(e,a.level)));case R.AUDIO_TRACK_LOAD_ERROR:case R.AUDIO_TRACK_LOAD_TIMEOUT:case R.SUBTITLE_LOAD_ERROR:case R.SUBTITLE_TRACK_LOAD_TIMEOUT:if(a){var u=n.levels[n.loadLevel];if(u&&(a.type===ce&&a.groupId===u.audioGroupId||a.type===fe&&a.groupId===u.textGroupId))return e.errorAction=this.getPlaylistRetryOrSwitchAction(e,n.loadLevel),e.errorAction.action=ir,void(e.errorAction.flags=sr)}return;case R.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:var h=n.levels[n.loadLevel],d=null==h?void 0:h.attrs["HDCP-LEVEL"];return void(d&&(e.errorAction={action:ir,flags:or,hdcpLevel:d}));case R.BUFFER_ADD_CODEC_ERROR:case R.REMUX_ALLOC_ERROR:return void(e.errorAction=this.getLevelSwitchAction(e,null!=(i=e.level)?i:n.loadLevel));case R.INTERNAL_EXCEPTION:case R.BUFFER_APPENDING_ERROR:case R.BUFFER_APPEND_ERROR:case R.BUFFER_FULL_ERROR:case R.LEVEL_SWITCH_ERROR:case R.BUFFER_STALLED_ERROR:case R.BUFFER_SEEK_OVER_HOLE:case R.BUFFER_NUDGE_ON_STALL:return void(e.errorAction={action:rr,flags:ar})}if(e.type===L.KEY_SYSTEM_ERROR){var c=this.getVariantLevelIndex(e.frag);return e.levelRetry=!1,void(e.errorAction=this.getLevelSwitchAction(e,c))}}},e.getPlaylistRetryOrSwitchAction=function(t,e){var r,i=je(this.hls.config.playlistLoadPolicy,t),n=this.playlistError++,a=null==(r=t.response)?void 0:r.code;if(ze(i,n,We(t),a))return{action:nr,flags:ar,retryConfig:i,retryCount:n};var s=this.getLevelSwitchAction(t,e);return i&&(s.retryConfig=i,s.retryCount=n),s},e.getFragRetryOrSwitchAction=function(t){var e=this.hls,r=this.getVariantLevelIndex(t.frag),i=e.levels[r],n=e.config,a=n.fragLoadPolicy,s=n.keyLoadPolicy,o=je(t.details.startsWith("key")?s:a,t),l=e.levels.reduce((function(t,e){return t+e.fragmentError}),0);if(i){var u;t.details!==R.FRAG_GAP&&i.fragmentError++;var h=null==(u=t.response)?void 0:u.code;if(ze(o,l,We(t),h))return{action:nr,flags:ar,retryConfig:o,retryCount:l}}var d=this.getLevelSwitchAction(t,r);return o&&(d.retryConfig=o,d.retryCount=l),d},e.getLevelSwitchAction=function(t,e){var r=this.hls;null==e&&(e=r.loadLevel);var i=this.hls.levels[e];if(i&&(i.loadError++,r.autoLevelEnabled)){for(var n,a,s=-1,o=r.levels,l=r.loadLevel,u=r.minAutoLevel,h=r.maxAutoLevel,d=null==(n=t.frag)?void 0:n.type,c=null!=(a=t.context)?a:{},f=c.type,g=c.groupId,v=o.length;v--;){var m=(v+l)%o.length;if(m!==l&&m>=u&&m<=h&&0===o[m].loadError){var p=o[m];if(t.details===R.FRAG_GAP&&t.frag){var y=o[m].details;if(y){var T=$e(t.frag,y.fragments,t.frag.start);if(null!=T&&T.gap)continue}}else{if(f===ce&&g===p.audioGroupId||f===fe&&g===p.textGroupId)continue;if(d===ve&&i.audioGroupId===p.audioGroupId||d===me&&i.textGroupId===p.textGroupId)continue}s=m;break}}if(s>-1&&r.loadLevel!==s)return t.levelRetry=!0,this.playlistError=0,{action:ir,flags:ar,nextAutoLevel:s}}return{action:ir,flags:sr}},e.onErrorOut=function(t,e){var r;switch(null==(r=e.errorAction)?void 0:r.action){case rr:break;case ir:this.sendAlternateToPenaltyBox(e),e.errorAction.resolved||e.details===R.FRAG_GAP||(e.fatal=!0)}e.fatal&&this.hls.stopLoad()},e.sendAlternateToPenaltyBox=function(t){var e=this.hls,r=t.errorAction;if(r){var i=r.flags,n=r.hdcpLevel,a=r.nextAutoLevel;switch(i){case ar:this.switchLevel(t,a);break;case sr:r.resolved||(r.resolved=this.redundantFailover(t));break;case or:n&&(e.maxHdcpLevel=Pe[Pe.indexOf(n)-1],r.resolved=!0),this.warn('Restricting playback to HDCP-LEVEL of "'+e.maxHdcpLevel+'" or lower')}r.resolved||this.switchLevel(t,a)}},e.switchLevel=function(t,e){void 0!==e&&t.errorAction&&(this.warn("switching to level "+e+" after "+t.details),this.hls.nextAutoLevel=e,t.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)},e.redundantFailover=function(t){var e=this,r=this.hls,i=this.penalizedRenditions,n=t.parent===ge?t.level:r.loadLevel,a=r.levels[n],s=a.url.length,o=t.frag?t.frag.urlId:a.urlId;a.urlId!==o||t.frag&&!a.details||this.penalizeRendition(a,t);for(var l=function(){var l=(o+u)%s,h=i[l];if(!h||function(t,e,r){if(performance.now()-t.lastErrorPerfMs>er)return!0;var i=t.details;if(e.details===R.FRAG_GAP&&i&&e.frag){var n=e.frag.start,a=$e(null,i.fragments,n);if(a&&!a.gap)return!0}if(r&&t.errors.length<r.errors.length){var s=t.errors[t.errors.length-1];if(i&&s.frag&&e.frag&&Math.abs(s.frag.start-e.frag.start)>3*i.targetduration)return!0}return!1}(h,t,i[o]))return e.warn("Switching to Redundant Stream "+(l+1)+"/"+s+': "'+a.url[l]+'" after '+t.details),e.playlistError=0,r.levels.forEach((function(t){t.urlId=l})),r.nextLoadLevel=n,{v:!0}},u=1;u<s;u++){var h=l();if("object"==typeof h)return h.v}return!1},e.penalizeRendition=function(t,e){var r=this.penalizedRenditions,i=r[t.urlId]||{lastErrorPerfMs:0,errors:[],details:void 0};i.lastErrorPerfMs=performance.now(),i.errors.push(e),i.details=t.details,r[t.urlId]=i},t}(),ur=function(){function t(t,e){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=w.log.bind(w,e+":"),this.warn=w.warn.bind(w,e+":"),this.hls=t}var e=t.prototype;return e.destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},e.clearTimer=function(){clearTimeout(this.timer),this.timer=-1},e.startLoad=function(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()},e.stopLoad=function(){this.canLoad=!1,this.clearTimer()},e.switchParams=function(t,e){var r=null==e?void 0:e.renditionReports;if(r){for(var i=-1,n=0;n<r.length;n++){var a=r[n],s=void 0;try{s=new self.URL(a.URI,e.url).href}catch(t){w.warn("Could not construct new URL for Rendition Report: "+t),s=a.URI||""}if(s===t){i=n;break}s===t.substring(0,s.length)&&(i=n)}if(-1!==i){var o=r[i],l=parseInt(o["LAST-MSN"])||(null==e?void 0:e.lastPartSn),u=parseInt(o["LAST-PART"])||(null==e?void 0:e.lastPartIndex);if(this.hls.config.lowLatencyMode){var h=Math.min(e.age-e.partTarget,e.targetduration);u>=0&&h>e.partTarget&&(u+=1)}return new Oe(l,u>=0?u:void 0,xe)}}},e.loadPlaylist=function(t){-1===this.requestScheduled&&(this.requestScheduled=self.performance.now())},e.shouldLoadPlaylist=function(t){return this.canLoad&&!!t&&!!t.url&&(!t.details||t.details.live)},e.shouldReloadPlaylist=function(t){return-1===this.timer&&-1===this.requestScheduled&&this.shouldLoadPlaylist(t)},e.playlistLoaded=function(t,e,r){var i=this,n=e.details,a=e.stats,s=self.performance.now(),o=a.loading.first?Math.max(0,s-a.loading.first):0;if(n.advancedDateTime=Date.now()-o,n.live||null!=r&&r.live){if(n.reloaded(r),r&&this.log("live playlist "+t+" "+(n.advanced?"REFRESHED "+n.lastPartSn+"-"+n.lastPartIndex:n.updated?"UPDATED":"MISSED")),r&&n.fragments.length>0&&Ge(r,n),!this.canLoad||!n.live)return;var l,u=void 0,h=void 0;if(n.canBlockReload&&n.endSN&&n.advanced){var d=this.hls.config.lowLatencyMode,c=n.lastPartSn,f=n.endSN,g=n.lastPartIndex,v=c===f;-1!==g?(u=v?f+1:c,h=v?d?0:g:g+1):u=f+1;var m=n.age,p=m+n.ageHeader,y=Math.min(p-n.partTarget,1.5*n.targetduration);if(y>0){if(r&&y>r.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+r.tuneInGoal+" to: "+y+" with playlist age: "+n.age),y=0;else{var T=Math.floor(y/n.targetduration);u+=T,void 0!==h&&(h+=Math.round(y%n.targetduration/n.partTarget)),this.log("CDN Tune-in age: "+n.ageHeader+"s last advanced "+m.toFixed(2)+"s goal: "+y+" skip sn "+T+" to part "+h)}n.tuneInGoal=y}if(l=this.getDeliveryDirectives(n,e.deliveryDirectives,u,h),d||!v)return void this.loadPlaylist(l)}else(n.canBlockReload||n.canSkipUntil)&&(l=this.getDeliveryDirectives(n,e.deliveryDirectives,u,h));var E=this.hls.mainForwardBufferInfo,S=E?E.end-E.len:0,L=function(t,e){void 0===e&&(e=1/0);var r=1e3*t.targetduration;if(t.updated){var i=t.fragments;if(i.length&&4*r>e){var n=1e3*i[i.length-1].duration;n<r&&(r=n)}}else r/=2;return Math.round(r)}(n,1e3*(n.edge-S));n.updated&&s>this.requestScheduled+L&&(this.requestScheduled=a.loading.start),void 0!==u&&n.canBlockReload?this.requestScheduled=a.loading.first+L-(1e3*n.partTarget||1e3):-1===this.requestScheduled||this.requestScheduled+L<s?this.requestScheduled=s:this.requestScheduled-s<=0&&(this.requestScheduled+=L);var R=this.requestScheduled-s;R=Math.max(0,R),this.log("reload live playlist "+t+" in "+Math.round(R)+" ms"),this.timer=self.setTimeout((function(){return i.loadPlaylist(l)}),R)}else this.clearTimer()},e.getDeliveryDirectives=function(t,e,r,i){var n=function(t,e){var r=t.canSkipUntil,i=t.canSkipDateRanges,n=t.endSN;return r&&(void 0!==e?e-n:0)<r?i?Me:Fe:xe}(t,r);return null!=e&&e.skip&&t.deltaUpdateFailed&&(r=e.msn,i=e.part,n=xe),new Oe(r,i,n)},e.checkRetry=function(t){var e=this,r=t.details,i=We(t),n=t.errorAction,a=n||{},s=a.action,o=a.retryCount,l=void 0===o?0:o,u=a.retryConfig,h=!!n&&!!u&&(s===nr||!n.resolved&&s===ir);if(h){var d;if(this.requestScheduled=-1,l>=u.maxNumRetry)return!1;if(i&&null!=(d=t.context)&&d.deliveryDirectives)this.warn("Retrying playlist loading "+(l+1)+"/"+u.maxNumRetry+' after "'+r+'" without delivery-directives'),this.loadPlaylist();else{var c=qe(u,l);this.timer=self.setTimeout((function(){return e.loadPlaylist()}),c),this.warn("Retrying playlist loading "+(l+1)+"/"+u.maxNumRetry+' after "'+r+'" in '+c+"ms")}t.levelRetry=!0,n.resolved=!0}return h},t}(),hr=function(t){function e(e,r){var i;return(i=t.call(this,e,"[level-controller]")||this)._levels=[],i._firstLevel=-1,i._startLevel=void 0,i.currentLevel=null,i.currentLevelIndex=-1,i.manualLevelIndex=-1,i.steering=void 0,i.onParsedComplete=void 0,i.steering=r,i._registerListeners(),i}l(e,t);var r=e.prototype;return r._registerListeners=function(){var t=this.hls;t.on(S.MANIFEST_LOADING,this.onManifestLoading,this),t.on(S.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(S.LEVEL_LOADED,this.onLevelLoaded,this),t.on(S.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(S.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.on(S.FRAG_LOADED,this.onFragLoaded,this),t.on(S.ERROR,this.onError,this)},r._unregisterListeners=function(){var t=this.hls;t.off(S.MANIFEST_LOADING,this.onManifestLoading,this),t.off(S.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(S.LEVEL_LOADED,this.onLevelLoaded,this),t.off(S.LEVELS_UPDATED,this.onLevelsUpdated,this),t.off(S.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.off(S.FRAG_LOADED,this.onFragLoaded,this),t.off(S.ERROR,this.onError,this)},r.destroy=function(){this._unregisterListeners(),this.steering=null,this.resetLevels(),t.prototype.destroy.call(this)},r.startLoad=function(){this._levels.forEach((function(t){t.loadError=0,t.fragmentError=0})),t.prototype.startLoad.call(this)},r.resetLevels=function(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[]},r.onManifestLoading=function(t,e){this.resetLevels()},r.onManifestLoaded=function(t,e){var r,i=[],n={};e.levels.forEach((function(t){var e,a=t.attrs;-1!==(null==(e=t.audioCodec)?void 0:e.indexOf("mp4a.40.34"))&&(tr||(tr=/chrome|firefox/i.test(navigator.userAgent)),tr&&(t.audioCodec=void 0));var s=a.AUDIO,o=a.CODECS,l=a["FRAME-RATE"],u=a["PATHWAY-ID"],h=a.RESOLUTION,d=a.SUBTITLES,c=(u||".")+"-"+t.bitrate+"-"+h+"-"+l+"-"+o;(r=n[c])?r.addFallback(t):(r=new Ne(t),n[c]=r,i.push(r)),dr(r,"audio",s),dr(r,"text",d)})),this.filterAndSortMediaOptions(i,e)},r.filterAndSortMediaOptions=function(t,e){var r=this,i=[],n=[],a=!1,s=!1,o=!1,l=t.filter((function(t){var e=t.audioCodec,r=t.videoCodec,i=t.width,n=t.height,l=t.unknownCodecs;return a||(a=!(!i||!n)),s||(s=!!r),o||(o=!!e),!(null!=l&&l.length)&&(!e||Qt(e,"audio"))&&(!r||Qt(r,"video"))}));if((a||s)&&o&&(l=l.filter((function(t){var e=t.videoCodec,r=t.width,i=t.height;return!!e||!(!r||!i)}))),0!==l.length){e.audioTracks&&cr(i=e.audioTracks.filter((function(t){return!t.audioCodec||Qt(t.audioCodec,"audio")}))),e.subtitles&&cr(n=e.subtitles);var u=l.slice(0);l.sort((function(t,e){return t.attrs["HDCP-LEVEL"]!==e.attrs["HDCP-LEVEL"]?(t.attrs["HDCP-LEVEL"]||"")>(e.attrs["HDCP-LEVEL"]||"")?1:-1:t.bitrate!==e.bitrate?t.bitrate-e.bitrate:t.attrs["FRAME-RATE"]!==e.attrs["FRAME-RATE"]?t.attrs.decimalFloatingPoint("FRAME-RATE")-e.attrs.decimalFloatingPoint("FRAME-RATE"):t.attrs.SCORE!==e.attrs.SCORE?t.attrs.decimalFloatingPoint("SCORE")-e.attrs.decimalFloatingPoint("SCORE"):a&&t.height!==e.height?t.height-e.height:0}));var h=u[0];if(this.steering&&(l=this.steering.filterParsedLevels(l)).length!==u.length)for(var d=0;d<u.length;d++)if(u[d].pathwayId===l[0].pathwayId){h=u[d];break}this._levels=l;for(var c=0;c<l.length;c++)if(l[c]===h){this._firstLevel=c,this.log("manifest loaded, "+l.length+" level(s) found, first bitrate: "+h.bitrate);break}var f=o&&!s,g={levels:l,audioTracks:i,subtitleTracks:n,sessionData:e.sessionData,sessionKeys:e.sessionKeys,firstLevel:this._firstLevel,stats:e.stats,audio:o,video:s,altAudio:!f&&i.some((function(t){return!!t.url}))};this.hls.trigger(S.MANIFEST_PARSED,g),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else Promise.resolve().then((function(){if(r.hls){var t=new Error("no level with compatible codecs found in manifest");r.hls.trigger(S.ERROR,{type:L.MEDIA_ERROR,details:R.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:e.url,error:t,reason:t.message})}}))},r.onError=function(t,e){!e.fatal&&e.context&&e.context.type===de&&e.context.level===this.level&&this.checkRetry(e)},r.onFragLoaded=function(t,e){var r=e.frag;if(void 0!==r&&r.type===ge){var i=this._levels[r.level];void 0!==i&&(i.loadError=0)}},r.onLevelLoaded=function(t,e){var r,i,n=e.level,a=e.details,s=this._levels[n];if(!s)return this.warn("Invalid level index "+n),void(null!=(i=e.deliveryDirectives)&&i.skip&&(a.deltaUpdateFailed=!0));n===this.currentLevelIndex?(0===s.fragmentError&&(s.loadError=0),this.playlistLoaded(n,e,s.details)):null!=(r=e.deliveryDirectives)&&r.skip&&(a.deltaUpdateFailed=!0)},r.onAudioTrackSwitched=function(t,e){var r=this.currentLevel;if(r){var i=this.hls.audioTracks[e.id].groupId;if(r.audioGroupIds&&r.audioGroupId!==i){for(var n=-1,a=0;a<r.audioGroupIds.length;a++)if(r.audioGroupIds[a]===i){n=a;break}-1!==n&&n!==r.urlId&&(r.urlId=n,this.canLoad&&this.startLoad())}}},r.loadPlaylist=function(e){t.prototype.loadPlaylist.call(this);var r=this.currentLevelIndex,i=this.currentLevel;if(i&&this.shouldLoadPlaylist(i)){var n=i.urlId,a=i.uri;if(e)try{a=e.addDirectives(a)}catch(t){this.warn("Could not construct new URL with HLS Delivery Directives: "+t)}var s=i.attrs["PATHWAY-ID"];this.log("Loading level index "+r+(void 0!==(null==e?void 0:e.msn)?" at sn "+e.msn+" part "+e.part:"")+" with"+(s?" Pathway "+s:"")+" URI "+(n+1)+"/"+i.url.length+" "+a),this.clearTimer(),this.hls.trigger(S.LEVEL_LOADING,{url:a,level:r,id:n,deliveryDirectives:e||null})}},r.removeLevel=function(t,e){var r=this,i=function(t,r){return r!==e},n=this._levels.filter((function(n,a){return a!==t||(n.url.length>1&&void 0!==e?(n.url=n.url.filter(i),n.audioGroupIds&&(n.audioGroupIds=n.audioGroupIds.filter(i)),n.textGroupIds&&(n.textGroupIds=n.textGroupIds.filter(i)),n.urlId=0,!0):(r.steering&&r.steering.removeLevel(n),!1))}));this.hls.trigger(S.LEVELS_UPDATED,{levels:n})},r.onLevelsUpdated=function(t,e){var r=e.levels;r.forEach((function(t,e){var r=t.details;null!=r&&r.fragments&&r.fragments.forEach((function(t){t.level=e}))})),this._levels=r},a(e,[{key:"levels",get:function(){return 0===this._levels.length?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(t){var e=this._levels;if(0!==e.length){if(t<0||t>=e.length){var r=new Error("invalid level idx"),i=t<0;if(this.hls.trigger(S.ERROR,{type:L.OTHER_ERROR,details:R.LEVEL_SWITCH_ERROR,level:t,fatal:i,error:r,reason:r.message}),i)return;t=Math.min(t,e.length-1)}var n=this.currentLevelIndex,a=this.currentLevel,s=a?a.attrs["PATHWAY-ID"]:void 0,l=e[t],u=l.attrs["PATHWAY-ID"];if(this.currentLevelIndex=t,this.currentLevel=l,n!==t||!l.details||!a||s!==u){this.log("Switching to level "+t+(u?" with Pathway "+u:"")+" from level "+n+(s?" with Pathway "+s:""));var h=o({},l,{level:t,maxBitrate:l.maxBitrate,attrs:l.attrs,uri:l.uri,urlId:l.urlId});delete h._attrs,delete h._urlId,this.hls.trigger(S.LEVEL_SWITCHING,h);var d=l.details;if(!d||d.live){var c=this.switchParams(l.uri,null==a?void 0:a.details);this.loadPlaylist(c)}}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(t){this.manualLevelIndex=t,void 0===this._startLevel&&(this._startLevel=t),-1!==t&&(this.level=t)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(t){this._firstLevel=t}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var t=this.hls.config.startLevel;return void 0!==t?t:this._firstLevel}return this._startLevel},set:function(t){this._startLevel=t}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(t){this.level=t,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=t)}}]),e}(ur);function dr(t,e,r){r&&("audio"===e?(t.audioGroupIds||(t.audioGroupIds=[]),t.audioGroupIds[t.url.length-1]=r):"text"===e&&(t.textGroupIds||(t.textGroupIds=[]),t.textGroupIds[t.url.length-1]=r))}function cr(t){var e={};t.forEach((function(t){var r=t.groupId||"";t.id=e[r]=e[r]||0,e[r]++}))}var fr="NOT_LOADED",gr="APPENDING",vr="PARTIAL",mr="OK",pr=function(){function t(t){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=t,this._registerListeners()}var e=t.prototype;return e._registerListeners=function(){var t=this.hls;t.on(S.BUFFER_APPENDED,this.onBufferAppended,this),t.on(S.FRAG_BUFFERED,this.onFragBuffered,this),t.on(S.FRAG_LOADED,this.onFragLoaded,this)},e._unregisterListeners=function(){var t=this.hls;t.off(S.BUFFER_APPENDED,this.onBufferAppended,this),t.off(S.FRAG_BUFFERED,this.onFragBuffered,this),t.off(S.FRAG_LOADED,this.onFragLoaded,this)},e.destroy=function(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null},e.getAppendedFrag=function(t,e){var r=this.activePartLists[e];if(r)for(var i=r.length;i--;){var n=r[i];if(!n)break;var a=n.end;if(n.start<=t&&null!==a&&t<=a)return n}return this.getBufferedFrag(t,e)},e.getBufferedFrag=function(t,e){for(var r=this.fragments,i=Object.keys(r),n=i.length;n--;){var a=r[i[n]];if((null==a?void 0:a.body.type)===e&&a.buffered){var s=a.body;if(s.start<=t&&t<=s.end)return s}}return null},e.detectEvictedFragments=function(t,e,r,i){var n=this;this.timeRanges&&(this.timeRanges[t]=e);var a=(null==i?void 0:i.fragment.sn)||-1;Object.keys(this.fragments).forEach((function(i){var s=n.fragments[i];if(s&&!(a>=s.body.sn))if(s.buffered||s.loaded){var o=s.range[t];o&&o.time.some((function(t){var r=!n.isTimeBuffered(t.startPTS,t.endPTS,e);return r&&n.removeFragment(s.body),r}))}else s.body.type===r&&n.removeFragment(s.body)}))},e.detectPartialFragments=function(t){var e=this,r=this.timeRanges,i=t.frag,n=t.part;if(r&&"initSegment"!==i.sn){var a=Tr(i),s=this.fragments[a];if(!(!s||s.buffered&&i.gap)){var o=!i.relurl;Object.keys(r).forEach((function(t){var a=i.elementaryStreams[t];if(a){var l=r[t],u=o||!0===a.partial;s.range[t]=e.getBufferedTimes(i,n,u,l)}})),s.loaded=null,Object.keys(s.range).length?(s.buffered=!0,(s.body.endList=i.endList||s.body.endList)&&(this.endListFragments[s.body.type]=s),yr(s)||this.removeParts(i.sn-1,i.type)):this.removeFragment(s.body)}}},e.removeParts=function(t,e){var r=this.activePartLists[e];r&&(this.activePartLists[e]=r.filter((function(e){return e.fragment.sn>=t})))},e.fragBuffered=function(t,e){var r=Tr(t),i=this.fragments[r];!i&&e&&(i=this.fragments[r]={body:t,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},t.gap&&(this.hasGaps=!0)),i&&(i.loaded=null,i.buffered=!0)},e.getBufferedTimes=function(t,e,r,i){for(var n={time:[],partial:r},a=t.start,s=t.end,o=t.minEndPTS||s,l=t.maxStartPTS||a,u=0;u<i.length;u++){var h=i.start(u)-this.bufferPadding,d=i.end(u)+this.bufferPadding;if(l>=h&&o<=d){n.time.push({startPTS:Math.max(a,i.start(u)),endPTS:Math.min(s,i.end(u))});break}if(a<d&&s>h)n.partial=!0,n.time.push({startPTS:Math.max(a,i.start(u)),endPTS:Math.min(s,i.end(u))});else if(s<=h)break}return n},e.getPartialFragment=function(t){var e,r,i,n=null,a=0,s=this.bufferPadding,o=this.fragments;return Object.keys(o).forEach((function(l){var u=o[l];u&&yr(u)&&(r=u.body.start-s,i=u.body.end+s,t>=r&&t<=i&&(e=Math.min(t-r,i-t),a<=e&&(n=u.body,a=e)))})),n},e.isEndListAppended=function(t){var e=this.endListFragments[t];return void 0!==e&&(e.buffered||yr(e))},e.getState=function(t){var e=Tr(t),r=this.fragments[e];return r?r.buffered?yr(r)?vr:mr:gr:fr},e.isTimeBuffered=function(t,e,r){for(var i,n,a=0;a<r.length;a++){if(i=r.start(a)-this.bufferPadding,n=r.end(a)+this.bufferPadding,t>=i&&e<=n)return!0;if(e<=i)return!1}return!1},e.onFragLoaded=function(t,e){var r=e.frag,i=e.part;if("initSegment"!==r.sn&&!r.bitrateTest){var n=i?null:e,a=Tr(r);this.fragments[a]={body:r,appendedPTS:null,loaded:n,buffered:!1,range:Object.create(null)}}},e.onBufferAppended=function(t,e){var r=this,i=e.frag,n=e.part,a=e.timeRanges;if("initSegment"!==i.sn){var s=i.type;if(n){var o=this.activePartLists[s];o||(this.activePartLists[s]=o=[]),o.push(n)}this.timeRanges=a,Object.keys(a).forEach((function(t){var e=a[t];r.detectEvictedFragments(t,e,s,n)}))}},e.onFragBuffered=function(t,e){this.detectPartialFragments(e)},e.hasFragment=function(t){var e=Tr(t);return!!this.fragments[e]},e.hasParts=function(t){var e;return!(null==(e=this.activePartLists[t])||!e.length)},e.removeFragmentsInRange=function(t,e,r,i,n){var a=this;i&&!this.hasGaps||Object.keys(this.fragments).forEach((function(s){var o=a.fragments[s];if(o){var l=o.body;l.type!==r||i&&!l.gap||l.start<e&&l.end>t&&(o.buffered||n)&&a.removeFragment(l)}}))},e.removeFragment=function(t){var e=Tr(t);t.stats.loaded=0,t.clearElementaryStreamInfo();var r=this.activePartLists[t.type];if(r){var i=t.sn;this.activePartLists[t.type]=r.filter((function(t){return t.fragment.sn!==i}))}delete this.fragments[e],t.endList&&delete this.endListFragments[t.type]},e.removeAllFragments=function(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1},t}();function yr(t){var e,r,i;return t.buffered&&(t.body.gap||(null==(e=t.range.video)?void 0:e.partial)||(null==(r=t.range.audio)?void 0:r.partial)||(null==(i=t.range.audiovideo)?void 0:i.partial))}function Tr(t){return t.type+"_"+t.level+"_"+t.urlId+"_"+t.sn}var Er=Math.pow(2,17),Sr=function(){function t(t){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=t}var e=t.prototype;return e.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},e.abort=function(){this.loader&&this.loader.abort()},e.load=function(t,e){var r=this,n=t.url;if(!n)return Promise.reject(new Ar({type:L.NETWORK_ERROR,details:R.FRAG_LOAD_ERROR,fatal:!1,frag:t,error:new Error("Fragment does not have a "+(n?"part list":"url")),networkDetails:null}));this.abort();var a=this.config,s=a.fLoader,o=a.loader;return new Promise((function(l,u){if(r.loader&&r.loader.destroy(),t.gap){if(t.tagList.some((function(t){return"GAP"===t[0]})))return void u(Rr(t));t.gap=!1}var h=r.loader=t.loader=s?new s(a):new o(a),d=Lr(t),c=Xe(a.fragLoadPolicy.default),f={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:"initSegment"===t.sn?1/0:Er};t.stats=h.stats,h.load(d,f,{onSuccess:function(e,i,n,a){r.resetLoader(t,h);var s=e.data;n.resetIV&&t.decryptdata&&(t.decryptdata.iv=new Uint8Array(s.slice(0,16)),s=s.slice(16)),l({frag:t,part:null,payload:s,networkDetails:a})},onError:function(e,a,s,o){r.resetLoader(t,h),u(new Ar({type:L.NETWORK_ERROR,details:R.FRAG_LOAD_ERROR,fatal:!1,frag:t,response:i({url:n,data:void 0},e),error:new Error("HTTP Error "+e.code+" "+e.text),networkDetails:s,stats:o}))},onAbort:function(e,i,n){r.resetLoader(t,h),u(new Ar({type:L.NETWORK_ERROR,details:R.INTERNAL_ABORTED,fatal:!1,frag:t,error:new Error("Aborted"),networkDetails:n,stats:e}))},onTimeout:function(e,i,n){r.resetLoader(t,h),u(new Ar({type:L.NETWORK_ERROR,details:R.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t,error:new Error("Timeout after "+f.timeout+"ms"),networkDetails:n,stats:e}))},onProgress:function(r,i,n,a){e&&e({frag:t,part:null,payload:n,networkDetails:a})}})}))},e.loadPart=function(t,e,r){var n=this;this.abort();var a=this.config,s=a.fLoader,o=a.loader;return new Promise((function(l,u){if(n.loader&&n.loader.destroy(),t.gap||e.gap)u(Rr(t,e));else{var h=n.loader=t.loader=s?new s(a):new o(a),d=Lr(t,e),c=Xe(a.fragLoadPolicy.default),f={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:Er};e.stats=h.stats,h.load(d,f,{onSuccess:function(i,a,s,o){n.resetLoader(t,h),n.updateStatsFromPart(t,e);var u={frag:t,part:e,payload:i.data,networkDetails:o};r(u),l(u)},onError:function(r,a,s,o){n.resetLoader(t,h),u(new Ar({type:L.NETWORK_ERROR,details:R.FRAG_LOAD_ERROR,fatal:!1,frag:t,part:e,response:i({url:d.url,data:void 0},r),error:new Error("HTTP Error "+r.code+" "+r.text),networkDetails:s,stats:o}))},onAbort:function(r,i,a){t.stats.aborted=e.stats.aborted,n.resetLoader(t,h),u(new Ar({type:L.NETWORK_ERROR,details:R.INTERNAL_ABORTED,fatal:!1,frag:t,part:e,error:new Error("Aborted"),networkDetails:a,stats:r}))},onTimeout:function(r,i,a){n.resetLoader(t,h),u(new Ar({type:L.NETWORK_ERROR,details:R.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t,part:e,error:new Error("Timeout after "+f.timeout+"ms"),networkDetails:a,stats:r}))}})}}))},e.updateStatsFromPart=function(t,e){var r=t.stats,i=e.stats,n=i.total;if(r.loaded+=i.loaded,n){var a=Math.round(t.duration/e.duration),s=Math.min(Math.round(r.loaded/n),a),o=(a-s)*Math.round(r.loaded/s);r.total=r.loaded+o}else r.total=Math.max(r.loaded,r.total);var l=r.loading,u=i.loading;l.start?l.first+=u.first-u.start:(l.start=u.start,l.first=u.first),l.end=u.end},e.resetLoader=function(t,e){t.loader=null,this.loader===e&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),e.destroy()},t}();function Lr(t,e){void 0===e&&(e=null);var r=e||t,i={frag:t,part:e,responseType:"arraybuffer",url:r.url,headers:{},rangeStart:0,rangeEnd:0},n=r.byteRangeStartOffset,a=r.byteRangeEndOffset;if(E(n)&&E(a)){var s,o=n,l=a;if("initSegment"===t.sn&&"AES-128"===(null==(s=t.decryptdata)?void 0:s.method)){var u=a-n;u%16&&(l=a+(16-u%16)),0!==n&&(i.resetIV=!0,o=n-16)}i.rangeStart=o,i.rangeEnd=l}return i}function Rr(t,e){var r=new Error("GAP "+(t.gap?"tag":"attribute")+" found"),i={type:L.MEDIA_ERROR,details:R.FRAG_GAP,fatal:!1,frag:t,error:r,networkDetails:null};return e&&(i.part=e),(e||t).stats.aborted=!0,new Ar(i)}var Ar=function(t){function e(e){var r;return(r=t.call(this,e.error.message)||this).data=void 0,r.data=e,r}return l(e,t),e}(f(Error)),kr=function(){function t(t){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=t}var e=t.prototype;return e.abort=function(t){for(var e in this.keyUriToKeyInfo){var r=this.keyUriToKeyInfo[e].loader;if(r){if(t&&t!==r.context.frag.type)return;r.abort()}}},e.detach=function(){for(var t in this.keyUriToKeyInfo){var e=this.keyUriToKeyInfo[t];(e.mediaKeySessionContext||e.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[t]}},e.destroy=function(){for(var t in this.detach(),this.keyUriToKeyInfo){var e=this.keyUriToKeyInfo[t].loader;e&&e.destroy()}this.keyUriToKeyInfo={}},e.createKeyLoadError=function(t,e,r,i,n){return void 0===e&&(e=R.KEY_LOAD_ERROR),new Ar({type:L.NETWORK_ERROR,details:e,fatal:!1,frag:t,response:n,error:r,networkDetails:i})},e.loadClear=function(t,e){var r=this;if(this.emeController&&this.config.emeEnabled)for(var i=t.sn,n=t.cc,a=function(){var t=e[s];if(n<=t.cc&&("initSegment"===i||"initSegment"===t.sn||i<t.sn))return r.emeController.selectKeySystemFormat(t).then((function(e){t.setKeyFormat(e)})),"break"},s=0;s<e.length&&"break"!==a();s++);},e.load=function(t){var e=this;return!t.decryptdata&&t.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(t).then((function(r){return e.loadInternal(t,r)})):this.loadInternal(t)},e.loadInternal=function(t,e){var r,i;e&&t.setKeyFormat(e);var n=t.decryptdata;if(!n){var a=new Error(e?"Expected frag.decryptdata to be defined after setting format "+e:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(t,R.KEY_LOAD_ERROR,a))}var s=n.uri;if(!s)return Promise.reject(this.createKeyLoadError(t,R.KEY_LOAD_ERROR,new Error('Invalid key URI: "'+s+'"')));var o,l=this.keyUriToKeyInfo[s];if(null!=(r=l)&&r.decryptdata.key)return n.key=l.decryptdata.key,Promise.resolve({frag:t,keyInfo:l});if(null!=(i=l)&&i.keyLoadPromise)switch(null==(o=l.mediaKeySessionContext)?void 0:o.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return l.keyLoadPromise.then((function(e){return n.key=e.keyInfo.decryptdata.key,{frag:t,keyInfo:l}}))}switch(l=this.keyUriToKeyInfo[s]={decryptdata:n,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},n.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return"identity"===n.keyFormat?this.loadKeyHTTP(l,t):this.loadKeyEME(l,t);case"AES-128":return this.loadKeyHTTP(l,t);default:return Promise.reject(this.createKeyLoadError(t,R.KEY_LOAD_ERROR,new Error('Key supplied with unsupported METHOD: "'+n.method+'"')))}},e.loadKeyEME=function(t,e){var r={frag:e,keyInfo:t};if(this.emeController&&this.config.emeEnabled){var i=this.emeController.loadKey(r);if(i)return(t.keyLoadPromise=i.then((function(e){return t.mediaKeySessionContext=e,r}))).catch((function(e){throw t.keyLoadPromise=null,e}))}return Promise.resolve(r)},e.loadKeyHTTP=function(t,e){var r=this,n=this.config,a=new(0,n.loader)(n);return e.keyLoader=t.loader=a,t.keyLoadPromise=new Promise((function(s,o){var l={keyInfo:t,frag:e,responseType:"arraybuffer",url:t.decryptdata.uri},u=n.keyLoadPolicy.default,h={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:function(t,e,i,n){var a=i.frag,l=i.keyInfo,u=i.url;if(!a.decryptdata||l!==r.keyUriToKeyInfo[u])return o(r.createKeyLoadError(a,R.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),n));l.decryptdata.key=a.decryptdata.key=new Uint8Array(t.data),a.keyLoader=null,l.loader=null,s({frag:a,keyInfo:l})},onError:function(t,n,a,s){r.resetLoader(n),o(r.createKeyLoadError(e,R.KEY_LOAD_ERROR,new Error("HTTP Error "+t.code+" loading key "+t.text),a,i({url:l.url,data:void 0},t)))},onTimeout:function(t,i,n){r.resetLoader(i),o(r.createKeyLoadError(e,R.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),n))},onAbort:function(t,i,n){r.resetLoader(i),o(r.createKeyLoadError(e,R.INTERNAL_ABORTED,new Error("key loading aborted"),n))}};a.load(l,h,d)}))},e.resetLoader=function(t){var e=t.frag,r=t.keyInfo,i=t.url,n=r.loader;e.keyLoader===n&&(e.keyLoader=null,r.loader=null),delete this.keyUriToKeyInfo[i],n&&n.destroy()},t}(),br=function(){function t(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}var e=t.prototype;return e.destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},e.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},e.onHandlerDestroyed=function(){},e.hasInterval=function(){return!!this._tickInterval},e.hasNextTick=function(){return!!this._tickTimer},e.setInterval=function(t){return!this._tickInterval&&(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,t),!0)},e.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},e.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},e.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)},e.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},e.doTick=function(){},t}(),Dr={length:0,start:function(){return 0},end:function(){return 0}},Ir=function(){function t(){}return t.isBuffered=function(e,r){try{if(e)for(var i=t.getBuffered(e),n=0;n<i.length;n++)if(r>=i.start(n)&&r<=i.end(n))return!0}catch(t){}return!1},t.bufferInfo=function(e,r,i){try{if(e){var n,a=t.getBuffered(e),s=[];for(n=0;n<a.length;n++)s.push({start:a.start(n),end:a.end(n)});return this.bufferedInfo(s,r,i)}}catch(t){}return{len:0,start:r,end:r,nextStart:void 0}},t.bufferedInfo=function(t,e,r){e=Math.max(0,e),t.sort((function(t,e){var r=t.start-e.start;return r||e.end-t.end}));var i=[];if(r)for(var n=0;n<t.length;n++){var a=i.length;if(a){var s=i[a-1].end;t[n].start-s<r?t[n].end>s&&(i[a-1].end=t[n].end):i.push(t[n])}else i.push(t[n])}else i=t;for(var o,l=0,u=e,h=e,d=0;d<i.length;d++){var c=i[d].start,f=i[d].end;if(e+r>=c&&e<f)u=c,l=(h=f)-e;else if(e+r<c){o=c;break}}return{len:l,start:u||0,end:h||0,nextStart:o}},t.getBuffered=function(t){try{return t.buffered}catch(t){return w.log("failed to get media.buffered",t),Dr}},t}(),wr=function(t,e,r,i,n,a){void 0===i&&(i=0),void 0===n&&(n=-1),void 0===a&&(a=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=t,this.sn=e,this.id=r,this.size=i,this.part=n,this.partial=a};function Cr(t,e){for(var r=null,i=0,n=t.length;i<n;i++){var a=t[i];if(a&&a.cc===e){r=a;break}}return r}function _r(t,e){if(t){var r=t.start+e;t.start=t.startPTS=r,t.endPTS=r+t.duration}}function Pr(t,e){for(var r=e.fragments,i=0,n=r.length;i<n;i++)_r(r[i],t);e.fragmentHint&&_r(e.fragmentHint,t),e.alignedSliding=!0}function xr(t,e,r){e&&(function(t,e,r){if(function(t,e,r){return!(!e.details||!(r.endCC>r.startCC||t&&t.cc<r.startCC))}(t,r,e)){var i=function(t,e,r){var i=t.fragments,n=e.fragments;if(n.length&&i.length){var a=Cr(i,n[0].cc);if(a&&(!a||a.startPTS))return a;w.log("No frag in previous level to align on")}else w.log("No fragments to align")}(r.details,e);i&&E(i.start)&&(w.log("Adjusting PTS using last level due to CC increase within current level "+e.url),Pr(i.start,e))}}(t,r,e),!r.alignedSliding&&e.details&&function(t,e){if(e.fragments.length&&t.hasProgramDateTime&&e.hasProgramDateTime){var r=e.fragments[0].programDateTime,i=t.fragments[0].programDateTime,n=(i-r)/1e3+e.fragments[0].start;n&&E(n)&&(w.log("Adjusting PTS using programDateTime delta "+(i-r)+"ms, sliding:"+n.toFixed(3)+" "+t.url+" "),Pr(n,t))}}(r,e.details),r.alignedSliding||!e.details||r.skippedSegments||Ke(e.details,r))}function Fr(t,e){if(t.hasProgramDateTime&&e.hasProgramDateTime){var r=t.fragments,i=e.fragments;if(r.length&&i.length){var n=i[Math.round(i.length/2)-1],a=Cr(r,n.cc)||r[Math.round(r.length/2)-1],s=n.programDateTime,o=a.programDateTime;null!==s&&null!==o&&Pr((o-s)/1e3-(a.start-n.start),t)}}}var Mr=function(){function t(t,e){this.subtle=void 0,this.aesIV=void 0,this.subtle=t,this.aesIV=e}return t.prototype.decrypt=function(t,e){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},e,t)},t}(),Or=function(){function t(t,e){this.subtle=void 0,this.key=void 0,this.subtle=t,this.key=e}return t.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},t}(),Nr=function(){function t(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}var e=t.prototype;return e.uint8ArrayToUint32Array_=function(t){for(var e=new DataView(t),r=new Uint32Array(4),i=0;i<4;i++)r[i]=e.getUint32(4*i);return r},e.initTable=function(){var t=this.sBox,e=this.invSBox,r=this.subMix,i=r[0],n=r[1],a=r[2],s=r[3],o=this.invSubMix,l=o[0],u=o[1],h=o[2],d=o[3],c=new Uint32Array(256),f=0,g=0,v=0;for(v=0;v<256;v++)c[v]=v<128?v<<1:v<<1^283;for(v=0;v<256;v++){var m=g^g<<1^g<<2^g<<3^g<<4;m=m>>>8^255&m^99,t[f]=m,e[m]=f;var p=c[f],y=c[p],T=c[y],E=257*c[m]^16843008*m;i[f]=E<<24|E>>>8,n[f]=E<<16|E>>>16,a[f]=E<<8|E>>>24,s[f]=E,E=16843009*T^65537*y^257*p^16843008*f,l[m]=E<<24|E>>>8,u[m]=E<<16|E>>>16,h[m]=E<<8|E>>>24,d[m]=E,f?(f=p^c[c[c[T^p]]],g^=c[c[g]]):f=g=1}},e.expandKey=function(t){for(var e=this.uint8ArrayToUint32Array_(t),r=!0,i=0;i<e.length&&r;)r=e[i]===this.key[i],i++;if(!r){this.key=e;var n=this.keySize=e.length;if(4!==n&&6!==n&&8!==n)throw new Error("Invalid aes key size="+n);var a,s,o,l,u=this.ksRows=4*(n+6+1),h=this.keySchedule=new Uint32Array(u),d=this.invKeySchedule=new Uint32Array(u),c=this.sBox,f=this.rcon,g=this.invSubMix,v=g[0],m=g[1],p=g[2],y=g[3];for(a=0;a<u;a++)a<n?o=h[a]=e[a]:(l=o,a%n==0?(l=c[(l=l<<8|l>>>24)>>>24]<<24|c[l>>>16&255]<<16|c[l>>>8&255]<<8|c[255&l],l^=f[a/n|0]<<24):n>6&&a%n==4&&(l=c[l>>>24]<<24|c[l>>>16&255]<<16|c[l>>>8&255]<<8|c[255&l]),h[a]=o=(h[a-n]^l)>>>0);for(s=0;s<u;s++)a=u-s,l=3&s?h[a]:h[a-4],d[s]=s<4||a<=4?l:v[c[l>>>24]]^m[c[l>>>16&255]]^p[c[l>>>8&255]]^y[c[255&l]],d[s]=d[s]>>>0}},e.networkToHostOrderSwap=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},e.decrypt=function(t,e,r){for(var i,n,a,s,o,l,u,h,d,c,f,g,v,m,p=this.keySize+6,y=this.invKeySchedule,T=this.invSBox,E=this.invSubMix,S=E[0],L=E[1],R=E[2],A=E[3],k=this.uint8ArrayToUint32Array_(r),b=k[0],D=k[1],I=k[2],w=k[3],C=new Int32Array(t),_=new Int32Array(C.length),P=this.networkToHostOrderSwap;e<C.length;){for(d=P(C[e]),c=P(C[e+1]),f=P(C[e+2]),g=P(C[e+3]),o=d^y[0],l=g^y[1],u=f^y[2],h=c^y[3],v=4,m=1;m<p;m++)i=S[o>>>24]^L[l>>16&255]^R[u>>8&255]^A[255&h]^y[v],n=S[l>>>24]^L[u>>16&255]^R[h>>8&255]^A[255&o]^y[v+1],a=S[u>>>24]^L[h>>16&255]^R[o>>8&255]^A[255&l]^y[v+2],s=S[h>>>24]^L[o>>16&255]^R[l>>8&255]^A[255&u]^y[v+3],o=i,l=n,u=a,h=s,v+=4;i=T[o>>>24]<<24^T[l>>16&255]<<16^T[u>>8&255]<<8^T[255&h]^y[v],n=T[l>>>24]<<24^T[u>>16&255]<<16^T[h>>8&255]<<8^T[255&o]^y[v+1],a=T[u>>>24]<<24^T[h>>16&255]<<16^T[o>>8&255]<<8^T[255&l]^y[v+2],s=T[h>>>24]<<24^T[o>>16&255]<<16^T[l>>8&255]<<8^T[255&u]^y[v+3],_[e]=P(i^b),_[e+1]=P(s^D),_[e+2]=P(a^I),_[e+3]=P(n^w),b=d,D=c,I=f,w=g,e+=4}return _.buffer},t}(),Ur=function(){function t(t,e){var r=(void 0===e?{}:e).removePKCS7Padding,i=void 0===r||r;if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=t.enableSoftwareAES,this.removePKCS7Padding=i,i)try{var n=self.crypto;n&&(this.subtle=n.subtle||n.webkitSubtle)}catch(t){}null===this.subtle&&(this.useSoftware=!0)}var e=t.prototype;return e.destroy=function(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null},e.isSync=function(){return this.useSoftware},e.flush=function(){var t=this.currentResult,e=this.remainderData;if(!t||e)return this.reset(),null;var r,i,n,a=new Uint8Array(t);return this.reset(),this.removePKCS7Padding?(i=(r=a).byteLength,(n=i&&new DataView(r.buffer).getUint8(i-1))?rt(r,0,i-n):r):a},e.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},e.decrypt=function(t,e,r){var i=this;return this.useSoftware?new Promise((function(n,a){i.softwareDecrypt(new Uint8Array(t),e,r);var s=i.flush();s?n(s.buffer):a(new Error("[softwareDecrypt] Failed to decrypt data"))})):this.webCryptoDecrypt(new Uint8Array(t),e,r)},e.softwareDecrypt=function(t,e,r){var i=this.currentIV,n=this.currentResult,a=this.remainderData;this.logOnce("JS AES decrypt"),a&&(t=xt(a,t),this.remainderData=null);var s=this.getValidChunk(t);if(!s.length)return null;i&&(r=i);var o=this.softwareDecrypter;o||(o=this.softwareDecrypter=new Nr),o.expandKey(e);var l=n;return this.currentResult=o.decrypt(s.buffer,0,r),this.currentIV=rt(s,-16).buffer,l||null},e.webCryptoDecrypt=function(t,e,r){var i=this,n=this.subtle;return this.key===e&&this.fastAesKey||(this.key=e,this.fastAesKey=new Or(n,e)),this.fastAesKey.expandKey().then((function(e){return n?(i.logOnce("WebCrypto AES decrypt"),new Mr(n,new Uint8Array(r)).decrypt(t.buffer,e)):Promise.reject(new Error("web crypto not initialized"))})).catch((function(n){return w.warn("[decrypter]: WebCrypto Error, disable WebCrypto API, "+n.name+": "+n.message),i.onWebCryptoError(t,e,r)}))},e.onWebCryptoError=function(t,e,r){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(t,e,r);var i=this.flush();if(i)return i.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")},e.getValidChunk=function(t){var e=t,r=t.length-t.length%16;return r!==t.length&&(e=rt(t,0,r),this.remainderData=rt(t,r)),e},e.logOnce=function(t){this.logEnabled&&(w.log("[decrypter]: "+t),this.logEnabled=!1)},t}(),Br=function(t){for(var e="",r=t.length,i=0;i<r;i++)e+="["+t.start(i).toFixed(3)+"-"+t.end(i).toFixed(3)+"]";return e},Gr="STOPPED",Kr="IDLE",Hr="KEY_LOADING",Vr="FRAG_LOADING",Yr="FRAG_LOADING_WAITING_RETRY",Wr="WAITING_TRACK",jr="PARSING",qr="PARSED",Xr="ENDED",zr="ERROR",Qr="WAITING_INIT_PTS",$r="WAITING_LEVEL",Jr=function(t){function e(e,r,i,n,a){var s;return(s=t.call(this)||this).hls=void 0,s.fragPrevious=null,s.fragCurrent=null,s.fragmentTracker=void 0,s.transmuxer=null,s._state=Gr,s.playlistType=void 0,s.media=null,s.mediaBuffer=null,s.config=void 0,s.bitrateTest=!1,s.lastCurrentTime=0,s.nextLoadPosition=0,s.startPosition=0,s.startTimeOffset=null,s.loadedmetadata=!1,s.retryDate=0,s.levels=null,s.fragmentLoader=void 0,s.keyLoader=void 0,s.levelLastLoaded=null,s.startFragRequested=!1,s.decrypter=void 0,s.initPTS=[],s.onvseeking=null,s.onvended=null,s.logPrefix="",s.log=void 0,s.warn=void 0,s.playlistType=a,s.logPrefix=n,s.log=w.log.bind(w,n+":"),s.warn=w.warn.bind(w,n+":"),s.hls=e,s.fragmentLoader=new Sr(e.config),s.keyLoader=i,s.fragmentTracker=r,s.config=e.config,s.decrypter=new Ur(e.config),e.on(S.MANIFEST_LOADED,s.onManifestLoaded,function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(s)),s}l(e,t);var r=e.prototype;return r.doTick=function(){this.onTickEnd()},r.onTickEnd=function(){},r.startLoad=function(t){},r.stopLoad=function(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);var t=this.fragCurrent;null!=t&&t.loader&&(t.abortRequests(),this.fragmentTracker.removeFragment(t)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=Gr},r._streamEnded=function(t,e){if(e.live||t.nextStart||!t.end||!this.media)return!1;var r=e.partList;if(null!=r&&r.length){var i=r[r.length-1];return Ir.isBuffered(this.media,i.start+i.duration/2)}var n=e.fragments[e.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(n)},r.getLevelDetails=function(){var t;if(this.levels&&null!==this.levelLastLoaded)return null==(t=this.levels[this.levelLastLoaded])?void 0:t.details},r.onMediaAttached=function(t,e){var r=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),r.addEventListener("seeking",this.onvseeking),r.addEventListener("ended",this.onvended);var i=this.config;this.levels&&i.autoStartLoad&&this.state===Gr&&this.startLoad(i.startPosition)},r.onMediaDetaching=function(){var t=this.media;null!=t&&t.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),t&&this.onvseeking&&this.onvended&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},r.onMediaSeeking=function(){var t=this.config,e=this.fragCurrent,r=this.media,i=this.mediaBuffer,n=this.state,a=r?r.currentTime:0,s=Ir.bufferInfo(i||r,a,t.maxBufferHole);if(this.log("media seeking to "+(E(a)?a.toFixed(3):a)+", state: "+n),this.state===Xr)this.resetLoadingState();else if(e){var o=t.maxFragLookUpTolerance,l=e.start-o,u=e.start+e.duration+o;if(!s.len||u<s.start||l>s.end){var h=a>u;(a<l||h)&&(h&&e.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),e.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}r&&(this.fragmentTracker.removeFragmentsInRange(a,1/0,this.playlistType,!0),this.lastCurrentTime=a),this.loadedmetadata||s.len||(this.nextLoadPosition=this.startPosition=a),this.tickImmediate()},r.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},r.onManifestLoaded=function(t,e){this.startTimeOffset=e.startTimeOffset,this.initPTS=[]},r.onHandlerDestroying=function(){this.stopLoad(),t.prototype.onHandlerDestroying.call(this)},r.onHandlerDestroyed=function(){this.state=Gr,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,t.prototype.onHandlerDestroyed.call(this)},r.loadFragment=function(t,e,r){this._loadFragForPlayback(t,e,r)},r._loadFragForPlayback=function(t,e,r){var i=this;this._doFragLoad(t,e,r,(function(e){if(i.fragContextChanged(t))return i.warn("Fragment "+t.sn+(e.part?" p: "+e.part.index:"")+" of level "+t.level+" was dropped during download."),void i.fragmentTracker.removeFragment(t);t.stats.chunkCount++,i._handleFragmentLoadProgress(e)})).then((function(e){if(e){var r=i.state;i.fragContextChanged(t)?(r===Vr||!i.fragCurrent&&r===jr)&&(i.fragmentTracker.removeFragment(t),i.state=Kr):("payload"in e&&(i.log("Loaded fragment "+t.sn+" of level "+t.level),i.hls.trigger(S.FRAG_LOADED,e)),i._handleFragmentLoadComplete(e))}})).catch((function(e){i.state!==Gr&&i.state!==zr&&(i.warn(e),i.resetFragmentLoading(t))}))},r.clearTrackerIfNeeded=function(t){var e,r=this.fragmentTracker;if(r.getState(t)===gr){var i=t.type,n=this.getFwdBufferInfo(this.mediaBuffer,i),a=Math.max(t.duration,n?n.len:this.config.maxBufferLength);this.reduceMaxBufferLength(a)&&r.removeFragment(t)}else 0===(null==(e=this.mediaBuffer)?void 0:e.buffered.length)?r.removeAllFragments():r.hasParts(t.type)&&(r.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type}),r.getState(t)===vr&&r.removeFragment(t))},r.checkLiveUpdate=function(t){if(t.updated&&!t.live){var e=t.fragments[t.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type})}t.fragments[0]||(t.deltaUpdateFailed=!0)},r.flushMainBuffer=function(t,e,r){if(void 0===r&&(r=null),t-e){var i={startOffset:t,endOffset:e,type:r};this.hls.trigger(S.BUFFER_FLUSHING,i)}},r._loadInitSegment=function(t,e){var r=this;this._doFragLoad(t,e).then((function(e){if(!e||r.fragContextChanged(t)||!r.levels)throw new Error("init load aborted");return e})).then((function(e){var i=r.hls,n=e.payload,a=t.decryptdata;if(n&&n.byteLength>0&&a&&a.key&&a.iv&&"AES-128"===a.method){var s=self.performance.now();return r.decrypter.decrypt(new Uint8Array(n),a.key.buffer,a.iv.buffer).catch((function(e){throw i.trigger(S.ERROR,{type:L.MEDIA_ERROR,details:R.FRAG_DECRYPT_ERROR,fatal:!1,error:e,reason:e.message,frag:t}),e})).then((function(r){var n=self.performance.now();return i.trigger(S.FRAG_DECRYPTED,{frag:t,payload:r,stats:{tstart:s,tdecrypt:n}}),e.payload=r,e}))}return e})).then((function(i){var n=r.fragCurrent,a=r.hls;if(!r.levels)throw new Error("init load aborted, missing levels");var s=t.stats;r.state=Kr,e.fragmentError=0,t.data=new Uint8Array(i.payload),s.parsing.start=s.buffering.start=self.performance.now(),s.parsing.end=s.buffering.end=self.performance.now(),i.frag===n&&a.trigger(S.FRAG_BUFFERED,{stats:s,frag:n,part:null,id:t.type}),r.tick()})).catch((function(e){r.state!==Gr&&r.state!==zr&&(r.warn(e),r.resetFragmentLoading(t))}))},r.fragContextChanged=function(t){var e=this.fragCurrent;return!t||!e||t.level!==e.level||t.sn!==e.sn||t.urlId!==e.urlId},r.fragBufferedComplete=function(t,e){var r,i,n,a,s=this.mediaBuffer?this.mediaBuffer:this.media;this.log("Buffered "+t.type+" sn: "+t.sn+(e?" part: "+e.index:"")+" of "+(this.playlistType===ge?"level":"track")+" "+t.level+" (frag:["+(null!=(r=t.startPTS)?r:NaN).toFixed(3)+"-"+(null!=(i=t.endPTS)?i:NaN).toFixed(3)+"] > buffer:"+(s?Br(Ir.getBuffered(s)):"(detached)")+")"),this.state=Kr,s&&(!this.loadedmetadata&&t.type==ge&&s.buffered.length&&(null==(n=this.fragCurrent)?void 0:n.sn)===(null==(a=this.fragPrevious)?void 0:a.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())},r.seekToStartPos=function(){},r._handleFragmentLoadComplete=function(t){var e=this.transmuxer;if(e){var r=t.frag,i=t.part,n=t.partsLoaded,a=!n||0===n.length||n.some((function(t){return!t})),s=new wr(r.level,r.sn,r.stats.chunkCount+1,0,i?i.index:-1,!a);e.flush(s)}},r._handleFragmentLoadProgress=function(t){},r._doFragLoad=function(t,e,r,i){var n,a=this;void 0===r&&(r=null);var s=null==e?void 0:e.details;if(!this.levels||!s)throw new Error("frag load aborted, missing level"+(s?"":" detail")+"s");var o=null;if(!t.encrypted||null!=(n=t.decryptdata)&&n.key?!t.encrypted&&s.encryptedFragments.length&&this.keyLoader.loadClear(t,s.encryptedFragments):(this.log("Loading key for "+t.sn+" of ["+s.startSN+"-"+s.endSN+"], "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+t.level),this.state=Hr,this.fragCurrent=t,o=this.keyLoader.load(t).then((function(t){if(!a.fragContextChanged(t.frag))return a.hls.trigger(S.KEY_LOADED,t),a.state===Hr&&(a.state=Kr),t})),this.hls.trigger(S.KEY_LOADING,{frag:t}),null===this.fragCurrent&&(o=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))),r=Math.max(t.start,r||0),this.config.lowLatencyMode&&"initSegment"!==t.sn){var l=s.partList;if(l&&i){r>t.end&&s.fragmentHint&&(t=s.fragmentHint);var u=this.getNextPart(l,t,r);if(u>-1){var h,d=l[u];return this.log("Loading part sn: "+t.sn+" p: "+d.index+" cc: "+t.cc+" of playlist ["+s.startSN+"-"+s.endSN+"] parts [0-"+u+"-"+(l.length-1)+"] "+("[stream-controller]"===this.logPrefix?"level":"track")+": "+t.level+", target: "+parseFloat(r.toFixed(3))),this.nextLoadPosition=d.start+d.duration,this.state=Vr,h=o?o.then((function(r){return!r||a.fragContextChanged(r.frag)?null:a.doFragPartsLoad(t,d,e,i)})).catch((function(t){return a.handleFragLoadError(t)})):this.doFragPartsLoad(t,d,e,i).catch((function(t){return a.handleFragLoadError(t)})),this.hls.trigger(S.FRAG_LOADING,{frag:t,part:d,targetBufferTime:r}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):h}if(!t.url||this.loadedEndOfParts(l,r))return Promise.resolve(null)}}this.log("Loading fragment "+t.sn+" cc: "+t.cc+" "+(s?"of ["+s.startSN+"-"+s.endSN+"] ":"")+("[stream-controller]"===this.logPrefix?"level":"track")+": "+t.level+", target: "+parseFloat(r.toFixed(3))),E(t.sn)&&!this.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),this.state=Vr;var c,f=this.config.progressive;return c=f&&o?o.then((function(e){return!e||a.fragContextChanged(null==e?void 0:e.frag)?null:a.fragmentLoader.load(t,i)})).catch((function(t){return a.handleFragLoadError(t)})):Promise.all([this.fragmentLoader.load(t,f?i:void 0),o]).then((function(t){var e=t[0];return!f&&e&&i&&i(e),e})).catch((function(t){return a.handleFragLoadError(t)})),this.hls.trigger(S.FRAG_LOADING,{frag:t,targetBufferTime:r}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):c},r.doFragPartsLoad=function(t,e,r,i){var n=this;return new Promise((function(a,s){var o,l=[],u=null==(o=r.details)?void 0:o.partList;!function e(o){n.fragmentLoader.loadPart(t,o,i).then((function(i){l[o.index]=i;var s=i.part;n.hls.trigger(S.FRAG_LOADED,i);var h=Ve(r,t.sn,o.index+1)||Ye(u,t.sn,o.index+1);if(!h)return a({frag:t,part:s,partsLoaded:l});e(h)})).catch(s)}(e)}))},r.handleFragLoadError=function(t){if("data"in t){var e=t.data;t.data&&e.details===R.INTERNAL_ABORTED?this.handleFragLoadAborted(e.frag,e.part):this.hls.trigger(S.ERROR,e)}else this.hls.trigger(S.ERROR,{type:L.OTHER_ERROR,details:R.INTERNAL_EXCEPTION,err:t,error:t,fatal:!0});return null},r._handleTransmuxerFlush=function(t){var e=this.getCurrentContext(t);if(e&&this.state===jr){var r=e.frag,i=e.part,n=e.level,a=self.performance.now();r.stats.parsing.end=a,i&&(i.stats.parsing.end=a),this.updateLevelTiming(r,i,n,t.partial)}else this.fragCurrent||this.state===Gr||this.state===zr||(this.state=Kr)},r.getCurrentContext=function(t){var e=this.levels,r=this.fragCurrent,i=t.level,n=t.sn,a=t.part;if(null==e||!e[i])return this.warn("Levels object was unset while buffering fragment "+n+" of level "+i+". The current chunk will not be buffered."),null;var s=e[i],o=a>-1?Ve(s,n,a):null,l=o?o.fragment:function(t,e,r){if(null==t||!t.details)return null;var i=t.details,n=i.fragments[e-i.startSN];return n||((n=i.fragmentHint)&&n.sn===e?n:e<i.startSN&&r&&r.sn===e?r:null)}(s,n,r);return l?(r&&r!==l&&(l.stats=r.stats),{frag:l,part:o,level:s}):null},r.bufferFragmentData=function(t,e,r,i,n){var a;if(t&&this.state===jr){var s=t.data1,o=t.data2,l=s;if(s&&o&&(l=xt(s,o)),null!=(a=l)&&a.length){var u={type:t.type,frag:e,part:r,chunkMeta:i,parent:e.type,data:l};if(this.hls.trigger(S.BUFFER_APPENDING,u),t.dropped&&t.independent&&!r){if(n)return;this.flushBufferGap(e)}}}},r.flushBufferGap=function(t){var e=this.media;if(e)if(Ir.isBuffered(e,e.currentTime)){var r=e.currentTime,i=Ir.bufferInfo(e,r,0),n=t.duration,a=Math.min(2*this.config.maxFragLookUpTolerance,.25*n),s=Math.max(Math.min(t.start-a,i.end-a),r+a);t.start-s>a&&this.flushMainBuffer(s,t.start)}else this.flushMainBuffer(0,t.start)},r.getFwdBufferInfo=function(t,e){var r=this.getLoadPosition();return E(r)?this.getFwdBufferInfoAtPos(t,r,e):null},r.getFwdBufferInfoAtPos=function(t,e,r){var i=this.config.maxBufferHole,n=Ir.bufferInfo(t,e,i);if(0===n.len&&void 0!==n.nextStart){var a=this.fragmentTracker.getBufferedFrag(e,r);if(a&&n.nextStart<a.end)return Ir.bufferInfo(t,e,Math.max(n.nextStart,i))}return n},r.getMaxBufferLength=function(t){var e,r=this.config;return e=t?Math.max(8*r.maxBufferSize/t,r.maxBufferLength):r.maxBufferLength,Math.min(e,r.maxMaxBufferLength)},r.reduceMaxBufferLength=function(t){var e=this.config,r=t||e.maxBufferLength;return e.maxMaxBufferLength>=r&&(e.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+e.maxMaxBufferLength+"s"),!0)},r.getAppendedFrag=function(t,e){var r=this.fragmentTracker.getAppendedFrag(t,ge);return r&&"fragment"in r?r.fragment:r},r.getNextFragment=function(t,e){var r=e.fragments,i=r.length;if(!i)return null;var n,a=this.config,s=r[0].start;if(e.live){var o=a.initialLiveManifestSize;if(i<o)return this.warn("Not enough fragments to start playback (have: "+i+", need: "+o+")"),null;e.PTSKnown||this.startFragRequested||-1!==this.startPosition||(n=this.getInitialLiveFragment(e,r),this.startPosition=n?this.hls.liveSyncPosition||n.start:t)}else t<=s&&(n=r[0]);if(!n){var l=a.lowLatencyMode?e.partEnd:e.fragmentEnd;n=this.getFragmentAtPosition(t,l,e)}return this.mapToInitFragWhenRequired(n)},r.isLoopLoading=function(t,e){var r=this.fragmentTracker.getState(t);return(r===mr||r===vr&&!!t.gap)&&this.nextLoadPosition>e},r.getNextFragmentLoopLoading=function(t,e,r,i,n){var a=t.gap,s=this.getNextFragment(this.nextLoadPosition,e);if(null===s)return s;if(t=s,a&&t&&!t.gap&&r.nextStart){var o=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,r.nextStart,i);if(null!==o&&r.len+o.len>=n)return this.log('buffer full after gaps in "'+i+'" playlist starting at sn: '+t.sn),null}return t},r.mapToInitFragWhenRequired=function(t){return null==t||!t.initSegment||null!=t&&t.initSegment.data||this.bitrateTest?t:t.initSegment},r.getNextPart=function(t,e,r){for(var i=-1,n=!1,a=!0,s=0,o=t.length;s<o;s++){var l=t[s];if(a=a&&!l.independent,i>-1&&r<l.start)break;var u=l.loaded;u?i=-1:(n||l.independent||a)&&l.fragment===e&&(i=s),n=u}return i},r.loadedEndOfParts=function(t,e){var r=t[t.length-1];return r&&e>r.start&&r.loaded},r.getInitialLiveFragment=function(t,e){var r=this.fragPrevious,i=null;if(r){if(t.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+r.programDateTime),i=function(t,e,r){if(null===e||!Array.isArray(t)||!t.length||!E(e))return null;if(e<(t[0].programDateTime||0))return null;if(e>=(t[t.length-1].endProgramDateTime||0))return null;r=r||0;for(var i=0;i<t.length;++i){var n=t[i];if(Ze(e,r,n))return n}return null}(e,r.endProgramDateTime,this.config.maxFragLookUpTolerance)),!i){var n=r.sn+1;if(n>=t.startSN&&n<=t.endSN){var a=e[n-t.startSN];r.cc===a.cc&&(i=a,this.log("Live playlist, switching playlist, load frag with next SN: "+i.sn))}i||(i=function(t,e){return Qe(t,(function(t){return t.cc<e?1:t.cc>e?-1:0}))}(e,r.cc),i&&this.log("Live playlist, switching playlist, load frag with same CC: "+i.sn))}}else{var s=this.hls.liveSyncPosition;null!==s&&(i=this.getFragmentAtPosition(s,this.bitrateTest?t.fragmentEnd:t.edge,t))}return i},r.getFragmentAtPosition=function(t,e,r){var i,n=this.config,a=this.fragPrevious,s=r.fragments,o=r.endSN,l=r.fragmentHint,u=n.maxFragLookUpTolerance,h=r.partList,d=!!(n.lowLatencyMode&&null!=h&&h.length&&l);if(d&&l&&!this.bitrateTest&&(s=s.concat(l),o=l.sn),i=t<e?$e(a,s,t,t>e-u?0:u):s[s.length-1]){var c=i.sn-r.startSN,f=this.fragmentTracker.getState(i);if((f===mr||f===vr&&i.gap)&&(a=i),a&&i.sn===a.sn&&(!d||h[0].fragment.sn>i.sn)&&a&&i.level===a.level){var g=s[c+1];i=i.sn<o&&this.fragmentTracker.getState(g)!==mr?g:null}}return i},r.synchronizeToLiveEdge=function(t){var e=this.config,r=this.media;if(r){var i=this.hls.liveSyncPosition,n=r.currentTime,a=t.fragments[0].start,s=t.edge,o=n>=a-e.maxFragLookUpTolerance&&n<=s;if(null!==i&&r.duration>i&&(n<i||!o)){var l=void 0!==e.liveMaxLatencyDuration?e.liveMaxLatencyDuration:e.liveMaxLatencyDurationCount*t.targetduration;(!o&&r.readyState<4||n<s-l)&&(this.loadedmetadata||(this.nextLoadPosition=i),r.readyState&&(this.warn("Playback: "+n.toFixed(3)+" is located too far from the end of live sliding playlist: "+s+", reset currentTime to : "+i.toFixed(3)),r.currentTime=i))}}},r.alignPlaylists=function(t,e){var r=this.levels,i=this.levelLastLoaded,n=this.fragPrevious,a=null!==i?r[i]:null,s=t.fragments.length;if(!s)return this.warn("No fragments in live playlist"),0;var o=t.fragments[0].start,l=!e,u=t.alignedSliding&&E(o);if(l||!u&&!o){xr(n,a,t);var h=t.fragments[0].start;return this.log("Live playlist sliding: "+h.toFixed(2)+" start-sn: "+(e?e.startSN:"na")+"->"+t.startSN+" prev-sn: "+(n?n.sn:"na")+" fragments: "+s),h}return o},r.waitForCdnTuneIn=function(t){return t.live&&t.canBlockReload&&t.partTarget&&t.tuneInGoal>Math.max(t.partHoldBack,3*t.partTarget)},r.setStartPosition=function(t,e){var r=this.startPosition;if(r<e&&(r=-1),-1===r||-1===this.lastCurrentTime){var i=null!==this.startTimeOffset,n=i?this.startTimeOffset:t.startTimeOffset;null!==n&&E(n)?(r=e+n,n<0&&(r+=t.totalduration),r=Math.min(Math.max(e,r),e+t.totalduration),this.log("Start time offset "+n+" found in "+(i?"multivariant":"media")+" playlist, adjust startPosition to "+r),this.startPosition=r):t.live?r=this.hls.liveSyncPosition||e:this.startPosition=r=0,this.lastCurrentTime=r}this.nextLoadPosition=r},r.getLoadPosition=function(){var t=this.media,e=0;return this.loadedmetadata&&t?e=t.currentTime:this.nextLoadPosition&&(e=this.nextLoadPosition),e},r.handleFragLoadAborted=function(t,e){this.transmuxer&&"initSegment"!==t.sn&&t.stats.aborted&&(this.warn("Fragment "+t.sn+(e?" part "+e.index:"")+" of level "+t.level+" was aborted"),this.resetFragmentLoading(t))},r.resetFragmentLoading=function(t){this.fragCurrent&&(this.fragContextChanged(t)||this.state===Yr)||(this.state=Kr)},r.onFragmentOrKeyLoadError=function(t,e){if(e.chunkMeta&&!e.frag){var r=this.getCurrentContext(e.chunkMeta);r&&(e.frag=r.frag)}var i=e.frag;if(i&&i.type===t&&this.levels)if(this.fragContextChanged(i)){var n;this.warn("Frag load error must match current frag to retry "+i.url+" > "+(null==(n=this.fragCurrent)?void 0:n.url))}else{var a=e.details===R.FRAG_GAP;a&&this.fragmentTracker.fragBuffered(i,!0);var s=e.errorAction,o=s||{},l=o.action,u=o.retryCount,h=void 0===u?0:u,d=o.retryConfig;if(s&&l===nr&&d){var c;this.resetStartWhenNotLoaded(null!=(c=this.levelLastLoaded)?c:i.level);var f=qe(d,h);this.warn("Fragment "+i.sn+" of "+t+" "+i.level+" errored with "+e.details+", retrying loading "+(h+1)+"/"+d.maxNumRetry+" in "+f+"ms"),s.resolved=!0,this.retryDate=self.performance.now()+f,this.state=Yr}else d&&s?(this.resetFragmentErrors(t),h<d.maxNumRetry?a||(s.resolved=!0):w.warn(e.details+" reached or exceeded max retry ("+h+")")):(null==s?void 0:s.action)===ir?this.state=$r:this.state=zr;this.tickImmediate()}},r.reduceLengthAndFlushBuffer=function(t){if(this.state===jr||this.state===qr){var e=t.parent,r=this.getFwdBufferInfo(this.mediaBuffer,e),i=r&&r.len>.5;i&&this.reduceMaxBufferLength(r.len);var n=!i;return n&&this.warn("Buffer full error while media.currentTime is not buffered, flush "+e+" buffer"),t.frag&&(this.fragmentTracker.removeFragment(t.frag),this.nextLoadPosition=t.frag.start),this.resetLoadingState(),n}return!1},r.resetFragmentErrors=function(t){t===ve&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==Gr&&(this.state=Kr)},r.afterBufferFlushed=function(t,e,r){if(t){var i=Ir.getBuffered(t);this.fragmentTracker.detectEvictedFragments(e,i,r),this.state===Xr&&this.resetLoadingState()}},r.resetLoadingState=function(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=Kr},r.resetStartWhenNotLoaded=function(t){if(!this.loadedmetadata){this.startFragRequested=!1;var e=this.levels?this.levels[t].details:null;null!=e&&e.live?(this.startPosition=-1,this.setStartPosition(e,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}},r.resetWhenMissingContext=function(t){var e;this.warn("The loading context changed while buffering fragment "+t.sn+" of level "+t.level+". This chunk will not be buffered."),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(null!=(e=this.levelLastLoaded)?e:t.level),this.resetLoadingState()},r.removeUnbufferedFrags=function(t){void 0===t&&(t=0),this.fragmentTracker.removeFragmentsInRange(t,1/0,this.playlistType,!1,!0)},r.updateLevelTiming=function(t,e,r,i){var n,a=this,s=r.details;if(s){if(Object.keys(t.elementaryStreams).reduce((function(e,n){var o=t.elementaryStreams[n];if(o){var l=o.endPTS-o.startPTS;if(l<=0)return a.warn("Could not parse fragment "+t.sn+" "+n+" duration reliably ("+l+")"),e||!1;var u=i?0:Be(s,t,o.startPTS,o.endPTS,o.startDTS,o.endDTS);return a.hls.trigger(S.LEVEL_PTS_UPDATED,{details:s,level:r,drift:u,type:n,frag:t,start:o.startPTS,end:o.endPTS}),!0}return e}),!1))r.fragmentError=0;else if(null===(null==(n=this.transmuxer)?void 0:n.error)){var o=new Error("Found no media in fragment "+t.sn+" of level "+t.level+" resetting transmuxer to fallback to playlist timing");if(0===r.fragmentError&&(r.fragmentError++,t.gap=!0,this.fragmentTracker.removeFragment(t),this.fragmentTracker.fragBuffered(t,!0)),this.warn(o.message),this.hls.trigger(S.ERROR,{type:L.MEDIA_ERROR,details:R.FRAG_PARSING_ERROR,fatal:!1,error:o,frag:t,reason:"Found no media in msn "+t.sn+' of level "'+r.url+'"'}),!this.hls)return;this.resetTransmuxer()}this.state=qr,this.hls.trigger(S.FRAG_PARSED,{frag:t,part:e})}else this.warn("level.details undefined")},r.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},r.recoverWorkerError=function(t){var e,r,i;"demuxerWorker"===t.event&&(this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded(null!=(e=null!=(r=this.levelLastLoaded)?r:null==(i=this.fragCurrent)?void 0:i.level)?e:0),this.resetLoadingState())},a(e,[{key:"state",get:function(){return this._state},set:function(t){var e=this._state;e!==t&&(this._state=t,this.log(e+"->"+t))}}]),e}(br);function Zr(){return self.SourceBuffer||self.WebKitSourceBuffer}function ti(t,e){return void 0===t&&(t=""),void 0===e&&(e=9e4),{type:t,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}var ei=function(){function t(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}var e=t.prototype;return e.resetInitSegment=function(t,e,r,i){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},e.resetTimeStamp=function(t){this.initPTS=t,this.resetContiguity()},e.resetContiguity=function(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0},e.canParse=function(t,e){return!1},e.appendFrame=function(t,e,r){},e.demux=function(t,e){this.cachedData&&(t=xt(this.cachedData,t),this.cachedData=null);var r,i=st(t,0),n=i?i.length:0,a=this._audioTrack,s=this._id3Track,o=i?function(t){for(var e=dt(t),r=0;r<e.length;r++){var i=e[r];if(ut(i))return mt(i)}}(i):void 0,l=t.length;for((null===this.basePTS||0===this.frameIndex&&E(o))&&(this.basePTS=ri(o,e,this.initPTS),this.lastPTS=this.basePTS),null===this.lastPTS&&(this.lastPTS=this.basePTS),i&&i.length>0&&s.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:Ae,duration:Number.POSITIVE_INFINITY});n<l;){if(this.canParse(t,n)){var u=this.appendFrame(a,t,n);u?(this.frameIndex++,this.lastPTS=u.sample.pts,r=n+=u.length):n=l}else lt(t,n)?(i=st(t,n),s.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:Ae,duration:Number.POSITIVE_INFINITY}),r=n+=i.length):n++;if(n===l&&r!==l){var h=rt(t,r);this.cachedData?this.cachedData=xt(this.cachedData,h):this.cachedData=h}}return{audioTrack:a,videoTrack:ti(),id3Track:s,textTrack:ti()}},e.demuxSampleAes=function(t,e,r){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},e.flush=function(t){var e=this.cachedData;return e&&(this.cachedData=null,this.demux(e,0)),{audioTrack:this._audioTrack,videoTrack:ti(),id3Track:this._id3Track,textTrack:ti()}},e.destroy=function(){},t}(),ri=function(t,e,r){return E(t)?90*t:9e4*e+(r?9e4*r.baseTime/r.timescale:0)};function ii(t,e){return 255===t[e]&&240==(246&t[e+1])}function ni(t,e){return 1&t[e+1]?7:9}function ai(t,e){return(3&t[e+3])<<11|t[e+4]<<3|(224&t[e+5])>>>5}function si(t,e){return e+1<t.length&&ii(t,e)}function oi(t,e){if(si(t,e)){var r=ni(t,e);if(e+r>=t.length)return!1;var i=ai(t,e);if(i<=r)return!1;var n=e+i;return n===t.length||si(t,n)}return!1}function li(t,e,r,i,n){if(!t.samplerate){var a=function(t,e,r,i){var n,a,s,o,l=navigator.userAgent.toLowerCase(),u=i,h=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];n=1+((192&e[r+2])>>>6);var d=(60&e[r+2])>>>2;if(!(d>h.length-1))return s=(1&e[r+2])<<2,s|=(192&e[r+3])>>>6,w.log("manifest codec:"+i+", ADTS type:"+n+", samplingIndex:"+d),/firefox/i.test(l)?d>=6?(n=5,o=new Array(4),a=d-3):(n=2,o=new Array(2),a=d):-1!==l.indexOf("android")?(n=2,o=new Array(2),a=d):(n=5,o=new Array(4),i&&(-1!==i.indexOf("mp4a.40.29")||-1!==i.indexOf("mp4a.40.5"))||!i&&d>=6?a=d-3:((i&&-1!==i.indexOf("mp4a.40.2")&&(d>=6&&1===s||/vivaldi/i.test(l))||!i&&1===s)&&(n=2,o=new Array(2)),a=d)),o[0]=n<<3,o[0]|=(14&d)>>1,o[1]|=(1&d)<<7,o[1]|=s<<3,5===n&&(o[1]|=(14&a)>>1,o[2]=(1&a)<<7,o[2]|=8,o[3]=0),{config:o,samplerate:h[d],channelCount:s,codec:"mp4a.40."+n,manifestCodec:u};t.trigger(S.ERROR,{type:L.MEDIA_ERROR,details:R.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+d})}(e,r,i,n);if(!a)return;t.config=a.config,t.samplerate=a.samplerate,t.channelCount=a.channelCount,t.codec=a.codec,t.manifestCodec=a.manifestCodec,w.log("parsed codec:"+t.codec+", rate:"+a.samplerate+", channels:"+a.channelCount)}}function ui(t){return 9216e4/t}function hi(t,e,r,i,n){var a,s=i+n*ui(t.samplerate),o=function(t,e){var r=ni(t,e);if(e+r<=t.length){var i=ai(t,e)-r;if(i>0)return{headerLength:r,frameLength:i}}}(e,r);if(o){var l=o.frameLength,u=o.headerLength,h=u+l,d=Math.max(0,r+h-e.length);d?(a=new Uint8Array(h-u)).set(e.subarray(r+u,e.length),0):a=e.subarray(r+u,r+h);var c={unit:a,pts:s};return d||t.samples.push(c),{sample:c,length:h,missing:d}}var f=e.length-r;return(a=new Uint8Array(f)).set(e.subarray(r,e.length),0),{sample:{unit:a,pts:s},length:f,missing:-1}}var di=function(t){function e(e,r){var i;return(i=t.call(this)||this).observer=void 0,i.config=void 0,i.observer=e,i.config=r,i}l(e,t);var r=e.prototype;return r.resetInitSegment=function(e,r,i,n){t.prototype.resetInitSegment.call(this,e,r,i,n),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:r,duration:n,inputTimeScale:9e4,dropped:0}},e.probe=function(t){if(!t)return!1;for(var e=(st(t,0)||[]).length,r=t.length;e<r;e++)if(oi(t,e))return w.log("ADTS sync word found !"),!0;return!1},r.canParse=function(t,e){return function(t,e){return function(t,e){return e+5<t.length}(t,e)&&ii(t,e)&&ai(t,e)<=t.length-e}(t,e)},r.appendFrame=function(t,e,r){li(t,this.observer,e,r,t.manifestCodec);var i=hi(t,e,r,this.basePTS,this.frameIndex);if(i&&0===i.missing)return i},e}(ei),ci=/\/emsg[-/]ID3/i,fi=function(){function t(t,e){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=e}var e=t.prototype;return e.resetTimeStamp=function(){},e.resetInitSegment=function(t,e,r,i){var n=this.videoTrack=ti("video",1),a=this.audioTrack=ti("audio",1),s=this.txtTrack=ti("text",1);if(this.id3Track=ti("id3",1),this.timeOffset=0,null!=t&&t.byteLength){var o=Ct(t);if(o.video){var l=o.video,u=l.id,h=l.timescale,d=l.codec;n.id=u,n.timescale=s.timescale=h,n.codec=d}if(o.audio){var c=o.audio,f=c.id,g=c.timescale,v=c.codec;a.id=f,a.timescale=g,a.codec=v}s.id=Lt.text,n.sampleDuration=0,n.duration=a.duration=i}},e.resetContiguity=function(){this.remainderData=null},t.probe=function(t){return It(t=t.length>16384?t.subarray(0,16384):t,["moof"]).length>0},e.demux=function(t,e){this.timeOffset=e;var r=t,i=this.videoTrack,n=this.txtTrack;if(this.config.progressive){this.remainderData&&(r=xt(this.remainderData,t));var a=function(t){var e={valid:null,remainder:null},r=It(t,["moof"]);if(!r)return e;if(r.length<2)return e.remainder=t,e;var i=r[r.length-1];return e.valid=rt(t,0,i.byteOffset-8),e.remainder=rt(t,i.byteOffset-8),e}(r);this.remainderData=a.remainder,i.samples=a.valid||new Uint8Array}else i.samples=r;var s=this.extractID3Track(i,e);return n.samples=Ft(e,i),{videoTrack:i,audioTrack:this.audioTrack,id3Track:s,textTrack:this.txtTrack}},e.flush=function(){var t=this.timeOffset,e=this.videoTrack,r=this.txtTrack;e.samples=this.remainderData||new Uint8Array,this.remainderData=null;var i=this.extractID3Track(e,this.timeOffset);return r.samples=Ft(t,e),{videoTrack:e,audioTrack:ti(),id3Track:i,textTrack:ti()}},e.extractID3Track=function(t,e){var r=this.id3Track;if(t.samples.length){var i=It(t.samples,["emsg"]);i&&i.forEach((function(t){var i=function(t){var e=t[0],r="",i="",n=0,a=0,s=0,o=0,l=0,u=0;if(0===e){for(;"\0"!==Rt(t.subarray(u,u+1));)r+=Rt(t.subarray(u,u+1)),u+=1;for(r+=Rt(t.subarray(u,u+1)),u+=1;"\0"!==Rt(t.subarray(u,u+1));)i+=Rt(t.subarray(u,u+1)),u+=1;i+=Rt(t.subarray(u,u+1)),u+=1,n=kt(t,12),a=kt(t,16),o=kt(t,20),l=kt(t,24),u=28}else if(1===e){n=kt(t,u+=4);var h=kt(t,u+=4),d=kt(t,u+=4);for(u+=4,s=Math.pow(2,32)*h+d,Number.isSafeInteger(s)||(s=Number.MAX_SAFE_INTEGER,w.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),o=kt(t,u),l=kt(t,u+=4),u+=4;"\0"!==Rt(t.subarray(u,u+1));)r+=Rt(t.subarray(u,u+1)),u+=1;for(r+=Rt(t.subarray(u,u+1)),u+=1;"\0"!==Rt(t.subarray(u,u+1));)i+=Rt(t.subarray(u,u+1)),u+=1;i+=Rt(t.subarray(u,u+1)),u+=1}return{schemeIdUri:r,value:i,timeScale:n,presentationTime:s,presentationTimeDelta:a,eventDuration:o,id:l,payload:t.subarray(u,t.byteLength)}}(t);if(ci.test(i.schemeIdUri)){var n=E(i.presentationTime)?i.presentationTime/i.timeScale:e+i.presentationTimeDelta/i.timeScale,a=4294967295===i.eventDuration?Number.POSITIVE_INFINITY:i.eventDuration/i.timeScale;a<=.001&&(a=Number.POSITIVE_INFINITY);var s=i.payload;r.samples.push({data:s,len:s.byteLength,dts:n,pts:n,type:be,duration:a})}}))}return r},e.demuxSampleAes=function(t,e,r){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},e.destroy=function(){},t}(),gi=null,vi=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],mi=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],pi=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],yi=[0,1,1,4];function Ti(t,e,r,i,n){if(!(r+24>e.length)){var a=Ei(e,r);if(a&&r+a.frameLength<=e.length){var s=i+n*(9e4*a.samplesPerFrame/a.sampleRate),o={unit:e.subarray(r,r+a.frameLength),pts:s,dts:s};return t.config=[],t.channelCount=a.channelCount,t.samplerate=a.sampleRate,t.samples.push(o),{sample:o,length:a.frameLength,missing:0}}}}function Ei(t,e){var r=t[e+1]>>3&3,i=t[e+1]>>1&3,n=t[e+2]>>4&15,a=t[e+2]>>2&3;if(1!==r&&0!==n&&15!==n&&3!==a){var s=t[e+2]>>1&1,o=t[e+3]>>6,l=1e3*vi[14*(3===r?3-i:3===i?3:4)+n-1],u=mi[3*(3===r?0:2===r?1:2)+a],h=3===o?1:2,d=pi[r][i],c=yi[i],f=8*d*c,g=Math.floor(d*l/u+s)*c;if(null===gi){var v=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);gi=v?parseInt(v[1]):0}return!!gi&&gi<=87&&2===i&&l>=224e3&&0===o&&(t[e+3]=128|t[e+3]),{sampleRate:u,channelCount:h,frameLength:g,samplesPerFrame:f}}}function Si(t,e){return 255===t[e]&&224==(224&t[e+1])&&0!=(6&t[e+1])}function Li(t,e){return e+1<t.length&&Si(t,e)}function Ri(t,e){if(e+1<t.length&&Si(t,e)){var r=Ei(t,e),i=4;null!=r&&r.frameLength&&(i=r.frameLength);var n=e+i;return n===t.length||Li(t,n)}return!1}var Ai=function(){function t(t){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}var e=t.prototype;return e.loadWord=function(){var t=this.data,e=this.bytesAvailable,r=t.byteLength-e,i=new Uint8Array(4),n=Math.min(4,e);if(0===n)throw new Error("no bytes available");i.set(t.subarray(r,r+n)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=8*n,this.bytesAvailable-=n},e.skipBits=function(t){var e;t=Math.min(t,8*this.bytesAvailable+this.bitsAvailable),this.bitsAvailable>t?(this.word<<=t,this.bitsAvailable-=t):(t-=this.bitsAvailable,t-=(e=t>>3)<<3,this.bytesAvailable-=e,this.loadWord(),this.word<<=t,this.bitsAvailable-=t)},e.readBits=function(t){var e=Math.min(this.bitsAvailable,t),r=this.word>>>32-e;if(t>32&&w.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=e,this.bitsAvailable>0)this.word<<=e;else{if(!(this.bytesAvailable>0))throw new Error("no bits available");this.loadWord()}return(e=t-e)>0&&this.bitsAvailable?r<<e|this.readBits(e):r},e.skipLZ=function(){var t;for(t=0;t<this.bitsAvailable;++t)if(0!=(this.word&2147483648>>>t))return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()},e.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.skipEG=function(){this.skipBits(1+this.skipLZ())},e.readUEG=function(){var t=this.skipLZ();return this.readBits(t+1)-1},e.readEG=function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)},e.readBoolean=function(){return 1===this.readBits(1)},e.readUByte=function(){return this.readBits(8)},e.readUShort=function(){return this.readBits(16)},e.readUInt=function(){return this.readBits(32)},e.skipScalingList=function(t){for(var e=8,r=8,i=0;i<t;i++)0!==r&&(r=(e+this.readEG()+256)%256),e=0===r?e:r},e.readSPS=function(){var t,e,r,i=0,n=0,a=0,s=0,o=this.readUByte.bind(this),l=this.readBits.bind(this),u=this.readUEG.bind(this),h=this.readBoolean.bind(this),d=this.skipBits.bind(this),c=this.skipEG.bind(this),f=this.skipUEG.bind(this),g=this.skipScalingList.bind(this);o();var v=o();if(l(5),d(3),o(),f(),100===v||110===v||122===v||244===v||44===v||83===v||86===v||118===v||128===v){var m=u();if(3===m&&d(1),f(),f(),d(1),h())for(e=3!==m?8:12,r=0;r<e;r++)h()&&g(r<6?16:64)}f();var p=u();if(0===p)u();else if(1===p)for(d(1),c(),c(),t=u(),r=0;r<t;r++)c();f(),d(1);var y=u(),T=u(),E=l(1);0===E&&d(1),d(1),h()&&(i=u(),n=u(),a=u(),s=u());var S=[1,1];if(h()&&h())switch(o()){case 1:S=[1,1];break;case 2:S=[12,11];break;case 3:S=[10,11];break;case 4:S=[16,11];break;case 5:S=[40,33];break;case 6:S=[24,11];break;case 7:S=[20,11];break;case 8:S=[32,11];break;case 9:S=[80,33];break;case 10:S=[18,11];break;case 11:S=[15,11];break;case 12:S=[64,33];break;case 13:S=[160,99];break;case 14:S=[4,3];break;case 15:S=[3,2];break;case 16:S=[2,1];break;case 255:S=[o()<<8|o(),o()<<8|o()]}return{width:Math.ceil(16*(y+1)-2*i-2*n),height:(2-E)*(T+1)*16-(E?2:4)*(a+s),pixelRatio:S}},e.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},t}(),ki=function(){function t(t,e,r){this.keyData=void 0,this.decrypter=void 0,this.keyData=r,this.decrypter=new Ur(e,{removePKCS7Padding:!1})}var e=t.prototype;return e.decryptBuffer=function(t){return this.decrypter.decrypt(t,this.keyData.key.buffer,this.keyData.iv.buffer)},e.decryptAacSample=function(t,e,r){var i=this,n=t[e].unit;if(!(n.length<=16)){var a=n.subarray(16,n.length-n.length%16),s=a.buffer.slice(a.byteOffset,a.byteOffset+a.length);this.decryptBuffer(s).then((function(a){var s=new Uint8Array(a);n.set(s,16),i.decrypter.isSync()||i.decryptAacSamples(t,e+1,r)}))}},e.decryptAacSamples=function(t,e,r){for(;;e++){if(e>=t.length)return void r();if(!(t[e].unit.length<32||(this.decryptAacSample(t,e,r),this.decrypter.isSync())))return}},e.getAvcEncryptedData=function(t){for(var e=16*Math.floor((t.length-48)/160)+16,r=new Int8Array(e),i=0,n=32;n<t.length-16;n+=160,i+=16)r.set(t.subarray(n,n+16),i);return r},e.getAvcDecryptedUnit=function(t,e){for(var r=new Uint8Array(e),i=0,n=32;n<t.length-16;n+=160,i+=16)t.set(r.subarray(i,i+16),n);return t},e.decryptAvcSample=function(t,e,r,i,n){var a=this,s=Nt(n.data),o=this.getAvcEncryptedData(s);this.decryptBuffer(o.buffer).then((function(o){n.data=a.getAvcDecryptedUnit(s,o),a.decrypter.isSync()||a.decryptAvcSamples(t,e,r+1,i)}))},e.decryptAvcSamples=function(t,e,r,i){if(t instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;e++,r=0){if(e>=t.length)return void i();for(var n=t[e].units;!(r>=n.length);r++){var a=n[r];if(!(a.data.length<=48||1!==a.type&&5!==a.type||(this.decryptAvcSample(t,e,r,i,a),this.decrypter.isSync())))return}}},t}(),bi=188,Di=function(){function t(t,e,r){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=t,this.config=e,this.typeSupported=r}t.probe=function(e){var r=t.syncOffset(e);return r>0&&w.warn("MPEG2-TS detected but first sync word found @ offset "+r),-1!==r},t.syncOffset=function(t){for(var e=t.length,r=Math.min(940,t.length-bi)+1,i=0;i<r;){for(var n=!1,a=-1,s=0,o=i;o<e;o+=bi){if(71!==t[o]){if(s)return-1;break}if(s++,-1===a&&0!==(a=o)&&(r=Math.min(a+18612,t.length-bi)+1),n||(n=0===wi(t,o)),n&&s>1&&(0===a&&s>2||o+bi>r))return a}i++}return-1},t.createTrack=function(t,e){return{container:"video"===t||"audio"===t?"video/mp2t":void 0,type:t,id:Lt[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===t?e:void 0}};var e=t.prototype;return e.resetInitSegment=function(e,r,i,n){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=t.createTrack("video"),this._audioTrack=t.createTrack("audio",n),this._id3Track=t.createTrack("id3"),this._txtTrack=t.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.audioCodec=r,this.videoCodec=i,this._duration=n},e.resetTimeStamp=function(){},e.resetContiguity=function(){var t=this._audioTrack,e=this._avcTrack,r=this._id3Track;t&&(t.pesData=null),e&&(e.pesData=null),r&&(r.pesData=null),this.aacOverFlow=null,this.avcSample=null,this.remainderData=null},e.demux=function(e,r,i,n){var a;void 0===i&&(i=!1),void 0===n&&(n=!1),i||(this.sampleAes=null);var s=this._avcTrack,o=this._audioTrack,l=this._id3Track,u=this._txtTrack,h=s.pid,d=s.pesData,c=o.pid,f=l.pid,g=o.pesData,v=l.pesData,m=null,p=this.pmtParsed,y=this._pmtId,T=e.length;if(this.remainderData&&(T=(e=xt(this.remainderData,e)).length,this.remainderData=null),T<bi&&!n)return this.remainderData=e,{audioTrack:o,videoTrack:s,id3Track:l,textTrack:u};var E=Math.max(0,t.syncOffset(e));(T-=(T-E)%bi)<e.byteLength&&!n&&(this.remainderData=new Uint8Array(e.buffer,T,e.buffer.byteLength-T));for(var A=0,k=E;k<T;k+=bi)if(71===e[k]){var b=!!(64&e[k+1]),D=wi(e,k),I=void 0;if((48&e[k+3])>>4>1){if((I=k+5+e[k+4])===k+bi)continue}else I=k+4;switch(D){case h:b&&(d&&(a=Pi(d))&&this.parseAVCPES(s,u,a,!1),d={data:[],size:0}),d&&(d.data.push(e.subarray(I,k+bi)),d.size+=k+bi-I);break;case c:if(b){if(g&&(a=Pi(g)))switch(o.segmentCodec){case"aac":this.parseAACPES(o,a);break;case"mp3":this.parseMPEGPES(o,a)}g={data:[],size:0}}g&&(g.data.push(e.subarray(I,k+bi)),g.size+=k+bi-I);break;case f:b&&(v&&(a=Pi(v))&&this.parseID3PES(l,a),v={data:[],size:0}),v&&(v.data.push(e.subarray(I,k+bi)),v.size+=k+bi-I);break;case 0:b&&(I+=e[I]+1),y=this._pmtId=Ci(e,I);break;case y:b&&(I+=e[I]+1);var C=_i(e,I,this.typeSupported,i);(h=C.avc)>0&&(s.pid=h),(c=C.audio)>0&&(o.pid=c,o.segmentCodec=C.segmentCodec),(f=C.id3)>0&&(l.pid=f),null===m||p||(w.warn("MPEG-TS PMT found at "+k+" after unknown PID '"+m+"'. Backtracking to sync byte @"+E+" to parse all TS packets."),m=null,k=E-188),p=this.pmtParsed=!0;break;case 17:case 8191:break;default:m=D}}else A++;if(A>0){var _=new Error("Found "+A+" TS packet/s that do not start with 0x47");this.observer.emit(S.ERROR,S.ERROR,{type:L.MEDIA_ERROR,details:R.FRAG_PARSING_ERROR,fatal:!1,error:_,reason:_.message})}s.pesData=d,o.pesData=g,l.pesData=v;var P={audioTrack:o,videoTrack:s,id3Track:l,textTrack:u};return n&&this.extractRemainingSamples(P),P},e.flush=function(){var t,e=this.remainderData;return this.remainderData=null,t=e?this.demux(e,-1,!1,!0):{videoTrack:this._avcTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t},e.extractRemainingSamples=function(t){var e,r=t.audioTrack,i=t.videoTrack,n=t.id3Track,a=t.textTrack,s=i.pesData,o=r.pesData,l=n.pesData;if(s&&(e=Pi(s))?(this.parseAVCPES(i,a,e,!0),i.pesData=null):i.pesData=s,o&&(e=Pi(o))){switch(r.segmentCodec){case"aac":this.parseAACPES(r,e);break;case"mp3":this.parseMPEGPES(r,e)}r.pesData=null}else null!=o&&o.size&&w.log("last AAC PES packet truncated,might overlap between fragments"),r.pesData=o;l&&(e=Pi(l))?(this.parseID3PES(n,e),n.pesData=null):n.pesData=l},e.demuxSampleAes=function(t,e,r){var i=this.demux(t,r,!0,!this.config.progressive),n=this.sampleAes=new ki(this.observer,this.config,e);return this.decrypt(i,n)},e.decrypt=function(t,e){return new Promise((function(r){var i=t.audioTrack,n=t.videoTrack;i.samples&&"aac"===i.segmentCodec?e.decryptAacSamples(i.samples,0,(function(){n.samples?e.decryptAvcSamples(n.samples,0,0,(function(){r(t)})):r(t)})):n.samples&&e.decryptAvcSamples(n.samples,0,0,(function(){r(t)}))}))},e.destroy=function(){this._duration=0},e.parseAVCPES=function(t,e,r,i){var n,a=this,s=this.parseAVCNALu(t,r.data),o=this.avcSample,l=!1;r.data=null,o&&s.length&&!t.audFound&&(xi(o,t),o=this.avcSample=Ii(!1,r.pts,r.dts,"")),s.forEach((function(i){var s;switch(i.type){case 1:var u=!1;n=!0;var h,d=i.data;if(l&&d.length>4){var c=new Ai(d).readSliceType();2!==c&&4!==c&&7!==c&&9!==c||(u=!0)}u&&null!=(h=o)&&h.frame&&!o.key&&(xi(o,t),o=a.avcSample=null),o||(o=a.avcSample=Ii(!0,r.pts,r.dts,"")),o.frame=!0,o.key=u;break;case 5:n=!0,null!=(s=o)&&s.frame&&!o.key&&(xi(o,t),o=a.avcSample=null),o||(o=a.avcSample=Ii(!0,r.pts,r.dts,"")),o.key=!0,o.frame=!0;break;case 6:n=!0,Ot(i.data,1,r.pts,e.samples);break;case 7:if(n=!0,l=!0,!t.sps){var f=i.data,g=new Ai(f).readSPS();t.width=g.width,t.height=g.height,t.pixelRatio=g.pixelRatio,t.sps=[f],t.duration=a._duration;for(var v=f.subarray(1,4),m="avc1.",p=0;p<3;p++){var y=v[p].toString(16);y.length<2&&(y="0"+y),m+=y}t.codec=m}break;case 8:n=!0,t.pps||(t.pps=[i.data]);break;case 9:n=!1,t.audFound=!0,o&&xi(o,t),o=a.avcSample=Ii(!1,r.pts,r.dts,"");break;case 12:n=!0;break;default:n=!1,o&&(o.debug+="unknown NAL "+i.type+" ")}o&&n&&o.units.push(i)})),i&&o&&(xi(o,t),this.avcSample=null)},e.getLastNalUnit=function(t){var e,r,i=this.avcSample;if(i&&0!==i.units.length||(i=t[t.length-1]),null!=(e=i)&&e.units){var n=i.units;r=n[n.length-1]}return r},e.parseAVCNALu=function(t,e){var r,i,n=e.byteLength,a=t.naluState||0,s=a,o=[],l=0,u=-1,h=0;for(-1===a&&(u=0,h=31&e[0],a=0,l=1);l<n;)if(r=e[l++],a)if(1!==a)if(r)if(1===r){if(u>=0){var d={data:e.subarray(u,l-a-1),type:h};o.push(d)}else{var c=this.getLastNalUnit(t.samples);if(c&&(s&&l<=4-s&&c.state&&(c.data=c.data.subarray(0,c.data.byteLength-s)),(i=l-a-1)>0)){var f=new Uint8Array(c.data.byteLength+i);f.set(c.data,0),f.set(e.subarray(0,i),c.data.byteLength),c.data=f,c.state=0}}l<n?(u=l,h=31&e[l],a=0):a=-1}else a=0;else a=3;else a=r?0:2;else a=r?0:1;if(u>=0&&a>=0){var g={data:e.subarray(u,n),type:h,state:a};o.push(g)}if(0===o.length){var v=this.getLastNalUnit(t.samples);if(v){var m=new Uint8Array(v.data.byteLength+e.byteLength);m.set(v.data,0),m.set(e,v.data.byteLength),v.data=m}}return t.naluState=a,o},e.parseAACPES=function(t,e){var r,i,n,a=0,s=this.aacOverFlow,o=e.data;if(s){this.aacOverFlow=null;var l=s.missing,u=s.sample.unit.byteLength;if(-1===l){var h=new Uint8Array(u+o.byteLength);h.set(s.sample.unit,0),h.set(o,u),o=h}else{var d=u-l;s.sample.unit.set(o.subarray(0,l),d),t.samples.push(s.sample),a=s.missing}}for(r=a,i=o.length;r<i-1&&!si(o,r);r++);if(r!==a){var c,f=r<i-1;c=f?"AAC PES did not start with ADTS header,offset:"+r:"No ADTS header found in AAC PES";var g=new Error(c);if(w.warn("parsing error: "+c),this.observer.emit(S.ERROR,S.ERROR,{type:L.MEDIA_ERROR,details:R.FRAG_PARSING_ERROR,fatal:!1,levelRetry:f,error:g,reason:c}),!f)return}if(li(t,this.observer,o,r,this.audioCodec),void 0!==e.pts)n=e.pts;else{if(!s)return void w.warn("[tsdemuxer]: AAC PES unknown PTS");var v=ui(t.samplerate);n=s.sample.pts+v}for(var m,p=0;r<i;){if(r+=(m=hi(t,o,r,n,p)).length,m.missing){this.aacOverFlow=m;break}for(p++;r<i-1&&!si(o,r);r++);}},e.parseMPEGPES=function(t,e){var r=e.data,i=r.length,n=0,a=0,s=e.pts;if(void 0!==s)for(;a<i;)if(Li(r,a)){var o=Ti(t,r,a,s,n);if(!o)break;a+=o.length,n++}else a++;else w.warn("[tsdemuxer]: MPEG PES unknown PTS")},e.parseID3PES=function(t,e){if(void 0!==e.pts){var r=o({},e,{type:this._avcTrack?be:Ae,duration:Number.POSITIVE_INFINITY});t.samples.push(r)}else w.warn("[tsdemuxer]: ID3 PES unknown PTS")},t}();function Ii(t,e,r,i){return{key:t,frame:!1,pts:e,dts:r,units:[],debug:i,length:0}}function wi(t,e){return((31&t[e+1])<<8)+t[e+2]}function Ci(t,e){return(31&t[e+10])<<8|t[e+11]}function _i(t,e,r,i){var n={audio:-1,avc:-1,id3:-1,segmentCodec:"aac"},a=e+3+((15&t[e+1])<<8|t[e+2])-4;for(e+=12+((15&t[e+10])<<8|t[e+11]);e<a;){var s=wi(t,e);switch(t[e]){case 207:if(!i){w.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===n.audio&&(n.audio=s);break;case 21:-1===n.id3&&(n.id3=s);break;case 219:if(!i){w.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===n.avc&&(n.avc=s);break;case 3:case 4:!0!==r.mpeg&&!0!==r.mp3?w.log("MPEG audio found, not supported in this browser"):-1===n.audio&&(n.audio=s,n.segmentCodec="mp3");break;case 36:w.warn("Unsupported HEVC stream type found")}e+=5+((15&t[e+3])<<8|t[e+4])}return n}function Pi(t){var e,r,i,n,a,s=0,o=t.data;if(!t||0===t.size)return null;for(;o[0].length<19&&o.length>1;){var l=new Uint8Array(o[0].length+o[1].length);l.set(o[0]),l.set(o[1],o[0].length),o[0]=l,o.splice(1,1)}if(1===((e=o[0])[0]<<16)+(e[1]<<8)+e[2]){if((r=(e[4]<<8)+e[5])&&r>t.size-6)return null;var u=e[7];192&u&&(n=536870912*(14&e[9])+4194304*(255&e[10])+16384*(254&e[11])+128*(255&e[12])+(254&e[13])/2,64&u?n-(a=536870912*(14&e[14])+4194304*(255&e[15])+16384*(254&e[16])+128*(255&e[17])+(254&e[18])/2)>54e5&&(w.warn(Math.round((n-a)/9e4)+"s delta between PTS and DTS, align them"),n=a):a=n);var h=(i=e[8])+9;if(t.size<=h)return null;t.size-=h;for(var d=new Uint8Array(t.size),c=0,f=o.length;c<f;c++){var g=(e=o[c]).byteLength;if(h){if(h>g){h-=g;continue}e=e.subarray(h),g-=h,h=0}d.set(e,s),s+=g}return r&&(r-=i+3),{data:d,pts:n,dts:a,len:r}}return null}function xi(t,e){if(t.units.length&&t.frame){if(void 0===t.pts){var r=e.samples,i=r.length;if(!i)return void e.dropped++;var n=r[i-1];t.pts=n.pts,t.dts=n.dts}e.samples.push(t)}t.debug.length&&w.log(t.pts+"/"+t.dts+":"+t.debug)}var Fi=function(t){function e(){return t.apply(this,arguments)||this}l(e,t);var r=e.prototype;return r.resetInitSegment=function(e,r,i,n){t.prototype.resetInitSegment.call(this,e,r,i,n),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:r,duration:n,inputTimeScale:9e4,dropped:0}},e.probe=function(t){if(!t)return!1;for(var e=(st(t,0)||[]).length,r=t.length;e<r;e++)if(Ri(t,e))return w.log("MPEG Audio sync word found !"),!0;return!1},r.canParse=function(t,e){return function(t,e){return Si(t,e)&&4<=t.length-e}(t,e)},r.appendFrame=function(t,e,r){if(null!==this.basePTS)return Ti(t,e,r,this.basePTS,this.frameIndex)},e}(ei),Mi=function(){function t(){}return t.getSilentFrame=function(t,e){if("mp4a.40.2"===t){if(1===e)return new Uint8Array([0,200,0,128,35,128]);if(2===e)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===e)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}},t}(),Oi=Math.pow(2,32)-1,Ni=function(){function t(){}return t.init=function(){var e;for(e in t.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},t.types)t.types.hasOwnProperty(e)&&(t.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);t.HDLR_TYPES={video:r,audio:i};var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);t.STTS=t.STSC=t.STCO=a,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var s=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);t.FTYP=t.box(t.types.ftyp,s,l,s,o),t.DINF=t.box(t.types.dinf,t.box(t.types.dref,n))},t.box=function(t){for(var e=8,r=arguments.length,i=new Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];for(var a=i.length,s=a;a--;)e+=i[a].byteLength;var o=new Uint8Array(e);for(o[0]=e>>24&255,o[1]=e>>16&255,o[2]=e>>8&255,o[3]=255&e,o.set(t,4),a=0,e=8;a<s;a++)o.set(i[a],e),e+=i[a].byteLength;return o},t.hdlr=function(e){return t.box(t.types.hdlr,t.HDLR_TYPES[e])},t.mdat=function(e){return t.box(t.types.mdat,e)},t.mdhd=function(e,r){r*=e;var i=Math.floor(r/(Oi+1)),n=Math.floor(r%(Oi+1));return t.box(t.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,n>>24,n>>16&255,n>>8&255,255&n,85,196,0,0]))},t.mdia=function(e){return t.box(t.types.mdia,t.mdhd(e.timescale,e.duration),t.hdlr(e.type),t.minf(e))},t.mfhd=function(e){return t.box(t.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))},t.minf=function(e){return"audio"===e.type?t.box(t.types.minf,t.box(t.types.smhd,t.SMHD),t.DINF,t.stbl(e)):t.box(t.types.minf,t.box(t.types.vmhd,t.VMHD),t.DINF,t.stbl(e))},t.moof=function(e,r,i){return t.box(t.types.moof,t.mfhd(e),t.traf(i,r))},t.moov=function(e){for(var r=e.length,i=[];r--;)i[r]=t.trak(e[r]);return t.box.apply(null,[t.types.moov,t.mvhd(e[0].timescale,e[0].duration)].concat(i).concat(t.mvex(e)))},t.mvex=function(e){for(var r=e.length,i=[];r--;)i[r]=t.trex(e[r]);return t.box.apply(null,[t.types.mvex].concat(i))},t.mvhd=function(e,r){r*=e;var i=Math.floor(r/(Oi+1)),n=Math.floor(r%(Oi+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,n>>24,n>>16&255,n>>8&255,255&n,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t.box(t.types.mvhd,a)},t.sdtp=function(e){var r,i,n=e.samples||[],a=new Uint8Array(4+n.length);for(r=0;r<n.length;r++)i=n[r].flags,a[r+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return t.box(t.types.sdtp,a)},t.stbl=function(e){return t.box(t.types.stbl,t.stsd(e),t.box(t.types.stts,t.STTS),t.box(t.types.stsc,t.STSC),t.box(t.types.stsz,t.STSZ),t.box(t.types.stco,t.STCO))},t.avc1=function(e){var r,i,n,a=[],s=[];for(r=0;r<e.sps.length;r++)n=(i=e.sps[r]).byteLength,a.push(n>>>8&255),a.push(255&n),a=a.concat(Array.prototype.slice.call(i));for(r=0;r<e.pps.length;r++)n=(i=e.pps[r]).byteLength,s.push(n>>>8&255),s.push(255&n),s=s.concat(Array.prototype.slice.call(i));var o=t.box(t.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|e.sps.length].concat(a).concat([e.pps.length]).concat(s))),l=e.width,u=e.height,h=e.pixelRatio[0],d=e.pixelRatio[1];return t.box(t.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,t.box(t.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),t.box(t.types.pasp,new Uint8Array([h>>24,h>>16&255,h>>8&255,255&h,d>>24,d>>16&255,d>>8&255,255&d])))},t.esds=function(t){var e=t.config.length;return new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([e]).concat(t.config).concat([6,1,2]))},t.mp4a=function(e){var r=e.samplerate;return t.box(t.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),t.box(t.types.esds,t.esds(e)))},t.mp3=function(e){var r=e.samplerate;return t.box(t.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))},t.stsd=function(e){return"audio"===e.type?"mp3"===e.segmentCodec&&"mp3"===e.codec?t.box(t.types.stsd,t.STSD,t.mp3(e)):t.box(t.types.stsd,t.STSD,t.mp4a(e)):t.box(t.types.stsd,t.STSD,t.avc1(e))},t.tkhd=function(e){var r=e.id,i=e.duration*e.timescale,n=e.width,a=e.height,s=Math.floor(i/(Oi+1)),o=Math.floor(i%(Oi+1));return t.box(t.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,o>>24,o>>16&255,o>>8&255,255&o,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>8&255,255&n,0,0,a>>8&255,255&a,0,0]))},t.traf=function(e,r){var i=t.sdtp(e),n=e.id,a=Math.floor(r/(Oi+1)),s=Math.floor(r%(Oi+1));return t.box(t.types.traf,t.box(t.types.tfhd,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n])),t.box(t.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,s>>24,s>>16&255,s>>8&255,255&s])),t.trun(e,i.length+16+20+8+16+8+8),i)},t.trak=function(e){return e.duration=e.duration||4294967295,t.box(t.types.trak,t.tkhd(e),t.mdia(e))},t.trex=function(e){var r=e.id;return t.box(t.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},t.trun=function(e,r){var i,n,a,s,o,l,u=e.samples||[],h=u.length,d=12+16*h,c=new Uint8Array(d);for(r+=8+d,c.set(["video"===e.type?1:0,0,15,1,h>>>24&255,h>>>16&255,h>>>8&255,255&h,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),i=0;i<h;i++)a=(n=u[i]).duration,s=n.size,o=n.flags,l=n.cts,c.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,s>>>24&255,s>>>16&255,s>>>8&255,255&s,o.isLeading<<2|o.dependsOn,o.isDependedOn<<6|o.hasRedundancy<<4|o.paddingValue<<1|o.isNonSync,61440&o.degradPrio,15&o.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*i);return t.box(t.types.trun,c)},t.initSegment=function(e){t.types||t.init();var r=t.moov(e),i=new Uint8Array(t.FTYP.byteLength+r.byteLength);return i.set(t.FTYP),i.set(r,t.FTYP.byteLength),i},t}();function Ui(t,e,r,i){void 0===r&&(r=1),void 0===i&&(i=!1);var n=t*e*r;return i?Math.round(n):n}function Bi(t,e){return void 0===e&&(e=!1),Ui(t,1e3,1/9e4,e)}Ni.types=void 0,Ni.HDLR_TYPES=void 0,Ni.STTS=void 0,Ni.STSC=void 0,Ni.STCO=void 0,Ni.STSZ=void 0,Ni.VMHD=void 0,Ni.SMHD=void 0,Ni.STSD=void 0,Ni.FTYP=void 0,Ni.DINF=void 0;var Gi=null,Ki=null,Hi=function(){function t(t,e,r,i){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=t,this.config=e,this.typeSupported=r,this.ISGenerated=!1,null===Gi){var n=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Gi=n?parseInt(n[1]):0}if(null===Ki){var a=navigator.userAgent.match(/Safari\/(\d+)/i);Ki=a?parseInt(a[1]):0}}var e=t.prototype;return e.destroy=function(){},e.resetTimeStamp=function(t){w.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=t},e.resetNextTimestamp=function(){w.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},e.resetInitSegment=function(){w.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},e.getVideoStartPts=function(t){var e=!1,r=t.reduce((function(t,r){var i=r.pts-t;return i<-4294967296?(e=!0,Vi(t,r.pts)):i>0?t:r.pts}),t[0].pts);return e&&w.debug("PTS rollover detected"),r},e.remux=function(t,e,r,i,n,a,s,o){var l,u,h,d,c,f,g=n,v=n,m=t.pid>-1,p=e.pid>-1,y=e.samples.length,T=t.samples.length>0,E=s&&y>0||y>1;if((!m||T)&&(!p||E)||this.ISGenerated||s){this.ISGenerated||(h=this.generateIS(t,e,n,a));var S,L=this.isVideoContiguous,R=-1;if(E&&(R=function(t){for(var e=0;e<t.length;e++)if(t[e].key)return e;return-1}(e.samples),!L&&this.config.forceKeyFrameOnDiscontinuity))if(f=!0,R>0){w.warn("[mp4-remuxer]: Dropped "+R+" out of "+y+" video samples due to a missing keyframe");var A=this.getVideoStartPts(e.samples);e.samples=e.samples.slice(R),e.dropped+=R,S=v+=(e.samples[0].pts-A)/e.inputTimeScale}else-1===R&&(w.warn("[mp4-remuxer]: No keyframe found out of "+y+" video samples"),f=!1);if(this.ISGenerated){if(T&&E){var k=this.getVideoStartPts(e.samples),b=(Vi(t.samples[0].pts,k)-k)/e.inputTimeScale;g+=Math.max(0,b),v+=Math.max(0,-b)}if(T){if(t.samplerate||(w.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),h=this.generateIS(t,e,n,a)),u=this.remuxAudio(t,g,this.isAudioContiguous,a,p||E||o===ve?v:void 0),E){var D=u?u.endPTS-u.startPTS:0;e.inputTimeScale||(w.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),h=this.generateIS(t,e,n,a)),l=this.remuxVideo(e,v,L,D)}}else E&&(l=this.remuxVideo(e,v,L,0));l&&(l.firstKeyFrame=R,l.independent=-1!==R,l.firstKeyFramePTS=S)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(r.samples.length&&(c=Yi(r,n,this._initPTS,this._initDTS)),i.samples.length&&(d=Wi(i,n,this._initPTS))),{audio:u,video:l,initSegment:h,independent:f,text:d,id3:c}},e.generateIS=function(t,e,r,i){var n,a,s,o=t.samples,l=e.samples,u=this.typeSupported,h={},d=this._initPTS,c=!d||i,f="audio/mp4";if(c&&(n=a=1/0),t.config&&o.length&&(t.timescale=t.samplerate,"mp3"===t.segmentCodec&&(u.mpeg?(f="audio/mpeg",t.codec=""):u.mp3&&(t.codec="mp3")),h.audio={id:"audio",container:f,codec:t.codec,initSegment:"mp3"===t.segmentCodec&&u.mpeg?new Uint8Array(0):Ni.initSegment([t]),metadata:{channelCount:t.channelCount}},c&&(s=t.inputTimeScale,d&&s===d.timescale?c=!1:n=a=o[0].pts-Math.round(s*r))),e.sps&&e.pps&&l.length&&(e.timescale=e.inputTimeScale,h.video={id:"main",container:"video/mp4",codec:e.codec,initSegment:Ni.initSegment([e]),metadata:{width:e.width,height:e.height}},c))if(s=e.inputTimeScale,d&&s===d.timescale)c=!1;else{var g=this.getVideoStartPts(l),v=Math.round(s*r);a=Math.min(a,Vi(l[0].dts,g)-v),n=Math.min(n,g-v)}if(Object.keys(h).length)return this.ISGenerated=!0,c?(this._initPTS={baseTime:n,timescale:s},this._initDTS={baseTime:a,timescale:s}):n=s=void 0,{tracks:h,initPTS:n,timescale:s}},e.remuxVideo=function(t,e,r,i){var n,a,s=t.inputTimeScale,l=t.samples,u=[],h=l.length,d=this._initPTS,c=this.nextAvcDts,f=8,g=this.videoSampleDuration,v=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,p=!1;r&&null!==c||(c=e*s-(l[0].pts-Vi(l[0].dts,l[0].pts)));for(var y=d.baseTime*s/d.timescale,T=0;T<h;T++){var E=l[T];E.pts=Vi(E.pts-y,c),E.dts=Vi(E.dts-y,c),E.dts<l[T>0?T-1:T].dts&&(p=!0)}p&&l.sort((function(t,e){var r=t.dts-e.dts,i=t.pts-e.pts;return r||i})),n=l[0].dts;var A=(a=l[l.length-1].dts)-n,k=A?Math.round(A/(h-1)):g||t.inputTimeScale/30;if(r){var b=n-c,D=b>k,I=b<-1;if((D||I)&&(D?w.warn("AVC: "+Bi(b,!0)+" ms ("+b+"dts) hole between fragments detected, filling it"):w.warn("AVC: "+Bi(-b,!0)+" ms ("+b+"dts) overlapping between fragments detected"),!I||c>=l[0].pts)){n=c;var C=l[0].pts-b;l[0].dts=n,l[0].pts=C,w.log("Video: First PTS/DTS adjusted: "+Bi(C,!0)+"/"+Bi(n,!0)+", delta: "+Bi(b,!0)+" ms")}}n=Math.max(0,n);for(var _=0,P=0,x=0;x<h;x++){for(var F=l[x],M=F.units,O=M.length,N=0,U=0;U<O;U++)N+=M[U].data.length;P+=N,_+=O,F.length=N,F.dts=Math.max(F.dts,n),v=Math.min(F.pts,v),m=Math.max(F.pts,m)}a=l[h-1].dts;var B,G=P+4*_+8;try{B=new Uint8Array(G)}catch(t){return void this.observer.emit(S.ERROR,S.ERROR,{type:L.MUX_ERROR,details:R.REMUX_ALLOC_ERROR,fatal:!1,error:t,bytes:G,reason:"fail allocating video mdat "+G})}var K=new DataView(B.buffer);K.setUint32(0,G),B.set(Ni.types.mdat,4);for(var H=!1,V=Number.POSITIVE_INFINITY,Y=Number.POSITIVE_INFINITY,W=Number.NEGATIVE_INFINITY,j=Number.NEGATIVE_INFINITY,q=0;q<h;q++){for(var X=l[q],z=X.units,Q=0,$=0,J=z.length;$<J;$++){var Z=z[$],tt=Z.data,et=Z.data.byteLength;K.setUint32(f,et),f+=4,B.set(tt,f),f+=et,Q+=4+et}var rt=void 0;if(q<h-1)g=l[q+1].dts-X.dts,rt=l[q+1].pts-X.pts;else{var it=this.config,nt=q>0?X.dts-l[q-1].dts:k;if(rt=q>0?X.pts-l[q-1].pts:k,it.stretchShortVideoTrack&&null!==this.nextAudioPts){var at=Math.floor(it.maxBufferHole*s),st=(i?v+i*s:this.nextAudioPts)-X.pts;st>at?((g=st-nt)<0?g=nt:H=!0,w.log("[mp4-remuxer]: It is approximately "+st/90+" ms to the next segment; using duration "+g/90+" ms for the last video frame.")):g=nt}else g=nt}var ot=Math.round(X.pts-X.dts);V=Math.min(V,g),W=Math.max(W,g),Y=Math.min(Y,rt),j=Math.max(j,rt),u.push(new qi(X.key,g,Q,ot))}if(u.length)if(Gi){if(Gi<70){var lt=u[0].flags;lt.dependsOn=2,lt.isNonSync=0}}else if(Ki&&j-Y<W-V&&k/W<.025&&0===u[0].cts){w.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");for(var ut=n,ht=0,dt=u.length;ht<dt;ht++){var ct=ut+u[ht].duration,ft=ut+u[ht].cts;if(ht<dt-1){var gt=ct+u[ht+1].cts;u[ht].duration=gt-ft}else u[ht].duration=ht?u[ht-1].duration:k;u[ht].cts=0,ut=ct}}g=H||!g?k:g,this.nextAvcDts=c=a+g,this.videoSampleDuration=g,this.isVideoContiguous=!0;var vt={data1:Ni.moof(t.sequenceNumber++,n,o({},t,{samples:u})),data2:B,startPTS:v/s,endPTS:(m+g)/s,startDTS:n/s,endDTS:c/s,type:"video",hasAudio:!1,hasVideo:!0,nb:u.length,dropped:t.dropped};return t.samples=[],t.dropped=0,vt},e.remuxAudio=function(t,e,r,i,n){var a=t.inputTimeScale,s=a/(t.samplerate?t.samplerate:a),l="aac"===t.segmentCodec?1024:1152,u=l*s,h=this._initPTS,d="mp3"===t.segmentCodec&&this.typeSupported.mpeg,c=[],f=void 0!==n,g=t.samples,v=d?0:8,m=this.nextAudioPts||-1,p=e*a,y=h.baseTime*a/h.timescale;if(this.isAudioContiguous=r=r||g.length&&m>0&&(i&&Math.abs(p-m)<9e3||Math.abs(Vi(g[0].pts-y,p)-m)<20*u),g.forEach((function(t){t.pts=Vi(t.pts-y,p)})),!r||m<0){if(g=g.filter((function(t){return t.pts>=0})),!g.length)return;m=0===n?0:i&&!f?Math.max(0,p):g[0].pts}if("aac"===t.segmentCodec)for(var T=this.config.maxAudioFramesDrift,E=0,A=m;E<g.length;E++){var k=g[E],b=k.pts,D=b-A,I=Math.abs(1e3*D/a);if(D<=-T*u&&f)0===E&&(w.warn("Audio frame @ "+(b/a).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*D/a)+" ms."),this.nextAudioPts=m=A=b);else if(D>=T*u&&I<1e4&&f){var C=Math.round(D/u);(A=b-C*u)<0&&(C--,A+=u),0===E&&(this.nextAudioPts=m=A),w.warn("[mp4-remuxer]: Injecting "+C+" audio frame @ "+(A/a).toFixed(3)+"s due to "+Math.round(1e3*D/a)+" ms gap.");for(var _=0;_<C;_++){var P=Math.max(A,0),x=Mi.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);x||(w.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),x=k.unit.subarray()),g.splice(E,0,{unit:x,pts:P}),A+=u,E++}}k.pts=A,A+=u}for(var F,M=null,O=null,N=0,U=g.length;U--;)N+=g[U].unit.byteLength;for(var B=0,G=g.length;B<G;B++){var K=g[B],H=K.unit,V=K.pts;if(null!==O)c[B-1].duration=Math.round((V-O)/s);else{if(r&&"aac"===t.segmentCodec&&(V=m),M=V,!(N>0))return;N+=v;try{F=new Uint8Array(N)}catch(t){return void this.observer.emit(S.ERROR,S.ERROR,{type:L.MUX_ERROR,details:R.REMUX_ALLOC_ERROR,fatal:!1,error:t,bytes:N,reason:"fail allocating audio mdat "+N})}d||(new DataView(F.buffer).setUint32(0,N),F.set(Ni.types.mdat,4))}F.set(H,v);var Y=H.byteLength;v+=Y,c.push(new qi(!0,l,Y,0)),O=V}var W=c.length;if(W){var j=c[c.length-1];this.nextAudioPts=m=O+s*j.duration;var q=d?new Uint8Array(0):Ni.moof(t.sequenceNumber++,M/s,o({},t,{samples:c}));t.samples=[];var X=M/a,z=m/a,Q={data1:q,data2:F,startPTS:X,endPTS:z,startDTS:X,endDTS:z,type:"audio",hasAudio:!0,hasVideo:!1,nb:W};return this.isAudioContiguous=!0,Q}},e.remuxEmptyAudio=function(t,e,r,i){var n=t.inputTimeScale,a=n/(t.samplerate?t.samplerate:n),s=this.nextAudioPts,o=this._initDTS,l=9e4*o.baseTime/o.timescale,u=(null!==s?s:i.startDTS*n)+l,h=i.endDTS*n+l,d=1024*a,c=Math.ceil((h-u)/d),f=Mi.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);if(w.warn("[mp4-remuxer]: remux empty Audio"),f){for(var g=[],v=0;v<c;v++){var m=u+v*d;g.push({unit:f,pts:m,dts:m})}return t.samples=g,this.remuxAudio(t,e,r,!1)}w.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec")},t}();function Vi(t,e){var r;if(null===e)return t;for(r=e<t?-8589934592:8589934592;Math.abs(t-e)>4294967296;)t+=r;return t}function Yi(t,e,r,i){var n=t.samples.length;if(n){for(var a=t.inputTimeScale,s=0;s<n;s++){var o=t.samples[s];o.pts=Vi(o.pts-r.baseTime*a/r.timescale,e*a)/a,o.dts=Vi(o.dts-i.baseTime*a/i.timescale,e*a)/a}var l=t.samples;return t.samples=[],{samples:l}}}function Wi(t,e,r){var i=t.samples.length;if(i){for(var n=t.inputTimeScale,a=0;a<i;a++){var s=t.samples[a];s.pts=Vi(s.pts-r.baseTime*n/r.timescale,e*n)/n}t.samples.sort((function(t,e){return t.pts-e.pts}));var o=t.samples;return t.samples=[],{samples:o}}}var ji,qi=function(t,e,r,i){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=e,this.size=r,this.cts=i,this.flags=new Xi(t)},Xi=function(t){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=t?2:1,this.isNonSync=t?0:1},zi=function(){function t(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}var e=t.prototype;return e.destroy=function(){},e.resetTimeStamp=function(t){this.initPTS=t,this.lastEndTime=null},e.resetNextTimestamp=function(){this.lastEndTime=null},e.resetInitSegment=function(t,e,r,i){this.audioCodec=e,this.videoCodec=r,this.generateInitSegment(function(t,e){if(!t||!e)return t;var r=e.keyId;return r&&e.isCommonEncryption&&It(t,["moov","trak"]).forEach((function(t){var e=It(t,["mdia","minf","stbl","stsd"])[0].subarray(8),i=It(e,["enca"]),n=i.length>0;n||(i=It(e,["encv"])),i.forEach((function(t){It(n?t.subarray(28):t.subarray(78),["sinf"]).forEach((function(t){var e=_t(t);if(e){var i=e.subarray(8,24);i.some((function(t){return 0!==t}))||(w.log("[eme] Patching keyId in 'enc"+(n?"a":"v")+">sinf>>tenc' box: "+Tt(i)+" -> "+Tt(r)),e.set(r,8))}}))}))})),t}(t,i)),this.emitInitSegment=!0},e.generateInitSegment=function(t){var e=this.audioCodec,r=this.videoCodec;if(null==t||!t.byteLength)return this.initTracks=void 0,void(this.initData=void 0);var i=this.initData=Ct(t);e||(e=Qi(i.audio,O)),r||(r=Qi(i.video,N));var n={};i.audio&&i.video?n.audiovideo={container:"video/mp4",codec:e+","+r,initSegment:t,id:"main"}:i.audio?n.audio={container:"audio/mp4",codec:e,initSegment:t,id:"audio"}:i.video?n.video={container:"video/mp4",codec:r,initSegment:t,id:"main"}:w.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=n},e.remux=function(t,e,r,i,n,a){var s,o,l=this.initPTS,u=this.lastEndTime,h={audio:void 0,video:void 0,text:i,id3:r,initSegment:void 0};E(u)||(u=this.lastEndTime=n||0);var d=e.samples;if(null==d||!d.length)return h;var c={initPTS:void 0,timescale:1},f=this.initData;if(null!=(s=f)&&s.length||(this.generateInitSegment(d),f=this.initData),null==(o=f)||!o.length)return w.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),h;this.emitInitSegment&&(c.tracks=this.initTracks,this.emitInitSegment=!1);var g=function(t,e){for(var r=0,i=0,n=0,a=It(t,["moof","traf"]),s=0;s<a.length;s++){var o=a[s],l=It(o,["tfhd"])[0],u=e[kt(l,4)];if(u){var h=u.default,d=kt(l,0)|(null==h?void 0:h.flags),c=null==h?void 0:h.duration;8&d&&(c=kt(l,2&d?12:8));for(var f=u.timescale||9e4,g=It(o,["trun"]),v=0;v<g.length;v++)!(r=Pt(g[v]))&&c&&(r=c*kt(g[v],4)),u.type===N?i+=r/f:u.type===O&&(n+=r/f)}}if(0===i&&0===n){for(var m=0,p=It(t,["sidx"]),y=0;y<p.length;y++){var T=wt(p[y]);null!=T&&T.references&&(m+=T.references.reduce((function(t,e){return t+e.info.duration||0}),0))}return m}return i||n}(d,f),v=function(t,e){return It(e,["moof","traf"]).reduce((function(e,r){var i=It(r,["tfdt"])[0],n=i[0],a=It(r,["tfhd"]).reduce((function(e,r){var a=kt(r,4),s=t[a];if(s){var o=kt(i,4);if(1===n){if(o===Et)return w.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),e;o*=Et+1,o+=kt(i,8)}var l=o/(s.timescale||9e4);if(isFinite(l)&&(null===e||l<e))return l}return e}),null);return null!==a&&isFinite(a)&&(null===e||a<e)?a:e}),null)}(f,d),m=null===v?n:v;(function(t,e,r,i){if(null===t)return!0;var n=Math.max(i,1),a=e-t.baseTime/t.timescale;return Math.abs(a-r)>n}(l,m,n,g)||c.timescale!==l.timescale&&a)&&(c.initPTS=m-n,l&&1===l.timescale&&w.warn("Adjusting initPTS by "+(c.initPTS-l.baseTime)),this.initPTS=l={baseTime:c.initPTS,timescale:1});var p=t?m-l.baseTime/l.timescale:u,y=p+g;!function(t,e,r){It(e,["moof","traf"]).forEach((function(e){It(e,["tfhd"]).forEach((function(i){var n=kt(i,4),a=t[n];if(a){var s=a.timescale||9e4;It(e,["tfdt"]).forEach((function(t){var e=t[0],i=kt(t,4);if(0===e)i-=r*s,Dt(t,4,i=Math.max(i,0));else{i*=Math.pow(2,32),i+=kt(t,8),i-=r*s,i=Math.max(i,0);var n=Math.floor(i/(Et+1)),a=Math.floor(i%(Et+1));Dt(t,4,n),Dt(t,8,a)}}))}}))}))}(f,d,l.baseTime/l.timescale),g>0?this.lastEndTime=y:(w.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var T=!!f.audio,S=!!f.video,L="";T&&(L+="audio"),S&&(L+="video");var R={data1:d,startPTS:p,startDTS:p,endPTS:y,endDTS:y,type:L,hasAudio:T,hasVideo:S,nb:1,dropped:0};return h.audio="audio"===R.type?R:void 0,h.video="audio"!==R.type?R:void 0,h.initSegment=c,h.id3=Yi(r,n,l,l),i.samples.length&&(h.text=Wi(i,n,l)),h},t}();function Qi(t,e){var r=null==t?void 0:t.codec;return r&&r.length>4?r:"hvc1"===r||"hev1"===r?"hvc1.1.6.L120.90":"av01"===r?"av01.0.04M.08":"avc1"===r||e===N?"avc1.42e01e":"mp4a.40.5"}try{ji=self.performance.now.bind(self.performance)}catch(t){w.debug("Unable to use Performance API on this environment"),ji="undefined"!=typeof self&&self.Date.now}var $i=[{demux:fi,remux:zi},{demux:Di,remux:Hi},{demux:di,remux:Hi},{demux:Fi,remux:Hi}],Ji=function(){function t(t,e,r,i,n){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=t,this.typeSupported=e,this.config=r,this.vendor=i,this.id=n}var e=t.prototype;return e.configure=function(t){this.transmuxConfig=t,this.decrypter&&this.decrypter.reset()},e.push=function(t,e,r,i){var n=this,a=r.transmuxing;a.executeStart=ji();var s=new Uint8Array(t),o=this.currentTransmuxState,l=this.transmuxConfig;i&&(this.currentTransmuxState=i);var u=i||o,h=u.contiguous,d=u.discontinuity,c=u.trackSwitch,f=u.accurateTimeOffset,g=u.timeOffset,v=u.initSegmentChange,m=l.audioCodec,p=l.videoCodec,y=l.defaultInitPts,T=l.duration,E=l.initSegmentData,A=function(t,e){var r=null;return t.byteLength>0&&null!=e&&null!=e.key&&null!==e.iv&&null!=e.method&&(r=e),r}(s,e);if(A&&"AES-128"===A.method){var k=this.getDecrypter();if(!k.isSync())return this.decryptionPromise=k.webCryptoDecrypt(s,A.key.buffer,A.iv.buffer).then((function(t){var e=n.push(t,null,r);return n.decryptionPromise=null,e})),this.decryptionPromise;var b=k.softwareDecrypt(s,A.key.buffer,A.iv.buffer);if(r.part>-1&&(b=k.flush()),!b)return a.executeEnd=ji(),Zi(r);s=new Uint8Array(b)}var D=this.needsProbing(d,c);if(D){var I=this.configureTransmuxer(s);if(I)return w.warn("[transmuxer] "+I.message),this.observer.emit(S.ERROR,S.ERROR,{type:L.MEDIA_ERROR,details:R.FRAG_PARSING_ERROR,fatal:!1,error:I,reason:I.message}),a.executeEnd=ji(),Zi(r)}(d||c||v||D)&&this.resetInitSegment(E,m,p,T,e),(d||v||D)&&this.resetInitialTimestamp(y),h||this.resetContiguity();var C=this.transmux(s,A,g,f,r),_=this.currentTransmuxState;return _.contiguous=!0,_.discontinuity=!1,_.trackSwitch=!1,a.executeEnd=ji(),C},e.flush=function(t){var e=this,r=t.transmuxing;r.executeStart=ji();var i=this.decrypter,n=this.currentTransmuxState,a=this.decryptionPromise;if(a)return a.then((function(){return e.flush(t)}));var s=[],o=n.timeOffset;if(i){var l=i.flush();l&&s.push(this.push(l,null,t))}var u=this.demuxer,h=this.remuxer;if(!u||!h)return r.executeEnd=ji(),[Zi(t)];var d=u.flush(o);return tn(d)?d.then((function(r){return e.flushRemux(s,r,t),s})):(this.flushRemux(s,d,t),s)},e.flushRemux=function(t,e,r){var i=e.audioTrack,n=e.videoTrack,a=e.id3Track,s=e.textTrack,o=this.currentTransmuxState,l=o.accurateTimeOffset,u=o.timeOffset;w.log("[transmuxer.ts]: Flushed fragment "+r.sn+(r.part>-1?" p: "+r.part:"")+" of level "+r.level);var h=this.remuxer.remux(i,n,a,s,u,l,!0,this.id);t.push({remuxResult:h,chunkMeta:r}),r.transmuxing.executeEnd=ji()},e.resetInitialTimestamp=function(t){var e=this.demuxer,r=this.remuxer;e&&r&&(e.resetTimeStamp(t),r.resetTimeStamp(t))},e.resetContiguity=function(){var t=this.demuxer,e=this.remuxer;t&&e&&(t.resetContiguity(),e.resetNextTimestamp())},e.resetInitSegment=function(t,e,r,i,n){var a=this.demuxer,s=this.remuxer;a&&s&&(a.resetInitSegment(t,e,r,i),s.resetInitSegment(t,e,r,n))},e.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},e.transmux=function(t,e,r,i,n){return e&&"SAMPLE-AES"===e.method?this.transmuxSampleAes(t,e,r,i,n):this.transmuxUnencrypted(t,r,i,n)},e.transmuxUnencrypted=function(t,e,r,i){var n=this.demuxer.demux(t,e,!1,!this.config.progressive),a=n.audioTrack,s=n.videoTrack,o=n.id3Track,l=n.textTrack;return{remuxResult:this.remuxer.remux(a,s,o,l,e,r,!1,this.id),chunkMeta:i}},e.transmuxSampleAes=function(t,e,r,i,n){var a=this;return this.demuxer.demuxSampleAes(t,e,r).then((function(t){return{remuxResult:a.remuxer.remux(t.audioTrack,t.videoTrack,t.id3Track,t.textTrack,r,i,!1,a.id),chunkMeta:n}}))},e.configureTransmuxer=function(t){for(var e,r=this.config,i=this.observer,n=this.typeSupported,a=this.vendor,s=0,o=$i.length;s<o;s++)if($i[s].demux.probe(t)){e=$i[s];break}if(!e)return new Error("Failed to find demuxer by probing fragment data");var l=this.demuxer,u=this.remuxer,h=e.remux,d=e.demux;u&&u instanceof h||(this.remuxer=new h(i,r,n,a)),l&&l instanceof d||(this.demuxer=new d(i,r,n),this.probe=d.probe)},e.needsProbing=function(t,e){return!this.demuxer||!this.remuxer||t||e},e.getDecrypter=function(){var t=this.decrypter;return t||(t=this.decrypter=new Ur(this.config)),t},t}(),Zi=function(t){return{remuxResult:{},chunkMeta:t}};function tn(t){return"then"in t&&t.then instanceof Function}var en=function(t,e,r,i,n){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=t,this.videoCodec=e,this.initSegmentData=r,this.duration=i,this.defaultInitPts=n||null},rn=function(t,e,r,i,n,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=t,this.contiguous=e,this.accurateTimeOffset=r,this.trackSwitch=i,this.timeOffset=n,this.initSegmentChange=a},nn={exports:{}};!function(t){var e=Object.prototype.hasOwnProperty,r="~";function i(){}function n(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function a(t,e,i,a,s){if("function"!=typeof i)throw new TypeError("The listener must be a function");var o=new n(i,a||t,s),l=r?r+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],o]:t._events[l].push(o):(t._events[l]=o,t._eventsCount++),t}function s(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function o(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(r=!1)),o.prototype.eventNames=function(){var t,i,n=[];if(0===this._eventsCount)return n;for(i in t=this._events)e.call(t,i)&&n.push(r?i.slice(1):i);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},o.prototype.listeners=function(t){var e=r?r+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,a=i.length,s=new Array(a);n<a;n++)s[n]=i[n].fn;return s},o.prototype.listenerCount=function(t){var e=r?r+t:t,i=this._events[e];return i?i.fn?1:i.length:0},o.prototype.emit=function(t,e,i,n,a,s){var o=r?r+t:t;if(!this._events[o])return!1;var l,u,h=this._events[o],d=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),d){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,i),!0;case 4:return h.fn.call(h.context,e,i,n),!0;case 5:return h.fn.call(h.context,e,i,n,a),!0;case 6:return h.fn.call(h.context,e,i,n,a,s),!0}for(u=1,l=new Array(d-1);u<d;u++)l[u-1]=arguments[u];h.fn.apply(h.context,l)}else{var c,f=h.length;for(u=0;u<f;u++)switch(h[u].once&&this.removeListener(t,h[u].fn,void 0,!0),d){case 1:h[u].fn.call(h[u].context);break;case 2:h[u].fn.call(h[u].context,e);break;case 3:h[u].fn.call(h[u].context,e,i);break;case 4:h[u].fn.call(h[u].context,e,i,n);break;default:if(!l)for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];h[u].fn.apply(h[u].context,l)}}return!0},o.prototype.on=function(t,e,r){return a(this,t,e,r,!1)},o.prototype.once=function(t,e,r){return a(this,t,e,r,!0)},o.prototype.removeListener=function(t,e,i,n){var a=r?r+t:t;if(!this._events[a])return this;if(!e)return s(this,a),this;var o=this._events[a];if(o.fn)o.fn!==e||n&&!o.once||i&&o.context!==i||s(this,a);else{for(var l=0,u=[],h=o.length;l<h;l++)(o[l].fn!==e||n&&!o[l].once||i&&o[l].context!==i)&&u.push(o[l]);u.length?this._events[a]=1===u.length?u[0]:u:s(this,a)}return this},o.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&s(this,e)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,t.exports=o}(nn);var an=p(nn.exports);function sn(t,e){if(!((r=e.remuxResult).audio||r.video||r.text||r.id3||r.initSegment))return!1;var r,i=[],n=e.remuxResult,a=n.audio,s=n.video;return a&&on(i,a),s&&on(i,s),t.postMessage({event:"transmuxComplete",data:e},i),!0}function on(t,e){e.data1&&t.push(e.data1.buffer),e.data2&&t.push(e.data2.buffer)}function ln(t,e,r){e.reduce((function(e,r){return sn(t,r)||e}),!1)||t.postMessage({event:"transmuxComplete",data:e[0]}),t.postMessage({event:"flush",data:r})}void 0!==e&&e&&function(t){var e=new an,r=function(e,r){t.postMessage({event:e,data:r})};e.on(S.FRAG_DECRYPTED,r),e.on(S.ERROR,r);var i=function(){var t=function(t){var e=function(e){r("workerLog",{logType:t,message:e})};w[t]=e};for(var e in w)t(e)};t.addEventListener("message",(function(n){var a=n.data;switch(a.cmd){case"init":var s=JSON.parse(a.config);t.transmuxer=new Ji(e,a.typeSupported,s,a.vendor,a.id),I(s.debug,a.id),i(),r("init",null);break;case"configure":t.transmuxer.configure(a.config);break;case"demux":var o=t.transmuxer.push(a.data,a.decryptdata,a.chunkMeta,a.state);tn(o)?(t.transmuxer.async=!0,o.then((function(e){sn(t,e)})).catch((function(t){r(S.ERROR,{type:L.MEDIA_ERROR,details:R.FRAG_PARSING_ERROR,chunkMeta:a.chunkMeta,fatal:!1,error:t,err:t,reason:"transmuxer-worker push error"})}))):(t.transmuxer.async=!1,sn(t,o));break;case"flush":var l=a.chunkMeta,u=t.transmuxer.flush(l);tn(u)||t.transmuxer.async?(tn(u)||(u=Promise.resolve(u)),u.then((function(e){ln(t,e,l)})).catch((function(t){r(S.ERROR,{type:L.MEDIA_ERROR,details:R.FRAG_PARSING_ERROR,chunkMeta:a.chunkMeta,fatal:!1,error:t,err:t,reason:"transmuxer-worker flush error"})}))):ln(t,u,l)}}))}(self);var un=qt()||{isTypeSupported:function(){return!1}},hn=function(){function e(e,r,i,n){var a=this;this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;var s=e.config;this.hls=e,this.id=r,this.useWorker=!!s.enableWorker,this.onTransmuxComplete=i,this.onFlush=n;var o=function(t,e){(e=e||{}).frag=a.frag,e.id=a.id,t===S.ERROR&&(a.error=e.error),a.hls.trigger(t,e)};this.observer=new an,this.observer.on(S.FRAG_DECRYPTED,o),this.observer.on(S.ERROR,o);var l,u,h,d,c={mp4:un.isTypeSupported("video/mp4"),mpeg:un.isTypeSupported("audio/mpeg"),mp3:un.isTypeSupported('audio/mp4; codecs="mp3"')},f=navigator.vendor;if(!this.useWorker||"undefined"==typeof Worker||(s.workerPath,0))this.transmuxer=new Ji(this.observer,c,s,f,r);else try{s.workerPath?(w.log("loading Web Worker "+s.workerPath+' for "'+r+'"'),this.workerContext=(h=s.workerPath,d=new self.URL(h,self.location.href).href,{worker:new self.Worker(d),scriptURL:d})):(w.log('injecting Web Worker for "'+r+'"'),this.workerContext=(l=new self.Blob(["var exports={};var module={exports:exports};function define(f){f()};define.amd=true;("+t.toString()+")(true);"],{type:"text/javascript"}),u=self.URL.createObjectURL(l),{worker:new self.Worker(u),objectURL:u})),this.onwmsg=function(t){return a.onWorkerMessage(t)};var g=this.workerContext.worker;g.addEventListener("message",this.onwmsg),g.onerror=function(t){var e=new Error(t.message+"  ("+t.filename+":"+t.lineno+")");s.enableWorker=!1,w.warn('Error in "'+r+'" Web Worker, fallback to inline'),a.hls.trigger(S.ERROR,{type:L.OTHER_ERROR,details:R.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:e})},g.postMessage({cmd:"init",typeSupported:c,vendor:f,id:r,config:JSON.stringify(s)})}catch(t){w.warn('Error setting up "'+r+'" Web Worker, fallback to inline',t),this.resetWorker(),this.error=null,this.transmuxer=new Ji(this.observer,c,s,f,r)}}var r=e.prototype;return r.resetWorker=function(){if(this.workerContext){var t=this.workerContext,e=t.worker,r=t.objectURL;r&&self.URL.revokeObjectURL(r),e.removeEventListener("message",this.onwmsg),e.onerror=null,e.terminate(),this.workerContext=null}},r.destroy=function(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{var t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}var e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null},r.push=function(t,e,r,i,n,a,s,o,l,u){var h,d,c=this;l.transmuxing.start=self.performance.now();var f=this.transmuxer,g=a?a.start:n.start,v=n.decryptdata,m=this.frag,p=!(m&&n.cc===m.cc),y=!(m&&l.level===m.level),T=m?l.sn-m.sn:-1,E=this.part?l.part-this.part.index:-1,S=0===T&&l.id>1&&l.id===(null==m?void 0:m.stats.chunkCount),L=!y&&(1===T||0===T&&(1===E||S&&E<=0)),R=self.performance.now();(y||T||0===n.stats.parsing.start)&&(n.stats.parsing.start=R),!a||!E&&L||(a.stats.parsing.start=R);var A=!(m&&(null==(h=n.initSegment)?void 0:h.url)===(null==(d=m.initSegment)?void 0:d.url)),k=new rn(p,L,o,y,g,A);if(!L||p||A){w.log("[transmuxer-interface, "+n.type+"]: Starting new transmux session for sn: "+l.sn+" p: "+l.part+" level: "+l.level+" id: "+l.id+"\n        discontinuity: "+p+"\n        trackSwitch: "+y+"\n        contiguous: "+L+"\n        accurateTimeOffset: "+o+"\n        timeOffset: "+g+"\n        initSegmentChange: "+A);var b=new en(r,i,e,s,u);this.configureTransmuxer(b)}if(this.frag=n,this.part=a,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:t,decryptdata:v,chunkMeta:l,state:k},t instanceof ArrayBuffer?[t]:[]);else if(f){var D=f.push(t,v,l,k);tn(D)?(f.async=!0,D.then((function(t){c.handleTransmuxComplete(t)})).catch((function(t){c.transmuxerError(t,l,"transmuxer-interface push error")}))):(f.async=!1,this.handleTransmuxComplete(D))}},r.flush=function(t){var e=this;t.transmuxing.start=self.performance.now();var r=this.transmuxer;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:t});else if(r){var i=r.flush(t);tn(i)||r.async?(tn(i)||(i=Promise.resolve(i)),i.then((function(r){e.handleFlushResult(r,t)})).catch((function(r){e.transmuxerError(r,t,"transmuxer-interface flush error")}))):this.handleFlushResult(i,t)}},r.transmuxerError=function(t,e,r){this.hls&&(this.error=t,this.hls.trigger(S.ERROR,{type:L.MEDIA_ERROR,details:R.FRAG_PARSING_ERROR,chunkMeta:e,fatal:!1,error:t,err:t,reason:r}))},r.handleFlushResult=function(t,e){var r=this;t.forEach((function(t){r.handleTransmuxComplete(t)})),this.onFlush(e)},r.onWorkerMessage=function(t){var e=t.data,r=this.hls;switch(e.event){case"init":var i,n=null==(i=this.workerContext)?void 0:i.objectURL;n&&self.URL.revokeObjectURL(n);break;case"transmuxComplete":this.handleTransmuxComplete(e.data);break;case"flush":this.onFlush(e.data);break;case"workerLog":w[e.data.logType]&&w[e.data.logType](e.data.message);break;default:e.data=e.data||{},e.data.frag=this.frag,e.data.id=this.id,r.trigger(e.event,e.data)}},r.configureTransmuxer=function(t){var e=this.transmuxer;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:t}):e&&e.configure(t)},r.handleTransmuxComplete=function(t){t.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(t)},e}(),dn=function(){function t(t,e,r,i){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=t,this.media=e,this.fragmentTracker=r,this.hls=i}var e=t.prototype;return e.destroy=function(){this.media=null,this.hls=this.fragmentTracker=null},e.poll=function(t,e){var r=this.config,i=this.media,n=this.stalled;if(null!==i){var a=i.currentTime,s=i.seeking,o=this.seeking&&!s,l=!this.seeking&&s;if(this.seeking=s,a===t){if(l||o)this.stalled=null;else if(!(i.paused&&!s||i.ended||0===i.playbackRate)&&Ir.getBuffered(i).length){var u=Ir.bufferInfo(i,a,0),h=u.len>0,d=u.nextStart||0;if(h||d){if(s){var c=u.len>2,f=!d||e&&e.start<=a||d-a>2&&!this.fragmentTracker.getPartialFragment(a);if(c||f)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var g,v=Math.max(d,u.start||0)-a,m=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,p=(null==m||null==(g=m.details)?void 0:g.live)?2*m.details.targetduration:2,y=this.fragmentTracker.getPartialFragment(a);if(v>0&&(v<=p||y))return void this._trySkipBufferHole(y)}var T=self.performance.now();if(null!==n){var E=T-n;if(s||!(E>=250)||(this._reportStall(u),this.media)){var S=Ir.bufferInfo(i,a,r.maxBufferHole);this._tryFixBufferStall(S,E)}}else this.stalled=T}}}else if(this.moved=!0,null!==n){if(this.stallReported){var L=self.performance.now()-n;w.warn("playback not stuck anymore @"+a+", after "+Math.round(L)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}}},e._tryFixBufferStall=function(t,e){var r=this.config,i=this.fragmentTracker,n=this.media;if(null!==n){var a=n.currentTime,s=i.getPartialFragment(a);if(s&&(this._trySkipBufferHole(s)||!this.media))return;(t.len>r.maxBufferHole||t.nextStart&&t.nextStart-a<r.maxBufferHole)&&e>1e3*r.highBufferWatchdogPeriod&&(w.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}},e._reportStall=function(t){var e=this.hls,r=this.media;if(!this.stallReported&&r){this.stallReported=!0;var i=new Error("Playback stalling at @"+r.currentTime+" due to low buffer ("+JSON.stringify(t)+")");w.warn(i.message),e.trigger(S.ERROR,{type:L.MEDIA_ERROR,details:R.BUFFER_STALLED_ERROR,fatal:!1,error:i,buffer:t.len})}},e._trySkipBufferHole=function(t){var e=this.config,r=this.hls,i=this.media;if(null===i)return 0;var n=i.currentTime,a=Ir.bufferInfo(i,n,0),s=n<a.start?a.start:a.nextStart;if(s){var o=a.len<=e.maxBufferHole,l=a.len>0&&a.len<1&&i.readyState<3,u=s-n;if(u>0&&(o||l)){if(u>e.maxBufferHole){var h=this.fragmentTracker,d=!1;if(0===n){var c=h.getAppendedFrag(0,ge);c&&s<c.end&&(d=!0)}if(!d){var f=t||h.getAppendedFrag(n,ge);if(f){for(var g=!1,v=f.end;v<s;){var m=h.getPartialFragment(v);if(!m){g=!0;break}v+=m.duration}if(g)return 0}}}var p=Math.max(s+.05,n+.1);if(w.warn("skipping hole, adjusting currentTime from "+n+" to "+p),this.moved=!0,this.stalled=null,i.currentTime=p,t&&!t.gap){var y=new Error("fragment loaded with buffer holes, seeking from "+n+" to "+p);r.trigger(S.ERROR,{type:L.MEDIA_ERROR,details:R.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:y,reason:y.message,frag:t})}return p}}return 0},e._tryNudgeBuffer=function(){var t=this.config,e=this.hls,r=this.media,i=this.nudgeRetry;if(null!==r){var n=r.currentTime;if(this.nudgeRetry++,i<t.nudgeMaxRetry){var a=n+(i+1)*t.nudgeOffset,s=new Error("Nudging 'currentTime' from "+n+" to "+a);w.warn(s.message),r.currentTime=a,e.trigger(S.ERROR,{type:L.MEDIA_ERROR,details:R.BUFFER_NUDGE_ON_STALL,error:s,fatal:!1})}else{var o=new Error("Playhead still not moving while enough data buffered @"+n+" after "+t.nudgeMaxRetry+" nudges");w.error(o.message),e.trigger(S.ERROR,{type:L.MEDIA_ERROR,details:R.BUFFER_STALLED_ERROR,error:o,fatal:!0})}}},t}(),cn=function(t){function e(e,r,i){var n;return(n=t.call(this,e,r,i,"[stream-controller]",ge)||this).audioCodecSwap=!1,n.gapController=null,n.level=-1,n._forceStartLoad=!1,n.altAudio=!1,n.audioOnly=!1,n.fragPlaying=null,n.onvplaying=null,n.onvseeked=null,n.fragLastKbps=0,n.couldBacktrack=!1,n.backtrackFragment=null,n.audioCodecSwitch=!1,n.videoBuffer=null,n._registerListeners(),n}l(e,t);var r=e.prototype;return r._registerListeners=function(){var t=this.hls;t.on(S.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(S.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(S.MANIFEST_LOADING,this.onManifestLoading,this),t.on(S.MANIFEST_PARSED,this.onManifestParsed,this),t.on(S.LEVEL_LOADING,this.onLevelLoading,this),t.on(S.LEVEL_LOADED,this.onLevelLoaded,this),t.on(S.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.on(S.ERROR,this.onError,this),t.on(S.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(S.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.on(S.BUFFER_CREATED,this.onBufferCreated,this),t.on(S.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(S.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(S.FRAG_BUFFERED,this.onFragBuffered,this)},r._unregisterListeners=function(){var t=this.hls;t.off(S.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(S.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(S.MANIFEST_LOADING,this.onManifestLoading,this),t.off(S.MANIFEST_PARSED,this.onManifestParsed,this),t.off(S.LEVEL_LOADED,this.onLevelLoaded,this),t.off(S.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.off(S.ERROR,this.onError,this),t.off(S.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(S.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.off(S.BUFFER_CREATED,this.onBufferCreated,this),t.off(S.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(S.LEVELS_UPDATED,this.onLevelsUpdated,this),t.off(S.FRAG_BUFFERED,this.onFragBuffered,this)},r.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},r.startLoad=function(t){if(this.levels){var e=this.lastCurrentTime,r=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,!this.startFragRequested){var i=r.startLevel;-1===i&&(r.config.testBandwidth&&this.levels.length>1?(i=0,this.bitrateTest=!0):i=r.nextAutoLevel),this.level=r.nextLoadLevel=i,this.loadedmetadata=!1}e>0&&-1===t&&(this.log("Override startPosition with lastCurrentTime @"+e.toFixed(3)),t=e),this.state=Kr,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}else this._forceStartLoad=!0,this.state=Gr},r.stopLoad=function(){this._forceStartLoad=!1,t.prototype.stopLoad.call(this)},r.doTick=function(){switch(this.state){case $r:var t,e=this.levels,r=this.level,i=null==e||null==(t=e[r])?void 0:t.details;if(i&&(!i.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(i))break;this.state=Kr;break}if(this.hls.nextLoadLevel!==this.level){this.state=Kr;break}break;case Yr:var n,a=self.performance.now(),s=this.retryDate;(!s||a>=s||null!=(n=this.media)&&n.seeking)&&(this.resetStartWhenNotLoaded(this.level),this.state=Kr)}this.state===Kr&&this.doTickIdle(),this.onTickEnd()},r.onTickEnd=function(){t.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},r.doTickIdle=function(){var t=this.hls,e=this.levelLastLoaded,r=this.levels,i=this.media,n=t.config,a=t.nextLoadLevel;if(null!==e&&(i||!this.startFragRequested&&n.startFragPrefetch)&&(!this.altAudio||!this.audioOnly)&&null!=r&&r[a]){var s=r[a],o=this.getMainFwdBufferInfo();if(null!==o){var l=this.getLevelDetails();if(l&&this._streamEnded(o,l)){var u={};return this.altAudio&&(u.type="video"),this.hls.trigger(S.BUFFER_EOS,u),void(this.state=Xr)}t.loadLevel!==a&&-1===t.manualLevel&&this.log("Adapting to level "+a+" from level "+this.level),this.level=t.nextLoadLevel=a;var h=s.details;if(!h||this.state===$r||h.live&&this.levelLastLoaded!==a)return this.level=a,void(this.state=$r);var d=o.len,c=this.getMaxBufferLength(s.maxBitrate);if(!(d>=c)){this.backtrackFragment&&this.backtrackFragment.start>o.end&&(this.backtrackFragment=null);var f=this.backtrackFragment?this.backtrackFragment.start:o.end,g=this.getNextFragment(f,h);if(this.couldBacktrack&&!this.fragPrevious&&g&&"initSegment"!==g.sn&&this.fragmentTracker.getState(g)!==mr){var v,m=(null!=(v=this.backtrackFragment)?v:g).sn-h.startSN,p=h.fragments[m-1];p&&g.cc===p.cc&&(g=p,this.fragmentTracker.removeFragment(p))}else this.backtrackFragment&&o.len&&(this.backtrackFragment=null);if(g&&this.isLoopLoading(g,f)){if(!g.gap){var y=this.audioOnly&&!this.altAudio?O:N,T=(y===N?this.videoBuffer:this.mediaBuffer)||this.media;T&&this.afterBufferFlushed(T,y,ge)}g=this.getNextFragmentLoopLoading(g,h,o,ge,c)}g&&(!g.initSegment||g.initSegment.data||this.bitrateTest||(g=g.initSegment),this.loadFragment(g,s,f))}}}},r.loadFragment=function(e,r,i){var n=this.fragmentTracker.getState(e);this.fragCurrent=e,n===fr||n===vr?"initSegment"===e.sn?this._loadInitSegment(e,r):this.bitrateTest?(this.log("Fragment "+e.sn+" of level "+e.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(e,r)):(this.startFragRequested=!0,t.prototype.loadFragment.call(this,e,r,i)):this.clearTrackerIfNeeded(e)},r.getBufferedFrag=function(t){return this.fragmentTracker.getBufferedFrag(t,ge)},r.followingBufferedFrag=function(t){return t?this.getBufferedFrag(t.end+.5):null},r.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},r.nextLevelSwitch=function(){var t=this.levels,e=this.media;if(null!=e&&e.readyState){var r,i=this.getAppendedFrag(e.currentTime);i&&i.start>1&&this.flushMainBuffer(0,i.start-1);var n=this.getLevelDetails();if(null!=n&&n.live){var a=this.getMainFwdBufferInfo();if(!a||a.len<2*n.targetduration)return}if(!e.paused&&t){var s=t[this.hls.nextLoadLevel],o=this.fragLastKbps;r=o&&this.fragCurrent?this.fragCurrent.duration*s.maxBitrate/(1e3*o)+1:0}else r=0;var l=this.getBufferedFrag(e.currentTime+r);if(l){var u=this.followingBufferedFrag(l);if(u){this.abortCurrentFrag();var h=u.maxStartPTS?u.maxStartPTS:u.start,d=u.duration,c=Math.max(l.end,h+Math.min(Math.max(d-this.config.maxFragLookUpTolerance,.5*d),.75*d));this.flushMainBuffer(c,Number.POSITIVE_INFINITY)}}}},r.abortCurrentFrag=function(){var t=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,t&&(t.abortRequests(),this.fragmentTracker.removeFragment(t)),this.state){case Hr:case Vr:case Yr:case jr:case qr:this.state=Kr}this.nextLoadPosition=this.getLoadPosition()},r.flushMainBuffer=function(e,r){t.prototype.flushMainBuffer.call(this,e,r,this.altAudio?"video":null)},r.onMediaAttached=function(e,r){t.prototype.onMediaAttached.call(this,e,r);var i=r.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),i.addEventListener("playing",this.onvplaying),i.addEventListener("seeked",this.onvseeked),this.gapController=new dn(this.config,i,this.fragmentTracker,this.hls)},r.onMediaDetaching=function(){var e=this.media;e&&this.onvplaying&&this.onvseeked&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),t.prototype.onMediaDetaching.call(this)},r.onMediaPlaying=function(){this.tick()},r.onMediaSeeked=function(){var t=this.media,e=t?t.currentTime:null;E(e)&&this.log("Media seeked to "+e.toFixed(3));var r=this.getMainFwdBufferInfo();null!==r&&0!==r.len?this.tick():this.warn('Main forward buffer length on "seeked" event '+(r?r.len:"empty")+")")},r.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(S.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=0,this.levels=this.fragPlaying=this.backtrackFragment=null,this.altAudio=this.audioOnly=!1},r.onManifestParsed=function(t,e){var r,i,n,a=!1,s=!1;e.levels.forEach((function(t){(r=t.audioCodec)&&(-1!==r.indexOf("mp4a.40.2")&&(a=!0),-1!==r.indexOf("mp4a.40.5")&&(s=!0))})),this.audioCodecSwitch=a&&s&&!("function"==typeof(null==(n=Zr())||null==(i=n.prototype)?void 0:i.changeType)),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startFragRequested=!1},r.onLevelLoading=function(t,e){var r=this.levels;if(r&&this.state===Kr){var i=r[e.level];(!i.details||i.details.live&&this.levelLastLoaded!==e.level||this.waitForCdnTuneIn(i.details))&&(this.state=$r)}},r.onLevelLoaded=function(t,e){var r,i=this.levels,n=e.level,a=e.details,s=a.totalduration;if(i){this.log("Level "+n+" loaded ["+a.startSN+","+a.endSN+"]"+(a.lastPartSn?"[part-"+a.lastPartSn+"-"+a.lastPartIndex+"]":"")+", cc ["+a.startCC+", "+a.endCC+"] duration:"+s);var o=i[n],l=this.fragCurrent;!l||this.state!==Vr&&this.state!==Yr||l.level===e.level&&l.urlId===o.urlId||!l.loader||this.abortCurrentFrag();var u=0;if(a.live||null!=(r=o.details)&&r.live){if(this.checkLiveUpdate(a),a.deltaUpdateFailed)return;u=this.alignPlaylists(a,o.details)}if(o.details=a,this.levelLastLoaded=n,this.hls.trigger(S.LEVEL_UPDATED,{details:a,level:n}),this.state===$r){if(this.waitForCdnTuneIn(a))return;this.state=Kr}this.startFragRequested?a.live&&this.synchronizeToLiveEdge(a):this.setStartPosition(a,u),this.tick()}else this.warn("Levels were reset while loading level "+n)},r._handleFragmentLoadProgress=function(t){var e,r=t.frag,i=t.part,n=t.payload,a=this.levels;if(a){var s=a[r.level],o=s.details;if(!o)return this.warn("Dropping fragment "+r.sn+" of level "+r.level+" after level details were reset"),void this.fragmentTracker.removeFragment(r);var l=s.videoCodec,u=o.PTSKnown||!o.live,h=null==(e=r.initSegment)?void 0:e.data,d=this._getAudioCodec(s),c=this.transmuxer=this.transmuxer||new hn(this.hls,ge,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),f=i?i.index:-1,g=-1!==f,v=new wr(r.level,r.sn,r.stats.chunkCount,n.byteLength,f,g),m=this.initPTS[r.cc];c.push(n,h,d,l,r,i,o.totalduration,u,v,m)}else this.warn("Levels were reset while fragment load was in progress. Fragment "+r.sn+" of level "+r.level+" will not be buffered")},r.onAudioTrackSwitching=function(t,e){var r=this.altAudio;if(!e.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var i=this.fragCurrent;i&&(this.log("Switching to main audio track, cancel main fragment load"),i.abortRequests(),this.fragmentTracker.removeFragment(i)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();var n=this.hls;r&&(n.trigger(S.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),n.trigger(S.AUDIO_TRACK_SWITCHED,e)}},r.onAudioTrackSwitched=function(t,e){var r=e.id,i=!!this.hls.audioTracks[r].url;if(i){var n=this.videoBuffer;n&&this.mediaBuffer!==n&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=n)}this.altAudio=i,this.tick()},r.onBufferCreated=function(t,e){var r,i,n=e.tracks,a=!1;for(var s in n){var o=n[s];if("main"===o.id){if(i=s,r=o,"video"===s){var l=n[s];l&&(this.videoBuffer=l.buffer)}}else a=!0}a&&r?(this.log("Alternate track found, use "+i+".buffered to schedule main fragment loading"),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media},r.onFragBuffered=function(t,e){var r=e.frag,i=e.part;if(!r||r.type===ge){if(this.fragContextChanged(r))return this.warn("Fragment "+r.sn+(i?" p: "+i.index:"")+" of level "+r.level+" finished buffering, but was aborted. state: "+this.state),void(this.state===qr&&(this.state=Kr));var n=i?i.stats:r.stats;this.fragLastKbps=Math.round(8*n.total/(n.buffering.end-n.loading.first)),"initSegment"!==r.sn&&(this.fragPrevious=r),this.fragBufferedComplete(r,i)}},r.onError=function(t,e){var r;if(e.fatal)this.state=zr;else switch(e.details){case R.FRAG_GAP:case R.FRAG_PARSING_ERROR:case R.FRAG_DECRYPT_ERROR:case R.FRAG_LOAD_ERROR:case R.FRAG_LOAD_TIMEOUT:case R.KEY_LOAD_ERROR:case R.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(ge,e);break;case R.LEVEL_LOAD_ERROR:case R.LEVEL_LOAD_TIMEOUT:case R.LEVEL_PARSING_ERROR:e.levelRetry||this.state!==$r||(null==(r=e.context)?void 0:r.type)!==de||(this.state=Kr);break;case R.BUFFER_FULL_ERROR:if(!e.parent||"main"!==e.parent)return;this.reduceLengthAndFlushBuffer(e)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case R.INTERNAL_EXCEPTION:this.recoverWorkerError(e)}},r.checkBuffer=function(){var t=this.media,e=this.gapController;if(t&&e&&t.readyState){if(this.loadedmetadata||!Ir.getBuffered(t).length){var r=this.state!==Kr?this.fragCurrent:null;e.poll(this.lastCurrentTime,r)}this.lastCurrentTime=t.currentTime}},r.onFragLoadEmergencyAborted=function(){this.state=Kr,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},r.onBufferFlushed=function(t,e){var r=e.type;if(r!==O||this.audioOnly&&!this.altAudio){var i=(r===N?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(i,r,ge)}},r.onLevelsUpdated=function(t,e){this.levels=e.levels},r.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},r.seekToStartPos=function(){var t=this.media;if(t){var e=t.currentTime,r=this.startPosition;if(r>=0&&e<r){if(t.seeking)return void this.log("could not seek to "+r+", already seeking at "+e);var i=Ir.getBuffered(t),n=(i.length?i.start(0):0)-r;n>0&&(n<this.config.maxBufferHole||n<this.config.maxFragLookUpTolerance)&&(this.log("adjusting start position by "+n+" to match buffer start"),r+=n,this.startPosition=r),this.log("seek to target start position "+r+" from current time "+e),t.currentTime=r}}},r._getAudioCodec=function(t){var e=this.config.defaultAudioCodec||t.audioCodec;return this.audioCodecSwap&&e&&(this.log("Swapping audio codec"),e=-1!==e.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),e},r._loadBitrateTestFrag=function(t,e){var r=this;t.bitrateTest=!0,this._doFragLoad(t,e).then((function(i){var n=r.hls;if(i&&!r.fragContextChanged(t)){e.fragmentError=0,r.state=Kr,r.startFragRequested=!1,r.bitrateTest=!1;var a=t.stats;a.parsing.start=a.parsing.end=a.buffering.start=a.buffering.end=self.performance.now(),n.trigger(S.FRAG_LOADED,i),t.bitrateTest=!1}}))},r._handleTransmuxComplete=function(t){var e,r="main",i=this.hls,n=t.remuxResult,a=t.chunkMeta,s=this.getCurrentContext(a);if(s){var o=s.frag,l=s.part,u=s.level,h=n.video,d=n.text,c=n.id3,f=n.initSegment,g=u.details,v=this.altAudio?void 0:n.audio;if(this.fragContextChanged(o))this.fragmentTracker.removeFragment(o);else{if(this.state=jr,f){if(null!=f&&f.tracks){var m=o.initSegment||o;this._bufferInitSegment(u,f.tracks,m,a),i.trigger(S.FRAG_PARSING_INIT_SEGMENT,{frag:m,id:r,tracks:f.tracks})}var p=f.initPTS,y=f.timescale;E(p)&&(this.initPTS[o.cc]={baseTime:p,timescale:y},i.trigger(S.INIT_PTS_FOUND,{frag:o,id:r,initPTS:p,timescale:y}))}if(h&&g&&"initSegment"!==o.sn){var T=g.fragments[o.sn-1-g.startSN],L=o.sn===g.startSN,R=!T||o.cc>T.cc;if(!1!==n.independent){var A=h.startPTS,k=h.endPTS,b=h.startDTS,D=h.endDTS;if(l)l.elementaryStreams[h.type]={startPTS:A,endPTS:k,startDTS:b,endDTS:D};else if(h.firstKeyFrame&&h.independent&&1===a.id&&!R&&(this.couldBacktrack=!0),h.dropped&&h.independent){var I=this.getMainFwdBufferInfo(),w=(I?I.end:this.getLoadPosition())+this.config.maxBufferHole,C=h.firstKeyFramePTS?h.firstKeyFramePTS:A;if(!L&&w<C-this.config.maxBufferHole&&!R)return void this.backtrack(o);R&&(o.gap=!0),o.setElementaryStreamInfo(h.type,o.start,k,o.start,D,!0)}o.setElementaryStreamInfo(h.type,A,k,b,D),this.backtrackFragment&&(this.backtrackFragment=o),this.bufferFragmentData(h,o,l,a,L||R)}else{if(!L&&!R)return void this.backtrack(o);o.gap=!0}}if(v){var _=v.startPTS,P=v.endPTS,x=v.startDTS,F=v.endDTS;l&&(l.elementaryStreams[O]={startPTS:_,endPTS:P,startDTS:x,endDTS:F}),o.setElementaryStreamInfo(O,_,P,x,F),this.bufferFragmentData(v,o,l,a)}if(g&&null!=c&&null!=(e=c.samples)&&e.length){var M={id:r,frag:o,details:g,samples:c.samples};i.trigger(S.FRAG_PARSING_METADATA,M)}if(g&&d){var N={id:r,frag:o,details:g,samples:d.samples};i.trigger(S.FRAG_PARSING_USERDATA,N)}}}else this.resetWhenMissingContext(a)},r._bufferInitSegment=function(t,e,r,i){var n=this;if(this.state===jr){this.audioOnly=!!e.audio&&!e.video,this.altAudio&&!this.audioOnly&&delete e.audio;var a=e.audio,s=e.video,o=e.audiovideo;if(a){var l=t.audioCodec,u=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(l&&(l=-1!==l.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),1!==a.metadata.channelCount&&-1===u.indexOf("firefox")&&(l="mp4a.40.5")),-1!==u.indexOf("android")&&"audio/mpeg"!==a.container&&(l="mp4a.40.2",this.log("Android: force audio codec to "+l)),t.audioCodec&&t.audioCodec!==l&&this.log('Swapping manifest audio codec "'+t.audioCodec+'" for "'+l+'"'),a.levelCodec=l,a.id="main",this.log("Init audio buffer, container:"+a.container+", codecs[selected/level/parsed]=["+(l||"")+"/"+(t.audioCodec||"")+"/"+a.codec+"]")}s&&(s.levelCodec=t.videoCodec,s.id="main",this.log("Init video buffer, container:"+s.container+", codecs[level/parsed]=["+(t.videoCodec||"")+"/"+s.codec+"]")),o&&this.log("Init audiovideo buffer, container:"+o.container+", codecs[level/parsed]=["+(t.attrs.CODECS||"")+"/"+o.codec+"]"),this.hls.trigger(S.BUFFER_CODECS,e),Object.keys(e).forEach((function(t){var a=e[t].initSegment;null!=a&&a.byteLength&&n.hls.trigger(S.BUFFER_APPENDING,{type:t,data:a,frag:r,part:null,chunkMeta:i,parent:r.type})})),this.tick()}},r.getMainFwdBufferInfo=function(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,ge)},r.backtrack=function(t){this.couldBacktrack=!0,this.backtrackFragment=t,this.resetTransmuxer(),this.flushBufferGap(t),this.fragmentTracker.removeFragment(t),this.fragPrevious=null,this.nextLoadPosition=t.start,this.state=Kr},r.checkFragmentChanged=function(){var t=this.media,e=null;if(t&&t.readyState>1&&!1===t.seeking){var r=t.currentTime;if(Ir.isBuffered(t,r)?e=this.getAppendedFrag(r):Ir.isBuffered(t,r+.1)&&(e=this.getAppendedFrag(r+.1)),e){this.backtrackFragment=null;var i=this.fragPlaying,n=e.level;i&&e.sn===i.sn&&i.level===n&&e.urlId===i.urlId||(this.fragPlaying=e,this.hls.trigger(S.FRAG_CHANGED,{frag:e}),i&&i.level===n||this.hls.trigger(S.LEVEL_SWITCHED,{level:n}))}}},a(e,[{key:"nextLevel",get:function(){var t=this.nextBufferedFrag;return t?t.level:-1}},{key:"currentFrag",get:function(){var t=this.media;return t?this.fragPlaying||this.getAppendedFrag(t.currentTime):null}},{key:"currentProgramDateTime",get:function(){var t=this.media;if(t){var e=t.currentTime,r=this.currentFrag;if(r&&E(e)&&E(r.programDateTime)){var i=r.programDateTime+1e3*(e-r.start);return new Date(i)}}return null}},{key:"currentLevel",get:function(){var t=this.currentFrag;return t?t.level:-1}},{key:"nextBufferedFrag",get:function(){var t=this.currentFrag;return t?this.followingBufferedFrag(t):null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}]),e}(Jr),fn=function(){function t(t,e,r){void 0===e&&(e=0),void 0===r&&(r=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=t,this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=e,this.totalWeight_=r}var e=t.prototype;return e.sample=function(t,e){var r=Math.pow(this.alpha_,t);this.estimate_=e*(1-r)+r*this.estimate_,this.totalWeight_+=t},e.getTotalWeight=function(){return this.totalWeight_},e.getEstimate=function(){if(this.alpha_){var t=1-Math.pow(this.alpha_,this.totalWeight_);if(t)return this.estimate_/t}return this.estimate_},t}(),gn=function(){function t(t,e,r,i){void 0===i&&(i=100),this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new fn(t),this.fast_=new fn(e),this.defaultTTFB_=i,this.ttfb_=new fn(t)}var e=t.prototype;return e.update=function(t,e){var r=this.slow_,i=this.fast_,n=this.ttfb_;r.halfLife!==t&&(this.slow_=new fn(t,r.getEstimate(),r.getTotalWeight())),i.halfLife!==e&&(this.fast_=new fn(e,i.getEstimate(),i.getTotalWeight())),n.halfLife!==t&&(this.ttfb_=new fn(t,n.getEstimate(),n.getTotalWeight()))},e.sample=function(t,e){var r=(t=Math.max(t,this.minDelayMs_))/1e3,i=8*e/r;this.fast_.sample(r,i),this.slow_.sample(r,i)},e.sampleTTFB=function(t){var e=t/1e3,r=Math.sqrt(2)*Math.exp(-Math.pow(e,2)/2);this.ttfb_.sample(r,Math.max(t,5))},e.canEstimate=function(){return this.fast_.getTotalWeight()>=this.minWeight_},e.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},e.getEstimateTTFB=function(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_},e.destroy=function(){},t}(),vn=function(){function t(t){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=-1,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=t;var e=t.config;this.bwEstimator=new gn(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate),this.registerListeners()}var e=t.prototype;return e.registerListeners=function(){var t=this.hls;t.on(S.FRAG_LOADING,this.onFragLoading,this),t.on(S.FRAG_LOADED,this.onFragLoaded,this),t.on(S.FRAG_BUFFERED,this.onFragBuffered,this),t.on(S.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(S.LEVEL_LOADED,this.onLevelLoaded,this)},e.unregisterListeners=function(){var t=this.hls;t.off(S.FRAG_LOADING,this.onFragLoading,this),t.off(S.FRAG_LOADED,this.onFragLoaded,this),t.off(S.FRAG_BUFFERED,this.onFragBuffered,this),t.off(S.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(S.LEVEL_LOADED,this.onLevelLoaded,this)},e.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},e.onFragLoading=function(t,e){var r,i=e.frag;this.ignoreFragment(i)||(this.fragCurrent=i,this.partCurrent=null!=(r=e.part)?r:null,this.clearTimer(),this.timer=self.setInterval(this.onCheck,100))},e.onLevelSwitching=function(t,e){this.clearTimer()},e.getTimeToLoadFrag=function(t,e,r,i){return t+r/e+(i?this.lastLevelLoadSec:0)},e.onLevelLoaded=function(t,e){var r=this.hls.config,i=e.stats,n=i.total,a=i.bwEstimate;E(n)&&E(a)&&(this.lastLevelLoadSec=8*n/a),e.details.live?this.bwEstimator.update(r.abrEwmaSlowLive,r.abrEwmaFastLive):this.bwEstimator.update(r.abrEwmaSlowVoD,r.abrEwmaFastVoD)},e._abandonRulesCheck=function(){var t=this.fragCurrent,e=this.partCurrent,r=this.hls,i=r.autoLevelEnabled,n=r.media;if(t&&n){var a=performance.now(),s=e?e.stats:t.stats,o=e?e.duration:t.duration,l=a-s.loading.start;if(s.aborted||s.loaded&&s.loaded===s.total||0===t.level)return this.clearTimer(),void(this._nextAutoLevel=-1);if(i&&!n.paused&&n.playbackRate&&n.readyState){var u=r.mainForwardBufferInfo;if(null!==u){var h=this.bwEstimator.getEstimateTTFB(),d=Math.abs(n.playbackRate);if(!(l<=Math.max(h,o/(2*d)*1e3))){var c=u.len/d;if(!(c>=2*o/d)){var f=s.loading.first?s.loading.first-s.loading.start:-1,g=s.loaded&&f>-1,v=this.bwEstimator.getEstimate(),m=r.levels,p=r.minAutoLevel,y=m[t.level],T=s.total||Math.max(s.loaded,Math.round(o*y.maxBitrate/8)),L=l-f;L<1&&g&&(L=Math.min(l,8*s.loaded/v));var R=g?1e3*s.loaded/L:0,A=R?(T-s.loaded)/R:8*T/v+h/1e3;if(!(A<=c)){var k,b=R?8*R:v,D=Number.POSITIVE_INFINITY;for(k=t.level-1;k>p;k--){var I=m[k].maxBitrate;if((D=this.getTimeToLoadFrag(h/1e3,b,o*I,!m[k].details))<c)break}D>=A||D>10*o||(r.nextLoadLevel=k,g?this.bwEstimator.sample(l-Math.min(h,f),s.loaded):this.bwEstimator.sampleTTFB(l),this.clearTimer(),w.warn("[abr] Fragment "+t.sn+(e?" part "+e.index:"")+" of level "+t.level+" is loading too slowly;\n      Time to underbuffer: "+c.toFixed(3)+" s\n      Estimated load time for current fragment: "+A.toFixed(3)+" s\n      Estimated load time for down switch fragment: "+D.toFixed(3)+" s\n      TTFB estimate: "+f+"\n      Current BW estimate: "+(E(v)?(v/1024).toFixed(3):"Unknown")+" Kb/s\n      New BW estimate: "+(this.bwEstimator.getEstimate()/1024).toFixed(3)+" Kb/s\n      Aborting and switching to level "+k),t.loader&&(this.fragCurrent=this.partCurrent=null,t.abortRequests()),r.trigger(S.FRAG_LOAD_EMERGENCY_ABORTED,{frag:t,part:e,stats:s}))}}}}}}},e.onFragLoaded=function(t,e){var r=e.frag,i=e.part,n=i?i.stats:r.stats;if(r.type===ge&&this.bwEstimator.sampleTTFB(n.loading.first-n.loading.start),!this.ignoreFragment(r)){if(this.clearTimer(),this.lastLoadedFragLevel=r.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var a=i?i.duration:r.duration,s=this.hls.levels[r.level],o=(s.loaded?s.loaded.bytes:0)+n.loaded,l=(s.loaded?s.loaded.duration:0)+a;s.loaded={bytes:o,duration:l},s.realBitrate=Math.round(8*o/l)}if(r.bitrateTest){var u={stats:n,frag:r,part:i,id:r.type};this.onFragBuffered(S.FRAG_BUFFERED,u),r.bitrateTest=!1}}},e.onFragBuffered=function(t,e){var r=e.frag,i=e.part,n=null!=i&&i.stats.loaded?i.stats:r.stats;if(!n.aborted&&!this.ignoreFragment(r)){var a=n.parsing.end-n.loading.start-Math.min(n.loading.first-n.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(a,n.loaded),n.bwEstimate=this.bwEstimator.getEstimate(),r.bitrateTest?this.bitrateTestDelay=a/1e3:this.bitrateTestDelay=0}},e.ignoreFragment=function(t){return t.type!==ge||"initSegment"===t.sn},e.clearTimer=function(){self.clearInterval(this.timer)},e.getNextABRAutoLevel=function(){var t=this.fragCurrent,e=this.partCurrent,r=this.hls,i=r.maxAutoLevel,n=r.config,a=r.minAutoLevel,s=r.media,o=e?e.duration:t?t.duration:0,l=s&&0!==s.playbackRate?Math.abs(s.playbackRate):1,u=this.bwEstimator?this.bwEstimator.getEstimate():n.abrEwmaDefaultEstimate,h=r.mainForwardBufferInfo,d=(h?h.len:0)/l,c=this.findBestLevel(u,a,i,d,n.abrBandWidthFactor,n.abrBandWidthUpFactor);if(c>=0)return c;w.trace("[abr] "+(d?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var f=o?Math.min(o,n.maxStarvationDelay):n.maxStarvationDelay,g=n.abrBandWidthFactor,v=n.abrBandWidthUpFactor;if(!d){var m=this.bitrateTestDelay;m&&(f=(o?Math.min(o,n.maxLoadingDelay):n.maxLoadingDelay)-m,w.trace("[abr] bitrate test took "+Math.round(1e3*m)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*f)+" ms"),g=v=1)}return c=this.findBestLevel(u,a,i,d+f,g,v),Math.max(c,0)},e.findBestLevel=function(t,e,r,i,n,a){for(var s,o=this.fragCurrent,l=this.partCurrent,u=this.lastLoadedFragLevel,h=this.hls.levels,d=h[u],c=!(null==d||null==(s=d.details)||!s.live),f=null==d?void 0:d.codecSet,g=l?l.duration:o?o.duration:0,v=this.bwEstimator.getEstimateTTFB()/1e3,m=e,p=-1,y=r;y>=e;y--){var T=h[y];if(!T||f&&T.codecSet!==f)T&&(m=Math.min(y,m),p=Math.max(y,p));else{-1!==p&&w.trace("[abr] Skipped level(s) "+m+"-"+p+' with CODECS:"'+h[p].attrs.CODECS+'"; not compatible with "'+d.attrs.CODECS+'"');var S=T.details,L=(l?null==S?void 0:S.partTarget:null==S?void 0:S.averagetargetduration)||g,R=void 0;R=y<=u?n*t:a*t;var A=h[y].maxBitrate,k=this.getTimeToLoadFrag(v,R,A*L,void 0===S);if(w.trace("[abr] level:"+y+" adjustedbw-bitrate:"+Math.round(R-A)+" avgDuration:"+L.toFixed(1)+" maxFetchDuration:"+i.toFixed(1)+" fetchDuration:"+k.toFixed(1)),R>A&&(0===k||!E(k)||c&&!this.bitrateTestDelay||k<i))return y}}return-1},a(t,[{key:"nextAutoLevel",get:function(){var t=this._nextAutoLevel,e=this.bwEstimator;if(-1!==t&&!e.canEstimate())return t;var r=this.getNextABRAutoLevel();if(-1!==t){var i=this.hls.levels;if(i.length>Math.max(t,r)&&i[t].loadError<=i[r].loadError)return t}return-1!==t&&(r=Math.min(t,r)),r},set:function(t){this._nextAutoLevel=t}}]),t}(),mn=function(){function t(){this.chunks=[],this.dataLength=0}var e=t.prototype;return e.push=function(t){this.chunks.push(t),this.dataLength+=t.length},e.flush=function(){var t,e=this.chunks,r=this.dataLength;return e.length?(t=1===e.length?e[0]:function(t,e){for(var r=new Uint8Array(e),i=0,n=0;n<t.length;n++){var a=t[n];r.set(a,i),i+=a.length}return r}(e,r),this.reset(),t):new Uint8Array(0)},e.reset=function(){this.chunks.length=0,this.dataLength=0},t}(),pn=function(t){function e(e,r,i){var n;return(n=t.call(this,e,r,i,"[audio-stream-controller]",ve)||this).videoBuffer=null,n.videoTrackCC=-1,n.waitingVideoCC=-1,n.bufferedTrack=null,n.switchingTrack=null,n.trackId=-1,n.waitingData=null,n.mainDetails=null,n.bufferFlushed=!1,n.cachedTrackLoadedData=null,n._registerListeners(),n}l(e,t);var r=e.prototype;return r.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null},r._registerListeners=function(){var t=this.hls;t.on(S.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(S.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(S.MANIFEST_LOADING,this.onManifestLoading,this),t.on(S.LEVEL_LOADED,this.onLevelLoaded,this),t.on(S.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),t.on(S.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(S.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.on(S.ERROR,this.onError,this),t.on(S.BUFFER_RESET,this.onBufferReset,this),t.on(S.BUFFER_CREATED,this.onBufferCreated,this),t.on(S.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(S.INIT_PTS_FOUND,this.onInitPtsFound,this),t.on(S.FRAG_BUFFERED,this.onFragBuffered,this)},r._unregisterListeners=function(){var t=this.hls;t.off(S.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(S.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(S.MANIFEST_LOADING,this.onManifestLoading,this),t.off(S.LEVEL_LOADED,this.onLevelLoaded,this),t.off(S.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),t.off(S.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(S.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.off(S.ERROR,this.onError,this),t.off(S.BUFFER_RESET,this.onBufferReset,this),t.off(S.BUFFER_CREATED,this.onBufferCreated,this),t.off(S.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(S.INIT_PTS_FOUND,this.onInitPtsFound,this),t.off(S.FRAG_BUFFERED,this.onFragBuffered,this)},r.onInitPtsFound=function(t,e){var r=e.frag,i=e.id,n=e.initPTS,a=e.timescale;if("main"===i){var s=r.cc;this.initPTS[r.cc]={baseTime:n,timescale:a},this.log("InitPTS for cc: "+s+" found from main: "+n),this.videoTrackCC=s,this.state===Qr&&this.tick()}},r.startLoad=function(t){if(!this.levels)return this.startPosition=t,void(this.state=Gr);var e=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),e>0&&-1===t?(this.log("Override startPosition with lastCurrentTime @"+e.toFixed(3)),t=e,this.state=Kr):(this.loadedmetadata=!1,this.state=Wr),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()},r.doTick=function(){switch(this.state){case Kr:this.doTickIdle();break;case Wr:var e,r=this.levels,i=this.trackId,n=null==r||null==(e=r[i])?void 0:e.details;if(n){if(this.waitForCdnTuneIn(n))break;this.state=Qr}break;case Yr:var a,s=performance.now(),o=this.retryDate;(!o||s>=o||null!=(a=this.media)&&a.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.trackId),this.state=Kr);break;case Qr:var l=this.waitingData;if(l){var u=l.frag,h=l.part,d=l.cache,c=l.complete;if(void 0!==this.initPTS[u.cc]){this.waitingData=null,this.waitingVideoCC=-1,this.state=Vr;var f={frag:u,part:h,payload:d.flush(),networkDetails:null};this._handleFragmentLoadProgress(f),c&&t.prototype._handleFragmentLoadComplete.call(this,f)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log("Waiting fragment cc ("+u.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var g=this.getLoadPosition(),v=Ir.bufferInfo(this.mediaBuffer,g,this.config.maxBufferHole);Je(v.end,this.config.maxFragLookUpTolerance,u)<0&&(this.log("Waiting fragment cc ("+u.cc+") @ "+u.start+" cancelled because another fragment at "+v.end+" is needed"),this.clearWaitingFragment())}}else this.state=Kr}this.onTickEnd()},r.clearWaitingFragment=function(){var t=this.waitingData;t&&(this.fragmentTracker.removeFragment(t.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=Kr)},r.resetLoadingState=function(){this.clearWaitingFragment(),t.prototype.resetLoadingState.call(this)},r.onTickEnd=function(){var t=this.media;null!=t&&t.readyState&&(this.lastCurrentTime=t.currentTime)},r.doTickIdle=function(){var t=this.hls,e=this.levels,r=this.media,i=this.trackId,n=t.config;if(null!=e&&e[i]&&(r||!this.startFragRequested&&n.startFragPrefetch)){var a=e[i],s=a.details;if(!s||s.live&&this.levelLastLoaded!==i||this.waitForCdnTuneIn(s))this.state=Wr;else{var o=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&o&&(this.bufferFlushed=!1,this.afterBufferFlushed(o,O,ve));var l=this.getFwdBufferInfo(o,ve);if(null!==l){var u=this.bufferedTrack,h=this.switchingTrack;if(!h&&this._streamEnded(l,s))return t.trigger(S.BUFFER_EOS,{type:"audio"}),void(this.state=Xr);var d=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,ge),c=l.len,f=this.getMaxBufferLength(null==d?void 0:d.len);if(!(c>=f)||h){var g=s.fragments[0].start,v=l.end;if(h&&r){var m=this.getLoadPosition();u&&h.attrs!==u.attrs&&(v=m),s.PTSKnown&&m<g&&(l.end>g||l.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),r.currentTime=g+.05)}var p=this.getNextFragment(v,s),y=!1;if(p&&this.isLoopLoading(p,v)&&(y=!!p.gap,p=this.getNextFragmentLoopLoading(p,s,l,ge,f)),p){var T=d&&p.start>d.end+s.targetduration;if(T||(null==d||!d.len)&&l.len){var E=this.getAppendedFrag(p.start,ge);if(null===E)return;if(y||(y=!!E.gap||!!T&&0===d.len),T&&!y||y&&l.nextStart&&l.nextStart<E.end)return}this.loadFragment(p,a,v)}else this.bufferFlushed=!0}}}}},r.getMaxBufferLength=function(e){var r=t.prototype.getMaxBufferLength.call(this);return e?Math.min(Math.max(r,e),this.config.maxMaxBufferLength):r},r.onMediaDetaching=function(){this.videoBuffer=null,t.prototype.onMediaDetaching.call(this)},r.onAudioTracksUpdated=function(t,e){var r=e.audioTracks;this.resetTransmuxer(),this.levels=r.map((function(t){return new Ne(t)}))},r.onAudioTrackSwitching=function(t,e){var r=!!e.url;this.trackId=e.id;var i=this.fragCurrent;i&&(i.abortRequests(),this.removeUnbufferedFrags(i.start)),this.resetLoadingState(),r?this.setInterval(100):this.resetTransmuxer(),r?(this.switchingTrack=e,this.state=Kr):(this.switchingTrack=null,this.bufferedTrack=e,this.state=Gr),this.tick()},r.onManifestLoading=function(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1},r.onLevelLoaded=function(t,e){this.mainDetails=e.details,null!==this.cachedTrackLoadedData&&(this.hls.trigger(S.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)},r.onAudioTrackLoaded=function(t,e){var r;if(null!=this.mainDetails){var i=this.levels,n=e.details,a=e.id;if(i){this.log("Track "+a+" loaded ["+n.startSN+","+n.endSN+"]"+(n.lastPartSn?"[part-"+n.lastPartSn+"-"+n.lastPartIndex+"]":"")+",duration:"+n.totalduration);var s=i[a],o=0;if(n.live||null!=(r=s.details)&&r.live){this.checkLiveUpdate(n);var l=this.mainDetails;if(n.deltaUpdateFailed||!l)return;!s.details&&n.hasProgramDateTime&&l.hasProgramDateTime?(Fr(n,l),o=n.fragments[0].start):o=this.alignPlaylists(n,s.details)}s.details=n,this.levelLastLoaded=a,this.startFragRequested||!this.mainDetails&&n.live||this.setStartPosition(s.details,o),this.state!==Wr||this.waitForCdnTuneIn(n)||(this.state=Kr),this.tick()}else this.warn("Audio tracks were reset while loading level "+a)}else this.cachedTrackLoadedData=e},r._handleFragmentLoadProgress=function(t){var e,r=t.frag,i=t.part,n=t.payload,a=this.config,s=this.trackId,o=this.levels;if(o){var l=o[s];if(l){var u=l.details;if(!u)return this.warn("Audio track details undefined on fragment load progress"),void this.removeUnbufferedFrags(r.start);var h=a.defaultAudioCodec||l.audioCodec||"mp4a.40.2",d=this.transmuxer;d||(d=this.transmuxer=new hn(this.hls,ve,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));var c=this.initPTS[r.cc],f=null==(e=r.initSegment)?void 0:e.data;if(void 0!==c){var g=i?i.index:-1,v=-1!==g,m=new wr(r.level,r.sn,r.stats.chunkCount,n.byteLength,g,v);d.push(n,f,h,"",r,i,u.totalduration,!1,m,c)}else this.log("Unknown video PTS for cc "+r.cc+", waiting for video PTS before demuxing audio frag "+r.sn+" of ["+u.startSN+" ,"+u.endSN+"],track "+s),(this.waitingData=this.waitingData||{frag:r,part:i,cache:new mn,complete:!1}).cache.push(new Uint8Array(n)),this.waitingVideoCC=this.videoTrackCC,this.state=Qr}else this.warn("Audio track is undefined on fragment load progress")}else this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+r.sn+" of level "+r.level+" will not be buffered")},r._handleFragmentLoadComplete=function(e){this.waitingData?this.waitingData.complete=!0:t.prototype._handleFragmentLoadComplete.call(this,e)},r.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},r.onBufferCreated=function(t,e){var r=e.tracks.audio;r&&(this.mediaBuffer=r.buffer||null),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer||null)},r.onFragBuffered=function(t,e){var r=e.frag,n=e.part;if(r.type===ve)if(this.fragContextChanged(r))this.warn("Fragment "+r.sn+(n?" p: "+n.index:"")+" of level "+r.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+(this.switchingTrack?this.switchingTrack.name:"false"));else{if("initSegment"!==r.sn){this.fragPrevious=r;var a=this.switchingTrack;a&&(this.bufferedTrack=a,this.switchingTrack=null,this.hls.trigger(S.AUDIO_TRACK_SWITCHED,i({},a)))}this.fragBufferedComplete(r,n)}else if(!this.loadedmetadata&&r.type===ge){var s=this.videoBuffer||this.media;s&&Ir.getBuffered(s).length&&(this.loadedmetadata=!0)}},r.onError=function(e,r){var i;if(r.fatal)this.state=zr;else switch(r.details){case R.FRAG_GAP:case R.FRAG_PARSING_ERROR:case R.FRAG_DECRYPT_ERROR:case R.FRAG_LOAD_ERROR:case R.FRAG_LOAD_TIMEOUT:case R.KEY_LOAD_ERROR:case R.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(ve,r);break;case R.AUDIO_TRACK_LOAD_ERROR:case R.AUDIO_TRACK_LOAD_TIMEOUT:case R.LEVEL_PARSING_ERROR:r.levelRetry||this.state!==Wr||(null==(i=r.context)?void 0:i.type)!==ce||(this.state=Kr);break;case R.BUFFER_FULL_ERROR:if(!r.parent||"audio"!==r.parent)return;this.reduceLengthAndFlushBuffer(r)&&(this.bufferedTrack=null,t.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio"));break;case R.INTERNAL_EXCEPTION:this.recoverWorkerError(r)}},r.onBufferFlushed=function(t,e){e.type===O&&(this.bufferFlushed=!0,this.state===Xr&&(this.state=Kr))},r._handleTransmuxComplete=function(t){var e,r="audio",i=this.hls,n=t.remuxResult,a=t.chunkMeta,s=this.getCurrentContext(a);if(s){var l=s.frag,u=s.part,h=s.level.details,d=n.audio,c=n.text,f=n.id3,g=n.initSegment;if(!this.fragContextChanged(l)&&h){if(this.state=jr,this.switchingTrack&&d&&this.completeAudioSwitch(this.switchingTrack),null!=g&&g.tracks){var v=l.initSegment||l;this._bufferInitSegment(g.tracks,v,a),i.trigger(S.FRAG_PARSING_INIT_SEGMENT,{frag:v,id:r,tracks:g.tracks})}if(d){var m=d.startPTS,p=d.endPTS,y=d.startDTS,T=d.endDTS;u&&(u.elementaryStreams[O]={startPTS:m,endPTS:p,startDTS:y,endDTS:T}),l.setElementaryStreamInfo(O,m,p,y,T),this.bufferFragmentData(d,l,u,a)}if(null!=f&&null!=(e=f.samples)&&e.length){var E=o({id:r,frag:l,details:h},f);i.trigger(S.FRAG_PARSING_METADATA,E)}if(c){var L=o({id:r,frag:l,details:h},c);i.trigger(S.FRAG_PARSING_USERDATA,L)}}else this.fragmentTracker.removeFragment(l)}else this.resetWhenMissingContext(a)},r._bufferInitSegment=function(t,e,r){if(this.state===jr){t.video&&delete t.video;var i=t.audio;if(i){i.levelCodec=i.codec,i.id="audio",this.log("Init audio buffer, container:"+i.container+", codecs[parsed]=["+i.codec+"]"),this.hls.trigger(S.BUFFER_CODECS,t);var n=i.initSegment;if(null!=n&&n.byteLength){var a={type:"audio",frag:e,part:null,chunkMeta:r,parent:e.type,data:n};this.hls.trigger(S.BUFFER_APPENDING,a)}this.tick()}}},r.loadFragment=function(e,r,i){var n,a=this.fragmentTracker.getState(e);this.fragCurrent=e,this.switchingTrack||a===fr||a===vr?"initSegment"===e.sn?this._loadInitSegment(e,r):null!=(n=r.details)&&n.live&&!this.initPTS[e.cc]?(this.log("Waiting for video PTS in continuity counter "+e.cc+" of live stream before loading audio fragment "+e.sn+" of level "+this.trackId),this.state=Qr):(this.startFragRequested=!0,t.prototype.loadFragment.call(this,e,r,i)):this.clearTrackerIfNeeded(e)},r.completeAudioSwitch=function(e){var r=this.hls,n=this.media,a=this.bufferedTrack,s=null==a?void 0:a.attrs,o=e.attrs;n&&s&&(s.CHANNELS!==o.CHANNELS||s.NAME!==o.NAME||s.LANGUAGE!==o.LANGUAGE)&&(this.log("Switching audio track : flushing all audio"),t.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.bufferedTrack=e,this.switchingTrack=null,r.trigger(S.AUDIO_TRACK_SWITCHED,i({},e))},e}(Jr),yn=function(t){function e(e){var r;return(r=t.call(this,e,"[audio-track-controller]")||this).tracks=[],r.groupId=null,r.tracksInGroup=[],r.trackId=-1,r.currentTrack=null,r.selectDefaultTrack=!0,r.registerListeners(),r}l(e,t);var r=e.prototype;return r.registerListeners=function(){var t=this.hls;t.on(S.MANIFEST_LOADING,this.onManifestLoading,this),t.on(S.MANIFEST_PARSED,this.onManifestParsed,this),t.on(S.LEVEL_LOADING,this.onLevelLoading,this),t.on(S.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(S.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.on(S.ERROR,this.onError,this)},r.unregisterListeners=function(){var t=this.hls;t.off(S.MANIFEST_LOADING,this.onManifestLoading,this),t.off(S.MANIFEST_PARSED,this.onManifestParsed,this),t.off(S.LEVEL_LOADING,this.onLevelLoading,this),t.off(S.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(S.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.off(S.ERROR,this.onError,this)},r.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,t.prototype.destroy.call(this)},r.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0},r.onManifestParsed=function(t,e){this.tracks=e.audioTracks||[]},r.onAudioTrackLoaded=function(t,e){var r=e.id,i=e.groupId,n=e.details,a=this.tracksInGroup[r];if(a&&a.groupId===i){var s=a.details;a.details=e.details,this.log("audio-track "+r+' "'+a.name+'" lang:'+a.lang+" group:"+i+" loaded ["+n.startSN+"-"+n.endSN+"]"),r===this.trackId&&this.playlistLoaded(r,e,s)}else this.warn("Track with id:"+r+" and group:"+i+" not found in active group "+a.groupId)},r.onLevelLoading=function(t,e){this.switchLevel(e.level)},r.onLevelSwitching=function(t,e){this.switchLevel(e.level)},r.switchLevel=function(t){var e=this.hls.levels[t];if(null!=e&&e.audioGroupIds){var r=e.audioGroupIds[e.urlId];if(this.groupId!==r){this.groupId=r||null;var i=this.tracks.filter((function(t){return!r||t.groupId===r}));this.selectDefaultTrack&&!i.some((function(t){return t.default}))&&(this.selectDefaultTrack=!1),this.tracksInGroup=i;var n={audioTracks:i};this.log("Updating audio tracks, "+i.length+" track(s) found in group:"+r),this.hls.trigger(S.AUDIO_TRACKS_UPDATED,n),this.selectInitialTrack()}else this.shouldReloadPlaylist(this.currentTrack)&&this.setAudioTrack(this.trackId)}},r.onError=function(t,e){!e.fatal&&e.context&&e.context.type===ce&&e.context.id===this.trackId&&e.context.groupId===this.groupId&&(this.requestScheduled=-1,this.checkRetry(e))},r.setAudioTrack=function(t){var e=this.tracksInGroup;if(t<0||t>=e.length)this.warn("Invalid id passed to audio-track controller");else{this.clearTimer();var r=this.currentTrack;e[this.trackId];var n=e[t],a=n.groupId,s=n.name;if(this.log("Switching to audio-track "+t+' "'+s+'" lang:'+n.lang+" group:"+a),this.trackId=t,this.currentTrack=n,this.selectDefaultTrack=!1,this.hls.trigger(S.AUDIO_TRACK_SWITCHING,i({},n)),!n.details||n.details.live){var o=this.switchParams(n.url,null==r?void 0:r.details);this.loadPlaylist(o)}}},r.selectInitialTrack=function(){var t=this.tracksInGroup,e=this.findTrackId(this.currentTrack)|this.findTrackId(null);if(-1!==e)this.setAudioTrack(e);else{var r=new Error("No track found for running audio group-ID: "+this.groupId+" track count: "+t.length);this.warn(r.message),this.hls.trigger(S.ERROR,{type:L.MEDIA_ERROR,details:R.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:r})}},r.findTrackId=function(t){for(var e=this.tracksInGroup,r=0;r<e.length;r++){var i=e[r];if(!this.selectDefaultTrack||i.default){if(!t||void 0!==t.attrs["STABLE-RENDITION-ID"]&&t.attrs["STABLE-RENDITION-ID"]===i.attrs["STABLE-RENDITION-ID"])return i.id;if(t.name===i.name&&t.lang===i.lang)return i.id}}return-1},r.loadPlaylist=function(e){t.prototype.loadPlaylist.call(this);var r=this.tracksInGroup[this.trackId];if(this.shouldLoadPlaylist(r)){var i=r.id,n=r.groupId,a=r.url;if(e)try{a=e.addDirectives(a)}catch(t){this.warn("Could not construct new URL with HLS Delivery Directives: "+t)}this.log("loading audio-track playlist "+i+' "'+r.name+'" lang:'+r.lang+" group:"+n),this.clearTimer(),this.hls.trigger(S.AUDIO_TRACK_LOADING,{url:a,id:i,groupId:n,deliveryDirectives:e||null})}},a(e,[{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(t){this.selectDefaultTrack=!1,this.setAudioTrack(t)}}]),e}(ur);function Tn(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!En(t[r].attrs,e[r].attrs))return!1;return!0}function En(t,e){var r=t["STABLE-RENDITION-ID"];return r?r===e["STABLE-RENDITION-ID"]:!["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED"].some((function(r){return t[r]!==e[r]}))}var Sn=function(t){function e(e,r,i){var n;return(n=t.call(this,e,r,i,"[subtitle-stream-controller]",me)||this).levels=[],n.currentTrackId=-1,n.tracksBuffered=[],n.mainDetails=null,n._registerListeners(),n}l(e,t);var r=e.prototype;return r.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},r._registerListeners=function(){var t=this.hls;t.on(S.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(S.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(S.MANIFEST_LOADING,this.onManifestLoading,this),t.on(S.LEVEL_LOADED,this.onLevelLoaded,this),t.on(S.ERROR,this.onError,this),t.on(S.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.on(S.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.on(S.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.on(S.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),t.on(S.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(S.FRAG_BUFFERED,this.onFragBuffered,this)},r._unregisterListeners=function(){var t=this.hls;t.off(S.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(S.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(S.MANIFEST_LOADING,this.onManifestLoading,this),t.off(S.LEVEL_LOADED,this.onLevelLoaded,this),t.off(S.ERROR,this.onError,this),t.off(S.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.off(S.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.off(S.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.off(S.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),t.off(S.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(S.FRAG_BUFFERED,this.onFragBuffered,this)},r.startLoad=function(t){this.stopLoad(),this.state=Kr,this.setInterval(500),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()},r.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},r.onMediaDetaching=function(){this.tracksBuffered=[],t.prototype.onMediaDetaching.call(this)},r.onLevelLoaded=function(t,e){this.mainDetails=e.details},r.onSubtitleFragProcessed=function(t,e){var r=e.frag,i=e.success;if(this.fragPrevious=r,this.state=Kr,i){var n=this.tracksBuffered[this.currentTrackId];if(n){for(var a,s=r.start,o=0;o<n.length;o++)if(s>=n[o].start&&s<=n[o].end){a=n[o];break}var l=r.start+r.duration;a?a.end=l:(a={start:s,end:l},n.push(a)),this.fragmentTracker.fragBuffered(r)}}},r.onBufferFlushing=function(t,e){var r=e.startOffset,i=e.endOffset;if(0===r&&i!==Number.POSITIVE_INFINITY){var n=i-1;if(n<=0)return;e.endOffsetSubtitles=Math.max(0,n),this.tracksBuffered.forEach((function(t){for(var e=0;e<t.length;)if(t[e].end<=n)t.shift();else{if(!(t[e].start<n))break;t[e].start=n,e++}})),this.fragmentTracker.removeFragmentsInRange(r,n,me)}},r.onFragBuffered=function(t,e){var r;this.loadedmetadata||e.frag.type!==ge||null!=(r=this.media)&&r.buffered.length&&(this.loadedmetadata=!0)},r.onError=function(t,e){var r=e.frag;(null==r?void 0:r.type)===me&&(this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==Gr&&(this.state=Kr))},r.onSubtitleTracksUpdated=function(t,e){var r=this,i=e.subtitleTracks;Tn(this.levels,i)?this.levels=i.map((function(t){return new Ne(t)})):(this.tracksBuffered=[],this.levels=i.map((function(t){var e=new Ne(t);return r.tracksBuffered[e.id]=[],e})),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,me),this.fragPrevious=null,this.mediaBuffer=null)},r.onSubtitleTrackSwitch=function(t,e){if(this.currentTrackId=e.id,this.levels.length&&-1!==this.currentTrackId){var r=this.levels[this.currentTrackId];null!=r&&r.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,r&&this.setInterval(500)}else this.clearInterval()},r.onSubtitleTrackLoaded=function(t,e){var r,i=e.details,n=e.id,a=this.currentTrackId,s=this.levels;if(s.length){var o=s[a];if(!(n>=s.length||n!==a)&&o){this.mediaBuffer=this.mediaBufferTimeRanges;var l=0;if(i.live||null!=(r=o.details)&&r.live){var u=this.mainDetails;if(i.deltaUpdateFailed||!u)return;var h=u.fragments[0];o.details?0===(l=this.alignPlaylists(i,o.details))&&h&&He(i,l=h.start):i.hasProgramDateTime&&u.hasProgramDateTime?(Fr(i,u),l=i.fragments[0].start):h&&He(i,l=h.start)}o.details=i,this.levelLastLoaded=n,this.startFragRequested||!this.mainDetails&&i.live||this.setStartPosition(o.details,l),this.tick(),i.live&&!this.fragCurrent&&this.media&&this.state===Kr&&($e(null,i.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),o.details=void 0))}}},r._handleFragmentLoadComplete=function(t){var e=this,r=t.frag,i=t.payload,n=r.decryptdata,a=this.hls;if(!this.fragContextChanged(r)&&i&&i.byteLength>0&&n&&n.key&&n.iv&&"AES-128"===n.method){var s=performance.now();this.decrypter.decrypt(new Uint8Array(i),n.key.buffer,n.iv.buffer).catch((function(t){throw a.trigger(S.ERROR,{type:L.MEDIA_ERROR,details:R.FRAG_DECRYPT_ERROR,fatal:!1,error:t,reason:t.message,frag:r}),t})).then((function(t){var e=performance.now();a.trigger(S.FRAG_DECRYPTED,{frag:r,payload:t,stats:{tstart:s,tdecrypt:e}})})).catch((function(t){e.warn(t.name+": "+t.message),e.state=Kr}))}},r.doTick=function(){if(this.media){if(this.state===Kr){var t=this.currentTrackId,e=this.levels,r=e[t];if(!e.length||!r||!r.details)return;var i=this.config,n=this.getLoadPosition(),a=Ir.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],n,i.maxBufferHole),s=a.end,o=a.len,l=this.getFwdBufferInfo(this.media,ge),u=r.details;if(o>this.getMaxBufferLength(null==l?void 0:l.len)+u.levelTargetDuration)return;var h=u.fragments,d=h.length,c=u.edge,f=null,g=this.fragPrevious;if(s<c){var v=i.maxFragLookUpTolerance,m=s>c-v?0:v;!(f=$e(g,h,Math.max(h[0].start,s),m))&&g&&g.start<h[0].start&&(f=h[0])}else f=h[d-1];if(!f)return;if("initSegment"!==(f=this.mapToInitFragWhenRequired(f)).sn){var p=h[f.sn-u.startSN-1];p&&p.cc===f.cc&&this.fragmentTracker.getState(p)===fr&&(f=p)}this.fragmentTracker.getState(f)===fr&&this.loadFragment(f,r,s)}}else this.state=Kr},r.getMaxBufferLength=function(e){var r=t.prototype.getMaxBufferLength.call(this);return e?Math.max(r,e):r},r.loadFragment=function(e,r,i){this.fragCurrent=e,"initSegment"===e.sn?this._loadInitSegment(e,r):(this.startFragRequested=!0,t.prototype.loadFragment.call(this,e,r,i))},a(e,[{key:"mediaBufferTimeRanges",get:function(){return new Ln(this.tracksBuffered[this.currentTrackId]||[])}}]),e}(Jr),Ln=function(t){this.buffered=void 0;var e=function(e,r,i){if((r>>>=0)>i-1)throw new DOMException("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+r+") is greater than the maximum bound ("+i+")");return t[r][e]};this.buffered={get length(){return t.length},end:function(r){return e("end",r,t.length)},start:function(r){return e("start",r,t.length)}}},Rn=function(t){function e(e){var r;return(r=t.call(this,e,"[subtitle-track-controller]")||this).media=null,r.tracks=[],r.groupId=null,r.tracksInGroup=[],r.trackId=-1,r.selectDefaultTrack=!0,r.queuedDefaultTrack=-1,r.trackChangeListener=function(){return r.onTextTracksChanged()},r.asyncPollTrackChange=function(){return r.pollTrackChange(0)},r.useTextTrackPolling=!1,r.subtitlePollingInterval=-1,r._subtitleDisplay=!0,r.registerListeners(),r}l(e,t);var r=e.prototype;return r.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,t.prototype.destroy.call(this)},r.registerListeners=function(){var t=this.hls;t.on(S.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(S.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(S.MANIFEST_LOADING,this.onManifestLoading,this),t.on(S.MANIFEST_PARSED,this.onManifestParsed,this),t.on(S.LEVEL_LOADING,this.onLevelLoading,this),t.on(S.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(S.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.on(S.ERROR,this.onError,this)},r.unregisterListeners=function(){var t=this.hls;t.off(S.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(S.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(S.MANIFEST_LOADING,this.onManifestLoading,this),t.off(S.MANIFEST_PARSED,this.onManifestParsed,this),t.off(S.LEVEL_LOADING,this.onLevelLoading,this),t.off(S.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(S.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.off(S.ERROR,this.onError,this)},r.onMediaAttached=function(t,e){this.media=e.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},r.pollTrackChange=function(t){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,t)},r.onMediaDetaching=function(){this.media&&(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),An(this.media.textTracks).forEach((function(t){Le(t)})),this.subtitleTrack=-1,this.media=null)},r.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0},r.onManifestParsed=function(t,e){this.tracks=e.subtitleTracks},r.onSubtitleTrackLoaded=function(t,e){var r=e.id,i=e.details,n=this.trackId,a=this.tracksInGroup[n];if(a){var s=a.details;a.details=e.details,this.log("subtitle track "+r+" loaded ["+i.startSN+"-"+i.endSN+"]"),r===this.trackId&&this.playlistLoaded(r,e,s)}else this.warn("Invalid subtitle track id "+r)},r.onLevelLoading=function(t,e){this.switchLevel(e.level)},r.onLevelSwitching=function(t,e){this.switchLevel(e.level)},r.switchLevel=function(t){var e=this.hls.levels[t];if(null!=e&&e.textGroupIds){var r=e.textGroupIds[e.urlId],i=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;if(this.groupId!==r){var n=this.tracks.filter((function(t){return!r||t.groupId===r}));this.tracksInGroup=n;var a=this.findTrackId(null==i?void 0:i.name)||this.findTrackId();this.groupId=r||null;var s={subtitleTracks:n};this.log("Updating subtitle tracks, "+n.length+' track(s) found in "'+r+'" group-id'),this.hls.trigger(S.SUBTITLE_TRACKS_UPDATED,s),-1!==a&&this.setSubtitleTrack(a,i)}else this.shouldReloadPlaylist(i)&&this.setSubtitleTrack(this.trackId,i)}},r.findTrackId=function(t){for(var e=this.tracksInGroup,r=0;r<e.length;r++){var i=e[r];if((!this.selectDefaultTrack||i.default)&&(!t||t===i.name))return i.id}return-1},r.onError=function(t,e){!e.fatal&&e.context&&e.context.type===fe&&e.context.id===this.trackId&&e.context.groupId===this.groupId&&this.checkRetry(e)},r.loadPlaylist=function(e){t.prototype.loadPlaylist.call(this);var r=this.tracksInGroup[this.trackId];if(this.shouldLoadPlaylist(r)){var i=r.id,n=r.groupId,a=r.url;if(e)try{a=e.addDirectives(a)}catch(t){this.warn("Could not construct new URL with HLS Delivery Directives: "+t)}this.log("Loading subtitle playlist for id "+i),this.hls.trigger(S.SUBTITLE_TRACK_LOADING,{url:a,id:i,groupId:n,deliveryDirectives:e||null})}},r.toggleTrackModes=function(t){var e=this,r=this.media,i=this.trackId;if(r){var n=An(r.textTracks),a=n.filter((function(t){return t.groupId===e.groupId}));if(-1===t)[].slice.call(n).forEach((function(t){t.mode="disabled"}));else{var s=a[i];s&&(s.mode="disabled")}var o=a[t];o&&(o.mode=this.subtitleDisplay?"showing":"hidden")}},r.setSubtitleTrack=function(t,e){var r,i=this.tracksInGroup;if(this.media){if(this.trackId!==t&&this.toggleTrackModes(t),!(this.trackId===t&&(-1===t||null!=(r=i[t])&&r.details)||t<-1||t>=i.length)){this.clearTimer();var n=i[t];if(this.log("Switching to subtitle-track "+t+(n?' "'+n.name+'" lang:'+n.lang+" group:"+n.groupId:"")),this.trackId=t,n){var a=n.id,s=n.groupId,o=void 0===s?"":s,l=n.name,u=n.type,h=n.url;this.hls.trigger(S.SUBTITLE_TRACK_SWITCH,{id:a,groupId:o,name:l,type:u,url:h});var d=this.switchParams(n.url,null==e?void 0:e.details);this.loadPlaylist(d)}else this.hls.trigger(S.SUBTITLE_TRACK_SWITCH,{id:t})}}else this.queuedDefaultTrack=t},r.onTextTracksChanged=function(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),this.media&&this.hls.config.renderTextTracksNatively){for(var t=-1,e=An(this.media.textTracks),r=0;r<e.length;r++)if("hidden"===e[r].mode)t=r;else if("showing"===e[r].mode){t=r;break}this.subtitleTrack!==t&&(this.subtitleTrack=t)}},a(e,[{key:"subtitleDisplay",get:function(){return this._subtitleDisplay},set:function(t){this._subtitleDisplay=t,this.trackId>-1&&this.toggleTrackModes(this.trackId)}},{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(t){this.selectDefaultTrack=!1;var e=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(t,e)}}]),e}(ur);function An(t){for(var e=[],r=0;r<t.length;r++){var i=t[r];"subtitles"!==i.kind&&"captions"!==i.kind||!i.label||e.push(t[r])}return e}var kn=function(){function t(t){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=t}var e=t.prototype;return e.append=function(t,e){var r=this.queues[e];r.push(t),1===r.length&&this.buffers[e]&&this.executeNext(e)},e.insertAbort=function(t,e){this.queues[e].unshift(t),this.executeNext(e)},e.appendBlocker=function(t){var e,r=new Promise((function(t){e=t})),i={execute:e,onStart:function(){},onComplete:function(){},onError:function(){}};return this.append(i,t),r},e.executeNext=function(t){var e=this.buffers,r=this.queues,i=e[t],n=r[t];if(n.length){var a=n[0];try{a.execute()}catch(e){w.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),a.onError(e),null!=i&&i.updating||(n.shift(),this.executeNext(t))}}},e.shiftAndExecuteNext=function(t){this.queues[t].shift(),this.executeNext(t)},e.current=function(t){return this.queues[t][0]},t}(),bn=qt(),Dn=/([ha]vc.)(?:\.[^.,]+)+/,In=function(){function t(t){var e=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=function(){var t=e.media,r=e.mediaSource;w.log("[buffer-controller]: Media source opened"),t&&(t.removeEventListener("emptied",e._onMediaEmptied),e.updateMediaElementDuration(),e.hls.trigger(S.MEDIA_ATTACHED,{media:t})),r&&r.removeEventListener("sourceopen",e._onMediaSourceOpen),e.checkPendingTracks()},this._onMediaSourceClose=function(){w.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=function(){w.log("[buffer-controller]: Media source ended")},this._onMediaEmptied=function(){var t=e.media,r=e._objectUrl;t&&t.src!==r&&w.error("Media element src was set while attaching MediaSource ("+r+" > "+t.src+")")},this.hls=t,this._initSourceBuffer(),this.registerListeners()}var e=t.prototype;return e.hasSourceTypes=function(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0},e.destroy=function(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null},e.registerListeners=function(){var t=this.hls;t.on(S.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(S.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(S.MANIFEST_LOADING,this.onManifestLoading,this),t.on(S.MANIFEST_PARSED,this.onManifestParsed,this),t.on(S.BUFFER_RESET,this.onBufferReset,this),t.on(S.BUFFER_APPENDING,this.onBufferAppending,this),t.on(S.BUFFER_CODECS,this.onBufferCodecs,this),t.on(S.BUFFER_EOS,this.onBufferEos,this),t.on(S.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(S.LEVEL_UPDATED,this.onLevelUpdated,this),t.on(S.FRAG_PARSED,this.onFragParsed,this),t.on(S.FRAG_CHANGED,this.onFragChanged,this)},e.unregisterListeners=function(){var t=this.hls;t.off(S.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(S.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(S.MANIFEST_LOADING,this.onManifestLoading,this),t.off(S.MANIFEST_PARSED,this.onManifestParsed,this),t.off(S.BUFFER_RESET,this.onBufferReset,this),t.off(S.BUFFER_APPENDING,this.onBufferAppending,this),t.off(S.BUFFER_CODECS,this.onBufferCodecs,this),t.off(S.BUFFER_EOS,this.onBufferEos,this),t.off(S.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(S.LEVEL_UPDATED,this.onLevelUpdated,this),t.off(S.FRAG_PARSED,this.onFragParsed,this),t.off(S.FRAG_CHANGED,this.onFragChanged,this)},e._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new kn(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.lastMpegAudioChunk=null},e.onManifestLoading=function(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null},e.onManifestParsed=function(t,e){var r=2;(e.audio&&!e.video||!e.altAudio)&&(r=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=r,w.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},e.onMediaAttaching=function(t,e){var r=this.media=e.media;if(r&&bn){var i=this.mediaSource=new bn;i.addEventListener("sourceopen",this._onMediaSourceOpen),i.addEventListener("sourceended",this._onMediaSourceEnded),i.addEventListener("sourceclose",this._onMediaSourceClose),r.src=self.URL.createObjectURL(i),this._objectUrl=r.src,r.addEventListener("emptied",this._onMediaEmptied)}},e.onMediaDetaching=function(){var t=this.media,e=this.mediaSource,r=this._objectUrl;if(e){if(w.log("[buffer-controller]: media source detaching"),"open"===e.readyState)try{e.endOfStream()}catch(t){w.warn("[buffer-controller]: onMediaDetaching: "+t.message+" while calling endOfStream")}this.onBufferReset(),e.removeEventListener("sourceopen",this._onMediaSourceOpen),e.removeEventListener("sourceended",this._onMediaSourceEnded),e.removeEventListener("sourceclose",this._onMediaSourceClose),t&&(t.removeEventListener("emptied",this._onMediaEmptied),r&&self.URL.revokeObjectURL(r),t.src===r?(t.removeAttribute("src"),t.load()):w.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(S.MEDIA_DETACHED,void 0)},e.onBufferReset=function(){var t=this;this.getSourceBufferTypes().forEach((function(e){var r=t.sourceBuffer[e];try{r&&(t.removeBufferListeners(e),t.mediaSource&&t.mediaSource.removeSourceBuffer(r),t.sourceBuffer[e]=void 0)}catch(t){w.warn("[buffer-controller]: Failed to reset the "+e+" buffer",t)}})),this._initSourceBuffer()},e.onBufferCodecs=function(t,e){var r=this,i=this.getSourceBufferTypes().length;Object.keys(e).forEach((function(t){if(i){var n=r.tracks[t];if(n&&"function"==typeof n.buffer.changeType){var a=e[t],s=a.id,o=a.codec,l=a.levelCodec,u=a.container,h=a.metadata,d=(n.levelCodec||n.codec).replace(Dn,"$1"),c=(l||o).replace(Dn,"$1");if(d!==c){var f=u+";codecs="+(l||o);r.appendChangeType(t,f),w.log("[buffer-controller]: switching codec "+d+" to "+c),r.tracks[t]={buffer:n.buffer,codec:o,container:u,levelCodec:l,metadata:h,id:s}}}}else r.pendingTracks[t]=e[t]})),i||(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},e.appendChangeType=function(t,e){var r=this,i=this.operationQueue,n={execute:function(){var n=r.sourceBuffer[t];n&&(w.log("[buffer-controller]: changing "+t+" sourceBuffer type to "+e),n.changeType(e)),i.shiftAndExecuteNext(t)},onStart:function(){},onComplete:function(){},onError:function(e){w.warn("[buffer-controller]: Failed to change "+t+" SourceBuffer type",e)}};i.append(n,t)},e.onBufferAppending=function(t,e){var r=this,i=this.hls,n=this.operationQueue,a=this.tracks,s=e.data,o=e.type,l=e.frag,u=e.part,h=e.chunkMeta,d=h.buffering[o],c=self.performance.now();d.start=c;var f=l.stats.buffering,g=u?u.stats.buffering:null;0===f.start&&(f.start=c),g&&0===g.start&&(g.start=c);var v=a.audio,m=!1;"audio"===o&&"audio/mpeg"===(null==v?void 0:v.container)&&(m=!this.lastMpegAudioChunk||1===h.id||this.lastMpegAudioChunk.sn!==h.sn,this.lastMpegAudioChunk=h);var p=l.start,y={execute:function(){if(d.executeStart=self.performance.now(),m){var t=r.sourceBuffer[o];if(t){var e=p-t.timestampOffset;Math.abs(e)>=.1&&(w.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to "+p+" (delta: "+e+") sn: "+l.sn+")"),t.timestampOffset=p)}}r.appendExecutor(s,o)},onStart:function(){},onComplete:function(){var t=self.performance.now();d.executeEnd=d.end=t,0===f.first&&(f.first=t),g&&0===g.first&&(g.first=t);var e=r.sourceBuffer,i={};for(var n in e)i[n]=Ir.getBuffered(e[n]);r.appendError=0,r.hls.trigger(S.BUFFER_APPENDED,{type:o,frag:l,part:u,chunkMeta:h,parent:l.type,timeRanges:i})},onError:function(t){w.error("[buffer-controller]: Error encountered while trying to append to the "+o+" SourceBuffer",t);var e={type:L.MEDIA_ERROR,parent:l.type,details:R.BUFFER_APPEND_ERROR,frag:l,part:u,chunkMeta:h,error:t,err:t,fatal:!1};t.code===DOMException.QUOTA_EXCEEDED_ERR?e.details=R.BUFFER_FULL_ERROR:(r.appendError++,e.details=R.BUFFER_APPEND_ERROR,r.appendError>i.config.appendErrorMaxRetry&&(w.error("[buffer-controller]: Failed "+i.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),e.fatal=!0)),i.trigger(S.ERROR,e)}};n.append(y,o)},e.onBufferFlushing=function(t,e){var r=this,i=this.operationQueue,n=function(t){return{execute:r.removeExecutor.bind(r,t,e.startOffset,e.endOffset),onStart:function(){},onComplete:function(){r.hls.trigger(S.BUFFER_FLUSHED,{type:t})},onError:function(e){w.warn("[buffer-controller]: Failed to remove from "+t+" SourceBuffer",e)}}};e.type?i.append(n(e.type),e.type):this.getSourceBufferTypes().forEach((function(t){i.append(n(t),t)}))},e.onFragParsed=function(t,e){var r=this,i=e.frag,n=e.part,a=[],s=n?n.elementaryStreams:i.elementaryStreams;s[U]?a.push("audiovideo"):(s[O]&&a.push("audio"),s[N]&&a.push("video")),0===a.length&&w.warn("Fragments must have at least one ElementaryStreamType set. type: "+i.type+" level: "+i.level+" sn: "+i.sn),this.blockBuffers((function(){var t=self.performance.now();i.stats.buffering.end=t,n&&(n.stats.buffering.end=t);var e=n?n.stats:i.stats;r.hls.trigger(S.FRAG_BUFFERED,{frag:i,part:n,stats:e,id:i.type})}),a)},e.onFragChanged=function(t,e){this.flushBackBuffer()},e.onBufferEos=function(t,e){var r=this;this.getSourceBufferTypes().reduce((function(t,i){var n=r.sourceBuffer[i];return!n||e.type&&e.type!==i||(n.ending=!0,n.ended||(n.ended=!0,w.log("[buffer-controller]: "+i+" sourceBuffer now EOS"))),t&&!(n&&!n.ended)}),!0)&&(w.log("[buffer-controller]: Queueing mediaSource.endOfStream()"),this.blockBuffers((function(){r.getSourceBufferTypes().forEach((function(t){var e=r.sourceBuffer[t];e&&(e.ending=!1)}));var t=r.mediaSource;t&&"open"===t.readyState?(w.log("[buffer-controller]: Calling mediaSource.endOfStream()"),t.endOfStream()):t&&w.info("[buffer-controller]: Could not call mediaSource.endOfStream(). mediaSource.readyState: "+t.readyState)})))},e.onLevelUpdated=function(t,e){var r=e.details;r.fragments.length&&(this.details=r,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},e.flushBackBuffer=function(){var t=this.hls,e=this.details,r=this.media,i=this.sourceBuffer;if(r&&null!==e){var n=this.getSourceBufferTypes();if(n.length){var a=e.live&&null!==t.config.liveBackBufferLength?t.config.liveBackBufferLength:t.config.backBufferLength;if(E(a)&&!(a<0)){var s=r.currentTime,o=e.levelTargetDuration,l=Math.max(a,o),u=Math.floor(s/o)*o-l;n.forEach((function(r){var n=i[r];if(n){var a=Ir.getBuffered(n);if(a.length>0&&u>a.start(0)){if(t.trigger(S.BACK_BUFFER_REACHED,{bufferEnd:u}),e.live)t.trigger(S.LIVE_BACK_BUFFER_REACHED,{bufferEnd:u});else if(n.ended&&a.end(a.length-1)-s<2*o)return void w.info("[buffer-controller]: Cannot flush "+r+" back buffer while SourceBuffer is in ended state");t.trigger(S.BUFFER_FLUSHING,{startOffset:0,endOffset:u,type:r})}}}))}}}},e.updateMediaElementDuration=function(){if(this.details&&this.media&&this.mediaSource&&"open"===this.mediaSource.readyState){var t=this.details,e=this.hls,r=this.media,i=this.mediaSource,n=t.fragments[0].start+t.totalduration,a=r.duration,s=E(i.duration)?i.duration:0;t.live&&e.config.liveDurationInfinity?(w.log("[buffer-controller]: Media Source duration is set to Infinity"),i.duration=1/0,this.updateSeekableRange(t)):(n>s&&n>a||!E(a))&&(w.log("[buffer-controller]: Updating Media Source duration to "+n.toFixed(3)),i.duration=n)}},e.updateSeekableRange=function(t){var e=this.mediaSource,r=t.fragments;if(r.length&&t.live&&null!=e&&e.setLiveSeekableRange){var i=Math.max(0,r[0].start),n=Math.max(i,i+t.totalduration);e.setLiveSeekableRange(i,n)}},e.checkPendingTracks=function(){var t=this.bufferCodecEventsExpected,e=this.operationQueue,r=this.pendingTracks,i=Object.keys(r).length;if(i&&!t||2===i){this.createSourceBuffers(r),this.pendingTracks={};var n=this.getSourceBufferTypes();if(n.length)this.hls.trigger(S.BUFFER_CREATED,{tracks:this.tracks}),n.forEach((function(t){e.executeNext(t)}));else{var a=new Error("could not create source buffer for media codec(s)");this.hls.trigger(S.ERROR,{type:L.MEDIA_ERROR,details:R.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:a,reason:a.message})}}},e.createSourceBuffers=function(t){var e=this.sourceBuffer,r=this.mediaSource;if(!r)throw Error("createSourceBuffers called when mediaSource was null");for(var i in t)if(!e[i]){var n=t[i];if(!n)throw Error("source buffer exists for track "+i+", however track does not");var a=n.levelCodec||n.codec,s=n.container+";codecs="+a;w.log("[buffer-controller]: creating sourceBuffer("+s+")");try{var o=e[i]=r.addSourceBuffer(s),l=i;this.addBufferListener(l,"updatestart",this._onSBUpdateStart),this.addBufferListener(l,"updateend",this._onSBUpdateEnd),this.addBufferListener(l,"error",this._onSBUpdateError),this.tracks[i]={buffer:o,codec:a,container:n.container,levelCodec:n.levelCodec,metadata:n.metadata,id:n.id}}catch(t){w.error("[buffer-controller]: error while trying to add sourceBuffer: "+t.message),this.hls.trigger(S.ERROR,{type:L.MEDIA_ERROR,details:R.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:t,mimeType:s})}}},e._onSBUpdateStart=function(t){this.operationQueue.current(t).onStart()},e._onSBUpdateEnd=function(t){var e=this.operationQueue;e.current(t).onComplete(),e.shiftAndExecuteNext(t)},e._onSBUpdateError=function(t,e){var r=new Error(t+" SourceBuffer error");w.error("[buffer-controller]: "+r,e),this.hls.trigger(S.ERROR,{type:L.MEDIA_ERROR,details:R.BUFFER_APPENDING_ERROR,error:r,fatal:!1});var i=this.operationQueue.current(t);i&&i.onError(e)},e.removeExecutor=function(t,e,r){var i=this.media,n=this.mediaSource,a=this.operationQueue,s=this.sourceBuffer[t];if(!i||!n||!s)return w.warn("[buffer-controller]: Attempting to remove from the "+t+" SourceBuffer, but it does not exist"),void a.shiftAndExecuteNext(t);var o=E(i.duration)?i.duration:1/0,l=E(n.duration)?n.duration:1/0,u=Math.max(0,e),h=Math.min(r,o,l);h>u&&!s.ending?(s.ended=!1,w.log("[buffer-controller]: Removing ["+u+","+h+"] from the "+t+" SourceBuffer"),s.remove(u,h)):a.shiftAndExecuteNext(t)},e.appendExecutor=function(t,e){var r=this.operationQueue,i=this.sourceBuffer[e];if(!i)return w.warn("[buffer-controller]: Attempting to append to the "+e+" SourceBuffer, but it does not exist"),void r.shiftAndExecuteNext(e);i.ended=!1,i.appendBuffer(t)},e.blockBuffers=function(t,e){var r=this;if(void 0===e&&(e=this.getSourceBufferTypes()),!e.length)return w.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve().then(t);var i=this.operationQueue,n=e.map((function(t){return i.appendBlocker(t)}));Promise.all(n).then((function(){t(),e.forEach((function(t){var e=r.sourceBuffer[t];null!=e&&e.updating||i.shiftAndExecuteNext(t)}))}))},e.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},e.addBufferListener=function(t,e,r){var i=this.sourceBuffer[t];if(i){var n=r.bind(this,t);this.listeners[t].push({event:e,listener:n}),i.addEventListener(e,n)}},e.removeBufferListeners=function(t){var e=this.sourceBuffer[t];e&&this.listeners[t].forEach((function(t){e.removeEventListener(t.event,t.listener)}))},t}(),wn={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Cn=function(t){var e=t;return wn.hasOwnProperty(t)&&(e=wn[t]),String.fromCharCode(e)},_n=15,Pn=100,xn={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Fn={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Mn={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},On={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Nn=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],Un=function(){function t(){this.time=null,this.verboseLevel=0}return t.prototype.log=function(t,e){if(this.verboseLevel>=t){var r="function"==typeof e?e():e;w.log(this.time+" ["+t+"] "+r)}},t}(),Bn=function(t){for(var e=[],r=0;r<t.length;r++)e.push(t[r].toString(16));return e},Gn=function(){function t(t,e,r,i,n){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=t||"white",this.underline=e||!1,this.italics=r||!1,this.background=i||"black",this.flash=n||!1}var e=t.prototype;return e.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},e.setStyles=function(t){for(var e=["foreground","underline","italics","background","flash"],r=0;r<e.length;r++){var i=e[r];t.hasOwnProperty(i)&&(this[i]=t[i])}},e.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},e.equals=function(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash},e.copy=function(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash},e.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},t}(),Kn=function(){function t(t,e,r,i,n,a){this.uchar=void 0,this.penState=void 0,this.uchar=t||" ",this.penState=new Gn(e,r,i,n,a)}var e=t.prototype;return e.reset=function(){this.uchar=" ",this.penState.reset()},e.setChar=function(t,e){this.uchar=t,this.penState.copy(e)},e.setPenState=function(t){this.penState.copy(t)},e.equals=function(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)},e.copy=function(t){this.uchar=t.uchar,this.penState.copy(t.penState)},e.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},t}(),Hn=function(){function t(t){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var e=0;e<Pn;e++)this.chars.push(new Kn);this.logger=t,this.pos=0,this.currPenState=new Gn}var e=t.prototype;return e.equals=function(t){for(var e=!0,r=0;r<Pn;r++)if(!this.chars[r].equals(t.chars[r])){e=!1;break}return e},e.copy=function(t){for(var e=0;e<Pn;e++)this.chars[e].copy(t.chars[e])},e.isEmpty=function(){for(var t=!0,e=0;e<Pn;e++)if(!this.chars[e].isEmpty()){t=!1;break}return t},e.setCursor=function(t){this.pos!==t&&(this.pos=t),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>Pn&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=Pn)},e.moveCursor=function(t){var e=this.pos+t;if(t>1)for(var r=this.pos+1;r<e+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(e)},e.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},e.insertChar=function(t){var e=this;t>=144&&this.backSpace();var r=Cn(t);this.pos>=Pn?this.logger.log(0,(function(){return"Cannot insert "+t.toString(16)+" ("+r+") at position "+e.pos+". Skipping it!"})):(this.chars[this.pos].setChar(r,this.currPenState),this.moveCursor(1))},e.clearFromPos=function(t){var e;for(e=t;e<Pn;e++)this.chars[e].reset()},e.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},e.clearToEndOfRow=function(){this.clearFromPos(this.pos)},e.getTextString=function(){for(var t=[],e=!0,r=0;r<Pn;r++){var i=this.chars[r].uchar;" "!==i&&(e=!1),t.push(i)}return e?"":t.join("")},e.setPenStyles=function(t){this.currPenState.setStyles(t),this.chars[this.pos].setPenState(this.currPenState)},t}(),Vn=function(){function t(t){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var e=0;e<_n;e++)this.rows.push(new Hn(t));this.logger=t,this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var e=t.prototype;return e.reset=function(){for(var t=0;t<_n;t++)this.rows[t].clear();this.currRow=14},e.equals=function(t){for(var e=!0,r=0;r<_n;r++)if(!this.rows[r].equals(t.rows[r])){e=!1;break}return e},e.copy=function(t){for(var e=0;e<_n;e++)this.rows[e].copy(t.rows[e])},e.isEmpty=function(){for(var t=!0,e=0;e<_n;e++)if(!this.rows[e].isEmpty()){t=!1;break}return t},e.backSpace=function(){this.rows[this.currRow].backSpace()},e.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},e.insertChar=function(t){this.rows[this.currRow].insertChar(t)},e.setPen=function(t){this.rows[this.currRow].setPenStyles(t)},e.moveCursor=function(t){this.rows[this.currRow].moveCursor(t)},e.setCursor=function(t){this.logger.log(2,"setCursor: "+t),this.rows[this.currRow].setCursor(t)},e.setPAC=function(t){this.logger.log(2,(function(){return"pacData = "+JSON.stringify(t)}));var e=t.row-1;if(this.nrRollUpRows&&e<this.nrRollUpRows-1&&(e=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==e){for(var r=0;r<_n;r++)this.rows[r].clear();var i=this.currRow+1-this.nrRollUpRows,n=this.lastOutputScreen;if(n){var a=n.rows[i].cueStartTime,s=this.logger.time;if(a&&null!==s&&a<s)for(var o=0;o<this.nrRollUpRows;o++)this.rows[e-this.nrRollUpRows+o+1].copy(n.rows[i+o])}}this.currRow=e;var l=this.rows[this.currRow];if(null!==t.indent){var u=t.indent,h=Math.max(u-1,0);l.setCursor(t.indent),t.color=l.chars[h].penState.foreground}var d={foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1};this.setPen(d)},e.setBkgData=function(t){this.logger.log(2,(function(){return"bkgData = "+JSON.stringify(t)})),this.backSpace(),this.setPen(t),this.insertChar(32)},e.setRollUpRows=function(t){this.nrRollUpRows=t},e.rollUp=function(){var t=this;if(null!==this.nrRollUpRows){this.logger.log(1,(function(){return t.getDisplayText()}));var e=this.currRow+1-this.nrRollUpRows,r=this.rows.splice(e,1)[0];r.clear(),this.rows.splice(this.currRow,0,r),this.logger.log(2,"Rolling up")}else this.logger.log(3,"roll_up but nrRollUpRows not set yet")},e.getDisplayText=function(t){t=t||!1;for(var e=[],r="",i=-1,n=0;n<_n;n++){var a=this.rows[n].getTextString();a&&(i=n+1,t?e.push("Row "+i+": '"+a+"'"):e.push(a.trim()))}return e.length>0&&(r=t?"["+e.join(" | ")+"]":e.join("\n")),r},e.getTextAndFormat=function(){return this.rows},t}(),Yn=function(){function t(t,e,r){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=t,this.outputFilter=e,this.mode=null,this.verbose=0,this.displayedMemory=new Vn(r),this.nonDisplayedMemory=new Vn(r),this.lastOutputScreen=new Vn(r),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=r}var e=t.prototype;return e.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},e.getHandler=function(){return this.outputFilter},e.setHandler=function(t){this.outputFilter=t},e.setPAC=function(t){this.writeScreen.setPAC(t)},e.setBkgData=function(t){this.writeScreen.setBkgData(t)},e.setMode=function(t){t!==this.mode&&(this.mode=t,this.logger.log(2,(function(){return"MODE="+t})),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)},e.insertChars=function(t){for(var e=this,r=0;r<t.length;r++)this.writeScreen.insertChar(t[r]);var i=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,(function(){return i+": "+e.writeScreen.getDisplayText(!0)})),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(1,(function(){return"DISPLAYED: "+e.displayedMemory.getDisplayText(!0)})),this.outputDataUpdate())},e.ccRCL=function(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},e.ccBS=function(){this.logger.log(2,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},e.ccAOF=function(){},e.ccAON=function(){},e.ccDER=function(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},e.ccRU=function(t){this.logger.log(2,"RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)},e.ccFON=function(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},e.ccRDC=function(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},e.ccTR=function(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")},e.ccRTD=function(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")},e.ccEDM=function(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},e.ccCR=function(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},e.ccENM=function(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},e.ccEOC=function(){var t=this;if(this.logger.log(2,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,(function(){return"DISP: "+t.displayedMemory.getDisplayText()}))}this.outputDataUpdate(!0)},e.ccTO=function(t){this.logger.log(2,"TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)},e.ccMIDROW=function(t){var e={flash:!1};if(e.underline=t%2==1,e.italics=t>=46,e.italics)e.foreground="white";else{var r=Math.floor(t/2)-16;e.foreground=["white","green","blue","cyan","red","yellow","magenta"][r]}this.logger.log(2,"MIDROW: "+JSON.stringify(e)),this.writeScreen.setPen(e)},e.outputDataUpdate=function(t){void 0===t&&(t=!1);var e=this.logger.time;null!==e&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),t&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},e.cueSplitAtTime=function(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))},t}(),Wn=function(){function t(t,e,r){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var i=new Un;this.channels=[null,new Yn(t,e,i),new Yn(t+1,r,i)],this.cmdHistory={a:null,b:null},this.logger=i}var e=t.prototype;return e.getHandler=function(t){return this.channels[t].getHandler()},e.setHandler=function(t,e){this.channels[t].setHandler(e)},e.addData=function(t,e){var r,i,n,a=!1;this.logger.time=t;for(var s=0;s<e.length;s+=2)if(i=127&e[s],n=127&e[s+1],0!==i||0!==n){if(this.logger.log(3,"["+Bn([e[s],e[s+1]])+"] -> ("+Bn([i,n])+")"),(r=this.parseCmd(i,n))||(r=this.parseMidrow(i,n)),r||(r=this.parsePAC(i,n)),r||(r=this.parseBackgroundAttributes(i,n)),!r&&(a=this.parseChars(i,n))){var o=this.currentChannel;o&&o>0?this.channels[o].insertChars(a):this.logger.log(2,"No channel found yet. TEXT-MODE?")}r||a||this.logger.log(2,"Couldn't parse cleaned data "+Bn([i,n])+" orig: "+Bn([e[s],e[s+1]]))}},e.parseCmd=function(t,e){var r=this.cmdHistory;if(!((20===t||28===t||21===t||29===t)&&e>=32&&e<=47||(23===t||31===t)&&e>=33&&e<=35))return!1;if(qn(t,e,r))return jn(null,null,r),this.logger.log(3,"Repeated command ("+Bn([t,e])+") is dropped"),!0;var i=20===t||21===t||23===t?1:2,n=this.channels[i];return 20===t||21===t||28===t||29===t?32===e?n.ccRCL():33===e?n.ccBS():34===e?n.ccAOF():35===e?n.ccAON():36===e?n.ccDER():37===e?n.ccRU(2):38===e?n.ccRU(3):39===e?n.ccRU(4):40===e?n.ccFON():41===e?n.ccRDC():42===e?n.ccTR():43===e?n.ccRTD():44===e?n.ccEDM():45===e?n.ccCR():46===e?n.ccENM():47===e&&n.ccEOC():n.ccTO(e-32),jn(t,e,r),this.currentChannel=i,!0},e.parseMidrow=function(t,e){var r=0;if((17===t||25===t)&&e>=32&&e<=47){if((r=17===t?1:2)!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;var i=this.channels[r];return!!i&&(i.ccMIDROW(e),this.logger.log(3,"MIDROW ("+Bn([t,e])+")"),!0)}return!1},e.parsePAC=function(t,e){var r,i=this.cmdHistory;if(!((t>=17&&t<=23||t>=25&&t<=31)&&e>=64&&e<=127||(16===t||24===t)&&e>=64&&e<=95))return!1;if(qn(t,e,i))return jn(null,null,i),!0;var n=t<=23?1:2;r=e>=64&&e<=95?1===n?xn[t]:Mn[t]:1===n?Fn[t]:On[t];var a=this.channels[n];return!!a&&(a.setPAC(this.interpretPAC(r,e)),jn(t,e,i),this.currentChannel=n,!0)},e.interpretPAC=function(t,e){var r,i={color:null,italics:!1,indent:null,underline:!1,row:t};return r=e>95?e-96:e-64,i.underline=1==(1&r),r<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(i.italics=!0,i.color="white"):i.indent=4*Math.floor((r-16)/2),i},e.parseChars=function(t,e){var r,i,n=null,a=null;if(t>=25?(r=2,a=t-8):(r=1,a=t),a>=17&&a<=19?(i=17===a?e+80:18===a?e+112:e+144,this.logger.log(2,"Special char '"+Cn(i)+"' in channel "+r),n=[i]):t>=32&&t<=127&&(n=0===e?[t]:[t,e]),n){var s=Bn(n);this.logger.log(3,"Char codes =  "+s.join(",")),jn(t,e,this.cmdHistory)}return n},e.parseBackgroundAttributes=function(t,e){var r;if(!((16===t||24===t)&&e>=32&&e<=47||(23===t||31===t)&&e>=45&&e<=47))return!1;var i={};16===t||24===t?(r=Math.floor((e-32)/2),i.background=Nn[r],e%2==1&&(i.background=i.background+"_semi")):45===e?i.background="transparent":(i.foreground="black",47===e&&(i.underline=!0));var n=t<=23?1:2;return this.channels[n].setBkgData(i),jn(t,e,this.cmdHistory),!0},e.reset=function(){for(var t=0;t<Object.keys(this.channels).length;t++){var e=this.channels[t];e&&e.reset()}this.cmdHistory={a:null,b:null}},e.cueSplitAtTime=function(t){for(var e=0;e<this.channels.length;e++){var r=this.channels[e];r&&r.cueSplitAtTime(t)}},t}();function jn(t,e,r){r.a=t,r.b=e}function qn(t,e,r){return r.a===t&&r.b===e}var Xn=function(){function t(t,e){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=t,this.trackName=e}var e=t.prototype;return e.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},e.newCue=function(t,e,r){(null===this.startTime||this.startTime>t)&&(this.startTime=t),this.endTime=e,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)},e.reset=function(){this.cueRanges=[],this.startTime=null},t}(),zn=function(){if("undefined"!=typeof self&&self.VTTCue)return self.VTTCue;var t=["","lr","rl"],e=["start","middle","end","left","right"];function r(t,e){if("string"!=typeof e)return!1;if(!Array.isArray(t))return!1;var r=e.toLowerCase();return!!~t.indexOf(r)&&r}function i(t){return r(e,t)}function n(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var s in a)t[s]=a[s]}return t}function a(e,a,s){var o=this,l={enumerable:!0};o.hasBeenReset=!1;var u="",h=!1,d=e,c=a,f=s,g=null,v="",m=!0,p="auto",y="start",T=50,E="middle",S=50,L="middle";Object.defineProperty(o,"id",n({},l,{get:function(){return u},set:function(t){u=""+t}})),Object.defineProperty(o,"pauseOnExit",n({},l,{get:function(){return h},set:function(t){h=!!t}})),Object.defineProperty(o,"startTime",n({},l,{get:function(){return d},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");d=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"endTime",n({},l,{get:function(){return c},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");c=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"text",n({},l,{get:function(){return f},set:function(t){f=""+t,this.hasBeenReset=!0}})),Object.defineProperty(o,"region",n({},l,{get:function(){return g},set:function(t){g=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"vertical",n({},l,{get:function(){return v},set:function(e){var i=function(e){return r(t,e)}(e);if(!1===i)throw new SyntaxError("An invalid or illegal string was specified.");v=i,this.hasBeenReset=!0}})),Object.defineProperty(o,"snapToLines",n({},l,{get:function(){return m},set:function(t){m=!!t,this.hasBeenReset=!0}})),Object.defineProperty(o,"line",n({},l,{get:function(){return p},set:function(t){if("number"!=typeof t&&"auto"!==t)throw new SyntaxError("An invalid number or illegal string was specified.");p=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"lineAlign",n({},l,{get:function(){return y},set:function(t){var e=i(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"position",n({},l,{get:function(){return T},set:function(t){if(t<0||t>100)throw new Error("Position must be between 0 and 100.");T=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"positionAlign",n({},l,{get:function(){return E},set:function(t){var e=i(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");E=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"size",n({},l,{get:function(){return S},set:function(t){if(t<0||t>100)throw new Error("Size must be between 0 and 100.");S=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"align",n({},l,{get:function(){return L},set:function(t){var e=i(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");L=e,this.hasBeenReset=!0}})),o.displayState=void 0}return a.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},a}(),Qn=function(){function t(){}return t.prototype.decode=function(t,e){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))},t}();function $n(t){function e(t,e,r,i){return 3600*(0|t)+60*(0|e)+(0|r)+parseFloat(i||0)}var r=t.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return r?parseFloat(r[2])>59?e(r[2],r[3],0,r[4]):e(r[1],r[2],r[3],r[4]):null}var Jn=function(){function t(){this.values=Object.create(null)}var e=t.prototype;return e.set=function(t,e){this.get(t)||""===e||(this.values[t]=e)},e.get=function(t,e,r){return r?this.has(t)?this.values[t]:e[r]:this.has(t)?this.values[t]:e},e.has=function(t){return t in this.values},e.alt=function(t,e,r){for(var i=0;i<r.length;++i)if(e===r[i]){this.set(t,e);break}},e.integer=function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},e.percent=function(t,e){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(e)){var r=parseFloat(e);if(r>=0&&r<=100)return this.set(t,r),!0}return!1},t}();function Zn(t,e,r,i){var n=i?t.split(i):[t];for(var a in n)if("string"==typeof n[a]){var s=n[a].split(r);2===s.length&&e(s[0],s[1])}}var ta=new zn(0,0,""),ea="middle"===ta.align?"middle":"center";function ra(t,e,r){var i=t;function n(){var e=$n(t);if(null===e)throw new Error("Malformed timestamp: "+i);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function a(){t=t.replace(/^\s+/,"")}if(a(),e.startTime=n(),a(),"--\x3e"!==t.slice(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);t=t.slice(3),a(),e.endTime=n(),a(),function(t,e){var i=new Jn;Zn(t,(function(t,e){var n;switch(t){case"region":for(var a=r.length-1;a>=0;a--)if(r[a].id===e){i.set(t,r[a].region);break}break;case"vertical":i.alt(t,e,["rl","lr"]);break;case"line":n=e.split(","),i.integer(t,n[0]),i.percent(t,n[0])&&i.set("snapToLines",!1),i.alt(t,n[0],["auto"]),2===n.length&&i.alt("lineAlign",n[1],["start",ea,"end"]);break;case"position":n=e.split(","),i.percent(t,n[0]),2===n.length&&i.alt("positionAlign",n[1],["start",ea,"end","line-left","line-right","auto"]);break;case"size":i.percent(t,e);break;case"align":i.alt(t,e,["start",ea,"end","left","right"])}}),/:/,/\s/),e.region=i.get("region",null),e.vertical=i.get("vertical","");var n=i.get("line","auto");"auto"===n&&-1===ta.line&&(n=-1),e.line=n,e.lineAlign=i.get("lineAlign","start"),e.snapToLines=i.get("snapToLines",!0),e.size=i.get("size",100),e.align=i.get("align",ea);var a=i.get("position","auto");"auto"===a&&50===ta.position&&(a="start"===e.align||"left"===e.align?0:"end"===e.align||"right"===e.align?100:50),e.position=a}(t,e)}function ia(t){return t.replace(/<br(?: \/)?>/gi,"\n")}var na=function(){function t(){this.state="INITIAL",this.buffer="",this.decoder=new Qn,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}var e=t.prototype;return e.parse=function(t){var e=this;function r(){var t=e.buffer,r=0;for(t=ia(t);r<t.length&&"\r"!==t[r]&&"\n"!==t[r];)++r;var i=t.slice(0,r);return"\r"===t[r]&&++r,"\n"===t[r]&&++r,e.buffer=t.slice(r),i}t&&(e.buffer+=e.decoder.decode(t,{stream:!0}));try{var i="";if("INITIAL"===e.state){if(!/\r\n|\n/.test(e.buffer))return this;var n=(i=r()).match(/^()?WEBVTT([ \t].*)?$/);if(null==n||!n[0])throw new Error("Malformed WebVTT signature.");e.state="HEADER"}for(var a=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(a?a=!1:i=r(),e.state){case"HEADER":/:/.test(i)?Zn(i,(function(t,e){}),/:/):i||(e.state="ID");continue;case"NOTE":i||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){e.state="NOTE";break}if(!i)continue;if(e.cue=new zn(0,0,""),e.state="CUE",-1===i.indexOf("--\x3e")){e.cue.id=i;continue}case"CUE":if(!e.cue){e.state="BADCUE";continue}try{ra(i,e.cue,e.regionList)}catch(t){e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":var s=-1!==i.indexOf("--\x3e");if(!i||s&&(a=!0)){e.oncue&&e.cue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}if(null===e.cue)continue;e.cue.text&&(e.cue.text+="\n"),e.cue.text+=i;continue;case"BADCUE":i||(e.state="ID")}}}catch(t){"CUETEXT"===e.state&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state="INITIAL"===e.state?"BADWEBVTT":"BADCUE"}return this},e.flush=function(){var t=this;try{if((t.cue||"HEADER"===t.state)&&(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state||"BADWEBVTT"===t.state)throw new Error("Malformed WebVTT signature.")}catch(e){t.onparsingerror&&t.onparsingerror(e)}return t.onflush&&t.onflush(),this},t}(),aa=/\r\n|\n\r|\n|\r/g,sa=function(t,e,r){return void 0===r&&(r=0),t.slice(r,r+e.length)===e},oa=function(t){for(var e=5381,r=t.length;r;)e=33*e^t.charCodeAt(--r);return(e>>>0).toString()};function la(t,e,r){return oa(t.toString())+oa(e.toString())+oa(r)}function ua(t,e,r,i,n,a,s){var o,l,u,h=new na,d=pt(new Uint8Array(t)).trim().replace(aa,"\n").split("\n"),c=[],f=e?(o=e.baseTime,void 0===(l=e.timescale)&&(l=1),Ui(o,9e4,1/l)):0,g="00:00.000",v=0,m=0,p=!0;h.oncue=function(t){var a=r[i],s=r.ccOffset,o=(v-f)/9e4;if(null!=a&&a.new&&(void 0!==m?s=r.ccOffset=a.start:function(t,e,r){var i=t[e],n=t[i.prevCC];if(!n||!n.new&&i.new)return t.ccOffset=t.presentationOffset=i.start,void(i.new=!1);for(;null!=(a=n)&&a.new;){var a;t.ccOffset+=i.start-n.start,i.new=!1,n=t[(i=n).prevCC]}t.presentationOffset=r}(r,i,o)),o){if(!e)return void(u=new Error("Missing initPTS for VTT MPEGTS"));s=o-r.presentationOffset}var l=t.endTime-t.startTime,h=Vi(9e4*(t.startTime+s-m),9e4*n)/9e4;t.startTime=Math.max(h,0),t.endTime=Math.max(h+l,0);var d=t.text.trim();t.text=decodeURIComponent(encodeURIComponent(d)),t.id||(t.id=la(t.startTime,t.endTime,d)),t.endTime>0&&c.push(t)},h.onparsingerror=function(t){u=t},h.onflush=function(){u?s(u):a(c)},d.forEach((function(t){if(p){if(sa(t,"X-TIMESTAMP-MAP=")){p=!1,t.slice(16).split(",").forEach((function(t){sa(t,"LOCAL:")?g=t.slice(6):sa(t,"MPEGTS:")&&(v=parseInt(t.slice(7)))}));try{m=function(t){var e=parseInt(t.slice(-3)),r=parseInt(t.slice(-6,-4)),i=parseInt(t.slice(-9,-7)),n=t.length>9?parseInt(t.substring(0,t.indexOf(":"))):0;if(!(E(e)&&E(r)&&E(i)&&E(n)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+t);return e+=1e3*r,(e+=6e4*i)+36e5*n}(g)/1e3}catch(t){u=t}return}""===t&&(p=!1)}h.parse(t+"\n")})),h.flush()}var ha="stpp.ttml.im1t",da=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,ca=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,fa={left:"start",center:"center",right:"end",start:"start",end:"end"};function ga(t,e,r,i){var n=It(new Uint8Array(t),["mdat"]);if(0!==n.length){var a,s,l,u,h=n.map((function(t){return pt(t)})),d=(a=e.baseTime,s=1,void 0===(l=e.timescale)&&(l=1),void 0===u&&(u=!1),Ui(a,s,1/l,u));try{h.forEach((function(t){return r(function(t,e){var r=(new DOMParser).parseFromString(t,"text/xml").getElementsByTagName("tt")[0];if(!r)throw new Error("Invalid ttml");var i={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},n=Object.keys(i).reduce((function(t,e){return t[e]=r.getAttribute("ttp:"+e)||i[e],t}),{}),a="preserve"!==r.getAttribute("xml:space"),s=ma(va(r,"styling","style")),l=ma(va(r,"layout","region")),u=va(r,"body","[begin]");return[].map.call(u,(function(t){var r=pa(t,a);if(!r||!t.hasAttribute("begin"))return null;var i=Ea(t.getAttribute("begin"),n),u=Ea(t.getAttribute("dur"),n),h=Ea(t.getAttribute("end"),n);if(null===i)throw Ta(t);if(null===h){if(null===u)throw Ta(t);h=i+u}var d=new zn(i-e,h-e,r);d.id=la(d.startTime,d.endTime,d.text);var c=function(t,e,r){var i="http://www.w3.org/ns/ttml#styling",n=null,a=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],s=null!=t&&t.hasAttribute("style")?t.getAttribute("style"):null;return s&&r.hasOwnProperty(s)&&(n=r[s]),a.reduce((function(r,a){var s=ya(e,i,a)||ya(t,i,a)||ya(n,i,a);return s&&(r[a]=s),r}),{})}(l[t.getAttribute("region")],s[t.getAttribute("style")],s),f=c.textAlign;if(f){var g=fa[f];g&&(d.lineAlign=g),d.align=f}return o(d,c),d})).filter((function(t){return null!==t}))}(t,d))}))}catch(t){i(t)}}else i(new Error("Could not parse IMSC1 mdat"))}function va(t,e,r){var i=t.getElementsByTagName(e)[0];return i?[].slice.call(i.querySelectorAll(r)):[]}function ma(t){return t.reduce((function(t,e){var r=e.getAttribute("xml:id");return r&&(t[r]=e),t}),{})}function pa(t,e){return[].slice.call(t.childNodes).reduce((function(t,r,i){var n;return"br"===r.nodeName&&i?t+"\n":null!=(n=r.childNodes)&&n.length?pa(r,e):e?t+r.textContent.trim().replace(/\s+/g," "):t+r.textContent}),"")}function ya(t,e,r){return t&&t.hasAttributeNS(e,r)?t.getAttributeNS(e,r):null}function Ta(t){return new Error("Could not parse ttml timestamp "+t)}function Ea(t,e){if(!t)return null;var r=$n(t);return null===r&&(da.test(t)?r=function(t,e){var r=da.exec(t),i=(0|r[4])+(0|r[5])/e.subFrameRate;return 3600*(0|r[1])+60*(0|r[2])+(0|r[3])+i/e.frameRate}(t,e):ca.test(t)&&(r=function(t,e){var r=ca.exec(t),i=Number(r[1]);switch(r[2]){case"h":return 3600*i;case"m":return 60*i;case"ms":return 1e3*i;case"f":return i/e.frameRate;case"t":return i/e.tickRate}return i}(t,e))),r}var Sa=function(){function t(t){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this.captionsProperties=void 0,this.hls=t,this.config=t.config,this.Cues=t.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){var e=new Xn(this,"textTrack1"),r=new Xn(this,"textTrack2"),i=new Xn(this,"textTrack3"),n=new Xn(this,"textTrack4");this.cea608Parser1=new Wn(1,e,r),this.cea608Parser2=new Wn(3,i,n)}t.on(S.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(S.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(S.MANIFEST_LOADING,this.onManifestLoading,this),t.on(S.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(S.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.on(S.FRAG_LOADING,this.onFragLoading,this),t.on(S.FRAG_LOADED,this.onFragLoaded,this),t.on(S.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),t.on(S.FRAG_DECRYPTED,this.onFragDecrypted,this),t.on(S.INIT_PTS_FOUND,this.onInitPtsFound,this),t.on(S.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),t.on(S.BUFFER_FLUSHING,this.onBufferFlushing,this)}var e=t.prototype;return e.destroy=function(){var t=this.hls;t.off(S.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(S.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(S.MANIFEST_LOADING,this.onManifestLoading,this),t.off(S.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(S.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.off(S.FRAG_LOADING,this.onFragLoading,this),t.off(S.FRAG_LOADED,this.onFragLoaded,this),t.off(S.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),t.off(S.FRAG_DECRYPTED,this.onFragDecrypted,this),t.off(S.INIT_PTS_FOUND,this.onInitPtsFound,this),t.off(S.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),t.off(S.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null},e.addCues=function(t,e,r,i,n){for(var a,s,o,l,u=!1,h=n.length;h--;){var d=n[h],c=(a=d[0],s=d[1],o=e,l=r,Math.min(s,l)-Math.max(a,o));if(c>=0&&(d[0]=Math.min(d[0],e),d[1]=Math.max(d[1],r),u=!0,c/(r-e)>.5))return}if(u||n.push([e,r]),this.config.renderTextTracksNatively){var f=this.captionsTracks[t];this.Cues.newCue(f,e,r,i)}else{var g=this.Cues.newCue(null,e,r,i);this.hls.trigger(S.CUES_PARSED,{type:"captions",cues:g,track:t})}},e.onInitPtsFound=function(t,e){var r=this,i=e.frag,n=e.id,a=e.initPTS,s=e.timescale,o=this.unparsedVttFrags;"main"===n&&(this.initPTS[i.cc]={baseTime:a,timescale:s}),o.length&&(this.unparsedVttFrags=[],o.forEach((function(t){r.onFragLoaded(S.FRAG_LOADED,t)})))},e.getExistingTrack=function(t){var e=this.media;if(e)for(var r=0;r<e.textTracks.length;r++){var i=e.textTracks[r];if(i[t])return i}return null},e.createCaptionsTrack=function(t){this.config.renderTextTracksNatively?this.createNativeTrack(t):this.createNonNativeTrack(t)},e.createNativeTrack=function(t){if(!this.captionsTracks[t]){var e=this.captionsProperties,r=this.captionsTracks,i=this.media,n=e[t],a=n.label,s=n.languageCode,o=this.getExistingTrack(t);if(o)r[t]=o,Le(r[t]),Ee(r[t],i);else{var l=this.createTextTrack("captions",a,s);l&&(l[t]=!0,r[t]=l)}}},e.createNonNativeTrack=function(t){if(!this.nonNativeCaptionsTracks[t]){var e=this.captionsProperties[t];if(e){var r={_id:t,label:e.label,kind:"captions",default:!!e.media&&!!e.media.default,closedCaptions:e.media};this.nonNativeCaptionsTracks[t]=r,this.hls.trigger(S.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[r]})}}},e.createTextTrack=function(t,e,r){var i=this.media;if(i)return i.addTextTrack(t,e,r)},e.onMediaAttaching=function(t,e){this.media=e.media,this._cleanTracks()},e.onMediaDetaching=function(){var t=this.captionsTracks;Object.keys(t).forEach((function(e){Le(t[e]),delete t[e]})),this.nonNativeCaptionsTracks={}},e.onManifestLoading=function(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},e._cleanTracks=function(){var t=this.media;if(t){var e=t.textTracks;if(e)for(var r=0;r<e.length;r++)Le(e[r])}},e.onSubtitleTracksUpdated=function(t,e){var r=this,i=e.subtitleTracks||[],n=i.some((function(t){return t.textCodec===ha}));if(this.config.enableWebVTT||n&&this.config.enableIMSC1){if(Tn(this.tracks,i))return void(this.tracks=i);if(this.textTracks=[],this.tracks=i,this.config.renderTextTracksNatively){var a=this.media?this.media.textTracks:null;this.tracks.forEach((function(t,e){var i;if(a&&e<a.length){for(var n=null,s=0;s<a.length;s++)if(La(a[s],t)){n=a[s];break}n&&(i=n)}if(i)Le(i);else{var o=r._captionsOrSubtitlesFromCharacteristics(t);(i=r.createTextTrack(o,t.name,t.lang))&&(i.mode="disabled")}i&&(i.groupId=t.groupId,r.textTracks.push(i))}))}else if(this.tracks.length){var s=this.tracks.map((function(t){return{label:t.name,kind:t.type.toLowerCase(),default:t.default,subtitleTrack:t}}));this.hls.trigger(S.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:s})}}},e._captionsOrSubtitlesFromCharacteristics=function(t){if(t.attrs.CHARACTERISTICS){var e=/transcribes-spoken-dialog/gi.test(t.attrs.CHARACTERISTICS),r=/describes-music-and-sound/gi.test(t.attrs.CHARACTERISTICS);if(e&&r)return"captions"}return"subtitles"},e.onManifestLoaded=function(t,e){var r=this;this.config.enableCEA708Captions&&e.captions&&e.captions.forEach((function(t){var e=/(?:CC|SERVICE)([1-4])/.exec(t.instreamId);if(e){var i="textTrack"+e[1],n=r.captionsProperties[i];n&&(n.label=t.name,t.lang&&(n.languageCode=t.lang),n.media=t)}}))},e.closedCaptionsForLevel=function(t){var e=this.hls.levels[t.level];return null==e?void 0:e.attrs["CLOSED-CAPTIONS"]},e.onFragLoading=function(t,e){var r=this.cea608Parser1,i=this.cea608Parser2,n=this.lastSn,a=this.lastPartIndex;if(this.enabled&&r&&i&&e.frag.type===ge){var s,o,l=e.frag.sn,u=null!=(s=null==e||null==(o=e.part)?void 0:o.index)?s:-1;l===n+1||l===n&&u===a+1||(r.reset(),i.reset()),this.lastSn=l,this.lastPartIndex=u}},e.onFragLoaded=function(t,e){var r=e.frag,i=e.payload;if(r.type===me)if(i.byteLength){var n=r.decryptdata,a="stats"in e;if(null==n||!n.encrypted||a){var s=this.tracks[r.level],o=this.vttCCs;o[r.cc]||(o[r.cc]={start:r.start,prevCC:this.prevCC,new:!0},this.prevCC=r.cc),s&&s.textCodec===ha?this._parseIMSC1(r,i):this._parseVTTs(e)}}else this.hls.trigger(S.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:new Error("Empty subtitle payload")})},e._parseIMSC1=function(t,e){var r=this,i=this.hls;ga(e,this.initPTS[t.cc],(function(e){r._appendCues(e,t.level),i.trigger(S.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})}),(function(e){w.log("Failed to parse IMSC1: "+e),i.trigger(S.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t,error:e})}))},e._parseVTTs=function(t){var e,r=this,i=t.frag,n=t.payload,a=this.initPTS,s=this.unparsedVttFrags,o=a.length-1;if(a[i.cc]||-1!==o){var l=this.hls;ua(null!=(e=i.initSegment)&&e.data?xt(i.initSegment.data,new Uint8Array(n)):n,this.initPTS[i.cc],this.vttCCs,i.cc,i.start,(function(t){r._appendCues(t,i.level),l.trigger(S.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:i})}),(function(e){var a="Missing initPTS for VTT MPEGTS"===e.message;a?s.push(t):r._fallbackToIMSC1(i,n),w.log("Failed to parse VTT cue: "+e),a&&o>i.cc||l.trigger(S.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:e})}))}else s.push(t)},e._fallbackToIMSC1=function(t,e){var r=this,i=this.tracks[t.level];i.textCodec||ga(e,this.initPTS[t.cc],(function(){i.textCodec=ha,r._parseIMSC1(t,e)}),(function(){i.textCodec="wvtt"}))},e._appendCues=function(t,e){var r=this.hls;if(this.config.renderTextTracksNatively){var i=this.textTracks[e];if(!i||"disabled"===i.mode)return;t.forEach((function(t){return Se(i,t)}))}else{var n=this.tracks[e];if(!n)return;var a=n.default?"default":"subtitles"+e;r.trigger(S.CUES_PARSED,{type:"subtitles",cues:t,track:a})}},e.onFragDecrypted=function(t,e){e.frag.type===me&&this.onFragLoaded(S.FRAG_LOADED,e)},e.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},e.onFragParsingUserdata=function(t,e){var r=this.cea608Parser1,i=this.cea608Parser2;if(this.enabled&&r&&i){var n=e.frag,a=e.samples;if(n.type!==ge||"NONE"!==this.closedCaptionsForLevel(n))for(var s=0;s<a.length;s++){var o=a[s].bytes;if(o){var l=this.extractCea608Data(o);r.addData(a[s].pts,l[0]),i.addData(a[s].pts,l[1])}}}},e.onBufferFlushing=function(t,e){var r=e.startOffset,i=e.endOffset,n=e.endOffsetSubtitles,a=e.type,s=this.media;if(s&&!(s.currentTime<i)){if(!a||"video"===a){var o=this.captionsTracks;Object.keys(o).forEach((function(t){return Re(o[t],r,i)}))}if(this.config.renderTextTracksNatively&&0===r&&void 0!==n){var l=this.textTracks;Object.keys(l).forEach((function(t){return Re(l[t],r,n)}))}}},e.extractCea608Data=function(t){for(var e=[[],[]],r=31&t[0],i=2,n=0;n<r;n++){var a=t[i++],s=127&t[i++],o=127&t[i++];if((0!==s||0!==o)&&0!=(4&a)){var l=3&a;0!==l&&1!==l||(e[l].push(s),e[l].push(o))}}return e},t}();function La(t,e){return!!t&&t.label===e.name&&!(t.textTrack1||t.textTrack2)}var Ra=function(){function t(t){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=t,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}var e=t.prototype;return e.setStreamController=function(t){this.streamController=t},e.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},e.registerListeners=function(){var t=this.hls;t.on(S.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),t.on(S.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(S.MANIFEST_PARSED,this.onManifestParsed,this),t.on(S.BUFFER_CODECS,this.onBufferCodecs,this),t.on(S.MEDIA_DETACHING,this.onMediaDetaching,this)},e.unregisterListener=function(){var t=this.hls;t.off(S.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),t.off(S.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(S.MANIFEST_PARSED,this.onManifestParsed,this),t.off(S.BUFFER_CODECS,this.onBufferCodecs,this),t.off(S.MEDIA_DETACHING,this.onMediaDetaching,this)},e.onFpsDropLevelCapping=function(t,e){var r=this.hls.levels[e.droppedLevel];this.isLevelAllowed(r)&&this.restrictedLevels.push({bitrate:r.bitrate,height:r.height,width:r.width})},e.onMediaAttaching=function(t,e){this.media=e.media instanceof HTMLVideoElement?e.media:null,this.clientRect=null},e.onManifestParsed=function(t,e){var r=this.hls;this.restrictedLevels=[],this.firstLevel=e.firstLevel,r.config.capLevelToPlayerSize&&e.video&&this.startCapping()},e.onBufferCodecs=function(t,e){this.hls.config.capLevelToPlayerSize&&e.video&&this.startCapping()},e.onMediaDetaching=function(){this.stopCapping()},e.detectPlayerSize=function(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){var t=this.hls.levels;if(t.length){var e=this.hls;e.autoLevelCapping=this.getMaxLevel(t.length-1),e.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=e.autoLevelCapping}}},e.getMaxLevel=function(e){var r=this,i=this.hls.levels;if(!i.length)return-1;var n=i.filter((function(t,i){return r.isLevelAllowed(t)&&i<=e}));return this.clientRect=null,t.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)},e.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},e.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},e.getDimensions=function(){if(this.clientRect)return this.clientRect;var t=this.media,e={width:0,height:0};if(t){var r=t.getBoundingClientRect();e.width=r.width,e.height=r.height,e.width||e.height||(e.width=r.right-r.left||t.width||0,e.height=r.bottom-r.top||t.height||0)}return this.clientRect=e,e},e.isLevelAllowed=function(t){return!this.restrictedLevels.some((function(e){return t.bitrate===e.bitrate&&t.width===e.width&&t.height===e.height}))},t.getMaxLevelByMediaSize=function(t,e,r){if(null==t||!t.length)return-1;for(var i,n,a=t.length-1,s=0;s<t.length;s+=1){var o=t[s];if((o.width>=e||o.height>=r)&&(i=o,!(n=t[s+1])||i.width!==n.width||i.height!==n.height)){a=s;break}}return a},a(t,[{key:"mediaWidth",get:function(){return this.getDimensions().width*this.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*this.contentScaleFactor}},{key:"contentScaleFactor",get:function(){var t=1;if(!this.hls.config.ignoreDevicePixelRatio)try{t=self.devicePixelRatio}catch(t){}return t}}]),t}(),Aa=function(){function t(t){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=t,this.registerListeners()}var e=t.prototype;return e.setStreamController=function(t){this.streamController=t},e.registerListeners=function(){this.hls.on(S.MEDIA_ATTACHING,this.onMediaAttaching,this)},e.unregisterListeners=function(){this.hls.off(S.MEDIA_ATTACHING,this.onMediaAttaching,this)},e.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},e.onMediaAttaching=function(t,e){var r=this.hls.config;if(r.capLevelOnFPSDrop){var i=e.media instanceof self.HTMLVideoElement?e.media:null;this.media=i,i&&"function"==typeof i.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),r.fpsDroppedMonitoringPeriod)}},e.checkFPS=function(t,e,r){var i=performance.now();if(e){if(this.lastTime){var n=i-this.lastTime,a=r-this.lastDroppedFrames,s=e-this.lastDecodedFrames,o=1e3*a/n,l=this.hls;if(l.trigger(S.FPS_DROP,{currentDropped:a,currentDecoded:s,totalDroppedFrames:r}),o>0&&a>l.config.fpsDroppedMonitoringThreshold*s){var u=l.currentLevel;w.warn("drop FPS ratio greater than max allowed value for currentLevel: "+u),u>0&&(-1===l.autoLevelCapping||l.autoLevelCapping>=u)&&(u-=1,l.trigger(S.FPS_DROP_LEVEL_CAPPING,{level:u,droppedLevel:l.currentLevel}),l.autoLevelCapping=u,this.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=r,this.lastDecodedFrames=e}},e.checkFPSInterval=function(){var t=this.media;if(t)if(this.isVideoPlaybackQualityAvailable){var e=t.getVideoPlaybackQuality();this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)},t}(),ka="[eme]",ba=function(){function t(e){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=t.CDMCleanupPromise?[t.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=w.debug.bind(w,ka),this.log=w.log.bind(w,ka),this.warn=w.warn.bind(w,ka),this.error=w.error.bind(w,ka),this.hls=e,this.config=e.config,this.registerListeners()}var e=t.prototype;return e.destroy=function(){this.unregisterListeners(),this.onMediaDetached();var t=this.config;t.requestMediaKeySystemAccessFunc=null,t.licenseXhrSetup=t.licenseResponseCallback=void 0,t.drmSystems=t.drmSystemOptions={},this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null,this.config=null},e.registerListeners=function(){this.hls.on(S.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(S.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(S.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(S.MANIFEST_LOADED,this.onManifestLoaded,this)},e.unregisterListeners=function(){this.hls.off(S.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(S.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(S.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(S.MANIFEST_LOADED,this.onManifestLoaded,this)},e.getLicenseServerUrl=function(t){var e=this.config,r=e.drmSystems,i=e.widevineLicenseUrl,n=r[t];if(n)return n.licenseUrl;if(t===j.WIDEVINE&&i)return i;throw new Error('no license server URL configured for key-system "'+t+'"')},e.getServerCertificateUrl=function(t){var e=this.config.drmSystems[t];if(e)return e.serverCertificateUrl;this.log('No Server Certificate in config.drmSystems["'+t+'"]')},e.attemptKeySystemAccess=function(t){var e=this,r=this.hls.levels,i=function(t,e,r){return!!t&&r.indexOf(t)===e},n=r.map((function(t){return t.audioCodec})).filter(i),a=r.map((function(t){return t.videoCodec})).filter(i);return n.length+a.length===0&&a.push("avc1.42e01e"),new Promise((function(r,i){!function t(s){var o=s.shift();e.getMediaKeysPromise(o,n,a).then((function(t){return r({keySystem:o,mediaKeys:t})})).catch((function(e){s.length?t(s):i(e instanceof Da?e:new Da({type:L.KEY_SYSTEM_ERROR,details:R.KEY_SYSTEM_NO_ACCESS,error:e,fatal:!0},e.message))}))}(t)}))},e.requestMediaKeySystemAccess=function(t,e){var r=this.config.requestMediaKeySystemAccessFunc;if("function"!=typeof r){var i="Configured requestMediaKeySystemAccess is not a function "+r;return null===et&&"http:"===self.location.protocol&&(i="navigator.requestMediaKeySystemAccess is not available over insecure protocol "+location.protocol),Promise.reject(new Error(i))}return r(t,e)},e.getMediaKeysPromise=function(t,e,r){var i=this,n=function(t,e,r,i){var n;switch(t){case j.FAIRPLAY:n=["cenc","sinf"];break;case j.WIDEVINE:case j.PLAYREADY:n=["cenc"];break;case j.CLEARKEY:n=["cenc","keyids"];break;default:throw new Error("Unknown key-system: "+t)}return function(t,e,r,i){return[{initDataTypes:t,persistentState:i.persistentState||"not-allowed",distinctiveIdentifier:i.distinctiveIdentifier||"not-allowed",sessionTypes:i.sessionTypes||[i.sessionType||"temporary"],audioCapabilities:e.map((function(t){return{contentType:'audio/mp4; codecs="'+t+'"',robustness:i.audioRobustness||"",encryptionScheme:i.audioEncryptionScheme||null}})),videoCapabilities:r.map((function(t){return{contentType:'video/mp4; codecs="'+t+'"',robustness:i.videoRobustness||"",encryptionScheme:i.videoEncryptionScheme||null}}))}]}(n,e,r,i)}(t,e,r,this.config.drmSystemOptions),a=this.keySystemAccessPromises[t],s=null==a?void 0:a.keySystemAccess;if(!s){this.log('Requesting encrypted media "'+t+'" key-system access with config: '+JSON.stringify(n)),s=this.requestMediaKeySystemAccess(t,n);var o=this.keySystemAccessPromises[t]={keySystemAccess:s};return s.catch((function(e){i.log('Failed to obtain access to key-system "'+t+'": '+e)})),s.then((function(e){i.log('Access for key-system "'+e.keySystem+'" obtained');var r=i.fetchServerCertificate(t);return i.log('Create media-keys for "'+t+'"'),o.mediaKeys=e.createMediaKeys().then((function(e){return i.log('Media-keys created for "'+t+'"'),r.then((function(r){return r?i.setMediaKeysServerCertificate(e,t,r):e}))})),o.mediaKeys.catch((function(e){i.error('Failed to create media-keys for "'+t+'"}: '+e)})),o.mediaKeys}))}return s.then((function(){return a.mediaKeys}))},e.createMediaKeySessionContext=function(t){var e=t.decryptdata,r=t.keySystem,i=t.mediaKeys;this.log('Creating key-system session "'+r+'" keyId: '+Tt(e.keyId||[]));var n=i.createSession(),a={decryptdata:e,keySystem:r,mediaKeys:i,mediaKeysSession:n,keyStatus:"status-pending"};return this.mediaKeySessions.push(a),a},e.renewKeySession=function(t){var e=t.decryptdata;if(e.pssh){var r=this.createMediaKeySessionContext(t),i=this.getKeyIdString(e);this.keyIdToKeySessionPromise[i]=this.generateRequestWithPreferredKeySession(r,"cenc",e.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(t)},e.getKeyIdString=function(t){if(!t)throw new Error("Could not read keyId of undefined decryptdata");if(null===t.keyId)throw new Error("keyId is null");return Tt(t.keyId)},e.updateKeySession=function(t,e){var r,i=t.mediaKeysSession;return this.log('Updating key-session "'+i.sessionId+'" for keyID '+Tt((null==(r=t.decryptdata)?void 0:r.keyId)||[])+"\n      } (data length: "+(e?e.byteLength:e)+")"),i.update(e)},e.selectKeySystemFormat=function(t){var e=Object.keys(t.levelkeys||{});return this.keyFormatPromise||(this.log("Selecting key-system from fragment (sn: "+t.sn+" "+t.type+": "+t.level+") key formats "+e.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(e)),this.keyFormatPromise},e.getKeyFormatPromise=function(t){var e=this;return new Promise((function(r,i){var n=tt(e.config),a=t.map($).filter((function(t){return!!t&&-1!==n.indexOf(t)}));return e.getKeySystemSelectionPromise(a).then((function(t){var e=t.keySystem,n=Z(e);n?r(n):i(new Error('Unable to find format for key-system "'+e+'"'))})).catch(i)}))},e.loadKey=function(t){var e=this,r=t.keyInfo.decryptdata,i=this.getKeyIdString(r),n="(keyId: "+i+' format: "'+r.keyFormat+'" method: '+r.method+" uri: "+r.uri+")";this.log("Starting session for key "+n);var a=this.keyIdToKeySessionPromise[i];return a||(a=this.keyIdToKeySessionPromise[i]=this.getKeySystemForKeyPromise(r).then((function(i){var a=i.keySystem,s=i.mediaKeys;return e.throwIfDestroyed(),e.log("Handle encrypted media sn: "+t.frag.sn+" "+t.frag.type+": "+t.frag.level+" using key "+n),e.attemptSetMediaKeys(a,s).then((function(){e.throwIfDestroyed();var t=e.createMediaKeySessionContext({keySystem:a,mediaKeys:s,decryptdata:r});return e.generateRequestWithPreferredKeySession(t,"cenc",r.pssh,"playlist-key")}))}))).catch((function(t){return e.handleError(t)})),a},e.throwIfDestroyed=function(t){if(!this.hls)throw new Error("invalid state")},e.handleError=function(t){this.hls&&(this.error(t.message),t instanceof Da?this.hls.trigger(S.ERROR,t.data):this.hls.trigger(S.ERROR,{type:L.KEY_SYSTEM_ERROR,details:R.KEY_SYSTEM_NO_KEYS,error:t,fatal:!0}))},e.getKeySystemForKeyPromise=function(t){var e=this.getKeyIdString(t),r=this.keyIdToKeySessionPromise[e];if(!r){var i=$(t.keyFormat),n=i?[i]:tt(this.config);return this.attemptKeySystemAccess(n)}return r},e.getKeySystemSelectionPromise=function(t){if(t.length||(t=tt(this.config)),0===t.length)throw new Da({type:L.KEY_SYSTEM_ERROR,details:R.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},"Missing key-system license configuration options "+JSON.stringify({drmSystems:this.config.drmSystems}));return this.attemptKeySystemAccess(t)},e._onMediaEncrypted=function(t){var e=this,r=t.initDataType,i=t.initData;if(this.debug('"'+t.type+'" event: init data type: "'+r+'"'),null!==i){var n,a;if("sinf"===r&&this.config.drmSystems[j.FAIRPLAY]){var s=Rt(new Uint8Array(i));try{var o=V(JSON.parse(s).sinf),l=_t(new Uint8Array(o));if(!l)return;n=l.subarray(8,24),a=j.FAIRPLAY}catch(t){return void this.warn('Failed to parse sinf "encrypted" event message initData')}}else{var u=function(t){if(!(t instanceof ArrayBuffer)||t.byteLength<32)return null;var e={version:0,systemId:"",kids:null,data:null},r=new DataView(t),i=r.getUint32(0);if(t.byteLength!==i&&i>44)return null;if(1886614376!==r.getUint32(4))return null;if(e.version=r.getUint32(8)>>>24,e.version>1)return null;e.systemId=Tt(new Uint8Array(t,12,16));var n=r.getUint32(28);if(0===e.version){if(i-32<n)return null;e.data=new Uint8Array(t,32,n)}else if(1===e.version){e.kids=[];for(var a=0;a<n;a++)e.kids.push(new Uint8Array(t,32+16*a,16))}return e}(i);if(null===u)return;0===u.version&&u.systemId===J&&u.data&&(n=u.data.subarray(8,24)),a=function(t){if(t===J)return j.WIDEVINE}(u.systemId)}if(a&&n){for(var h=Tt(n),d=this.keyIdToKeySessionPromise,c=this.mediaKeySessions,f=d[h],g=function(){var t=c[v],a=t.decryptdata;if(a.pssh||!a.keyId)return"continue";var s=Tt(a.keyId);return h===s||-1!==a.uri.replace(/-/g,"").indexOf(h)?(f=d[s],delete d[s],a.pssh=new Uint8Array(i),a.keyId=n,f=d[h]=f.then((function(){return e.generateRequestWithPreferredKeySession(t,r,i,"encrypted-event-key-match")})),"break"):void 0},v=0;v<c.length;v++){var m=g();if("continue"!==m&&"break"===m)break}f||(f=d[h]=this.getKeySystemSelectionPromise([a]).then((function(t){var a,s=t.keySystem,o=t.mediaKeys;e.throwIfDestroyed();var l=new Gt("ISO-23001-7",h,null!=(a=Z(s))?a:"");return l.pssh=new Uint8Array(i),l.keyId=n,e.attemptSetMediaKeys(s,o).then((function(){e.throwIfDestroyed();var t=e.createMediaKeySessionContext({decryptdata:l,keySystem:s,mediaKeys:o});return e.generateRequestWithPreferredKeySession(t,r,i,"encrypted-event-no-match")}))}))),f.catch((function(t){return e.handleError(t)}))}}},e._onWaitingForKey=function(t){this.log('"'+t.type+'" event')},e.attemptSetMediaKeys=function(t,e){var r=this,i=this.setMediaKeysQueue.slice();this.log('Setting media-keys for "'+t+'"');var n=Promise.all(i).then((function(){if(!r.media)throw new Error("Attempted to set mediaKeys without media element attached");return r.media.setMediaKeys(e)}));return this.setMediaKeysQueue.push(n),n.then((function(){r.log('Media-keys set for "'+t+'"'),i.push(n),r.setMediaKeysQueue=r.setMediaKeysQueue.filter((function(t){return-1===i.indexOf(t)}))}))},e.generateRequestWithPreferredKeySession=function(t,e,r,i){var n,a,s=this,o=null==(n=this.config.drmSystems)||null==(a=n[t.keySystem])?void 0:a.generateRequest;if(o)try{var l=o.call(this.hls,e,r,t);if(!l)throw new Error("Invalid response from configured generateRequest filter");e=l.initDataType,r=t.decryptdata.pssh=l.initData?new Uint8Array(l.initData):null}catch(t){var u;if(this.warn(t.message),null!=(u=this.hls)&&u.config.debug)throw t}if(null===r)return this.log('Skipping key-session request for "'+i+'" (no initData)'),Promise.resolve(t);var h=this.getKeyIdString(t.decryptdata);this.log('Generating key-session request for "'+i+'": '+h+" (init data type: "+e+" length: "+(r?r.byteLength:null)+")");var d=new an;t.mediaKeysSession.onmessage=function(e){var r=t.mediaKeysSession;if(r){var i=e.messageType,n=e.message;s.log('"'+i+'" message event for session "'+r.sessionId+'" message size: '+n.byteLength),"license-request"===i||"license-renewal"===i?s.renewLicense(t,n).catch((function(t){s.handleError(t),d.emit("error",t)})):"license-release"===i?t.keySystem===j.FAIRPLAY&&(s.updateKeySession(t,W("acknowledged")),s.removeSession(t)):s.warn('unhandled media key message type "'+i+'"')}else d.emit("error",new Error("invalid state"))},t.mediaKeysSession.onkeystatuseschange=function(e){if(t.mediaKeysSession){s.onKeyStatusChange(t);var r=t.keyStatus;d.emit("keyStatus",r),"expired"===r&&(s.warn(t.keySystem+" expired for key "+h),s.renewKeySession(t))}else d.emit("error",new Error("invalid state"))};var c=new Promise((function(t,e){d.on("error",e),d.on("keyStatus",(function(r){r.startsWith("usable")?t():"output-restricted"===r?e(new Da({type:L.KEY_SYSTEM_ERROR,details:R.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):"internal-error"===r?e(new Da({type:L.KEY_SYSTEM_ERROR,details:R.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},'key status changed to "'+r+'"')):"expired"===r?e(new Error("key expired while generating request")):s.warn('unhandled key status change "'+r+'"')}))}));return t.mediaKeysSession.generateRequest(e,r).then((function(){var e;s.log('Request generated for key-session "'+(null==(e=t.mediaKeysSession)?void 0:e.sessionId)+'" keyId: '+h)})).catch((function(t){throw new Da({type:L.KEY_SYSTEM_ERROR,details:R.KEY_SYSTEM_NO_SESSION,error:t,fatal:!1},"Error generating key-session request: "+t)})).then((function(){return c})).catch((function(e){throw d.removeAllListeners(),s.removeSession(t),e})).then((function(){return d.removeAllListeners(),t}))},e.onKeyStatusChange=function(t){var e=this;t.mediaKeysSession.keyStatuses.forEach((function(r,i){e.log('key status change "'+r+'" for keyStatuses keyId: '+Tt("buffer"in i?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i))+" session keyId: "+Tt(new Uint8Array(t.decryptdata.keyId||[]))+" uri: "+t.decryptdata.uri),t.keyStatus=r}))},e.fetchServerCertificate=function(t){var e=this.config,r=new(0,e.loader)(e),n=this.getServerCertificateUrl(t);return n?(this.log('Fetching serverCertificate for "'+t+'"'),new Promise((function(a,s){var o={responseType:"arraybuffer",url:n},l=e.certLoadPolicy.default,u={loadPolicy:l,timeout:l.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},h={onSuccess:function(t,e,r,i){a(t.data)},onError:function(e,r,a,l){s(new Da({type:L.KEY_SYSTEM_ERROR,details:R.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:a,response:i({url:o.url,data:void 0},e)},'"'+t+'" certificate request failed ('+n+"). Status: "+e.code+" ("+e.text+")"))},onTimeout:function(e,r,i){s(new Da({type:L.KEY_SYSTEM_ERROR,details:R.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:i,response:{url:o.url,data:void 0}},'"'+t+'" certificate request timed out ('+n+")"))},onAbort:function(t,e,r){s(new Error("aborted"))}};r.load(o,u,h)}))):Promise.resolve()},e.setMediaKeysServerCertificate=function(t,e,r){var i=this;return new Promise((function(n,a){t.setServerCertificate(r).then((function(a){i.log("setServerCertificate "+(a?"success":"not supported by CDM")+" ("+(null==r?void 0:r.byteLength)+') on "'+e+'"'),n(t)})).catch((function(t){a(new Da({type:L.KEY_SYSTEM_ERROR,details:R.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:t,fatal:!0},t.message))}))}))},e.renewLicense=function(t,e){var r=this;return this.requestLicense(t,new Uint8Array(e)).then((function(e){return r.updateKeySession(t,new Uint8Array(e)).catch((function(t){throw new Da({type:L.KEY_SYSTEM_ERROR,details:R.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:t,fatal:!0},t.message)}))}))},e.setupLicenseXHR=function(t,e,r,i){var n=this,a=this.config.licenseXhrSetup;return a?Promise.resolve().then((function(){if(!r.decryptdata)throw new Error("Key removed");return a.call(n.hls,t,e,r,i)})).catch((function(s){if(!r.decryptdata)throw s;return t.open("POST",e,!0),a.call(n.hls,t,e,r,i)})).then((function(r){return t.readyState||t.open("POST",e,!0),{xhr:t,licenseChallenge:r||i}})):(t.open("POST",e,!0),Promise.resolve({xhr:t,licenseChallenge:i}))},e.requestLicense=function(t,e){var r=this,i=this.config.keyLoadPolicy.default;return new Promise((function(n,a){var s=r.getLicenseServerUrl(t.keySystem);r.log("Sending license request to URL: "+s);var o=new XMLHttpRequest;o.responseType="arraybuffer",o.onreadystatechange=function(){if(!r.hls||!t.mediaKeysSession)return a(new Error("invalid state"));if(4===o.readyState)if(200===o.status){r._requestLicenseFailureCount=0;var l=o.response;r.log("License received "+(l instanceof ArrayBuffer?l.byteLength:l));var u=r.config.licenseResponseCallback;if(u)try{l=u.call(r.hls,o,s,t)}catch(t){r.error(t)}n(l)}else{var h=i.errorRetry,d=h?h.maxNumRetry:0;if(r._requestLicenseFailureCount++,r._requestLicenseFailureCount>d||o.status>=400&&o.status<500)a(new Da({type:L.KEY_SYSTEM_ERROR,details:R.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:o,response:{url:s,data:void 0,code:o.status,text:o.statusText}},"License Request XHR failed ("+s+"). Status: "+o.status+" ("+o.statusText+")"));else{var c=d-r._requestLicenseFailureCount+1;r.warn("Retrying license request, "+c+" attempts left"),r.requestLicense(t,e).then(n,a)}}},t.licenseXhr&&t.licenseXhr.readyState!==XMLHttpRequest.DONE&&t.licenseXhr.abort(),t.licenseXhr=o,r.setupLicenseXHR(o,s,t,e).then((function(t){var e=t.xhr,r=t.licenseChallenge;e.send(r)}))}))},e.onMediaAttached=function(t,e){if(this.config.emeEnabled){var r=e.media;this.media=r,r.addEventListener("encrypted",this.onMediaEncrypted),r.addEventListener("waitingforkey",this.onWaitingForKey)}},e.onMediaDetached=function(){var e=this,r=this.media,i=this.mediaKeySessions;r&&(r.removeEventListener("encrypted",this.onMediaEncrypted),r.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},Gt.clearKeyUriToKeyIdMap();var n=i.length;t.CDMCleanupPromise=Promise.all(i.map((function(t){return e.removeSession(t)})).concat(null==r?void 0:r.setMediaKeys(null).catch((function(t){e.log("Could not clear media keys: "+t+". media.src: "+(null==r?void 0:r.src))})))).then((function(){n&&(e.log("finished closing key sessions and clearing media keys"),i.length=0)})).catch((function(t){e.log("Could not close sessions and clear media keys: "+t+". media.src: "+(null==r?void 0:r.src))}))},e.onManifestLoading=function(){this.keyFormatPromise=null},e.onManifestLoaded=function(t,e){var r=e.sessionKeys;if(r&&this.config.emeEnabled&&!this.keyFormatPromise){var i=r.reduce((function(t,e){return-1===t.indexOf(e.keyFormat)&&t.push(e.keyFormat),t}),[]);this.log("Selecting key-system from session-keys "+i.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(i)}},e.removeSession=function(t){var e=this,r=t.mediaKeysSession,i=t.licenseXhr;if(r){this.log("Remove licenses and keys and close session "+r.sessionId),r.onmessage=null,r.onkeystatuseschange=null,i&&i.readyState!==XMLHttpRequest.DONE&&i.abort(),t.mediaKeysSession=t.decryptdata=t.licenseXhr=void 0;var n=this.mediaKeySessions.indexOf(t);return n>-1&&this.mediaKeySessions.splice(n,1),r.remove().catch((function(t){e.log("Could not remove session: "+t)})).then((function(){return r.close()})).catch((function(t){e.log("Could not close session: "+t)}))}},t}();ba.CDMCleanupPromise=void 0;var Da=function(t){function e(e,r){var i;return(i=t.call(this,r)||this).data=void 0,e.error||(e.error=new Error(r)),i.data=e,e.err=e.error,i}return l(e,t),e}(f(Error)),Ia="m",wa="a",Ca="v",_a="av",Pa="i",xa="tt",Fa=function(){function t(e){var r=this;this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=function(){r.initialized&&(r.starved=!0),r.buffering=!0},this.onPlaying=function(){r.initialized||(r.initialized=!0),r.buffering=!1},this.applyPlaylistData=function(t){try{r.apply(t,{ot:Ia,su:!r.initialized})}catch(t){w.warn("Could not generate manifest CMCD data.",t)}},this.applyFragmentData=function(t){try{var e=t.frag,i=r.hls.levels[e.level],n=r.getObjectType(e),a={d:1e3*e.duration,ot:n};n!==Ca&&n!==wa&&n!=_a||(a.br=i.bitrate/1e3,a.tb=r.getTopBandwidth(n)/1e3,a.bl=r.getBufferLength(n)),r.apply(t,a)}catch(t){w.warn("Could not generate segment CMCD data.",t)}},this.hls=e;var i=this.config=e.config,n=i.cmcd;null!=n&&(i.pLoader=this.createPlaylistLoader(),i.fLoader=this.createFragmentLoader(),this.sid=n.sessionId||t.uuid(),this.cid=n.contentId,this.useHeaders=!0===n.useHeaders,this.registerListeners())}var e=t.prototype;return e.registerListeners=function(){var t=this.hls;t.on(S.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(S.MEDIA_DETACHED,this.onMediaDetached,this),t.on(S.BUFFER_CREATED,this.onBufferCreated,this)},e.unregisterListeners=function(){var t=this.hls;t.off(S.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(S.MEDIA_DETACHED,this.onMediaDetached,this),t.off(S.BUFFER_CREATED,this.onBufferCreated,this)},e.destroy=function(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null},e.onMediaAttached=function(t,e){this.media=e.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)},e.onMediaDetached=function(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)},e.onBufferCreated=function(t,e){var r,i;this.audioBuffer=null==(r=e.tracks.audio)?void 0:r.buffer,this.videoBuffer=null==(i=e.tracks.video)?void 0:i.buffer},e.createData=function(){var t;return{v:1,sf:"h",sid:this.sid,cid:this.cid,pr:null==(t=this.media)?void 0:t.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}},e.apply=function(e,r){void 0===r&&(r={}),o(r,this.createData());var i=r.ot===Pa||r.ot===Ca||r.ot===_a;if(this.starved&&i&&(r.bs=!0,r.su=!0,this.starved=!1),null==r.su&&(r.su=this.buffering),this.useHeaders){var n=t.toHeaders(r);if(!Object.keys(n).length)return;e.headers||(e.headers={}),o(e.headers,n)}else{var a=t.toQuery(r);if(!a)return;e.url=t.appendQueryToUri(e.url,a)}},e.getObjectType=function(t){var e=t.type;return"subtitle"===e?xa:"initSegment"===t.sn?Pa:"audio"===e?wa:"main"===e?this.hls.audioTracks.length?Ca:_a:void 0},e.getTopBandwidth=function(t){var e,r=0,i=this.hls;if(t===wa)e=i.audioTracks;else{var n=i.maxAutoLevel,a=n>-1?n+1:i.levels.length;e=i.levels.slice(0,a)}for(var s,o=v(e);!(s=o()).done;){var l=s.value;l.bitrate>r&&(r=l.bitrate)}return r>0?r:NaN},e.getBufferLength=function(t){var e=this.hls.media,r=t===wa?this.audioBuffer:this.videoBuffer;return r&&e?1e3*Ir.bufferInfo(r,e.currentTime,this.config.maxBufferHole).len:NaN},e.createPlaylistLoader=function(){var t=this.config.pLoader,e=this.applyPlaylistData,r=t||this.config.loader;return function(){function t(t){this.loader=void 0,this.loader=new r(t)}var i=t.prototype;return i.destroy=function(){this.loader.destroy()},i.abort=function(){this.loader.abort()},i.load=function(t,r,i){e(t),this.loader.load(t,r,i)},a(t,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),t}()},e.createFragmentLoader=function(){var t=this.config.fLoader,e=this.applyFragmentData,r=t||this.config.loader;return function(){function t(t){this.loader=void 0,this.loader=new r(t)}var i=t.prototype;return i.destroy=function(){this.loader.destroy()},i.abort=function(){this.loader.abort()},i.load=function(t,r,i){e(t),this.loader.load(t,r,i)},a(t,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),t}()},t.uuid=function(){var t=URL.createObjectURL(new Blob),e=t.toString();return URL.revokeObjectURL(t),e.slice(e.lastIndexOf("/")+1)},t.serialize=function(t){for(var e,r=[],i=function(t){return!Number.isNaN(t)&&null!=t&&""!==t&&!1!==t},n=function(t){return Math.round(t)},a=function(t){return 100*n(t/100)},s={br:n,d:n,bl:a,dl:a,mtp:a,nor:function(t){return encodeURIComponent(t)},rtp:a,tb:n},o=v(Object.keys(t||{}).sort());!(e=o()).done;){var l=e.value,u=t[l];if(i(u)&&!("v"===l&&1===u||"pr"==l&&1===u)){var h=s[l];h&&(u=h(u));var d=typeof u,c=void 0;c="ot"===l||"sf"===l||"st"===l?l+"="+u:"boolean"===d?l:"number"===d?l+"="+u:l+"="+JSON.stringify(u),r.push(c)}}return r.join(",")},t.toHeaders=function(e){for(var r={},i=["Object","Request","Session","Status"],n=[{},{},{},{}],a={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},s=0,o=Object.keys(e);s<o.length;s++){var l=o[s];n[null!=a[l]?a[l]:1][l]=e[l]}for(var u=0;u<n.length;u++){var h=t.serialize(n[u]);h&&(r["CMCD-"+i[u]]=h)}return r},t.toQuery=function(e){return"CMCD="+encodeURIComponent(t.serialize(e))},t.appendQueryToUri=function(t,e){if(!e)return t;var r=t.includes("?")?"&":"?";return""+t+r+e},t}(),Ma=function(){function t(t){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=t,this.log=w.log.bind(w,"[content-steering]:"),this.registerListeners()}var e=t.prototype;return e.registerListeners=function(){var t=this.hls;t.on(S.MANIFEST_LOADING,this.onManifestLoading,this),t.on(S.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(S.MANIFEST_PARSED,this.onManifestParsed,this),t.on(S.ERROR,this.onError,this)},e.unregisterListeners=function(){var t=this.hls;t&&(t.off(S.MANIFEST_LOADING,this.onManifestLoading,this),t.off(S.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(S.MANIFEST_PARSED,this.onManifestParsed,this),t.off(S.ERROR,this.onError,this))},e.startLoad=function(){if(this.started=!0,self.clearTimeout(this.reloadTimer),this.enabled&&this.uri)if(this.updated){var t=Math.max(1e3*this.timeToLoad-(performance.now()-this.updated),0);this.scheduleRefresh(this.uri,t)}else this.loadSteeringManifest(this.uri)},e.stopLoad=function(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),self.clearTimeout(this.reloadTimer)},e.destroy=function(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null},e.removeLevel=function(t){var e=this.levels;e&&(this.levels=e.filter((function(e){return e!==t})))},e.onManifestLoading=function(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null},e.onManifestLoaded=function(t,e){var r=e.contentSteering;null!==r&&(this.pathwayId=r.pathwayId,this.uri=r.uri,this.started&&this.startLoad())},e.onManifestParsed=function(t,e){this.audioTracks=e.audioTracks,this.subtitleTracks=e.subtitleTracks},e.onError=function(t,e){var r=e.errorAction;if((null==r?void 0:r.action)===ir&&r.flags===sr){var i=this.pathwayPriority,n=this.pathwayId;this.penalizedPathways[n]||(this.penalizedPathways[n]=performance.now()),!i&&this.levels&&(i=this.levels.reduce((function(t,e){return-1===t.indexOf(e.pathwayId)&&t.push(e.pathwayId),t}),[])),i&&i.length>1&&(this.updatePathwayPriority(i),r.resolved=this.pathwayId!==n)}},e.filterParsedLevels=function(t){this.levels=t;var e=this.getLevelsForPathway(this.pathwayId);if(0===e.length){var r=t[0].pathwayId;this.log("No levels found in Pathway "+this.pathwayId+'. Setting initial Pathway to "'+r+'"'),e=this.getLevelsForPathway(r),this.pathwayId=r}return e.length!==t.length?(this.log("Found "+e.length+"/"+t.length+' levels in Pathway "'+this.pathwayId+'"'),e):t},e.getLevelsForPathway=function(t){return null===this.levels?[]:this.levels.filter((function(e){return t===e.pathwayId}))},e.updatePathwayPriority=function(t){var e;this.pathwayPriority=t;var r=this.penalizedPathways,i=performance.now();Object.keys(r).forEach((function(t){i-r[t]>3e5&&delete r[t]}));for(var n=0;n<t.length;n++){var a=t[n];if(!r[a]){if(a===this.pathwayId)return;var s=this.hls.nextLoadLevel,o=this.hls.levels[s];if((e=this.getLevelsForPathway(a)).length>0){this.log('Setting Pathway to "'+a+'"'),this.pathwayId=a,this.hls.trigger(S.LEVELS_UPDATED,{levels:e});var l=this.hls.levels[s];o&&l&&this.levels&&(l.attrs["STABLE-VARIANT-ID"]!==o.attrs["STABLE-VARIANT-ID"]&&l.bitrate!==o.bitrate&&this.log("Unstable Pathways change from bitrate "+o.bitrate+" to "+l.bitrate),this.hls.nextLoadLevel=s);break}}}},e.clonePathways=function(t){var e=this,r=this.levels;if(r){var i={},n={};t.forEach((function(t){var a=t.ID,s=t["BASE-ID"],l=t["URI-REPLACEMENT"];if(!r.some((function(t){return t.pathwayId===a}))){var u=e.getLevelsForPathway(s).map((function(t){var e=o({},t);e.details=void 0,e.url=Na(t.uri,t.attrs["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",l);var r=new P(t.attrs);r["PATHWAY-ID"]=a;var s=r.AUDIO&&r.AUDIO+"_clone_"+a,u=r.SUBTITLES&&r.SUBTITLES+"_clone_"+a;s&&(i[r.AUDIO]=s,r.AUDIO=s),u&&(n[r.SUBTITLES]=u,r.SUBTITLES=u),e.attrs=r;var h=new Ne(e);return dr(h,"audio",s),dr(h,"text",u),h}));r.push.apply(r,u),Oa(e.audioTracks,i,l,a),Oa(e.subtitleTracks,n,l,a)}}))}},e.loadSteeringManifest=function(t){var e,r=this,i=this.hls.config,n=i.loader;this.loader&&this.loader.destroy(),this.loader=new n(i);try{e=new self.URL(t)}catch(e){return this.enabled=!1,void this.log("Failed to parse Steering Manifest URI: "+t)}if("data:"!==e.protocol){var a=0|(this.hls.bandwidthEstimate||i.abrEwmaDefaultEstimate);e.searchParams.set("_HLS_pathway",this.pathwayId),e.searchParams.set("_HLS_throughput",""+a)}var s={responseType:"json",url:e.href},o=i.steeringManifestLoadPolicy.default,l=o.errorRetry||o.timeoutRetry||{},u={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:l.maxNumRetry||0,retryDelay:l.retryDelayMs||0,maxRetryDelay:l.maxRetryDelayMs||0},h={onSuccess:function(t,i,n,a){r.log('Loaded steering manifest: "'+e+'"');var s=t.data;if(1===s.VERSION){r.updated=performance.now(),r.timeToLoad=s.TTL;var o=s["RELOAD-URI"],l=s["PATHWAY-CLONES"],u=s["PATHWAY-PRIORITY"];if(o)try{r.uri=new self.URL(o,e).href}catch(t){return r.enabled=!1,void r.log("Failed to parse Steering Manifest RELOAD-URI: "+o)}r.scheduleRefresh(r.uri||n.url),l&&r.clonePathways(l),u&&r.updatePathwayPriority(u)}else r.log("Steering VERSION "+s.VERSION+" not supported!")},onError:function(t,e,i,n){if(r.log("Error loading steering manifest: "+t.code+" "+t.text+" ("+e.url+")"),r.stopLoad(),410===t.code)return r.enabled=!1,void r.log("Steering manifest "+e.url+" no longer available");var a=1e3*r.timeToLoad;if(429!==t.code)r.scheduleRefresh(r.uri||e.url,a);else{var s=r.loader;if("function"==typeof(null==s?void 0:s.getResponseHeader)){var o=s.getResponseHeader("Retry-After");o&&(a=1e3*parseFloat(o))}r.log("Steering manifest "+e.url+" rate limited")}},onTimeout:function(t,e,i){r.log("Timeout loading steering manifest ("+e.url+")"),r.scheduleRefresh(r.uri||e.url)}};this.log("Requesting steering manifest: "+e),this.loader.load(s,u,h)},e.scheduleRefresh=function(t,e){var r=this;void 0===e&&(e=1e3*this.timeToLoad),self.clearTimeout(this.reloadTimer),this.reloadTimer=self.setTimeout((function(){r.loadSteeringManifest(t)}),e)},t}();function Oa(t,e,r,i){t&&Object.keys(e).forEach((function(n){var a=t.filter((function(t){return t.groupId===n})).map((function(t){var a=o({},t);return a.details=void 0,a.attrs=new P(a.attrs),a.url=a.attrs.URI=Na(t.url,t.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",r),a.groupId=a.attrs["GROUP-ID"]=e[n],a.attrs["PATHWAY-ID"]=i,a}));t.push.apply(t,a)}))}function Na(t,e,r,i){var n,a=i.HOST,s=i.PARAMS,o=i[r];e&&(n=null==o?void 0:o[e])&&(t=n);var l=new self.URL(t);return a&&!n&&(l.host=a),s&&Object.keys(s).sort().forEach((function(t){t&&l.searchParams.set(t,s[t])})),l.href}var Ua=/^age:\s*[\d.]+\s*$/im,Ba=function(){function t(t){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=t&&t.xhrSetup||null,this.stats=new M,this.retryDelay=0}var e=t.prototype;return e.destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null},e.abortInternal=function(){var t=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),t&&(t.onreadystatechange=null,t.onprogress=null,4!==t.readyState&&(this.stats.aborted=!0,t.abort()))},e.abort=function(){var t;this.abortInternal(),null!=(t=this.callbacks)&&t.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},e.load=function(t,e,r){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=t,this.config=e,this.callbacks=r,this.loadInternal()},e.loadInternal=function(){var t=this,e=this.config,r=this.context;if(e){var i=this.loader=new self.XMLHttpRequest,n=this.stats;n.loading.first=0,n.loaded=0,n.aborted=!1;var a=this.xhrSetup;a?Promise.resolve().then((function(){if(!t.stats.aborted)return a(i,r.url)})).catch((function(t){return i.open("GET",r.url,!0),a(i,r.url)})).then((function(){t.stats.aborted||t.openAndSendXhr(i,r,e)})).catch((function(e){t.callbacks.onError({code:i.status,text:e.message},r,i,n)})):this.openAndSendXhr(i,r,e)}},e.openAndSendXhr=function(t,e,r){t.readyState||t.open("GET",e.url,!0);var i=this.context.headers,n=r.loadPolicy,a=n.maxTimeToFirstByteMs,s=n.maxLoadTimeMs;if(i)for(var o in i)t.setRequestHeader(o,i[o]);e.rangeEnd&&t.setRequestHeader("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=e.responseType,self.clearTimeout(this.requestTimeout),r.timeout=a&&E(a)?a:s,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.timeout),t.send()},e.readystatechange=function(){var t=this.context,e=this.loader,r=this.stats;if(t&&e){var i=e.readyState,n=this.config;if(!r.aborted&&i>=2&&(0===r.loading.first&&(r.loading.first=Math.max(self.performance.now(),r.loading.start),n.timeout!==n.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),n.timeout=n.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.loadPolicy.maxLoadTimeMs-(r.loading.first-r.loading.start)))),4===i)){self.clearTimeout(this.requestTimeout),e.onreadystatechange=null,e.onprogress=null;var a=e.status,s="text"!==e.responseType;if(a>=200&&a<300&&(s&&e.response||null!==e.responseText)){r.loading.end=Math.max(self.performance.now(),r.loading.first);var o=s?e.response:e.responseText,l="arraybuffer"===e.responseType?o.byteLength:o.length;if(r.loaded=r.total=l,r.bwEstimate=8e3*r.total/(r.loading.end-r.loading.first),!this.callbacks)return;var u=this.callbacks.onProgress;if(u&&u(r,t,o,e),!this.callbacks)return;var h={url:e.responseURL,data:o,code:a};this.callbacks.onSuccess(h,r,t,e)}else{var d=n.loadPolicy.errorRetry;ze(d,r.retry,!1,a)?this.retry(d):(w.error(a+" while loading "+t.url),this.callbacks.onError({code:a,text:e.statusText},t,e,r))}}}},e.loadtimeout=function(){var t,e=null==(t=this.config)?void 0:t.loadPolicy.timeoutRetry;if(ze(e,this.stats.retry,!0))this.retry(e);else{w.warn("timeout while loading "+this.context.url);var r=this.callbacks;r&&(this.abortInternal(),r.onTimeout(this.stats,this.context,this.loader))}},e.retry=function(t){var e=this.context,r=this.stats;this.retryDelay=qe(t,r.retry),r.retry++,w.warn((status?"HTTP Status "+status:"Timeout")+" while loading "+e.url+", retrying "+r.retry+"/"+t.maxNumRetry+" in "+this.retryDelay+"ms"),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)},e.loadprogress=function(t){var e=this.stats;e.loaded=t.loaded,t.lengthComputable&&(e.total=t.total)},e.getCacheAge=function(){var t=null;if(this.loader&&Ua.test(this.loader.getAllResponseHeaders())){var e=this.loader.getResponseHeader("age");t=e?parseFloat(e):null}return t},e.getResponseHeader=function(t){return this.loader&&new RegExp("^"+t+":\\s*[\\d.]+\\s*$","im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(t):null},t}(),Ga=/(\d+)-(\d+)\/(\d+)/,Ka=function(){function t(t){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=t.fetchSetup||Ha,this.controller=new self.AbortController,this.stats=new M}var e=t.prototype;return e.destroy=function(){this.loader=this.callbacks=null,this.abortInternal()},e.abortInternal=function(){var t=this.response;null!=t&&t.ok||(this.stats.aborted=!0,this.controller.abort())},e.abort=function(){var t;this.abortInternal(),null!=(t=this.callbacks)&&t.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},e.load=function(t,e,r){var i=this,n=this.stats;if(n.loading.start)throw new Error("Loader can only be used once.");n.loading.start=self.performance.now();var a=function(t,e){var r={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(o({},t.headers))};return t.rangeEnd&&r.headers.set("Range","bytes="+t.rangeStart+"-"+String(t.rangeEnd-1)),r}(t,this.controller.signal),s=r.onProgress,l="arraybuffer"===t.responseType,u=l?"byteLength":"length",h=e.loadPolicy,d=h.maxTimeToFirstByteMs,c=h.maxLoadTimeMs;this.context=t,this.config=e,this.callbacks=r,this.request=this.fetchSetup(t,a),self.clearTimeout(this.requestTimeout),e.timeout=d&&E(d)?d:c,this.requestTimeout=self.setTimeout((function(){i.abortInternal(),r.onTimeout(n,t,i.response)}),e.timeout),self.fetch(this.request).then((function(a){i.response=i.loader=a;var o=Math.max(self.performance.now(),n.loading.start);if(self.clearTimeout(i.requestTimeout),e.timeout=c,i.requestTimeout=self.setTimeout((function(){i.abortInternal(),r.onTimeout(n,t,i.response)}),c-(o-n.loading.start)),!a.ok){var u=a.status,h=a.statusText;throw new Va(h||"fetch, bad network response",u,a)}return n.loading.first=o,n.total=function(t){var e=t.get("Content-Range");if(e){var r=function(t){var e=Ga.exec(t);if(e)return parseInt(e[2])-parseInt(e[1])+1}(e);if(E(r))return r}var i=t.get("Content-Length");if(i)return parseInt(i)}(a.headers)||n.total,s&&E(e.highWaterMark)?i.loadProgressively(a,n,t,e.highWaterMark,s):l?a.arrayBuffer():"json"===t.responseType?a.json():a.text()})).then((function(a){var o=i.response;self.clearTimeout(i.requestTimeout),n.loading.end=Math.max(self.performance.now(),n.loading.first);var l=a[u];l&&(n.loaded=n.total=l);var h={url:o.url,data:a,code:o.status};s&&!E(e.highWaterMark)&&s(n,t,a,o),r.onSuccess(h,n,t,o)})).catch((function(e){if(self.clearTimeout(i.requestTimeout),!n.aborted){var a=e&&e.code||0,s=e?e.message:null;r.onError({code:a,text:s},t,e?e.details:null,n)}}))},e.getCacheAge=function(){var t=null;if(this.response){var e=this.response.headers.get("age");t=e?parseFloat(e):null}return t},e.getResponseHeader=function(t){return this.response?this.response.headers.get(t):null},e.loadProgressively=function(t,e,r,i,n){void 0===i&&(i=0);var a=new mn,s=t.body.getReader();return function o(){return s.read().then((function(s){if(s.done)return a.dataLength&&n(e,r,a.flush(),t),Promise.resolve(new ArrayBuffer(0));var l=s.value,u=l.length;return e.loaded+=u,u<i||a.dataLength?(a.push(l),a.dataLength>=i&&n(e,r,a.flush(),t)):n(e,r,l,t),o()})).catch((function(){return Promise.reject()}))}()},t}();function Ha(t,e){return new self.Request(t.url,e)}var Va=function(t){function e(e,r,i){var n;return(n=t.call(this,e)||this).code=void 0,n.details=void 0,n.code=r,n.details=i,n}return l(e,t),e}(f(Error)),Ya=/\s/,Wa=i(i({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Ba,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:vn,bufferController:In,capLevelController:Ra,errorController:lr,fpsController:Aa,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:et,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,certLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null}},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},{cueHandler:{newCue:function(t,e,r,i){for(var n,a,s,o,l,u=[],h=self.VTTCue||self.TextTrackCue,d=0;d<i.rows.length;d++)if(s=!0,o=0,l="",!(n=i.rows[d]).isEmpty()){for(var c,f=0;f<n.chars.length;f++)Ya.test(n.chars[f].uchar)&&s?o++:(l+=n.chars[f].uchar,s=!1);n.cueStartTime=e,e===r&&(r+=1e-4),o>=16?o--:o++;var g=ia(l.trim()),v=la(e,r,g);null!=t&&null!=(c=t.cues)&&c.getCueById(v)||((a=new h(e,r,g)).id=v,a.line=d+1,a.align="left",a.position=10+Math.min(80,10*Math.floor(8*o/32)),u.push(a))}return t&&u.length&&(u.sort((function(t,e){return"auto"===t.line||"auto"===e.line?0:t.line>8&&e.line>8?e.line-t.line:t.line-e.line})),u.forEach((function(e){return Se(t,e)}))),u}},enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:Sn,subtitleTrackController:Rn,timelineController:Sa,audioStreamController:pn,audioTrackController:yn,emeController:ba,cmcdController:Fa,contentSteeringController:Ma});function ja(t){return t&&"object"==typeof t?Array.isArray(t)?t.map(ja):Object.keys(t).reduce((function(e,r){return e[r]=ja(t[r]),e}),{}):t}function qa(t){var e=t.loader;e!==Ka&&e!==Ba?(w.log("[config]: Custom loader detected, cannot enable progressive streaming"),t.progressive=!1):function(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(t){}return!1}()&&(t.loader=Ka,t.progressive=!0,t.enableSoftwareAES=!0,w.log("[config]: Progressive streaming enabled, using FetchLoader"))}var Xa=function(){function t(e){void 0===e&&(e={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new an,this._autoLevelCapping=void 0,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,I(e.debug||!1,"Hls instance");var r=this.config=function(t,e){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==e.liveMaxLatencyDurationCount&&(void 0===e.liveSyncDurationCount||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==e.liveMaxLatencyDuration&&(void 0===e.liveSyncDuration||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');var r=ja(t),n=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return["manifest","level","frag"].forEach((function(t){var i=("level"===t?"playlist":t)+"LoadPolicy",a=void 0===e[i],s=[];n.forEach((function(n){var o=t+"Loading"+n,l=e[o];if(void 0!==l&&a){s.push(o);var u=r[i].default;switch(e[i]={default:u},n){case"TimeOut":u.maxLoadTimeMs=l,u.maxTimeToFirstByteMs=l;break;case"MaxRetry":u.errorRetry.maxNumRetry=l,u.timeoutRetry.maxNumRetry=l;break;case"RetryDelay":u.errorRetry.retryDelayMs=l,u.timeoutRetry.retryDelayMs=l;break;case"MaxRetryTimeout":u.errorRetry.maxRetryDelayMs=l,u.timeoutRetry.maxRetryDelayMs=l}}})),s.length&&w.warn('hls.js config: "'+s.join('", "')+'" setting(s) are deprecated, use "'+i+'": '+JSON.stringify(e[i]))})),i(i({},r),e)}(t.DefaultConfig,e);this.userConfig=e,this._autoLevelCapping=-1,r.progressive&&qa(r);var n=r.abrController,a=r.bufferController,s=r.capLevelController,o=r.errorController,l=r.fpsController,u=new o(this),h=this.abrController=new n(this),d=this.bufferController=new a(this),c=this.capLevelController=new s(this),f=new l(this),g=new Te(this),v=new Ce(this),m=r.contentSteeringController,p=m?new m(this):null,y=this.levelController=new hr(this,p),T=new pr(this),E=new kr(this.config),L=this.streamController=new cn(this,T,E);c.setStreamController(L),f.setStreamController(L);var R=[g,y,L];p&&R.splice(1,0,p),this.networkControllers=R;var A=[h,d,c,f,v,T];this.audioTrackController=this.createController(r.audioTrackController,R);var k=r.audioStreamController;k&&R.push(new k(this,T,E)),this.subtitleTrackController=this.createController(r.subtitleTrackController,R);var b=r.subtitleStreamController;b&&R.push(new b(this,T,E)),this.createController(r.timelineController,A),E.emeController=this.emeController=this.createController(r.emeController,A),this.cmcdController=this.createController(r.cmcdController,A),this.latencyController=this.createController(_e,A),this.coreComponents=A,R.push(u);var D=u.onErrorOut;"function"==typeof D&&this.on(S.ERROR,D,u)}t.isSupported=function(){return function(){var t=qt();if(!t)return!1;var e=Zr(),r=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),i=!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove;return!!r&&!!i}()};var e=t.prototype;return e.createController=function(t,e){if(t){var r=new t(this);return e&&e.push(r),r}return null},e.on=function(t,e,r){void 0===r&&(r=this),this._emitter.on(t,e,r)},e.once=function(t,e,r){void 0===r&&(r=this),this._emitter.once(t,e,r)},e.removeAllListeners=function(t){this._emitter.removeAllListeners(t)},e.off=function(t,e,r,i){void 0===r&&(r=this),this._emitter.off(t,e,r,i)},e.listeners=function(t){return this._emitter.listeners(t)},e.emit=function(t,e,r){return this._emitter.emit(t,e,r)},e.trigger=function(t,e){if(this.config.debug)return this.emit(t,t,e);try{return this.emit(t,t,e)}catch(e){w.error("An internal error happened while handling event "+t+'. Error message: "'+e.message+'". Here is a stacktrace:',e),this.trigger(S.ERROR,{type:L.OTHER_ERROR,details:R.INTERNAL_EXCEPTION,fatal:!1,event:t,error:e})}return!1},e.listenerCount=function(t){return this._emitter.listenerCount(t)},e.destroy=function(){w.log("destroy"),this.trigger(S.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach((function(t){return t.destroy()})),this.networkControllers.length=0,this.coreComponents.forEach((function(t){return t.destroy()})),this.coreComponents.length=0;var t=this.config;t.xhrSetup=t.fetchSetup=void 0,this.userConfig=null},e.attachMedia=function(t){w.log("attachMedia"),this._media=t,this.trigger(S.MEDIA_ATTACHING,{media:t})},e.detachMedia=function(){w.log("detachMedia"),this.trigger(S.MEDIA_DETACHING,void 0),this._media=null},e.loadSource=function(t){this.stopLoad();var e=this.media,r=this.url,i=this.url=T.buildAbsoluteURL(self.location.href,t,{alwaysNormalize:!0});w.log("loadSource:"+i),e&&r&&(r!==i||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(e)),this.trigger(S.MANIFEST_LOADING,{url:t})},e.startLoad=function(t){void 0===t&&(t=-1),w.log("startLoad("+t+")"),this.networkControllers.forEach((function(e){e.startLoad(t)}))},e.stopLoad=function(){w.log("stopLoad"),this.networkControllers.forEach((function(t){t.stopLoad()}))},e.swapAudioCodec=function(){w.log("swapAudioCodec"),this.streamController.swapAudioCodec()},e.recoverMediaError=function(){w.log("recoverMediaError");var t=this._media;this.detachMedia(),t&&this.attachMedia(t)},e.removeLevel=function(t,e){void 0===e&&(e=0),this.levelController.removeLevel(t,e)},a(t,[{key:"levels",get:function(){var t=this.levelController.levels;return t||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(t){w.log("set currentLevel:"+t),this.loadLevel=t,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(t){w.log("set nextLevel:"+t),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(t){w.log("set loadLevel:"+t),this.levelController.manualLevel=t}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(t){this.levelController.nextLoadLevel=t}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(t){w.log("set firstLevel:"+t),this.levelController.firstLevel=t}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(t){w.log("set startLevel:"+t),-1!==t&&(t=Math.max(t,this.minAutoLevel)),this.levelController.startLevel=t}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(t){var e=!!t;e!==this.config.capLevelToPlayerSize&&(e?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=e)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(t){this._autoLevelCapping!==t&&(w.log("set autoLevelCapping:"+t),this._autoLevelCapping=t)}},{key:"bandwidthEstimate",get:function(){var t=this.abrController.bwEstimator;return t?t.getEstimate():NaN}},{key:"ttfbEstimate",get:function(){var t=this.abrController.bwEstimator;return t?t.getEstimateTTFB():NaN}},{key:"maxHdcpLevel",get:function(){return this._maxHdcpLevel},set:function(t){Pe.indexOf(t)>-1&&(this._maxHdcpLevel=t)}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var t=this.levels,e=this.config.minAutoBitrate;if(!t)return 0;for(var r=t.length,i=0;i<r;i++)if(t[i].maxBitrate>=e)return i;return 0}},{key:"maxAutoLevel",get:function(){var t,e=this.levels,r=this.autoLevelCapping,i=this.maxHdcpLevel;if(t=-1===r&&e&&e.length?e.length-1:r,i)for(var n=t;n--;){var a=e[n].attrs["HDCP-LEVEL"];if(a&&a<=i)return n}return t}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(t){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,t)}},{key:"playingDate",get:function(){return this.streamController.currentProgramDateTime}},{key:"mainForwardBufferInfo",get:function(){return this.streamController.getMainFwdBufferInfo()}},{key:"audioTracks",get:function(){var t=this.audioTrackController;return t?t.audioTracks:[]}},{key:"audioTrack",get:function(){var t=this.audioTrackController;return t?t.audioTrack:-1},set:function(t){var e=this.audioTrackController;e&&(e.audioTrack=t)}},{key:"subtitleTracks",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTrack:-1},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleTrack=t)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var t=this.subtitleTrackController;return!!t&&t.subtitleDisplay},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleDisplay=t)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(t){this.config.lowLatencyMode=t}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}],[{key:"version",get:function(){return"1.4.12"}},{key:"Events",get:function(){return S}},{key:"ErrorTypes",get:function(){return L}},{key:"ErrorDetails",get:function(){return R}},{key:"DefaultConfig",get:function(){return t.defaultConfig?t.defaultConfig:Wa},set:function(e){t.defaultConfig=e}}]),t}();return Xa.defaultConfig=void 0,Xa},"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):(r="undefined"!=typeof globalThis?globalThis:r||self).Hls=i()}(!1);
//# sourceMappingURL=hls.min.js.map

/**
 * Skipped minification because the original files appears to be already minified.
 * Original file: /npm/ovenplayer@0.10.31/dist/ovenplayer.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.OvenPlayer=t():e.OvenPlayer=t()}(self,(function(){return function(){var e={8445:function(e,t,n){"use strict";n.d(t,{default:function(){return Ar}});var r="0.10.31",o=n(741),i=n.n(o);function a(e){return e?e.replace(/^\s+|\s+$/g,""):""}var A=function(e){if(!e||"rtmp"==e.substr(0,4))return"";var t=function(e){var t="";return/[(,]format=mpd-/i.test(e)?t="mpd":/[(,]format=m3u8-/i.test(e)&&(t="m3u8"),t}(e);return t||((e=e.split("?")[0].split("#")[0]).lastIndexOf(".")>-1?e.substr(e.lastIndexOf(".")+1,e.length).toLowerCase():"")};function s(e){var t=parseInt(e,10);if(!e)return"00:00";var n=Math.floor(t/3600),r=Math.floor((t-3600*n)/60),o=t-3600*n-60*r;return r<10&&(r="0"+r),o<10&&(o="0"+o),n>0?n+":"+r+":"+o:r+":"+o}function c(e,t){if(!e)return 0;if(i().isNumber(e)&&!i().isNaN(e))return e;var n=(e=e.replace(",",".")).split(":"),r=n.length,o=0;if("s"===e.slice(-1))o=parseFloat(e);else if("m"===e.slice(-1))o=60*parseFloat(e);else if("h"===e.slice(-1))o=3600*parseFloat(e);else if(r>1){var a=r-1;4===r&&(t&&(o=parseFloat(n[a])/t),a-=1),o+=parseFloat(n[a]),o+=60*parseFloat(n[a-1]),r>=3&&(o+=3600*parseFloat(n[a-2]))}else o=parseFloat(e);return i().isNaN(o)?0:o}function u(e){var t={},n=e.split("\r\n");1===n.length&&(n=e.split("\n"));var r=1;if(n[0].indexOf(" --\x3e ")>0&&(r=0),n.length>r+1&&n[r+1]){var o=n[r],i=o.indexOf(" --\x3e ");i>0&&(t.start=c(o.substr(0,i)),t.end=c(o.substr(i+5)),t.text=n.slice(r+1).join("\r\n"))}return t}var l=window.VTTCue,f={"":!0,lr:!0,rl:!0},p={start:!0,middle:!0,end:!0,left:!0,right:!0};function d(e){return"string"==typeof e&&!!p[e.toLowerCase()]&&e.toLowerCase()}function g(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}l||((l=function(e,t,n){var r=this,o=/MSIE\s8\.0/.test(navigator.userAgent),i={};o?r=document.createElement("custom"):i.enumerable=!0,r.hasBeenReset=!1;var a="",A=!1,s=e,c=t,u=n,l=null,p="",h=!0,v="auto",m="start",C=50,y="middle",b=50,w="middle";if(Object.defineProperty(r,"id",g({},i,{get:function(){return a},set:function(e){a=""+e}})),Object.defineProperty(r,"pauseOnExit",g({},i,{get:function(){return A},set:function(e){A=!!e}})),Object.defineProperty(r,"startTime",g({},i,{get:function(){return s},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");s=e,this.hasBeenReset=!0}})),Object.defineProperty(r,"endTime",g({},i,{get:function(){return c},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");c=e,this.hasBeenReset=!0}})),Object.defineProperty(r,"text",g({},i,{get:function(){return u},set:function(e){u=""+e,this.hasBeenReset=!0}})),Object.defineProperty(r,"region",g({},i,{get:function(){return l},set:function(e){l=e,this.hasBeenReset=!0}})),Object.defineProperty(r,"vertical",g({},i,{get:function(){return p},set:function(e){var t=function(e){return"string"==typeof e&&!!f[e.toLowerCase()]&&e.toLowerCase()}(e);if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");p=t,this.hasBeenReset=!0}})),Object.defineProperty(r,"snapToLines",g({},i,{get:function(){return h},set:function(e){h=!!e,this.hasBeenReset=!0}})),Object.defineProperty(r,"line",g({},i,{get:function(){return v},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");v=e,this.hasBeenReset=!0}})),Object.defineProperty(r,"lineAlign",g({},i,{get:function(){return m},set:function(e){var t=d(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");m=t,this.hasBeenReset=!0}})),Object.defineProperty(r,"position",g({},i,{get:function(){return C},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");C=e,this.hasBeenReset=!0}})),Object.defineProperty(r,"positionAlign",g({},i,{get:function(){return y},set:function(e){var t=d(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(r,"size",g({},i,{get:function(){return b},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");b=e,this.hasBeenReset=!0}})),Object.defineProperty(r,"align",g({},i,{get:function(){return w},set:function(e){var t=d(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");w=t,this.hasBeenReset=!0}})),r.displayState=void 0,o)return r}).prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)});var h=l,v={"":!0,up:!0};function m(e){return"number"==typeof e&&e>=0&&e<=100}var C=function(){var e=100,t=3,n=0,r=100,o=0,i=100,a="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!m(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return t},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");t=e}},regionAnchorY:{enumerable:!0,get:function(){return r},set:function(e){if(!m(e))throw new Error("RegionAnchorX must be between 0 and 100.");r=e}},regionAnchorX:{enumerable:!0,get:function(){return n},set:function(e){if(!m(e))throw new Error("RegionAnchorY must be between 0 and 100.");n=e}},viewportAnchorY:{enumerable:!0,get:function(){return i},set:function(e){if(!m(e))throw new Error("ViewportAnchorY must be between 0 and 100.");i=e}},viewportAnchorX:{enumerable:!0,get:function(){return o},set:function(e){if(!m(e))throw new Error("ViewportAnchorX must be between 0 and 100.");o=e}},scroll:{enumerable:!0,get:function(){return a},set:function(e){var t=function(e){return"string"==typeof e&&!!v[e.toLowerCase()]&&e.toLowerCase()}(e);if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");a=t}}})},y=function(){};function b(e,t){return void 0===t&&(t=1),"rgba("+[parseInt(e.substring(0,2),16),parseInt(e.substring(2,4),16),parseInt(e.substring(4,6),16),t].join(",")+")"}var w=1;function E(e,t,n){switch(n){case"webvtt.font.color":case"webvtt.font.opacity":var r=Services.prefs.getCharPref("webvtt.font.color"),o=Services.prefs.getIntPref("webvtt.font.opacity")/100;B.fontSet=b(r,o);break;case"webvtt.font.scale":w=Services.prefs.getIntPref("webvtt.font.scale")/100;break;case"webvtt.bg.color":case"webvtt.bg.opacity":var i=Services.prefs.getCharPref("webvtt.bg.color"),a=Services.prefs.getIntPref("webvtt.bg.opacity")/100;B.backgroundSet=b(i,a);break;case"webvtt.edge.color":case"webvtt.edge.type":var A=Services.prefs.getIntPref("webvtt.edge.type"),s=Services.prefs.getCharPref("webvtt.edge.color");B.edgeSet=["","0px 0px ","4px 4px 4px ","-2px -2px ","2px 2px "][A]+b(s)}}if("undefined"!=typeof Services){var B={};["webvtt.font.color","webvtt.font.opacity","webvtt.font.scale","webvtt.bg.color","webvtt.bg.opacity","webvtt.edge.color","webvtt.edge.type"].forEach((function(e){E(0,0,e),Services.prefs.addObserver(e,E,!1)}))}var x=Object.create||function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return e.prototype=t,new e}}();function k(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function I(e){function t(e,t,n,r){return 3600*(0|e)+60*(0|t)+(0|n)+(0|r)/1e3}var n=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}function S(){this.values=x(null)}function T(e,t,n,r){var o=r?e.split(r):[e];for(var i in o)if("string"==typeof o[i]){var a=o[i].split(n);2===a.length&&t(a[0],a[1])}}function L(e,t,n){var r=e;function o(){var t=I(e);if(null===t)throw new k(k.Errors.BadTimeStamp,"Malformed timestamp: "+r);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function i(){e=e.replace(/^\s+/,"")}if(i(),t.startTime=o(),i(),"--\x3e"!==e.substr(0,3))throw new k(k.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);e=e.substr(3),i(),t.endTime=o(),i(),function(e,t){var r=new S;T(e,(function(e,t){switch(e){case"region":for(var o=n.length-1;o>=0;o--)if(n[o].id===t){r.set(e,n[o].region);break}break;case"vertical":r.alt(e,t,["rl","lr"]);break;case"line":var i=t.split(","),a=i[0];r.integer(e,a),r.percent(e,a)&&r.set("snapToLines",!1),r.alt(e,a,["auto"]),2===i.length&&r.alt("lineAlign",i[1],["start","middle","end"]);break;case"position":i=t.split(","),r.percent(e,i[0]),2===i.length&&r.alt("positionAlign",i[1],["start","middle","end"]);break;case"size":r.percent(e,t);break;case"align":r.alt(e,t,["start","middle","end","left","right"])}}),/:/,/\s/)}(e)}k.prototype=x(Error.prototype),k.prototype.constructor=k,k.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},S.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var R={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"","&rlm;":"","&nbsp;":""},M={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},O={v:"title",lang:"lang"},Q={rt:"ruby"};function D(e,t){function n(){if(!t)return null;var e,n=t.match(/^([^<]*)(<[^>]+>?)?/);return e=n[1]?n[1]:n[2],t=t.substr(e.length),e}function r(e){return R[e]}function o(e){for(;p=e.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)e=e.replace(p[0],r);return e}function i(e,t){return!Q[t.localName]||Q[t.localName]===e.localName}function a(t,n){var r=M[t];if(!r)return null;var o=e.document.createElement(r);o.localName=r;var i=O[t];return i&&n&&(o[i]=n.trim()),o}for(var A,s=e.document.createElement("div"),c=s,u=[];null!==(A=n());)if("<"!==A[0])c.appendChild(e.document.createTextNode(o(A)));else{if("/"===A[1]){u.length&&u[u.length-1]===A.substr(2).replace(">","")&&(u.pop(),c=c.parentNode);continue}var l,f=I(A.substr(1,A.length-2));if(f){l=e.document.createProcessingInstruction("timestamp",f),c.appendChild(l);continue}var p=A.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!p)continue;if(!(l=a(p[1],p[3])))continue;if(!i(c,l))continue;p[2]&&(l.className=p[2].substr(1).replace("."," ")),u.push(p[1]),c.appendChild(l),c=l}return s}var P=[1470,1472,1475,1478,1488,1489,1490,1491,1492,1493,1494,1495,1496,1497,1498,1499,1500,1501,1502,1503,1504,1505,1506,1507,1508,1509,1510,1511,1512,1513,1514,1520,1521,1522,1523,1524,1544,1547,1549,1563,1566,1567,1568,1569,1570,1571,1572,1573,1574,1575,1576,1577,1578,1579,1580,1581,1582,1583,1584,1585,1586,1587,1588,1589,1590,1591,1592,1593,1594,1595,1596,1597,1598,1599,1600,1601,1602,1603,1604,1605,1606,1607,1608,1609,1610,1645,1646,1647,1649,1650,1651,1652,1653,1654,1655,1656,1657,1658,1659,1660,1661,1662,1663,1664,1665,1666,1667,1668,1669,1670,1671,1672,1673,1674,1675,1676,1677,1678,1679,1680,1681,1682,1683,1684,1685,1686,1687,1688,1689,1690,1691,1692,1693,1694,1695,1696,1697,1698,1699,1700,1701,1702,1703,1704,1705,1706,1707,1708,1709,1710,1711,1712,1713,1714,1715,1716,1717,1718,1719,1720,1721,1722,1723,1724,1725,1726,1727,1728,1729,1730,1731,1732,1733,1734,1735,1736,1737,1738,1739,1740,1741,1742,1743,1744,1745,1746,1747,1748,1749,1765,1766,1774,1775,1786,1787,1788,1789,1790,1791,1792,1793,1794,1795,1796,1797,1798,1799,1800,1801,1802,1803,1804,1805,1807,1808,1810,1811,1812,1813,1814,1815,1816,1817,1818,1819,1820,1821,1822,1823,1824,1825,1826,1827,1828,1829,1830,1831,1832,1833,1834,1835,1836,1837,1838,1839,1869,1870,1871,1872,1873,1874,1875,1876,1877,1878,1879,1880,1881,1882,1883,1884,1885,1886,1887,1888,1889,1890,1891,1892,1893,1894,1895,1896,1897,1898,1899,1900,1901,1902,1903,1904,1905,1906,1907,1908,1909,1910,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1969,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2e3,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025,2026,2036,2037,2042,2048,2049,2050,2051,2052,2053,2054,2055,2056,2057,2058,2059,2060,2061,2062,2063,2064,2065,2066,2067,2068,2069,2074,2084,2088,2096,2097,2098,2099,2100,2101,2102,2103,2104,2105,2106,2107,2108,2109,2110,2112,2113,2114,2115,2116,2117,2118,2119,2120,2121,2122,2123,2124,2125,2126,2127,2128,2129,2130,2131,2132,2133,2134,2135,2136,2142,2208,2210,2211,2212,2213,2214,2215,2216,2217,2218,2219,2220,8207,64285,64287,64288,64289,64290,64291,64292,64293,64294,64295,64296,64298,64299,64300,64301,64302,64303,64304,64305,64306,64307,64308,64309,64310,64312,64313,64314,64315,64316,64318,64320,64321,64323,64324,64326,64327,64328,64329,64330,64331,64332,64333,64334,64335,64336,64337,64338,64339,64340,64341,64342,64343,64344,64345,64346,64347,64348,64349,64350,64351,64352,64353,64354,64355,64356,64357,64358,64359,64360,64361,64362,64363,64364,64365,64366,64367,64368,64369,64370,64371,64372,64373,64374,64375,64376,64377,64378,64379,64380,64381,64382,64383,64384,64385,64386,64387,64388,64389,64390,64391,64392,64393,64394,64395,64396,64397,64398,64399,64400,64401,64402,64403,64404,64405,64406,64407,64408,64409,64410,64411,64412,64413,64414,64415,64416,64417,64418,64419,64420,64421,64422,64423,64424,64425,64426,64427,64428,64429,64430,64431,64432,64433,64434,64435,64436,64437,64438,64439,64440,64441,64442,64443,64444,64445,64446,64447,64448,64449,64467,64468,64469,64470,64471,64472,64473,64474,64475,64476,64477,64478,64479,64480,64481,64482,64483,64484,64485,64486,64487,64488,64489,64490,64491,64492,64493,64494,64495,64496,64497,64498,64499,64500,64501,64502,64503,64504,64505,64506,64507,64508,64509,64510,64511,64512,64513,64514,64515,64516,64517,64518,64519,64520,64521,64522,64523,64524,64525,64526,64527,64528,64529,64530,64531,64532,64533,64534,64535,64536,64537,64538,64539,64540,64541,64542,64543,64544,64545,64546,64547,64548,64549,64550,64551,64552,64553,64554,64555,64556,64557,64558,64559,64560,64561,64562,64563,64564,64565,64566,64567,64568,64569,64570,64571,64572,64573,64574,64575,64576,64577,64578,64579,64580,64581,64582,64583,64584,64585,64586,64587,64588,64589,64590,64591,64592,64593,64594,64595,64596,64597,64598,64599,64600,64601,64602,64603,64604,64605,64606,64607,64608,64609,64610,64611,64612,64613,64614,64615,64616,64617,64618,64619,64620,64621,64622,64623,64624,64625,64626,64627,64628,64629,64630,64631,64632,64633,64634,64635,64636,64637,64638,64639,64640,64641,64642,64643,64644,64645,64646,64647,64648,64649,64650,64651,64652,64653,64654,64655,64656,64657,64658,64659,64660,64661,64662,64663,64664,64665,64666,64667,64668,64669,64670,64671,64672,64673,64674,64675,64676,64677,64678,64679,64680,64681,64682,64683,64684,64685,64686,64687,64688,64689,64690,64691,64692,64693,64694,64695,64696,64697,64698,64699,64700,64701,64702,64703,64704,64705,64706,64707,64708,64709,64710,64711,64712,64713,64714,64715,64716,64717,64718,64719,64720,64721,64722,64723,64724,64725,64726,64727,64728,64729,64730,64731,64732,64733,64734,64735,64736,64737,64738,64739,64740,64741,64742,64743,64744,64745,64746,64747,64748,64749,64750,64751,64752,64753,64754,64755,64756,64757,64758,64759,64760,64761,64762,64763,64764,64765,64766,64767,64768,64769,64770,64771,64772,64773,64774,64775,64776,64777,64778,64779,64780,64781,64782,64783,64784,64785,64786,64787,64788,64789,64790,64791,64792,64793,64794,64795,64796,64797,64798,64799,64800,64801,64802,64803,64804,64805,64806,64807,64808,64809,64810,64811,64812,64813,64814,64815,64816,64817,64818,64819,64820,64821,64822,64823,64824,64825,64826,64827,64828,64829,64848,64849,64850,64851,64852,64853,64854,64855,64856,64857,64858,64859,64860,64861,64862,64863,64864,64865,64866,64867,64868,64869,64870,64871,64872,64873,64874,64875,64876,64877,64878,64879,64880,64881,64882,64883,64884,64885,64886,64887,64888,64889,64890,64891,64892,64893,64894,64895,64896,64897,64898,64899,64900,64901,64902,64903,64904,64905,64906,64907,64908,64909,64910,64911,64914,64915,64916,64917,64918,64919,64920,64921,64922,64923,64924,64925,64926,64927,64928,64929,64930,64931,64932,64933,64934,64935,64936,64937,64938,64939,64940,64941,64942,64943,64944,64945,64946,64947,64948,64949,64950,64951,64952,64953,64954,64955,64956,64957,64958,64959,64960,64961,64962,64963,64964,64965,64966,64967,65008,65009,65010,65011,65012,65013,65014,65015,65016,65017,65018,65019,65020,65136,65137,65138,65139,65140,65142,65143,65144,65145,65146,65147,65148,65149,65150,65151,65152,65153,65154,65155,65156,65157,65158,65159,65160,65161,65162,65163,65164,65165,65166,65167,65168,65169,65170,65171,65172,65173,65174,65175,65176,65177,65178,65179,65180,65181,65182,65183,65184,65185,65186,65187,65188,65189,65190,65191,65192,65193,65194,65195,65196,65197,65198,65199,65200,65201,65202,65203,65204,65205,65206,65207,65208,65209,65210,65211,65212,65213,65214,65215,65216,65217,65218,65219,65220,65221,65222,65223,65224,65225,65226,65227,65228,65229,65230,65231,65232,65233,65234,65235,65236,65237,65238,65239,65240,65241,65242,65243,65244,65245,65246,65247,65248,65249,65250,65251,65252,65253,65254,65255,65256,65257,65258,65259,65260,65261,65262,65263,65264,65265,65266,65267,65268,65269,65270,65271,65272,65273,65274,65275,65276,67584,67585,67586,67587,67588,67589,67592,67594,67595,67596,67597,67598,67599,67600,67601,67602,67603,67604,67605,67606,67607,67608,67609,67610,67611,67612,67613,67614,67615,67616,67617,67618,67619,67620,67621,67622,67623,67624,67625,67626,67627,67628,67629,67630,67631,67632,67633,67634,67635,67636,67637,67639,67640,67644,67647,67648,67649,67650,67651,67652,67653,67654,67655,67656,67657,67658,67659,67660,67661,67662,67663,67664,67665,67666,67667,67668,67669,67671,67672,67673,67674,67675,67676,67677,67678,67679,67840,67841,67842,67843,67844,67845,67846,67847,67848,67849,67850,67851,67852,67853,67854,67855,67856,67857,67858,67859,67860,67861,67862,67863,67864,67865,67866,67867,67872,67873,67874,67875,67876,67877,67878,67879,67880,67881,67882,67883,67884,67885,67886,67887,67888,67889,67890,67891,67892,67893,67894,67895,67896,67897,67903,67968,67969,67970,67971,67972,67973,67974,67975,67976,67977,67978,67979,67980,67981,67982,67983,67984,67985,67986,67987,67988,67989,67990,67991,67992,67993,67994,67995,67996,67997,67998,67999,68e3,68001,68002,68003,68004,68005,68006,68007,68008,68009,68010,68011,68012,68013,68014,68015,68016,68017,68018,68019,68020,68021,68022,68023,68030,68031,68096,68112,68113,68114,68115,68117,68118,68119,68121,68122,68123,68124,68125,68126,68127,68128,68129,68130,68131,68132,68133,68134,68135,68136,68137,68138,68139,68140,68141,68142,68143,68144,68145,68146,68147,68160,68161,68162,68163,68164,68165,68166,68167,68176,68177,68178,68179,68180,68181,68182,68183,68184,68192,68193,68194,68195,68196,68197,68198,68199,68200,68201,68202,68203,68204,68205,68206,68207,68208,68209,68210,68211,68212,68213,68214,68215,68216,68217,68218,68219,68220,68221,68222,68223,68352,68353,68354,68355,68356,68357,68358,68359,68360,68361,68362,68363,68364,68365,68366,68367,68368,68369,68370,68371,68372,68373,68374,68375,68376,68377,68378,68379,68380,68381,68382,68383,68384,68385,68386,68387,68388,68389,68390,68391,68392,68393,68394,68395,68396,68397,68398,68399,68400,68401,68402,68403,68404,68405,68416,68417,68418,68419,68420,68421,68422,68423,68424,68425,68426,68427,68428,68429,68430,68431,68432,68433,68434,68435,68436,68437,68440,68441,68442,68443,68444,68445,68446,68447,68448,68449,68450,68451,68452,68453,68454,68455,68456,68457,68458,68459,68460,68461,68462,68463,68464,68465,68466,68472,68473,68474,68475,68476,68477,68478,68479,68608,68609,68610,68611,68612,68613,68614,68615,68616,68617,68618,68619,68620,68621,68622,68623,68624,68625,68626,68627,68628,68629,68630,68631,68632,68633,68634,68635,68636,68637,68638,68639,68640,68641,68642,68643,68644,68645,68646,68647,68648,68649,68650,68651,68652,68653,68654,68655,68656,68657,68658,68659,68660,68661,68662,68663,68664,68665,68666,68667,68668,68669,68670,68671,68672,68673,68674,68675,68676,68677,68678,68679,68680,126464,126465,126466,126467,126469,126470,126471,126472,126473,126474,126475,126476,126477,126478,126479,126480,126481,126482,126483,126484,126485,126486,126487,126488,126489,126490,126491,126492,126493,126494,126495,126497,126498,126500,126503,126505,126506,126507,126508,126509,126510,126511,126512,126513,126514,126516,126517,126518,126519,126521,126523,126530,126535,126537,126539,126541,126542,126543,126545,126546,126548,126551,126553,126555,126557,126559,126561,126562,126564,126567,126568,126569,126570,126572,126573,126574,126575,126576,126577,126578,126580,126581,126582,126583,126585,126586,126587,126588,126590,126592,126593,126594,126595,126596,126597,126598,126599,126600,126601,126603,126604,126605,126606,126607,126608,126609,126610,126611,126612,126613,126614,126615,126616,126617,126618,126619,126625,126626,126627,126629,126630,126631,126632,126633,126635,126636,126637,126638,126639,126640,126641,126642,126643,126644,126645,126646,126647,126648,126649,126650,126651,1114109];function F(){}function U(e,t,n){var r="undefined"!=typeof navigator&&/MSIE\s8\.0/.test(navigator.userAgent),o="rgba(255, 255, 255, 1)",i="rgba(0, 0, 0, 0.8)",a="";void 0!==B&&(o=B.fontSet,i=B.backgroundSet,a=B.edgeSet),r&&(o="rgb(255, 255, 255)",i="rgb(0, 0, 0)"),F.call(this),this.cue=t,this.cueDiv=D(e,t.text);var A={color:o,backgroundColor:i,textShadow:a,position:"relative",left:0,right:0,top:0,bottom:0,display:"inline"};r||(A.writingMode=""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",A.unicodeBidi="plaintext"),this.applyStyles(A,this.cueDiv),this.div=e.document.createElement("div"),A={textAlign:"middle"===t.align?"center":t.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},r||(A.direction=function(e){var t,n=[],r="";if(!e||!e.childNodes)return"ltr";function o(e,t){for(var n=t.childNodes.length-1;n>=0;n--)e.push(t.childNodes[n])}function i(e){if(!e||!e.length)return null;var t=e.pop(),n=t.textContent||t.innerText;if(n){var r=n.match(/^.*(\n|\r)/);return r?(e.length=0,r[0]):n}return"ruby"===t.tagName?i(e):t.childNodes?(o(e,t),i(e)):void 0}for(o(n,e);r=i(n);)for(var a=0;a<r.length;a++){t=r.charCodeAt(a);for(var A=0;A<P.length;A++)if(P[A]===t)return"rtl"}return"ltr"}(this.cueDiv),A.writingMode=""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl".stylesunicodeBidi="plaintext"),this.applyStyles(A),this.div.appendChild(this.cueDiv);var s=0;switch(t.positionAlign){case"start":s=t.position;break;case"middle":s=t.position-t.size/2;break;case"end":s=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(s,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(s,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function N(e){var t,n,r,o,i="undefined"!=typeof navigator&&/MSIE\s8\.0/.test(navigator.userAgent);if(e.div){n=e.div.offsetHeight,r=e.div.offsetWidth,o=e.div.offsetTop;var a=(a=e.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();e=e.div.getBoundingClientRect(),t=a?Math.max(a[0]&&a[0].height||0,e.height/a.length):0}this.left=e.left,this.right=e.right,this.top=e.top||o,this.height=e.height||n,this.bottom=e.bottom||o+(e.height||n),this.width=e.width||r,this.lineHeight=void 0!==t?t:e.lineHeight,i&&!this.lineHeight&&(this.lineHeight=13)}function W(e,t,n,r){var o=new N(t),i=t.cue,a=function(e){if("number"==typeof e.line&&(e.snapToLines||e.line>=0&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,n=t.textTrackList,r=0,o=0;o<n.length&&n[o]!==t;o++)"showing"===n[o].mode&&r++;return-1*++r}(i),A=[];if(i.snapToLines){var s;switch(i.vertical){case"":A=["+y","-y"],s="height";break;case"rl":A=["+x","-x"],s="width";break;case"lr":A=["-x","+x"],s="width"}var c=o.lineHeight,u=c*Math.round(a),l=n[s]+c,f=A[0];Math.abs(u)>l&&(u=u<0?-1:1,u*=Math.ceil(l/c)*c),a<0&&(u+=""===i.vertical?n.height:n.width,A=A.reverse()),o.move(f,u)}else{var p=o.lineHeight/n.height*100;switch(i.lineAlign){case"middle":a-=p/2;break;case"end":a-=p}switch(i.vertical){case"":t.applyStyles({top:t.formatStyle(a,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(a,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(a,"%")})}A=["+y","-x","+x","-y"],o=new N(t)}var d=function(e,t){for(var o,i=new N(e),a=1,A=0;A<t.length;A++){for(;e.overlapsOppositeAxis(n,t[A])||e.within(n)&&e.overlapsAny(r);)e.move(t[A]);if(e.within(n))return e;var s=e.intersectPercentage(n);a>s&&(o=new N(e),a=s),e=new N(i)}return o||i}(o,A);t.move(d.toCSSCompatValues(n))}F.prototype.applyStyles=function(e,t){for(var n in t=t||this.div,e)e.hasOwnProperty(n)&&(t.style[n]=e[n])},F.prototype.formatStyle=function(e,t){return 0===e?0:e+t},U.prototype=x(F.prototype),U.prototype.constructor=U,N.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},N.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},N.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},N.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},N.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},N.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},N.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},N.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,n=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,r=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||r,height:e.height||t,bottom:e.bottom||r+(e.height||t),width:e.width||n}},y.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},y.convertCueToDOMTree=function(e,t){return e&&t?D(e,t):null},y.processCues=function(e,t,n){if(!e||!t||!n)return null;for(;n.firstChild;)n.removeChild(n.firstChild);var r=e.document.createElement("div");if(r.style.position="absolute",r.style.left="0",r.style.right="0",r.style.top="0",r.style.bottom="0",r.style.margin="1.5%",n.appendChild(r),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}(t)){var o=[],i=N.getSimpleBoxPosition(r),a={font:Math.round(.05*i.height*100)/100*w+"px sans-serif"};!function(){for(var n,A,s=0;s<t.length;s++)A=t[s],n=new U(e,A,a),r.appendChild(n.div),W(0,n,i,o),A.displayState=n.div,o.push(N.getSimpleBoxPosition(n))}()}else for(var A=0;A<t.length;A++)r.appendChild(t[A].displayState)},(y.Parser=function(e,t){this.window=e,this.state="INITIAL",this.buffer="",this.decoder=t||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(e){if(!(e instanceof k))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e,t){var n=this;function r(){for(var e=n.buffer,t=0;t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var r=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,n.buffer=e.substr(t),r}e&&(n.buffer+=n.decoder.decode(e,{stream:!0}));try{var o;if("INITIAL"===n.state){if(!/\r\n|\n/.test(n.buffer))return this;var i=(o=r()).match(/^WEBVTT([ \t].*)?$/);if(!i||!i[0])throw new k(k.Errors.BadSignature);n.state="HEADER"}for(var a=!1;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(a?a=!1:o=r(),n.state){case"HEADER":/:/.test(o)?T(o,(function(e,t){"Region"===e&&function(e){var t=new S;if(T(e,(function(e,n){switch(e){case"id":t.set(e,n);break;case"width":t.percent(e,n);break;case"lines":t.integer(e,n);break;case"regionanchor":case"viewportanchor":var r=n.split(",");if(2!==r.length)break;var o=new S;if(o.percent("x",r[0]),o.percent("y",r[1]),!o.has("x")||!o.has("y"))break;t.set(e+"X",o.get("x")),t.set(e+"Y",o.get("y"));break;case"scroll":t.alt(e,n,["up"])}}),/=/,/\s/),t.has("id")){var r=new C;r.width=t.get("width",100),r.lines=t.get("lines",3),r.regionAnchorX=t.get("regionanchorX",0),r.regionAnchorY=t.get("regionanchorY",100),r.viewportAnchorX=t.get("viewportanchorX",0),r.viewportAnchorY=t.get("viewportanchorY",100),r.scroll=t.get("scroll",""),n.onregion&&n.onregion(r),n.regionList.push({id:t.get("id"),region:r})}}(t)}),/:/):o||(n.state="ID");continue;case"NOTE":o||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(o)){n.state="NOTE";break}if(!o)continue;if(n.cue=new h(0,0,""),n.state="CUE",-1===o.indexOf("--\x3e")){n.cue.id=o;continue}case"CUE":try{L(o,n.cue,n.regionList)}catch(e){n.reportOrThrowError(e),n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":var A=-1!==o.indexOf("--\x3e");if(!o||A&&(a=!0)){n.oncue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}n.cue.text&&(n.cue.text+="\n"),n.cue.text+=o;continue;case"BADCUE":o||(n.state="ID");continue}}if(!t)return"CUETEXT"===n.state&&n.cue&&n.oncue&&n.oncue(n.cue),n.flush(),this}catch(e){n.reportOrThrowError(e),"CUETEXT"===n.state&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state="INITIAL"===n.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse(null,!0)),"INITIAL"===e.state)throw new k(k.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this}};var j=y,Y=function(){var e="";screen.width&&(e+=(screen.width?screen.width:"")+" x "+(screen.height?screen.height:""));var t,n,r,o=navigator.appVersion,i=navigator.userAgent,a=navigator.appName,A=""+parseFloat(navigator.appVersion),s=parseInt(navigator.appVersion,10);-1!=(n=i.indexOf("Opera"))&&(a="Opera",A=i.substring(n+6),-1!=(n=i.indexOf("Version"))&&(A=i.substring(n+8))),-1!=(n=i.indexOf("OPR"))?(a="Opera",A=i.substring(n+4)):-1!=(n=i.indexOf("SamsungBrowser"))?(a="SamsungBrowser",A=i.substring(n+15)):-1!=(n=i.indexOf("Edge"))?(a="Microsoft Edge",A=i.substring(n+5)):-1!=(n=i.indexOf("MSIE"))?(a="Microsoft Internet Explorer",A=i.substring(n+5),-1!==i.indexOf("Trident/")&&-1!==i.indexOf("rv:")&&(A=i.substring(i.indexOf("rv:")+3))):-1!=(n=i.indexOf("Chrome"))?(a="Chrome",A=i.substring(n+7)):-1!=(n=i.indexOf("CriOS"))?(a="Chrome",A=i.substring(n+6)):-1!=(n=i.indexOf("Firefox"))?(a="Firefox",A=i.substring(n+8)):-1!=(n=i.indexOf("FxiOS"))?(a="Firefox",A=i.substring(n+6)):-1!=(n=i.indexOf("Safari"))?(a="Safari",A=i.substring(n+7),-1!=(n=i.indexOf("Version"))&&(A=i.substring(n+8))):-1!==i.indexOf("Trident/")?(a="Microsoft Internet Explorer",A=i.substring(i.indexOf("rv:")+3)):(t=i.lastIndexOf(" ")+1)<(n=i.lastIndexOf("/"))&&(a=i.substring(t,n),A=i.substring(n+1),a.toLowerCase()==a.toUpperCase()&&(a=navigator.appName)),i.indexOf(" wv"),-1!=(r=A.indexOf(";"))&&(A=A.substring(0,r)),-1!=(r=A.indexOf(" "))&&(A=A.substring(0,r)),-1!=(r=A.indexOf(")"))&&(A=A.substring(0,r)),s=parseInt(""+A,10),isNaN(s)&&(A=""+parseFloat(navigator.appVersion),s=parseInt(navigator.appVersion,10));var c=/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(o),u=!!navigator.cookieEnabled;void 0!==navigator.cookieEnabled||u||(document.cookie="testcookie",u=-1!=document.cookie.indexOf("testcookie"));var l="-",f=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS XI",r:/Mac OS X 11/},{s:"Mac OS X",r:/Mac OS X 10/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var p in f){var d=f[p];if(d.r.test(i)){l=d.s;break}}var g="-";switch(/Windows/.test(l)&&(g=/Windows (.*)/.exec(l)[1],l="Windows"),l){case"Mac OS XI":g=/Mac OS X (11[\.\_\d]+)/.exec(i)[1];break;case"Mac OS X":g=/Mac OS X (10[\.\_\d]+)/.exec(i)[1];break;case"Android":g=/Android ([\.\_\d]+)/.exec(i)[1];break;case"iOS":g=(g=/OS (\d+)_(\d+)_?(\d+)?/.exec(o))?g[1]+"."+g[2]+"."+(0|g[3]):""}return{screen:e,browser:a,browserVersion:A,browserMajorVersion:s,mobile:c,ua:i,os:l,osVersion:g,cookies:u}},G=/<sync|<\/body|<\/sami/i,z=/\r\n?|\n/g,_=/<[a-z]*[^>]*<[a-z]*/g,V=/<sync[^>]+?start[^=]*=[^0-9]*([0-9]*)["^0-9"]*/i,H=/<br[^>]*>/gi,J=function(e,t){return t=(((t||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join(""),e.replace(/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,"").replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,(function(e,n){return t.indexOf("<"+n.toLowerCase()+">")>-1?e:""}))},Z=function(e){return e.sort((function(e,t){var n;return 0==(n=e.start-t.start)?e.end-t.end:n}))},K=function(){var e={},t=function(e){return e.map((function(e){return new h(e.start,e.end,e.text)}))};return e.load=function(e,n,r,o){fetch(e.file).then((function(e){e.ok?e.text().then((function(e){var o=[],i=[];if(e.indexOf("WEBVTT")>=0){OvenPlayerConsole.log("WEBVTT LOADED");var A=new j.Parser(window,j.StringDecoder());i=[],A.oncue=function(e){i.push(e)},A.onflush=function(){r(i)},A.parse(e)}else if(e.indexOf("SAMI")>=0){OvenPlayerConsole.log("SAMI LOADED");var s=function(e,t){var n,r,o,i,a,A,s,c,u,l;if(s=function(){var t,n,r,a,s,c,u,f,p,d,g,h,v,m,C,y;for(n=function(e){var n;return(n=new Error(e)).line=u,n.context=t,o.push(n)},u=1,p=[],v={},h=e;d=h.search(),!(f<=0||d<0);)f=h.slice(d+1).search(G)+1,t=f>0?h.slice(d,d+f):h.slice(d),u+=(null!=(m=h.slice(0,d).match(z))?m.length:void 0)||0,_.test(t)&&n("ERROR_BROKEN_TAGS"),h=h.slice(d+f),(null===(g=+(null!=(C=t.match(V))?parseFloat(C[1]/1e3):void 0))||g<0)&&n("ERROR_INVALID_TIME"),(s=i(t))||n("ERROR_INVALID_LANGUAGE"),u+=(null!=(y=t.match(z))?y.length:void 0)||0,t=(t=t.replace(z,"")).replace(H,"\n"),a={start:g,text:"",contents:r=J(t).trim()},s&&(a.text=r),v[s]||(v[s]=[]),a.start&&v[s].push(a);l=l||function(){var e,t,n=window.navigator,r=["language","browserLanguage","systemLanguage","userLanguage"];if(Array.isArray(n.languages))for(e=0;e<n.languages.length;e++)if((t=n.languages[e])&&t.length)return t;for(e=0;e<r.length;e++)if((t=n[r[e]])&&t.length)return t;return null}();var b=Object.keys(v);return b&&b.length>0&&(c=b.indexOf(l)>-1?v[l]:v[b.filter((function(e){return"undefined"!==e}))[0]],c=Z(c),c=A(c),p=p.concat(c)),Z(p)},i=function(e){var t,r;if(e)for(t in n)if((r=n[t]).reClassName.test(e))return r.lang},A=function(e){var t,n,o;for(t=e.length;t--;)n=e[t],null!=(o=e[t-1])&&(o.end=n.start),n.contents&&"&nbsp;"!==n.contents?(delete e[t].contents,n.end||(n.end=n.start+r)):e.splice(t,1);return e},o=[],n={KRCC:{lang:"ko",reClassName:new RegExp("class[^=]*?=[\"'S]*(KRCC)['\"S]?","i")},KOCC:{lang:"ko",reClassName:new RegExp("class[^=]*?=[\"'S]*(KOCC)['\"S]?","i")},KR:{lang:"ko",reClassName:new RegExp("class[^=]*?=[\"'S]*(KR)['\"S]?","i")},ENCC:{lang:"en",reClassName:new RegExp("class[^=]*?=[\"'S]*(ENCC)['\"S]?","i")},EGCC:{lang:"en",reClassName:new RegExp("class[^=]*?=[\"'S]*(EGCC)['\"S]?","i")},EN:{lang:"en",reClassName:new RegExp("class[^=]*?=[\"'S]*(EN)['\"S]?","i")},JPCC:{lang:"ja",reClassName:new RegExp("class[^=]*?=[\"'S]*(JPCC)['\"S]?","i")}},null!=t?t.definedLangs:void 0)for(a in u=t.definedLangs)c=u[a],n[a]=c;return r=(null!=t?t.duration:void 0)||10,l=t.fixedLang,e=e.trim(),{result:s(),errors:o}}(e,{fixedLang:n});i=t(s.result),r(i)}else OvenPlayerConsole.log("SRT LOADED"),o=function(e){var t=[],n=(e=a(e)).split("\r\n\r\n");1===n.length&&(n=e.split("\n\n"));for(var r=0;r<n.length;r++)if("WEBVTT"!==n[r]){var o=u(n[r]);o.text&&t.push(o)}return t}(e),i=t(o),r(i)})).catch((function(e){o(e)})):o(e.status)})).catch((function(e){o(e)}))},e},X="idle",q="complete",$="paused",ee="playing",te="error",ne="loading",re="stalled",oe="adLoaded",ie="adPlaying",ae="adPaused",Ae="adComplete",se="adError",ce="html5",ue="webrtc",le="dash",fe="hls",pe="ready",de="destroy",ge="playlistChanged",he="allPlaylistEnded",ve="unstableNetwork",me="error",Ce="stateChanged",ye="pause",be="play",we="clicked",Ee="resized",Be="fullscreenChanged",xe="warning",ke="adChanged",Ie="adTime",Se="bufferChanged",Te="time",Le="volumeChanged",Re="mute",Me="metaChanged",Oe="sourceChanged",Qe="qualityLevelChanged",De="cueChanged",Pe="captionChanged",Fe="timeDisplayModeChanged",Ue="p2pMode",Ne="audioTrackChanged",We={codes:""},je=[{lang:"en",ui:{context:"About OvenPlayer",controls:{live:"Live Streaming",low_latency_live:"Sub-Second Latency Streaming",low_latency_p2p:"Sub-Second Latency P2P"},playlist:"Playlist",setting:{title:"Settings",speed:"Speed",speedUnit:"x",source:"Source",quality:"Quality",audioTrack:"Audio",caption:"Caption",display:"Display"}},api:{message:{muted_play:"Please touch here to turn on the sound."},error:{100:{code:100,message:"Can not load due to unknown reasons.",reason:"Can not load due to unknown reasons."},101:{code:101,message:"Can not load due to playable media not found.",reason:"Can not load due to playable media not found."},102:{code:102,message:"Flash fetching process aborted. </br><a href='http://www.adobe.com/go/getflashplayer' target='_self'><img src='http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif' alt='Get Adobe Flash player'></a>",reason:"It looks like not found swf or your environment is localhost."},103:{code:103,message:"Can not load due to dash.js. Please use the latest dash.js.",reason:"dash.js version is old."},104:{code:104,message:"Can not load due to google ima for Ads. ",reason:"Please check the google ima library."},105:{code:105,message:"Error initializing DASH.",reason:"Error initializing DASH."},106:{code:106,message:"Error initializing HLS.",reason:"Error initializing HLS."},300:{code:300,message:"Can not play due to unknown reasons.",reason:"Can not play due to unknown reasons."},301:{code:301,message:"Fetching process aborted by user.",reason:"Fetching process aborted by user."},302:{code:302,message:"Some of the media could not be downloaded due to a network error.",reason:"Error occurred when downloading."},303:{code:303,message:"Unable to load media. This may be due to a server or network error, or due to an unsupported format.",reason:"Error occurred when decoding."},304:{code:304,message:"Media playback has been canceled. It looks like your media is corrupted or your browser does not support the features your media uses.",reason:"Media playback not supported."},305:{code:305,message:"Can not load captions due to unknown reasons.",reason:"Can not load captions due to unknown reasons."},306:{code:306,message:"Unable to load media. This may be due to a server or network error, or due to an unsupported format.",reason:"The server cannot or will not process the request."},307:{code:307,message:"Unable to load media. This may be due to a server or network error, or due to an unsupported format.",reason:"The server refused the request."},308:{code:308,message:"Unable to load media. This may be due to a server or network error, or due to an unsupported format.",reason:"The server do not accept the request."},501:{code:501,message:"Connection with low-latency(OME) server failed.",reason:"WebSocket connection failed."},502:{code:502,message:"Connection with low-latency(OME) server failed.",reason:"WebRTC addIceCandidate failed."},503:{code:503,message:"Connection with low-latency(OME) server failed.",reason:"WebRTC setRemoteDescription failed."},504:{code:504,message:"Connection with low-latency(OME) server failed.",reason:"WebRTC peer createOffer failed."},505:{code:505,message:"Connection with low-latency(OME) server failed.",reason:"WebRTC setLocalDescription failed."},506:{code:506,message:"Connection with low-latency(OME) server failed.",reason:"WebRTC internal error."},510:{code:510,message:"Network connection is unstable. Check the network connection.",reason:"Network is slow."},511:{code:511,message:"Connection with low-latency(OME) terminated unexpectedly.",reason:"Unexpected end of connection."},512:{code:512,message:"Connection with low-latency(OME) server failed.",reason:"Connection timeout."}}}},{lang:"ko",ui:{context:" ",controls:{live:"",low_latency_live:" ",low_latency_p2p:" P2P"},playlist:"",setting:{title:"",speed:" ",speedUnit:"x",source:"",quality:"",audioTrack:"",caption:"",display:""}},api:{message:{muted_play:"  "},error:{100:{code:100,message:"       .",reason:"       ."},101:{code:101,message:"       .",reason:"Can not load due to playable media not found."},102:{code:102,message:"   . </br><a href='http://www.adobe.com/go/getflashplayer' target='_self'><img src='http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif' alt='Get Adobe Flash player'></a>",reason:"It looks like not found swf or your environment is localhost."},103:{code:103,message:"DashJS     .  dash.js  .",reason:"dash.js version is old."},104:{code:104,message:"Google IMA      .",reason:"Please check the google ima library."},105:{code:105,message:"DASH    .",reason:"Error initializing DASH."},106:{code:106,message:"HLS    .",reason:"Error initializing HLS."},300:{code:300,message:"      .",reason:"Can not play due to unknown reasons."},301:{code:301,message:"   .",reason:"Fetching process aborted by user."},302:{code:302,message:"        .",reason:"Error occurred when downloading."},303:{code:303,message:"    .            .",reason:"Error occurred when decoding."},304:{code:304,message:"  .          .",reason:"Media playback not supported."},305:{code:305,message:"        .",reason:"Can not load captions due to unknown reasons."},306:{code:306,message:"    .            .",reason:"The server cannot or will not process the request."},307:{code:307,message:"    .            .",reason:"The server refused the request."},308:{code:308,message:"    .            .",reason:"The server do not accept the request."},501:{code:501,message:"  ",reason:"WebSocket connection failed."},502:{code:502,message:"(OME)   .",reason:"WebRTC addIceCandidate failed."},503:{code:503,message:"(OME)   .",reason:"WebRTC setRemoteDescription failed."},504:{code:504,message:"(OME)   .",reason:"WebRTC peer createOffer failed."},505:{code:505,message:"(OME)   .",reason:"WebRTC setLocalDescription failed."},506:{code:506,message:"(OME)   .",reason:"WebRTC internal error."},510:{code:510,message:"  .   .",reason:"Network is slow."},511:{code:511,message:"(OME)   .",reason:"Unexpected end of connection."},512:{code:512,message:"(OME)   .",reason:"Connection timeout."}}}},{lang:"pl",ui:{context:"O OvenPlayer",controls:{live:"Transmisja na ywo",low_latency_live:"Transmisja z niskim opnieniem",low_latency_p2p:"Transmisja z niskim opnieniem P2P"},playlist:"Playlista",setting:{title:"Ustawienia",speed:"Prdko",speedUnit:"x",source:"rodo",quality:"Jako",audioTrack:"Audio",caption:"Podtytu",display:"Wywietlacz"}},api:{message:{muted_play:"Nacinij tutaj, aby aktywowa dwik"},error:{100:{code:100,message:"Nie mona zaadowa z nieznanego powodu.",reason:"Can not load due to unknown reasons."},101:{code:101,message:"Nie mona zaadowa, poniewa nie znaleziono multimediw, ktry mona odtworzy.",reason:"Can not load due to playable media not found."},102:{code:102,message:"Flash fetching process aborted. </br><a href='http://www.adobe.com/go/getflashplayer' target='_self'><img src='http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif' alt='Get Adobe Flash player'></a>",reason:"It looks like not found swf or your environment is localhost."},103:{code:103,message:"Nie mona zaadowa, poniewa wersja dash.js jest za stara.",reason:"dash.js version is old."},104:{code:104,message:"Can not load due to google ima for Ads. ",reason:"Please check the google ima library."},105:{code:105,message:"Nie mona zaadowa, nie znaleziono DASH.",reason:"Error initializing DASH."},106:{code:106,message:"Nie mona zaadowa, nie znaleziono hlsjs.",reason:"Error initializing HLS"},300:{code:300,message:"Nie mona odtworzy z nieznanego powodu.",reason:"Can not play due to unknown reasons."},301:{code:301,message:"Proces pobierania przerwany przez uytkownika.",reason:"Fetching process aborted by user."},302:{code:302,message:"Nie udao si pobra niektrych multimediw z powodu bdu sieci.",reason:"Error occurred when downloading."},303:{code:303,message:"Nie udao si zaadowa niektrych multimediw. Moe by to spowodowane problemem z serwerem, sieci lub niewspieranym formatem.",reason:"Error occurred when decoding."},304:{code:304,message:"Odtwarzanie zostao anulowane. Wyglda na to, e plik jest uszkodzony lub Twoja przegldarka nie obsuguje tego pliku.",reason:"Media playback not supported."},305:{code:305,message:"Nie mona wczyta napisw z nieznanego powodu.",reason:"Can not load captions due to unknown reasons."},306:{code:306,message:"Nie udao si zaadowa niektrych multimediw. Moe by to spowodowane problemem z serwerem, sieci lub niewspieranym formatem.",reason:"The server cannot or will not process the request."},307:{code:307,message:"Nie udao si zaadowa niektrych multimediw. Moe by to spowodowane problemem z serwerem, sieci lub niewspieranym formatem.",reason:"The server refused the request."},308:{code:308,message:"Nie udao si zaadowa niektrych multimediw. Moe by to spowodowane problemem z serwerem, sieci lub niewspieranym formatem.",reason:"The server do not accept the request."},501:{code:501,message:"Poczenie z serwerem niskiego opnienia (OME) nie powiodo si.",reason:"WebSocket connection failed."},502:{code:502,message:"Poczenie z serwerem niskiego opnienia (OME) nie powiodo si.",reason:"WebRTC addIceCandidate failed."},503:{code:503,message:"Poczenie z serwerem niskiego opnienia (OME) nie powiodo si.",reason:"WebRTC setRemoteDescription failed."},504:{code:504,message:"Poczenie z serwerem niskiego opnienia (OME) nie powiodo si.",reason:"WebRTC peer createOffer failed."},505:{code:505,message:"Poczenie z serwerem niskiego opnienia (OME) nie powiodo si.",reason:"WebRTC setLocalDescription failed."},506:{code:506,message:"Poczenie z serwerem niskiego opnienia (OME) nie powiodo si.",reason:"WebRTC internal error."},510:{code:510,message:"Poczenie sieciowe jest niestabilne. Sprawd swoj sie.",reason:"Network is slow."},511:{code:511,message:"Poczenie z serwerem niskiego opnienia (OME) nieoczekiwanie zakoczone.",reason:"Unexpected end of connection."},512:{code:512,message:"Poczenie z serwerem niskiego opnienia (OME) nie powiodo si.",reason:"Connection timeout."}}}}],Ye=function(e){return"subtitles"===e||"captions"===e},Ge=function(e){var t=e,n=[],r=function(e,t,n){var r=0,o=e.length;for(r=0;r<o;r++){var i=e[r];i.listener.apply(i.context||n,t)}};return t.on=function(e,r,o){return(n[e]||(n[e]=[])).push({listener:r,context:o}),t},t.trigger=function(e){if(!n)return!1;var o=[].slice.call(arguments,1),i=n[e],a=n.all;i&&r(i,o,t),a&&r(a,arguments,t)},t.off=function(e,r,o){if(!n)return!1;if(!e&&!r&&!o)return n=[],t;for(var i=e?[e]:Object.keys(n),a=0,A=i.length;a<A;a++){e=i[a];var s=n[e];if(s){var c=n[e]=[];if(r||o)for(var u=0,l=s.length;u<l;u++){var f=s[u];(r&&r!==f.listener&&r!==f.listener.listener&&r!==f.listener._listener||o&&o!==f.context)&&c.push(f)}c.length||delete n[e]}}return t},t.once=function(e,n,r){var o=0,i=function r(){o++||(t.off(e,r),n.apply(t,arguments))};return i._listener=n,t.on(e,i,r)},t},ze=(n(1001),function e(t){var n={},r=null,o=function(e,t){var n=e.querySelectorAll(t);return n.length>1?n:n[0]};return(r=i().isElement(t)||i().every(t,(function(e){return i().isElement(e)}))?t:"document"===t?document:"window"===t?window:o(document,t))?(n.show=function(){r.style.display="block"},n.hide=function(){r.style.display="none"},n.addClass=function(e){r.classList?r.classList.add(e):-1===r.className.split(" ").indexOf(e)&&(r.className+=" "+e)},n.after=function(e){r.insertAdjacentHTML("afterend",e)},n.append=function(e){r.appendChild(e)},n.before=function(e){r.insertAdjacentHTML("beforebegin",e)},n.children=function(){return r.children||[]},n.contains=function(e){return r!==e&&r.contains(e)},n.empty=function(){r.innerHTML=""},n.find=function(t){return e(o(r,t))},n.css=function(e,t){if(!t)return r.style[e];r.length>0?r.forEach((function(n){n.style[e]=t})):r.style[e]=t},n.removeClass=function(e){r.classList?r.classList.remove(e):r.className=r.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")},n.removeAttribute=function(e){r.removeAttribute(e)},n.text=function(e){if(void 0===e)return r.textContent;r.textContent=e},n.html=function(e){r.innerHTML=e},n.hasClass=function(e){return r.classList?r.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(r.name)},n.is=function(e){return r===e},n.offset=function(){var e=r.getBoundingClientRect();return{top:e.top+document.body.scrollTop,left:e.left+document.body.scrollLeft}},n.width=function(){return r.clientWidth},n.height=function(){return r.clientHeight},n.attr=function(e){return r.getAttribute(e)},n.replace=function(e){r.replaceWith(e)},n.remove=function(){r.length>1?r.parentElement.removeChild(r):r.remove()},n.removeChild=function(e){if(e)r.removeChild(e);else for(;r.hasChildNodes();)r.removeChild(r.firstChild)},n.get=function(){return r},n.closest=function(t){r.closest=function(e){var t=r;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null};var n=r.closest(t);return n?e(n):null},n):null}),_e=function(e,t){if(e)return 0==e.indexOf("rtmp:")||"rtmp"==t},Ve=function(e,t){return!!e&&(0===e.indexOf("ws:")||0===e.indexOf("wss:")||"webrtc"===t)},He=function(e,t){if(e)return"hls"===t||"m3u8"===t||"application/vnd.apple.mpegurl"===t||"m3u8"==A(e)},Je=function(e,t){if(e)return"mpd"===t||"dash"===t||"application/dash+xml"===t||"mpd"==A(e)},Ze=function(e){if(!e)return null;var t=null;if("string"==typeof e)t=document.getElementById(e);else{if(!e.nodeType)return null;t=e}return t},Ke=function(){var e={};OvenPlayerConsole.log("SupportChecker loaded.");var t=Y(),n=[{name:"html5",checkSupport:function(e){var n=document.createElement("video");if(!n.canPlayType)return!1;var r=e.file,o=e.type;if(!o)return!1;var i=e.mimeType||{aac:"audio/mp4",mp4:"video/mp4",f4v:"video/mp4",m4v:"video/mp4",mov:"video/mp4",mp3:"audio/mpeg",mpeg:"audio/mpeg",ogv:"video/ogg",ogg:"video/ogg",oga:"video/ogg",vorbis:"video/ogg",webm:"video/webm",f4a:"video/aac",m3u8:"application/vnd.apple.mpegurl",m3u:"application/vnd.apple.mpegurl",hls:"application/vnd.apple.mpegurl"}[o];return!(He(r,o)&&("Microsoft Edge"===t.browser||"Android"===t.os)||_e(r,o)||Ve(r,o)||!i||!n.canPlayType(i))}},{name:"webrtc",checkSupport:function(e){if(!document.createElement("video").canPlayType)return!1;if(_e(t,n))return!1;var t=e.file,n=e.type;return!!Ve(t,n)}},{name:"dash",checkSupport:function(e){var t=e.file,n=e.type;return!_e(t,n)&&!("function"!=typeof(window.MediaSource||window.WebKitMediaSource)||!Je(t,n))}},{name:"hls",checkSupport:function(e){document.createElement("video");var t,n,r,o,i=e.file,a=e.type;return!_e(i,a)&&(t=function(){if("undefined"!=typeof window)return window.MediaSource||window.WebKitMediaSource}(),n=window.SourceBuffer||window.WebKitSourceBuffer,r=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),o=!n||n.prototype&&"function"==typeof n.prototype.appendBuffer&&"function"==typeof n.prototype.remove,!!r&&!!o)}},{name:"rtmp",checkSupport:function(e){var n=e.file,r=e.type;return!(!_e(n,r)||!function(){var e=!1;if("ActiveXObject"in window)try{e=!!new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(t){e=!1}else e=!!navigator.mimeTypes["application/x-shockwave-flash"];return e}()||"Microsoft Edge"===t.browser||"Android"===t.os||"iOS"===t.os||"Safari"===t.browser)}}];return e.findProviderNameBySource=function(e){OvenPlayerConsole.log("SupportChecker : findProviderNameBySource()",e);for(var t=e===Object(e)?e:{},r=0;r<n.length;r++)if(n[r].checkSupport(t))return n[r].name},e.findProviderNamesByPlaylist=function(t){OvenPlayerConsole.log("SupportChecker : findProviderNamesByPlaylist()",t);var n=[],r=t;if(r&&r.sources){for(var o=0;o<r.sources.length;o++){var i=r.sources[o];if(i){var a=e.findProviderNameBySource(i);a&&n.push(a)}}return n}return null},e},Xe="data:video/mp4;base64, AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw",qe=function(e,t){t&&(t.setState(te),t.pause(),t.trigger(me,e))},$e=function(e,t){var n=0;if(e)if(-1===t.getSourceIndex()){for(var r=0;r<e.length;r++)if(e[r].default){n=r;break}}else n=t.getSourceIndex();return n},et=function(e,t,n,r,o){var i,a="admanagerLoadingTimeout",A="",s="",c={},u=!1,l=!1,f={started:!1,active:!1,isVideoEnded:!1},p=null,d=null,g=null,h=null,v=null,m=null,C=null,y=!1,b=!1,w=n.getBrowser(),E="Android"===w.os||"iOS"===w.os;OvenPlayerConsole.log("IMA : started ","isMobile : ",E,r);try{A=google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,s=google.ima.AdErrorEvent.Type.AD_ERROR,google.ima.settings.setLocale(n.getLanguage()),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),d=function(e){console.log(e.getError().getVastErrorCode(),e.getError().getMessage()),l=!0;var n=e.getError().getInnerError();n&&console.log(n.getErrorCode(),n.getMessage()),t.trigger(se,{code:e.getError().getVastErrorCode(),message:e.getError().getMessage()}),f.active=!1,f.started=!0,t.play()},p=function(n){OvenPlayerConsole.log("IMA : OnManagerLoaded ");var r=new google.ima.AdsRenderingSettings;r.restoreCustomPlaybackStateOnAdBreakComplete=!0,v&&(OvenPlayerConsole.log("IMA : destroy adsManager----"),m.destroy(),m=null,v.destroy(),v=null),v=n.getAdsManager(e,r),m=function(e,t,n,r){var o={},i={},a=null,A=google.ima.AdEvent.Type.AD_BUFFERING,s=google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,c=google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,u=google.ima.AdErrorEvent.Type.AD_ERROR,l=google.ima.AdEvent.Type.ALL_ADS_COMPLETED,f=google.ima.AdEvent.Type.CLICK,p=google.ima.AdEvent.Type.SKIPPED,d=google.ima.AdEvent.Type.COMPLETE,g=google.ima.AdEvent.Type.FIRST_QUARTILE,h=google.ima.AdEvent.Type.LOADED,v=google.ima.AdEvent.Type.MIDPOINT,m=google.ima.AdEvent.Type.PAUSED,C=google.ima.AdEvent.Type.RESUMED,y=google.ima.AdEvent.Type.STARTED,b=google.ima.AdEvent.Type.USER_CLOSE,w=google.ima.AdEvent.Type.THIRD_QUARTILE,E=!1,B=null;return OvenPlayerConsole.log("IMA : Listener Created"),i[s]=function(e){OvenPlayerConsole.log("IMA LISTENER : ",e.type),n.started&&(n.active=!0,t.pause())},i[c]=function(e){OvenPlayerConsole.log("IMA LISTENER : ",e.type),n.active=!1,!n.started||0!==t.getPosition()&&n.isVideoEnded||t.play()},i[u]=function(e){E=!0,r(e)},i[l]=function(e){OvenPlayerConsole.log("IMA LISTENER : ",e.type),E=!0,n.isVideoEnded&&t.setState(q)},i[f]=function(e){OvenPlayerConsole.log(e.type),t.trigger(we,{type:"adclick"})},i[g]=function(e){OvenPlayerConsole.log(e.type)},i[A]=function(e){OvenPlayerConsole.log("AD_BUFFERING",e.type)},i[h]=function(n){OvenPlayerConsole.log(n.type);var r=e.getRemainingTime(),o=n.getAd();t.trigger(oe,{remaining:r,isLinear:o.isLinear()})},i[v]=function(e){OvenPlayerConsole.log(e.type)},i[m]=function(e){OvenPlayerConsole.log(e.type),t.setState(ae)},i[C]=function(e){OvenPlayerConsole.log(e.type),t.setState(ie)},i[y]=function(r){OvenPlayerConsole.log(r.type);var o=r.getAd();B=o;var i={isLinear:o.isLinear(),duration:o.getDuration(),skipTimeOffset:o.getSkipTimeOffset()};t.trigger(ke,i),o.isLinear()?(t.setState(ie),n.started=!0,a=setInterval((function(){var n=e.getRemainingTime(),r=o.getDuration();t.trigger(Ie,{duration:r,skipTimeOffset:o.getSkipTimeOffset(),remaining:n,position:r-n,skippable:e.getAdSkippableState()})}),300)):t.play()},i[d]=function(e){OvenPlayerConsole.log(e.type),e.getAd().isLinear()&&clearInterval(a),t.trigger(Ae)},i[p]=function(e){OvenPlayerConsole.log(e.type),e.getAd().isLinear()&&clearInterval(a),t.trigger(Ae)},i[b]=function(e){OvenPlayerConsole.log(e.type),e.getAd().isLinear()&&clearInterval(a),t.trigger(Ae)},i[w]=function(e){OvenPlayerConsole.log(e.type)},Object.keys(i).forEach((function(t){e.removeEventListener(t,i[t]),e.addEventListener(t,i[t])})),o.setAdCompleteCallback=function(e){},o.isAllAdComplete=function(){return E},o.isLinearAd=function(){return!B||B.isLinear()},o.destroy=function(){OvenPlayerConsole.log("IMAEventListener : destroy()"),Object.keys(i).forEach((function(t){e.removeEventListener(t,i[t])}))},o}(v,t,f,d),OvenPlayerConsole.log("IMA : created admanager and listner "),u=!0};var B=((i=document.createElement("div")).setAttribute("class","op-ads"),i.setAttribute("id","op-ads"),n.getContainer().append(i),i);g=new google.ima.AdDisplayContainer(B,e),(h=new google.ima.AdsLoader(g)).addEventListener(A,p,!1),h.addEventListener(s,d,!1),OvenPlayerConsole.log("IMA : adDisplayContainer initialized"),t.on(Le,(function(e){v&&(e.mute?v.setVolume(0):v.setVolume(e.volume/100))}),c);var x=function(){C&&(OvenPlayerConsole.log("IMA : setADWillAutoPlay ","autoplayAllowed",y,"autoplayRequiresMuted",b),C.setAdWillAutoPlay(y),C.setAdWillPlayMuted(b),b&&t.trigger(xe,{message:"Please touch here to turn on the sound.",timer:1e4,iconClass:"volume-mute",onClickCallback:function(){t.setMute(!1)}}))};return c.isActive=function(){return f.active},c.started=function(){return f.started},c.play=function(){return f.started?new Promise((function(e,t){try{v.resume(),e()}catch(e){t(e)}})):(g.initialize(),new Promise((function(o,i){var A=0,s=function e(){A++,u?(OvenPlayerConsole.log("IMA : ad start!"),v.init("100%","100%",google.ima.ViewMode.NORMAL),v.start(),f.started=!0,o()):l?i(new Error(a)):A<150?setTimeout(e,100):i(new Error(a))};(function(){OvenPlayerConsole.log("IMA : checkAutoplaySupport() ");var n=document.createElement("video");n.setAttribute("playsinline","true"),n.src=Xe,n.load(),E&&t.getName()!==le&&e.load();var r=function(e,t){y=e,b=t,n.pause(),n.remove(),x()};return new Promise((function(e,t){if(n.play){var o=n.play();void 0!==o?o.then((function(){OvenPlayerConsole.log("IMA : auto play allowed."),r(!0,!1),e()})).catch((function(t){OvenPlayerConsole.log("IMA : auto play failed",t.message),r(!1,!1),e()})):(OvenPlayerConsole.log("IMA : promise not support"),r(!0,!1),e())}else OvenPlayerConsole.log("IMA : !temporarySupportCheckVideo.play"),r(!0,!1),e()}))})().then((function(){n.isAutoStart()&&!y?(OvenPlayerConsole.log("IMA : autoplayAllowed : false"),f.started=!1,i(new Error("autoplayNotAllowed"))):(u=!1,OvenPlayerConsole.log("IMA : initRequest() AutoPlay Support : ","autoplayAllowed",y,"autoplayRequiresMuted",b),(C=new google.ima.AdsRequest).forceNonLinearFullSlot=!1,x(),C.adTagUrl=r,h.requestAds(C),OvenPlayerConsole.log("IMA : requestAds Complete"),s())}))})))},c.pause=function(){v.pause()},c.videoEndedCallback=function(e){!m||!m.isAllAdComplete()&&m.isLinearAd()?l?e():(f.isVideoEnded=!0,h.contentComplete()):e()},c.destroy=function(){h&&(h.removeEventListener(A,p),h.removeEventListener(s,d)),v&&v.destroy(),g&&g.destroy(),m&&m.destroy();var e=ze(n.getContainer()).find(".op-ads");e&&e.remove(),t.off(Le,null,c)},c}catch(e){return null}};function tt(e){return tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tt(e)}function nt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rt(e,t)}function rt(e,t){return rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},rt(e,t)}function ot(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=at(e);if(t){var o=at(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return it(this,n)}}function it(e,t){if(t&&("object"===tt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function at(e){return at=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},at(e)}function At(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function st(e,t,n){return t&&At(e.prototype,t),n&&At(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ct(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var ut=st((function e(){ct(this,e),this.id=null,this.sequence=null,this.system=null,this.title=null,this.description=null,this.advertiser=null,this.pricing=null,this.survey=null,this.errorURLTemplates=[],this.impressionURLTemplates=[],this.creatives=[],this.extensions=[]})),lt=st((function e(){ct(this,e),this.attributes={},this.children=[]})),ft=st((function e(){ct(this,e),this.name=null,this.value=null,this.attributes={}})),pt=st((function e(){ct(this,e),this.id=null,this.width=0,this.height=0,this.type=null,this.staticResource=null,this.htmlResource=null,this.iframeResource=null,this.altText=null,this.companionClickThroughURLTemplate=null,this.companionClickTrackingURLTemplates=[],this.trackingEvents={}})),dt=st((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ct(this,e),this.id=t.id||null,this.adId=t.adId||null,this.sequence=t.sequence||null,this.apiFramework=t.apiFramework||null,this.trackingEvents={}})),gt=function(e){nt(n,e);var t=ot(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ct(this,n),(e=t.call(this,r)).type="companion",e.variations=[],e}return st(n)}(dt);function ht(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];for(var r in t.ASSETURI&&(t.ASSETURI=vt(t.ASSETURI)),t.CONTENTPLAYHEAD&&(t.CONTENTPLAYHEAD=vt(t.CONTENTPLAYHEAD)),t.ERRORCODE&&!/^[0-9]{3}$/.test(t.ERRORCODE)&&(t.ERRORCODE=900),t.CACHEBUSTING=mt(Math.round(1e8*Math.random()).toString()),t.TIMESTAMP=vt((new Date).toISOString()),t.RANDOM=t.random=t.CACHEBUSTING,e){var o=e[r];if("string"==typeof o){for(var i in t){var a=t[i],A="[".concat(i,"]"),s="%%".concat(i,"%%");o=(o=o.replace(A,a)).replace(s,a)}n.push(o)}}return n}function vt(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%".concat(e.charCodeAt(0).toString(16))}))}function mt(e){return e.length<8?Ct(0,8-e.length,!1).map((function(e){return"0"})).join("")+e:e}function Ct(e,t,n){for(var r=[],o=e<t,i=n?o?t+1:t-1:t,a=e;o?a<i:a>i;o?a++:a--)r.push(a);return r}var yt={track:function(e,t){ht(e,t).forEach((function(e){"undefined"!=typeof window&&null!==window&&((new Image).src=e)}))},resolveURLTemplates:ht,encodeURIComponentRFC3986:vt,leftpad:mt,range:Ct,isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},flatten:function e(t){return t.reduce((function(t,n){return t.concat(Array.isArray(n)?e(n):n)}),[])}},bt=function(e,t){var n=e.childNodes;for(var r in n){var o=n[r];if(o.nodeName===t)return o}},wt=function(e,t){var n=[],r=e.childNodes;for(var o in r){var i=r[o];i.nodeName===t&&n.push(i)}return n},Et=function(e,t){if(!t)return e;if(0===e.indexOf("//")){var n=location.protocol;return"".concat(n).concat(e)}return-1===e.indexOf("://")?"".concat(t.slice(0,t.lastIndexOf("/")),"/").concat(e):e},Bt=function(e){return-1!==["true","TRUE","1"].indexOf(e)},xt=function(e){return e&&(e.textContent||e.text||"").trim()},kt=function(e,t,n){var r=t.getAttribute(e);r&&n.setAttribute(e,r)},It=function(e){if(null==e)return-1;if(yt.isNumeric(e))return parseInt(e);var t=e.split(":");if(3!==t.length)return-1;var n=t[2].split("."),r=parseInt(n[0]);2===n.length&&(r+=parseFloat("0.".concat(n[1])));var o=parseInt(60*t[1]),i=parseInt(60*t[0]*60);return isNaN(i)||isNaN(o)||isNaN(r)||o>3600||r>60?-1:i+o+r},St=function(e){var t=[],n=null;return e.forEach((function(r,o){if(r.sequence&&(r.sequence=parseInt(r.sequence,10)),r.sequence>1){var i=e[o-1];if(i&&i.sequence===r.sequence-1)return void(n&&n.push(r));delete r.sequence}n=[r],t.push(n)})),t},Tt=function(e,t){e.errorURLTemplates=t.errorURLTemplates.concat(e.errorURLTemplates),e.impressionURLTemplates=t.impressionURLTemplates.concat(e.impressionURLTemplates),e.extensions=t.extensions.concat(e.extensions),e.creatives.forEach((function(e){if(t.trackingEvents&&t.trackingEvents[e.type])for(var n in t.trackingEvents[e.type]){var r=t.trackingEvents[e.type][n];e.trackingEvents[n]||(e.trackingEvents[n]=[]),e.trackingEvents[n]=e.trackingEvents[n].concat(r)}})),t.videoClickTrackingURLTemplates&&t.videoClickTrackingURLTemplates.length&&e.creatives.forEach((function(e){"linear"===e.type&&(e.videoClickTrackingURLTemplates=e.videoClickTrackingURLTemplates.concat(t.videoClickTrackingURLTemplates))})),t.videoCustomClickURLTemplates&&t.videoCustomClickURLTemplates.length&&e.creatives.forEach((function(e){"linear"===e.type&&(e.videoCustomClickURLTemplates=e.videoCustomClickURLTemplates.concat(t.videoCustomClickURLTemplates))})),t.videoClickThroughURLTemplate&&e.creatives.forEach((function(e){"linear"===e.type&&null==e.videoClickThroughURLTemplate&&(e.videoClickThroughURLTemplate=t.videoClickThroughURLTemplate)}))};function Lt(e,t){var n=new gt(t);return wt(e,"Companion").forEach((function(e){var t=new pt;t.id=e.getAttribute("id")||null,t.width=e.getAttribute("width"),t.height=e.getAttribute("height"),t.companionClickTrackingURLTemplates=[],wt(e,"HTMLResource").forEach((function(e){t.type=e.getAttribute("creativeType")||"text/html",t.htmlResource=xt(e)})),wt(e,"IFrameResource").forEach((function(e){t.type=e.getAttribute("creativeType")||0,t.iframeResource=xt(e)})),wt(e,"StaticResource").forEach((function(n){t.type=n.getAttribute("creativeType")||0,wt(e,"AltText").forEach((function(e){t.altText=xt(e)})),t.staticResource=xt(n)})),wt(e,"TrackingEvents").forEach((function(e){wt(e,"Tracking").forEach((function(e){var n=e.getAttribute("event"),r=xt(e);n&&r&&(null==t.trackingEvents[n]&&(t.trackingEvents[n]=[]),t.trackingEvents[n].push(r))}))})),wt(e,"CompanionClickTracking").forEach((function(e){t.companionClickTrackingURLTemplates.push(xt(e))})),t.companionClickThroughURLTemplate=xt(bt(e,"CompanionClickThrough")),t.companionClickTrackingURLTemplate=xt(bt(e,"CompanionClickTracking")),n.variations.push(t)})),n}var Rt=function(e){nt(n,e);var t=ot(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ct(this,n),(e=t.call(this,r)).type="linear",e.duration=0,e.skipDelay=null,e.mediaFiles=[],e.videoClickThroughURLTemplate=null,e.videoClickTrackingURLTemplates=[],e.videoCustomClickURLTemplates=[],e.adParameters=null,e.icons=[],e}return st(n)}(dt),Mt=st((function e(){ct(this,e),this.program=null,this.height=0,this.width=0,this.xPosition=0,this.yPosition=0,this.apiFramework=null,this.offset=null,this.duration=0,this.type=null,this.staticResource=null,this.htmlResource=null,this.iframeResource=null,this.iconClickThroughURLTemplate=null,this.iconClickTrackingURLTemplates=[],this.iconViewTrackingURLTemplate=null})),Ot=st((function e(){ct(this,e),this.id=null,this.fileURL=null,this.deliveryType="progressive",this.mimeType=null,this.codec=null,this.bitrate=0,this.minBitrate=0,this.maxBitrate=0,this.width=0,this.height=0,this.apiFramework=null,this.scalable=null,this.maintainAspectRatio=null}));function Qt(e,t){var n,r=new Rt(t);r.duration=It(xt(bt(e,"Duration")));var o=e.getAttribute("skipoffset");if(null==o)r.skipDelay=null;else if("%"===o.charAt(o.length-1)&&-1!==r.duration){var i=parseInt(o,10);r.skipDelay=r.duration*(i/100)}else r.skipDelay=It(o);var a=bt(e,"VideoClicks");a&&(r.videoClickThroughURLTemplate=xt(bt(a,"ClickThrough")),wt(a,"ClickTracking").forEach((function(e){r.videoClickTrackingURLTemplates.push(xt(e))})),wt(a,"CustomClick").forEach((function(e){r.videoCustomClickURLTemplates.push(xt(e))})));var A=bt(e,"AdParameters");A&&(r.adParameters=xt(A)),wt(e,"TrackingEvents").forEach((function(e){wt(e,"Tracking").forEach((function(e){var t=e.getAttribute("event"),o=xt(e);if(t&&o){if("progress"===t){if(!(n=e.getAttribute("offset")))return;t="%"===n.charAt(n.length-1)?"progress-".concat(n):"progress-".concat(Math.round(It(n)))}null==r.trackingEvents[t]&&(r.trackingEvents[t]=[]),r.trackingEvents[t].push(o)}}))})),wt(e,"MediaFiles").forEach((function(e){wt(e,"MediaFile").forEach((function(e){var t=new Ot;t.id=e.getAttribute("id"),t.fileURL=xt(e),t.deliveryType=e.getAttribute("delivery"),t.codec=e.getAttribute("codec"),t.mimeType=e.getAttribute("type"),t.apiFramework=e.getAttribute("apiFramework"),t.bitrate=parseInt(e.getAttribute("bitrate")||0),t.minBitrate=parseInt(e.getAttribute("minBitrate")||0),t.maxBitrate=parseInt(e.getAttribute("maxBitrate")||0),t.width=parseInt(e.getAttribute("width")||0),t.height=parseInt(e.getAttribute("height")||0);var n=e.getAttribute("scalable");n&&"string"==typeof n&&("true"===(n=n.toLowerCase())?t.scalable=!0:"false"===n&&(t.scalable=!1));var o=e.getAttribute("maintainAspectRatio");o&&"string"==typeof o&&("true"===(o=o.toLowerCase())?t.maintainAspectRatio=!0:"false"===o&&(t.maintainAspectRatio=!1)),r.mediaFiles.push(t)}))}));var s=bt(e,"Icons");return s&&wt(s,"Icon").forEach((function(e){var t=new Mt;t.program=e.getAttribute("program"),t.height=parseInt(e.getAttribute("height")||0),t.width=parseInt(e.getAttribute("width")||0),t.xPosition=function(e){return-1!==["left","right"].indexOf(e)?e:parseInt(e||0)}(e.getAttribute("xPosition")),t.yPosition=function(e){return-1!==["top","bottom"].indexOf(e)?e:parseInt(e||0)}(e.getAttribute("yPosition")),t.apiFramework=e.getAttribute("apiFramework"),t.offset=It(e.getAttribute("offset")),t.duration=It(e.getAttribute("duration")),wt(e,"HTMLResource").forEach((function(e){t.type=e.getAttribute("creativeType")||"text/html",t.htmlResource=xt(e)})),wt(e,"IFrameResource").forEach((function(e){t.type=e.getAttribute("creativeType")||0,t.iframeResource=xt(e)})),wt(e,"StaticResource").forEach((function(e){t.type=e.getAttribute("creativeType")||0,t.staticResource=xt(e)}));var n=bt(e,"IconClicks");n&&(t.iconClickThroughURLTemplate=xt(bt(n,"IconClickThrough")),wt(n,"IconClickTracking").forEach((function(e){t.iconClickTrackingURLTemplates.push(xt(e))}))),t.iconViewTrackingURLTemplate=xt(bt(e,"IconViewTracking")),r.icons.push(t)})),r}var Dt,Pt=function(e){nt(n,e);var t=ot(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ct(this,n),(e=t.call(this,r)).type="nonlinear",e.variations=[],e}return st(n)}(dt),Ft=st((function e(){ct(this,e),this.id=null,this.width=0,this.height=0,this.expandedWidth=0,this.expandedHeight=0,this.scalable=!0,this.maintainAspectRatio=!0,this.minSuggestedDuration=0,this.apiFramework="static",this.type=null,this.staticResource=null,this.htmlResource=null,this.iframeResource=null,this.nonlinearClickThroughURLTemplate=null,this.nonlinearClickTrackingURLTemplates=[],this.adParameters=null}));function Ut(e,t){var n=new Pt(t);return wt(e,"TrackingEvents").forEach((function(e){var t,r;wt(e,"Tracking").forEach((function(e){t=e.getAttribute("event"),r=xt(e),t&&r&&(null==n.trackingEvents[t]&&(n.trackingEvents[t]=[]),n.trackingEvents[t].push(r))}))})),wt(e,"NonLinear").forEach((function(e){var t=new Ft;t.id=e.getAttribute("id")||null,t.width=e.getAttribute("width"),t.height=e.getAttribute("height"),t.expandedWidth=e.getAttribute("expandedWidth"),t.expandedHeight=e.getAttribute("expandedHeight"),t.scalable=Bt(e.getAttribute("scalable")),t.maintainAspectRatio=Bt(e.getAttribute("maintainAspectRatio")),t.minSuggestedDuration=It(e.getAttribute("minSuggestedDuration")),t.apiFramework=e.getAttribute("apiFramework"),wt(e,"HTMLResource").forEach((function(e){t.type=e.getAttribute("creativeType")||"text/html",t.htmlResource=xt(e)})),wt(e,"IFrameResource").forEach((function(e){t.type=e.getAttribute("creativeType")||0,t.iframeResource=xt(e)})),wt(e,"StaticResource").forEach((function(e){t.type=e.getAttribute("creativeType")||0,t.staticResource=xt(e)}));var r=bt(e,"AdParameters");r&&(t.adParameters=xt(r)),t.nonlinearClickThroughURLTemplate=xt(bt(e,"NonLinearClickThrough")),wt(e,"NonLinearClickTracking").forEach((function(e){t.nonlinearClickTrackingURLTemplates.push(xt(e))})),n.variations.push(t)})),n}function Nt(e){var t=e.childNodes;for(var n in t){var r=t[n];if(-1!==["Wrapper","InLine"].indexOf(r.nodeName)){if(kt("id",e,r),kt("sequence",e,r),"Wrapper"===r.nodeName)return jt(r);if("InLine"===r.nodeName)return Wt(r)}}}function Wt(e){var t=e.childNodes,n=new ut;for(var r in n.id=e.getAttribute("id")||null,n.sequence=e.getAttribute("sequence")||null,t){var o=t[r];switch(o.nodeName){case"Error":n.errorURLTemplates.push(xt(o));break;case"Impression":n.impressionURLTemplates.push(xt(o));break;case"Creatives":wt(o,"Creative").forEach((function(e){var t={id:e.getAttribute("id")||null,adId:Gt(e),sequence:e.getAttribute("sequence")||null,apiFramework:e.getAttribute("apiFramework")||null};for(var r in e.childNodes){var o=e.childNodes[r];switch(o.nodeName){case"Linear":var i=Qt(o,t);i&&n.creatives.push(i);break;case"NonLinearAds":var a=Ut(o,t);a&&n.creatives.push(a);break;case"CompanionAds":var A=Lt(o,t);A&&n.creatives.push(A)}}}));break;case"Extensions":Yt(n.extensions,wt(o,"Extension"));break;case"AdSystem":n.system={value:xt(o),version:o.getAttribute("version")||null};break;case"AdTitle":n.title=xt(o);break;case"Description":n.description=xt(o);break;case"Advertiser":n.advertiser=xt(o);break;case"Pricing":n.pricing={value:xt(o),model:o.getAttribute("model")||null,currency:o.getAttribute("currency")||null};break;case"Survey":n.survey=xt(o)}}return n}function jt(e){var t=Wt(e),n=bt(e,"VASTAdTagURI");if(n?t.nextWrapperURL=xt(n):(n=bt(e,"VASTAdTagURL"))&&(t.nextWrapperURL=xt(bt(n,"URL"))),t.creatives.forEach((function(e){if(-1!==["linear","nonlinear"].indexOf(e.type)){if(e.trackingEvents){t.trackingEvents||(t.trackingEvents={}),t.trackingEvents[e.type]||(t.trackingEvents[e.type]={});var n=function(n){var r=e.trackingEvents[n];t.trackingEvents[e.type][n]||(t.trackingEvents[e.type][n]=[]),r.forEach((function(r){t.trackingEvents[e.type][n].push(r)}))};for(var r in e.trackingEvents)n(r)}e.videoClickTrackingURLTemplates&&(t.videoClickTrackingURLTemplates||(t.videoClickTrackingURLTemplates=[]),e.videoClickTrackingURLTemplates.forEach((function(e){t.videoClickTrackingURLTemplates.push(e)}))),e.videoClickThroughURLTemplate&&(t.videoClickThroughURLTemplate=e.videoClickThroughURLTemplate),e.videoCustomClickURLTemplates&&(t.videoCustomClickURLTemplates||(t.videoCustomClickURLTemplates=[]),e.videoCustomClickURLTemplates.forEach((function(e){t.videoCustomClickURLTemplates.push(e)})))}})),t.nextWrapperURL)return t}function Yt(e,t){t.forEach((function(t){var n=new lt,r=t.attributes,o=t.childNodes;if(t.attributes)for(var i in r){var a=r[i];a.nodeName&&a.nodeValue&&(n.attributes[a.nodeName]=a.nodeValue)}for(var A in o){var s=o[A],c=xt(s);if("#comment"!==s.nodeName&&""!==c){var u=new ft;if(u.name=s.nodeName,u.value=c,s.attributes){var l=s.attributes;for(var f in l){var p=l[f];u.attributes[p.nodeName]=p.nodeValue}}n.children.push(u)}}e.push(n)}))}function Gt(e){return e.getAttribute("AdID")||e.getAttribute("adID")||e.getAttribute("adId")||null}function zt(){}function _t(){_t.init.call(this)}function Vt(e){return void 0===e._maxListeners?_t.defaultMaxListeners:e._maxListeners}function Ht(e,t,n){if(t)e.call(n);else for(var r=e.length,o=tn(e,r),i=0;i<r;++i)o[i].call(n)}function Jt(e,t,n,r){if(t)e.call(n,r);else for(var o=e.length,i=tn(e,o),a=0;a<o;++a)i[a].call(n,r)}function Zt(e,t,n,r,o){if(t)e.call(n,r,o);else for(var i=e.length,a=tn(e,i),A=0;A<i;++A)a[A].call(n,r,o)}function Kt(e,t,n,r,o,i){if(t)e.call(n,r,o,i);else for(var a=e.length,A=tn(e,a),s=0;s<a;++s)A[s].call(n,r,o,i)}function Xt(e,t,n,r){if(t)e.apply(n,r);else for(var o=e.length,i=tn(e,o),a=0;a<o;++a)i[a].apply(n,r)}function qt(e,t,n,r){var o,i,a;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((i=e._events)?(i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),a=i[t]):(i=e._events=new zt,e._eventsCount=0),a){if("function"==typeof a?a=i[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),!a.warned&&(o=Vt(e))&&o>0&&a.length>o){a.warned=!0;var A=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");A.name="MaxListenersExceededWarning",A.emitter=e,A.type=t,A.count=a.length,function(e){"function"==typeof console.warn?console.warn(e):console.log(e)}(A)}}else a=i[t]=n,++e._eventsCount;return e}function $t(e,t,n){var r=!1;function o(){e.removeListener(t,o),r||(r=!0,n.apply(e,arguments))}return o.listener=n,o}function en(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function tn(e,t){for(var n=new Array(t);t--;)n[t]=e[t];return n}zt.prototype=Object.create(null),_t.EventEmitter=_t,_t.usingDomains=!1,_t.prototype.domain=void 0,_t.prototype._events=void 0,_t.prototype._maxListeners=void 0,_t.defaultMaxListeners=10,_t.init=function(){this.domain=null,_t.usingDomains&&(!Dt.active||this instanceof Dt.Domain||(this.domain=Dt.active)),this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new zt,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},_t.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},_t.prototype.getMaxListeners=function(){return Vt(this)},_t.prototype.emit=function(e){var t,n,r,o,i,a,A,s="error"===e;if(a=this._events)s=s&&null==a.error;else if(!s)return!1;if(A=this.domain,s){if(t=arguments[1],!A){if(t instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}return t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=A,t.domainThrown=!1,A.emit("error",t),!1}if(!(n=a[e]))return!1;var u="function"==typeof n;switch(r=arguments.length){case 1:Ht(n,u,this);break;case 2:Jt(n,u,this,arguments[1]);break;case 3:Zt(n,u,this,arguments[1],arguments[2]);break;case 4:Kt(n,u,this,arguments[1],arguments[2],arguments[3]);break;default:for(o=new Array(r-1),i=1;i<r;i++)o[i-1]=arguments[i];Xt(n,u,this,o)}return!0},_t.prototype.addListener=function(e,t){return qt(this,e,t,!1)},_t.prototype.on=_t.prototype.addListener,_t.prototype.prependListener=function(e,t){return qt(this,e,t,!0)},_t.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,$t(this,e,t)),this},_t.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,$t(this,e,t)),this},_t.prototype.removeListener=function(e,t){var n,r,o,i,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener&&n.listener===t)0==--this._eventsCount?this._events=new zt:(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,i=n.length;i-- >0;)if(n[i]===t||n[i].listener&&n[i].listener===t){a=n[i].listener,o=i;break}if(o<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new zt,this;delete r[e]}else!function(e,t){for(var n=t,r=n+1,o=e.length;r<o;n+=1,r+=1)e[n]=e[r];e.pop()}(n,o);r.removeListener&&this.emit("removeListener",e,a||t)}return this},_t.prototype.removeAllListeners=function(e){var t,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new zt,this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=new zt:delete n[e]),this;if(0===arguments.length){for(var r,o=Object.keys(n),i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new zt,this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)do{this.removeListener(e,t[t.length-1])}while(t[0]);return this},_t.prototype.listeners=function(e){var t,n=this._events;return n&&(t=n[e])?"function"==typeof t?[t.listener||t]:function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(t):[]},_t.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):en.call(e,t)},_t.prototype.listenerCount=en,_t.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var nn=function(e,t,n){var r="function"==typeof window.ActiveXObject?new window.ActiveXObject("Microsoft.XMLDOM"):void 0;if(!r)return n(new Error("FlashURLHandler: Microsoft.XMLDOM format not supported"));r.async=!1,request.open("GET",e),request.timeout=t.timeout||0,request.withCredentials=t.withCredentials||!1,request.send(),request.onprogress=function(){},request.onload=function(){r.loadXML(request.responseText),n(null,r)}},rn=function(){return window.XDomainRequest&&(e=new XDomainRequest),!!e;var e},on=function(e,t,n){n(new Error("Please bundle the library for node to use the node urlHandler"))};function an(){try{var e=new window.XMLHttpRequest;return"withCredentials"in e?e:null}catch(e){return console.log("Error in XHRURLHandler support check:",e),null}}var An,sn,cn=function(e,t,n){if("https:"===window.location.protocol&&0===e.indexOf("http://"))return n(new Error("XHRURLHandler: Cannot go from HTTPS to HTTP."));try{var r=an();r.open("GET",e),r.timeout=t.timeout||0,r.withCredentials=t.withCredentials||!1,r.overrideMimeType&&r.overrideMimeType("text/xml"),r.onreadystatechange=function(){4===r.readyState&&(200===r.status?n(null,r.responseXML):n(new Error("XHRURLHandler: ".concat(r.statusText))))},r.send()}catch(e){n(new Error("XHRURLHandler: Unexpected error"))}},un=function(){return!!an()},ln={get:function(e,t,n){return n||("function"==typeof t&&(n=t),t={}),"undefined"==typeof window||null===window?on(e,t,n):un()?cn(e,t,n):rn()?nn(e,t,n):n(new Error("Current context is not supported by any of the default URLHandlers. Please provide a custom URLHandler"))}},fn=st((function e(){ct(this,e),this.ads=[],this.errorURLTemplates=[]})),pn={ERRORCODE:900,extensions:[]},dn=function(e){nt(n,e);var t=ot(n);function n(){var e;return ct(this,n),(e=t.call(this)).remainingAds=[],e.parentURLs=[],e.errorURLTemplates=[],e.rootErrorURLTemplates=[],e.maxWrapperDepth=null,e.URLTemplateFilters=[],e.fetchingOptions={},e}return st(n,[{key:"addURLTemplateFilter",value:function(e){"function"==typeof e&&this.URLTemplateFilters.push(e)}},{key:"removeURLTemplateFilter",value:function(){this.URLTemplateFilters.pop()}},{key:"countURLTemplateFilters",value:function(){return this.URLTemplateFilters.length}},{key:"clearURLTemplateFilters",value:function(){this.URLTemplateFilters=[]}},{key:"trackVastError",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];this.emit("VAST-error",Object.assign.apply(Object,[pn,t].concat(r))),yt.track(e,t)}},{key:"getErrorURLTemplates",value:function(){return this.rootErrorURLTemplates.concat(this.errorURLTemplates)}},{key:"fetchVAST",value:function(e,t,n){var r=this;return new Promise((function(o,i){r.URLTemplateFilters.forEach((function(t){e=t(e)})),r.parentURLs.push(e),r.emit("VAST-resolving",{url:e,wrapperDepth:t,originalUrl:n}),r.urlHandler.get(e,r.fetchingOptions,(function(t,n){r.emit("VAST-resolved",{url:e,error:t}),t?i(t):o(n)}))}))}},{key:"initParsingStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.rootURL="",this.remainingAds=[],this.parentURLs=[],this.errorURLTemplates=[],this.rootErrorURLTemplates=[],this.maxWrapperDepth=e.wrapperLimit||10,this.fetchingOptions={timeout:e.timeout,withCredentials:e.withCredentials},this.urlHandler=e.urlhandler||ln}},{key:"getRemainingAds",value:function(e){var t=this;if(0===this.remainingAds.length)return Promise.reject(new Error("No more ads are available for the given VAST"));var n=e?yt.flatten(this.remainingAds):this.remainingAds.shift();return this.errorURLTemplates=[],this.parentURLs=[],this.resolveAds(n,{wrapperDepth:0,originalUrl:this.rootURL}).then((function(e){return t.buildVASTResponse(e)}))}},{key:"getAndParseVAST",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.initParsingStatus(n),this.rootURL=e,this.fetchVAST(e).then((function(r){return n.originalUrl=e,n.isRootVAST=!0,t.parse(r,n).then((function(e){return t.buildVASTResponse(e)}))}))}},{key:"parseVAST",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.initParsingStatus(n),n.isRootVAST=!0,this.parse(e,n).then((function(e){return t.buildVASTResponse(e)}))}},{key:"buildVASTResponse",value:function(e){var t=new fn;return t.ads=e,t.errorURLTemplates=this.getErrorURLTemplates(),this.completeWrapperResolving(t),t}},{key:"parse",value:function(e,t){var n=t.resolveAll,r=void 0===n||n,o=t.wrapperSequence,i=void 0===o?null:o,a=t.originalUrl,A=void 0===a?null:a,s=t.wrapperDepth,c=void 0===s?0:s,u=t.isRootVAST,l=void 0!==u&&u;if(!e||!e.documentElement||"VAST"!==e.documentElement.nodeName)return Promise.reject(new Error("Invalid VAST XMLDocument"));var f=[],p=e.documentElement.childNodes;for(var d in p){var g=p[d];if("Error"===g.nodeName){var h=xt(g);l?this.rootErrorURLTemplates.push(h):this.errorURLTemplates.push(h)}if("Ad"===g.nodeName){var v=Nt(g);v?f.push(v):this.trackVastError(this.getErrorURLTemplates(),{ERRORCODE:101})}}var m=f.length,C=f[m-1];return 1===m&&null!=i&&C&&!C.sequence&&(C.sequence=i),!1===r&&(this.remainingAds=St(f),f=this.remainingAds.shift()),this.resolveAds(f,{wrapperDepth:c,originalUrl:A})}},{key:"resolveAds",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,r=n.wrapperDepth,o=n.originalUrl,i=[];return t.forEach((function(t){var n=e.resolveWrappers(t,r,o);i.push(n)})),Promise.all(i).then((function(t){var n=yt.flatten(t);if(!n&&e.remainingAds.length>0){var i=e.remainingAds.shift();return e.resolveAds(i,{wrapperDepth:r,originalUrl:o})}return n}))}},{key:"resolveWrappers",value:function(e,t,n){var r=this;return new Promise((function(o,i){if(t++,!e.nextWrapperURL)return delete e.nextWrapperURL,o(e);if(t>=r.maxWrapperDepth||-1!==r.parentURLs.indexOf(e.nextWrapperURL))return e.errorCode=302,delete e.nextWrapperURL,o(e);e.nextWrapperURL=Et(e.nextWrapperURL,n);var a=e.sequence;n=e.nextWrapperURL,r.fetchVAST(e.nextWrapperURL,t,n).then((function(i){return r.parse(i,{originalUrl:n,wrapperSequence:a,wrapperDepth:t}).then((function(t){if(delete e.nextWrapperURL,0===t.length)return e.creatives=[],o(e);t.forEach((function(t){t&&Tt(t,e)})),o(t)}))})).catch((function(t){e.errorCode=301,e.errorMessage=t.message,o(e)}))}))}},{key:"completeWrapperResolving",value:function(e){if(0===e.ads.length)this.trackVastError(e.errorURLTemplates,{ERRORCODE:303});else for(var t=e.ads.length-1;t>=0;t--){var n=e.ads[t];(n.errorCode||0===n.creatives.length)&&(this.trackVastError(n.errorURLTemplates.concat(e.errorURLTemplates),{ERRORCODE:n.errorCode||303},{ERRORMESSAGE:n.errorMessage||""},{extensions:n.extensions},{system:n.system}),e.ads.splice(t,1))}}}]),n}(_t),gn=null,hn={data:{},length:0,getItem:function(e){return this.data[e]},setItem:function(e,t){this.data[e]=t,this.length=Object.keys(this.data).length},removeItem:function(e){delete data[e],this.length=Object.keys(this.data).length},clear:function(){this.data={},this.length=0}},vn=function(){function e(){ct(this,e),this.storage=this.initStorage()}return st(e,[{key:"initStorage",value:function(){if(gn)return gn;try{gn="undefined"!=typeof window&&null!==window?window.localStorage||window.sessionStorage:null}catch(e){gn=null}return gn&&!this.isStorageDisabled(gn)||(gn=hn).clear(),gn}},{key:"isStorageDisabled",value:function(e){var t="__VASTStorage__";try{if(e.setItem(t,t),e.getItem(t)!==t)return e.removeItem(t),!0}catch(e){return!0}return e.removeItem(t),!1}},{key:"getItem",value:function(e){return this.storage.getItem(e)}},{key:"setItem",value:function(e,t){return this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){return this.storage.removeItem(e)}},{key:"clear",value:function(){return this.storage.clear()}}]),e}(),mn=function(){function e(t,n,r){ct(this,e),this.cappingFreeLunch=t||0,this.cappingMinimumTimeInterval=n||0,this.defaultOptions={withCredentials:!1,timeout:0},this.vastParser=new dn,this.storage=r||new vn,void 0===this.lastSuccessfulAd&&(this.lastSuccessfulAd=0),void 0===this.totalCalls&&(this.totalCalls=0),void 0===this.totalCallsTimeout&&(this.totalCallsTimeout=0)}return st(e,[{key:"getParser",value:function(){return this.vastParser}},{key:"lastSuccessfulAd",get:function(){return this.storage.getItem("vast-client-last-successful-ad")},set:function(e){this.storage.setItem("vast-client-last-successful-ad",e)}},{key:"totalCalls",get:function(){return this.storage.getItem("vast-client-total-calls")},set:function(e){this.storage.setItem("vast-client-total-calls",e)}},{key:"totalCallsTimeout",get:function(){return this.storage.getItem("vast-client-total-calls-timeout")},set:function(e){this.storage.setItem("vast-client-total-calls-timeout",e)}},{key:"hasRemainingAds",value:function(){return this.vastParser.remainingAds.length>0}},{key:"getNextAds",value:function(e){return this.vastParser.getRemainingAds(e)}},{key:"get",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Date.now();return(n=Object.assign(this.defaultOptions,n)).hasOwnProperty("resolveAll")||(n.resolveAll=!1),this.totalCallsTimeout<r?(this.totalCalls=1,this.totalCallsTimeout=r+36e5):this.totalCalls++,new Promise((function(o,i){if(t.cappingFreeLunch>=t.totalCalls)return i(new Error("VAST call canceled  FreeLunch capping not reached yet ".concat(t.totalCalls,"/").concat(t.cappingFreeLunch)));var a=r-t.lastSuccessfulAd;if(a<0)t.lastSuccessfulAd=0;else if(a<t.cappingMinimumTimeInterval)return i(new Error("VAST call canceled  (".concat(t.cappingMinimumTimeInterval,")ms minimum interval reached")));t.vastParser.getAndParseVAST(e,n).then((function(e){return o(e)})).catch((function(e){return i(e)}))}))}}]),e}(),Cn=function(e){nt(n,e);var t=ot(n);function n(e,r,o){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;for(var A in ct(this,n),(i=t.call(this)).ad=r,i.creative=o,i.variation=a,i.muted=!1,i.impressed=!1,i.skippable=!1,i.trackingEvents={},i._alreadyTriggeredQuartiles={},i.emitAlwaysEvents=["creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","resume","pause","rewind","skip","closeLinear","close"],i.creative.trackingEvents){var s=i.creative.trackingEvents[A];i.trackingEvents[A]=s.slice(0)}return i.creative instanceof Rt?i._initLinearTracking():i._initVariationTracking(),e&&i.on("start",(function(){e.lastSuccessfulAd=Date.now()})),i}return st(n,[{key:"_initLinearTracking",value:function(){this.linear=!0,this.skipDelay=this.creative.skipDelay,this.setDuration(this.creative.duration),this.clickThroughURLTemplate=this.creative.videoClickThroughURLTemplate,this.clickTrackingURLTemplates=this.creative.videoClickTrackingURLTemplates}},{key:"_initVariationTracking",value:function(){if(this.linear=!1,this.skipDelay=-1,this.variation){for(var e in this.variation.trackingEvents){var t=this.variation.trackingEvents[e];this.trackingEvents[e]?this.trackingEvents[e]=this.trackingEvents[e].concat(t.slice(0)):this.trackingEvents[e]=t.slice(0)}this.variation instanceof Ft?(this.clickThroughURLTemplate=this.variation.nonlinearClickThroughURLTemplate,this.clickTrackingURLTemplates=this.variation.nonlinearClickTrackingURLTemplates,this.setDuration(this.variation.minSuggestedDuration)):this.variation instanceof pt&&(this.clickThroughURLTemplate=this.variation.companionClickThroughURLTemplate,this.clickTrackingURLTemplates=this.variation.companionClickTrackingURLTemplates)}}},{key:"setDuration",value:function(e){this.assetDuration=e,this.quartiles={firstQuartile:Math.round(25*this.assetDuration)/100,midpoint:Math.round(50*this.assetDuration)/100,thirdQuartile:Math.round(75*this.assetDuration)/100}}},{key:"setProgress",value:function(e){var t=this,n=this.skipDelay||-1;if(-1===n||this.skippable||(n>e?this.emit("skip-countdown",n-e):(this.skippable=!0,this.emit("skip-countdown",0))),this.assetDuration>0){var r=[];if(e>0){var o=Math.round(e/this.assetDuration*100);for(var i in r.push("start"),r.push("progress-".concat(o,"%")),r.push("progress-".concat(Math.round(e))),this.quartiles)this.isQuartileReached(i,this.quartiles[i],e)&&(r.push(i),this._alreadyTriggeredQuartiles[i]=!0)}r.forEach((function(e){t.track(e,!0)})),e<this.progress&&this.track("rewind")}this.progress=e}},{key:"isQuartileReached",value:function(e,t,n){var r=!1;return t<=n&&!this._alreadyTriggeredQuartiles[e]&&(r=!0),r}},{key:"setMuted",value:function(e){this.muted!==e&&this.track(e?"mute":"unmute"),this.muted=e}},{key:"setPaused",value:function(e){this.paused!==e&&this.track(e?"pause":"resume"),this.paused=e}},{key:"setFullscreen",value:function(e){this.fullscreen!==e&&this.track(e?"fullscreen":"exitFullscreen"),this.fullscreen=e}},{key:"setExpand",value:function(e){this.expanded!==e&&this.track(e?"expand":"collapse"),this.expanded=e}},{key:"setSkipDelay",value:function(e){"number"==typeof e&&(this.skipDelay=e)}},{key:"trackImpression",value:function(){this.impressed||(this.impressed=!0,this.trackURLs(this.ad.impressionURLTemplates),this.track("creativeView"))}},{key:"errorWithCode",value:function(e){this.trackURLs(this.ad.errorURLTemplates,{ERRORCODE:e})}},{key:"complete",value:function(){this.track("complete")}},{key:"close",value:function(){this.track(this.linear?"closeLinear":"close")}},{key:"skip",value:function(){this.track("skip"),this.trackingEvents=[]}},{key:"click",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.clickTrackingURLTemplates&&this.clickTrackingURLTemplates.length&&this.trackURLs(this.clickTrackingURLTemplates);var t=this.clickThroughURLTemplate||e;if(t){var n=this.linear?{CONTENTPLAYHEAD:this.progressFormatted()}:{},r=yt.resolveURLTemplates([t],n)[0];this.emit("clickthrough",r)}}},{key:"track",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];"closeLinear"===e&&!this.trackingEvents[e]&&this.trackingEvents.close&&(e="close");var n=this.trackingEvents[e],r=this.emitAlwaysEvents.indexOf(e)>-1;n?(this.emit(e,""),this.trackURLs(n)):r&&this.emit(e,""),t&&(delete this.trackingEvents[e],r&&this.emitAlwaysEvents.splice(this.emitAlwaysEvents.indexOf(e),1))}},{key:"trackURLs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.linear&&(this.creative&&this.creative.mediaFiles&&this.creative.mediaFiles[0]&&this.creative.mediaFiles[0].fileURL&&(t.ASSETURI=this.creative.mediaFiles[0].fileURL),t.CONTENTPLAYHEAD=this.progressFormatted()),yt.track(e,t)}},{key:"progressFormatted",value:function(){var e=parseInt(this.progress),t=e/3600;t.length<2&&(t="0".concat(t));var n=e/60%60;n.length<2&&(n="0".concat(n));var r=e%60;return r.length<2&&(r="0".concat(n)),"".concat(t,":").concat(n,":").concat(r,".").concat(parseInt(100*(this.progress-e)))}}]),n}(_t),yn=function(e,t,n,r){var o,i={},a={started:!1,active:!1,isVideoEnded:!1,lang:n.getLanguage()},A=null,s="",c=null,u="",l="",f=!1,p=n.getBrowser(),d="Android"===p.os||"iOS"===p.os;(o=document.createElement("div")).setAttribute("class","op-ads"),o.setAttribute("id","op-ads"),n.getContainer().append(o),(c=document.createElement("video")).setAttribute("playsinline","true"),c.setAttribute("title","Advertisement"),c.setAttribute("class","op-ads-vast-video"),(l=document.createElement("div")).setAttribute("class","op-ads-button"),(u=document.createElement("div")).setAttribute("class","op-ads-textview"),l.append(u),o.append(c),o.append(l),s=o;var g=new mn,h=null,v=null,m=function(e){console.log(e),c.style.display="none",t.trigger(se,{code:e.code,message:e.message}),a.active=!1,a.started=!0,t.play()};return i.isActive=function(){return a.active},i.started=function(){return a.started},i.play=function(){return a.started?c.play():new Promise((function(o,i){!function s(){t.metaLoaded()?(OvenPlayerConsole.log("VAST : main contents meta loaded."),function(){OvenPlayerConsole.log("VAST : checkAutoplaySupport() ");var n=document.createElement("video");n.setAttribute("playsinline","true"),n.src=Xe,n.load(),c.load(),d&&t.getName()!==le&&e.load();var r=function(e,t){f=e,n.pause(),n.remove()};return new Promise((function(e,t){if(n.play){var o=n.play();void 0!==o?o.then((function(){OvenPlayerConsole.log("VAST : auto play allowed."),r(!0),e()})).catch((function(t){OvenPlayerConsole.log("VAST : auto play failed",t.message),r(!1),e()})):(OvenPlayerConsole.log("VAST : promise not support"),r(!0),e())}else OvenPlayerConsole.log("VAST : !temporarySupportCheckVideo.play"),r(!0),e()}))}().then((function(){n.isAutoStart()&&!f?(OvenPlayerConsole.log("VAST : autoplayAllowed : false"),a.started=!1,i(new Error("autoplayNotAllowed"))):(g.get(r).then((function(n){if(OvenPlayerConsole.log("VAST : initRequest()"),!(v=n.ads[0]))throw{code:401,message:"File not found. Unable to find Linear/MediaFile from URI."};h=new Cn(g,v,v.creatives[0]),OvenPlayerConsole.log("VAST : created ad tracker."),A=function(e,t,n,r,o,i,a){var A={},s={},c=ze(i),u=ze(o),l=ze(e);n.on(Le,(function(t){t.mute?e.muted=!0:(e.muted=!1,e.volume=t.volume/100)}),s);var f=function(){r.active=!1,u.hide(),!r.started||0!==n.getPosition()&&r.isVideoEnded||(l.hide(),n.play()),n.trigger(Ae)},p=function(n){c.hasClass("videoAdUiAction")&&(t.skip(),e.pause(),f())};return i.addEventListener("click",p,!1),A.error=function(){OvenPlayerConsole.log("VAST : listener : error.",e.error),console.log("VAST : listener : error.",e.error);var n={},r=e.error&&e.error.code||0;2===r?(n.code=402,n.message="Timeout of MediaFile URI."):3===r?(n.code=405,n.message="Problem displaying MediaFile. Video player found a MediaFile with supported type but couldnt display it. MediaFile may include: unsupported codecs, different MIME type than MediaFile@type, unsupported delivery method, etc."):4===r?(n.code=403,n.message="Couldnt find MediaFile that is supported by this video player, based on the attributes of the MediaFile element."):(n.code=400,n.message="General Linear error. Video player is unable to display the Linear Ad."),t.errorWithCode(n.code),a("405")},A.canplay=function(){},A.ended=function(){t.complete(),f()},A.click=function(e){t.click()},A.play=function(){t.setPaused(!1)},A.pause=function(){t.setPaused(!0)},A.timeupdate=function(r){t.setProgress(r.target.currentTime),n.trigger(Ie,{duration:e.duration,position:e.currentTime})},A.volumechange=function(e){OvenPlayerConsole.log("VAST : listener : Ad Video Volumechange."),t.setMuted(e.target.muted)},A.loadedmetadata=function(){OvenPlayerConsole.log("VAST : listener : Ad CONTENT LOADED ."),ee===n.getState()&&n.pause(),t.trackImpression(),n.trigger(oe,{remaining:e.duration,isLinear:!0}),e.play()},t.on("skip",(function(){OvenPlayerConsole.log("VAST : listener : skipped")})),t.on("mute",(function(){OvenPlayerConsole.log("VAST : listener : muted")})),t.on("unmute",(function(){OvenPlayerConsole.log("VAST : listener : unmuted")})),t.on("resume",(function(){OvenPlayerConsole.log("VAST : listener : vastTracker resumed."),r.started&&n.setState(ie)})),t.on("pause",(function(){OvenPlayerConsole.log("VAST : listener : vastTracker paused."),n.setState(ae)})),t.on("clickthrough",(function(e){OvenPlayerConsole.log("VAST : listener : clickthrough :",e),window.open(e,"_blank")})),t.on("skip-countdown",(function(e){0===e?("ko"===r.lang?c.html("  <i class='op-con op-arrow-right btn-right'></i>"):c.html("Ad Skip<i class='op-con op-arrow-right btn-right'></i>"),c.addClass("videoAdUiAction")):"ko"===r.lang?c.html(parseInt(e)+1+"       ."):c.html("You can skip this ad in "+(parseInt(e)+1))})),t.on("rewind",(function(){OvenPlayerConsole.log("VAST : listener : rewind")})),t.on("start",(function(){OvenPlayerConsole.log("VAST : listener : started"),r.started=!0,r.active=!0,l.show(),u.show(),n.trigger(ke,{isLinear:!0}),n.setState(ie)})),t.on("firstQuartile",(function(){OvenPlayerConsole.log("VAST : listener : firstQuartile")})),t.on("midpoint",(function(){OvenPlayerConsole.log("VAST : listener : midpoint")})),t.on("thirdQuartile",(function(){OvenPlayerConsole.log("VAST : listener : thirdQuartile")})),t.on("creativeView",(function(){OvenPlayerConsole.log("VAST : listener : creativeView")})),Object.keys(A).forEach((function(t){e.removeEventListener(t,A[t]),e.addEventListener(t,A[t])})),s.destroy=function(){OvenPlayerConsole.log("EventListener : destroy()"),i.removeEventListener("click",p,!1),Object.keys(A).forEach((function(t){e.removeEventListener(t,A[t])}))},s}(c,h,t,a,l,u,m);var r="";v.creatives&&v.creatives.length>0&&v.creatives[0].mediaFiles&&v.creatives[0].mediaFiles.length>0&&v.creatives[0].mediaFiles[0].fileURL&&(r=v.creatives[0].mediaFiles[0].fileURL,OvenPlayerConsole.log("VAST : media url : ",r)),c.src=r,c.volume=e.volume,c.muted=e.muted})).catch((function(e){m(e)})),o())}))):setTimeout(s,100)}()}))},i.pause=function(){c.pause()},i.videoEndedCallback=function(e){e(),a.isVideoEnded=!0},i.destroy=function(){A&&(A.destroy(),A=null),h=null,g=null,s.remove()},i},bn=function(e,t,n){OvenPlayerConsole.log("[Provider] loaded. ");var r={};Ge(r);var o=e.element,i=null,a=null;e.adTagUrl&&(OvenPlayerConsole.log("[Provider] Ad Client - ",t.getAdClient()),(i="vast"===t.getAdClient()?yn(o,r,t,e.adTagUrl):et(o,r,t,e.adTagUrl))||console.log("Can not load due to google ima for Ads.")),a=function(e,t,n,r){var o={};OvenPlayerConsole.log("EventListener loaded.",e,t);var i={},a=-1,A=e;return o.canplay=function(){t.setCanSeek(!0),t.trigger("bufferFull"),OvenPlayerConsole.log("EventListener : on canplay")},o.durationchange=function(){o.progress(),OvenPlayerConsole.log("EventListener : on durationchange"),t.trigger("durationChanged")},o.ended=function(){OvenPlayerConsole.log("EventListener : on ended"),A.pause(),t.getState()!==X&&t.getState()!==q&&t.getState()!==te&&(n?n((function(){t.setState(q)})):t.setState(q))},o.loadeddata=function(){},o.loadedmetadata=function(){var e=t.getSources(),n=t.getCurrentSource(),r=n>-1?e[n].type:"",o={duration:t.isLive()?1/0:A.duration,type:r};t.setMetaLoaded(),OvenPlayerConsole.log("EventListener : on loadedmetadata",o),t.trigger(Me,o)},o.pause=function(){return t.getState()!==q&&t.getState()!==te&&!A.ended&&!A.error&&A.currentTime!==A.duration&&(OvenPlayerConsole.log("EventListener : on pause"),void t.setState($))},o.loadstart=function(){r&&!r.getConfig().showBigPlayButton&&r.getConfig().autoStart&&t.setState(ne)},o.play=function(){a=-1,A.paused||t.getState()===ee||t.setState(ne)},o.playing=function(){OvenPlayerConsole.log("EventListener : on playing"),a<0&&t.setState(ee)},o.progress=function(){var e=A.buffered;if(!e)return!1;var n,r=A.duration,o=A.currentTime,i=(n=(e.length>0?e.end(e.length-1):0)/r,Math.max(Math.min(n,1),0));t.setBuffer(100*i),t.trigger(Se,{bufferPercent:100*i,position:o,duration:r}),OvenPlayerConsole.log("EventListener : on progress",100*i)},o.timeupdate=function(){var e=A.currentTime,n=A.duration;if(!isNaN(n)){if(e>n)return A.pause(),void t.setState(q);var r=t.getSources()[t.getCurrentSource()].sectionStart;r&&e<r&&t.getState()===ee&&t.seek(r);var o=t.getSources()[t.getCurrentSource()].sectionEnd;if(o&&e>o&&t.getState()===ee)return t.stop(),void t.setState(q);n>9e15&&(n=1/0),t.isSeeking()||A.paused||t.getState()!==re&&t.getState()!==ne&&t.getState()!==ie||function(e,t){return e.toFixed(2)===t.toFixed(2)}(a,e)||(a=-1,t.setState(ee)),r&&r>0&&(e-=r)<0&&(e=0),o&&(n=o),r&&(n-=r),(t.getState()===ee||t.isSeeking())&&t.trigger(Te,{position:e,duration:n})}},o.seeking=function(){t.setSeeking(!0),OvenPlayerConsole.log("EventListener : on seeking",A.currentTime),t.trigger("seek",{position:A.currentTime})},o.seeked=function(){t.isSeeking()&&(OvenPlayerConsole.log("EventListener : on seeked"),t.setSeeking(!1),t.trigger("seeked"))},o.stalled=function(){OvenPlayerConsole.log("EventListener : on stalled")},o.waiting=function(){OvenPlayerConsole.log("EventListener : on waiting",t.getState()),t.isSeeking()?t.setState(ne):t.getState()===ee&&(a=A.currentTime,t.setState(re))},o.volumechange=function(){OvenPlayerConsole.log("EventListener : on volumechange",Math.round(100*A.volume)),t.trigger(Le,{volume:Math.round(100*A.volume),mute:A.muted})},o.error=function(){var e={0:300,1:301,2:302,3:303,4:304}[A.error&&A.error.code||0]||0;OvenPlayerConsole.log("EventListener : on error",e),qe(We.codes[e],t)},Object.keys(o).forEach((function(e){A.removeEventListener(e,o[e]),A.addEventListener(e,o[e])})),i.destroy=function(){OvenPlayerConsole.log("EventListener : destroy()"),Object.keys(o).forEach((function(e){A.removeEventListener(e,o[e])}))},i}(o,r,i?i.videoEndedCallback:null,t),o.playbackRate=o.defaultPlaybackRate=t.getPlaybackRate();var A=function(i){var a=e.sources[e.currentSource];if(e.framerate=a.framerate,r.setVolume(t.getVolume()),e.framerate||t.setTimecodeMode(!0),n)n(a,i);else{OvenPlayerConsole.log("source loaded : ",a,"lastPlayPosition : "+i);var A=o.src;a.file!==A&&(o.src=a.file,(A||""===A)&&o.load()),r.on(Me,(function(){i>0&&r.seek(i)}))}};return r.getName=function(){return e.name},r.getMse=function(){return e.mse},r.getMediaElement=function(){return e.element},r.canSeek=function(){return e.canSeek},r.setCanSeek=function(t){e.canSeek=t},r.isSeeking=function(){return e.seeking},r.setSeeking=function(t){e.seeking=t},r.setMetaLoaded=function(){e.isLoaded=!0},r.metaLoaded=function(){return e.isLoaded},r.setState=function(t){if(e.state!==t){var n=e.state;if(OvenPlayerConsole.log("Provider : setState()",t),n===ie&&(t===te||t===X))return!1;switch(OvenPlayerConsole.log("Provider : triggerSatatus",t),t){case q:r.trigger("complete");break;case $:r.trigger(ye,{prevState:e.state,newstate:$});break;case ae:r.trigger(ye,{prevState:e.state,newstate:ae});break;case ee:r.trigger(be,{prevState:e.state,newstate:ee});break;case ie:r.trigger(be,{prevState:e.state,newstate:ie})}e.state=t,r.trigger(Ce,{prevstate:n,newstate:e.state})}},r.getState=function(){return e.state},r.setBuffer=function(t){e.buffer=t},r.getBuffer=function(){return e.buffer},r.isLive=function(){return!!e.isLive||o.duration===1/0},r.getDuration=function(){return r.isLive()?1/0:o.duration},r.getDvrWindow=function(){return e.dvrWindow},r.getPosition=function(){return o?o.currentTime:0},r.setVolume=function(e){if(!o)return!1;o.volume=e/100,t.setVolume(e)},r.getVolume=function(){return t.getVolume()},r.setMute=function(e){if(!o)return!1;if(void 0===e){var n=t.isMute();o.muted=!n,t.setMute(!n),r.trigger(Re,{mute:t.isMute()})}else o.muted=e,t.setMute(e),r.trigger(Re,{mute:t.isMute()});return o.muted},r.getMute=function(){return t.isMute()},r.preload=function(n,o){return e.sources=n,e.currentSource=$e(n,t),A(o||0),new Promise((function(e,n){t.isMute()&&r.setMute(!0),t.getVolume()&&r.setVolume(t.getVolume()),e()}))},r.load=function(n){e.sources=n,e.currentSource=$e(n,t),A(0)},r.play=function(){if(OvenPlayerConsole.log("Provider : play()"),!o)return!1;if(r.getState()!==ee)if(i&&i.isActive()||i&&!i.started())i.play().then((function(e){OvenPlayerConsole.log("Provider : ads play success")})).catch((function(e){OvenPlayerConsole.log("Provider : ads play fail",e)}));else{var e=o.play();void 0!==e?e.then((function(){OvenPlayerConsole.log("Provider : video play success")})).catch((function(e){OvenPlayerConsole.log("Provider : video play error",e.message)})):OvenPlayerConsole.log("Provider : video play success (ie)")}},r.pause=function(){if(OvenPlayerConsole.log("Provider : pause()"),!o)return!1;r.getState()===ee?o.pause():r.getState()===ie&&i.pause()},r.seek=function(e){if(!o)return!1;o.currentTime=e},r.setPlaybackRate=function(e){return!!o&&(r.trigger("playbackRateChanged",{playbackRate:e}),o.playbackRate=o.defaultPlaybackRate=e)},r.getPlaybackRate=function(){return o?o.playbackRate:0},r.getSources=function(){return o?e.sources.map((function(e,t){var n={file:e.file,type:e.type,label:e.label,index:t,sectionStart:e.sectionStart,sectionEnd:e.sectionEnd,gridThumbnail:e.gridThumbnail};return e.lowLatency&&(n.lowLatency=e.lowLatency),n})):[]},r.getCurrentSource=function(){return e.currentSource},r.setCurrentSource=function(n,i){if(n>-1&&e.sources&&e.sources.length>n)return OvenPlayerConsole.log("source changed : "+n),e.currentSource=n,t.setSourceIndex(n),r.setState(X),i&&A(o.currentTime||0),e.currentSource},r.getQualityLevels=function(){return o?e.qualityLevels:[]},r.getCurrentQuality=function(){return o?e.currentQuality:null},r.setCurrentQuality=function(e){},r.getAudioTracks=function(){return o?e.audioTracks:[]},r.getCurrentAudioTrack=function(){return o?e.currentAudioTrack:[]},r.setCurrentAudioTrack=function(e){},r.isAutoQuality=function(){},r.setAutoQuality=function(e){},r.getFramerate=function(){return e.framerate},r.setFramerate=function(t){return e.framerate=t},r.seekFrame=function(t){var n=e.framerate,i=(o.currentTime*n+t)/n;i+=1e-5,r.pause(),r.seek(i)},r.stop=function(){if(!o)return!1;for(OvenPlayerConsole.log("CORE : stop() "),o.removeAttribute("preload"),o.removeAttribute("src");o.firstChild;)o.removeChild(o.firstChild);r.pause(),r.setState(X)},r.destroy=function(){if(!o)return!1;r.stop(),a.destroy(),i&&(i.destroy(),i=null),r.off(),OvenPlayerConsole.log("CORE : destroy() player stop, listener, event destroied")},r.super=function(e){var t=r[e];return function(){return t.apply(r,arguments)}},r},wn=function(e,t,n){var r=bn({name:ce,element:e,mse:null,listener:null,isLoaded:!1,canSeek:!1,isLive:!1,seeking:!1,state:X,buffer:0,framerate:0,currentQuality:-1,qualityLevels:[],currentAudioTrack:-1,audioTracks:[],currentSource:-1,sources:[],adTagUrl:n},t,null),o=r.super("destroy");return OvenPlayerConsole.log("HTML5 PROVIDER LOADED."),r.destroy=function(){OvenPlayerConsole.log("HTML5 : PROVIDER DESTROYED."),o()},r},En=function(e,t,n,r,o,a,A,s){var c={},u={},l=null,f=!1,p=null,d=null,g={},h=!1,v=!1,m=null,C=!1;A.getConfig().webrtcConfig&&!0===A.getConfig().webrtcConfig.recoverPacketLoss&&(v=!0);var y=!0;A.getConfig().webrtcConfig&&!1===A.getConfig().webrtcConfig.generatePublicCandidate&&(y=A.getConfig().webrtcConfig.generatePublicCandidate);var b=Y(),w=null;function E(e){var t=null;return d&&e===d.id?t=d.peerConnection:g[e]&&(t=g[e].peerConnection),t}function B(e){e.statisticsTimer&&clearTimeout(e.statisticsTimer),e.status||(e.status={},e.status.lostPacketsArr=[],e.status.slotLength=8,e.status.prevPacketsLost=0,e.status.avg8Losses=0,e.status.avgMoreThanThresholdCount=0,e.status.threshold=40);var t=e.status.lostPacketsArr,n=e.status.slotLength,r=e.status.prevPacketsLost,o=e.status.avg8Losses,a=e.status.threshold;e.statisticsTimer=setTimeout((function(){if(!e.peerConnection)return!1;e.peerConnection.getStats().then((function(s){s&&A.getConfig().autoFallback&&s&&(s.forEach((function(A){if("inbound-rtp"===A.type&&"video"===A.kind&&!A.isRemote){var s=parseInt(A.packetsLost)-parseInt(r);t.push(parseInt(A.packetsLost)-parseInt(r)),t.length>n&&t.shift(),t.length===n&&(o=i().reduce(t,(function(e,t){return e+t}),0)/n,OvenPlayerConsole.log("Last8 LOST PACKET AVG  : "+o,"Current Packet LOST: "+s,"Total Packet Lost: "+A.packetsLost,t),o>a?(e.status.avgMoreThanThresholdCount=e.status.avgMoreThanThresholdCount+1,e.status.avgMoreThanThresholdCount>=60&&(OvenPlayerConsole.log("NETWORK UNSTABLED!!! "),M(We.codes[510]))):e.status.avgMoreThanThresholdCount=0),e.status.prevPacketsLost=A.packetsLost}})),B(e))}))}),2e3)}function x(o,a,s,u,f){var g={};if(A.getConfig().webrtcConfig&&A.getConfig().webrtcConfig.iceServers)g.iceServers=A.getConfig().webrtcConfig.iceServers,A.getConfig().webrtcConfig.iceTransportPolicy&&(g.iceTransportPolicy=A.getConfig().webrtcConfig.iceTransportPolicy);else if(f){g.iceServers=[];for(var m=0;m<f.length;m++){var C=f[m],y={};y.urls=C.urls;for(var b=!1,w=I(t),E=0;E<y.urls.length;E++)if(y.urls[E].indexOf(w)>-1){b=!0;break}if(!b&&y.urls.length>0){var x=i().clone(y.urls[0]),k=S(x);w&&k&&y.urls.push(x.replace(k,w))}y.username=C.username||C.user_name,y.credential=C.credential,g.iceServers.push(y)}g.iceTransportPolicy="relay"}else g=c;OvenPlayerConsole.log("Main Peer Connection Config : ",g);var T=null;try{T=new RTCPeerConnection(g),e.trigger("peerConnectionPrepared",T)}catch(e){var R=We.codes[506];return R.error=e,void M(R)}d={id:o,peerId:a,peerConnection:T},T.setRemoteDescription(new RTCSessionDescription(s)).then((function(){T.createAnswer().then((function(e){var t=function(e){for(var t=e.split("\r\n"),n=-1,r=0;r<t.length-1;r++)if(t[r]=t[r].toLowerCase(),t[r].indexOf("a=rtpmap")>-1&&t[r].indexOf("opus")>-1){n=t[r].split(" ")[0].split(":")[1];break}return n}(s.sdp);t>-1&&function(e,t){for(var n=e.split("\r\n"),r=!1,o=0;o<n.length-1;o++)if(n[o]=n[o].toLowerCase(),n[o].indexOf("a=fmtp:"+t)>-1){n[o].indexOf("stereo=1")>-1&&(r=!0);break}return r}(s.sdp,t)&&(e.sdp=function(e,t){for(var n=e.split("\r\n"),r=0;r<n.length-1;r++)if(n[r].indexOf("a=fmtp:"+t)>-1){-1===n[r].indexOf("stereo=1")&&(n[r]=n[r]+";stereo=1");break}return n.join("\r\n")}(e.sdp,t)),OvenPlayerConsole.log("Local SDP",e),O(l,{id:o,peer_id:a,command:"answer",sdp:e}),OvenPlayerConsole.log("create Host Answer : success"),T.setLocalDescription(e).then((function(){})).catch((function(e){var t=We.codes[505];t.error=e,M(t)}))})).catch((function(e){var t=We.codes[504];t.error=e,M(t)}))})).catch((function(e){var t=We.codes[503];t.error=e,M(t)})),u&&L(T,u),T.onicecandidate=function(e){e.candidate&&(OvenPlayerConsole.log("WebRTCLoader send candidate to server : ",e.candidate),O(l,{id:o,peer_id:a,command:"candidate",candidates:[e.candidate]}))},T.onconnectionstatechange=function(e){OvenPlayerConsole.log("[on connection state change]",T.connectionState,e),"connected"===T.connectionState&&r&&r()},T.onicecandidateerror=function(e){},T.onicegatheringstatechange=function(e){},T.oniceconnectionstatechange=function(e){OvenPlayerConsole.log("[on ice connection state change]",T.iceConnectionState,e),"connected"===T.iceConnectionState&&r&&r(),("disconnected"===T.iceConnectionState||"closed"===T.iceConnectionState)&&(h||d&&M(We.codes[511]))},T.ontrack=function(e){if(OvenPlayerConsole.log("stream received."),OvenPlayerConsole.log("Recovery On Packet Loss :",v),v&&B(d),p=e.streams[0],n(e.streams[0]),A.getConfig().webrtcConfig&&A.getConfig().webrtcConfig.playoutDelayHint)for(var t=A.getConfig().webrtcConfig.playoutDelayHint,r=d.peerConnection.getReceivers(),o=0;o<r.length;o++){var i=r[o];"audio"===i.track.kind?(i.playoutDelayHint=t,i.jitterBufferDelayHint=t):i.playoutDelayHint=t,OvenPlayerConsole.log("WebRTC playoutDelayHint",i,t)}}}function k(e,t){if(p){var n=new RTCPeerConnection(c);g[t]={id:t,peerId:e,peerConnection:n},n.addStream(p),n.createOffer((function(r){n.setLocalDescription(r),O(l,{id:e,peer_id:t,sdp:r,command:"offer_p2p"})}),(function(e){}),{}),n.onicecandidate=function(n){n.candidate&&(OvenPlayerConsole.log("WebRTCLoader send candidate to server : "+n.candidate),O(l,{id:e,peer_id:t,command:"candidate_p2p",candidates:[n.candidate]}))}}else setTimeout((function(){k(e,t)}),100)}function I(e){var t,n="";return(t=e.match(/^(?:wss?:\/\/)?(?:[^@\n]+@)?(?:www\.)?([^:\/\n\?\=]+)/im))&&(n=t[1]),n}function S(e){var t,n="";return(t=e.match(new RegExp("\\b(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\b","gi")))&&(n=t[0]),n}function T(e){var n=i().clone(e),r=I(t),o=S(n.candidate);return new Promise((function(e,t){""!==o&&o!==r||e(null),"Firefox"!==b.browser||S(r)?(n.candidate=n.candidate.replace(o,r),e(n)):e(null)}))}function L(e,t){for(var n=0;n<t.length;n++)if(t[n]&&t[n].candidate){var r=t[n];if(e.addIceCandidate(new RTCIceCandidate(r)).then((function(){OvenPlayerConsole.log("addIceCandidate : success")})).catch((function(e){var t=We.codes[502];t.error=e,M(t)})),y){var o=T(r);o&&o.then((function(t){t&&e.addIceCandidate(new RTCIceCandidate(t)).then((function(){OvenPlayerConsole.log("cloned addIceCandidate : success")})).catch((function(e){var t=We.codes[502];t.error=e,M(t)}))}))}}}function R(){try{(l=new WebSocket(t)).onopen=function(){f=!0,O(l,{command:"request_offer"})},l.onmessage=function(t){var n=JSON.parse(t.data);if(n.error){var r=We.codes[501];return r.error=n.error,void M(r)}if(0!==Object.keys(n).length||n.constructor!==Object)if("ping"!==n.command){if("offer"===n.command){var o=n.iceServers||n.ice_servers;x(n.id,n.peer_id,n.sdp,n.candidates,o),0===n.peer_id?e.trigger(Ue,!1):e.trigger(Ue,!0)}if("request_offer_p2p"===n.command&&k(n.id,n.peer_id),"answer_p2p"===n.command&&E(n.peer_id).setRemoteDescription(new RTCSessionDescription(n.sdp)).then((function(e){})).catch((function(e){var t=We.codes[503];t.error=e,M(t)})),"candidate"===n.command&&L(E(n.id),n.candidates),"candidate_p2p"===n.command&&L(E(n.peer_id),n.candidates),"notification"===n.command){if("playlist"===n.type){var i=n.message.renditions;m=n.message;for(var a=0;a<i.length;a++){var A=i[a];s.qualityLevels.push({bitrate:A.video_track.video.bitrate,height:A.video_track.video.height,width:A.video_track.video.width,index:a,label:A.name})}s.currentQuality=0,C=n.message.auto}if("rendition_changed"===n.type){var c=n.message;n.auto&&(C=n.auto);for(var u=-1,f=0;f<m.renditions.length;f++)if(c.rendition_name===m.renditions[f].name){u=f,s.currentQuality=f;break}e.trigger(Qe,{isAuto:C,currentQuality:u,type:"render"})}}"stop"===n.command&&(d.peerId===n.peer_id?(p=null,d.peerConnection.close(),d=null,e.pause(),O(l,{command:"request_offer"})):g[n.peer_id]&&(g[n.peer_id].peerConnection.close(),delete g[n.peer_id]))}else O(l,{command:"pong"});else OvenPlayerConsole.log("Empty Message")},l.onclose=function(e){if(!h){if(r&&!f)return void M();var t=We.codes[501];d&&(t=We.codes[511]),M(t)}},l.onerror=function(e){}}catch(e){M(e)}}function M(t){if(OvenPlayerConsole.log("WebRTC Loader closePeer()"),t||(h=!0),d&&(d.statisticsTimer&&clearTimeout(d.statisticsTimer),p=null,OvenPlayerConsole.log("Closing main peer connection..."),d.peerConnection&&d.peerConnection.close(),d.peerConnection=null,e.trigger("peerConnectionDestroyed"),d=null),Object.keys(g).length>0){for(var n in g){var r=g[n].peerConnection;r&&(OvenPlayerConsole.log("Closing client peer connection..."),r.close(),r=null)}g={}}l?(OvenPlayerConsole.log("Closing websocket connection..."),OvenPlayerConsole.log("Send Signaling : Stop."),1===l.readyState&&(h=!0,d&&O(l,{command:"stop",id:d.id}),l.close())):h=!1,l=null,t&&(o&&o(t),a(t,e))}function O(e,t){e&&e.send(JSON.stringify(t))}return w=window.onbeforeunload,window.onbeforeunload=function(e){w&&w(e),OvenPlayerConsole.log("This calls auto when browser closed."),M()},e.setCurrentQuality=function(e){if(!m)return-1;var t=m.renditions[e];return t?(O(l,{command:"change_rendition",id:d.id,rendition_name:t.name,auto:!1}),C=!1,s.currentQuality=e,s.currentQuality):s.currentQuality},e.isAutoQuality=function(){return C},e.setAutoQuality=function(e){O(l,{command:"change_rendition",id:d.id,auto:e}),C=e},u.connect=function(){OvenPlayerConsole.log("WebRTCLoader connecting..."),OvenPlayerConsole.log("WebRTCLoader url : "+t),R()},u.destroy=function(){h=!0,M(),window.onbeforeunload=w,w=null},u},Bn=function(e,t,n){var r={},o=null,i=null,a=null,A=null,s=null,c={name:ue,element:e,mse:null,listener:null,isLoaded:!1,canSeek:!1,isLive:!1,seeking:!1,state:X,buffer:0,framerate:0,currentQuality:-1,currentSource:-1,qualityLevels:[],sources:[],adTagUrl:n},u=1e4,l=0,f=null,p=!1;function d(){if(Ve(A.file,A.type)){clearTimeout(f),OvenPlayerConsole.log("WEBRTC : onBeforeLoad : ",A),o&&(o.destroy(),o=null);var n=null,i=null;l>0&&(n=function(){clearTimeout(f)},i=function(){clearTimeout(f),performance.now(),p=!0}),o=En(r,A.file,(function(t){if(e.srcObject&&(e.srcObject=null),s&&(s.close(),s=null),e.srcObject=t,t.getAudioTracks().length>0){var n=window.AudioContext||window.webkitAudioContext;(function(e){var t=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent),n=(/iPhone|iPad|iPod/i.test(navigator.userAgent),!1);t&&"suspended"===e.state&&document.addEventListener("touchend",(function(){n||"running"===e.state||(e.resume(),n=!0)}))})(s=new n),s.createMediaStreamSource(t)}}),i,n,qe,t,c),performance.now(),o.connect(),l>0&&(r.once(Ce,(function(e){p||e.newstate===X&&(clearTimeout(f),g())})),r.once(me,(function(){p=!1})),f=setTimeout((function(){if(l>0)p||(g(),d());else{g();var e=We.codes[512];qe(e,r)}l--}),u))}}function g(){o&&(o.destroy(),o=null,e.srcObject=null)}return r=bn(c,t,(function(e){var n=t.getConfig();n.webrtcConfig&&("number"==typeof n.webrtcConfig.connectionTimeout&&n.webrtcConfig.connectionTimeout>0&&(u=n.webrtcConfig.connectionTimeout),"number"==typeof n.webrtcConfig.timeoutMaxRetry&&n.webrtcConfig.timeoutMaxRetry>0&&(l=n.webrtcConfig.timeoutMaxRetry)),A=e,d()})),i=r.super("destroy"),a=r.super("play"),OvenPlayerConsole.log("WEBRTC PROVIDER LOADED."),r.removeStream=function(){e.srcObject=null},r.destroy=function(){clearTimeout(f),g(),OvenPlayerConsole.log("WEBRTC :  PROVIDER DESTROYED."),i()},r.play=function(){l>0&&!p&&d(),a()},r},xn=function(e,t,n){var r=t?1e3:1024;if(Math.abs(e)<r)return e+" B";var o=n||"B",i=["k"+o,"M"+o,"G"+o,"T"+o,"P"+o,"E"+o,"Z"+o,"Y"+o],a=-1;do{e/=r,++a}while(Math.abs(e)>=r&&a<i.length-1);return e.toFixed(1)+i[a]},kn=function(e,t,n){var r={},o=null,a=null,A=null,s=0,c="";try{if(dashjs.Version<"3.0.0")throw We.codes[103];var u=function(e){o.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:e}}}})},l=function(){return o.getSettings().streaming.abr.autoSwitchBitrate.video};(o=dashjs.MediaPlayer().create()).initialize(e,null,!1),window.op_dash=o;var f={name:le,element:e,mse:o,listener:null,isLoaded:!1,canSeek:!1,isLive:!1,seeking:!1,state:X,buffer:0,framerate:0,currentQuality:-1,currentSource:-1,qualityLevels:[],sources:[],adTagUrl:n};r=bn(f,t,(function(e,n){OvenPlayerConsole.log("DASH : Attach File : ",e,"lastPlayPosition : "+n),u(!0),c=e.file,!0===e.lowLatency?(o.updateSettings({streaming:{lowLatencyEnabled:e.lowLatency}}),t.getConfig().lowLatencyMpdLiveDelay&&"number"==typeof t.getConfig().lowLatencyMpdLiveDelay&&o.updateSettings({streaming:{liveDelay:t.getConfig().lowLatencyMpdLiveDelay}})):o.updateSettings({streaming:{lowLatencyEnabled:!1,liveDelay:void 0}}),o.updateSettings({debug:{logLevel:dashjs.Debug.LOG_LEVEL_NONE}});var i=t.getConfig().dashConfig;i&&o.updateSettings(i),r.trigger("dashPrepared",o),o.attachSource(c),s=n})),a=r.super("play"),A=r.super("destroy"),OvenPlayerConsole.log("DASH PROVIDER LOADED."),o.on(dashjs.MediaPlayer.events.ERROR,(function(e){var t=We.codes[302];t.error=e,qe(t,r)})),o.on(dashjs.MediaPlayer.events.QUALITY_CHANGE_REQUESTED,(function(e){e&&e.mediaType&&"video"===e.mediaType&&r.trigger(Qe,{isAuto:l(),currentQuality:f.currentQuality,type:"request"})})),o.on(dashjs.MediaPlayer.events.QUALITY_CHANGE_RENDERED,(function(e){e&&e.mediaType&&"video"===e.mediaType&&(f.currentQuality=e.newQuality,r.trigger(Qe,{isAuto:l(),currentQuality:e.newQuality,type:"render"}))})),o.on(dashjs.MediaPlayer.events.PLAYBACK_METADATA_LOADED,(function(e){OvenPlayerConsole.log("DASH : PLAYBACK_METADATA_LOADED  : ",o.getQualityFor("video"),o.getBitrateInfoListFor("video"),o.getBitrateInfoListFor("video")[o.getQualityFor("video")]);var t=o.getBitrateInfoListFor("video");f.currentQuality=o.getQualityFor("video");for(var n=0;n<t.length;n++)i().findWhere(f.qualityLevels,{bitrate:t[n].bitrate,height:t[n].height,width:t[n].width})||f.qualityLevels.push({bitrate:t[n].bitrate,height:t[n].height,width:t[n].width,index:t[n].qualityIndex,label:t[n].width+"x"+t[n].height+", "+xn(t[n].bitrate,!0,"bps")});o.isDynamic()&&(f.isLive=!0),s&&!f.isLive&&o.seek(s)})),r.play=function(e){r.getState()===ie||r.getState()===ae||a(e)},r.setCurrentQuality=function(e){return r.getState()!==ee&&r.play(),f.currentQuality=e,l()&&u(!1),o.setQualityFor("video",e),f.currentQuality},r.isAutoQuality=function(){return l()},r.setAutoQuality=function(e){u(e)},r.destroy=function(){o.destroy?o.destroy():o.reset(),o=null,r.trigger("dashDestroyed"),OvenPlayerConsole.log("DASH : PROVIDER DESTROYED."),A()}}catch(e){if(e&&e.code&&103===e.code)throw e;var p=We.codes[105];throw p.error=e,p}return r},In=function(e,t,n){var r={},o=null,i=null,a=null,A=null,s=!1;try{var c={debug:!1},u=t.getConfig().hlsConfig;if(u)for(var l in u)c[l]=u[l];o=new Hls(c),window.op_hls=o,o.attachMedia(e);var f={name:fe,element:e,mse:o,listener:null,isLoaded:!1,canSeek:!1,isLive:!1,seeking:!1,state:X,buffer:0,dvrWindow:0,framerate:0,currentQuality:-1,qualityLevels:[],currentAudioTrack:-1,audioTracks:[],currentSource:-1,sources:[],adTagUrl:n};r=bn(f,t,(function(e,t){OvenPlayerConsole.log("HLS : onExtendedLoad : ",e,"lastPlayPosition : "+t),r.trigger("hlsPrepared",o),o.loadSource(e.file),o.once(Hls.Events.MANIFEST_LOADED,(function(e,t){for(var n=0;n<o.levels.length;n++){var r=o.levels[n];f.qualityLevels.push({bitrate:r.bitrate,height:r.height,width:r.width,index:n,label:r.width+"x"+r.height+", "+xn(r.bitrate,!0,"bps")})}f.currentQuality=o.firstLevel;for(var i=0;i<o.audioTracks.length;i++){var a=o.audioTracks[i];f.audioTracks.push({index:a.id,label:a.name}),!0===a.default&&(f.currentAudioTrack=a.id)}})),o.once(Hls.Events.LEVEL_LOADED,(function(e,n){s=!0,A&&(clearTimeout(A),A=null),n.details.live?f.isLive=!0:t&&t>=0&&r.seek(t)})),o.on(Hls.Events.LEVEL_SWITCHED,(function(e,t){f.currentQuality=t.level,r.trigger(Qe,{isAuto:o.autoLevelEnabled,currentQuality:f.currentQuality,type:"render"})})),o.on(Hls.Events.AUDIO_TRACK_SWITCHED,(function(e,t){f.currentAudioTrack=t.id,r.trigger(Ne,{currentAudioTrack:f.currentAudioTrack})})),o.on(Hls.Events.LEVEL_UPDATED,(function(e,t){t&&t.details&&(f.dvrWindow=t.details.totalduration)})),o.on(Hls.Events.ERROR,(function(t,n){if(n&&n.networkDetails&&202===n.networkDetails.status)return A&&(clearTimeout(A),A=null),r.setState(ne),void(A=setTimeout((function(){o&&(r.stop(),o.stopLoad(),o.loadSource(e.file))}),1e3));if(n.fatal){var i=302;n&&n.networkDetails&&400===n.networkDetails.status?i=306:n&&n.networkDetails&&403===n.networkDetails.status?i=307:n&&n.networkDetails&&406===n.networkDetails.status&&(i=308);var a=We.codes[i];a.error=n.details,qe(a,r)}})),r.on(Ce,(function(e){s||e.prevstate!==ne||e.newstate!==X||(A&&(clearTimeout(A),A=null),o&&o.stopLoad())}))})),r.setCurrentQuality=function(e){return o.currentLevel=e,f.currentQuality=e,f.currentQuality},r.isAutoQuality=function(){return o.autoLevelEnabled},r.setAutoQuality=function(e){o.currentLevel=e?-1:o.currentLevel},r.setCurrentAudioTrack=function(e){return o.audioTrack=e,f.currentAudioTrack=e,f.currentAudioTrack},r.getDuration=function(){return e.duration},i=r.super("stop"),r.stop=function(){A&&(clearTimeout(A),A=null),o&&o.stopLoad(),i()},a=r.super("destroy"),r.destroy=function(){A&&(clearTimeout(A),A=null),o&&(o.destroy(),r.trigger("hlsDestroyed")),o=null,OvenPlayerConsole.log("HLS : PROVIDER DESTROYED."),a()},OvenPlayerConsole.log("HLS PROVIDER LOADED.")}catch(e){var p=We.codes[106];throw p.error=e,p}return r},Sn=function(e){var t={};Ge(t),OvenPlayerConsole.log("API loaded.");var n=function(e){var t={},n={playlist:[],currentIndex:0},r=Ke();OvenPlayerConsole.log("PlaylistManager loaded.");var o=function(e){if(e&&(e.file||e.host||e.application||e.stream)){var t=Object.assign({},{default:!1},e);t.file=a(""+t.file),t.host&&t.application&&t.stream&&(t.file=t.host+"/"+t.application+"/stream/"+t.stream,delete t.host,delete t.application,delete t.stream);var n=/^[^/]+\/(?:x-)?([^/]+)$/;if(n.test(t.type)&&(t.mimeType=t.type,t.type=t.type.replace(n,"$1")),_e(t.file)?t.type="rtmp":Ve(t.file)?t.type="webrtc":He(t.file,t.type)?t.type="hls":Je(t.file,t.type)?t.type="dash":t.type||(t.type=A(t.file)),t.lowLatency&&(t.lowLatency=t.lowLatency),t.type){switch(t.type){case"m3u8":case"vnd.apple.mpegurl":t.type="hls";break;case"m4a":t.type="aac";break;case"smil":t.type="rtmp"}return Object.keys(t).forEach((function(e){""===t[e]&&delete t[e]})),t}}};return t.initPlaylist=function(e,t){OvenPlayerConsole.log("PlaylistManager setPlaylist() ",e);var a=(i().isArray(e)?e:[e]).map((function(e){i().isArray(e.tracks)||delete e.tracks;var n=Object.assign({},{sources:[],tracks:[],title:""},e);n.sources!==Object(n.sources)||i().isArray(n.sources)||(n.sources=[o(n.sources)]),i().isArray(n.sources)&&0!==n.sources.length||(n.sources=[o(n)]),i().isArray(n.sources)&&0!==n.sources.length||(e.levels?n.sources=e.levels:n.sources=[o(e)]);for(var a=0;a<n.sources.length;a++){var A,s=n.sources[a];if(s){var c=s.default;s.default=!!c&&"true"===c.toString(),n.sources[a].label||(n.sources[a].label=n.sources[a].type+"-"+a.toString()),A=o(n.sources[a]),r.findProviderNameBySource(A)?n.sources[a]=A:n.sources[a]=null}}return n.sources=n.sources.filter((function(e){return!!e})),!n.title&&n.sources[0]&&n.sources[0].label&&(n.title=n.sources[0].label),t.isCurrentProtocolOnly()&&(n.sources=function(e){if(e){var t=n.sources[0].type;return i().filter(e,{type:t})}}(n.sources)),i().isArray(n.tracks)||(n.tracks=[]),i().isArray(n.captions)&&(n.tracks=n.tracks.concat(n.captions),delete n.captions),n.tracks=n.tracks.map((function(e){return!(!e||!e.file)&&Object.assign({},{kind:"captions",default:!1},e)})).filter((function(e){return!!e})),n})).filter((function(e){return e.sources&&e.sources.length>0}))||[];return n.playlist=a,a},t.getPlaylist=function(){return OvenPlayerConsole.log("PlaylistManager getPlaylist() ",n.playlist),n.playlist},t.getCurrentPlayList=function(){return n.playlist[n.currentIndex]?n.playlist[n.currentIndex]:[]},t.getCurrentPlaylistIndex=function(){return n.currentIndex},t.setCurrentPlaylist=function(t){return n.playlist[t]&&(n.currentIndex=t,e.trigger(ge,n.currentIndex)),n.currentIndex},t.getCurrentSources=function(){return n.playlist[n.currentIndex]?(OvenPlayerConsole.log("PlaylistManager getCurrentSources() ",n.playlist[n.currentIndex].sources),n.playlist[n.currentIndex].sources):null},t.getCurrentAdTag=function(){if(n.playlist[n.currentIndex])return n.playlist[n.currentIndex].adTagUrl||""},t}(t),o=function(){var e=Ke(),t={},n={};OvenPlayerConsole.log("ProviderController loaded.");var r=function(e,n){t[e]||(OvenPlayerConsole.log("ProviderController _registerProvider() ",e),t[e]=n)},o={html5:function(){var e=wn;return r(ce,e),{name:ce,provider:e}},webrtc:function(){var e=Bn;return r(ue,e),{name:ue,provider:e}},dash:function(){var e=kn;return r(le,e),{name:le,provider:e}},hls:function(){var e=In;return r(fe,e),{name:fe,provider:e}}};return n.loadProviders=function(t){var n=e.findProviderNamesByPlaylist(t);return OvenPlayerConsole.log("ProviderController loadProviders() ",n),n?Promise.all(n.filter((function(e){return!!o[e]})).map((function(e){return o[e]()}))):Promise.reject(We.codes[101])},n.findByName=function(e){return OvenPlayerConsole.log("ProviderController findByName() ",e),t[e]},n.getProviderBySource=function(t){var r=e.findProviderNameBySource(t);return OvenPlayerConsole.log("ProviderController getProviderBySource() ",r),n.findByName(r)},n.isSameProvider=function(t,n){return OvenPlayerConsole.log("ProviderController isSameProvider() ",e.findProviderNameBySource(t),e.findProviderNameBySource(n)),e.findProviderNameBySource(t)===e.findProviderNameBySource(n)},n}(),s=Y(),c=function(e,t){var n={},r=ze(e),o="";return OvenPlayerConsole.log("MediaManager loaded. browser : ",t),n.createMedia=function(e,t){return n.empty(),i=t.isLoop(),a=t.isAutoStart(),(o=document.createElement("video")).setAttribute("preload","auto"),o.setAttribute("disableremoteplayback",""),o.setAttribute("webkit-playsinline","true"),o.setAttribute("playsinline","true"),i&&o.setAttribute("loop",""),a&&o.setAttribute("autoplay",""),r.append(o),o;var i,a},n.createAdContainer=function(){var e=document.createElement("div");return e.setAttribute("class","op-ads"),r.append(e),e},n.empty=function(){OvenPlayerConsole.log("MediaManager removeElement()"),r.removeChild(o),o=null},n.destroy=function(){r.removeChild(),r=null,o.src=null,o.srcObject=null,o=null},n}(e,s),u="",l="",f="",p=function(e){OvenPlayerConsole.log("runNextPlaylist");var r=e,o=!!n.getPlaylist()[r];l.setSourceIndex(0),l.setVolume(u.getVolume()),o?(n.setCurrentPlaylist(r),d()):t.trigger(he,null)},d=function(e){return o.loadProviders(n.getCurrentPlayList()).then((function(e){if(e.length<1)throw We.codes[101];u&&(u.destroy(),u=null),f&&(f.destroy(),f=null),f=function(e,t){var n={},r=[],o=-1,a=K(),A=!0;OvenPlayerConsole.log("Caption Manager >> ",t);var s=function(e,t){return e.data=t||[],e.name=e.label||e.name||e.language,e.id=function(e,t){var n,o=e.kind||"cc";return n=e.default||e.defaulttrack?"default":e.id||o+t,A&&(c(r.length||0),A=!1),n}(e,r.length),r.push(e),e.id},c=function(t){o=t,e.trigger(Pe,o)};if(e.getConfig().playlist&&e.getConfig().playlist.length>0){var u=e.getConfig().playlist[t];if(u&&u.tracks&&u.tracks.length>0)for(var l=function(t){var n=u.tracks[t];Ye(n.kind)&&!i().findWhere(n,{file:n.file})&&a.load(n,n.lang,(function(e){e&&e.length>0&&s(n,e)}),(function(t){var n=We.codes[305];n.error=t,e.trigger(me,n)}))},f=0;f<u.tracks.length;f++)l(f)}return e.on(Te,(function(t){var n=t.position;if(o>-1&&r[o]){var a=i().filter(r[o].data,(function(e){return n>=e.startTime&&(!e.endTime||n)<=e.endTime}));a&&a.length>0&&e.trigger(De,a[0])}})),n.flushCaptionList=function(e){r=[],c(e)},n.getCaptionList=function(){return r||[]},n.getCurrentCaption=function(){return o},n.setCurrentCaption=function(e){if(!(e>-2&&e<r.length))return null;c(e)},n.addCaption=function(t){Ye(t.kind)&&!i().findWhere(a,{file:t.file})&&a.load(t,(function(e){e&&e.length>0&&s(t,e)}),(function(t){var n=errors[305];n.error=t,e.trigger(me,n)}))},n.removeCaption=function(e){return e>-1&&e<r.length?(r.splice(e,1),r):null},n.destroy=function(){r=[],a=null,e.off(Te,null,n)},n}(t,n.getCurrentPlaylistIndex()),OvenPlayerConsole.log("API : init() captions");var r=$e(n.getCurrentSources(),l),o=e[r].name;OvenPlayerConsole.log("API : init() provider",o),u=e[r].provider(c.createMedia(o,l),l,n.getCurrentAdTag()),"rtmp"===o&&Object.assign(t,function(e){return{externalCallbackCreep:function(t){return t.name&&t.data?e.triggerEventFromExternal(t.name,t.data):null}}}(u)),u.on("all",(function(e,r){if(e===me&&(o===ue&&u.removeStream(),l.getConfig().autoFallback&&t.getCurrentSource()+1<t.getSources().length))return t.pause(),void t.setCurrentSource(t.getCurrentSource()+1);"complete"===e&&p(n.getCurrentPlaylistIndex()+1),e===Me&&l.isAutoStart()&&t.play(),t.trigger(e,r)})),t.trigger(Oe,{currentSource:r})})).then((function(){u.preload(n.getCurrentSources(),e).then((function(){})).catch((function(e){if(e&&e.code&&We.codes[e.code])t.trigger(me,We.codes[e.code]);else{var n=We.codes[100];n.error=e,t.trigger(me,n)}}))})).catch((function(e){if(e&&e.code&&We.codes[e.code])t.trigger(me,We.codes[e.code]);else{var n=We.codes[100];n.error=e,t.trigger(me,n)}}))};return t.init=function(r){r||(r={}),r.mediaContainer=e,r.browser=s,l=function(e,t){OvenPlayerConsole.log("Configurator loaded.",e);var n=function(e){!function(e){Object.keys(e).forEach((function(t){"id"!==t&&(e[t]=function(e){if(void 0===e)return null;if("string"==typeof e&&e.length<6){var t=e.toLowerCase();if("true"===t)return!0;if("false"===t)return!1;if(!isNaN(Number(e))&&!isNaN(parseFloat(e)))return Number(e)}return e}(e[t]))}))}(e);var t=Object.assign({},{mediaContainer:"",playbackRates:[2,1.5,1,.5,.25],playbackRate:1,mute:!1,volume:100,loop:!1,controls:!0,autoStart:!1,autoFallback:!0,timecode:!0,sourceIndex:-1,browser:"",hidePlaylistIcon:!1,rtmpBufferTime:1,rtmpBufferTimeMax:3,adClient:"googleima",currentProtocolOnly:!1,systemText:null,lang:"en",loadingRetryCount:0,expandFullScreenUI:!0,fullscreenOption:null,showBigPlayButton:!0},e),n=[];t.systemText&&(n=i().isArray(t.systemText)?t.systemText:[t.systemText]);for(var r=0;r<n.length;r++)if(n[r].lang){var o=i().findWhere(je,{lang:n[r].lang});o?Object.assign(o,n[r]):((o=i().findWhere(je,{lang:"en"})).lang=n[r].lang,je.push(Object.assign(n[r],o)))}t.systemText=i().findWhere(je,{lang:t.lang});var a=t.playbackRates;(a=a.filter((function(e){return i().isNumber(e)&&e>=.25&&e<=4})).map((function(e){return Math.round(4*e)/4}))).indexOf(1)<0&&a.push(1),a.sort(),t.playbackRates=a,t.rtmpBufferTime=t.rtmpBufferTime>10?10:t.rtmpBufferTime,t.rtmpBufferTimeMax=t.rtmpBufferTimeMax>50?50:t.rtmpBufferTimeMax,t.playbackRates.indexOf(t.playbackRate)<0&&(t.playbackRate=1);var A=t.playlist;if(A)i().isArray(A.playlist)&&(t.feedData=A,t.playlist=A.playlist);else{var s=i().pick(t,["title","description","type","image","file","sources","tracks","host","application","stream","adTagUrl"]);t.playlist=[s]}return delete t.duration,t}(e);return{getConfig:function(){return n},getAdClient:function(){return n.adClient},setConfig:function(e,t){n[e]=t},getContainer:function(){return n.mediaContainer},getPlaybackRate:function(){return n.playbackRate},setPlaybackRate:function(e){return n.playbackRate=e,e},getQualityLabel:function(){return n.qualityLabel},setQualityLabel:function(e){n.qualityLabel=e},isCurrentProtocolOnly:function(){return n.currentProtocolOnly},getSourceIndex:function(){return n.sourceIndex},setSourceIndex:function(e){n.sourceIndex=e},setTimecodeMode:function(e){n.timecode!==e&&(n.timecode=e,t.trigger(Fe,e))},isTimecodeMode:function(){return n.timecode},getRtmpBufferTime:function(){return n.rtmpBufferTime},getRtmpBufferTimeMax:function(){return n.rtmpBufferTimeMax},setMute:function(e){n.mute=e},isMute:function(){return n.mute},getVolume:function(){return n.volume},setVolume:function(e){n.volume=e},isLoop:function(){return n.loop},isAutoStart:function(){return n.autoStart},isControls:function(){return n.controls},getPlaybackRates:function(){return n.playbackRates},getBrowser:function(){return n.browser},getSystemText:function(){return n.systemText},getLanguage:function(){return n.lang},getPlaylist:function(){return n.playlist},setPlaylist:function(e){return i().isArray(e)?n.playlist=e:n.playlist=[e],n.playlist}}}(r,t),OvenPlayerConsole.log("API : init()"),OvenPlayerConsole.log("API : init() config : ",l),We.codes=l.getSystemText().api.error,n.initPlaylist(l.getPlaylist(),l),OvenPlayerConsole.log("API : init() sources : ",n.getCurrentSources()),d(),setTimeout((function(){t.trigger(pe)}))},t.getProviderName=function(){return u?u.getName():null},t.getProvider=function(){return u},t.getMseInstance=function(){return u?u.getMse():null},t.getConfig=function(){return OvenPlayerConsole.log("API : getConfig()",l.getConfig()),l.getConfig()},t.getBrowser=function(){return l.getBrowser()},t.setTimecodeMode=function(e){OvenPlayerConsole.log("API : setTimecodeMode()",e),l.setTimecodeMode(e)},t.isTimecodeMode=function(){return OvenPlayerConsole.log("API : isTimecodeMode()"),l.isTimecodeMode()},t.getFramerate=function(){if(OvenPlayerConsole.log("API : getFramerate()"),u)return u.getFramerate()},t.seekFrame=function(e){return u?(OvenPlayerConsole.log("API : seekFrame()",e),u.seekFrame(e)):null},t.getDuration=function(){return u?(OvenPlayerConsole.log("API : getDuration()",u.getDuration()),u.getDuration()):null},t.getDvrWindow=function(){return u?(OvenPlayerConsole.log("API : getDvrWindow()",u.getDvrWindow()),u.getDvrWindow()):null},t.getPosition=function(){return u?(OvenPlayerConsole.log("API : getPosition()",u.getPosition()),u.getPosition()):null},t.getVolume=function(){return u?(OvenPlayerConsole.log("API : getVolume()",u.getVolume()),u.getVolume()):null},t.setVolume=function(e){if(!u)return null;OvenPlayerConsole.log("API : setVolume() "+e),u.setVolume(e)},t.setMute=function(e){return u?(OvenPlayerConsole.log("API : setMute() "+e),u.setMute(e)):null},t.getMute=function(){return u?(OvenPlayerConsole.log("API : getMute() "+u.getMute()),u.getMute()):null},t.load=function(e){return OvenPlayerConsole.log("API : load() ",e),e&&(l.setSourceIndex(0),u&&u.getQualityLevels().length>0&&u.setCurrentQuality(0),"sources"in e?l.setPlaylist(e):l.setPlaylist({sources:e}),n.initPlaylist(l.getPlaylist(),l)),d()},t.play=function(){if(!u)return null;OvenPlayerConsole.log("API : play() "),u.metaLoaded()||l.isAutoStart()?u.play():t.once(Me,(function(){u.play()}))},t.pause=function(){if(!u)return null;OvenPlayerConsole.log("API : pause() "),u.pause()},t.seek=function(e){if(!u)return null;OvenPlayerConsole.log("API : seek() "+e),u.seek(e)},t.setPlaybackRate=function(e){return u?(OvenPlayerConsole.log("API : setPlaybackRate() ",e),u.setPlaybackRate(l.setPlaybackRate(e))):null},t.getPlaybackRate=function(){return u?(OvenPlayerConsole.log("API : getPlaybackRate() ",u.getPlaybackRate()),u.getPlaybackRate()):null},t.getPlaylist=function(){return OvenPlayerConsole.log("API : getPlaylist() ",n.getPlaylist()),n.getPlaylist()},t.getCurrentPlaylist=function(){return OvenPlayerConsole.log("API : getCurrentPlaylist() ",n.getCurrentPlaylistIndex()),n.getCurrentPlaylistIndex()},t.setCurrentPlaylist=function(e){OvenPlayerConsole.log("API : setCurrentPlaylist() ",e),p(e)},t.getSources=function(){return u?(OvenPlayerConsole.log("API : getSources() ",u.getSources()),u.getSources()):null},t.getCurrentSource=function(){return u?(OvenPlayerConsole.log("API : getCurrentSource() ",u.getCurrentSource()),u.getCurrentSource()):null},t.setCurrentSource=function(e){if(!u)return null;OvenPlayerConsole.log("API : setCurrentSource() ",e);var n=u.getPosition();return l.setSourceIndex(e),d(n).then((function(){t.trigger(Oe,{currentSource:e})})),e},t.getQualityLevels=function(){return u?(OvenPlayerConsole.log("API : getQualityLevels() ",u.getQualityLevels()),u.getQualityLevels()):null},t.getCurrentQuality=function(){return u?(OvenPlayerConsole.log("API : getCurrentQuality() ",u.getCurrentQuality()),u.getCurrentQuality()):null},t.setCurrentQuality=function(e){return u?(OvenPlayerConsole.log("API : setCurrentQuality() ",e),u.setCurrentQuality(e)):null},t.getAudioTracks=function(){return u?(OvenPlayerConsole.log("API : getAudioTracks() ",u.getAudioTracks()),u.getAudioTracks()):null},t.getCurrentAudioTrack=function(){return u?(OvenPlayerConsole.log("API : getCurrentAudioTrack() ",u.getCurrentAudioTrack()),u.getCurrentAudioTrack()):null},t.setCurrentAudioTrack=function(e){return u?(OvenPlayerConsole.log("API : setCurrentAudioTrack() ",e),u.setCurrentAudioTrack(e)):null},t.isAutoQuality=function(){return u?(OvenPlayerConsole.log("API : isAutoQuality()"),u.isAutoQuality()):null},t.setAutoQuality=function(e){return u?(OvenPlayerConsole.log("API : setAutoQuality() ",e),u.setAutoQuality(e)):null},t.getCaptionList=function(){return f?(OvenPlayerConsole.log("API : getCaptionList() ",f.getCaptionList()),f.getCaptionList()):null},t.getCurrentCaption=function(){return f?(OvenPlayerConsole.log("API : getCurrentCaption() ",f.getCurrentCaption()),f.getCurrentCaption()):null},t.setCurrentCaption=function(e){if(!f)return null;OvenPlayerConsole.log("API : setCurrentCaption() ",e),f.setCurrentCaption(e)},t.addCaption=function(e){return f?(OvenPlayerConsole.log("API : addCaption() "),f.addCaption(e)):null},t.removeCaption=function(e){return f?(OvenPlayerConsole.log("API : removeCaption() ",e),f.removeCaption(e)):null},t.getBuffer=function(){if(!u)return null;OvenPlayerConsole.log("API : getBuffer() ",u.getBuffer()),u.getBuffer()},t.getState=function(){return u?(OvenPlayerConsole.log("API : getState() ",u.getState()),u.getState()):null},t.stop=function(){if(!u)return null;OvenPlayerConsole.log("API : stop() "),u.stop()},t.remove=function(){OvenPlayerConsole.log("API : remove() "),f&&(f.destroy(),f=null),u&&(u.destroy(),u=null),c&&(c.destroy(),c=null),t.trigger(de),t.off(),o=null,n=null,l=null,OvenPlayerConsole.log("API : remove() - currentProvider, providerController, playlistManager, playerConfig, api event destroed. "),Tn.removePlayer(t)},t.getMediaElement=function(){return u.getMediaElement()},t.getVersion=function(){return r},t},Tn=(sn=(An={}).playerList=[],An.create=function(e,t){window.OvenPlayerConsole&&0!==Object.keys(window.OvenPlayerConsole).length||(window.OvenPlayerConsole={},OvenPlayerConsole.log=function(){});var n=Ze(e),r=Sn(n);return r.init(t),sn.push(r),r},An.getPlayerList=function(){return sn},An.getPlayerByContainerId=function(e){for(var t=0;t<sn.length;t++)if(sn[t].getContainerId()===e)return sn[t];return null},An.getPlayerByIndex=function(e){return sn[e]||null},An.removePlayer=function(e){for(var t=0;t<sn.length;t++)sn[t]===e&&sn.splice(t,1)},An.generateWebrtcUrls=function(e){return(i().isArray(e)?e:[e]).map((function(e,t){if(e.host&&Ve(e.host)&&e.application&&e.stream)return{file:e.host+"/"+e.application+"/"+e.stream,type:"webrtc",label:e.label?e.label:"webrtc-"+(t+1)}}))},An.debug=function(e){return window.OvenPlayerConsole=e?{log:window.console.log}:{log:function(){}},e},An),Ln=function(e,t){var n='<div id="'+t.id+'" class="op-setting-panel '+(t.isRoot?"animated fadeIn":"")+'" style="max-height: '+t.height+'px"><div class="op-setting-title-container"><div class="op-setting-title" tabindex="0">'+(t.isRoot?"":'<span class="op-setting-title-previcon">&lt;</span>')+'<span class="op-setting-title-title">'+t.title+'</span></div></div><div class="op-setting-item-container">';return i().forEach(t.body,(function(e){n+=Rn(e,t.useCheck)})),n+="</div></div>"},Rn=function(e,t){return'<div class="op-setting-item" op-panel-type="'+e.panelType+'" op-data-value="'+e.value+'">'+(t?'<span class="op-setting-item-checked '+(e.isCheck?"op-show":"")+'">&#x2713;</span>':"")+'<span class="op-setting-item-title">'+e.title+"</span>"+(e.hasNext?'<span class="op-setting-item-nexticon">&gt;</span><span class="op-setting-item-value">'+e.description+"</span>":"")+"</div>"},Mn=function(e,t){return'<div class="op-playlist-card '.concat(t?"active":"",'" data-index="').concat(e.index,'">')+'<div class="op-playlist-card-thumbnail '.concat(e.image?"":"empty",'">').concat(e.image?"<img src=".concat(e.image,">"):'<i class="op-con op-empty-video"></i>'," ").concat(e.duration?'<span class="op-badge">'.concat(s(e.duration),"</span>"):""," </div>")+'<div class="op-playlist-card-title">'.concat(e.title,"</div>")+"</div>"},On={TextViewTemplate:function(e){return'<div class="textView" style="padding : 5px; background: red; position : absolute; top: 0;">'+"<h3>".concat(e,"</h3>")+'<button type="button" class="btn">button</button></div>'},ViewTemplate:function(e,t){return'<div class="ovenplayer op-wrapper" tabindex="-1" '.concat(t?'id = "'.concat(t,'"'):"",">")+'<div class="op-ratio"></div><div class="op-player op-clear"><div class="op-core-ui-wrapper op-clear"><div class="op-media-element-container op-clear"></div><div class="op-ui op-clear"></div></div></div></div>'},HelpersTemplate:function(e,t){return'<div class="op-helpers-container"></div>'},BigButtonTemplate:function(e,t){return'<div class="op-bigbutton-container ">'+"".concat(t===ee?'<i class="op-con op-pause-big"></i>':"")+"".concat(t===$?'<i class="op-bigbutton op-con op-play-big"></i>':"")+"".concat(t===X?'<i class="op-bigbutton op-con op-play-big"></i>':"")+"".concat(t===q?'<i class="op-bigbutton op-con op-replay-big"></i>':"")+"</div>"},ThumbnailTemplate:function(e,t){return'<div class="op-thumbnail-container"><div class="op-thumbnail-wrapper">'+"".concat(t.title?'<div class="op-thumbnail-header">'.concat(t.title,"</div>"):"")+"</div></div>"},WaterMarkTemplate:function(e,t){return'<div class="op-watermark-container"><div class="op-watermark">'+"".concat(t.waterMark.image?'<img src="'.concat(t.waterMark.image,'">'):"")+"".concat(t.waterMark.text?'<span class="op-watermark-text">'.concat(t.waterMark.text,"</span>"):"")+"</div></div>"},MessageBoxTemplate:function(e,t){return'<div class="op-message-box op-clear '.concat(!0===t.dontClose?"op-message-box-default-cursor":"",'">')+'<div class="op-message-container ">'+'<div class="op-message-text">'.concat(t.message)+"".concat(t.description?'<div class="op-message-description">'.concat(t.description,"</div>"):"")+"</div>"+"".concat(t.iconClass?'<div class="op-message-icon"><i class="op-con '.concat(t.iconClass,'"></i></div>'):"")+"</div></div>"},SpinnerTemplate:function(e){return'<div class="op-spinner-container"><div class="op-spinner"></div></div>'},ContextPanelTemplate:function(e){return'<div class="op-context-panel animated fadeIn"><div class="op-context-item" tabindex="1">'+'<span class="op-context-item-text">'.concat(e.context," ").concat(r,"</span>")+"</div></div>"},CaptionViewerTemplate:function(e){return'<div class="op-caption-viewer">    <div class="op-caption-text-container">        <pre class="op-caption-text"></pre>      </div></div>'},ControlsTemplate:function(e,t){return'<div class="op-controls-container op-clear"><div class="op-bottom-panel op-clear"><div class="op-gradient-bottom op-clear"></div><div class="op-controls op-clear"><div class="op-left-controls op-clear"></div><div class="op-right-controls op-clear">'+'<div class="playlist-holder op-navigators op-clear">'.concat(t?'<button class="op-button op-playlist-button"><i class="op-con op-playlist-icon"></i></button>':"","</div>")+'<div class="setting-holder op-navigators op-clear"></div><div class="fullscreen-holder op-navigators op-clear"></div></div></div><div class="op-progressbar-container op-clear"></div></div></div>'},VolumeButtonTemplate:function(e){return'<div class="op-navigators op-volume-controller"><button class="op-button op-volume-button"><i class="op-con op-volume-max"></i><i class="op-con op-volume-small"></i><i class="op-con op-volume-mute"></i></button><div class="op-volume-slider-container"><div class="op-volume-silder"><div class="op-volume-slider-bg"></div><div class="op-volume-slider-value"></div><div class="op-volume-slider-handle"></div></div></div></div>'},ProgressBarTemplate:function(e){return'<div class="op-progressbar" tabindex="0"><div class="op-progressbar-padding"></div><div class="op-progress-list"><div class="op-load-progress"></div><div class="op-play-progress op-play-background-color"></div><div class="op-hover-progress"></div></div><div class="op-progressbar-knob-container"><div class="op-progressbar-knob op-play-background-color"></div></div><span class="op-progressbar-preview"></span><span class="op-progressbar-time">00:00</span></div>'},PlayButtonTemplate:function(e){return'<div class="op-navigators op-play-controller"><button class="op-button op-play-button" type="button"><i class="op-con op-play"></i><i class="op-con op-pause" style="display: none;"></i><i class="op-con op-replay" style="display: none;"></i></button><button class="op-button op-seek-button op-seek-button-back" type="button"><i class="op-con op-seek-back"></i><span class="op-seek-back-text">10</span></button><button class="op-button op-seek-button op-seek-button-forward" type="button"><i class="op-con op-seek-forward"></i><span class="op-seek-forward-text">10</span></button></div>'},SettingButtonTemplate:function(e){return'<button class="op-button op-setting-button"><i class="op-con op-setting"></i></button>'},FrameButtonsTemplate:function(e){return'<div class="op-frame-buttons"><button class="op-button op-frame-button" op-data-value="-5"><div class="frame-icon"><span class="btn-text">-5f</span></div></button><button class="op-button op-frame-button" op-data-value="-1"><div class="frame-icon"><span class="btn-text">-1f</span></div></button><button class="op-button op-frame-button" op-data-value="+1"><div class="frame-icon reverse"><span class="btn-text">+1f</span></div></button><button class="op-button op-frame-button" op-data-value="+5"><div class="frame-icon reverse"><span class="btn-text">+5f</span></div></button></div>'},TimeDisplayTemplate:function(e,t){return'<div class="op-navigators op-time-display">'+(t.duration===1/0?'<span class="op-live-badge" disabled="disabled">'+("webrtc"===t.type?t.isP2P?'<span class="op-live-badge-lowlatency">'.concat(e.controls.low_latency_p2p,"</span>"):'<span class="op-live-badge-lowlatency">'.concat(e.controls.low_latency_live,"</span>"):'<span class="op-live-text" title="Skip ahead to live.">'.concat(e.controls.live,"</span>"))+"</span>":'<span class="op-time-current">00:00</span><span class="op-time-separator"> / </span><span class="op-time-duration">00:00</span>')+"</div>"},FullScreenButtonTemplate:function(e){return'<button class="op-button op-fullscreen-button"><i class="op-con op-fullscreen-expand"></i><i class="op-con op-fullscreen-compress"></i></button>'},PanelsTemplate:Ln,SpeedPanelTemplate:Ln,SourcePanelTemplate:Ln,QualityPanelTemplate:Ln,AudioTrackPanelTemplate:Ln,CaptionPanelTemplate:Ln,TimeDisplayPanelTemplate:Ln,PlaylistPanelTemplate:function(e,t){return'<div class="op-playlist" tabindex="0">'+'<div class="op-playlist-header">'.concat(e.playlist,' <i class="op-con op-close-icon btn-close"></i></div>')+'<div class="op-playlist-body"><div class="op-playlist-body-container"><div class="op-playlist-body-center"><div class="op-playlist-body-row"></div></div></div><div class="op-playlist-body-arrows"><i class="op-con op-arrow-left btn-left"></i><i class="op-con op-arrow-right btn-right"></i></div></div></div>'}},Qn=function(e,t,n,r,o,a,A,s){var c,u=i().isElement(e)?ze(e):e,l={},f=null,p={};p.data=r;var d=function(e){var t=document.createElement("div");return t.innerHTML=e,c=ze(t.firstChild),t.firstChild};return n&&n.systemText&&(f=n.systemText.ui),s?u.replace(d(On[t+"Template"](f,r))):u.append(d(On[t+"Template"](f,r))),a&&a(c,p),Object.keys(o).forEach((function(e){var t=e.split(" "),n=t[0].replace(/ /gi,""),r=t[1].replace(/ /gi,""),i="";if(i="document"===r||"window"===r||"body"===r?ze(r):c.find(r)||(c.hasClass(r.replace(".",""))?c:null),!(n&&r&&i))return!1;var a=Object.keys(l).length++,A=function(t){return o[e](t,c,p)};l[a]={name:n,target:r,callback:A};var s=null;n.indexOf("touch")>-1&&(s={passive:!0});var u=i.get().length;if(u>1)for(var f=i.get(),d=0;d<u;d++)f[d].addEventListener(n,A,s);else i.get().addEventListener(n,A,s)})),p.destroy=function(){Object.keys(l).forEach((function(e){var t=l[e],n="",r=(n="document"===t.target||"window"===t.target||"body"===t.target?ze(t.target):c.find(t.target)||(c.hasClass(t.target.replace(".",""))?c:null)).get().length;if(r>1)for(var o=n.get(),i=0;i<r;i++)o[i].removeEventListener(t.name,t.callback);else n.get().removeEventListener(t.name,t.callback);delete l[e]})),c&&(s?(c.removeChild(),c.removeAttribute("class")):c.remove()),A&&A(p)},p},Dn=function(e,t,n,r,o,i,a,A){var s="",c={message:n,description:r,iconClass:i,dontClose:A},u={"click .op-message-text":function(e,t,n){e.stopPropagation(),A||(s&&clearTimeout(s),a&&a(),n.destroy())},"click .op-con":function(e,t,n){e.preventDefault(),A||(s&&clearTimeout(s),a&&a(),n.destroy())}};return Qn(e,"MessageBox",t.getConfig(),c,u,(function(e,t){o&&(s=setTimeout((function(){t.destroy()}),o||5e3))}),(function(){}))},Pn=function(e,t){var n,r,o=!1,a="",A="",s="",c=null,u=t.getConfig().image||t.getConfig().title,l=t.getConfig().waterMark&&t.getConfig().waterMark.image||t.getConfig().waterMark&&t.getConfig().waterMark.text,f=!1;return Qn(e,"Helpers",t.getConfig(),null,{},(function(e,p){var d=!1,g=-1;function h(n){t.getConfig().showBigPlayButton&&(t.getState()!==X&&t.getState()!==q||(A&&A.destroy(),a&&a.destroy(),a=function(e,t,n){var r={"click .op-bigbutton-container":function(e){e.preventDefault(),e.stopPropagation();var n=t.getState(),r=t.getPlaylist(),o=t.getCurrentPlaylist();n===X||n===$?t.play():n===te?t.setCurrentSource(t.getCurrentSource()):n===q&&r.length===o+1&&(t.seek(0),t.play())}};return Qn(e,"BigButton",t.getConfig(),n,r,(function(e,t,n){}),(function(){}))}(e,t,n)))}function v(){var r=t.getMediaElement();r&&(r.poster=""),t.getConfig().image&&(r.poster=t.getConfig().image),n&&n.destroy(),n=function(e,t,n){return Qn(e,"Thumbnail",t.getConfig(),n,{},(function(e,t){}),(function(){}))}(e,t,t.getConfig())}s=function(e,t){var n="";return Object.assign(Qn(e,"Spinner",t.getConfig(),null,{},(function(e,t){n=e}),(function(){})),{show:function(e){e?n.show():n.hide()}})}(e,t),function(e,t,n){ze(t.getContainerElement()),Qn(e,"CaptionViewer",t.getConfig(),n,{},(function(e,n,r){var o=!1,i=0;t.on(Pe,(function(t){t>-1?o=!1:(o=!0,e.find(".op-caption-text").text(""))}),r),t.on(De,(function(t){if(!o&&t&&t.text){var n=t.endTime-t.startTime;i&&clearTimeout(i),e.find(".op-caption-text").html(t.text),n&&(i=setTimeout((function(){e.find(".op-caption-text").text("")}),1e3*n))}}),r)}),(function(n){e.find(".op-caption-text").text(""),t.off(Pe,null,n),t.off(De,null,n)}))}(e,t),t.on(pe,(function(){u&&v(),l&&(r&&r.destroy(),r=function(e,t,n){var r=null,o=null;return Qn(e,"WaterMark",t.getConfig(),n,{},(function(e,n){r=e.find(".op-watermark"),o=e.find(".op-watermark-text");var a=t.getConfig().waterMark,A=a.position||"top-right",s=a.y||"5%",c=a.x||"2.8125%";r.css(A.split("-")[0],s),r.css(A.split("-")[1],c);var u=a.width||"auto",l=a.height||"auto";r.css("width",u),r.css("height",l);var f=a.opacity||.7;r.css("opacity",f),a.text&&a.font&&i().each(a.font,(function(e,t){o.css(t,e)}))}),(function(){}))}(e,t,t.getConfig())),o||(h($),o=!0)}),p),t.on(xe,(function(n){n.message&&(a&&a.destroy(),A&&A.destroy(),c=Dn(e,t,n.message,null,n.timer,n.iconClass,n.onClickCallback,!1),t.once(Re,(function(e){!e.mute&&c&&c.destroy()}),p))}),p),t.on(Ce,(function(e){e&&e.newstate&&(e.newstate===X&&A&&A.destroy(),e.newstate===ee||e.newstate===ie?(f=!1,A&&A.destroy(),a&&a.destroy(),n&&n.destroy(),d||s.show(!1)):e.newstate===q?(s.show(!1),h(e.newstate)):e.newstate===re||e.newstate===ne||"adLoading"===e.newstate?(f=!1,A&&A.destroy(),a&&a.destroy(),s.show(!0)):d||s.show(!1))}),p),t.on(Oe,(function(){u&&v()})),t.on(Qe,(function(e){if(e.currentQuality<0)return!1;e.isAuto?(d=!1,s.show(!1)):"request"===e.type?(g=e.currentQuality,d=!0,s.show(!0)):"render"===e.type&&g===e.currentQuality&&(d=!1,s.show(!1))}),p),t.on(me,(function(n){if(510===n.code&&(f=!0),101===n.code&&0===t.getPlaylist().length&&(f=!0),!f){var r="",o="";a&&a.destroy(),n&&n.code&&n.code>=100&&n.code<1e3?(r=n.message,100===n.code&&(o=n.error.toString())):r="Can not play due to unknown reasons.",OvenPlayerConsole.log("error occured : ",n),function(n,r,o,i,s,c){a&&a.destroy(),A&&A.destroy(),A=Dn(e,t,n,r,null,"op-warning",null,!0)}(r,o)}}),p),t.on(ve,(function(e){var n="Because the network connection is unstable, the following media source will be played.";t.getCurrentSource()+1===t.getQualityLevels().length&&(n="Network connection is unstable. Check the network connection."),OvenPlayerConsole.log(n)}),p),t.on(he,(function(){u&&v()}),p)}),(function(e){t.off(pe,null,e),t.off(Ce,null,e),t.off(xe,null,e),t.off(me,null,e),t.off(ve,null,e),t.off(he,null,e),t.off(ge,null,e)}))},Fn=[],Un=function(){var e={},t=function(){for(var e=0;e<Fn.length;e++)Fn[e].data.setFront(!1);Fn.length&&Fn[Fn.length-1].data.setFront(!0)};return e.clear=function(){i().each(Fn,(function(e){e.destroy()})),Fn=[],t()},e.removeLastItem=function(){Fn.pop().destroy(),t()},e.add=function(e){Fn.push(e),t()},e.size=function(){return Fn.length},e},Nn={speed:"Speed",speedUnit:"x",source:"Source",quality:"Quality",audioTrack:"Audio",caption:"Caption",display:"Display"},Wn=function(e,t,n){var r=ze(t.getContainerElement()),o=Un(),a=t.getConfig();function A(e,t){var n={id:"panel-"+(new Date).getTime(),title:"",body:[],useCheck:!0,panelType:t,height:r.height()-r.find(".op-bottom-panel").height()};if(n.title=Nn[t],"speed"===t)for(var o=e.getConfig().playbackRates,i=e.getPlaybackRate(),a=0;a<o.length;a++){var A={title:o[a]+Nn.speedUnit,isCheck:i===o[a],value:o[a],description:o[a],panelType:t};n.body.push(A)}else if("source"===t)for(var s=e.getSources(),c=0;c<s.length;c++){var u={title:s[c].label,isCheck:e.getCurrentSource()===c,value:c,panelType:t};n.body.push(u)}else if("quality"===t){var l=e.getQualityLevels();n.body.push({title:"AUTO",isCheck:e.isAutoQuality(),value:"AUTO",panelType:t});for(var f=0;f<l.length;f++){var p={title:l[f].label,isCheck:e.getCurrentQuality()===f,value:f,panelType:t};n.body.push(p)}}else if("audioTrack"===t)for(var d=e.getAudioTracks(),g=0;g<d.length;g++){var h={title:d[g].label,isCheck:d[g].index===e.getCurrentAudioTrack(),value:d[g].index,panelType:t};n.body.push(h)}else if("caption"===t){var v=e.getCaptionList();n.body.push({title:"OFF",isCheck:-1===e.getCurrentCaption(),value:-1,panelType:t});for(var m=0;m<v.length;m++){var C={title:v[m].label,isCheck:e.getCurrentCaption()===m,value:m,panelType:t};n.body.push(C)}}else if("display"===t)for(var y=["Play time","Framecode"],b=0;b<y.length;b++){var w={title:y[b],isCheck:e.isTimecodeMode()?"Play time"===y[b]:"Framecode"===y[b],value:y[b],panelType:t};n.body.push(w)}return n}a&&a.systemText&&Object.keys(Nn).forEach((function(e){Nn[e]=a.systemText.ui.setting[e]})),n.setFront=function(e){e?r.find("#"+n.id).removeClass("background"):r.find("#"+n.id).addClass("background")};var s={"click .op-setting-item":function(a,s,c){if(a.preventDefault(),r.find("#"+n.id).hasClass("background"))return!1;var u=ze(a.currentTarget).attr("op-panel-type"),l=null;"speed"===u?l=function(e,t,n){var r=ze(t.getContainerElement()),o=Un();n.setFront=function(e){e?r.find("#"+n.id).removeClass("background"):r.find("#"+n.id).addClass("background")};var i={"click .op-setting-item":function(e,n,r){e.preventDefault();var i=ze(e.currentTarget).attr("op-data-value");t.setPlaybackRate(parseFloat(i)),o.clear()},"click .op-setting-title":function(e,t,n){e.preventDefault(),o.removeLastItem()}};return Qn(e,"SpeedPanel",t.getConfig(),n,i,(function(e,t){}),(function(e){}))}(e,t,A(t,u)):"source"===u?l=function(e,t,n){var r=ze(t.getContainerElement()),o=Un();n.setFront=function(e){e?r.find("#"+n.id).removeClass("background"):r.find("#"+n.id).addClass("background")};var i={"click .op-setting-item":function(e,n,r){e.preventDefault();var i=ze(e.currentTarget).attr("op-data-value");t.setCurrentSource(parseInt(i)),o.clear()},"click .op-setting-title":function(e,t,n){e.preventDefault(),o.removeLastItem()}};return Qn(e,"SourcePanel",t.getConfig(),n,i,(function(e,t){}),(function(e){}))}(e,t,A(t,u)):"quality"===u?l=function(e,t,n){var r=ze(t.getContainerElement()),o=Un();n.setFront=function(e){e?r.find("#"+n.id).removeClass("background"):r.find("#"+n.id).addClass("background")};var a={"click .op-setting-item":function(e,n,r){e.preventDefault();var i=ze(e.currentTarget).attr("op-data-value");"AUTO"===i?t.setAutoQuality(!t.isAutoQuality()):t.setCurrentQuality(parseInt(i)),o.clear()},"click .op-setting-title":function(e,t,n){e.preventDefault(),o.removeLastItem()}};return Qn(e,"QualityPanel",t.getConfig(),n,a,(function(e,n){t.on(Qe,(function(e){var t=e.currentQuality;"render"===e.type&&i().forEach(r.find("#"+n.data.id).find(".op-setting-item").get(),(function(n){var r=ze(n);r.find(".op-setting-item-checked").hasClass("op-show")&&r.find(".op-setting-item-checked").removeClass("op-show"),t===parseInt(r.attr("op-data-value"))&&r.find(".op-setting-item-checked").addClass("op-show"),e.isAuto&&"AUTO"===r.attr("op-data-value")&&r.find(".op-setting-item-checked").addClass("op-show")}))}),n)}),(function(e){t.off(Qe,null,e)}))}(e,t,A(t,u)):"audioTrack"===u?l=function(e,t,n){var r=ze(t.getContainerElement()),o=Un();n.setFront=function(e){e?r.find("#"+n.id).removeClass("background"):r.find("#"+n.id).addClass("background")};var a={"click .op-setting-item":function(e,n,r){e.preventDefault();var i=ze(e.currentTarget).attr("op-data-value");t.setCurrentAudioTrack(parseInt(i)),o.clear()},"click .op-setting-title":function(e,t,n){e.preventDefault(),o.removeLastItem()}};return Qn(e,"AudioTrackPanel",t.getConfig(),n,a,(function(e,n){t.on(Ne,(function(e){i().forEach(r.find("#"+n.data.id).find(".op-setting-item").get(),(function(t){var n=ze(t);n.find(".op-setting-item-checked").hasClass("op-show")&&n.find(".op-setting-item-checked").removeClass("op-show"),e.currentAudioTrack===parseInt(n.attr("op-data-value"))&&n.find(".op-setting-item-checked").addClass("op-show")}))}),n)}),(function(e){t.off(Ne,null,e)}))}(e,t,A(t,u)):"caption"===u?l=function(e,t,n){var r=ze(t.getContainerElement()),o=Un();n.setFront=function(e){e?r.find("#"+n.id).removeClass("background"):r.find("#"+n.id).addClass("background")};var i={"click .op-setting-item":function(e,n,r){e.preventDefault();var i=ze(e.currentTarget).attr("op-data-value");t.setCurrentCaption(parseFloat(i)),o.clear()},"click .op-setting-title":function(e,t,n){e.preventDefault(),o.removeLastItem()}};return Qn(e,"CaptionPanel",t.getConfig(),n,i,(function(e,t){}),(function(e){}))}(e,t,A(t,u)):"display"===u&&(l=function(e,t,n){var r=ze(t.getContainerElement()),o=Un();n.setFront=function(e){e?r.find("#"+n.id).removeClass("background"):r.find("#"+n.id).addClass("background")};var i={"click .op-setting-item":function(e,n,r){e.preventDefault();var i=ze(e.currentTarget).attr("op-data-value");t.setTimecodeMode("Play time"===i),o.clear()},"click .op-setting-title":function(e,t,n){e.preventDefault(),o.removeLastItem()}};return Qn(e,"TimeDisplayPanel",t.getConfig(),n,i,(function(e,t){}),(function(e){}))}(e,t,A(t,u))),o.add(l)},"click .op-setting-title":function(e,t,i){if(e.preventDefault(),r.find("#"+n.id).hasClass("background"))return!1;o.removeLastItem()}};return Qn(e,"Panels",t.getConfig(),n,s,(function(e,n){r.find(".op-setting-panel")&&r.find(".op-setting-panel").css("max-height",r.height()-r.find(".op-bottom-panel").height()+"px"),t.on(Qe,(function(e){var o=e.currentQuality;"render"===e.type&&r.find("#"+n.data.id).find(".op-setting-item")&&i().forEach(r.find("#"+n.data.id).find(".op-setting-item").get()||[],(function(e){var n=ze(e);if("quality"===n.attr("op-panel-type")){var r=t.getQualityLevels()[o];n.find(".op-setting-item-value").text(r.width+"x"+r.height+", "+xn(r.bitrate,!0,"bps"))}}))}),n),t.on(Ne,(function(e){i().forEach(r.find("#"+n.data.id).find(".op-setting-item").get()||[],(function(n){var r=ze(n);"audioTrack"===r.attr("op-panel-type")&&r.find(".op-setting-item-value").text(t.getAudioTracks()[e.currentAudioTrack].label)}))}),n)}),(function(e){t.off(Qe,null,e),t.off(Ne,null,e)}))},jn={speed:"Speed",speedUnit:"x",source:"Source",quality:"Quality",audioTrack:"Audio",caption:"Caption",display:"Display"},Yn=function(e,t){var n,r="",o="",i="",a="",A="",c="",u=!1,l=!1,f=!1,p=t.getConfig().browser,d="Android"===p.os,g="iOS"===p.os,h=ze(t.getContainerElement()),v={};u=t.getPlaylist().length>1,!0===t.getConfig().hidePlaylistIcon&&(u=!1);var m={"mouseleave .op-controls":function(e,t,n){e.preventDefault(),r.setMouseDown(!1),t.find(".op-volume-slider-container").removeClass("active")},"click .op-playlist-button":function(e,n,r){e.preventDefault(),function(e,t){var n=ze(t.getContainerElement()),r="",o=t.getPlaylist(),i=o.length,a=6,A=0,s=[];function c(e){var n,A,c=Math.ceil(i/a),u=t.getCurrentPlaylist();s=o.slice(e*a,e*a+a),r.find(".op-playlist-body-row").removeChild(),r.find(".op-arrow-left").removeClass("disable"),r.find(".op-arrow-right").removeClass("disable");for(var l=0;l<s.length;l++){var f=e*a+l;s[l].index=f,r.find(".op-playlist-body-row").get().append((n=Mn(s[l],u===f),A=void 0,(A=document.createElement("div")).innerHTML=n,A.firstChild))}0===e&&r.find(".op-arrow-left").addClass("disable"),e+1===c&&r.find(".op-arrow-right").addClass("disable")}function u(){var e=t.getCurrentPlaylist();return Math.ceil((e+1)/a)-1}n.width()>576?a=6:n.width()<=576&&(a=1);var l={"click .btn-close":function(e,t,n){e.preventDefault(),n.destroy()},"click .op-arrow-left":function(e,t,n){e.preventDefault(),ze(e.target).hasClass("disable")||c(--A)},"click .op-arrow-right":function(e,t,n){e.preventDefault(),ze(e.target).hasClass("disable")||c(++A)}};Qn(e,"PlaylistPanel",t.getConfig(),o,l,(function(e,n){r=e,c(A=u()),t.on(Ee,(function(e){"xsmall"===e&&6===a?(a=1,c(A=u())):"small"!==e&&"medium"!==e&&"large"!==e||1!==a||(a=6,c(A=u()))}),n),t.on(ge,(function(e){c(A=u())}),n),e.get().addEventListener("click",(function(e){for(var n=e.target;n;){if(ze(n).hasClass("op-playlist-card"))return void t.setCurrentPlaylist(parseInt(ze(n).attr("data-index")));n=n.parentElement}}),!0)}),(function(e){t.off(Ee,null,e),t.off(ge,null,e)}))}(n,t)}};return Qn(e,"Controls",t.getConfig(),u,m,(function(e,u){function p(n,r){a&&a.destroy(),a=function(e,t,n,r){var o=ze(t.getContainerElement());t.getConfig().disableSeekUI&&e.addClass("op-progressbar-container-disabled");var i=0,a=!1,A=Un(),c="",u=0,l="",f="",p="",d="",g="",h="",v=0,m="",C="",y=t.getBrowser().mobile,b=t.getMediaElement(),w=!1,E=!1;function B(e){var t=l.width(),n=t*e;p.css("width",n+"px"),d.css("left",n+"px");var r=(t-v)*e;g.css("left",r+"px"),i=n}function x(e){var t=l.width()*e;d.css("width",(0===e?e:t-i)+"px")}function k(e){var t=l.width(),n=l.offset().left,r=e.pageX;e.touches&&(r=e.pageX||e.touches[0].clientX);var o=(r-n)/t;return o<0?0:o>1?1:o}function I(){return b.seekable.end(b.seekable.length-1)-b.seekable.start(0)}function S(e,n){if(A.size()>0||-1===e)return m.hide(),void C.hide();if(m.show(),C.show(),w&&!E){var r=t.getDvrWindow()*(1-e);t.isTimecodeMode()?m.text("- "+s(r)):m.text("- "+Math.round(r*t.getFramerate()))}else if(w&&E){var o=I()*(1-e);t.isTimecodeMode()?m.text("- "+s(o)):m.text("- "+Math.round(o*t.getFramerate()))}else{var i=t.getDuration()*e;t.isTimecodeMode()?m.text(s(i)):m.text(Math.round(i*t.getFramerate()))}var a=m.width(),u=l.width(),f=u*e,p=n.pageX-l.offset().left;n.touches&&(p=(n.pageX||n.touches[0].clientX)-l.offset().left);var d=function(e){return p<e/2?0:u-p<e/2?u-e:f-e/2},g=d(a);if(m.css("left",g+"px"),t.getSources()[t.getCurrentSource()].gridThumbnail){var h=t.getConfig().gridThumbnail.thumbnailInterval,v=t.getConfig().gridThumbnail.originalThumbnailWidth,y=t.getConfig().gridThumbnail.originalThumbnailHeight,b=t.getConfig().gridThumbnail.columnCount,B=t.getConfig().gridThumbnail.rowCount,x=t.getConfig().gridThumbnail.resizeScale;C.css("width",v*x+"px"),C.css("height",y*x+"px"),C.css("background-size",v*x*b+"px "+y*x*B+"px");var k=Math.floor(second/h),S=Math.floor(k/(b*B)),T=Math.floor(k%(b*B)/b),L=k%(b*B)%b,R=-1*L*v*x,M=-1*T*y*x;OvenPlayerConsole.log("Grid Thumbnail:",k+": "+S+"("+T+", "+L+")");var O=t.getSources()[t.getCurrentSource()].gridThumbnail[S];c!==O&&(C.css("background-image","url("+O+")"),c=O),C.css("background-position","left "+R+"px top "+M+"px");var Q=d(v*x);C.css("left",Q+"px")}else C.hide()}function T(e){var n=(u||0)*e;if(w&&!E){var r=t.getConfig();r.hlsConfig&&("number"==typeof r.hlsConfig.liveSyncDuration&&(t.getMseInstance().config.liveSyncDuration=void 0),"number"==typeof r.hlsConfig.liveMaxLatencyDuration&&(t.getMseInstance().config.liveMaxLatencyDuration=void 0),"number"==typeof r.hlsConfig.maxLiveSyncPlaybackRate&&(t.getMseInstance().config.maxLiveSyncPlaybackRate=1)),n=u-t.getDvrWindow()+t.getDvrWindow()*e}if(w&&E){var o=I();n=u-o+o*e}var i=t.getSources()[t.getCurrentSource()].sectionStart;i&&i>0&&(n+=i),t.seek(n)}r&&r.type===fe&&r.duration===1/0&&(w=!0,t.getProviderName()===ce&&(E=!0));var L={"touchstart .op-progressbar":function(e){if(n)return!1;a=!0;var t=k(e);if(-1===t)return!1;B(t),x(0),T(t)},"touchmove .op-progressbar":function(e){if(a){var t=k(e);if(-1===t)return!1;B(t),x(0),T(t),S(t,e)}},"touchend .op-progressbar":function(e){a&&(a=!1),o.removeClass("op-progressbar-hover"),m.hide(),C.hide()},"mouseenter .op-progressbar":function(e,t,r){e.preventDefault(),y||(n||m.show(),o.addClass("op-progressbar-hover"))},"mouseleave .op-progressbar":function(e,t,n){e.preventDefault(),a=!1,o.removeClass("op-progressbar-hover"),m.hide(),C.hide(),x(0)},"mousedown .op-progressbar":function(e,t,r){if(e.preventDefault(),n||y)return!1;a=!0;var o=k(e);if(-1===o)return!1;B(o),x(0),T(o)},"mousemove .op-progressbar":function(e,t,r){if(e.preventDefault(),!a&&!n&&!y){var o=k(e);x(o),S(o,e)}if(a&&!y){var i=k(e);if(-1===i)return!1;B(i),x(0),T(i),S(i,e)}},"mouseup .op-progressbar":function(e,t,n){e.preventDefault(),a&&!y&&(a=!1,o.removeClass("op-progressbar-hover"))}};return t.getConfig().disableSeekUI&&(L={}),Qn(e,"ProgressBar",t.getConfig(),null,L,(function(e,r){l=e,f=e.find(".op-load-progress"),p=e.find(".op-play-progress"),d=e.find(".op-hover-progress"),g=e.find(".op-progressbar-knob-container"),h=e.find(".op-progressbar-knob"),v=h.width(),m=e.find(".op-progressbar-time"),C=e.find(".op-progressbar-preview"),n?t.on(Ie,(function(e){e&&e.duration&&e.position&&(B(e.position/e.duration),e.duration)}),r):(t.on(Te,(function(e){if(e&&e.duration&&e.position){u=e.duration;var n=e.position/e.duration;if(w&&!E&&(n=(t.getDvrWindow()-(e.duration-e.position))/t.getDvrWindow()),w&&E){var r=I();u=r,n=(r-(r-Math.min(r,e.position)))/r}B(n)}}),r),t.on(Se,(function(e){var t,n;e&&e.bufferPercent&&(t=e.bufferPercent/100,n=l.width()*t,f.css("width",n+"px"))}),r))}),(function(e){n?t.off(Ie,null,e):(t.off(Te,null,e),t.off(Se,null,e))}))}(e.find(".op-progressbar-container"),t,n,r)}function m(){i&&i.destroy(),i=function(e,t){var n=Un(),r={"click .op-setting-button":function(e,r,o){e.preventDefault();var i=r.closest(".op-controls-container");if(n.size()>0)n.clear();else{var a=function(e){var t={id:"panel-"+(new Date).getTime(),title:"Settings",body:[],isRoot:!0,panelType:""},n=e.getConfig();n&&n.systemText&&(Object.keys(jn).forEach((function(e){jn[e]=n.systemText.ui.setting[e]})),t.title=n.systemText.ui.setting.title);var r=e.getSources(),o=r&&r.length>0?r[e.getCurrentSource()]:null,i=e.getQualityLevels(),a=i&&i.length>0?i[e.getCurrentQuality()]:null,A=e.getAudioTracks(),s=A&&A.length>0?A[e.getCurrentAudioTrack()]:null,c=e.getCaptionList(),u=e.getCurrentCaption(),l=e.getFramerate();if(o){var f={title:jn.speed,value:e.getPlaybackRate()+jn.speedUnit,description:e.getPlaybackRate()+jn.speedUnit,panelType:"speed",hasNext:!0};t.body.push(f)}if(r&&r.length>1){var p={title:jn.source,value:o?o.label:"Default",description:o?o.label:"Default",panelType:"source",hasNext:!0};t.body.push(p)}if(i&&i.length>0){var d={title:jn.quality,value:a?a.label:"Default",description:a?a.label:"Default",panelType:"quality",hasNext:!0};t.body.push(d)}if(A&&A.length>0){var g={title:jn.audioTrack,value:s?s.label:"Default",description:s?s.label:"Default",panelType:"audioTrack",hasNext:!0};t.body.push(g)}if(c&&c.length>0){var h={title:jn.caption,value:c[u]?c[u].label:"OFF",description:c[u]?c[u].label:"OFF",panelType:"caption",hasNext:!0};t.body.push(h)}if(l>0){var v={title:jn.display,value:e.isTimecodeMode()?"Play time":"Framecode",description:e.isTimecodeMode()?"Play time":"Framecode",panelType:"display",hasNext:!0};t.body.push(v)}return t}(t);n.add(Wn(i,t,a))}}};return Qn(e,"SettingButton",t.getConfig(),null,r,(function(e,t){}),(function(e){}))}(e.find(".setting-holder"),t)}function C(){c||(c=function(e,t){var n=ze(t.getContainerElement()),r="",o="",i=!1,a=(t.getConfig(),t.getBrowser()),A="iOS"===a.os,s=(a.os,""),c=!1,u={onfullscreenchange:"fullscreenchange",onmozfullscreenchange:"mozfullscreenchange",onwebkitfullscreenchange:"webkitfullscreenchange",MSFullscreenChange:"MSFullscreenChange"};function l(){var e=!1,t=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;return t&&n.get()===t&&(e=!0),e}function f(){OvenPlayerConsole.log("FULLSCREEN STATE : ",l()),l()?(n.addClass("op-fullscreen"),i=!0,r.hide(),o.show()):(n.removeClass("op-fullscreen"),i=!1,r.show(),o.hide())}function p(){OvenPlayerConsole.log("afterFullScreenChangedCallback () "),f(),t.trigger(Be,i)}function d(){i?(n.removeClass("op-fullscreen"),i=!1,r.show(),o.hide()):(n.addClass("op-fullscreen"),i=!0,r.hide(),o.show()),t.trigger(Be,i)}function g(){var e;!i||A&&!l()?function(){var e,r="",o=n.get(),a=n.find("video")?n.find("video").get():o,s=null;if(A){if(a.length>1)for(var u=0;u<a.length;u++){var l=a[u].getAttribute("title");l&&"Advertisement"===l?s=a[u]:e=a[u]}else e=a;s&&t.getState()===oe||t.getState()===ie||t.getState()===ae?s.webkitEnterFullScreen&&(r=s.webkitEnterFullScreen(),i=!0):e.webkitEnterFullScreen&&(r=e.webkitEnterFullScreen(),i=!0)}else if(o.requestFullscreen){var f=t.getConfig().fullscreenOption;r=o.requestFullscreen(f)}else o.webkitRequestFullScreen?r=o.webkitRequestFullScreen():o.mozRequestFullScreen?r=o.mozRequestFullScreen():o.msRequestFullscreen&&(r=o.msRequestFullscreen());r&&r.then((function(){i=!0,c=!1})).catch((function(e){c=!0,d()}))}():c?d():(e="",document.exitFullscreen?e=document.exitFullscreen():document.webkitExitFullscreen?e=document.webkitExitFullscreen():document.webkitExitFullScreen?e=document.webkitExitFullScreen():document.mozCancelFullScreen?e=document.mozCancelFullScreen():document.msExitFullscreen&&(e=document.msExitFullscreen()),e&&e.then((function(){i=!1})).catch((function(e){})))}t.toggleFullScreen=g;var h={"click .op-fullscreen-button":function(e,n,r){e.preventDefault(),t.trigger("fullscreenRequested",null),g()}};return Qn(e,"FullScreenButton",t.getConfig(),null,h,(function(e,a){var c,l;r=e.find(".op-fullscreen-expand"),o=e.find(".op-fullscreen-compress"),f(),c=n.get(),l="",c.requestFullscreen?l=u.onfullscreenchange:c.webkitRequestFullScreen?l=u.onwebkitfullscreenchange:c.mozRequestFullScreen?l=u.onmozfullscreenchange:c.msRequestFullscreen?l=u.MSFullscreenChange:Object.keys(u).forEach((function(e){document[e]&&(l=u[e])})),(s=l)&&document.addEventListener(s,p,!1),t.on(ke,(function(e){var t,r=n.find("video")?n.find("video").get():n.get();if(e.isLinear&&A&&i){if(r.length>1)for(var o=0;o<r.length;o++){var a=r[o].getAttribute("title");a&&"Advertisement"===a?r[o]:t=r[o]}else t=r;t&&t.webkitExitFullscreen&&(t.webkitExitFullscreen(),i=!1)}}),a)}),(function(e){s&&document.removeEventListener(s,p),t.off(ke,null,e)}))}(e.find(".fullscreen-holder"),t))}function y(n){n.duration>9e15&&(n.duration=1/0);var r=t.getSources()[t.getCurrentSource()].sectionStart,o=t.getSources()[t.getCurrentSource()].sectionEnd;o&&(n.duration=o),r&&(n.duration=n.duration-r),function(n){A&&A.destroy(),A=function(e,t,n){var r="",o="",i="",a=t.getMediaElement(),A=!1,c=!1;function u(e){return s(e)}var l={"click .op-live-text":function(e,n,r){e.preventDefault(),t.seek(Number.MAX_SAFE_INTEGER);var o=t.getConfig();if(o.hlsConfig){var i=o.hlsConfig;"number"==typeof i.liveSyncDuration&&(t.getMseInstance().config.liveSyncDuration=i.liveSyncDuration),"number"==typeof i.liveMaxLatencyDuration&&(t.getMseInstance().config.liveMaxLatencyDuration=i.liveMaxLatencyDuration),"number"==typeof i.maxLiveSyncPlaybackRate&&(t.getMseInstance().config.maxLiveSyncPlaybackRate=i.maxLiveSyncPlaybackRate)}}};return Qn(e,"TimeDisplay",t.getConfig(),n,l,(function(e,s){var l=t.isTimecodeMode();r=e.find(".op-time-current"),o=e.find(".op-time-duration"),i=e.find(".op-live-badge"),e.find(".op-live-text"),n&&n.type===fe&&n.duration===1/0&&(A=!0,t.getProviderName()===ce&&(c=!0)),n.duration!==1/0?(l?o.text(u(n.duration)):o.text(Math.round(n.duration*t.getFramerate())+" ("+t.getFramerate()+"fps)"),t.on(Fe,(function(e){(l=e)?o.text(u(n.duration)):o.text(Math.round(n.duration*t.getFramerate())+" ("+t.getFramerate()+"fps)")}),s),t.on(Te,(function(e){l?r.text(u(e.position)):r.text(Math.round(e.position*t.getFramerate()))}),s)):A&&!c?t.on(Te,(function(e){e.duration-e.position>3?i.addClass("op-live-badge-delayed"):i.removeClass("op-live-badge-delayed")}),s):A&&c&&t.on(Te,(function(e){a.seekable.end(a.seekable.length-1)-a.seekable.start(0)-e.position>3?i.addClass("op-live-badge-delayed"):i.removeClass("op-live-badge-delayed")}),s)}),(function(e){t.off(Fe,null,e),t.off(Te,null,e)}))}(e.find(".op-left-controls"),t,n)}(n),C(),t.getFramerate&&t.getFramerate(),n.duration===1/0?(OvenPlayerConsole.log("[[[[LIVE MODE]]]]"),n.type===fe?p(!1,n):a&&a.destroy()):p(!1),l=!0}function b(){A&&A.destroy(),a&&a.destroy(),m(),C(),h.removeClass("linear-ad")}o=function(e,t){var n="",r="",o="",i="",a="",A="",s="",c={"click .op-play-button":function(e,n,r){e.preventDefault();var o=t.getState(),i=t.getPlaylist(),a=t.getCurrentPlaylist();o===X?t.play():o===ee||o===ie?t.pause():o===ne||o===re?t.stop():o===$||o===ae?t.play():o===te?t.setCurrentSource(t.getCurrentSource()):o===q&&i.length===a+1&&(t.seek(0),t.play())},"click .op-seek-button-back":function(e,n,r){var o=t.getConfig().seekControlInterval;o||(o=10);var i=t.getPosition()-o;i<0&&(i=0),t.seek(i)},"click .op-seek-button-forward":function(e,n,r){var o=t.getConfig().seekControlInterval;o||(o=10);var i=t.getPosition()+o;i>t.getDuration()&&(i=t.getDuration()),t.seek(i)}};return Qn(e,"PlayButton",t.getConfig(),null,c,(function(e,c){n=e.find(".op-play-button .op-play"),r=e.find(".op-play-button .op-pause"),o=e.find(".op-play-button .op-replay"),i=e.find(".op-seek-button-back"),a=e.find(".op-seek-button-forward"),A=e.find(".op-seek-back-text"),s=e.find(".op-seek-forward-text"),t.on(Ce,(function(e){var t;e&&e.newstate&&(t=e.newstate,n.hide(),r.hide(),o.hide(),t===ee||t===ie||t===ne||t===re?r.show():t===$||t===ae?n.show():t===q?o.show():n.show())}),c),t.getConfig().showSeekControl||(i.hide(),a.hide());var u=t.getConfig().seekControlInterval;u?(A.text(u),s.text(u)):(A.text(10),s.text(10))}),(function(e){t.off(Ce,null,e)}))}(e.find(".op-left-controls"),t),r=function(e,t){var n="",r="",o="",i="",a="",A="",s="",c=!1,u=0,l="iOS"===t.getBrowser().os||"Android"===t.getBrowser().os;function f(e){t.getMute()&&(e=0),function(e){a.hide(),A.hide(),s.hide(),e>=70?a.show():e<70&&e>0?A.show():0==e?s.show():a.show()}(e);var n=u*e/100;o.css("left",n+"px"),i.css("width",n+"px")}function p(e){var t=((e.pageX||e.touches[0].clientX)-r.offset().left)/70*100;return t<0&&(t=0),t>100&&(t=100),t}var d={"click .op-volume-button":function(e,n,r){e.preventDefault(),l||(0===t.getVolume()?(t.setMute(!1),t.setVolume(100)):t.setMute())},"mouseenter .op-volume-button":function(e,t,r){e.preventDefault(),l||n.addClass("active")},"mouseleave .op-volume-silder":function(e,t,n){e.preventDefault(),c=!1},"mousedown .op-volume-silder":function(e,n,r){e.preventDefault(),c=!0,t.setMute(!1),t.setVolume(p(e))},"mouseup .op-volume-silder":function(e,t,n){e.preventDefault(),c=!1},"mousemove .op-volume-silder":function(e,n,r){if(e.preventDefault(),!c)return!1;t.setVolume(p(e))},"touchstart .op-volume-button":function(e){l&&(t.getMute()?t.setMute(!1):t.setMute(!0))}},g=Qn(e,"VolumeButton",t.getConfig(),null,d,(function(e,c){n=e.find(".op-volume-slider-container"),t.getBrowser().mobile&&n.hide(),r=e.find(".op-volume-silder"),o=e.find(".op-volume-slider-handle"),i=e.find(".op-volume-slider-value"),a=e.find(".op-volume-max"),A=e.find(".op-volume-small"),s=e.find(".op-volume-mute"),u=64,o.css("left",u+"px"),f(t.getVolume()),t.on(pe,(function(){f(t.getVolume())}),c),t.on(Le,(function(e){f(e.volume)}),c),t.on(Re,(function(e){e.mute?f(0):f(t.getVolume())}),c)}),(function(e){t.off(pe,null,e),t.off(Le,null,e),t.off(Re,null,e)}));return g.setMouseDown=function(e){c=e},g}(e.find(".op-left-controls"),t);var w=t.getPlaylist(),E=t.getCurrentPlaylist();w&&w[E]&&w[E].adTagUrl||m(),C(),t.on(pe,(function(){e.show()}),u),t.on(Me,(function(e){n=e.duration,v=e,e.isP2P=f,y(e)}),u),t.on(Te,(function(e){(d||t&&t.getProviderName&&"rtmp"===t.getProviderName())&&!n&&v&&v.duration!==e.duration&&(v=e,y(e))}),u),t.on(Ee,(function(e){h.find(".op-setting-panel")&&h.find(".op-setting-panel").css("max-height",h.height()-h.find(".op-bottom-panel").height()+"px")}),u),t.on(Ue,(function(e){f=e}),u),t.on(be,(function(){if(!l){var n="";t.getSources().length>0&&t.getSources()[t.getCurrentSource()]&&t.getSources()[t.getCurrentSource()].type&&(n=t.getSources()[t.getCurrentSource()].type),y({isP2P:f,duration:t.getDuration(),type:n})}e.show()}),u),t.on(me,(function(t){e.show()}),u),t.on(ke,(function(e){e.isLinear?(h.addClass("linear-ad"),p(!0),A&&A.destroy(),i&&i.destroy(),g&&c&&c.destroy()):h.removeClass("linear-ad")}),u),t.on(Ae,(function(){b()}),u),t.on(se,(function(){b()}),u),t.on(Oe,(function(){b()}),u)}),(function(e){t.off(Me,null,e),t.off(Te,null,e),t.off(Ae,null,e),t.off(ke,null,e),t.off(Ue,null,e),t.off(se,null,e),t.off(Ee,null,e),t.off(Oe,null,e),A&&A.destroy(),o&&o.destroy(),a&&a.destroy(),c&&c.destroy(),r&&r.destroy()}))},Gn=n(5655),zn=n.n(Gn),_n=n(3379),Vn=n.n(_n),Hn=n(7795),Jn=n.n(Hn),Zn=n(569),Kn=n.n(Zn),Xn=n(3565),qn=n.n(Xn),$n=n(9216),er=n.n($n),tr=n(4589),nr=n.n(tr),rr=n(2021),or={};or.styleTagTransform=nr(),or.setAttributes=qn(),or.insert=Kn().bind(null,"head"),or.domAPI=Jn(),or.insertStyleElement=er(),Vn()(rr.Z,or),rr.Z&&rr.Z.locals&&rr.Z.locals;var ir,ar=function(e){var t,n="",r="",o="",i="",a=null,A="",s=X,c=!1,u=Un(),l="",f="",p=null,d={};function g(e,n){if(A&&(clearTimeout(A),A=null),e){if(u.size()>0)return!1;t.addClass("op-autohide")}else t.removeClass("op-autohide"),n&&(A=setTimeout((function(){if(u.size()>0)return!1;t.addClass("op-autohide")}),3e3))}function h(){var e=s;e===X||e===$||e===q?(e===q&&a.seek(0),a.play()):e===ee&&a.pause()}function v(e,t){var n,r=a.getDuration(),o=a.getPosition();n=t?Math.max(o-e,0):Math.min(o+e,r),a.seek(n)}function m(e){var t,n=a.getVolume();t=e?Math.min(n+5,100):Math.max(n-5,0),a.setVolume(t)}function C(){var e=t.width();e<576?(l="xsmall",t.addClass("xsmall"),e<490&&t.addClass("xxsmall")):e<768?(l="small",t.addClass("small")):e<992?(l="medium",t.addClass("medium")):(l="large",t.addClass("large"))}var y={"click .ovenplayer":function(e,t,n){if(a&&a.trigger(we,e),i)return e.preventDefault(),i.destroy(),i=null,!1;if(!ze(e.target).closest(".op-controls-container")&&!ze(e.target).closest(".op-setting-panel")){if(u.size()>0)return e.preventDefault(),u.clear(),!1;a.getDuration()===1/0||a.getBrowser().mobile||h()}},"dblclick .ovenplayer":function(e,t,n){a&&a.getConfig().expandFullScreenUI&&a.toggleFullScreen&&(ze(e.target).closest(".op-controls-container")||ze(e.target).closest(".op-setting-panel")||a.toggleFullScreen())},"touchstart .ovenplayer":function(e,t,n){s===ee||s===X||s===ne||s===ie&&"xsmall"===l?g(!1,!0):g(!1)},"mouseenter .ovenplayer":function(e,t,n){e.preventDefault(),s===ee||s===X||s===ne||s===ie&&"xsmall"===l?g(!1,!0):g(!1)},"mousemove .ovenplayer":function(e,t,n){e.preventDefault(),s===ee||s===X||s===ne||s===ie&&"xsmall"===l?g(!1,!0):g(!1)},"mouseleave .ovenplayer":function(e,t,n){e.preventDefault(),(s===ee||s===X||s===ne||s===ie&&"xsmall"===l)&&g(!0)},"keydown .ovenplayer":function(e,t,n){var r=a.getFramerate();switch(e.keyCode){case 16:e.preventDefault(),c=!0;break;case 32:e.preventDefault(),h();break;case 37:e.preventDefault(),a.getConfig().disableSeekUI||(c&&r?a.seekFrame(-1):v(5,!0));break;case 39:e.preventDefault(),a.getConfig().disableSeekUI||(c&&r?a.seekFrame(1):v(5,!1));break;case 38:e.preventDefault(),m(!0);break;case 40:e.preventDefault(),m(!1)}},"keyup .ovenplayer":function(e,t,n){16===e.keyCode&&(e.preventDefault(),c=!1)},"contextmenu .ovenplayer":function(e,n,r){if(e.stopPropagation(),!ze(e.currentTarget).find("object"))return e.preventDefault(),o=e.pageX,A=e.pageY,i&&(i.destroy(),i=null),i=function(e,t,n){var r=ze(t.getContainerElement()),o={"click .op-context-item":function(e,t,n){e.preventDefault(),window.open("https://github.com/AirenSoft/OvenPlayer","_blank")}};return Qn(e,"ContextPanel",t.getConfig(),n,o,(function(e,t){var o=e.width(),i=e.height(),a=Math.min(n.pageX-r.offset().left,r.width()-o),A=Math.min(n.pageY-r.offset().top,r.height()-i);e.css("left",a+"px"),e.css("top",A+"px")}),(function(){}))}(t,a,{pageX:o,pageY:A}),!1;var o,A}};return(d=Qn(e,"View",null,e.id,y,(function(e,r){t=e,n=r,C(),f=l,p=new(zn())(t.get(),(function(){t.removeClass("large"),t.removeClass("medium"),t.removeClass("small"),t.removeClass("xsmall"),t.removeClass("xxsmall"),C(),l!==f&&(f=l,a&&a.trigger(Ee,f))}))}),(function(){p&&(p.detach(),p=null),o&&(o.destroy(),o=null),r&&(r.destroy(),r=null)}),!0)).getMediaElementContainer=function(){return t.find(".op-media-element-container").get()},d.setApi=function(e){(a=e).getContainerElement=function(){return t.get()},a.getContainerId=function(){return t.get().id},a.on(pe,(function(n){r||(r=Yn(t.find(".op-ui"),e)),i||t.addClass("op-no-controls")})),a.on(me,(function(e){if(a){var t=a.getSources()||[];r&&t.length}})),a.on(de,(function(e){n.destroy()})),a.on(be,(function(n){!r&&i&&(r=Yn(t.find(".op-ui"),e))})),a.on(Ce,(function(e){e&&e.newstate&&(s=e.newstate,e.newstate===ee||e.newstate===ie&&"xsmall"===l?g(!1,!0):g(!1))}));var i=a.getConfig()&&a.getConfig().controls;o=Pn(t.find(".op-ui"),e),r=Yn(t.find(".op-ui"),e);var A=a.getConfig().aspectRatio;if(A&&2===A.split(":").length){var c=1*A.split(":")[0],u=1*A.split(":")[1]/c*100;t.find(".op-ratio").css("padding-bottom",u+"%")}a.showControls=function(e){e?(t.removeClass("op-no-controls"),g(!1,!0)):t.addClass("op-no-controls")}},d},Ar=(ir={},Object.assign(ir,Tn),ir.create=function(e,t){var n=Ze(e),r=ar(n),o=Tn.create(r.getMediaElementContainer(),t);return r.setApi(o),OvenPlayerConsole.log("[OvenPlayer] v.0.10.31"),o},ir)},1001:function(){!function(e){"use strict";if("window"in e&&"document"in e){document.querySelectorAll||(document.querySelectorAll=function(e){var t,n=document.createElement("style"),r=[];for(document.documentElement.firstChild.appendChild(n),document._qsa=[],n.styleSheet.cssText=e+"{x-qsa:expression(document._qsa && document._qsa.push(this))}",window.scrollBy(0,0),n.parentNode.removeChild(n);document._qsa.length;)(t=document._qsa.shift()).style.removeAttribute("x-qsa"),r.push(t);return document._qsa=null,r}),document.querySelector||(document.querySelector=function(e){var t=document.querySelectorAll(e);return t.length?t[0]:null}),document.getElementsByClassName||(document.getElementsByClassName=function(e){return e=String(e).replace(/^|\s+/g,"."),document.querySelectorAll(e)}),e.Node=e.Node||function(){throw TypeError("Illegal constructor")},[["ELEMENT_NODE",1],["ATTRIBUTE_NODE",2],["TEXT_NODE",3],["CDATA_SECTION_NODE",4],["ENTITY_REFERENCE_NODE",5],["ENTITY_NODE",6],["PROCESSING_INSTRUCTION_NODE",7],["COMMENT_NODE",8],["DOCUMENT_NODE",9],["DOCUMENT_TYPE_NODE",10],["DOCUMENT_FRAGMENT_NODE",11],["NOTATION_NODE",12]].forEach((function(t){t[0]in e.Node||(e.Node[t[0]]=t[1])})),e.DOMException=e.DOMException||function(){throw TypeError("Illegal constructor")},[["INDEX_SIZE_ERR",1],["DOMSTRING_SIZE_ERR",2],["HIERARCHY_REQUEST_ERR",3],["WRONG_DOCUMENT_ERR",4],["INVALID_CHARACTER_ERR",5],["NO_DATA_ALLOWED_ERR",6],["NO_MODIFICATION_ALLOWED_ERR",7],["NOT_FOUND_ERR",8],["NOT_SUPPORTED_ERR",9],["INUSE_ATTRIBUTE_ERR",10],["INVALID_STATE_ERR",11],["SYNTAX_ERR",12],["INVALID_MODIFICATION_ERR",13],["NAMESPACE_ERR",14],["INVALID_ACCESS_ERR",15]].forEach((function(t){t[0]in e.DOMException||(e.DOMException[t[0]]=t[1])})),function(){function t(e,t,n){if("function"==typeof t){"DOMContentLoaded"===e&&(e="load");var r=this,o=function(e){e._timeStamp=Date.now(),e._currentTarget=r,t.call(this,e),e._currentTarget=null};this["_"+e+t]=o,this.attachEvent("on"+e,o)}}function n(e,t,n){if("function"==typeof t){"DOMContentLoaded"===e&&(e="load");var r=this["_"+e+t];r&&(this.detachEvent("on"+e,r),this["_"+e+t]=null)}}"Element"in e&&!Element.prototype.addEventListener&&Object.defineProperty&&(Event.CAPTURING_PHASE=1,Event.AT_TARGET=2,Event.BUBBLING_PHASE=3,Object.defineProperties(Event.prototype,{CAPTURING_PHASE:{get:function(){return 1}},AT_TARGET:{get:function(){return 2}},BUBBLING_PHASE:{get:function(){return 3}},target:{get:function(){return this.srcElement}},currentTarget:{get:function(){return this._currentTarget}},eventPhase:{get:function(){return this.srcElement===this.currentTarget?Event.AT_TARGET:Event.BUBBLING_PHASE}},bubbles:{get:function(){switch(this.type){case"click":case"dblclick":case"mousedown":case"mouseup":case"mouseover":case"mousemove":case"mouseout":case"mousewheel":case"keydown":case"keypress":case"keyup":case"resize":case"scroll":case"select":case"change":case"submit":case"reset":return!0}return!1}},cancelable:{get:function(){switch(this.type){case"click":case"dblclick":case"mousedown":case"mouseup":case"mouseover":case"mouseout":case"mousewheel":case"keydown":case"keypress":case"keyup":case"submit":return!0}return!1}},timeStamp:{get:function(){return this._timeStamp}},stopPropagation:{value:function(){this.cancelBubble=!0}},preventDefault:{value:function(){this.returnValue=!1}},defaultPrevented:{get:function(){return!1===this.returnValue}}}),[Window,HTMLDocument,Element].forEach((function(e){e.prototype.addEventListener=t,e.prototype.removeEventListener=n})))}(),function(){function t(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}"CustomEvent"in e&&"function"==typeof e.CustomEvent||(t.prototype=e.Event.prototype,e.CustomEvent=t)}(),window.addEvent=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&(e["e"+t+n]=n,e[t+n]=function(){var r=window.event;r.currentTarget=e,r.preventDefault=function(){r.returnValue=!1},r.stopPropagation=function(){r.cancelBubble=!0},r.target=r.srcElement,r.timeStamp=Date.now(),e["e"+t+n].call(this,r)},e.attachEvent("on"+t,e[t+n]))},window.removeEvent=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&(e.detachEvent("on"+t,e[t+n]),e[t+n]=null,e["e"+t+n]=null)},function(){function t(e,t){function n(e){return e.length?e.split(/\s+/g):[]}function r(e,t){var r=n(t),o=r.indexOf(e);return-1!==o&&r.splice(o,1),r.join(" ")}if(Object.defineProperties(this,{length:{get:function(){return n(e[t]).length}},item:{value:function(r){var o=n(e[t]);return 0<=r&&r<o.length?o[r]:null}},contains:{value:function(r){if(0===(r=String(r)).length)throw SyntaxError();if(/\s/.test(r))throw Error("InvalidCharacterError");return-1!==n(e[t]).indexOf(r)}},add:{value:function(){var r=Array.prototype.slice.call(arguments).map(String);if(r.some((function(e){return 0===e.length})))throw SyntaxError();if(r.some((function(e){return/\s/.test(e)})))throw Error("InvalidCharacterError");try{var o=e[t],i=n(o);if(0===(r=r.filter((function(e){return-1===i.indexOf(e)}))).length)return;0===o.length||/\s$/.test(o)||(o+=" "),o+=r.join(" "),e[t]=o}finally{var a=n(e[t]).length;this.length!==a&&(this.length=a)}}},remove:{value:function(){var o=Array.prototype.slice.call(arguments).map(String);if(o.some((function(e){return 0===e.length})))throw SyntaxError();if(o.some((function(e){return/\s/.test(e)})))throw Error("InvalidCharacterError");try{var i=e[t];o.forEach((function(e){i=r(e,i)})),e[t]=i}finally{var a=n(e[t]).length;this.length!==a&&(this.length=a)}}},toggle:{value:function(o){var i=arguments[1];try{if(0===(o=String(o)).length)throw SyntaxError();if(/\s/.test(o))throw Error("InvalidCharacterError");var a=n(e[t]),A=a.indexOf(o);if(-1!==A&&(!i||void 0===i))return e[t]=r(o,e[t]),!1;if(-1!==A&&i)return!0;var s=e[t];return 0===s.length||/\s$/.test(s)||(s+=" "),s+=o,e[t]=s,!0}finally{var c=n(e[t]).length;this.length!==c&&(this.length=c)}}},toString:{value:function(){return e[t]}}}),"length"in this)for(var o=0;o<100;++o)Object.defineProperty(this,String(o),{get:function(e){return function(){return this.item(e)}}(o)});else this.length=n(e[t]).length}function n(t,n){"Element"in e&&Element.prototype&&Object.defineProperty&&Object.defineProperty(Element.prototype,t,{get:n})}"classList"in document.createElement("span")?window.getClassList=function(e){return e.classList}:(window.getClassList=function(e){return new t(e,"className")},n("classList",(function(){return new t(this,"className")}))),"relList"in document.createElement("link")?window.getRelList=function(e){return e.relList}:(window.getRelList=function(e){return new t(e,"rel")},n("relList",(function(){return new t(this,"rel")}))),function(){if("DOMTokenList"in e){var t=document.createElement("span");"classList"in t&&(t.classList.toggle("x",!1),t.classList.contains("x")&&(e.DOMTokenList.prototype.toggle=function(e){var t=arguments[1];if(void 0===t){var n=!this.contains(e);return this[n?"add":"remove"](e),n}return this[(t=!!t)?"add":"remove"](e),t}))}}(),"previousElementSibling"in document.documentElement||n("previousElementSibling",(function(){for(var e=this.previousSibling;e&&e.nodeType!==Node.ELEMENT_NODE;)e=e.previousSibling;return e})),"nextElementSibling"in document.documentElement||n("nextElementSibling",(function(){for(var e=this.nextSibling;e&&e.nodeType!==Node.ELEMENT_NODE;)e=e.nextSibling;return e}))}(),"Element"in e&&!Element.prototype.matches&&(Element.prototype.msMatchesSelector?Element.prototype.matches=Element.prototype.msMatchesSelector:Element.prototype.oMatchesSelector?Element.prototype.matches=Element.prototype.oMatchesSelector:Element.prototype.mozMatchesSelector?Element.prototype.matches=Element.prototype.mozMatchesSelector:Element.prototype.webkitMatchesSelector?Element.prototype.matches=Element.prototype.webkitMatchesSelector:document.querySelectorAll&&(Element.prototype.matches=function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t.item(n)!==this;);return n>-1})),window.Element&&!Element.prototype.closest&&(Element.prototype.closest=function(e){var t,n=(this.document||this.ownerDocument).querySelectorAll(e),r=this;do{for(t=n.length;--t>=0&&n.item(t)!==r;);}while(t<0&&(r=r.parentElement));return r});var t={prepend:function(){var e=[].slice.call(arguments);e=o(e),this.insertBefore(e,this.firstChild)},append:function(){var e=[].slice.call(arguments);e=o(e),this.appendChild(e)}};r(e.Document||e.HTMLDocument,t),r(e.DocumentFragment,t),r(e.Element,t);var n={before:function(){var e=[].slice.call(arguments),t=this.parentNode;if(t){for(var n=this.previousSibling;-1!==e.indexOf(n);)n=n.previousSibling;var r=o(e);t.insertBefore(r,n?n.nextSibling:t.firstChild)}},after:function(){var e=[].slice.call(arguments),t=this.parentNode;if(t){for(var n=this.nextSibling;-1!==e.indexOf(n);)n=n.nextSibling;var r=o(e);t.insertBefore(r,n)}},replaceWith:function(){var e=[].slice.call(arguments),t=this.parentNode;if(t){for(var n=this.nextSibling;-1!==e.indexOf(n);)n=n.nextSibling;var r=o(e);this.parentNode===t?t.replaceChild(r,this):t.insertBefore(r,n)}},remove:function(){this.parentNode&&this.parentNode.removeChild(this)}};r(e.DocumentType,n),r(e.Element,n),r(e.CharacterData,n)}function r(e,t){e&&Object.keys(t).forEach((function(n){if(!(n in e)&&!(n in e.prototype))try{Object.defineProperty(e.prototype,n,Object.getOwnPropertyDescriptor(t,n))}catch(r){e[n]=t[n]}}))}function o(e){var t=null;return e=e.map((function(e){return e instanceof Node?e:document.createTextNode(e)})),1===e.length?t=e[0]:(t=document.createDocumentFragment(),e.forEach((function(e){t.appendChild(e)}))),t}}(self)},5655:function(e,t){var n,r;r=this,void 0===(n=function(){return r.returnExportsGlobal=function(){"use strict";var e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,20)};function t(){var e,t;this.q=[],this.add=function(e){this.q.push(e)},this.call=function(){for(e=0,t=this.q.length;e<t;e++)this.q[e].call()}}function n(n,r){if(n.resizedAttached){if(n.resizedAttached)return void n.resizedAttached.add(r)}else n.resizedAttached=new t,n.resizedAttached.add(r);n.resizeSensor=document.createElement("div"),n.resizeSensor.className="resize-sensor";var o="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden; opacity: 0;direction: ltr;",i="position: absolute; left: 0; top: 0; transition: 0s;";n.resizeSensor.style.cssText=o,n.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="'+o+'"><div style="'+i+'"></div></div><div class="resize-sensor-shrink" style="'+o+'"><div style="'+i+' width: 200%; height: 200%"></div></div>',n.appendChild(n.resizeSensor),"static"==function(e,t){return e.currentStyle?e.currentStyle[t]:window.getComputedStyle?window.getComputedStyle(e,null).getPropertyValue(t):e.style[t]}(n,"position")&&(n.style.position="relative");var a=n.resizeSensor.childNodes[0],A=a.childNodes[0],s=n.resizeSensor.childNodes[1],c=function(){A.style.width="100000px",A.style.height="100000px",a.scrollLeft=1e5,a.scrollTop=1e5,s.scrollLeft=1e5,s.scrollTop=1e5};c();var u,l,f,p,d=!1;e((function t(){n.resizedAttached&&(d&&(n.resizedAttached.call(),d=!1),e(t))}));var g=function(){(f=n.offsetWidth)==u&&(p=n.offsetHeight)==l||(d=!0,u=f,l=p),c()},h=function(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n)};h(a,"scroll",g),h(s,"scroll",g)}var r=function(e,t){var r=Object.prototype.toString.call(e),o=this._isCollectionTyped="[object Array]"===r||"[object NodeList]"===r||"[object HTMLCollection]"===r||"undefined"!=typeof jQuery&&e instanceof window.jQuery||"undefined"!=typeof Elements&&e instanceof window.Elements;if(this._element=e,o)for(var i=0,a=e.length;i<a;i++)n(e[i],t);else n(e,t)};return r.prototype.detach=function(){var e=this._isCollectionTyped,t=this._element;if(e)for(var n=0,o=t.length;n<o;n++)r.detach(t[n]);else r.detach(t)},r.detach=function(e){e.resizeSensor&&(e.hasChildNodes()&&e.removeChild(e.resizeSensor),delete e.resizeSensor,delete e.resizedAttached)},r}()}.apply(t,[]))||(e.exports=n)},741:function(e,t,n){var r,o,i;function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}i=function(){var e="1.13.1",t="object"==("undefined"==typeof self?"undefined":a(self))&&self.self===self&&self||"object"==(void 0===n.g?"undefined":a(n.g))&&n.g.global===n.g&&n.g||Function("return this")()||{},r=Array.prototype,o=Object.prototype,i="undefined"!=typeof Symbol?Symbol.prototype:null,A=r.push,s=r.slice,c=o.toString,u=o.hasOwnProperty,l="undefined"!=typeof ArrayBuffer,f="undefined"!=typeof DataView,p=Array.isArray,d=Object.keys,g=Object.create,h=l&&ArrayBuffer.isView,v=isNaN,m=isFinite,C=!{toString:null}.propertyIsEnumerable("toString"),y=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],b=Math.pow(2,53)-1;function w(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),r=Array(n),o=0;o<n;o++)r[o]=arguments[o+t];switch(t){case 0:return e.call(this,r);case 1:return e.call(this,arguments[0],r);case 2:return e.call(this,arguments[0],arguments[1],r)}var i=Array(t+1);for(o=0;o<t;o++)i[o]=arguments[o];return i[t]=r,e.apply(this,i)}}function E(e){var t=a(e);return"function"===t||"object"===t&&!!e}function B(e){return void 0===e}function x(e){return!0===e||!1===e||"[object Boolean]"===c.call(e)}function k(e){var t="[object "+e+"]";return function(e){return c.call(e)===t}}var I=k("String"),S=k("Number"),T=k("Date"),L=k("RegExp"),R=k("Error"),M=k("Symbol"),O=k("ArrayBuffer"),Q=k("Function"),D=t.document&&t.document.childNodes;"object"!=("undefined"==typeof Int8Array?"undefined":a(Int8Array))&&"function"!=typeof D&&(Q=function(e){return"function"==typeof e||!1});var P=Q,F=k("Object"),U=f&&F(new DataView(new ArrayBuffer(8))),N="undefined"!=typeof Map&&F(new Map),W=k("DataView"),j=U?function(e){return null!=e&&P(e.getInt8)&&O(e.buffer)}:W,Y=p||k("Array");function G(e,t){return null!=e&&u.call(e,t)}var z=k("Arguments");!function(){z(arguments)||(z=function(e){return G(e,"callee")})}();var _=z;function V(e){return S(e)&&v(e)}function H(e){return function(){return e}}function J(e){return function(t){var n=e(t);return"number"==typeof n&&n>=0&&n<=b}}function Z(e){return function(t){return null==t?void 0:t[e]}}var K=Z("byteLength"),X=J(K),q=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/,$=l?function(e){return h?h(e)&&!j(e):X(e)&&q.test(c.call(e))}:H(!1),ee=Z("length");function te(e,t){t=function(e){for(var t={},n=e.length,r=0;r<n;++r)t[e[r]]=!0;return{contains:function(e){return t[e]},push:function(n){return t[n]=!0,e.push(n)}}}(t);var n=y.length,r=e.constructor,i=P(r)&&r.prototype||o,a="constructor";for(G(e,a)&&!t.contains(a)&&t.push(a);n--;)(a=y[n])in e&&e[a]!==i[a]&&!t.contains(a)&&t.push(a)}function ne(e){if(!E(e))return[];if(d)return d(e);var t=[];for(var n in e)G(e,n)&&t.push(n);return C&&te(e,t),t}function re(e,t){var n=ne(t),r=n.length;if(null==e)return!r;for(var o=Object(e),i=0;i<r;i++){var a=n[i];if(t[a]!==o[a]||!(a in o))return!1}return!0}function oe(e){return e instanceof oe?e:this instanceof oe?void(this._wrapped=e):new oe(e)}function ie(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,K(e))}oe.VERSION=e,oe.prototype.value=function(){return this._wrapped},oe.prototype.valueOf=oe.prototype.toJSON=oe.prototype.value,oe.prototype.toString=function(){return String(this._wrapped)};var ae="[object DataView]";function Ae(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var o=a(e);return("function"===o||"object"===o||"object"==a(t))&&function e(t,n,r,o){t instanceof oe&&(t=t._wrapped),n instanceof oe&&(n=n._wrapped);var A=c.call(t);if(A!==c.call(n))return!1;if(U&&"[object Object]"==A&&j(t)){if(!j(n))return!1;A=ae}switch(A){case"[object RegExp]":case"[object String]":return""+t==""+n;case"[object Number]":return+t!=+t?+n!=+n:0==+t?1/+t==1/n:+t==+n;case"[object Date]":case"[object Boolean]":return+t==+n;case"[object Symbol]":return i.valueOf.call(t)===i.valueOf.call(n);case"[object ArrayBuffer]":case ae:return e(ie(t),ie(n),r,o)}var s="[object Array]"===A;if(!s&&$(t)){if(K(t)!==K(n))return!1;if(t.buffer===n.buffer&&t.byteOffset===n.byteOffset)return!0;s=!0}if(!s){if("object"!=a(t)||"object"!=a(n))return!1;var u=t.constructor,l=n.constructor;if(u!==l&&!(P(u)&&u instanceof u&&P(l)&&l instanceof l)&&"constructor"in t&&"constructor"in n)return!1}o=o||[];for(var f=(r=r||[]).length;f--;)if(r[f]===t)return o[f]===n;if(r.push(t),o.push(n),s){if((f=t.length)!==n.length)return!1;for(;f--;)if(!Ae(t[f],n[f],r,o))return!1}else{var p,d=ne(t);if(f=d.length,ne(n).length!==f)return!1;for(;f--;)if(!G(n,p=d[f])||!Ae(t[p],n[p],r,o))return!1}return r.pop(),o.pop(),!0}(e,t,n,r)}function se(e){if(!E(e))return[];var t=[];for(var n in e)t.push(n);return C&&te(e,t),t}function ce(e){var t=ee(e);return function(n){if(null==n)return!1;var r=se(n);if(ee(r))return!1;for(var o=0;o<t;o++)if(!P(n[e[o]]))return!1;return e!==de||!P(n[ue])}}var ue="forEach",le=["clear","delete"],fe=["get","has","set"],pe=le.concat(ue,fe),de=le.concat(fe),ge=["add"].concat(le,ue,"has"),he=N?ce(pe):k("Map"),ve=N?ce(de):k("WeakMap"),me=N?ce(ge):k("Set"),Ce=k("WeakSet");function ye(e){for(var t=ne(e),n=t.length,r=Array(n),o=0;o<n;o++)r[o]=e[t[o]];return r}function be(e){for(var t={},n=ne(e),r=0,o=n.length;r<o;r++)t[e[n[r]]]=n[r];return t}function we(e){var t=[];for(var n in e)P(e[n])&&t.push(n);return t.sort()}function Ee(e,t){return function(n){var r=arguments.length;if(t&&(n=Object(n)),r<2||null==n)return n;for(var o=1;o<r;o++)for(var i=arguments[o],a=e(i),A=a.length,s=0;s<A;s++){var c=a[s];t&&void 0!==n[c]||(n[c]=i[c])}return n}}var Be=Ee(se),xe=Ee(ne),ke=Ee(se,!0);function Ie(e){if(!E(e))return{};if(g)return g(e);var t=function(){};t.prototype=e;var n=new t;return t.prototype=null,n}function Se(e){return E(e)?Y(e)?e.slice():Be({},e):e}function Te(e){return Y(e)?e:[e]}function Le(e){return oe.toPath(e)}function Re(e,t){for(var n=t.length,r=0;r<n;r++){if(null==e)return;e=e[t[r]]}return n?e:void 0}function Me(e,t,n){var r=Re(e,Le(t));return B(r)?n:r}function Oe(e){return e}function Qe(e){return e=xe({},e),function(t){return re(t,e)}}function De(e){return e=Le(e),function(t){return Re(t,e)}}function Pe(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,o){return e.call(t,n,r,o)};case 4:return function(n,r,o,i){return e.call(t,n,r,o,i)}}return function(){return e.apply(t,arguments)}}function Fe(e,t,n){return null==e?Oe:P(e)?Pe(e,t,n):E(e)&&!Y(e)?Qe(e):De(e)}function Ue(e,t){return Fe(e,t,1/0)}function Ne(e,t,n){return oe.iteratee!==Ue?oe.iteratee(e,t):Fe(e,t,n)}function We(){}function je(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}oe.toPath=Te,oe.iteratee=Ue;var Ye=Date.now||function(){return(new Date).getTime()};function Ge(e){var t=function(t){return e[t]},n="(?:"+ne(e).join("|")+")",r=RegExp(n),o=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(o,t):e}}var ze={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},_e=Ge(ze),Ve=Ge(be(ze)),He=oe.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},Je=/(.)^/,Ze={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Ke=/\\|'|\r|\n|\u2028|\u2029/g;function Xe(e){return"\\"+Ze[e]}var qe=/^\s*(\w|\$)+\s*$/,$e=0;function et(e,t,n,r,o){if(!(r instanceof t))return e.apply(n,o);var i=Ie(e.prototype),a=e.apply(i,o);return E(a)?a:i}var tt=w((function(e,t){var n=tt.placeholder;return function r(){for(var o=0,i=t.length,a=Array(i),A=0;A<i;A++)a[A]=t[A]===n?arguments[o++]:t[A];for(;o<arguments.length;)a.push(arguments[o++]);return et(e,r,this,this,a)}}));tt.placeholder=oe;var nt=w((function(e,t,n){if(!P(e))throw new TypeError("Bind must be called on a function");var r=w((function(o){return et(e,r,t,this,n.concat(o))}));return r})),rt=J(ee);function ot(e,t,n,r){if(r=r||[],t||0===t){if(t<=0)return r.concat(e)}else t=1/0;for(var o=r.length,i=0,a=ee(e);i<a;i++){var A=e[i];if(rt(A)&&(Y(A)||_(A)))if(t>1)ot(A,t-1,n,r),o=r.length;else for(var s=0,c=A.length;s<c;)r[o++]=A[s++];else n||(r[o++]=A)}return r}var it=w((function(e,t){var n=(t=ot(t,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=t[n];e[r]=nt(e[r],e)}return e})),at=w((function(e,t,n){return setTimeout((function(){return e.apply(null,n)}),t)})),At=tt(at,oe,1);function st(e){return function(){return!e.apply(this,arguments)}}function ct(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}}var ut=tt(ct,2);function lt(e,t,n){t=Ne(t,n);for(var r,o=ne(e),i=0,a=o.length;i<a;i++)if(t(e[r=o[i]],r,e))return r}function ft(e){return function(t,n,r){n=Ne(n,r);for(var o=ee(t),i=e>0?0:o-1;i>=0&&i<o;i+=e)if(n(t[i],i,t))return i;return-1}}var pt=ft(1),dt=ft(-1);function gt(e,t,n,r){for(var o=(n=Ne(n,r,1))(t),i=0,a=ee(e);i<a;){var A=Math.floor((i+a)/2);n(e[A])<o?i=A+1:a=A}return i}function ht(e,t,n){return function(r,o,i){var a=0,A=ee(r);if("number"==typeof i)e>0?a=i>=0?i:Math.max(i+A,a):A=i>=0?Math.min(i+1,A):i+A+1;else if(n&&i&&A)return r[i=n(r,o)]===o?i:-1;if(o!=o)return(i=t(s.call(r,a,A),V))>=0?i+a:-1;for(i=e>0?a:A-1;i>=0&&i<A;i+=e)if(r[i]===o)return i;return-1}}var vt=ht(1,pt,gt),mt=ht(-1,dt);function Ct(e,t,n){var r=(rt(e)?pt:lt)(e,t,n);if(void 0!==r&&-1!==r)return e[r]}function yt(e,t,n){var r,o;if(t=Pe(t,n),rt(e))for(r=0,o=e.length;r<o;r++)t(e[r],r,e);else{var i=ne(e);for(r=0,o=i.length;r<o;r++)t(e[i[r]],i[r],e)}return e}function bt(e,t,n){t=Ne(t,n);for(var r=!rt(e)&&ne(e),o=(r||e).length,i=Array(o),a=0;a<o;a++){var A=r?r[a]:a;i[a]=t(e[A],A,e)}return i}function wt(e){var t=function(t,n,r,o){var i=!rt(t)&&ne(t),a=(i||t).length,A=e>0?0:a-1;for(o||(r=t[i?i[A]:A],A+=e);A>=0&&A<a;A+=e){var s=i?i[A]:A;r=n(r,t[s],s,t)}return r};return function(e,n,r,o){var i=arguments.length>=3;return t(e,Pe(n,o,4),r,i)}}var Et=wt(1),Bt=wt(-1);function xt(e,t,n){var r=[];return t=Ne(t,n),yt(e,(function(e,n,o){t(e,n,o)&&r.push(e)})),r}function kt(e,t,n){t=Ne(t,n);for(var r=!rt(e)&&ne(e),o=(r||e).length,i=0;i<o;i++){var a=r?r[i]:i;if(!t(e[a],a,e))return!1}return!0}function It(e,t,n){t=Ne(t,n);for(var r=!rt(e)&&ne(e),o=(r||e).length,i=0;i<o;i++){var a=r?r[i]:i;if(t(e[a],a,e))return!0}return!1}function St(e,t,n,r){return rt(e)||(e=ye(e)),("number"!=typeof n||r)&&(n=0),vt(e,t,n)>=0}var Tt=w((function(e,t,n){var r,o;return P(t)?o=t:(t=Le(t),r=t.slice(0,-1),t=t[t.length-1]),bt(e,(function(e){var i=o;if(!i){if(r&&r.length&&(e=Re(e,r)),null==e)return;i=e[t]}return null==i?i:i.apply(e,n)}))}));function Lt(e,t){return bt(e,De(t))}function Rt(e,t,n){var r,o,i=-1/0,A=-1/0;if(null==t||"number"==typeof t&&"object"!=a(e[0])&&null!=e)for(var s=0,c=(e=rt(e)?e:ye(e)).length;s<c;s++)null!=(r=e[s])&&r>i&&(i=r);else t=Ne(t,n),yt(e,(function(e,n,r){((o=t(e,n,r))>A||o===-1/0&&i===-1/0)&&(i=e,A=o)}));return i}function Mt(e,t,n){if(null==t||n)return rt(e)||(e=ye(e)),e[je(e.length-1)];var r=rt(e)?Se(e):ye(e),o=ee(r);t=Math.max(Math.min(t,o),0);for(var i=o-1,a=0;a<t;a++){var A=je(a,i),s=r[a];r[a]=r[A],r[A]=s}return r.slice(0,t)}function Ot(e,t){return function(n,r,o){var i=t?[[],[]]:{};return r=Ne(r,o),yt(n,(function(t,o){var a=r(t,o,n);e(i,t,a)})),i}}var Qt=Ot((function(e,t,n){G(e,n)?e[n].push(t):e[n]=[t]})),Dt=Ot((function(e,t,n){e[n]=t})),Pt=Ot((function(e,t,n){G(e,n)?e[n]++:e[n]=1})),Ft=Ot((function(e,t,n){e[n?0:1].push(t)}),!0),Ut=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Nt(e,t,n){return t in n}var Wt=w((function(e,t){var n={},r=t[0];if(null==e)return n;P(r)?(t.length>1&&(r=Pe(r,t[1])),t=se(e)):(r=Nt,t=ot(t,!1,!1),e=Object(e));for(var o=0,i=t.length;o<i;o++){var a=t[o],A=e[a];r(A,a,e)&&(n[a]=A)}return n})),jt=w((function(e,t){var n,r=t[0];return P(r)?(r=st(r),t.length>1&&(n=t[1])):(t=bt(ot(t,!1,!1),String),r=function(e,n){return!St(t,n)}),Wt(e,r,n)}));function Yt(e,t,n){return s.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))}function Gt(e,t,n){return null==e||e.length<1?null==t||n?void 0:[]:null==t||n?e[0]:Yt(e,e.length-t)}function zt(e,t,n){return s.call(e,null==t||n?1:t)}var _t=w((function(e,t){return t=ot(t,!0,!0),xt(e,(function(e){return!St(t,e)}))})),Vt=w((function(e,t){return _t(e,t)}));function Ht(e,t,n,r){x(t)||(r=n,n=t,t=!1),null!=n&&(n=Ne(n,r));for(var o=[],i=[],a=0,A=ee(e);a<A;a++){var s=e[a],c=n?n(s,a,e):s;t&&!n?(a&&i===c||o.push(s),i=c):n?St(i,c)||(i.push(c),o.push(s)):St(o,s)||o.push(s)}return o}var Jt=w((function(e){return Ht(ot(e,!0,!0))}));function Zt(e){for(var t=e&&Rt(e,ee).length||0,n=Array(t),r=0;r<t;r++)n[r]=Lt(e,r);return n}var Kt=w(Zt);function Xt(e,t){return e._chain?oe(t).chain():t}function qt(e){return yt(we(e),(function(t){var n=oe[t]=e[t];oe.prototype[t]=function(){var e=[this._wrapped];return A.apply(e,arguments),Xt(this,n.apply(oe,e))}})),oe}yt(["pop","push","reverse","shift","sort","splice","unshift"],(function(e){var t=r[e];oe.prototype[e]=function(){var n=this._wrapped;return null!=n&&(t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0]),Xt(this,n)}})),yt(["concat","join","slice"],(function(e){var t=r[e];oe.prototype[e]=function(){var e=this._wrapped;return null!=e&&(e=t.apply(e,arguments)),Xt(this,e)}}));var $t=qt({__proto__:null,VERSION:e,restArguments:w,isObject:E,isNull:function(e){return null===e},isUndefined:B,isBoolean:x,isElement:function(e){return!(!e||1!==e.nodeType)},isString:I,isNumber:S,isDate:T,isRegExp:L,isError:R,isSymbol:M,isArrayBuffer:O,isDataView:j,isArray:Y,isFunction:P,isArguments:_,isFinite:function(e){return!M(e)&&m(e)&&!isNaN(parseFloat(e))},isNaN:V,isTypedArray:$,isEmpty:function(e){if(null==e)return!0;var t=ee(e);return"number"==typeof t&&(Y(e)||I(e)||_(e))?0===t:0===ee(ne(e))},isMatch:re,isEqual:function(e,t){return Ae(e,t)},isMap:he,isWeakMap:ve,isSet:me,isWeakSet:Ce,keys:ne,allKeys:se,values:ye,pairs:function(e){for(var t=ne(e),n=t.length,r=Array(n),o=0;o<n;o++)r[o]=[t[o],e[t[o]]];return r},invert:be,functions:we,methods:we,extend:Be,extendOwn:xe,assign:xe,defaults:ke,create:function(e,t){var n=Ie(e);return t&&xe(n,t),n},clone:Se,tap:function(e,t){return t(e),e},get:Me,has:function(e,t){for(var n=(t=Le(t)).length,r=0;r<n;r++){var o=t[r];if(!G(e,o))return!1;e=e[o]}return!!n},mapObject:function(e,t,n){t=Ne(t,n);for(var r=ne(e),o=r.length,i={},a=0;a<o;a++){var A=r[a];i[A]=t(e[A],A,e)}return i},identity:Oe,constant:H,noop:We,toPath:Te,property:De,propertyOf:function(e){return null==e?We:function(t){return Me(e,t)}},matcher:Qe,matches:Qe,times:function(e,t,n){var r=Array(Math.max(0,e));t=Pe(t,n,1);for(var o=0;o<e;o++)r[o]=t(o);return r},random:je,now:Ye,escape:_e,unescape:Ve,templateSettings:He,template:function(e,t,n){!t&&n&&(t=n),t=ke({},t,oe.templateSettings);var r=RegExp([(t.escape||Je).source,(t.interpolate||Je).source,(t.evaluate||Je).source].join("|")+"|$","g"),o=0,i="__p+='";e.replace(r,(function(t,n,r,a,A){return i+=e.slice(o,A).replace(Ke,Xe),o=A+t.length,n?i+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?i+="'+\n((__t=("+r+"))==null?'':__t)+\n'":a&&(i+="';\n"+a+"\n__p+='"),t})),i+="';\n";var a,A=t.variable;if(A){if(!qe.test(A))throw new Error("variable is not a bare identifier: "+A)}else i="with(obj||{}){\n"+i+"}\n",A="obj";i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{a=new Function(A,"_",i)}catch(e){throw e.source=i,e}var s=function(e){return a.call(this,e,oe)};return s.source="function("+A+"){\n"+i+"}",s},result:function(e,t,n){var r=(t=Le(t)).length;if(!r)return P(n)?n.call(e):n;for(var o=0;o<r;o++){var i=null==e?void 0:e[t[o]];void 0===i&&(i=n,o=r),e=P(i)?i.call(e):i}return e},uniqueId:function(e){var t=++$e+"";return e?e+t:t},chain:function(e){var t=oe(e);return t._chain=!0,t},iteratee:Ue,partial:tt,bind:nt,bindAll:it,memoize:function(e,t){var n=function n(r){var o=n.cache,i=""+(t?t.apply(this,arguments):r);return G(o,i)||(o[i]=e.apply(this,arguments)),o[i]};return n.cache={},n},delay:at,defer:At,throttle:function(e,t,n){var r,o,i,a,A=0;n||(n={});var s=function(){A=!1===n.leading?0:Ye(),r=null,a=e.apply(o,i),r||(o=i=null)},c=function(){var c=Ye();A||!1!==n.leading||(A=c);var u=t-(c-A);return o=this,i=arguments,u<=0||u>t?(r&&(clearTimeout(r),r=null),A=c,a=e.apply(o,i),r||(o=i=null)):r||!1===n.trailing||(r=setTimeout(s,u)),a};return c.cancel=function(){clearTimeout(r),A=0,r=o=i=null},c},debounce:function(e,t,n){var r,o,i,a,A,s=function s(){var c=Ye()-o;t>c?r=setTimeout(s,t-c):(r=null,n||(a=e.apply(A,i)),r||(i=A=null))},c=w((function(c){return A=this,i=c,o=Ye(),r||(r=setTimeout(s,t),n&&(a=e.apply(A,i))),a}));return c.cancel=function(){clearTimeout(r),r=i=A=null},c},wrap:function(e,t){return tt(t,e)},negate:st,compose:function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},after:function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},before:ct,once:ut,findKey:lt,findIndex:pt,findLastIndex:dt,sortedIndex:gt,indexOf:vt,lastIndexOf:mt,find:Ct,detect:Ct,findWhere:function(e,t){return Ct(e,Qe(t))},each:yt,forEach:yt,map:bt,collect:bt,reduce:Et,foldl:Et,inject:Et,reduceRight:Bt,foldr:Bt,filter:xt,select:xt,reject:function(e,t,n){return xt(e,st(Ne(t)),n)},every:kt,all:kt,some:It,any:It,contains:St,includes:St,include:St,invoke:Tt,pluck:Lt,where:function(e,t){return xt(e,Qe(t))},max:Rt,min:function(e,t,n){var r,o,i=1/0,A=1/0;if(null==t||"number"==typeof t&&"object"!=a(e[0])&&null!=e)for(var s=0,c=(e=rt(e)?e:ye(e)).length;s<c;s++)null!=(r=e[s])&&r<i&&(i=r);else t=Ne(t,n),yt(e,(function(e,n,r){((o=t(e,n,r))<A||o===1/0&&i===1/0)&&(i=e,A=o)}));return i},shuffle:function(e){return Mt(e,1/0)},sample:Mt,sortBy:function(e,t,n){var r=0;return t=Ne(t,n),Lt(bt(e,(function(e,n,o){return{value:e,index:r++,criteria:t(e,n,o)}})).sort((function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index})),"value")},groupBy:Qt,indexBy:Dt,countBy:Pt,partition:Ft,toArray:function(e){return e?Y(e)?s.call(e):I(e)?e.match(Ut):rt(e)?bt(e,Oe):ye(e):[]},size:function(e){return null==e?0:rt(e)?e.length:ne(e).length},pick:Wt,omit:jt,first:Gt,head:Gt,take:Gt,initial:Yt,last:function(e,t,n){return null==e||e.length<1?null==t||n?void 0:[]:null==t||n?e[e.length-1]:zt(e,Math.max(0,e.length-t))},rest:zt,tail:zt,drop:zt,compact:function(e){return xt(e,Boolean)},flatten:function(e,t){return ot(e,t,!1)},without:Vt,uniq:Ht,unique:Ht,union:Jt,intersection:function(e){for(var t=[],n=arguments.length,r=0,o=ee(e);r<o;r++){var i=e[r];if(!St(t,i)){var a;for(a=1;a<n&&St(arguments[a],i);a++);a===n&&t.push(i)}}return t},difference:_t,unzip:Zt,transpose:Zt,zip:Kt,object:function(e,t){for(var n={},r=0,o=ee(e);r<o;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},range:function(e,t,n){null==t&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var r=Math.max(Math.ceil((t-e)/n),0),o=Array(r),i=0;i<r;i++,e+=n)o[i]=e;return o},chunk:function(e,t){if(null==t||t<1)return[];for(var n=[],r=0,o=e.length;r<o;)n.push(s.call(e,r,r+=t));return n},mixin:qt,default:oe});return $t._=$t,$t},"object"==a(t)?e.exports=i():void 0===(o="function"==typeof(r=i)?r.call(t,n,t,e):r)||(e.exports=o)},9662:function(e,t,n){var r=n(7854),o=n(614),i=n(6330),a=r.TypeError;e.exports=function(e){if(o(e))return e;throw a(i(e)+" is not a function")}},9483:function(e,t,n){var r=n(7854),o=n(4411),i=n(6330),a=r.TypeError;e.exports=function(e){if(o(e))return e;throw a(i(e)+" is not a constructor")}},6077:function(e,t,n){var r=n(7854),o=n(614),i=r.String,a=r.TypeError;e.exports=function(e){if("object"==typeof e||o(e))return e;throw a("Can't set "+i(e)+" as a prototype")}},1223:function(e,t,n){var r=n(5112),o=n(30),i=n(3070),a=r("unscopables"),A=Array.prototype;null==A[a]&&i.f(A,a,{configurable:!0,value:o(null)}),e.exports=function(e){A[a][e]=!0}},1530:function(e,t,n){"use strict";var r=n(8710).charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},5787:function(e,t,n){var r=n(7854),o=n(7976),i=r.TypeError;e.exports=function(e,t){if(o(t,e))return e;throw i("Incorrect invocation")}},9670:function(e,t,n){var r=n(7854),o=n(111),i=r.String,a=r.TypeError;e.exports=function(e){if(o(e))return e;throw a(i(e)+" is not an object")}},4019:function(e){e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},7556:function(e,t,n){var r=n(7293);e.exports=r((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}))},260:function(e,t,n){"use strict";var r,o,i,a=n(4019),A=n(9781),s=n(7854),c=n(614),u=n(111),l=n(2597),f=n(648),p=n(6330),d=n(8880),g=n(1320),h=n(3070).f,v=n(7976),m=n(9518),C=n(7674),y=n(5112),b=n(9711),w=s.Int8Array,E=w&&w.prototype,B=s.Uint8ClampedArray,x=B&&B.prototype,k=w&&m(w),I=E&&m(E),S=Object.prototype,T=s.TypeError,L=y("toStringTag"),R=b("TYPED_ARRAY_TAG"),M=b("TYPED_ARRAY_CONSTRUCTOR"),O=a&&!!C&&"Opera"!==f(s.opera),Q=!1,D={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},P={BigInt64Array:8,BigUint64Array:8},F=function(e){if(!u(e))return!1;var t=f(e);return l(D,t)||l(P,t)};for(r in D)(i=(o=s[r])&&o.prototype)?d(i,M,o):O=!1;for(r in P)(i=(o=s[r])&&o.prototype)&&d(i,M,o);if((!O||!c(k)||k===Function.prototype)&&(k=function(){throw T("Incorrect invocation")},O))for(r in D)s[r]&&C(s[r],k);if((!O||!I||I===S)&&(I=k.prototype,O))for(r in D)s[r]&&C(s[r].prototype,I);if(O&&m(x)!==I&&C(x,I),A&&!l(I,L))for(r in Q=!0,h(I,L,{get:function(){return u(this)?this[R]:void 0}}),D)s[r]&&d(s[r],R,r);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:O,TYPED_ARRAY_CONSTRUCTOR:M,TYPED_ARRAY_TAG:Q&&R,aTypedArray:function(e){if(F(e))return e;throw T("Target is not a typed array")},aTypedArrayConstructor:function(e){if(c(e)&&(!C||v(k,e)))return e;throw T(p(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n,r){if(A){if(n)for(var o in D){var i=s[o];if(i&&l(i.prototype,e))try{delete i.prototype[e]}catch(n){try{i.prototype[e]=t}catch(e){}}}I[e]&&!n||g(I,e,n?t:O&&E[e]||t,r)}},exportTypedArrayStaticMethod:function(e,t,n){var r,o;if(A){if(C){if(n)for(r in D)if((o=s[r])&&l(o,e))try{delete o[e]}catch(e){}if(k[e]&&!n)return;try{return g(k,e,n?t:O&&k[e]||t)}catch(e){}}for(r in D)!(o=s[r])||o[e]&&!n||g(o,e,t)}},isView:function(e){if(!u(e))return!1;var t=f(e);return"DataView"===t||l(D,t)||l(P,t)},isTypedArray:F,TypedArray:k,TypedArrayPrototype:I}},3331:function(e,t,n){"use strict";var r=n(7854),o=n(1702),i=n(9781),a=n(4019),A=n(6530),s=n(8880),c=n(2248),u=n(7293),l=n(5787),f=n(9303),p=n(7466),d=n(7067),g=n(1179),h=n(9518),v=n(7674),m=n(8006).f,C=n(3070).f,y=n(1285),b=n(1589),w=n(8003),E=n(9909),B=A.PROPER,x=A.CONFIGURABLE,k=E.get,I=E.set,S="ArrayBuffer",T="Wrong index",L=r.ArrayBuffer,R=L,M=R&&R.prototype,O=r.DataView,Q=O&&O.prototype,D=Object.prototype,P=r.Array,F=r.RangeError,U=o(y),N=o([].reverse),W=g.pack,j=g.unpack,Y=function(e){return[255&e]},G=function(e){return[255&e,e>>8&255]},z=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},_=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},V=function(e){return W(e,23,4)},H=function(e){return W(e,52,8)},J=function(e,t){C(e.prototype,t,{get:function(){return k(this)[t]}})},Z=function(e,t,n,r){var o=d(n),i=k(e);if(o+t>i.byteLength)throw F(T);var a=k(i.buffer).bytes,A=o+i.byteOffset,s=b(a,A,A+t);return r?s:N(s)},K=function(e,t,n,r,o,i){var a=d(n),A=k(e);if(a+t>A.byteLength)throw F(T);for(var s=k(A.buffer).bytes,c=a+A.byteOffset,u=r(+o),l=0;l<t;l++)s[c+l]=u[i?l:t-l-1]};if(a){var X=B&&L.name!==S;if(u((function(){L(1)}))&&u((function(){new L(-1)}))&&!u((function(){return new L,new L(1.5),new L(NaN),X&&!x})))X&&x&&s(L,"name",S);else{(R=function(e){return l(this,M),new L(d(e))}).prototype=M;for(var q,$=m(L),ee=0;$.length>ee;)(q=$[ee++])in R||s(R,q,L[q]);M.constructor=R}v&&h(Q)!==D&&v(Q,D);var te=new O(new R(2)),ne=o(Q.setInt8);te.setInt8(0,2147483648),te.setInt8(1,2147483649),!te.getInt8(0)&&te.getInt8(1)||c(Q,{setInt8:function(e,t){ne(this,e,t<<24>>24)},setUint8:function(e,t){ne(this,e,t<<24>>24)}},{unsafe:!0})}else M=(R=function(e){l(this,M);var t=d(e);I(this,{bytes:U(P(t),0),byteLength:t}),i||(this.byteLength=t)}).prototype,Q=(O=function(e,t,n){l(this,Q),l(e,M);var r=k(e).byteLength,o=f(t);if(o<0||o>r)throw F("Wrong offset");if(o+(n=void 0===n?r-o:p(n))>r)throw F("Wrong length");I(this,{buffer:e,byteLength:n,byteOffset:o}),i||(this.buffer=e,this.byteLength=n,this.byteOffset=o)}).prototype,i&&(J(R,"byteLength"),J(O,"buffer"),J(O,"byteLength"),J(O,"byteOffset")),c(Q,{getInt8:function(e){return Z(this,1,e)[0]<<24>>24},getUint8:function(e){return Z(this,1,e)[0]},getInt16:function(e){var t=Z(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=Z(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return _(Z(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return _(Z(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return j(Z(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return j(Z(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){K(this,1,e,Y,t)},setUint8:function(e,t){K(this,1,e,Y,t)},setInt16:function(e,t){K(this,2,e,G,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){K(this,2,e,G,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){K(this,4,e,z,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){K(this,4,e,z,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){K(this,4,e,V,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){K(this,8,e,H,t,arguments.length>2?arguments[2]:void 0)}});w(R,S),w(O,"DataView"),e.exports={ArrayBuffer:R,DataView:O}},1048:function(e,t,n){"use strict";var r=n(7908),o=n(1400),i=n(6244),a=Math.min;e.exports=[].copyWithin||function(e,t){var n=r(this),A=i(n),s=o(e,A),c=o(t,A),u=arguments.length>2?arguments[2]:void 0,l=a((void 0===u?A:o(u,A))-c,A-s),f=1;for(c<s&&s<c+l&&(f=-1,c+=l-1,s+=l-1);l-- >0;)c in n?n[s]=n[c]:delete n[s],s+=f,c+=f;return n}},1285:function(e,t,n){"use strict";var r=n(7908),o=n(1400),i=n(6244);e.exports=function(e){for(var t=r(this),n=i(t),a=arguments.length,A=o(a>1?arguments[1]:void 0,n),s=a>2?arguments[2]:void 0,c=void 0===s?n:o(s,n);c>A;)t[A++]=e;return t}},8533:function(e,t,n){"use strict";var r=n(2092).forEach,o=n(2133)("forEach");e.exports=o?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},7745:function(e,t,n){var r=n(6244);e.exports=function(e,t){for(var n=0,o=r(t),i=new e(o);o>n;)i[n]=t[n++];return i}},8457:function(e,t,n){"use strict";var r=n(7854),o=n(9974),i=n(6916),a=n(7908),A=n(3411),s=n(7659),c=n(4411),u=n(6244),l=n(6135),f=n(8554),p=n(1246),d=r.Array;e.exports=function(e){var t=a(e),n=c(this),r=arguments.length,g=r>1?arguments[1]:void 0,h=void 0!==g;h&&(g=o(g,r>2?arguments[2]:void 0));var v,m,C,y,b,w,E=p(t),B=0;if(!E||this==d&&s(E))for(v=u(t),m=n?new this(v):d(v);v>B;B++)w=h?g(t[B],B):t[B],l(m,B,w);else for(b=(y=f(t,E)).next,m=n?new this:[];!(C=i(b,y)).done;B++)w=h?A(y,g,[C.value,B],!0):C.value,l(m,B,w);return m.length=B,m}},1318:function(e,t,n){var r=n(5656),o=n(1400),i=n(6244),a=function(e){return function(t,n,a){var A,s=r(t),c=i(s),u=o(a,c);if(e&&n!=n){for(;c>u;)if((A=s[u++])!=A)return!0}else for(;c>u;u++)if((e||u in s)&&s[u]===n)return e||u||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},2092:function(e,t,n){var r=n(9974),o=n(1702),i=n(8361),a=n(7908),A=n(6244),s=n(5417),c=o([].push),u=function(e){var t=1==e,n=2==e,o=3==e,u=4==e,l=6==e,f=7==e,p=5==e||l;return function(d,g,h,v){for(var m,C,y=a(d),b=i(y),w=r(g,h),E=A(b),B=0,x=v||s,k=t?x(d,E):n||f?x(d,0):void 0;E>B;B++)if((p||B in b)&&(C=w(m=b[B],B,y),e))if(t)k[B]=C;else if(C)switch(e){case 3:return!0;case 5:return m;case 6:return B;case 2:c(k,m)}else switch(e){case 4:return!1;case 7:c(k,m)}return l?-1:o||u?u:k}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}},6583:function(e,t,n){"use strict";var r=n(2104),o=n(5656),i=n(9303),a=n(6244),A=n(2133),s=Math.min,c=[].lastIndexOf,u=!!c&&1/[1].lastIndexOf(1,-0)<0,l=A("lastIndexOf"),f=u||!l;e.exports=f?function(e){if(u)return r(c,this,arguments)||0;var t=o(this),n=a(t),A=n-1;for(arguments.length>1&&(A=s(A,i(arguments[1]))),A<0&&(A=n+A);A>=0;A--)if(A in t&&t[A]===e)return A||0;return-1}:c},1194:function(e,t,n){var r=n(7293),o=n(5112),i=n(7392),a=o("species");e.exports=function(e){return i>=51||!r((function(){var t=[];return(t.constructor={})[a]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},2133:function(e,t,n){"use strict";var r=n(7293);e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},3671:function(e,t,n){var r=n(7854),o=n(9662),i=n(7908),a=n(8361),A=n(6244),s=r.TypeError,c=function(e){return function(t,n,r,c){o(n);var u=i(t),l=a(u),f=A(u),p=e?f-1:0,d=e?-1:1;if(r<2)for(;;){if(p in l){c=l[p],p+=d;break}if(p+=d,e?p<0:f<=p)throw s("Reduce of empty array with no initial value")}for(;e?p>=0:f>p;p+=d)p in l&&(c=n(c,l[p],p,u));return c}};e.exports={left:c(!1),right:c(!0)}},1589:function(e,t,n){var r=n(7854),o=n(1400),i=n(6244),a=n(6135),A=r.Array,s=Math.max;e.exports=function(e,t,n){for(var r=i(e),c=o(t,r),u=o(void 0===n?r:n,r),l=A(s(u-c,0)),f=0;c<u;c++,f++)a(l,f,e[c]);return l.length=f,l}},206:function(e,t,n){var r=n(1702);e.exports=r([].slice)},4362:function(e,t,n){var r=n(1589),o=Math.floor,i=function(e,t){var n=e.length,s=o(n/2);return n<8?a(e,t):A(e,i(r(e,0,s),t),i(r(e,s),t),t)},a=function(e,t){for(var n,r,o=e.length,i=1;i<o;){for(r=i,n=e[i];r&&t(e[r-1],n)>0;)e[r]=e[--r];r!==i++&&(e[r]=n)}return e},A=function(e,t,n,r){for(var o=t.length,i=n.length,a=0,A=0;a<o||A<i;)e[a+A]=a<o&&A<i?r(t[a],n[A])<=0?t[a++]:n[A++]:a<o?t[a++]:n[A++];return e};e.exports=i},7475:function(e,t,n){var r=n(7854),o=n(3157),i=n(4411),a=n(111),A=n(5112)("species"),s=r.Array;e.exports=function(e){var t;return o(e)&&(t=e.constructor,(i(t)&&(t===s||o(t.prototype))||a(t)&&null===(t=t[A]))&&(t=void 0)),void 0===t?s:t}},5417:function(e,t,n){var r=n(7475);e.exports=function(e,t){return new(r(e))(0===t?0:t)}},4170:function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n={},r=0;r<66;r++)n[t.charAt(r)]=r;e.exports={itoc:t,ctoi:n}},3411:function(e,t,n){var r=n(9670),o=n(9212);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){o(e,"throw",t)}}},7072:function(e,t,n){var r=n(5112)("iterator"),o=!1;try{var i=0,a={next:function(){return{done:!!i++}},return:function(){o=!0}};a[r]=function(){return this},Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var i={};i[r]=function(){return{next:function(){return{done:n=!0}}}},e(i)}catch(e){}return n}},4326:function(e,t,n){var r=n(1702),o=r({}.toString),i=r("".slice);e.exports=function(e){return i(o(e),8,-1)}},648:function(e,t,n){var r=n(7854),o=n(1694),i=n(614),a=n(4326),A=n(5112)("toStringTag"),s=r.Object,c="Arguments"==a(function(){return arguments}());e.exports=o?a:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=s(e),A))?n:c?a(t):"Object"==(r=a(t))&&i(t.callee)?"Arguments":r}},7741:function(e,t,n){var r=n(1702)("".replace),o=String(Error("zxcasd").stack),i=/\n\s*at [^:]*:[^\n]*/,a=i.test(o);e.exports=function(e,t){if(a&&"string"==typeof e)for(;t--;)e=r(e,i,"");return e}},5631:function(e,t,n){"use strict";var r=n(3070).f,o=n(30),i=n(2248),a=n(9974),A=n(5787),s=n(408),c=n(654),u=n(6340),l=n(9781),f=n(2423).fastKey,p=n(9909),d=p.set,g=p.getterFor;e.exports={getConstructor:function(e,t,n,c){var u=e((function(e,r){A(e,p),d(e,{type:t,index:o(null),first:void 0,last:void 0,size:0}),l||(e.size=0),null!=r&&s(r,e[c],{that:e,AS_ENTRIES:n})})),p=u.prototype,h=g(t),v=function(e,t,n){var r,o,i=h(e),a=m(e,t);return a?a.value=n:(i.last=a={index:o=f(t,!0),key:t,value:n,previous:r=i.last,next:void 0,removed:!1},i.first||(i.first=a),r&&(r.next=a),l?i.size++:e.size++,"F"!==o&&(i.index[o]=a)),e},m=function(e,t){var n,r=h(e),o=f(t);if("F"!==o)return r.index[o];for(n=r.first;n;n=n.next)if(n.key==t)return n};return i(p,{clear:function(){for(var e=h(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,l?e.size=0:this.size=0},delete:function(e){var t=this,n=h(t),r=m(t,e);if(r){var o=r.next,i=r.previous;delete n.index[r.index],r.removed=!0,i&&(i.next=o),o&&(o.previous=i),n.first==r&&(n.first=o),n.last==r&&(n.last=i),l?n.size--:t.size--}return!!r},forEach:function(e){for(var t,n=h(this),r=a(e,arguments.length>1?arguments[1]:void 0);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!m(this,e)}}),i(p,n?{get:function(e){var t=m(this,e);return t&&t.value},set:function(e,t){return v(this,0===e?0:e,t)}}:{add:function(e){return v(this,e=0===e?0:e,e)}}),l&&r(p,"size",{get:function(){return h(this).size}}),u},setStrong:function(e,t,n){var r=t+" Iterator",o=g(t),i=g(r);c(e,t,(function(e,t){d(this,{type:r,target:e,state:o(e),kind:t,last:void 0})}),(function(){for(var e=i(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),u(t)}}},9320:function(e,t,n){"use strict";var r=n(1702),o=n(2248),i=n(2423).getWeakData,a=n(9670),A=n(111),s=n(5787),c=n(408),u=n(2092),l=n(2597),f=n(9909),p=f.set,d=f.getterFor,g=u.find,h=u.findIndex,v=r([].splice),m=0,C=function(e){return e.frozen||(e.frozen=new y)},y=function(){this.entries=[]},b=function(e,t){return g(e.entries,(function(e){return e[0]===t}))};y.prototype={get:function(e){var t=b(this,e);if(t)return t[1]},has:function(e){return!!b(this,e)},set:function(e,t){var n=b(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(e){var t=h(this.entries,(function(t){return t[0]===e}));return~t&&v(this.entries,t,1),!!~t}},e.exports={getConstructor:function(e,t,n,r){var u=e((function(e,o){s(e,f),p(e,{type:t,id:m++,frozen:void 0}),null!=o&&c(o,e[r],{that:e,AS_ENTRIES:n})})),f=u.prototype,g=d(t),h=function(e,t,n){var r=g(e),o=i(a(t),!0);return!0===o?C(r).set(t,n):o[r.id]=n,e};return o(f,{delete:function(e){var t=g(this);if(!A(e))return!1;var n=i(e);return!0===n?C(t).delete(e):n&&l(n,t.id)&&delete n[t.id]},has:function(e){var t=g(this);if(!A(e))return!1;var n=i(e);return!0===n?C(t).has(e):n&&l(n,t.id)}}),o(f,n?{get:function(e){var t=g(this);if(A(e)){var n=i(e);return!0===n?C(t).get(e):n?n[t.id]:void 0}},set:function(e,t){return h(this,e,t)}}:{add:function(e){return h(this,e,!0)}}),u}}},7710:function(e,t,n){"use strict";var r=n(2109),o=n(7854),i=n(1702),a=n(4705),A=n(1320),s=n(2423),c=n(408),u=n(5787),l=n(614),f=n(111),p=n(7293),d=n(7072),g=n(8003),h=n(9587);e.exports=function(e,t,n){var v=-1!==e.indexOf("Map"),m=-1!==e.indexOf("Weak"),C=v?"set":"add",y=o[e],b=y&&y.prototype,w=y,E={},B=function(e){var t=i(b[e]);A(b,e,"add"==e?function(e){return t(this,0===e?0:e),this}:"delete"==e?function(e){return!(m&&!f(e))&&t(this,0===e?0:e)}:"get"==e?function(e){return m&&!f(e)?void 0:t(this,0===e?0:e)}:"has"==e?function(e){return!(m&&!f(e))&&t(this,0===e?0:e)}:function(e,n){return t(this,0===e?0:e,n),this})};if(a(e,!l(y)||!(m||b.forEach&&!p((function(){(new y).entries().next()})))))w=n.getConstructor(t,e,v,C),s.enable();else if(a(e,!0)){var x=new w,k=x[C](m?{}:-0,1)!=x,I=p((function(){x.has(1)})),S=d((function(e){new y(e)})),T=!m&&p((function(){for(var e=new y,t=5;t--;)e[C](t,t);return!e.has(-0)}));S||((w=t((function(e,t){u(e,b);var n=h(new y,e,w);return null!=t&&c(t,n[C],{that:n,AS_ENTRIES:v}),n}))).prototype=b,b.constructor=w),(I||T)&&(B("delete"),B("has"),v&&B("get")),(T||k)&&B(C),m&&b.clear&&delete b.clear}return E[e]=w,r({global:!0,forced:w!=y},E),g(w,e),m||n.setStrong(w,e,v),w}},9920:function(e,t,n){var r=n(2597),o=n(3887),i=n(1236),a=n(3070);e.exports=function(e,t,n){for(var A=o(t),s=a.f,c=i.f,u=0;u<A.length;u++){var l=A[u];r(e,l)||n&&r(n,l)||s(e,l,c(t,l))}}},4964:function(e,t,n){var r=n(5112)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,"/./"[e](t)}catch(e){}}return!1}},8544:function(e,t,n){var r=n(7293);e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},4230:function(e,t,n){var r=n(1702),o=n(4488),i=n(1340),a=/"/g,A=r("".replace);e.exports=function(e,t,n,r){var s=i(o(e)),c="<"+t;return""!==n&&(c+=" "+n+'="'+A(i(r),a,"&quot;")+'"'),c+">"+s+"</"+t+">"}},4994:function(e,t,n){"use strict";var r=n(3383).IteratorPrototype,o=n(30),i=n(9114),a=n(8003),A=n(7497),s=function(){return this};e.exports=function(e,t,n,c){var u=t+" Iterator";return e.prototype=o(r,{next:i(+!c,n)}),a(e,u,!1,!0),A[u]=s,e}},8880:function(e,t,n){var r=n(9781),o=n(3070),i=n(9114);e.exports=r?function(e,t,n){return o.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},9114:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},6135:function(e,t,n){"use strict";var r=n(4948),o=n(3070),i=n(9114);e.exports=function(e,t,n){var a=r(t);a in e?o.f(e,a,i(0,n)):e[a]=n}},5573:function(e,t,n){"use strict";var r=n(7854),o=n(1702),i=n(7293),a=n(6650).start,A=r.RangeError,s=Math.abs,c=Date.prototype,u=c.toISOString,l=o(c.getTime),f=o(c.getUTCDate),p=o(c.getUTCFullYear),d=o(c.getUTCHours),g=o(c.getUTCMilliseconds),h=o(c.getUTCMinutes),v=o(c.getUTCMonth),m=o(c.getUTCSeconds);e.exports=i((function(){return"0385-07-25T07:06:39.999Z"!=u.call(new Date(-50000000000001))}))||!i((function(){u.call(new Date(NaN))}))?function(){if(!isFinite(l(this)))throw A("Invalid time value");var e=this,t=p(e),n=g(e),r=t<0?"-":t>9999?"+":"";return r+a(s(t),r?6:4,0)+"-"+a(v(e)+1,2,0)+"-"+a(f(e),2,0)+"T"+a(d(e),2,0)+":"+a(h(e),2,0)+":"+a(m(e),2,0)+"."+a(n,3,0)+"Z"}:u},8709:function(e,t,n){"use strict";var r=n(7854),o=n(9670),i=n(2140),a=r.TypeError;e.exports=function(e){if(o(this),"string"===e||"default"===e)e="string";else if("number"!==e)throw a("Incorrect hint");return i(this,e)}},654:function(e,t,n){"use strict";var r=n(2109),o=n(6916),i=n(1913),a=n(6530),A=n(614),s=n(4994),c=n(9518),u=n(7674),l=n(8003),f=n(8880),p=n(1320),d=n(5112),g=n(7497),h=n(3383),v=a.PROPER,m=a.CONFIGURABLE,C=h.IteratorPrototype,y=h.BUGGY_SAFARI_ITERATORS,b=d("iterator"),w="keys",E="values",B="entries",x=function(){return this};e.exports=function(e,t,n,a,d,h,k){s(n,t,a);var I,S,T,L=function(e){if(e===d&&D)return D;if(!y&&e in O)return O[e];switch(e){case w:case E:case B:return function(){return new n(this,e)}}return function(){return new n(this)}},R=t+" Iterator",M=!1,O=e.prototype,Q=O[b]||O["@@iterator"]||d&&O[d],D=!y&&Q||L(d),P="Array"==t&&O.entries||Q;if(P&&(I=c(P.call(new e)))!==Object.prototype&&I.next&&(i||c(I)===C||(u?u(I,C):A(I[b])||p(I,b,x)),l(I,R,!0,!0),i&&(g[R]=x)),v&&d==E&&Q&&Q.name!==E&&(!i&&m?f(O,"name",E):(M=!0,D=function(){return o(Q,this)})),d)if(S={values:L(E),keys:h?D:L(w),entries:L(B)},k)for(T in S)(y||M||!(T in O))&&p(O,T,S[T]);else r({target:t,proto:!0,forced:y||M},S);return i&&!k||O[b]===D||p(O,b,D,{name:d}),g[t]=D,S}},7235:function(e,t,n){var r=n(857),o=n(2597),i=n(6061),a=n(3070).f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});o(t,e)||a(t,e,{value:i.f(e)})}},9781:function(e,t,n){var r=n(7293);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},317:function(e,t,n){var r=n(7854),o=n(111),i=r.document,a=o(i)&&o(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},3678:function(e){e.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},8324:function(e){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8509:function(e,t,n){var r=n(317)("span").classList,o=r&&r.constructor&&r.constructor.prototype;e.exports=o===Object.prototype?void 0:o},8886:function(e,t,n){var r=n(8113).match(/firefox\/(\d+)/i);e.exports=!!r&&+r[1]},7871:function(e){e.exports="object"==typeof window},256:function(e,t,n){var r=n(8113);e.exports=/MSIE|Trident/.test(r)},1528:function(e,t,n){var r=n(8113),o=n(7854);e.exports=/ipad|iphone|ipod/i.test(r)&&void 0!==o.Pebble},8334:function(e,t,n){var r=n(8113);e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},5268:function(e,t,n){var r=n(4326),o=n(7854);e.exports="process"==r(o.process)},1036:function(e,t,n){var r=n(8113);e.exports=/web0s(?!.*chrome)/i.test(r)},8113:function(e,t,n){var r=n(5005);e.exports=r("navigator","userAgent")||""},7392:function(e,t,n){var r,o,i=n(7854),a=n(8113),A=i.process,s=i.Deno,c=A&&A.versions||s&&s.version,u=c&&c.v8;u&&(o=(r=u.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!o&&a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(o=+r[1]),e.exports=o},8008:function(e,t,n){var r=n(8113).match(/AppleWebKit\/(\d+)\./);e.exports=!!r&&+r[1]},748:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2914:function(e,t,n){var r=n(7293),o=n(9114);e.exports=!r((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",o(1,7)),7!==e.stack)}))},7762:function(e,t,n){"use strict";var r=n(9781),o=n(7293),i=n(9670),a=n(30),A=n(6277),s=Error.prototype.toString,c=o((function(){if(r){var e=a(Object.defineProperty({},"name",{get:function(){return this===e}}));if("true"!==s.call(e))return!0}return"2: 1"!==s.call({message:1,name:2})||"Error"!==s.call({})}));e.exports=c?function(){var e=i(this),t=A(e.name,"Error"),n=A(e.message);return t?n?t+": "+n:t:n}:s},2109:function(e,t,n){var r=n(7854),o=n(1236).f,i=n(8880),a=n(1320),A=n(3505),s=n(9920),c=n(4705);e.exports=function(e,t){var n,u,l,f,p,d=e.target,g=e.global,h=e.stat;if(n=g?r:h?r[d]||A(d,{}):(r[d]||{}).prototype)for(u in t){if(f=t[u],l=e.noTargetGet?(p=o(n,u))&&p.value:n[u],!c(g?u:d+(h?".":"#")+u,e.forced)&&void 0!==l){if(typeof f==typeof l)continue;s(f,l)}(e.sham||l&&l.sham)&&i(f,"sham",!0),a(n,u,f,e)}}},7293:function(e){e.exports=function(e){try{return!!e()}catch(e){return!0}}},7007:function(e,t,n){"use strict";n(4916);var r=n(1702),o=n(1320),i=n(2261),a=n(7293),A=n(5112),s=n(8880),c=A("species"),u=RegExp.prototype;e.exports=function(e,t,n,l){var f=A(e),p=!a((function(){var t={};return t[f]=function(){return 7},7!=""[e](t)})),d=p&&!a((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[c]=function(){return n},n.flags="",n[f]=/./[f]),n.exec=function(){return t=!0,null},n[f](""),!t}));if(!p||!d||n){var g=r(/./[f]),h=t(f,""[e],(function(e,t,n,o,a){var A=r(e),s=t.exec;return s===i||s===u.exec?p&&!a?{done:!0,value:g(t,n,o)}:{done:!0,value:A(n,t,o)}:{done:!1}}));o(String.prototype,e,h[0]),o(u,f,h[1])}l&&s(u[f],"sham",!0)}},6790:function(e,t,n){"use strict";var r=n(7854),o=n(3157),i=n(6244),a=n(9974),A=r.TypeError,s=function(e,t,n,r,c,u,l,f){for(var p,d,g=c,h=0,v=!!l&&a(l,f);h<r;){if(h in n){if(p=v?v(n[h],h,t):n[h],u>0&&o(p))d=i(p),g=s(e,t,p,d,g,u-1)-1;else{if(g>=9007199254740991)throw A("Exceed the acceptable array length");e[g]=p}g++}h++}return g};e.exports=s},6677:function(e,t,n){var r=n(7293);e.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},2104:function(e,t,n){var r=n(4374),o=Function.prototype,i=o.apply,a=o.call;e.exports="object"==typeof Reflect&&Reflect.apply||(r?a.bind(i):function(){return a.apply(i,arguments)})},9974:function(e,t,n){var r=n(1702),o=n(9662),i=n(4374),a=r(r.bind);e.exports=function(e,t){return o(e),void 0===t?e:i?a(e,t):function(){return e.apply(t,arguments)}}},4374:function(e,t,n){var r=n(7293);e.exports=!r((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},7065:function(e,t,n){"use strict";var r=n(7854),o=n(1702),i=n(9662),a=n(111),A=n(2597),s=n(206),c=n(4374),u=r.Function,l=o([].concat),f=o([].join),p={},d=function(e,t,n){if(!A(p,t)){for(var r=[],o=0;o<t;o++)r[o]="a["+o+"]";p[t]=u("C,a","return new C("+f(r,",")+")")}return p[t](e,n)};e.exports=c?u.bind:function(e){var t=i(this),n=t.prototype,r=s(arguments,1),o=function(){var n=l(r,s(arguments));return this instanceof o?d(t,n.length,n):t.apply(e,n)};return a(n)&&(o.prototype=n),o}},6916:function(e,t,n){var r=n(4374),o=Function.prototype.call;e.exports=r?o.bind(o):function(){return o.apply(o,arguments)}},6530:function(e,t,n){var r=n(9781),o=n(2597),i=Function.prototype,a=r&&Object.getOwnPropertyDescriptor,A=o(i,"name"),s=A&&"something"===function(){}.name,c=A&&(!r||r&&a(i,"name").configurable);e.exports={EXISTS:A,PROPER:s,CONFIGURABLE:c}},1702:function(e,t,n){var r=n(4374),o=Function.prototype,i=o.bind,a=o.call,A=r&&i.bind(a,a);e.exports=r?function(e){return e&&A(e)}:function(e){return e&&function(){return a.apply(e,arguments)}}},5005:function(e,t,n){var r=n(7854),o=n(614),i=function(e){return o(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?i(r[e]):r[e]&&r[e][t]}},1246:function(e,t,n){var r=n(648),o=n(8173),i=n(7497),a=n(5112)("iterator");e.exports=function(e){if(null!=e)return o(e,a)||o(e,"@@iterator")||i[r(e)]}},8554:function(e,t,n){var r=n(7854),o=n(6916),i=n(9662),a=n(9670),A=n(6330),s=n(1246),c=r.TypeError;e.exports=function(e,t){var n=arguments.length<2?s(e):t;if(i(n))return a(o(n,e));throw c(A(e)+" is not iterable")}},8173:function(e,t,n){var r=n(9662);e.exports=function(e,t){var n=e[t];return null==n?void 0:r(n)}},647:function(e,t,n){var r=n(1702),o=n(7908),i=Math.floor,a=r("".charAt),A=r("".replace),s=r("".slice),c=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,u=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,r,l,f){var p=n+e.length,d=r.length,g=u;return void 0!==l&&(l=o(l),g=c),A(f,g,(function(o,A){var c;switch(a(A,0)){case"$":return"$";case"&":return e;case"`":return s(t,0,n);case"'":return s(t,p);case"<":c=l[s(A,1,-1)];break;default:var u=+A;if(0===u)return o;if(u>d){var f=i(u/10);return 0===f?o:f<=d?void 0===r[f-1]?a(A,1):r[f-1]+a(A,1):o}c=r[u-1]}return void 0===c?"":c}))}},7854:function(e,t,n){var r=function(e){return e&&e.Math==Math&&e};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},2597:function(e,t,n){var r=n(1702),o=n(7908),i=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return i(o(e),t)}},3501:function(e){e.exports={}},842:function(e,t,n){var r=n(7854);e.exports=function(e,t){var n=r.console;n&&n.error&&(1==arguments.length?n.error(e):n.error(e,t))}},490:function(e,t,n){var r=n(5005);e.exports=r("document","documentElement")},4664:function(e,t,n){var r=n(9781),o=n(7293),i=n(317);e.exports=!r&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},1179:function(e,t,n){var r=n(7854).Array,o=Math.abs,i=Math.pow,a=Math.floor,A=Math.log,s=Math.LN2;e.exports={pack:function(e,t,n){var c,u,l,f=r(n),p=8*n-t-1,d=(1<<p)-1,g=d>>1,h=23===t?i(2,-24)-i(2,-77):0,v=e<0||0===e&&1/e<0?1:0,m=0;for((e=o(e))!=e||e===1/0?(u=e!=e?1:0,c=d):(c=a(A(e)/s),e*(l=i(2,-c))<1&&(c--,l*=2),(e+=c+g>=1?h/l:h*i(2,1-g))*l>=2&&(c++,l/=2),c+g>=d?(u=0,c=d):c+g>=1?(u=(e*l-1)*i(2,t),c+=g):(u=e*i(2,g-1)*i(2,t),c=0));t>=8;)f[m++]=255&u,u/=256,t-=8;for(c=c<<t|u,p+=t;p>0;)f[m++]=255&c,c/=256,p-=8;return f[--m]|=128*v,f},unpack:function(e,t){var n,r=e.length,o=8*r-t-1,a=(1<<o)-1,A=a>>1,s=o-7,c=r-1,u=e[c--],l=127&u;for(u>>=7;s>0;)l=256*l+e[c--],s-=8;for(n=l&(1<<-s)-1,l>>=-s,s+=t;s>0;)n=256*n+e[c--],s-=8;if(0===l)l=1-A;else{if(l===a)return n?NaN:u?-1/0:1/0;n+=i(2,t),l-=A}return(u?-1:1)*n*i(2,l-t)}}},8361:function(e,t,n){var r=n(7854),o=n(1702),i=n(7293),a=n(4326),A=r.Object,s=o("".split);e.exports=i((function(){return!A("z").propertyIsEnumerable(0)}))?function(e){return"String"==a(e)?s(e,""):A(e)}:A},9587:function(e,t,n){var r=n(614),o=n(111),i=n(7674);e.exports=function(e,t,n){var a,A;return i&&r(a=t.constructor)&&a!==n&&o(A=a.prototype)&&A!==n.prototype&&i(e,A),e}},2788:function(e,t,n){var r=n(1702),o=n(614),i=n(5465),a=r(Function.toString);o(i.inspectSource)||(i.inspectSource=function(e){return a(e)}),e.exports=i.inspectSource},8340:function(e,t,n){var r=n(111),o=n(8880);e.exports=function(e,t){r(t)&&"cause"in t&&o(e,"cause",t.cause)}},2423:function(e,t,n){var r=n(2109),o=n(1702),i=n(3501),a=n(111),A=n(2597),s=n(3070).f,c=n(8006),u=n(1156),l=n(2050),f=n(9711),p=n(6677),d=!1,g=f("meta"),h=0,v=function(e){s(e,g,{value:{objectID:"O"+h++,weakData:{}}})},m=e.exports={enable:function(){m.enable=function(){},d=!0;var e=c.f,t=o([].splice),n={};n[g]=1,e(n).length&&(c.f=function(n){for(var r=e(n),o=0,i=r.length;o<i;o++)if(r[o]===g){t(r,o,1);break}return r},r({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:u.f}))},fastKey:function(e,t){if(!a(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!A(e,g)){if(!l(e))return"F";if(!t)return"E";v(e)}return e[g].objectID},getWeakData:function(e,t){if(!A(e,g)){if(!l(e))return!0;if(!t)return!1;v(e)}return e[g].weakData},onFreeze:function(e){return p&&d&&l(e)&&!A(e,g)&&v(e),e}};i[g]=!0},9909:function(e,t,n){var r,o,i,a=n(8536),A=n(7854),s=n(1702),c=n(111),u=n(8880),l=n(2597),f=n(5465),p=n(6200),d=n(3501),g="Object already initialized",h=A.TypeError,v=A.WeakMap;if(a||f.state){var m=f.state||(f.state=new v),C=s(m.get),y=s(m.has),b=s(m.set);r=function(e,t){if(y(m,e))throw new h(g);return t.facade=e,b(m,e,t),t},o=function(e){return C(m,e)||{}},i=function(e){return y(m,e)}}else{var w=p("state");d[w]=!0,r=function(e,t){if(l(e,w))throw new h(g);return t.facade=e,u(e,w,t),t},o=function(e){return l(e,w)?e[w]:{}},i=function(e){return l(e,w)}}e.exports={set:r,get:o,has:i,enforce:function(e){return i(e)?o(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!c(t)||(n=o(t)).type!==e)throw h("Incompatible receiver, "+e+" required");return n}}}},7659:function(e,t,n){var r=n(5112),o=n(7497),i=r("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||a[i]===e)}},3157:function(e,t,n){var r=n(4326);e.exports=Array.isArray||function(e){return"Array"==r(e)}},614:function(e){e.exports=function(e){return"function"==typeof e}},4411:function(e,t,n){var r=n(1702),o=n(7293),i=n(614),a=n(648),A=n(5005),s=n(2788),c=function(){},u=[],l=A("Reflect","construct"),f=/^\s*(?:class|function)\b/,p=r(f.exec),d=!f.exec(c),g=function(e){if(!i(e))return!1;try{return l(c,u,e),!0}catch(e){return!1}},h=function(e){if(!i(e))return!1;switch(a(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!p(f,s(e))}catch(e){return!0}};h.sham=!0,e.exports=!l||o((function(){var e;return g(g.call)||!g(Object)||!g((function(){e=!0}))||e}))?h:g},5032:function(e,t,n){var r=n(2597);e.exports=function(e){return void 0!==e&&(r(e,"value")||r(e,"writable"))}},4705:function(e,t,n){var r=n(7293),o=n(614),i=/#|\.prototype\./,a=function(e,t){var n=s[A(e)];return n==u||n!=c&&(o(t)?r(t):!!t)},A=a.normalize=function(e){return String(e).replace(i,".").toLowerCase()},s=a.data={},c=a.NATIVE="N",u=a.POLYFILL="P";e.exports=a},5988:function(e,t,n){var r=n(111),o=Math.floor;e.exports=Number.isInteger||function(e){return!r(e)&&isFinite(e)&&o(e)===e}},111:function(e,t,n){var r=n(614);e.exports=function(e){return"object"==typeof e?null!==e:r(e)}},1913:function(e){e.exports=!1},7850:function(e,t,n){var r=n(111),o=n(4326),i=n(5112)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==o(e))}},2190:function(e,t,n){var r=n(7854),o=n(5005),i=n(614),a=n(7976),A=n(3307),s=r.Object;e.exports=A?function(e){return"symbol"==typeof e}:function(e){var t=o("Symbol");return i(t)&&a(t.prototype,s(e))}},408:function(e,t,n){var r=n(7854),o=n(9974),i=n(6916),a=n(9670),A=n(6330),s=n(7659),c=n(6244),u=n(7976),l=n(8554),f=n(1246),p=n(9212),d=r.TypeError,g=function(e,t){this.stopped=e,this.result=t},h=g.prototype;e.exports=function(e,t,n){var r,v,m,C,y,b,w,E=n&&n.that,B=!(!n||!n.AS_ENTRIES),x=!(!n||!n.IS_ITERATOR),k=!(!n||!n.INTERRUPTED),I=o(t,E),S=function(e){return r&&p(r,"normal",e),new g(!0,e)},T=function(e){return B?(a(e),k?I(e[0],e[1],S):I(e[0],e[1])):k?I(e,S):I(e)};if(x)r=e;else{if(!(v=f(e)))throw d(A(e)+" is not iterable");if(s(v)){for(m=0,C=c(e);C>m;m++)if((y=T(e[m]))&&u(h,y))return y;return new g(!1)}r=l(e,v)}for(b=r.next;!(w=i(b,r)).done;){try{y=T(w.value)}catch(e){p(r,"throw",e)}if("object"==typeof y&&y&&u(h,y))return y}return new g(!1)}},9212:function(e,t,n){var r=n(6916),o=n(9670),i=n(8173);e.exports=function(e,t,n){var a,A;o(e);try{if(!(a=i(e,"return"))){if("throw"===t)throw n;return n}a=r(a,e)}catch(e){A=!0,a=e}if("throw"===t)throw n;if(A)throw a;return o(a),n}},3383:function(e,t,n){"use strict";var r,o,i,a=n(7293),A=n(614),s=n(30),c=n(9518),u=n(1320),l=n(5112),f=n(1913),p=l("iterator"),d=!1;[].keys&&("next"in(i=[].keys())?(o=c(c(i)))!==Object.prototype&&(r=o):d=!0),null==r||a((function(){var e={};return r[p].call(e)!==e}))?r={}:f&&(r=s(r)),A(r[p])||u(r,p,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:d}},7497:function(e){e.exports={}},6244:function(e,t,n){var r=n(7466);e.exports=function(e){return r(e.length)}},6736:function(e){var t=Math.expm1,n=Math.exp;e.exports=!t||t(10)>22025.465794806718||t(10)<22025.465794806718||-2e-17!=t(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:n(e)-1}:t},6130:function(e,t,n){var r=n(4310),o=Math.abs,i=Math.pow,a=i(2,-52),A=i(2,-23),s=i(2,127)*(2-A),c=i(2,-126);e.exports=Math.fround||function(e){var t,n,i=o(e),u=r(e);return i<c?u*(i/c/A+1/a-1/a)*c*A:(n=(t=(1+A/a)*i)-(t-i))>s||n!=n?u*(1/0):u*n}},202:function(e){var t=Math.log,n=Math.LOG10E;e.exports=Math.log10||function(e){return t(e)*n}},6513:function(e){var t=Math.log;e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:t(1+e)}},4310:function(e){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},5948:function(e,t,n){var r,o,i,a,A,s,c,u,l=n(7854),f=n(9974),p=n(1236).f,d=n(261).set,g=n(8334),h=n(1528),v=n(1036),m=n(5268),C=l.MutationObserver||l.WebKitMutationObserver,y=l.document,b=l.process,w=l.Promise,E=p(l,"queueMicrotask"),B=E&&E.value;B||(r=function(){var e,t;for(m&&(e=b.domain)&&e.exit();o;){t=o.fn,o=o.next;try{t()}catch(e){throw o?a():i=void 0,e}}i=void 0,e&&e.enter()},g||m||v||!C||!y?!h&&w&&w.resolve?((c=w.resolve(void 0)).constructor=w,u=f(c.then,c),a=function(){u(r)}):m?a=function(){b.nextTick(r)}:(d=f(d,l),a=function(){d(r)}):(A=!0,s=y.createTextNode(""),new C(r).observe(s,{characterData:!0}),a=function(){s.data=A=!A})),e.exports=B||function(e){var t={fn:e,next:void 0};i&&(i.next=t),o||(o=t,a()),i=t}},3366:function(e,t,n){var r=n(7854);e.exports=r.Promise},133:function(e,t,n){var r=n(7392),o=n(7293);e.exports=!!Object.getOwnPropertySymbols&&!o((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},590:function(e,t,n){var r=n(7293),o=n(5112),i=n(1913),a=o("iterator");e.exports=!r((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),i&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://").host||"#%D0%B1"!==new URL("http://a#").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},8536:function(e,t,n){var r=n(7854),o=n(614),i=n(2788),a=r.WeakMap;e.exports=o(a)&&/native code/.test(i(a))},8523:function(e,t,n){"use strict";var r=n(9662),o=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};e.exports.f=function(e){return new o(e)}},6277:function(e,t,n){var r=n(1340);e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:r(e)}},3929:function(e,t,n){var r=n(7854),o=n(7850),i=r.TypeError;e.exports=function(e){if(o(e))throw i("The method doesn't accept regular expressions");return e}},7023:function(e,t,n){var r=n(7854).isFinite;e.exports=Number.isFinite||function(e){return"number"==typeof e&&r(e)}},2814:function(e,t,n){var r=n(7854),o=n(7293),i=n(1702),a=n(1340),A=n(3111).trim,s=n(1361),c=i("".charAt),u=r.parseFloat,l=r.Symbol,f=l&&l.iterator,p=1/u(s+"-0")!=-1/0||f&&!o((function(){u(Object(f))}));e.exports=p?function(e){var t=A(a(e)),n=u(t);return 0===n&&"-"==c(t,0)?-0:n}:u},3009:function(e,t,n){var r=n(7854),o=n(7293),i=n(1702),a=n(1340),A=n(3111).trim,s=n(1361),c=r.parseInt,u=r.Symbol,l=u&&u.iterator,f=/^[+-]?0x/i,p=i(f.exec),d=8!==c(s+"08")||22!==c(s+"0x16")||l&&!o((function(){c(Object(l))}));e.exports=d?function(e,t){var n=A(a(e));return c(n,t>>>0||(p(f,n)?16:10))}:c},1574:function(e,t,n){"use strict";var r=n(9781),o=n(1702),i=n(6916),a=n(7293),A=n(1956),s=n(5181),c=n(5296),u=n(7908),l=n(8361),f=Object.assign,p=Object.defineProperty,d=o([].concat);e.exports=!f||a((function(){if(r&&1!==f({b:1},f(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),o="abcdefghijklmnopqrst";return e[n]=7,o.split("").forEach((function(e){t[e]=e})),7!=f({},e)[n]||A(f({},t)).join("")!=o}))?function(e,t){for(var n=u(e),o=arguments.length,a=1,f=s.f,p=c.f;o>a;)for(var g,h=l(arguments[a++]),v=f?d(A(h),f(h)):A(h),m=v.length,C=0;m>C;)g=v[C++],r&&!i(p,h,g)||(n[g]=h[g]);return n}:f},30:function(e,t,n){var r,o=n(9670),i=n(6048),a=n(748),A=n(3501),s=n(490),c=n(317),u=n(6200)("IE_PROTO"),l=function(){},f=function(e){return"<script>"+e+"<\/script>"},p=function(e){e.write(f("")),e.close();var t=e.parentWindow.Object;return e=null,t},d=function(){try{r=new ActiveXObject("htmlfile")}catch(e){}var e,t;d="undefined"!=typeof document?document.domain&&r?p(r):((t=c("iframe")).style.display="none",s.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(f("document.F=Object")),e.close(),e.F):p(r);for(var n=a.length;n--;)delete d.prototype[a[n]];return d()};A[u]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(l.prototype=o(e),n=new l,l.prototype=null,n[u]=e):n=d(),void 0===t?n:i.f(n,t)}},6048:function(e,t,n){var r=n(9781),o=n(3353),i=n(3070),a=n(9670),A=n(5656),s=n(1956);t.f=r&&!o?Object.defineProperties:function(e,t){a(e);for(var n,r=A(t),o=s(t),c=o.length,u=0;c>u;)i.f(e,n=o[u++],r[n]);return e}},3070:function(e,t,n){var r=n(7854),o=n(9781),i=n(4664),a=n(3353),A=n(9670),s=n(4948),c=r.TypeError,u=Object.defineProperty,l=Object.getOwnPropertyDescriptor;t.f=o?a?function(e,t,n){if(A(e),t=s(t),A(n),"function"==typeof e&&"prototype"===t&&"value"in n&&"writable"in n&&!n.writable){var r=l(e,t);r&&r.writable&&(e[t]=n.value,n={configurable:"configurable"in n?n.configurable:r.configurable,enumerable:"enumerable"in n?n.enumerable:r.enumerable,writable:!1})}return u(e,t,n)}:u:function(e,t,n){if(A(e),t=s(t),A(n),i)try{return u(e,t,n)}catch(e){}if("get"in n||"set"in n)throw c("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},1236:function(e,t,n){var r=n(9781),o=n(6916),i=n(5296),a=n(9114),A=n(5656),s=n(4948),c=n(2597),u=n(4664),l=Object.getOwnPropertyDescriptor;t.f=r?l:function(e,t){if(e=A(e),t=s(t),u)try{return l(e,t)}catch(e){}if(c(e,t))return a(!o(i.f,e,t),e[t])}},1156:function(e,t,n){var r=n(4326),o=n(5656),i=n(8006).f,a=n(1589),A="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return A&&"Window"==r(e)?function(e){try{return i(e)}catch(e){return a(A)}}(e):i(o(e))}},8006:function(e,t,n){var r=n(6324),o=n(748).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},5181:function(e,t){t.f=Object.getOwnPropertySymbols},9518:function(e,t,n){var r=n(7854),o=n(2597),i=n(614),a=n(7908),A=n(6200),s=n(8544),c=A("IE_PROTO"),u=r.Object,l=u.prototype;e.exports=s?u.getPrototypeOf:function(e){var t=a(e);if(o(t,c))return t[c];var n=t.constructor;return i(n)&&t instanceof n?n.prototype:t instanceof u?l:null}},2050:function(e,t,n){var r=n(7293),o=n(111),i=n(4326),a=n(7556),A=Object.isExtensible,s=r((function(){A(1)}));e.exports=s||a?function(e){return!!o(e)&&(!a||"ArrayBuffer"!=i(e))&&(!A||A(e))}:A},7976:function(e,t,n){var r=n(1702);e.exports=r({}.isPrototypeOf)},6324:function(e,t,n){var r=n(1702),o=n(2597),i=n(5656),a=n(1318).indexOf,A=n(3501),s=r([].push);e.exports=function(e,t){var n,r=i(e),c=0,u=[];for(n in r)!o(A,n)&&o(r,n)&&s(u,n);for(;t.length>c;)o(r,n=t[c++])&&(~a(u,n)||s(u,n));return u}},1956:function(e,t,n){var r=n(6324),o=n(748);e.exports=Object.keys||function(e){return r(e,o)}},5296:function(e,t){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,o=r&&!n.call({1:2},1);t.f=o?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},9026:function(e,t,n){"use strict";var r=n(1913),o=n(7854),i=n(7293),a=n(8008);e.exports=r||!i((function(){if(!(a&&a<535)){var e=Math.random();__defineSetter__.call(null,e,(function(){})),delete o[e]}}))},7674:function(e,t,n){var r=n(1702),o=n(9670),i=n(6077);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return o(n),i(r),t?e(n,r):n.__proto__=r,n}}():void 0)},4699:function(e,t,n){var r=n(9781),o=n(1702),i=n(1956),a=n(5656),A=o(n(5296).f),s=o([].push),c=function(e){return function(t){for(var n,o=a(t),c=i(o),u=c.length,l=0,f=[];u>l;)n=c[l++],r&&!A(o,n)||s(f,e?[n,o[n]]:o[n]);return f}};e.exports={entries:c(!0),values:c(!1)}},288:function(e,t,n){"use strict";var r=n(1694),o=n(648);e.exports=r?{}.toString:function(){return"[object "+o(this)+"]"}},2140:function(e,t,n){var r=n(7854),o=n(6916),i=n(614),a=n(111),A=r.TypeError;e.exports=function(e,t){var n,r;if("string"===t&&i(n=e.toString)&&!a(r=o(n,e)))return r;if(i(n=e.valueOf)&&!a(r=o(n,e)))return r;if("string"!==t&&i(n=e.toString)&&!a(r=o(n,e)))return r;throw A("Can't convert object to primitive value")}},3887:function(e,t,n){var r=n(5005),o=n(1702),i=n(8006),a=n(5181),A=n(9670),s=o([].concat);e.exports=r("Reflect","ownKeys")||function(e){var t=i.f(A(e)),n=a.f;return n?s(t,n(e)):t}},857:function(e,t,n){var r=n(7854);e.exports=r},2534:function(e){e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},9478:function(e,t,n){var r=n(9670),o=n(111),i=n(8523);e.exports=function(e,t){if(r(e),o(t)&&t.constructor===e)return t;var n=i.f(e);return(0,n.resolve)(t),n.promise}},8572:function(e){var t=function(){this.head=null,this.tail=null};t.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}},e.exports=t},2248:function(e,t,n){var r=n(1320);e.exports=function(e,t,n){for(var o in t)r(e,o,t[o],n);return e}},1320:function(e,t,n){var r=n(7854),o=n(614),i=n(2597),a=n(8880),A=n(3505),s=n(2788),c=n(9909),u=n(6530).CONFIGURABLE,l=c.get,f=c.enforce,p=String(String).split("String");(e.exports=function(e,t,n,s){var c,l=!!s&&!!s.unsafe,d=!!s&&!!s.enumerable,g=!!s&&!!s.noTargetGet,h=s&&void 0!==s.name?s.name:t;o(n)&&("Symbol("===String(h).slice(0,7)&&(h="["+String(h).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!i(n,"name")||u&&n.name!==h)&&a(n,"name",h),(c=f(n)).source||(c.source=p.join("string"==typeof h?h:""))),e!==r?(l?!g&&e[t]&&(d=!0):delete e[t],d?e[t]=n:a(e,t,n)):d?e[t]=n:A(t,n)})(Function.prototype,"toString",(function(){return o(this)&&l(this).source||s(this)}))},7651:function(e,t,n){var r=n(7854),o=n(6916),i=n(9670),a=n(614),A=n(4326),s=n(2261),c=r.TypeError;e.exports=function(e,t){var n=e.exec;if(a(n)){var r=o(n,e,t);return null!==r&&i(r),r}if("RegExp"===A(e))return o(s,e,t);throw c("RegExp#exec called on incompatible receiver")}},2261:function(e,t,n){"use strict";var r,o,i=n(6916),a=n(1702),A=n(1340),s=n(7066),c=n(2999),u=n(2309),l=n(30),f=n(9909).get,p=n(9441),d=n(7168),g=u("native-string-replace",String.prototype.replace),h=RegExp.prototype.exec,v=h,m=a("".charAt),C=a("".indexOf),y=a("".replace),b=a("".slice),w=(o=/b*/g,i(h,r=/a/,"a"),i(h,o,"a"),0!==r.lastIndex||0!==o.lastIndex),E=c.BROKEN_CARET,B=void 0!==/()??/.exec("")[1];(w||B||E||p||d)&&(v=function(e){var t,n,r,o,a,c,u,p=this,d=f(p),x=A(e),k=d.raw;if(k)return k.lastIndex=p.lastIndex,t=i(v,k,x),p.lastIndex=k.lastIndex,t;var I=d.groups,S=E&&p.sticky,T=i(s,p),L=p.source,R=0,M=x;if(S&&(T=y(T,"y",""),-1===C(T,"g")&&(T+="g"),M=b(x,p.lastIndex),p.lastIndex>0&&(!p.multiline||p.multiline&&"\n"!==m(x,p.lastIndex-1))&&(L="(?: "+L+")",M=" "+M,R++),n=new RegExp("^(?:"+L+")",T)),B&&(n=new RegExp("^"+L+"$(?!\\s)",T)),w&&(r=p.lastIndex),o=i(h,S?n:p,M),S?o?(o.input=b(o.input,R),o[0]=b(o[0],R),o.index=p.lastIndex,p.lastIndex+=o[0].length):p.lastIndex=0:w&&o&&(p.lastIndex=p.global?o.index+o[0].length:r),B&&o&&o.length>1&&i(g,o[0],n,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(o[a]=void 0)})),o&&I)for(o.groups=c=l(null),a=0;a<I.length;a++)c[(u=I[a])[0]]=o[u[1]];return o}),e.exports=v},7066:function(e,t,n){"use strict";var r=n(9670);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},2999:function(e,t,n){var r=n(7293),o=n(7854).RegExp,i=r((function(){var e=o("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),a=i||r((function(){return!o("a","y").sticky})),A=i||r((function(){var e=o("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:A,MISSED_STICKY:a,UNSUPPORTED_Y:i}},9441:function(e,t,n){var r=n(7293),o=n(7854).RegExp;e.exports=r((function(){var e=o(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},7168:function(e,t,n){var r=n(7293),o=n(7854).RegExp;e.exports=r((function(){var e=o("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},4488:function(e,t,n){var r=n(7854).TypeError;e.exports=function(e){if(null==e)throw r("Can't call method on "+e);return e}},1150:function(e){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},3505:function(e,t,n){var r=n(7854),o=Object.defineProperty;e.exports=function(e,t){try{o(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},6340:function(e,t,n){"use strict";var r=n(5005),o=n(3070),i=n(5112),a=n(9781),A=i("species");e.exports=function(e){var t=r(e),n=o.f;a&&t&&!t[A]&&n(t,A,{configurable:!0,get:function(){return this}})}},8003:function(e,t,n){var r=n(3070).f,o=n(2597),i=n(5112)("toStringTag");e.exports=function(e,t,n){e&&!n&&(e=e.prototype),e&&!o(e,i)&&r(e,i,{configurable:!0,value:t})}},6200:function(e,t,n){var r=n(2309),o=n(9711),i=r("keys");e.exports=function(e){return i[e]||(i[e]=o(e))}},5465:function(e,t,n){var r=n(7854),o=n(3505),i="__core-js_shared__",a=r[i]||o(i,{});e.exports=a},2309:function(e,t,n){var r=n(1913),o=n(5465);(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.21.0",mode:r?"pure":"global",copyright:" 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.0/LICENSE",source:"https://github.com/zloirock/core-js"})},6707:function(e,t,n){var r=n(9670),o=n(9483),i=n(5112)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||null==(n=r(a)[i])?t:o(n)}},3429:function(e,t,n){var r=n(7293);e.exports=function(e){return r((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},8710:function(e,t,n){var r=n(1702),o=n(9303),i=n(1340),a=n(4488),A=r("".charAt),s=r("".charCodeAt),c=r("".slice),u=function(e){return function(t,n){var r,u,l=i(a(t)),f=o(n),p=l.length;return f<0||f>=p?e?"":void 0:(r=s(l,f))<55296||r>56319||f+1===p||(u=s(l,f+1))<56320||u>57343?e?A(l,f):r:e?c(l,f,f+2):u-56320+(r-55296<<10)+65536}};e.exports={codeAt:u(!1),charAt:u(!0)}},7061:function(e,t,n){var r=n(8113);e.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(r)},6650:function(e,t,n){var r=n(1702),o=n(7466),i=n(1340),a=n(8415),A=n(4488),s=r(a),c=r("".slice),u=Math.ceil,l=function(e){return function(t,n,r){var a,l,f=i(A(t)),p=o(n),d=f.length,g=void 0===r?" ":i(r);return p<=d||""==g?f:((l=s(g,u((a=p-d)/g.length))).length>a&&(l=c(l,0,a)),e?f+l:l+f)}};e.exports={start:l(!1),end:l(!0)}},3197:function(e,t,n){"use strict";var r=n(7854),o=n(1702),i=2147483647,a=/[^\0-\u007E]/,A=/[.\u3002\uFF0E\uFF61]/g,s="Overflow: input needs wider integers to process",c=r.RangeError,u=o(A.exec),l=Math.floor,f=String.fromCharCode,p=o("".charCodeAt),d=o([].join),g=o([].push),h=o("".replace),v=o("".split),m=o("".toLowerCase),C=function(e){return e+22+75*(e<26)},y=function(e,t,n){var r=0;for(e=n?l(e/700):e>>1,e+=l(e/t);e>455;)e=l(e/35),r+=36;return l(r+36*e/(e+38))},b=function(e){var t=[];e=function(e){for(var t=[],n=0,r=e.length;n<r;){var o=p(e,n++);if(o>=55296&&o<=56319&&n<r){var i=p(e,n++);56320==(64512&i)?g(t,((1023&o)<<10)+(1023&i)+65536):(g(t,o),n--)}else g(t,o)}return t}(e);var n,r,o=e.length,a=128,A=0,u=72;for(n=0;n<e.length;n++)(r=e[n])<128&&g(t,f(r));var h=t.length,v=h;for(h&&g(t,"-");v<o;){var m=i;for(n=0;n<e.length;n++)(r=e[n])>=a&&r<m&&(m=r);var b=v+1;if(m-a>l((i-A)/b))throw c(s);for(A+=(m-a)*b,a=m,n=0;n<e.length;n++){if((r=e[n])<a&&++A>i)throw c(s);if(r==a){for(var w=A,E=36;;){var B=E<=u?1:E>=u+26?26:E-u;if(w<B)break;var x=w-B,k=36-B;g(t,f(C(B+x%k))),w=l(x/k),E+=36}g(t,f(C(w))),u=y(A,b,v==h),A=0,v++}}A++,a++}return d(t,"")};e.exports=function(e){var t,n,r=[],o=v(h(m(e),A,"."),".");for(t=0;t<o.length;t++)n=o[t],g(r,u(a,n)?"xn--"+b(n):n);return d(r,".")}},8415:function(e,t,n){"use strict";var r=n(7854),o=n(9303),i=n(1340),a=n(4488),A=r.RangeError;e.exports=function(e){var t=i(a(this)),n="",r=o(e);if(r<0||r==1/0)throw A("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n}},6091:function(e,t,n){var r=n(6530).PROPER,o=n(7293),i=n(1361);e.exports=function(e){return o((function(){return!!i[e]()||" "!==" "[e]()||r&&i[e].name!==e}))}},3111:function(e,t,n){var r=n(1702),o=n(4488),i=n(1340),a=n(1361),A=r("".replace),s="["+a+"]",c=RegExp("^"+s+s+"*"),u=RegExp(s+s+"*$"),l=function(e){return function(t){var n=i(o(t));return 1&e&&(n=A(n,c,"")),2&e&&(n=A(n,u,"")),n}};e.exports={start:l(1),end:l(2),trim:l(3)}},261:function(e,t,n){var r,o,i,a,A=n(7854),s=n(2104),c=n(9974),u=n(614),l=n(2597),f=n(7293),p=n(490),d=n(206),g=n(317),h=n(8053),v=n(8334),m=n(5268),C=A.setImmediate,y=A.clearImmediate,b=A.process,w=A.Dispatch,E=A.Function,B=A.MessageChannel,x=A.String,k=0,I={};try{r=A.location}catch(e){}var S=function(e){if(l(I,e)){var t=I[e];delete I[e],t()}},T=function(e){return function(){S(e)}},L=function(e){S(e.data)},R=function(e){A.postMessage(x(e),r.protocol+"//"+r.host)};C&&y||(C=function(e){h(arguments.length,1);var t=u(e)?e:E(e),n=d(arguments,1);return I[++k]=function(){s(t,void 0,n)},o(k),k},y=function(e){delete I[e]},m?o=function(e){b.nextTick(T(e))}:w&&w.now?o=function(e){w.now(T(e))}:B&&!v?(a=(i=new B).port2,i.port1.onmessage=L,o=c(a.postMessage,a)):A.addEventListener&&u(A.postMessage)&&!A.importScripts&&r&&"file:"!==r.protocol&&!f(R)?(o=R,A.addEventListener("message",L,!1)):o="onreadystatechange"in g("script")?function(e){p.appendChild(g("script")).onreadystatechange=function(){p.removeChild(this),S(e)}}:function(e){setTimeout(T(e),0)}),e.exports={set:C,clear:y}},863:function(e,t,n){var r=n(1702);e.exports=r(1..valueOf)},1400:function(e,t,n){var r=n(9303),o=Math.max,i=Math.min;e.exports=function(e,t){var n=r(e);return n<0?o(n+t,0):i(n,t)}},7067:function(e,t,n){var r=n(7854),o=n(9303),i=n(7466),a=r.RangeError;e.exports=function(e){if(void 0===e)return 0;var t=o(e),n=i(t);if(t!==n)throw a("Wrong length or index");return n}},5656:function(e,t,n){var r=n(8361),o=n(4488);e.exports=function(e){return r(o(e))}},9303:function(e){var t=Math.ceil,n=Math.floor;e.exports=function(e){var r=+e;return r!=r||0===r?0:(r>0?n:t)(r)}},7466:function(e,t,n){var r=n(9303),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},7908:function(e,t,n){var r=n(7854),o=n(4488),i=r.Object;e.exports=function(e){return i(o(e))}},4590:function(e,t,n){var r=n(7854),o=n(3002),i=r.RangeError;e.exports=function(e,t){var n=o(e);if(n%t)throw i("Wrong offset");return n}},3002:function(e,t,n){var r=n(7854),o=n(9303),i=r.RangeError;e.exports=function(e){var t=o(e);if(t<0)throw i("The argument can't be less than 0");return t}},7593:function(e,t,n){var r=n(7854),o=n(6916),i=n(111),a=n(2190),A=n(8173),s=n(2140),c=n(5112),u=r.TypeError,l=c("toPrimitive");e.exports=function(e,t){if(!i(e)||a(e))return e;var n,r=A(e,l);if(r){if(void 0===t&&(t="default"),n=o(r,e,t),!i(n)||a(n))return n;throw u("Can't convert object to primitive value")}return void 0===t&&(t="number"),s(e,t)}},4948:function(e,t,n){var r=n(7593),o=n(2190);e.exports=function(e){var t=r(e,"string");return o(t)?t:t+""}},1694:function(e,t,n){var r={};r[n(5112)("toStringTag")]="z",e.exports="[object z]"===String(r)},1340:function(e,t,n){var r=n(7854),o=n(648),i=r.String;e.exports=function(e){if("Symbol"===o(e))throw TypeError("Cannot convert a Symbol value to a string");return i(e)}},4038:function(e,t,n){var r=n(5268);e.exports=function(e){try{if(r)return Function('return require("'+e+'")')()}catch(e){}}},6330:function(e,t,n){var r=n(7854).String;e.exports=function(e){try{return r(e)}catch(e){return"Object"}}},9843:function(e,t,n){"use strict";var r=n(2109),o=n(7854),i=n(6916),a=n(9781),A=n(3832),s=n(260),c=n(3331),u=n(5787),l=n(9114),f=n(8880),p=n(5988),d=n(7466),g=n(7067),h=n(4590),v=n(4948),m=n(2597),C=n(648),y=n(111),b=n(2190),w=n(30),E=n(7976),B=n(7674),x=n(8006).f,k=n(7321),I=n(2092).forEach,S=n(6340),T=n(3070),L=n(1236),R=n(9909),M=n(9587),O=R.get,Q=R.set,D=T.f,P=L.f,F=Math.round,U=o.RangeError,N=c.ArrayBuffer,W=N.prototype,j=c.DataView,Y=s.NATIVE_ARRAY_BUFFER_VIEWS,G=s.TYPED_ARRAY_CONSTRUCTOR,z=s.TYPED_ARRAY_TAG,_=s.TypedArray,V=s.TypedArrayPrototype,H=s.aTypedArrayConstructor,J=s.isTypedArray,Z="BYTES_PER_ELEMENT",K="Wrong length",X=function(e,t){H(e);for(var n=0,r=t.length,o=new e(r);r>n;)o[n]=t[n++];return o},q=function(e,t){D(e,t,{get:function(){return O(this)[t]}})},$=function(e){var t;return E(W,e)||"ArrayBuffer"==(t=C(e))||"SharedArrayBuffer"==t},ee=function(e,t){return J(e)&&!b(t)&&t in e&&p(+t)&&t>=0},te=function(e,t){return t=v(t),ee(e,t)?l(2,e[t]):P(e,t)},ne=function(e,t,n){return t=v(t),!(ee(e,t)&&y(n)&&m(n,"value"))||m(n,"get")||m(n,"set")||n.configurable||m(n,"writable")&&!n.writable||m(n,"enumerable")&&!n.enumerable?D(e,t,n):(e[t]=n.value,e)};a?(Y||(L.f=te,T.f=ne,q(V,"buffer"),q(V,"byteOffset"),q(V,"byteLength"),q(V,"length")),r({target:"Object",stat:!0,forced:!Y},{getOwnPropertyDescriptor:te,defineProperty:ne}),e.exports=function(e,t,n){var a=e.match(/\d+$/)[0]/8,s=e+(n?"Clamped":"")+"Array",c="get"+e,l="set"+e,p=o[s],v=p,m=v&&v.prototype,C={},b=function(e,t){D(e,t,{get:function(){return function(e,t){var n=O(e);return n.view[c](t*a+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,r){var o=O(e);n&&(r=(r=F(r))<0?0:r>255?255:255&r),o.view[l](t*a+o.byteOffset,r,!0)}(this,t,e)},enumerable:!0})};Y?A&&(v=t((function(e,t,n,r){return u(e,m),M(y(t)?$(t)?void 0!==r?new p(t,h(n,a),r):void 0!==n?new p(t,h(n,a)):new p(t):J(t)?X(v,t):i(k,v,t):new p(g(t)),e,v)})),B&&B(v,_),I(x(p),(function(e){e in v||f(v,e,p[e])})),v.prototype=m):(v=t((function(e,t,n,r){u(e,m);var o,A,s,c=0,l=0;if(y(t)){if(!$(t))return J(t)?X(v,t):i(k,v,t);o=t,l=h(n,a);var f=t.byteLength;if(void 0===r){if(f%a)throw U(K);if((A=f-l)<0)throw U(K)}else if((A=d(r)*a)+l>f)throw U(K);s=A/a}else s=g(t),o=new N(A=s*a);for(Q(e,{buffer:o,byteOffset:l,byteLength:A,length:s,view:new j(o)});c<s;)b(e,c++)})),B&&B(v,_),m=v.prototype=w(V)),m.constructor!==v&&f(m,"constructor",v),f(m,G,v),z&&f(m,z,s),C[s]=v,r({global:!0,forced:v!=p,sham:!Y},C),Z in v||f(v,Z,a),Z in m||f(m,Z,a),S(s)}):e.exports=function(){}},3832:function(e,t,n){var r=n(7854),o=n(7293),i=n(7072),a=n(260).NATIVE_ARRAY_BUFFER_VIEWS,A=r.ArrayBuffer,s=r.Int8Array;e.exports=!a||!o((function(){s(1)}))||!o((function(){new s(-1)}))||!i((function(e){new s,new s(null),new s(1.5),new s(e)}),!0)||o((function(){return 1!==new s(new A(2),1,void 0).length}))},3074:function(e,t,n){var r=n(7745),o=n(6304);e.exports=function(e,t){return r(o(e),t)}},7321:function(e,t,n){var r=n(9974),o=n(6916),i=n(9483),a=n(7908),A=n(6244),s=n(8554),c=n(1246),u=n(7659),l=n(260).aTypedArrayConstructor;e.exports=function(e){var t,n,f,p,d,g,h=i(this),v=a(e),m=arguments.length,C=m>1?arguments[1]:void 0,y=void 0!==C,b=c(v);if(b&&!u(b))for(g=(d=s(v,b)).next,v=[];!(p=o(g,d)).done;)v.push(p.value);for(y&&m>2&&(C=r(C,arguments[2])),n=A(v),f=new(l(h))(n),t=0;n>t;t++)f[t]=y?C(v[t],t):v[t];return f}},6304:function(e,t,n){var r=n(260),o=n(6707),i=r.TYPED_ARRAY_CONSTRUCTOR,a=r.aTypedArrayConstructor;e.exports=function(e){return a(o(e,e[i]))}},9711:function(e,t,n){var r=n(1702),o=0,i=Math.random(),a=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++o+i,36)}},3307:function(e,t,n){var r=n(133);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:function(e,t,n){var r=n(9781),o=n(7293);e.exports=r&&o((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},8053:function(e,t,n){var r=n(7854).TypeError;e.exports=function(e,t){if(e<t)throw r("Not enough arguments");return e}},6061:function(e,t,n){var r=n(5112);t.f=r},5112:function(e,t,n){var r=n(7854),o=n(2309),i=n(2597),a=n(9711),A=n(133),s=n(3307),c=o("wks"),u=r.Symbol,l=u&&u.for,f=s?u:u&&u.withoutSetter||a;e.exports=function(e){if(!i(c,e)||!A&&"string"!=typeof c[e]){var t="Symbol."+e;A&&i(u,e)?c[e]=u[e]:c[e]=s&&l?l(t):f(t)}return c[e]}},1361:function(e){e.exports="\t\n\v\f\r  \u2028\u2029\ufeff"},9191:function(e,t,n){"use strict";var r=n(5005),o=n(2597),i=n(8880),a=n(7976),A=n(7674),s=n(9920),c=n(9587),u=n(6277),l=n(8340),f=n(7741),p=n(2914),d=n(1913);e.exports=function(e,t,n,g){var h=g?2:1,v=e.split("."),m=v[v.length-1],C=r.apply(null,v);if(C){var y=C.prototype;if(!d&&o(y,"cause")&&delete y.cause,!n)return C;var b=r("Error"),w=t((function(e,t){var n=u(g?t:e,void 0),r=g?new C(e):new C;return void 0!==n&&i(r,"message",n),p&&i(r,"stack",f(r.stack,2)),this&&a(y,this)&&c(r,this,w),arguments.length>h&&l(r,arguments[h]),r}));if(w.prototype=y,"Error"!==m&&(A?A(w,b):s(w,b,{name:!0})),s(w,C),!d)try{y.name!==m&&i(y,"name",m),y.constructor=w}catch(e){}return w}}},2120:function(e,t,n){var r=n(2109),o=n(5005),i=n(2104),a=n(7293),A=n(9191),s="AggregateError",c=o(s),u=!a((function(){return 1!==c([1]).errors[0]}))&&a((function(){return 7!==c([1],s,{cause:7}).cause}));r({global:!0,forced:u},{AggregateError:A(s,(function(e){return function(t,n){return i(e,this,arguments)}}),u,!0)})},9170:function(e,t,n){"use strict";var r=n(2109),o=n(7854),i=n(7976),a=n(9518),A=n(7674),s=n(9920),c=n(30),u=n(8880),l=n(9114),f=n(7741),p=n(8340),d=n(408),g=n(6277),h=n(5112),v=n(2914),m=h("toStringTag"),C=o.Error,y=[].push,b=function(e,t){var n,r=arguments.length>2?arguments[2]:void 0,o=i(w,this);A?n=A(new C,o?a(this):w):(n=o?this:c(w),u(n,m,"Error")),void 0!==t&&u(n,"message",g(t)),v&&u(n,"stack",f(n.stack,1)),p(n,r);var s=[];return d(e,y,{that:s}),u(n,"errors",s),n};A?A(b,C):s(b,C,{name:!0});var w=b.prototype=c(C.prototype,{constructor:l(1,b),message:l(1,""),name:l(1,"AggregateError")});r({global:!0},{AggregateError:b})},8264:function(e,t,n){"use strict";var r=n(2109),o=n(7854),i=n(3331),a=n(6340),A=i.ArrayBuffer;r({global:!0,forced:o.ArrayBuffer!==A},{ArrayBuffer:A}),a("ArrayBuffer")},6938:function(e,t,n){var r=n(2109),o=n(260);r({target:"ArrayBuffer",stat:!0,forced:!o.NATIVE_ARRAY_BUFFER_VIEWS},{isView:o.isView})},9575:function(e,t,n){"use strict";var r=n(2109),o=n(1702),i=n(7293),a=n(3331),A=n(9670),s=n(1400),c=n(7466),u=n(6707),l=a.ArrayBuffer,f=a.DataView,p=f.prototype,d=o(l.prototype.slice),g=o(p.getUint8),h=o(p.setUint8);r({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:i((function(){return!new l(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(d&&void 0===t)return d(A(this),e);for(var n=A(this).byteLength,r=s(e,n),o=s(void 0===t?n:t,n),i=new(u(this,l))(c(o-r)),a=new f(this),p=new f(i),v=0;r<o;)h(p,v++,g(a,r++));return i}})},2262:function(e,t,n){"use strict";var r=n(2109),o=n(7908),i=n(6244),a=n(9303),A=n(1223);r({target:"Array",proto:!0},{at:function(e){var t=o(this),n=i(t),r=a(e),A=r>=0?r:n+r;return A<0||A>=n?void 0:t[A]}}),A("at")},2222:function(e,t,n){"use strict";var r=n(2109),o=n(7854),i=n(7293),a=n(3157),A=n(111),s=n(7908),c=n(6244),u=n(6135),l=n(5417),f=n(1194),p=n(5112),d=n(7392),g=p("isConcatSpreadable"),h=9007199254740991,v="Maximum allowed index exceeded",m=o.TypeError,C=d>=51||!i((function(){var e=[];return e[g]=!1,e.concat()[0]!==e})),y=f("concat"),b=function(e){if(!A(e))return!1;var t=e[g];return void 0!==t?!!t:a(e)};r({target:"Array",proto:!0,forced:!C||!y},{concat:function(e){var t,n,r,o,i,a=s(this),A=l(a,0),f=0;for(t=-1,r=arguments.length;t<r;t++)if(b(i=-1===t?a:arguments[t])){if(f+(o=c(i))>h)throw m(v);for(n=0;n<o;n++,f++)n in i&&u(A,f,i[n])}else{if(f>=h)throw m(v);u(A,f++,i)}return A.length=f,A}})},545:function(e,t,n){var r=n(2109),o=n(1048),i=n(1223);r({target:"Array",proto:!0},{copyWithin:o}),i("copyWithin")},6541:function(e,t,n){"use strict";var r=n(2109),o=n(2092).every;r({target:"Array",proto:!0,forced:!n(2133)("every")},{every:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},3290:function(e,t,n){var r=n(2109),o=n(1285),i=n(1223);r({target:"Array",proto:!0},{fill:o}),i("fill")},7327:function(e,t,n){"use strict";var r=n(2109),o=n(2092).filter;r({target:"Array",proto:!0,forced:!n(1194)("filter")},{filter:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},4553:function(e,t,n){"use strict";var r=n(2109),o=n(2092).findIndex,i=n(1223),a="findIndex",A=!0;a in[]&&Array(1).findIndex((function(){A=!1})),r({target:"Array",proto:!0,forced:A},{findIndex:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i(a)},9826:function(e,t,n){"use strict";var r=n(2109),o=n(2092).find,i=n(1223),a="find",A=!0;a in[]&&Array(1).find((function(){A=!1})),r({target:"Array",proto:!0,forced:A},{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i(a)},6535:function(e,t,n){"use strict";var r=n(2109),o=n(6790),i=n(9662),a=n(7908),A=n(6244),s=n(5417);r({target:"Array",proto:!0},{flatMap:function(e){var t,n=a(this),r=A(n);return i(e),(t=s(n,0)).length=o(t,n,n,r,0,1,e,arguments.length>1?arguments[1]:void 0),t}})},4944:function(e,t,n){"use strict";var r=n(2109),o=n(6790),i=n(7908),a=n(6244),A=n(9303),s=n(5417);r({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=i(this),n=a(t),r=s(t,0);return r.length=o(r,t,t,n,0,void 0===e?1:A(e)),r}})},9554:function(e,t,n){"use strict";var r=n(2109),o=n(8533);r({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},1038:function(e,t,n){var r=n(2109),o=n(8457);r({target:"Array",stat:!0,forced:!n(7072)((function(e){Array.from(e)}))},{from:o})},6699:function(e,t,n){"use strict";var r=n(2109),o=n(1318).includes,i=n(1223);r({target:"Array",proto:!0},{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i("includes")},2772:function(e,t,n){"use strict";var r=n(2109),o=n(1702),i=n(1318).indexOf,a=n(2133),A=o([].indexOf),s=!!A&&1/A([1],1,-0)<0,c=a("indexOf");r({target:"Array",proto:!0,forced:s||!c},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return s?A(this,e,t)||0:i(this,e,t)}})},9753:function(e,t,n){n(2109)({target:"Array",stat:!0},{isArray:n(3157)})},6992:function(e,t,n){"use strict";var r=n(5656),o=n(1223),i=n(7497),a=n(9909),A=n(3070).f,s=n(654),c=n(1913),u=n(9781),l="Array Iterator",f=a.set,p=a.getterFor(l);e.exports=s(Array,"Array",(function(e,t){f(this,{type:l,target:r(e),index:0,kind:t})}),(function(){var e=p(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values");var d=i.Arguments=i.Array;if(o("keys"),o("values"),o("entries"),!c&&u&&"values"!==d.name)try{A(d,"name",{value:"values"})}catch(e){}},9600:function(e,t,n){"use strict";var r=n(2109),o=n(1702),i=n(8361),a=n(5656),A=n(2133),s=o([].join),c=i!=Object,u=A("join",",");r({target:"Array",proto:!0,forced:c||!u},{join:function(e){return s(a(this),void 0===e?",":e)}})},4986:function(e,t,n){var r=n(2109),o=n(6583);r({target:"Array",proto:!0,forced:o!==[].lastIndexOf},{lastIndexOf:o})},1249:function(e,t,n){"use strict";var r=n(2109),o=n(2092).map;r({target:"Array",proto:!0,forced:!n(1194)("map")},{map:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},6572:function(e,t,n){"use strict";var r=n(2109),o=n(7854),i=n(7293),a=n(4411),A=n(6135),s=o.Array;r({target:"Array",stat:!0,forced:i((function(){function e(){}return!(s.of.call(e)instanceof e)}))},{of:function(){for(var e=0,t=arguments.length,n=new(a(this)?this:s)(t);t>e;)A(n,e,arguments[e++]);return n.length=t,n}})},6644:function(e,t,n){"use strict";var r=n(2109),o=n(3671).right,i=n(2133),a=n(7392),A=n(5268);r({target:"Array",proto:!0,forced:!i("reduceRight")||!A&&a>79&&a<83},{reduceRight:function(e){return o(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},5827:function(e,t,n){"use strict";var r=n(2109),o=n(3671).left,i=n(2133),a=n(7392),A=n(5268);r({target:"Array",proto:!0,forced:!i("reduce")||!A&&a>79&&a<83},{reduce:function(e){var t=arguments.length;return o(this,e,t,t>1?arguments[1]:void 0)}})},5069:function(e,t,n){"use strict";var r=n(2109),o=n(1702),i=n(3157),a=o([].reverse),A=[1,2];r({target:"Array",proto:!0,forced:String(A)===String(A.reverse())},{reverse:function(){return i(this)&&(this.length=this.length),a(this)}})},7042:function(e,t,n){"use strict";var r=n(2109),o=n(7854),i=n(3157),a=n(4411),A=n(111),s=n(1400),c=n(6244),u=n(5656),l=n(6135),f=n(5112),p=n(1194),d=n(206),g=p("slice"),h=f("species"),v=o.Array,m=Math.max;r({target:"Array",proto:!0,forced:!g},{slice:function(e,t){var n,r,o,f=u(this),p=c(f),g=s(e,p),C=s(void 0===t?p:t,p);if(i(f)&&(n=f.constructor,(a(n)&&(n===v||i(n.prototype))||A(n)&&null===(n=n[h]))&&(n=void 0),n===v||void 0===n))return d(f,g,C);for(r=new(void 0===n?v:n)(m(C-g,0)),o=0;g<C;g++,o++)g in f&&l(r,o,f[g]);return r.length=o,r}})},5212:function(e,t,n){"use strict";var r=n(2109),o=n(2092).some;r({target:"Array",proto:!0,forced:!n(2133)("some")},{some:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},2707:function(e,t,n){"use strict";var r=n(2109),o=n(1702),i=n(9662),a=n(7908),A=n(6244),s=n(1340),c=n(7293),u=n(4362),l=n(2133),f=n(8886),p=n(256),d=n(7392),g=n(8008),h=[],v=o(h.sort),m=o(h.push),C=c((function(){h.sort(void 0)})),y=c((function(){h.sort(null)})),b=l("sort"),w=!c((function(){if(d)return d<70;if(!(f&&f>3)){if(p)return!0;if(g)return g<603;var e,t,n,r,o="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)h.push({k:t+r,v:n})}for(h.sort((function(e,t){return t.v-e.v})),r=0;r<h.length;r++)t=h[r].k.charAt(0),o.charAt(o.length-1)!==t&&(o+=t);return"DGBEFHACIJK"!==o}}));r({target:"Array",proto:!0,forced:C||!y||!b||!w},{sort:function(e){void 0!==e&&i(e);var t=a(this);if(w)return void 0===e?v(t):v(t,e);var n,r,o=[],c=A(t);for(r=0;r<c;r++)r in t&&m(o,t[r]);for(u(o,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:s(t)>s(n)?1:-1}}(e)),n=o.length,r=0;r<n;)t[r]=o[r++];for(;r<c;)delete t[r++];return t}})},8706:function(e,t,n){n(6340)("Array")},561:function(e,t,n){"use strict";var r=n(2109),o=n(7854),i=n(1400),a=n(9303),A=n(6244),s=n(7908),c=n(5417),u=n(6135),l=n(1194)("splice"),f=o.TypeError,p=Math.max,d=Math.min,g=9007199254740991,h="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!l},{splice:function(e,t){var n,r,o,l,v,m,C=s(this),y=A(C),b=i(e,y),w=arguments.length;if(0===w?n=r=0:1===w?(n=0,r=y-b):(n=w-2,r=d(p(a(t),0),y-b)),y+n-r>g)throw f(h);for(o=c(C,r),l=0;l<r;l++)(v=b+l)in C&&u(o,l,C[v]);if(o.length=r,n<r){for(l=b;l<y-r;l++)m=l+n,(v=l+r)in C?C[m]=C[v]:delete C[m];for(l=y;l>y-r+n;l--)delete C[l-1]}else if(n>r)for(l=y-r;l>b;l--)m=l+n-1,(v=l+r-1)in C?C[m]=C[v]:delete C[m];for(l=0;l<n;l++)C[l+b]=arguments[l+2];return C.length=y-r+n,o}})},9244:function(e,t,n){n(1223)("flatMap")},3792:function(e,t,n){n(1223)("flat")},6716:function(e,t,n){var r=n(2109),o=n(3331);r({global:!0,forced:!n(4019)},{DataView:o.DataView})},3016:function(e,t,n){"use strict";var r=n(2109),o=n(1702),i=n(7293)((function(){return 120!==new Date(16e11).getYear()})),a=o(Date.prototype.getFullYear);r({target:"Date",proto:!0,forced:i},{getYear:function(){return a(this)-1900}})},3843:function(e,t,n){var r=n(2109),o=n(7854),i=n(1702),a=o.Date,A=i(a.prototype.getTime);r({target:"Date",stat:!0},{now:function(){return A(new a)}})},1801:function(e,t,n){"use strict";var r=n(2109),o=n(1702),i=n(9303),a=Date.prototype,A=o(a.getTime),s=o(a.setFullYear);r({target:"Date",proto:!0},{setYear:function(e){A(this);var t=i(e);return s(this,0<=t&&t<=99?t+1900:t)}})},9550:function(e,t,n){n(2109)({target:"Date",proto:!0},{toGMTString:Date.prototype.toUTCString})},8733:function(e,t,n){var r=n(2109),o=n(5573);r({target:"Date",proto:!0,forced:Date.prototype.toISOString!==o},{toISOString:o})},5735:function(e,t,n){"use strict";var r=n(2109),o=n(7293),i=n(7908),a=n(7593);r({target:"Date",proto:!0,forced:o((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}))},{toJSON:function(e){var t=i(this),n=a(t,"number");return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},6078:function(e,t,n){var r=n(2597),o=n(1320),i=n(8709),a=n(5112)("toPrimitive"),A=Date.prototype;r(A,a)||o(A,a,i)},3710:function(e,t,n){var r=n(1702),o=n(1320),i=Date.prototype,a="Invalid Date",A=r(i.toString),s=r(i.getTime);String(new Date(NaN))!=a&&o(i,"toString",(function(){var e=s(this);return e==e?A(this):a}))},1703:function(e,t,n){var r=n(2109),o=n(7854),i=n(2104),a=n(9191),A=o.WebAssembly,s=7!==Error("e",{cause:7}).cause,c=function(e,t){var n={};n[e]=a(e,t,s),r({global:!0,forced:s},n)},u=function(e,t){if(A&&A[e]){var n={};n[e]=a("WebAssembly."+e,t,s),r({target:"WebAssembly",stat:!0,forced:s},n)}};c("Error",(function(e){return function(t){return i(e,this,arguments)}})),c("EvalError",(function(e){return function(t){return i(e,this,arguments)}})),c("RangeError",(function(e){return function(t){return i(e,this,arguments)}})),c("ReferenceError",(function(e){return function(t){return i(e,this,arguments)}})),c("SyntaxError",(function(e){return function(t){return i(e,this,arguments)}})),c("TypeError",(function(e){return function(t){return i(e,this,arguments)}})),c("URIError",(function(e){return function(t){return i(e,this,arguments)}})),u("CompileError",(function(e){return function(t){return i(e,this,arguments)}})),u("LinkError",(function(e){return function(t){return i(e,this,arguments)}})),u("RuntimeError",(function(e){return function(t){return i(e,this,arguments)}}))},6647:function(e,t,n){var r=n(1320),o=n(7762),i=Error.prototype;i.toString!==o&&r(i,"toString",o)},2130:function(e,t,n){"use strict";var r=n(2109),o=n(1702),i=n(1340),a=o("".charAt),A=o("".charCodeAt),s=o(/./.exec),c=o(1..toString),u=o("".toUpperCase),l=/[\w*+\-./@]/,f=function(e,t){for(var n=c(e,16);n.length<t;)n="0"+n;return n};r({global:!0},{escape:function(e){for(var t,n,r=i(e),o="",c=r.length,p=0;p<c;)t=a(r,p++),s(l,t)?o+=t:o+=(n=A(t,0))<256?"%"+f(n,2):"%u"+u(f(n,4));return o}})},4812:function(e,t,n){var r=n(2109),o=n(7065);r({target:"Function",proto:!0,forced:Function.bind!==o},{bind:o})},4855:function(e,t,n){"use strict";var r=n(614),o=n(111),i=n(3070),a=n(9518),A=n(5112)("hasInstance"),s=Function.prototype;A in s||i.f(s,A,{value:function(e){if(!r(this)||!o(e))return!1;var t=this.prototype;if(!o(t))return e instanceof this;for(;e=a(e);)if(t===e)return!0;return!1}})},8309:function(e,t,n){var r=n(9781),o=n(6530).EXISTS,i=n(1702),a=n(3070).f,A=Function.prototype,s=i(A.toString),c=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,u=i(c.exec);r&&!o&&a(A,"name",{configurable:!0,get:function(){try{return u(c,s(this))[1]}catch(e){return""}}})},5837:function(e,t,n){n(2109)({global:!0},{globalThis:n(7854)})},8862:function(e,t,n){var r=n(2109),o=n(7854),i=n(5005),a=n(2104),A=n(1702),s=n(7293),c=o.Array,u=i("JSON","stringify"),l=A(/./.exec),f=A("".charAt),p=A("".charCodeAt),d=A("".replace),g=A(1..toString),h=/[\uD800-\uDFFF]/g,v=/^[\uD800-\uDBFF]$/,m=/^[\uDC00-\uDFFF]$/,C=function(e,t,n){var r=f(n,t-1),o=f(n,t+1);return l(v,e)&&!l(m,o)||l(m,e)&&!l(v,r)?"\\u"+g(p(e,0),16):e},y=s((function(){return'"\\udf06\\ud834"'!==u("\udf06\ud834")||'"\\udead"'!==u("\udead")}));u&&r({target:"JSON",stat:!0,forced:y},{stringify:function(e,t,n){for(var r=0,o=arguments.length,i=c(o);r<o;r++)i[r]=arguments[r];var A=a(u,null,i);return"string"==typeof A?d(A,h,C):A}})},3706:function(e,t,n){var r=n(7854);n(8003)(r.JSON,"JSON",!0)},1532:function(e,t,n){"use strict";n(7710)("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),n(5631))},9752:function(e,t,n){var r=n(2109),o=n(6513),i=Math.acosh,a=Math.log,A=Math.sqrt,s=Math.LN2;r({target:"Math",stat:!0,forced:!i||710!=Math.floor(i(Number.MAX_VALUE))||i(1/0)!=1/0},{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?a(e)+s:o(e-1+A(e-1)*A(e+1))}})},2376:function(e,t,n){var r=n(2109),o=Math.asinh,i=Math.log,a=Math.sqrt;r({target:"Math",stat:!0,forced:!(o&&1/o(0)>0)},{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):i(t+a(t*t+1)):t}})},3181:function(e,t,n){var r=n(2109),o=Math.atanh,i=Math.log;r({target:"Math",stat:!0,forced:!(o&&1/o(-0)<0)},{atanh:function(e){return 0==(e=+e)?e:i((1+e)/(1-e))/2}})},3484:function(e,t,n){var r=n(2109),o=n(4310),i=Math.abs,a=Math.pow;r({target:"Math",stat:!0},{cbrt:function(e){return o(e=+e)*a(i(e),1/3)}})},2388:function(e,t,n){var r=n(2109),o=Math.floor,i=Math.log,a=Math.LOG2E;r({target:"Math",stat:!0},{clz32:function(e){return(e>>>=0)?31-o(i(e+.5)*a):32}})},8621:function(e,t,n){var r=n(2109),o=n(6736),i=Math.cosh,a=Math.abs,A=Math.E;r({target:"Math",stat:!0,forced:!i||i(710)===1/0},{cosh:function(e){var t=o(a(e)-1)+1;return(t+1/(t*A*A))*(A/2)}})},403:function(e,t,n){var r=n(2109),o=n(6736);r({target:"Math",stat:!0,forced:o!=Math.expm1},{expm1:o})},4755:function(e,t,n){n(2109)({target:"Math",stat:!0},{fround:n(6130)})},5438:function(e,t,n){var r=n(2109),o=Math.hypot,i=Math.abs,a=Math.sqrt;r({target:"Math",stat:!0,forced:!!o&&o(1/0,NaN)!==1/0},{hypot:function(e,t){for(var n,r,o=0,A=0,s=arguments.length,c=0;A<s;)c<(n=i(arguments[A++]))?(o=o*(r=c/n)*r+1,c=n):o+=n>0?(r=n/c)*r:n;return c===1/0?1/0:c*a(o)}})},332:function(e,t,n){var r=n(2109),o=n(7293),i=Math.imul;r({target:"Math",stat:!0,forced:o((function(){return-5!=i(4294967295,5)||2!=i.length}))},{imul:function(e,t){var n=65535,r=+e,o=+t,i=n&r,a=n&o;return 0|i*a+((n&r>>>16)*a+i*(n&o>>>16)<<16>>>0)}})},658:function(e,t,n){n(2109)({target:"Math",stat:!0},{log10:n(202)})},197:function(e,t,n){n(2109)({target:"Math",stat:!0},{log1p:n(6513)})},4914:function(e,t,n){var r=n(2109),o=Math.log,i=Math.LN2;r({target:"Math",stat:!0},{log2:function(e){return o(e)/i}})},2420:function(e,t,n){n(2109)({target:"Math",stat:!0},{sign:n(4310)})},160:function(e,t,n){var r=n(2109),o=n(7293),i=n(6736),a=Math.abs,A=Math.exp,s=Math.E;r({target:"Math",stat:!0,forced:o((function(){return-2e-17!=Math.sinh(-2e-17)}))},{sinh:function(e){return a(e=+e)<1?(i(e)-i(-e))/2:(A(e-1)-A(-e-1))*(s/2)}})},970:function(e,t,n){var r=n(2109),o=n(6736),i=Math.exp;r({target:"Math",stat:!0},{tanh:function(e){var t=o(e=+e),n=o(-e);return t==1/0?1:n==1/0?-1:(t-n)/(i(e)+i(-e))}})},2703:function(e,t,n){n(8003)(Math,"Math",!0)},3689:function(e,t,n){var r=n(2109),o=Math.ceil,i=Math.floor;r({target:"Math",stat:!0},{trunc:function(e){return(e>0?i:o)(e)}})},9653:function(e,t,n){"use strict";var r=n(9781),o=n(7854),i=n(1702),a=n(4705),A=n(1320),s=n(2597),c=n(9587),u=n(7976),l=n(2190),f=n(7593),p=n(7293),d=n(8006).f,g=n(1236).f,h=n(3070).f,v=n(863),m=n(3111).trim,C="Number",y=o.Number,b=y.prototype,w=o.TypeError,E=i("".slice),B=i("".charCodeAt),x=function(e){var t=f(e,"number");return"bigint"==typeof t?t:k(t)},k=function(e){var t,n,r,o,i,a,A,s,c=f(e,"number");if(l(c))throw w("Cannot convert a Symbol value to a number");if("string"==typeof c&&c.length>2)if(c=m(c),43===(t=B(c,0))||45===t){if(88===(n=B(c,2))||120===n)return NaN}else if(48===t){switch(B(c,1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+c}for(a=(i=E(c,2)).length,A=0;A<a;A++)if((s=B(i,A))<48||s>o)return NaN;return parseInt(i,r)}return+c};if(a(C,!y(" 0o1")||!y("0b1")||y("+0x1"))){for(var I,S=function(e){var t=arguments.length<1?0:y(x(e)),n=this;return u(b,n)&&p((function(){v(n)}))?c(Object(t),n,S):t},T=r?d(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),L=0;T.length>L;L++)s(y,I=T[L])&&!s(S,I)&&h(S,I,g(y,I));S.prototype=b,b.constructor=S,A(o,C,S)}},3299:function(e,t,n){n(2109)({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},5192:function(e,t,n){n(2109)({target:"Number",stat:!0},{isFinite:n(7023)})},3161:function(e,t,n){n(2109)({target:"Number",stat:!0},{isInteger:n(5988)})},4048:function(e,t,n){n(2109)({target:"Number",stat:!0},{isNaN:function(e){return e!=e}})},8285:function(e,t,n){var r=n(2109),o=n(5988),i=Math.abs;r({target:"Number",stat:!0},{isSafeInteger:function(e){return o(e)&&i(e)<=9007199254740991}})},4363:function(e,t,n){n(2109)({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},5994:function(e,t,n){n(2109)({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})},1874:function(e,t,n){var r=n(2109),o=n(2814);r({target:"Number",stat:!0,forced:Number.parseFloat!=o},{parseFloat:o})},9494:function(e,t,n){var r=n(2109),o=n(3009);r({target:"Number",stat:!0,forced:Number.parseInt!=o},{parseInt:o})},1354:function(e,t,n){"use strict";var r=n(2109),o=n(7854),i=n(1702),a=n(9303),A=n(863),s=n(8415),c=n(202),u=n(7293),l=o.RangeError,f=o.String,p=o.isFinite,d=Math.abs,g=Math.floor,h=Math.pow,v=Math.round,m=i(1..toExponential),C=i(s),y=i("".slice),b="-6.9000e-11"===m(-69e-12,4)&&"1.25e+0"===m(1.255,2)&&"1.235e+4"===m(12345,3)&&"3e+1"===m(25,0),w=u((function(){m(1,1/0)}))&&u((function(){m(1,-1/0)})),E=!u((function(){m(1/0,1/0)}))&&!u((function(){m(NaN,1/0)}));r({target:"Number",proto:!0,forced:!b||!w||!E},{toExponential:function(e){var t=A(this);if(void 0===e)return m(t);var n=a(e);if(!p(t))return f(t);if(n<0||n>20)throw l("Incorrect fraction digits");if(b)return m(t,n);var r="",o="",i=0,s="",u="";if(t<0&&(r="-",t=-t),0===t)i=0,o=C("0",n+1);else{var w=c(t);i=g(w);var E=0,B=h(10,i-n);2*t>=(2*(E=v(t/B))+1)*B&&(E+=1),E>=h(10,n+1)&&(E/=10,i+=1),o=f(E)}return 0!==n&&(o=y(o,0,1)+"."+y(o,1)),0===i?(s="+",u="0"):(s=i>0?"+":"-",u=f(d(i))),r+(o+"e")+s+u}})},6977:function(e,t,n){"use strict";var r=n(2109),o=n(7854),i=n(1702),a=n(9303),A=n(863),s=n(8415),c=n(7293),u=o.RangeError,l=o.String,f=Math.floor,p=i(s),d=i("".slice),g=i(1..toFixed),h=function(e,t,n){return 0===t?n:t%2==1?h(e,t-1,n*e):h(e*e,t/2,n)},v=function(e,t,n){for(var r=-1,o=n;++r<6;)o+=t*e[r],e[r]=o%1e7,o=f(o/1e7)},m=function(e,t){for(var n=6,r=0;--n>=0;)r+=e[n],e[n]=f(r/t),r=r%t*1e7},C=function(e){for(var t=6,n="";--t>=0;)if(""!==n||0===t||0!==e[t]){var r=l(e[t]);n=""===n?r:n+p("0",7-r.length)+r}return n};r({target:"Number",proto:!0,forced:c((function(){return"0.000"!==g(8e-5,3)||"1"!==g(.9,0)||"1.25"!==g(1.255,2)||"1000000000000000128"!==g(0xde0b6b3a7640080,0)}))||!c((function(){g({})}))},{toFixed:function(e){var t,n,r,o,i=A(this),s=a(e),c=[0,0,0,0,0,0],f="",g="0";if(s<0||s>20)throw u("Incorrect fraction digits");if(i!=i)return"NaN";if(i<=-1e21||i>=1e21)return l(i);if(i<0&&(f="-",i=-i),i>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(i*h(2,69,1))-69)<0?i*h(2,-t,1):i/h(2,t,1),n*=4503599627370496,(t=52-t)>0){for(v(c,0,n),r=s;r>=7;)v(c,1e7,0),r-=7;for(v(c,h(10,r,1),0),r=t-1;r>=23;)m(c,1<<23),r-=23;m(c,1<<r),v(c,1,1),m(c,2),g=C(c)}else v(c,0,n),v(c,1<<-t,0),g=C(c)+p("0",s);return s>0?f+((o=g.length)<=s?"0."+p("0",s-o)+g:d(g,0,o-s)+"."+d(g,o-s)):f+g}})},5147:function(e,t,n){"use strict";var r=n(2109),o=n(1702),i=n(7293),a=n(863),A=o(1..toPrecision);r({target:"Number",proto:!0,forced:i((function(){return"1"!==A(1,void 0)}))||!i((function(){A({})}))},{toPrecision:function(e){return void 0===e?A(a(this)):A(a(this),e)}})},9601:function(e,t,n){var r=n(2109),o=n(1574);r({target:"Object",stat:!0,forced:Object.assign!==o},{assign:o})},8011:function(e,t,n){n(2109)({target:"Object",stat:!0,sham:!n(9781)},{create:n(30)})},9595:function(e,t,n){"use strict";var r=n(2109),o=n(9781),i=n(9026),a=n(9662),A=n(7908),s=n(3070);o&&r({target:"Object",proto:!0,forced:i},{__defineGetter__:function(e,t){s.f(A(this),e,{get:a(t),enumerable:!0,configurable:!0})}})},3321:function(e,t,n){var r=n(2109),o=n(9781),i=n(6048).f;r({target:"Object",stat:!0,forced:Object.defineProperties!==i,sham:!o},{defineProperties:i})},9070:function(e,t,n){var r=n(2109),o=n(9781),i=n(3070).f;r({target:"Object",stat:!0,forced:Object.defineProperty!==i,sham:!o},{defineProperty:i})},5500:function(e,t,n){"use strict";var r=n(2109),o=n(9781),i=n(9026),a=n(9662),A=n(7908),s=n(3070);o&&r({target:"Object",proto:!0,forced:i},{__defineSetter__:function(e,t){s.f(A(this),e,{set:a(t),enumerable:!0,configurable:!0})}})},9720:function(e,t,n){var r=n(2109),o=n(4699).entries;r({target:"Object",stat:!0},{entries:function(e){return o(e)}})},3371:function(e,t,n){var r=n(2109),o=n(6677),i=n(7293),a=n(111),A=n(2423).onFreeze,s=Object.freeze;r({target:"Object",stat:!0,forced:i((function(){s(1)})),sham:!o},{freeze:function(e){return s&&a(e)?s(A(e)):e}})},8559:function(e,t,n){var r=n(2109),o=n(408),i=n(6135);r({target:"Object",stat:!0},{fromEntries:function(e){var t={};return o(e,(function(e,n){i(t,e,n)}),{AS_ENTRIES:!0}),t}})},5003:function(e,t,n){var r=n(2109),o=n(7293),i=n(5656),a=n(1236).f,A=n(9781),s=o((function(){a(1)}));r({target:"Object",stat:!0,forced:!A||s,sham:!A},{getOwnPropertyDescriptor:function(e,t){return a(i(e),t)}})},9337:function(e,t,n){var r=n(2109),o=n(9781),i=n(3887),a=n(5656),A=n(1236),s=n(6135);r({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(e){for(var t,n,r=a(e),o=A.f,c=i(r),u={},l=0;c.length>l;)void 0!==(n=o(r,t=c[l++]))&&s(u,t,n);return u}})},6210:function(e,t,n){var r=n(2109),o=n(7293),i=n(1156).f;r({target:"Object",stat:!0,forced:o((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:i})},489:function(e,t,n){var r=n(2109),o=n(7293),i=n(7908),a=n(9518),A=n(8544);r({target:"Object",stat:!0,forced:o((function(){a(1)})),sham:!A},{getPrototypeOf:function(e){return a(i(e))}})},6314:function(e,t,n){n(2109)({target:"Object",stat:!0},{hasOwn:n(2597)})},1825:function(e,t,n){var r=n(2109),o=n(2050);r({target:"Object",stat:!0,forced:Object.isExtensible!==o},{isExtensible:o})},8410:function(e,t,n){var r=n(2109),o=n(7293),i=n(111),a=n(4326),A=n(7556),s=Object.isFrozen;r({target:"Object",stat:!0,forced:o((function(){s(1)}))||A},{isFrozen:function(e){return!i(e)||!(!A||"ArrayBuffer"!=a(e))||!!s&&s(e)}})},2200:function(e,t,n){var r=n(2109),o=n(7293),i=n(111),a=n(4326),A=n(7556),s=Object.isSealed;r({target:"Object",stat:!0,forced:o((function(){s(1)}))||A},{isSealed:function(e){return!i(e)||!(!A||"ArrayBuffer"!=a(e))||!!s&&s(e)}})},3304:function(e,t,n){n(2109)({target:"Object",stat:!0},{is:n(1150)})},7941:function(e,t,n){var r=n(2109),o=n(7908),i=n(1956);r({target:"Object",stat:!0,forced:n(7293)((function(){i(1)}))},{keys:function(e){return i(o(e))}})},4869:function(e,t,n){"use strict";var r=n(2109),o=n(9781),i=n(9026),a=n(7908),A=n(4948),s=n(9518),c=n(1236).f;o&&r({target:"Object",proto:!0,forced:i},{__lookupGetter__:function(e){var t,n=a(this),r=A(e);do{if(t=c(n,r))return t.get}while(n=s(n))}})},3952:function(e,t,n){"use strict";var r=n(2109),o=n(9781),i=n(9026),a=n(7908),A=n(4948),s=n(9518),c=n(1236).f;o&&r({target:"Object",proto:!0,forced:i},{__lookupSetter__:function(e){var t,n=a(this),r=A(e);do{if(t=c(n,r))return t.set}while(n=s(n))}})},7227:function(e,t,n){var r=n(2109),o=n(111),i=n(2423).onFreeze,a=n(6677),A=n(7293),s=Object.preventExtensions;r({target:"Object",stat:!0,forced:A((function(){s(1)})),sham:!a},{preventExtensions:function(e){return s&&o(e)?s(i(e)):e}})},514:function(e,t,n){var r=n(2109),o=n(111),i=n(2423).onFreeze,a=n(6677),A=n(7293),s=Object.seal;r({target:"Object",stat:!0,forced:A((function(){s(1)})),sham:!a},{seal:function(e){return s&&o(e)?s(i(e)):e}})},8304:function(e,t,n){n(2109)({target:"Object",stat:!0},{setPrototypeOf:n(7674)})},1539:function(e,t,n){var r=n(1694),o=n(1320),i=n(288);r||o(Object.prototype,"toString",i,{unsafe:!0})},6833:function(e,t,n){var r=n(2109),o=n(4699).values;r({target:"Object",stat:!0},{values:function(e){return o(e)}})},4678:function(e,t,n){var r=n(2109),o=n(2814);r({global:!0,forced:parseFloat!=o},{parseFloat:o})},1058:function(e,t,n){var r=n(2109),o=n(3009);r({global:!0,forced:parseInt!=o},{parseInt:o})},7922:function(e,t,n){"use strict";var r=n(2109),o=n(6916),i=n(9662),a=n(8523),A=n(2534),s=n(408);r({target:"Promise",stat:!0},{allSettled:function(e){var t=this,n=a.f(t),r=n.resolve,c=n.reject,u=A((function(){var n=i(t.resolve),a=[],A=0,c=1;s(e,(function(e){var i=A++,s=!1;c++,o(n,t,e).then((function(e){s||(s=!0,a[i]={status:"fulfilled",value:e},--c||r(a))}),(function(e){s||(s=!0,a[i]={status:"rejected",reason:e},--c||r(a))}))})),--c||r(a)}));return u.error&&c(u.value),n.promise}})},4668:function(e,t,n){"use strict";var r=n(2109),o=n(9662),i=n(5005),a=n(6916),A=n(8523),s=n(2534),c=n(408),u="No one promise resolved";r({target:"Promise",stat:!0},{any:function(e){var t=this,n=i("AggregateError"),r=A.f(t),l=r.resolve,f=r.reject,p=s((function(){var r=o(t.resolve),i=[],A=0,s=1,p=!1;c(e,(function(e){var o=A++,c=!1;s++,a(r,t,e).then((function(e){c||p||(p=!0,l(e))}),(function(e){c||p||(c=!0,i[o]=e,--s||f(new n(i,u)))}))})),--s||f(new n(i,u))}));return p.error&&f(p.value),r.promise}})},7727:function(e,t,n){"use strict";var r=n(2109),o=n(1913),i=n(3366),a=n(7293),A=n(5005),s=n(614),c=n(6707),u=n(9478),l=n(1320);if(r({target:"Promise",proto:!0,real:!0,forced:!!i&&a((function(){i.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=c(this,A("Promise")),n=s(e);return this.then(n?function(n){return u(t,e()).then((function(){return n}))}:e,n?function(n){return u(t,e()).then((function(){throw n}))}:e)}}),!o&&s(i)){var f=A("Promise").prototype.finally;i.prototype.finally!==f&&l(i.prototype,"finally",f,{unsafe:!0})}},8674:function(e,t,n){"use strict";var r,o,i,a,A=n(2109),s=n(1913),c=n(7854),u=n(5005),l=n(6916),f=n(3366),p=n(1320),d=n(2248),g=n(7674),h=n(8003),v=n(6340),m=n(9662),C=n(614),y=n(111),b=n(5787),w=n(2788),E=n(408),B=n(7072),x=n(6707),k=n(261).set,I=n(5948),S=n(9478),T=n(842),L=n(8523),R=n(2534),M=n(8572),O=n(9909),Q=n(4705),D=n(5112),P=n(7871),F=n(5268),U=n(7392),N=D("species"),W="Promise",j=O.getterFor(W),Y=O.set,G=O.getterFor(W),z=f&&f.prototype,_=f,V=z,H=c.TypeError,J=c.document,Z=c.process,K=L.f,X=K,q=!!(J&&J.createEvent&&c.dispatchEvent),$=C(c.PromiseRejectionEvent),ee="unhandledrejection",te=!1,ne=Q(W,(function(){var e=w(_),t=e!==String(_);if(!t&&66===U)return!0;if(s&&!V.finally)return!0;if(U>=51&&/native code/.test(e))return!1;var n=new _((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};return(n.constructor={})[N]=r,!(te=n.then((function(){}))instanceof r)||!t&&P&&!$})),re=ne||!B((function(e){_.all(e).catch((function(){}))})),oe=function(e){var t;return!(!y(e)||!C(t=e.then))&&t},ie=function(e,t){var n,r,o,i=t.value,a=1==t.state,A=a?e.ok:e.fail,s=e.resolve,c=e.reject,u=e.domain;try{A?(a||(2===t.rejection&&ue(t),t.rejection=1),!0===A?n=i:(u&&u.enter(),n=A(i),u&&(u.exit(),o=!0)),n===e.promise?c(H("Promise-chain cycle")):(r=oe(n))?l(r,n,s,c):s(n)):c(i)}catch(e){u&&!o&&u.exit(),c(e)}},ae=function(e,t){e.notified||(e.notified=!0,I((function(){for(var n,r=e.reactions;n=r.get();)ie(n,e);e.notified=!1,t&&!e.rejection&&se(e)})))},Ae=function(e,t,n){var r,o;q?((r=J.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),c.dispatchEvent(r)):r={promise:t,reason:n},!$&&(o=c["on"+e])?o(r):e===ee&&T("Unhandled promise rejection",n)},se=function(e){l(k,c,(function(){var t,n=e.facade,r=e.value;if(ce(e)&&(t=R((function(){F?Z.emit("unhandledRejection",r,n):Ae(ee,n,r)})),e.rejection=F||ce(e)?2:1,t.error))throw t.value}))},ce=function(e){return 1!==e.rejection&&!e.parent},ue=function(e){l(k,c,(function(){var t=e.facade;F?Z.emit("rejectionHandled",t):Ae("rejectionhandled",t,e.value)}))},le=function(e,t,n){return function(r){e(t,r,n)}},fe=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,ae(e,!0))},pe=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw H("Promise can't be resolved itself");var r=oe(t);r?I((function(){var n={done:!1};try{l(r,t,le(pe,n,e),le(fe,n,e))}catch(t){fe(n,t,e)}})):(e.value=t,e.state=1,ae(e,!1))}catch(t){fe({done:!1},t,e)}}};if(ne&&(V=(_=function(e){b(this,V),m(e),l(r,this);var t=j(this);try{e(le(pe,t),le(fe,t))}catch(e){fe(t,e)}}).prototype,(r=function(e){Y(this,{type:W,done:!1,notified:!1,parent:!1,reactions:new M,rejection:!1,state:0,value:void 0})}).prototype=d(V,{then:function(e,t){var n=G(this),r=K(x(this,_));return n.parent=!0,r.ok=!C(e)||e,r.fail=C(t)&&t,r.domain=F?Z.domain:void 0,0==n.state?n.reactions.add(r):I((function(){ie(r,n)})),r.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r,t=j(e);this.promise=e,this.resolve=le(pe,t),this.reject=le(fe,t)},L.f=K=function(e){return e===_||e===i?new o(e):X(e)},!s&&C(f)&&z!==Object.prototype)){a=z.then,te||(p(z,"then",(function(e,t){var n=this;return new _((function(e,t){l(a,n,e,t)})).then(e,t)}),{unsafe:!0}),p(z,"catch",V.catch,{unsafe:!0}));try{delete z.constructor}catch(e){}g&&g(z,V)}A({global:!0,wrap:!0,forced:ne},{Promise:_}),h(_,W,!1,!0),v(W),i=u(W),A({target:W,stat:!0,forced:ne},{reject:function(e){var t=K(this);return l(t.reject,void 0,e),t.promise}}),A({target:W,stat:!0,forced:s||ne},{resolve:function(e){return S(s&&this===i?_:this,e)}}),A({target:W,stat:!0,forced:re},{all:function(e){var t=this,n=K(t),r=n.resolve,o=n.reject,i=R((function(){var n=m(t.resolve),i=[],a=0,A=1;E(e,(function(e){var s=a++,c=!1;A++,l(n,t,e).then((function(e){c||(c=!0,i[s]=e,--A||r(i))}),o)})),--A||r(i)}));return i.error&&o(i.value),n.promise},race:function(e){var t=this,n=K(t),r=n.reject,o=R((function(){var o=m(t.resolve);E(e,(function(e){l(o,t,e).then(n.resolve,r)}))}));return o.error&&r(o.value),n.promise}})},224:function(e,t,n){var r=n(2109),o=n(2104),i=n(9662),a=n(9670);r({target:"Reflect",stat:!0,forced:!n(7293)((function(){Reflect.apply((function(){}))}))},{apply:function(e,t,n){return o(i(e),t,a(n))}})},2419:function(e,t,n){var r=n(2109),o=n(5005),i=n(2104),a=n(7065),A=n(9483),s=n(9670),c=n(111),u=n(30),l=n(7293),f=o("Reflect","construct"),p=Object.prototype,d=[].push,g=l((function(){function e(){}return!(f((function(){}),[],e)instanceof e)})),h=!l((function(){f((function(){}))})),v=g||h;r({target:"Reflect",stat:!0,forced:v,sham:v},{construct:function(e,t){A(e),s(t);var n=arguments.length<3?e:A(arguments[2]);if(h&&!g)return f(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return i(d,r,t),new(i(a,e,r))}var o=n.prototype,l=u(c(o)?o:p),v=i(e,l,t);return c(v)?v:l}})},9596:function(e,t,n){var r=n(2109),o=n(9781),i=n(9670),a=n(4948),A=n(3070);r({target:"Reflect",stat:!0,forced:n(7293)((function(){Reflect.defineProperty(A.f({},1,{value:1}),1,{value:2})})),sham:!o},{defineProperty:function(e,t,n){i(e);var r=a(t);i(n);try{return A.f(e,r,n),!0}catch(e){return!1}}})},2586:function(e,t,n){var r=n(2109),o=n(9670),i=n(1236).f;r({target:"Reflect",stat:!0},{deleteProperty:function(e,t){var n=i(o(e),t);return!(n&&!n.configurable)&&delete e[t]}})},5683:function(e,t,n){var r=n(2109),o=n(9781),i=n(9670),a=n(1236);r({target:"Reflect",stat:!0,sham:!o},{getOwnPropertyDescriptor:function(e,t){return a.f(i(e),t)}})},9361:function(e,t,n){var r=n(2109),o=n(9670),i=n(9518);r({target:"Reflect",stat:!0,sham:!n(8544)},{getPrototypeOf:function(e){return i(o(e))}})},4819:function(e,t,n){var r=n(2109),o=n(6916),i=n(111),a=n(9670),A=n(5032),s=n(1236),c=n(9518);r({target:"Reflect",stat:!0},{get:function e(t,n){var r,u,l=arguments.length<3?t:arguments[2];return a(t)===l?t[n]:(r=s.f(t,n))?A(r)?r.value:void 0===r.get?void 0:o(r.get,l):i(u=c(t))?e(u,n,l):void 0}})},1037:function(e,t,n){n(2109)({target:"Reflect",stat:!0},{has:function(e,t){return t in e}})},5898:function(e,t,n){var r=n(2109),o=n(9670),i=n(2050);r({target:"Reflect",stat:!0},{isExtensible:function(e){return o(e),i(e)}})},7318:function(e,t,n){n(2109)({target:"Reflect",stat:!0},{ownKeys:n(3887)})},4361:function(e,t,n){var r=n(2109),o=n(5005),i=n(9670);r({target:"Reflect",stat:!0,sham:!n(6677)},{preventExtensions:function(e){i(e);try{var t=o("Object","preventExtensions");return t&&t(e),!0}catch(e){return!1}}})},9532:function(e,t,n){var r=n(2109),o=n(9670),i=n(6077),a=n(7674);a&&r({target:"Reflect",stat:!0},{setPrototypeOf:function(e,t){o(e),i(t);try{return a(e,t),!0}catch(e){return!1}}})},3593:function(e,t,n){var r=n(2109),o=n(6916),i=n(9670),a=n(111),A=n(5032),s=n(7293),c=n(3070),u=n(1236),l=n(9518),f=n(9114);r({target:"Reflect",stat:!0,forced:s((function(){var e=function(){},t=c.f(new e,"a",{configurable:!0});return!1!==Reflect.set(e.prototype,"a",1,t)}))},{set:function e(t,n,r){var s,p,d,g=arguments.length<4?t:arguments[3],h=u.f(i(t),n);if(!h){if(a(p=l(t)))return e(p,n,r,g);h=f(0)}if(A(h)){if(!1===h.writable||!a(g))return!1;if(s=u.f(g,n)){if(s.get||s.set||!1===s.writable)return!1;s.value=r,c.f(g,n,s)}else c.f(g,n,f(0,r))}else{if(void 0===(d=h.set))return!1;o(d,g,r)}return!0}})},1299:function(e,t,n){var r=n(2109),o=n(7854),i=n(8003);r({global:!0},{Reflect:{}}),i(o.Reflect,"Reflect",!0)},4603:function(e,t,n){var r=n(9781),o=n(7854),i=n(1702),a=n(4705),A=n(9587),s=n(8880),c=n(3070).f,u=n(8006).f,l=n(7976),f=n(7850),p=n(1340),d=n(7066),g=n(2999),h=n(1320),v=n(7293),m=n(2597),C=n(9909).enforce,y=n(6340),b=n(5112),w=n(9441),E=n(7168),B=b("match"),x=o.RegExp,k=x.prototype,I=o.SyntaxError,S=i(d),T=i(k.exec),L=i("".charAt),R=i("".replace),M=i("".indexOf),O=i("".slice),Q=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,D=/a/g,P=/a/g,F=new x(D)!==D,U=g.MISSED_STICKY,N=g.UNSUPPORTED_Y;if(a("RegExp",r&&(!F||U||w||E||v((function(){return P[B]=!1,x(D)!=D||x(P)==P||"/a/i"!=x(D,"i")}))))){for(var W=function(e,t){var n,r,o,i,a,c,u=l(k,this),d=f(e),g=void 0===t,h=[],v=e;if(!u&&d&&g&&e.constructor===W)return e;if((d||l(k,e))&&(e=e.source,g&&(t="flags"in v?v.flags:S(v))),e=void 0===e?"":p(e),t=void 0===t?"":p(t),v=e,w&&"dotAll"in D&&(r=!!t&&M(t,"s")>-1)&&(t=R(t,/s/g,"")),n=t,U&&"sticky"in D&&(o=!!t&&M(t,"y")>-1)&&N&&(t=R(t,/y/g,"")),E&&(i=function(e){for(var t,n=e.length,r=0,o="",i=[],a={},A=!1,s=!1,c=0,u="";r<=n;r++){if("\\"===(t=L(e,r)))t+=L(e,++r);else if("]"===t)A=!1;else if(!A)switch(!0){case"["===t:A=!0;break;case"("===t:T(Q,O(e,r+1))&&(r+=2,s=!0),o+=t,c++;continue;case">"===t&&s:if(""===u||m(a,u))throw new I("Invalid capture group name");a[u]=!0,i[i.length]=[u,c],s=!1,u="";continue}s?u+=t:o+=t}return[o,i]}(e),e=i[0],h=i[1]),a=A(x(e,t),u?this:k,W),(r||o||h.length)&&(c=C(a),r&&(c.dotAll=!0,c.raw=W(function(e){for(var t,n=e.length,r=0,o="",i=!1;r<=n;r++)"\\"!==(t=L(e,r))?i||"."!==t?("["===t?i=!0:"]"===t&&(i=!1),o+=t):o+="[\\s\\S]":o+=t+L(e,++r);return o}(e),n)),o&&(c.sticky=!0),h.length&&(c.groups=h)),e!==v)try{s(a,"source",""===v?"(?:)":v)}catch(e){}return a},j=function(e){e in W||c(W,e,{configurable:!0,get:function(){return x[e]},set:function(t){x[e]=t}})},Y=u(x),G=0;Y.length>G;)j(Y[G++]);k.constructor=W,W.prototype=k,h(o,"RegExp",W)}y("RegExp")},8450:function(e,t,n){var r=n(7854),o=n(9781),i=n(9441),a=n(4326),A=n(3070).f,s=n(9909).get,c=RegExp.prototype,u=r.TypeError;o&&i&&A(c,"dotAll",{configurable:!0,get:function(){if(this!==c){if("RegExp"===a(this))return!!s(this).dotAll;throw u("Incompatible receiver, RegExp required")}}})},4916:function(e,t,n){"use strict";var r=n(2109),o=n(2261);r({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},2087:function(e,t,n){var r=n(9781),o=n(3070),i=n(7066),a=n(7293),A=RegExp.prototype;r&&a((function(){return"sy"!==Object.getOwnPropertyDescriptor(A,"flags").get.call({dotAll:!0,sticky:!0})}))&&o.f(A,"flags",{configurable:!0,get:i})},8386:function(e,t,n){var r=n(7854),o=n(9781),i=n(2999).MISSED_STICKY,a=n(4326),A=n(3070).f,s=n(9909).get,c=RegExp.prototype,u=r.TypeError;o&&i&&A(c,"sticky",{configurable:!0,get:function(){if(this!==c){if("RegExp"===a(this))return!!s(this).sticky;throw u("Incompatible receiver, RegExp required")}}})},7601:function(e,t,n){"use strict";n(4916);var r,o,i=n(2109),a=n(7854),A=n(6916),s=n(1702),c=n(614),u=n(111),l=(r=!1,(o=/[ac]/).exec=function(){return r=!0,/./.exec.apply(this,arguments)},!0===o.test("abc")&&r),f=a.Error,p=s(/./.test);i({target:"RegExp",proto:!0,forced:!l},{test:function(e){var t=this.exec;if(!c(t))return p(this,e);var n=A(t,this,e);if(null!==n&&!u(n))throw new f("RegExp exec method returned something other than an Object or null");return!!n}})},9714:function(e,t,n){"use strict";var r=n(1702),o=n(6530).PROPER,i=n(1320),a=n(9670),A=n(7976),s=n(1340),c=n(7293),u=n(7066),l="toString",f=RegExp.prototype,p=f.toString,d=r(u),g=c((function(){return"/a/b"!=p.call({source:"a",flags:"b"})})),h=o&&p.name!=l;(g||h)&&i(RegExp.prototype,l,(function(){var e=a(this),t=s(e.source),n=e.flags;return"/"+t+"/"+s(void 0===n&&A(f,e)&&!("flags"in f)?d(e):n)}),{unsafe:!0})},189:function(e,t,n){"use strict";n(7710)("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),n(5631))},5218:function(e,t,n){"use strict";var r=n(2109),o=n(4230);r({target:"String",proto:!0,forced:n(3429)("anchor")},{anchor:function(e){return o(this,"a","name",e)}})},4506:function(e,t,n){"use strict";var r=n(2109),o=n(1702),i=n(4488),a=n(9303),A=n(1340),s=n(7293),c=o("".charAt);r({target:"String",proto:!0,forced:s((function(){return"\ud842"!==" ".at(-2)}))},{at:function(e){var t=A(i(this)),n=t.length,r=a(e),o=r>=0?r:n+r;return o<0||o>=n?void 0:c(t,o)}})},4475:function(e,t,n){"use strict";var r=n(2109),o=n(4230);r({target:"String",proto:!0,forced:n(3429)("big")},{big:function(){return o(this,"big","","")}})},7929:function(e,t,n){"use strict";var r=n(2109),o=n(4230);r({target:"String",proto:!0,forced:n(3429)("blink")},{blink:function(){return o(this,"blink","","")}})},915:function(e,t,n){"use strict";var r=n(2109),o=n(4230);r({target:"String",proto:!0,forced:n(3429)("bold")},{bold:function(){return o(this,"b","","")}})},9841:function(e,t,n){"use strict";var r=n(2109),o=n(8710).codeAt;r({target:"String",proto:!0},{codePointAt:function(e){return o(this,e)}})},7852:function(e,t,n){"use strict";var r,o=n(2109),i=n(1702),a=n(1236).f,A=n(7466),s=n(1340),c=n(3929),u=n(4488),l=n(4964),f=n(1913),p=i("".endsWith),d=i("".slice),g=Math.min,h=l("endsWith");o({target:"String",proto:!0,forced:!(!f&&!h&&(r=a(String.prototype,"endsWith"),r&&!r.writable)||h)},{endsWith:function(e){var t=s(u(this));c(e);var n=arguments.length>1?arguments[1]:void 0,r=t.length,o=void 0===n?r:g(A(n),r),i=s(e);return p?p(t,i,o):d(t,o-i.length,o)===i}})},9253:function(e,t,n){"use strict";var r=n(2109),o=n(4230);r({target:"String",proto:!0,forced:n(3429)("fixed")},{fixed:function(){return o(this,"tt","","")}})},2125:function(e,t,n){"use strict";var r=n(2109),o=n(4230);r({target:"String",proto:!0,forced:n(3429)("fontcolor")},{fontcolor:function(e){return o(this,"font","color",e)}})},8830:function(e,t,n){"use strict";var r=n(2109),o=n(4230);r({target:"String",proto:!0,forced:n(3429)("fontsize")},{fontsize:function(e){return o(this,"font","size",e)}})},4953:function(e,t,n){var r=n(2109),o=n(7854),i=n(1702),a=n(1400),A=o.RangeError,s=String.fromCharCode,c=String.fromCodePoint,u=i([].join);r({target:"String",stat:!0,forced:!!c&&1!=c.length},{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,o=0;r>o;){if(t=+arguments[o++],a(t,1114111)!==t)throw A(t+" is not a valid code point");n[o]=t<65536?s(t):s(55296+((t-=65536)>>10),t%1024+56320)}return u(n,"")}})},2023:function(e,t,n){"use strict";var r=n(2109),o=n(1702),i=n(3929),a=n(4488),A=n(1340),s=n(4964),c=o("".indexOf);r({target:"String",proto:!0,forced:!s("includes")},{includes:function(e){return!!~c(A(a(this)),A(i(e)),arguments.length>1?arguments[1]:void 0)}})},8734:function(e,t,n){"use strict";var r=n(2109),o=n(4230);r({target:"String",proto:!0,forced:n(3429)("italics")},{italics:function(){return o(this,"i","","")}})},8783:function(e,t,n){"use strict";var r=n(8710).charAt,o=n(1340),i=n(9909),a=n(654),A="String Iterator",s=i.set,c=i.getterFor(A);a(String,"String",(function(e){s(this,{type:A,string:o(e),index:0})}),(function(){var e,t=c(this),n=t.string,o=t.index;return o>=n.length?{value:void 0,done:!0}:(e=r(n,o),t.index+=e.length,{value:e,done:!1})}))},9254:function(e,t,n){"use strict";var r=n(2109),o=n(4230);r({target:"String",proto:!0,forced:n(3429)("link")},{link:function(e){return o(this,"a","href",e)}})},6373:function(e,t,n){"use strict";var r=n(2109),o=n(7854),i=n(6916),a=n(1702),A=n(4994),s=n(4488),c=n(7466),u=n(1340),l=n(9670),f=n(4326),p=n(7976),d=n(7850),g=n(7066),h=n(8173),v=n(1320),m=n(7293),C=n(5112),y=n(6707),b=n(1530),w=n(7651),E=n(9909),B=n(1913),x=C("matchAll"),k="RegExp String Iterator",I=E.set,S=E.getterFor(k),T=RegExp.prototype,L=o.TypeError,R=a(g),M=a("".indexOf),O=a("".matchAll),Q=!!O&&!m((function(){O("a",/./)})),D=A((function(e,t,n,r){I(this,{type:k,regexp:e,string:t,global:n,unicode:r,done:!1})}),"RegExp String",(function(){var e=S(this);if(e.done)return{value:void 0,done:!0};var t=e.regexp,n=e.string,r=w(t,n);return null===r?{value:void 0,done:e.done=!0}:e.global?(""===u(r[0])&&(t.lastIndex=b(n,c(t.lastIndex),e.unicode)),{value:r,done:!1}):(e.done=!0,{value:r,done:!1})})),P=function(e){var t,n,r,o,i,a,A=l(this),s=u(e);return t=y(A,RegExp),void 0===(n=A.flags)&&p(T,A)&&!("flags"in T)&&(n=R(A)),r=void 0===n?"":u(n),o=new t(t===RegExp?A.source:A,r),i=!!~M(r,"g"),a=!!~M(r,"u"),o.lastIndex=c(A.lastIndex),new D(o,s,i,a)};r({target:"String",proto:!0,forced:Q},{matchAll:function(e){var t,n,r,o,a=s(this);if(null!=e){if(d(e)&&(t=u(s("flags"in T?e.flags:R(e))),!~M(t,"g")))throw L("`.matchAll` does not allow non-global regexes");if(Q)return O(a,e);if(void 0===(r=h(e,x))&&B&&"RegExp"==f(e)&&(r=P),r)return i(r,e,a)}else if(Q)return O(a,e);return n=u(a),o=new RegExp(e,"g"),B?i(P,o,n):o[x](n)}}),B||x in T||v(T,x,P)},4723:function(e,t,n){"use strict";var r=n(6916),o=n(7007),i=n(9670),a=n(7466),A=n(1340),s=n(4488),c=n(8173),u=n(1530),l=n(7651);o("match",(function(e,t,n){return[function(t){var n=s(this),o=null==t?void 0:c(t,e);return o?r(o,t,n):new RegExp(t)[e](A(n))},function(e){var r=i(this),o=A(e),s=n(t,r,o);if(s.done)return s.value;if(!r.global)return l(r,o);var c=r.unicode;r.lastIndex=0;for(var f,p=[],d=0;null!==(f=l(r,o));){var g=A(f[0]);p[d]=g,""===g&&(r.lastIndex=u(o,a(r.lastIndex),c)),d++}return 0===d?null:p}]}))},6528:function(e,t,n){"use strict";var r=n(2109),o=n(6650).end;r({target:"String",proto:!0,forced:n(7061)},{padEnd:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},3112:function(e,t,n){"use strict";var r=n(2109),o=n(6650).start;r({target:"String",proto:!0,forced:n(7061)},{padStart:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},8992:function(e,t,n){var r=n(2109),o=n(1702),i=n(5656),a=n(7908),A=n(1340),s=n(6244),c=o([].push),u=o([].join);r({target:"String",stat:!0},{raw:function(e){for(var t=i(a(e).raw),n=s(t),r=arguments.length,o=[],l=0;n>l;){if(c(o,A(t[l++])),l===n)return u(o,"");l<r&&c(o,A(arguments[l]))}}})},2481:function(e,t,n){n(2109)({target:"String",proto:!0},{repeat:n(8415)})},8757:function(e,t,n){"use strict";var r=n(2109),o=n(7854),i=n(6916),a=n(1702),A=n(4488),s=n(614),c=n(7850),u=n(1340),l=n(8173),f=n(7066),p=n(647),d=n(5112),g=n(1913),h=d("replace"),v=RegExp.prototype,m=o.TypeError,C=a(f),y=a("".indexOf),b=a("".replace),w=a("".slice),E=Math.max,B=function(e,t,n){return n>e.length?-1:""===t?n:y(e,t,n)};r({target:"String",proto:!0},{replaceAll:function(e,t){var n,r,o,a,f,d,x,k,I,S=A(this),T=0,L=0,R="";if(null!=e){if((n=c(e))&&(r=u(A("flags"in v?e.flags:C(e))),!~y(r,"g")))throw m("`.replaceAll` does not allow non-global regexes");if(o=l(e,h))return i(o,e,S,t);if(g&&n)return b(u(S),e,t)}for(a=u(S),f=u(e),(d=s(t))||(t=u(t)),x=f.length,k=E(1,x),T=B(a,f,0);-1!==T;)I=d?u(t(f,T,a)):p(f,a,T,[],void 0,t),R+=w(a,L,T)+I,L=T+x,T=B(a,f,T+k);return L<a.length&&(R+=w(a,L)),R}})},5306:function(e,t,n){"use strict";var r=n(2104),o=n(6916),i=n(1702),a=n(7007),A=n(7293),s=n(9670),c=n(614),u=n(9303),l=n(7466),f=n(1340),p=n(4488),d=n(1530),g=n(8173),h=n(647),v=n(7651),m=n(5112)("replace"),C=Math.max,y=Math.min,b=i([].concat),w=i([].push),E=i("".indexOf),B=i("".slice),x="$0"==="a".replace(/./,"$0"),k=!!/./[m]&&""===/./[m]("a","$0");a("replace",(function(e,t,n){var i=k?"$":"$0";return[function(e,n){var r=p(this),i=null==e?void 0:g(e,m);return i?o(i,e,r,n):o(t,f(r),e,n)},function(e,o){var a=s(this),A=f(e);if("string"==typeof o&&-1===E(o,i)&&-1===E(o,"$<")){var p=n(t,a,A,o);if(p.done)return p.value}var g=c(o);g||(o=f(o));var m=a.global;if(m){var x=a.unicode;a.lastIndex=0}for(var k=[];;){var I=v(a,A);if(null===I)break;if(w(k,I),!m)break;""===f(I[0])&&(a.lastIndex=d(A,l(a.lastIndex),x))}for(var S,T="",L=0,R=0;R<k.length;R++){for(var M=f((I=k[R])[0]),O=C(y(u(I.index),A.length),0),Q=[],D=1;D<I.length;D++)w(Q,void 0===(S=I[D])?S:String(S));var P=I.groups;if(g){var F=b([M],Q,O,A);void 0!==P&&w(F,P);var U=f(r(o,void 0,F))}else U=h(M,A,O,Q,P,o);O>=L&&(T+=B(A,L,O)+U,L=O+M.length)}return T+B(A,L)}]}),!!A((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!x||k)},4765:function(e,t,n){"use strict";var r=n(6916),o=n(7007),i=n(9670),a=n(4488),A=n(1150),s=n(1340),c=n(8173),u=n(7651);o("search",(function(e,t,n){return[function(t){var n=a(this),o=null==t?void 0:c(t,e);return o?r(o,t,n):new RegExp(t)[e](s(n))},function(e){var r=i(this),o=s(e),a=n(t,r,o);if(a.done)return a.value;var c=r.lastIndex;A(c,0)||(r.lastIndex=0);var l=u(r,o);return A(r.lastIndex,c)||(r.lastIndex=c),null===l?-1:l.index}]}))},7268:function(e,t,n){"use strict";var r=n(2109),o=n(4230);r({target:"String",proto:!0,forced:n(3429)("small")},{small:function(){return o(this,"small","","")}})},3123:function(e,t,n){"use strict";var r=n(2104),o=n(6916),i=n(1702),a=n(7007),A=n(7850),s=n(9670),c=n(4488),u=n(6707),l=n(1530),f=n(7466),p=n(1340),d=n(8173),g=n(1589),h=n(7651),v=n(2261),m=n(2999),C=n(7293),y=m.UNSUPPORTED_Y,b=4294967295,w=Math.min,E=[].push,B=i(/./.exec),x=i(E),k=i("".slice),I=!C((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));a("split",(function(e,t,n){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var i=p(c(this)),a=void 0===n?b:n>>>0;if(0===a)return[];if(void 0===e)return[i];if(!A(e))return o(t,i,e,a);for(var s,u,l,f=[],d=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),h=0,m=new RegExp(e.source,d+"g");(s=o(v,m,i))&&!((u=m.lastIndex)>h&&(x(f,k(i,h,s.index)),s.length>1&&s.index<i.length&&r(E,f,g(s,1)),l=s[0].length,h=u,f.length>=a));)m.lastIndex===s.index&&m.lastIndex++;return h===i.length?!l&&B(m,"")||x(f,""):x(f,k(i,h)),f.length>a?g(f,0,a):f}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:o(t,this,e,n)}:t,[function(t,n){var r=c(this),a=null==t?void 0:d(t,e);return a?o(a,t,r,n):o(i,p(r),t,n)},function(e,r){var o=s(this),a=p(e),A=n(i,o,a,r,i!==t);if(A.done)return A.value;var c=u(o,RegExp),d=o.unicode,g=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(y?"g":"y"),v=new c(y?"^(?:"+o.source+")":o,g),m=void 0===r?b:r>>>0;if(0===m)return[];if(0===a.length)return null===h(v,a)?[a]:[];for(var C=0,E=0,B=[];E<a.length;){v.lastIndex=y?0:E;var I,S=h(v,y?k(a,E):a);if(null===S||(I=w(f(v.lastIndex+(y?E:0)),a.length))===C)E=l(a,E,d);else{if(x(B,k(a,C,E)),B.length===m)return B;for(var T=1;T<=S.length-1;T++)if(x(B,S[T]),B.length===m)return B;E=C=I}}return x(B,k(a,C)),B}]}),!I,y)},6755:function(e,t,n){"use strict";var r,o=n(2109),i=n(1702),a=n(1236).f,A=n(7466),s=n(1340),c=n(3929),u=n(4488),l=n(4964),f=n(1913),p=i("".startsWith),d=i("".slice),g=Math.min,h=l("startsWith");o({target:"String",proto:!0,forced:!(!f&&!h&&(r=a(String.prototype,"startsWith"),r&&!r.writable)||h)},{startsWith:function(e){var t=s(u(this));c(e);var n=A(g(arguments.length>1?arguments[1]:void 0,t.length)),r=s(e);return p?p(t,r,n):d(t,n,n+r.length)===r}})},7397:function(e,t,n){"use strict";var r=n(2109),o=n(4230);r({target:"String",proto:!0,forced:n(3429)("strike")},{strike:function(){return o(this,"strike","","")}})},86:function(e,t,n){"use strict";var r=n(2109),o=n(4230);r({target:"String",proto:!0,forced:n(3429)("sub")},{sub:function(){return o(this,"sub","","")}})},3650:function(e,t,n){"use strict";var r=n(2109),o=n(1702),i=n(4488),a=n(9303),A=n(1340),s=o("".slice),c=Math.max,u=Math.min;r({target:"String",proto:!0,forced:!"".substr||"b"!=="ab".substr(-1)},{substr:function(e,t){var n,r,o=A(i(this)),l=o.length,f=a(e);return f===1/0&&(f=0),f<0&&(f=c(l+f,0)),(n=void 0===t?l:a(t))<=0||n===1/0||f>=(r=u(f+n,l))?"":s(o,f,r)}})},623:function(e,t,n){"use strict";var r=n(2109),o=n(4230);r({target:"String",proto:!0,forced:n(3429)("sup")},{sup:function(){return o(this,"sup","","")}})},8702:function(e,t,n){"use strict";var r=n(2109),o=n(3111).end,i=n(6091)("trimEnd"),a=i?function(){return o(this)}:"".trimEnd;r({target:"String",proto:!0,name:"trimEnd",forced:i},{trimEnd:a,trimRight:a})},5674:function(e,t,n){"use strict";var r=n(2109),o=n(3111).start,i=n(6091)("trimStart"),a=i?function(){return o(this)}:"".trimStart;r({target:"String",proto:!0,name:"trimStart",forced:i},{trimStart:a,trimLeft:a})},3210:function(e,t,n){"use strict";var r=n(2109),o=n(3111).trim;r({target:"String",proto:!0,forced:n(6091)("trim")},{trim:function(){return o(this)}})},2443:function(e,t,n){n(7235)("asyncIterator")},1817:function(e,t,n){"use strict";var r=n(2109),o=n(9781),i=n(7854),a=n(1702),A=n(2597),s=n(614),c=n(7976),u=n(1340),l=n(3070).f,f=n(9920),p=i.Symbol,d=p&&p.prototype;if(o&&s(p)&&(!("description"in d)||void 0!==p().description)){var g={},h=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:u(arguments[0]),t=c(d,this)?new p(e):void 0===e?p():p(e);return""===e&&(g[t]=!0),t};f(h,p),h.prototype=d,d.constructor=h;var v="Symbol(test)"==String(p("test")),m=a(d.toString),C=a(d.valueOf),y=/^Symbol\((.*)\)[^)]+$/,b=a("".replace),w=a("".slice);l(d,"description",{configurable:!0,get:function(){var e=C(this),t=m(e);if(A(g,e))return"";var n=v?w(t,7,-1):b(t,y,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:h})}},2401:function(e,t,n){n(7235)("hasInstance")},8722:function(e,t,n){n(7235)("isConcatSpreadable")},2165:function(e,t,n){n(7235)("iterator")},2526:function(e,t,n){"use strict";var r=n(2109),o=n(7854),i=n(5005),a=n(2104),A=n(6916),s=n(1702),c=n(1913),u=n(9781),l=n(133),f=n(7293),p=n(2597),d=n(3157),g=n(614),h=n(111),v=n(7976),m=n(2190),C=n(9670),y=n(7908),b=n(5656),w=n(4948),E=n(1340),B=n(9114),x=n(30),k=n(1956),I=n(8006),S=n(1156),T=n(5181),L=n(1236),R=n(3070),M=n(6048),O=n(5296),Q=n(206),D=n(1320),P=n(2309),F=n(6200),U=n(3501),N=n(9711),W=n(5112),j=n(6061),Y=n(7235),G=n(8003),z=n(9909),_=n(2092).forEach,V=F("hidden"),H="Symbol",J=W("toPrimitive"),Z=z.set,K=z.getterFor(H),X=Object.prototype,q=o.Symbol,$=q&&q.prototype,ee=o.TypeError,te=o.QObject,ne=i("JSON","stringify"),re=L.f,oe=R.f,ie=S.f,ae=O.f,Ae=s([].push),se=P("symbols"),ce=P("op-symbols"),ue=P("string-to-symbol-registry"),le=P("symbol-to-string-registry"),fe=P("wks"),pe=!te||!te.prototype||!te.prototype.findChild,de=u&&f((function(){return 7!=x(oe({},"a",{get:function(){return oe(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=re(X,t);r&&delete X[t],oe(e,t,n),r&&e!==X&&oe(X,t,r)}:oe,ge=function(e,t){var n=se[e]=x($);return Z(n,{type:H,tag:e,description:t}),u||(n.description=t),n},he=function(e,t,n){e===X&&he(ce,t,n),C(e);var r=w(t);return C(n),p(se,r)?(n.enumerable?(p(e,V)&&e[V][r]&&(e[V][r]=!1),n=x(n,{enumerable:B(0,!1)})):(p(e,V)||oe(e,V,B(1,{})),e[V][r]=!0),de(e,r,n)):oe(e,r,n)},ve=function(e,t){C(e);var n=b(t),r=k(n).concat(be(n));return _(r,(function(t){u&&!A(me,n,t)||he(e,t,n[t])})),e},me=function(e){var t=w(e),n=A(ae,this,t);return!(this===X&&p(se,t)&&!p(ce,t))&&(!(n||!p(this,t)||!p(se,t)||p(this,V)&&this[V][t])||n)},Ce=function(e,t){var n=b(e),r=w(t);if(n!==X||!p(se,r)||p(ce,r)){var o=re(n,r);return!o||!p(se,r)||p(n,V)&&n[V][r]||(o.enumerable=!0),o}},ye=function(e){var t=ie(b(e)),n=[];return _(t,(function(e){p(se,e)||p(U,e)||Ae(n,e)})),n},be=function(e){var t=e===X,n=ie(t?ce:b(e)),r=[];return _(n,(function(e){!p(se,e)||t&&!p(X,e)||Ae(r,se[e])})),r};if(l||(q=function(){if(v($,this))throw ee("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?E(arguments[0]):void 0,t=N(e),n=function(e){this===X&&A(n,ce,e),p(this,V)&&p(this[V],t)&&(this[V][t]=!1),de(this,t,B(1,e))};return u&&pe&&de(X,t,{configurable:!0,set:n}),ge(t,e)},D($=q.prototype,"toString",(function(){return K(this).tag})),D(q,"withoutSetter",(function(e){return ge(N(e),e)})),O.f=me,R.f=he,M.f=ve,L.f=Ce,I.f=S.f=ye,T.f=be,j.f=function(e){return ge(W(e),e)},u&&(oe($,"description",{configurable:!0,get:function(){return K(this).description}}),c||D(X,"propertyIsEnumerable",me,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!l,sham:!l},{Symbol:q}),_(k(fe),(function(e){Y(e)})),r({target:H,stat:!0,forced:!l},{for:function(e){var t=E(e);if(p(ue,t))return ue[t];var n=q(t);return ue[t]=n,le[n]=t,n},keyFor:function(e){if(!m(e))throw ee(e+" is not a symbol");if(p(le,e))return le[e]},useSetter:function(){pe=!0},useSimple:function(){pe=!1}}),r({target:"Object",stat:!0,forced:!l,sham:!u},{create:function(e,t){return void 0===t?x(e):ve(x(e),t)},defineProperty:he,defineProperties:ve,getOwnPropertyDescriptor:Ce}),r({target:"Object",stat:!0,forced:!l},{getOwnPropertyNames:ye,getOwnPropertySymbols:be}),r({target:"Object",stat:!0,forced:f((function(){T.f(1)}))},{getOwnPropertySymbols:function(e){return T.f(y(e))}}),ne&&r({target:"JSON",stat:!0,forced:!l||f((function(){var e=q();return"[null]"!=ne([e])||"{}"!=ne({a:e})||"{}"!=ne(Object(e))}))},{stringify:function(e,t,n){var r=Q(arguments),o=t;if((h(t)||void 0!==e)&&!m(e))return d(t)||(t=function(e,t){if(g(o)&&(t=A(o,this,e,t)),!m(t))return t}),r[1]=t,a(ne,null,r)}}),!$[J]){var we=$.valueOf;D($,J,(function(e){return A(we,this)}))}G(q,H),U[V]=!0},6066:function(e,t,n){n(7235)("matchAll")},9007:function(e,t,n){n(7235)("match")},3510:function(e,t,n){n(7235)("replace")},1840:function(e,t,n){n(7235)("search")},6982:function(e,t,n){n(7235)("species")},2159:function(e,t,n){n(7235)("split")},6649:function(e,t,n){n(7235)("toPrimitive")},9341:function(e,t,n){n(7235)("toStringTag")},543:function(e,t,n){n(7235)("unscopables")},8675:function(e,t,n){"use strict";var r=n(260),o=n(6244),i=n(9303),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("at",(function(e){var t=a(this),n=o(t),r=i(e),A=r>=0?r:n+r;return A<0||A>=n?void 0:t[A]}))},2990:function(e,t,n){"use strict";var r=n(1702),o=n(260),i=r(n(1048)),a=o.aTypedArray;(0,o.exportTypedArrayMethod)("copyWithin",(function(e,t){return i(a(this),e,t,arguments.length>2?arguments[2]:void 0)}))},8927:function(e,t,n){"use strict";var r=n(260),o=n(2092).every,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("every",(function(e){return o(i(this),e,arguments.length>1?arguments[1]:void 0)}))},3105:function(e,t,n){"use strict";var r=n(260),o=n(6916),i=n(1285),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("fill",(function(e){var t=arguments.length;return o(i,a(this),e,t>1?arguments[1]:void 0,t>2?arguments[2]:void 0)}))},5035:function(e,t,n){"use strict";var r=n(260),o=n(2092).filter,i=n(3074),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("filter",(function(e){var t=o(a(this),e,arguments.length>1?arguments[1]:void 0);return i(this,t)}))},7174:function(e,t,n){"use strict";var r=n(260),o=n(2092).findIndex,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("findIndex",(function(e){return o(i(this),e,arguments.length>1?arguments[1]:void 0)}))},4345:function(e,t,n){"use strict";var r=n(260),o=n(2092).find,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("find",(function(e){return o(i(this),e,arguments.length>1?arguments[1]:void 0)}))},4197:function(e,t,n){n(9843)("Float32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},6495:function(e,t,n){n(9843)("Float64",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},2846:function(e,t,n){"use strict";var r=n(260),o=n(2092).forEach,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("forEach",(function(e){o(i(this),e,arguments.length>1?arguments[1]:void 0)}))},8145:function(e,t,n){"use strict";var r=n(3832);(0,n(260).exportTypedArrayStaticMethod)("from",n(7321),r)},4731:function(e,t,n){"use strict";var r=n(260),o=n(1318).includes,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("includes",(function(e){return o(i(this),e,arguments.length>1?arguments[1]:void 0)}))},7209:function(e,t,n){"use strict";var r=n(260),o=n(1318).indexOf,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("indexOf",(function(e){return o(i(this),e,arguments.length>1?arguments[1]:void 0)}))},5109:function(e,t,n){n(9843)("Int16",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},5125:function(e,t,n){n(9843)("Int32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},7145:function(e,t,n){n(9843)("Int8",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},6319:function(e,t,n){"use strict";var r=n(7854),o=n(7293),i=n(1702),a=n(260),A=n(6992),s=n(5112)("iterator"),c=r.Uint8Array,u=i(A.values),l=i(A.keys),f=i(A.entries),p=a.aTypedArray,d=a.exportTypedArrayMethod,g=c&&c.prototype,h=!o((function(){g[s].call([1])})),v=!!g&&g.values&&g[s]===g.values&&"values"===g.values.name,m=function(){return u(p(this))};d("entries",(function(){return f(p(this))}),h),d("keys",(function(){return l(p(this))}),h),d("values",m,h||!v,{name:"values"}),d(s,m,h||!v,{name:"values"})},8867:function(e,t,n){"use strict";var r=n(260),o=n(1702),i=r.aTypedArray,a=r.exportTypedArrayMethod,A=o([].join);a("join",(function(e){return A(i(this),e)}))},7789:function(e,t,n){"use strict";var r=n(260),o=n(2104),i=n(6583),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("lastIndexOf",(function(e){var t=arguments.length;return o(i,a(this),t>1?[e,arguments[1]]:[e])}))},3739:function(e,t,n){"use strict";var r=n(260),o=n(2092).map,i=n(6304),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("map",(function(e){return o(a(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(i(e))(t)}))}))},5206:function(e,t,n){"use strict";var r=n(260),o=n(3832),i=r.aTypedArrayConstructor;(0,r.exportTypedArrayStaticMethod)("of",(function(){for(var e=0,t=arguments.length,n=new(i(this))(t);t>e;)n[e]=arguments[e++];return n}),o)},4483:function(e,t,n){"use strict";var r=n(260),o=n(3671).right,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduceRight",(function(e){var t=arguments.length;return o(i(this),e,t,t>1?arguments[1]:void 0)}))},9368:function(e,t,n){"use strict";var r=n(260),o=n(3671).left,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduce",(function(e){var t=arguments.length;return o(i(this),e,t,t>1?arguments[1]:void 0)}))},2056:function(e,t,n){"use strict";var r=n(260),o=r.aTypedArray,i=r.exportTypedArrayMethod,a=Math.floor;i("reverse",(function(){for(var e,t=this,n=o(t).length,r=a(n/2),i=0;i<r;)e=t[i],t[i++]=t[--n],t[n]=e;return t}))},3462:function(e,t,n){"use strict";var r=n(7854),o=n(6916),i=n(260),a=n(6244),A=n(4590),s=n(7908),c=n(7293),u=r.RangeError,l=r.Int8Array,f=l&&l.prototype,p=f&&f.set,d=i.aTypedArray,g=i.exportTypedArrayMethod,h=!c((function(){var e=new Uint8ClampedArray(2);return o(p,e,{length:1,0:3},1),3!==e[1]})),v=h&&i.NATIVE_ARRAY_BUFFER_VIEWS&&c((function(){var e=new l(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]}));g("set",(function(e){d(this);var t=A(arguments.length>1?arguments[1]:void 0,1),n=s(e);if(h)return o(p,this,n,t);var r=this.length,i=a(n),c=0;if(i+t>r)throw u("Wrong length");for(;c<i;)this[t+c]=n[c++]}),!h||v)},678:function(e,t,n){"use strict";var r=n(260),o=n(6304),i=n(7293),a=n(206),A=r.aTypedArray;(0,r.exportTypedArrayMethod)("slice",(function(e,t){for(var n=a(A(this),e,t),r=o(this),i=0,s=n.length,c=new r(s);s>i;)c[i]=n[i++];return c}),i((function(){new Int8Array(1).slice()})))},7462:function(e,t,n){"use strict";var r=n(260),o=n(2092).some,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("some",(function(e){return o(i(this),e,arguments.length>1?arguments[1]:void 0)}))},3824:function(e,t,n){"use strict";var r=n(7854),o=n(1702),i=n(7293),a=n(9662),A=n(4362),s=n(260),c=n(8886),u=n(256),l=n(7392),f=n(8008),p=r.Array,d=s.aTypedArray,g=s.exportTypedArrayMethod,h=r.Uint16Array,v=h&&o(h.prototype.sort),m=!(!v||i((function(){v(new h(2),null)}))&&i((function(){v(new h(2),{})}))),C=!!v&&!i((function(){if(l)return l<74;if(c)return c<67;if(u)return!0;if(f)return f<602;var e,t,n=new h(516),r=p(516);for(e=0;e<516;e++)t=e%4,n[e]=515-e,r[e]=e-2*t+3;for(v(n,(function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(n[e]!==r[e])return!0}));g("sort",(function(e){return void 0!==e&&a(e),C?v(this,e):A(d(this),function(e){return function(t,n){return void 0!==e?+e(t,n)||0:n!=n?-1:t!=t?1:0===t&&0===n?1/t>0&&1/n<0?1:-1:t>n}}(e))}),!C||m)},5021:function(e,t,n){"use strict";var r=n(260),o=n(7466),i=n(1400),a=n(6304),A=r.aTypedArray;(0,r.exportTypedArrayMethod)("subarray",(function(e,t){var n=A(this),r=n.length,s=i(e,r);return new(a(n))(n.buffer,n.byteOffset+s*n.BYTES_PER_ELEMENT,o((void 0===t?r:i(t,r))-s))}))},2974:function(e,t,n){"use strict";var r=n(7854),o=n(2104),i=n(260),a=n(7293),A=n(206),s=r.Int8Array,c=i.aTypedArray,u=i.exportTypedArrayMethod,l=[].toLocaleString,f=!!s&&a((function(){l.call(new s(1))}));u("toLocaleString",(function(){return o(l,f?A(c(this)):c(this),A(arguments))}),a((function(){return[1,2].toLocaleString()!=new s([1,2]).toLocaleString()}))||!a((function(){s.prototype.toLocaleString.call([1,2])})))},5016:function(e,t,n){"use strict";var r=n(260).exportTypedArrayMethod,o=n(7293),i=n(7854),a=n(1702),A=i.Uint8Array,s=A&&A.prototype||{},c=[].toString,u=a([].join);o((function(){c.call({})}))&&(c=function(){return u(this)});var l=s.toString!=c;r("toString",c,l)},8255:function(e,t,n){n(9843)("Uint16",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},9135:function(e,t,n){n(9843)("Uint32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},2472:function(e,t,n){n(9843)("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},9743:function(e,t,n){n(9843)("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}),!0)},8221:function(e,t,n){"use strict";var r=n(2109),o=n(1702),i=n(1340),a=String.fromCharCode,A=o("".charAt),s=o(/./.exec),c=o("".slice),u=/^[\da-f]{2}$/i,l=/^[\da-f]{4}$/i;r({global:!0},{unescape:function(e){for(var t,n,r=i(e),o="",f=r.length,p=0;p<f;){if("%"===(t=A(r,p++)))if("u"===A(r,p)){if(n=c(r,p+1,p+5),s(l,n)){o+=a(parseInt(n,16)),p+=5;continue}}else if(n=c(r,p,p+2),s(u,n)){o+=a(parseInt(n,16)),p+=2;continue}o+=t}return o}})},4129:function(e,t,n){"use strict";var r,o=n(7854),i=n(1702),a=n(2248),A=n(2423),s=n(7710),c=n(9320),u=n(111),l=n(2050),f=n(9909).enforce,p=n(8536),d=!o.ActiveXObject&&"ActiveXObject"in o,g=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},h=s("WeakMap",g,c);if(p&&d){r=c.getConstructor(g,"WeakMap",!0),A.enable();var v=h.prototype,m=i(v.delete),C=i(v.has),y=i(v.get),b=i(v.set);a(v,{delete:function(e){if(u(e)&&!l(e)){var t=f(this);return t.frozen||(t.frozen=new r),m(this,e)||t.frozen.delete(e)}return m(this,e)},has:function(e){if(u(e)&&!l(e)){var t=f(this);return t.frozen||(t.frozen=new r),C(this,e)||t.frozen.has(e)}return C(this,e)},get:function(e){if(u(e)&&!l(e)){var t=f(this);return t.frozen||(t.frozen=new r),C(this,e)?y(this,e):t.frozen.get(e)}return y(this,e)},set:function(e,t){if(u(e)&&!l(e)){var n=f(this);n.frozen||(n.frozen=new r),C(this,e)?b(this,e,t):n.frozen.set(e,t)}else b(this,e,t);return this}})}},8478:function(e,t,n){"use strict";n(7710)("WeakSet",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),n(9320))},5505:function(e,t,n){var r=n(2109),o=n(5005),i=n(1702),a=n(7293),A=n(1340),s=n(2597),c=n(8053),u=n(4170).ctoi,l=/[^\d+/a-z]/i,f=/[\t\n\f\r ]+/g,p=/[=]+$/,d=o("atob"),g=String.fromCharCode,h=i("".charAt),v=i("".replace),m=i(l.exec),C=a((function(){return""!==atob(" ")})),y=!C&&!a((function(){d()}));r({global:!0,enumerable:!0,forced:C||y},{atob:function(e){if(c(arguments.length,1),y)return d(e);var t,n,r=v(A(e),f,""),i="",a=0,C=0;if(r.length%4==0&&(r=v(r,p,"")),r.length%4==1||m(l,r))throw new(o("DOMException"))("The string is not correctly encoded","InvalidCharacterError");for(;t=h(r,a++);)s(u,t)&&(n=C%4?64*n+u[t]:u[t],C++%4&&(i+=g(255&n>>(-2*C&6))));return i}})},7479:function(e,t,n){var r=n(2109),o=n(5005),i=n(1702),a=n(7293),A=n(1340),s=n(8053),c=n(4170).itoc,u=o("btoa"),l=i("".charAt),f=i("".charCodeAt),p=!!u&&!a((function(){u()}));r({global:!0,enumerable:!0,forced:p},{btoa:function(e){if(s(arguments.length,1),p)return u(e);for(var t,n,r=A(e),i="",a=0,d=c;l(r,a)||(d="=",a%1);){if((n=f(r,a+=3/4))>255)throw new(o("DOMException"))("The string contains characters outside of the Latin1 range","InvalidCharacterError");i+=l(d,63&(t=t<<8|n)>>8-a%1*8)}return i}})},4747:function(e,t,n){var r=n(7854),o=n(8324),i=n(8509),a=n(8533),A=n(8880),s=function(e){if(e&&e.forEach!==a)try{A(e,"forEach",a)}catch(t){e.forEach=a}};for(var c in o)o[c]&&s(r[c]&&r[c].prototype);s(i)},3948:function(e,t,n){var r=n(7854),o=n(8324),i=n(8509),a=n(6992),A=n(8880),s=n(5112),c=s("iterator"),u=s("toStringTag"),l=a.values,f=function(e,t){if(e){if(e[c]!==l)try{A(e,c,l)}catch(t){e[c]=l}if(e[u]||A(e,u,t),o[t])for(var n in a)if(e[n]!==a[n])try{A(e,n,a[n])}catch(t){e[n]=a[n]}}};for(var p in o)f(r[p]&&r[p].prototype,p);f(i,"DOMTokenList")},7714:function(e,t,n){"use strict";var r=n(2109),o=n(4038),i=n(5005),a=n(7293),A=n(30),s=n(9114),c=n(3070).f,u=n(6048).f,l=n(1320),f=n(2597),p=n(5787),d=n(9670),g=n(7762),h=n(6277),v=n(3678),m=n(7741),C=n(9909),y=n(9781),b=n(1913),w="DOMException",E=i("Error"),B=i(w)||function(){try{(new(i("MessageChannel")||o("worker_threads").MessageChannel)).port1.postMessage(new WeakMap)}catch(e){if("DATA_CLONE_ERR"==e.name&&25==e.code)return e.constructor}}(),x=B&&B.prototype,k=E.prototype,I=C.set,S=C.getterFor(w),T="stack"in E(w),L=function(e){return f(v,e)&&v[e].m?v[e].c:0},R=function(){p(this,M);var e=arguments.length,t=h(e<1?void 0:arguments[0]),n=h(e<2?void 0:arguments[1],"Error"),r=L(n);if(I(this,{type:w,name:n,message:t,code:r}),y||(this.name=n,this.message=t,this.code=r),T){var o=E(t);o.name=w,c(this,"stack",s(1,m(o.stack,1)))}},M=R.prototype=A(k),O=function(e){return{enumerable:!0,configurable:!0,get:e}},Q=function(e){return O((function(){return S(this)[e]}))};y&&u(M,{name:Q("name"),message:Q("message"),code:Q("code")}),c(M,"constructor",s(1,R));var D=a((function(){return!(new B instanceof E)})),P=D||a((function(){return k.toString!==g||"2: 1"!==String(new B(1,2))})),F=D||a((function(){return 25!==new B(1,"DataCloneError").code})),U=D||25!==B.DATA_CLONE_ERR||25!==x.DATA_CLONE_ERR,N=b?P||F||U:D;r({global:!0,forced:N},{DOMException:N?R:B});var W=i(w),j=W.prototype;for(var Y in P&&(b||B===W)&&l(j,"toString",g),F&&y&&B===W&&c(j,"code",O((function(){return L(d(this).name)}))),v)if(f(v,Y)){var G=v[Y],z=G.s,_=s(6,G.c);f(W,z)||c(W,z,_),f(j,z)||c(j,z,_)}},2801:function(e,t,n){"use strict";var r=n(2109),o=n(5005),i=n(9114),a=n(3070).f,A=n(2597),s=n(5787),c=n(9587),u=n(6277),l=n(3678),f=n(7741),p=n(1913),d="DOMException",g=o("Error"),h=o(d),v=function(){s(this,m);var e=arguments.length,t=u(e<1?void 0:arguments[0]),n=u(e<2?void 0:arguments[1],"Error"),r=new h(t,n),o=g(t);return o.name=d,a(r,"stack",i(1,f(o.stack,1))),c(r,this,v),r},m=v.prototype=h.prototype,C="stack"in g(d),y="stack"in new h(1,2),b=C&&!y;r({global:!0,forced:p||b},{DOMException:b?v:h});var w=o(d),E=w.prototype;if(E.constructor!==w)for(var B in p||a(E,"constructor",i(1,w)),l)if(A(l,B)){var x=l[B],k=x.s;A(w,k)||a(w,k,i(6,x.c))}},1174:function(e,t,n){var r=n(5005),o="DOMException";n(8003)(r(o),o)},4633:function(e,t,n){var r=n(2109),o=n(7854),i=n(261);r({global:!0,bind:!0,enumerable:!0,forced:!o.setImmediate||!o.clearImmediate},{setImmediate:i.set,clearImmediate:i.clear})},5844:function(e,t,n){var r=n(2109),o=n(7854),i=n(5948),a=n(9662),A=n(8053),s=n(5268),c=o.process;r({global:!0,enumerable:!0,noTargetGet:!0},{queueMicrotask:function(e){A(arguments.length,1),a(e);var t=s&&c.domain;i(t?t.bind(e):e)}})},1295:function(e,t,n){var r,o=n(1913),i=n(2109),a=n(7854),A=n(5005),s=n(1702),c=n(7293),u=n(9711),l=n(614),f=n(4411),p=n(111),d=n(2190),g=n(408),h=n(9670),v=n(648),m=n(2597),C=n(6135),y=n(8880),b=n(6244),w=n(8053),E=n(7066),B=n(2914),x=a.Object,k=a.Date,I=a.Error,S=a.EvalError,T=a.RangeError,L=a.ReferenceError,R=a.SyntaxError,M=a.TypeError,O=a.URIError,Q=a.PerformanceMark,D=a.WebAssembly,P=D&&D.CompileError||I,F=D&&D.LinkError||I,U=D&&D.RuntimeError||I,N=A("DOMException"),W=A("Set"),j=A("Map"),Y=j.prototype,G=s(Y.has),z=s(Y.get),_=s(Y.set),V=s(W.prototype.add),H=A("Object","keys"),J=s([].push),Z=s((!0).valueOf),K=s(1..valueOf),X=s("".valueOf),q=s(E),$=s(k.prototype.getTime),ee=u("structuredClone"),te="DataCloneError",ne="Transferring",re=function(e){return!c((function(){var t=new a.Set([7]),n=e(t),r=e(x(7));return n==t||!n.has(7)||"object"!=typeof r||7!=r}))&&e},oe=a.structuredClone,ie=o||(r=oe,!(!c((function(){var e=r(new a.AggregateError([1],ee,{cause:3}));return"AggregateError"!=e.name||1!=e.errors[0]||e.message!=ee||3!=e.cause}))&&r)),ae=!oe&&re((function(e){return new Q(ee,{detail:e}).detail})),Ae=re(oe)||ae,se=function(e){throw new N("Uncloneable type: "+e,te)},ce=function(e,t){throw new N((t||"Cloning")+" of "+e+" cannot be properly polyfilled in this engine",te)},ue=function(e,t){if(d(e)&&se("Symbol"),!p(e))return e;if(t){if(G(t,e))return z(t,e)}else t=new j;var n,r,o,i,s,c,u,g,h,w,E=v(e),Q=!1;switch(E){case"Array":o=[],Q=!0;break;case"Object":o={},Q=!0;break;case"Map":o=new j,Q=!0;break;case"Set":o=new W,Q=!0;break;case"RegExp":o=new RegExp(e.source,"flags"in e?e.flags:q(e));break;case"Error":switch(r=e.name){case"AggregateError":o=A("AggregateError")([]);break;case"EvalError":o=S();break;case"RangeError":o=T();break;case"ReferenceError":o=L();break;case"SyntaxError":o=R();break;case"TypeError":o=M();break;case"URIError":o=O();break;case"CompileError":o=P();break;case"LinkError":o=F();break;case"RuntimeError":o=U();break;default:o=I()}Q=!0;break;case"DOMException":o=new N(e.message,e.name),Q=!0;break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":n=a[E],p(n)||ce(E),o=new n(ue(e.buffer,t),e.byteOffset,"DataView"===E?e.byteLength:e.length);break;case"DOMQuad":try{o=new DOMQuad(ue(e.p1,t),ue(e.p2,t),ue(e.p3,t),ue(e.p4,t))}catch(t){Ae?o=Ae(e):ce(E)}break;case"FileList":if(n=a.DataTransfer,f(n)){for(i=new n,s=0,c=b(e);s<c;s++)i.items.add(ue(e[s],t));o=i.files}else Ae?o=Ae(e):ce(E);break;case"ImageData":try{o=new ImageData(ue(e.data,t),e.width,e.height,{colorSpace:e.colorSpace})}catch(t){Ae?o=Ae(e):ce(E)}break;default:if(Ae)o=Ae(e);else switch(E){case"BigInt":o=x(e.valueOf());break;case"Boolean":o=x(Z(e));break;case"Number":o=x(K(e));break;case"String":o=x(X(e));break;case"Date":o=new k($(e));break;case"ArrayBuffer":(n=a.DataView)||"function"==typeof e.slice||ce(E);try{if("function"==typeof e.slice)o=e.slice(0);else for(c=e.byteLength,o=new ArrayBuffer(c),h=new n(e),w=new n(o),s=0;s<c;s++)w.setUint8(s,h.getUint8(s))}catch(e){throw new N("ArrayBuffer is detached",te)}break;case"SharedArrayBuffer":o=e;break;case"Blob":try{o=e.slice(0,e.size,e.type)}catch(e){ce(E)}break;case"DOMPoint":case"DOMPointReadOnly":n=a[E];try{o=n.fromPoint?n.fromPoint(e):new n(e.x,e.y,e.z,e.w)}catch(e){ce(E)}break;case"DOMRect":case"DOMRectReadOnly":n=a[E];try{o=n.fromRect?n.fromRect(e):new n(e.x,e.y,e.width,e.height)}catch(e){ce(E)}break;case"DOMMatrix":case"DOMMatrixReadOnly":n=a[E];try{o=n.fromMatrix?n.fromMatrix(e):new n(e)}catch(e){ce(E)}break;case"AudioData":case"VideoFrame":l(e.clone)||ce(E);try{o=e.clone()}catch(e){se(E)}break;case"File":try{o=new File([e],e.name,e)}catch(e){ce(E)}break;case"CryptoKey":case"GPUCompilationMessage":case"GPUCompilationInfo":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":ce(E);default:se(E)}}if(_(t,e,o),Q)switch(E){case"Array":case"Object":for(u=H(e),s=0,c=b(u);s<c;s++)g=u[s],C(o,g,ue(e[g],t));break;case"Map":e.forEach((function(e,n){_(o,ue(n,t),ue(e,t))}));break;case"Set":e.forEach((function(e){V(o,ue(e,t))}));break;case"Error":y(o,"message",ue(e.message,t)),m(e,"cause")&&y(o,"cause",ue(e.cause,t)),"AggregateError"==r&&(o.errors=ue(e.errors,t));case"DOMException":B&&y(o,"stack",ue(e.stack,t))}return o},le=oe&&!c((function(){var e=new ArrayBuffer(8),t=oe(e,{transfer:[e]});return 0!=e.byteLength||8!=t.byteLength})),fe=function(e,t){if(!p(e))throw M("Transfer option cannot be converted to a sequence");var n=[];g(e,(function(e){J(n,h(e))}));var r,o,i,A,s,c,u=0,d=b(n);if(le)for(A=oe(n,{transfer:n});u<d;)_(t,n[u],A[u++]);else for(;u<d;){if(r=n[u++],G(t,r))throw new N("Duplicate transferable",te);switch(o=v(r)){case"ImageBitmap":i=a.OffscreenCanvas,f(i)||ce(o,ne);try{(c=new i(r.width,r.height)).getContext("bitmaprenderer").transferFromImageBitmap(r),s=c.transferToImageBitmap()}catch(e){}break;case"AudioData":case"VideoFrame":l(r.clone)&&l(r.close)||ce(o,ne);try{s=r.clone(),r.close()}catch(e){}break;case"ArrayBuffer":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":ce(o,ne)}if(void 0===s)throw new N("This object cannot be transferred: "+o,te);_(t,r,s)}};i({global:!0,enumerable:!0,sham:!le,forced:ie},{structuredClone:function(e){var t,n=w(arguments.length,1)>1?h(arguments[1]):void 0,r=n?n.transfer:void 0;return void 0!==r&&(t=new j,fe(r,t)),ue(e,t)}})},2564:function(e,t,n){var r=n(2109),o=n(7854),i=n(2104),a=n(614),A=n(8113),s=n(206),c=n(8053),u=/MSIE .\./.test(A),l=o.Function,f=function(e){return function(t,n){var r=c(arguments.length,1)>2,o=a(t)?t:l(t),A=r?s(arguments,2):void 0;return e(r?function(){i(o,this,A)}:o,n)}};r({global:!0,bind:!0,forced:u},{setTimeout:f(o.setTimeout),setInterval:f(o.setInterval)})},1637:function(e,t,n){"use strict";n(6992);var r=n(2109),o=n(7854),i=n(5005),a=n(6916),A=n(1702),s=n(590),c=n(1320),u=n(2248),l=n(8003),f=n(4994),p=n(9909),d=n(5787),g=n(614),h=n(2597),v=n(9974),m=n(648),C=n(9670),y=n(111),b=n(1340),w=n(30),E=n(9114),B=n(8554),x=n(1246),k=n(8053),I=n(5112),S=n(4362),T=I("iterator"),L="URLSearchParams",R="URLSearchParamsIterator",M=p.set,O=p.getterFor(L),Q=p.getterFor(R),D=i("fetch"),P=i("Request"),F=i("Headers"),U=P&&P.prototype,N=F&&F.prototype,W=o.RegExp,j=o.TypeError,Y=o.decodeURIComponent,G=o.encodeURIComponent,z=A("".charAt),_=A([].join),V=A([].push),H=A("".replace),J=A([].shift),Z=A([].splice),K=A("".split),X=A("".slice),q=/\+/g,$=Array(4),ee=function(e){return $[e-1]||($[e-1]=W("((?:%[\\da-f]{2}){"+e+"})","gi"))},te=function(e){try{return Y(e)}catch(t){return e}},ne=function(e){var t=H(e,q," "),n=4;try{return Y(t)}catch(e){for(;n;)t=H(t,ee(n--),te);return t}},re=/[!'()~]|%20/g,oe={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ie=function(e){return oe[e]},ae=function(e){return H(G(e),re,ie)},Ae=f((function(e,t){M(this,{type:R,iterator:B(O(e).entries),kind:t})}),"Iterator",(function(){var e=Q(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n}),!0),se=function(e){this.entries=[],this.url=null,void 0!==e&&(y(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===z(e,0)?X(e,1):e:b(e)))};se.prototype={type:L,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,n,r,o,i,A,s,c=x(e);if(c)for(n=(t=B(e,c)).next;!(r=a(n,t)).done;){if(i=(o=B(C(r.value))).next,(A=a(i,o)).done||(s=a(i,o)).done||!a(i,o).done)throw j("Expected sequence with length 2");V(this.entries,{key:b(A.value),value:b(s.value)})}else for(var u in e)h(e,u)&&V(this.entries,{key:u,value:b(e[u])})},parseQuery:function(e){if(e)for(var t,n,r=K(e,"&"),o=0;o<r.length;)(t=r[o++]).length&&(n=K(t,"="),V(this.entries,{key:ne(J(n)),value:ne(_(n,"="))}))},serialize:function(){for(var e,t=this.entries,n=[],r=0;r<t.length;)e=t[r++],V(n,ae(e.key)+"="+ae(e.value));return _(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var ce=function(){d(this,ue);var e=arguments.length>0?arguments[0]:void 0;M(this,new se(e))},ue=ce.prototype;if(u(ue,{append:function(e,t){k(arguments.length,2);var n=O(this);V(n.entries,{key:b(e),value:b(t)}),n.updateURL()},delete:function(e){k(arguments.length,1);for(var t=O(this),n=t.entries,r=b(e),o=0;o<n.length;)n[o].key===r?Z(n,o,1):o++;t.updateURL()},get:function(e){k(arguments.length,1);for(var t=O(this).entries,n=b(e),r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){k(arguments.length,1);for(var t=O(this).entries,n=b(e),r=[],o=0;o<t.length;o++)t[o].key===n&&V(r,t[o].value);return r},has:function(e){k(arguments.length,1);for(var t=O(this).entries,n=b(e),r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){k(arguments.length,1);for(var n,r=O(this),o=r.entries,i=!1,a=b(e),A=b(t),s=0;s<o.length;s++)(n=o[s]).key===a&&(i?Z(o,s--,1):(i=!0,n.value=A));i||V(o,{key:a,value:A}),r.updateURL()},sort:function(){var e=O(this);S(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,n=O(this).entries,r=v(e,arguments.length>1?arguments[1]:void 0),o=0;o<n.length;)r((t=n[o++]).value,t.key,this)},keys:function(){return new Ae(this,"keys")},values:function(){return new Ae(this,"values")},entries:function(){return new Ae(this,"entries")}},{enumerable:!0}),c(ue,T,ue.entries,{name:"entries"}),c(ue,"toString",(function(){return O(this).serialize()}),{enumerable:!0}),l(ce,L),r({global:!0,forced:!s},{URLSearchParams:ce}),!s&&g(F)){var le=A(N.has),fe=A(N.set),pe=function(e){if(y(e)){var t,n=e.body;if(m(n)===L)return t=e.headers?new F(e.headers):new F,le(t,"content-type")||fe(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),w(e,{body:E(0,b(n)),headers:E(0,t)})}return e};if(g(D)&&r({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return D(e,arguments.length>1?pe(arguments[1]):{})}}),g(P)){var de=function(e){return d(this,U),new P(e,arguments.length>1?pe(arguments[1]):{})};U.constructor=de,de.prototype=U,r({global:!0,forced:!0},{Request:de})}}e.exports={URLSearchParams:ce,getState:O}},285:function(e,t,n){"use strict";n(8783);var r,o=n(2109),i=n(9781),a=n(590),A=n(7854),s=n(9974),c=n(1702),u=n(6048).f,l=n(1320),f=n(5787),p=n(2597),d=n(1574),g=n(8457),h=n(1589),v=n(8710).codeAt,m=n(3197),C=n(1340),y=n(8003),b=n(8053),w=n(1637),E=n(9909),B=E.set,x=E.getterFor("URL"),k=w.URLSearchParams,I=w.getState,S=A.URL,T=A.TypeError,L=A.parseInt,R=Math.floor,M=Math.pow,O=c("".charAt),Q=c(/./.exec),D=c([].join),P=c(1..toString),F=c([].pop),U=c([].push),N=c("".replace),W=c([].shift),j=c("".split),Y=c("".slice),G=c("".toLowerCase),z=c([].unshift),_="Invalid scheme",V="Invalid host",H="Invalid port",J=/[a-z]/i,Z=/[\d+-.a-z]/i,K=/\d/,X=/^0x/i,q=/^[0-7]+$/,$=/^\d+$/,ee=/^[\da-f]+$/i,te=/[\0\t\n\r #%/:<>?@[\\\]^|]/,ne=/[\0\t\n\r #/:<>?@[\\\]^|]/,re=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,oe=/[\t\n\r]/g,ie=function(e){var t,n,r,o;if("number"==typeof e){for(t=[],n=0;n<4;n++)z(t,e%256),e=R(e/256);return D(t,".")}if("object"==typeof e){for(t="",r=function(e){for(var t=null,n=1,r=null,o=0,i=0;i<8;i++)0!==e[i]?(o>n&&(t=r,n=o),r=null,o=0):(null===r&&(r=i),++o);return o>n&&(t=r,n=o),t}(e),n=0;n<8;n++)o&&0===e[n]||(o&&(o=!1),r===n?(t+=n?":":"::",o=!0):(t+=P(e[n],16),n<7&&(t+=":")));return"["+t+"]"}return e},ae={},Ae=d({},ae,{" ":1,'"':1,"<":1,">":1,"`":1}),se=d({},Ae,{"#":1,"?":1,"{":1,"}":1}),ce=d({},se,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),ue=function(e,t){var n=v(e,0);return n>32&&n<127&&!p(t,e)?e:encodeURIComponent(e)},le={ftp:21,file:null,http:80,https:443,ws:80,wss:443},fe=function(e,t){var n;return 2==e.length&&Q(J,O(e,0))&&(":"==(n=O(e,1))||!t&&"|"==n)},pe=function(e){var t;return e.length>1&&fe(Y(e,0,2))&&(2==e.length||"/"===(t=O(e,2))||"\\"===t||"?"===t||"#"===t)},de=function(e){return"."===e||"%2e"===G(e)},ge={},he={},ve={},me={},Ce={},ye={},be={},we={},Ee={},Be={},xe={},ke={},Ie={},Se={},Te={},Le={},Re={},Me={},Oe={},Qe={},De={},Pe=function(e,t,n){var r,o,i,a=C(e);if(t){if(o=this.parse(a))throw T(o);this.searchParams=null}else{if(void 0!==n&&(r=new Pe(n,!0)),o=this.parse(a,null,r))throw T(o);(i=I(new k)).bindURL(this),this.searchParams=i}};Pe.prototype={type:"URL",parse:function(e,t,n){var o,i,a,A,s,c=this,u=t||ge,l=0,f="",d=!1,v=!1,m=!1;for(e=C(e),t||(c.scheme="",c.username="",c.password="",c.host=null,c.port=null,c.path=[],c.query=null,c.fragment=null,c.cannotBeABaseURL=!1,e=N(e,re,"")),e=N(e,oe,""),o=g(e);l<=o.length;){switch(i=o[l],u){case ge:if(!i||!Q(J,i)){if(t)return _;u=ve;continue}f+=G(i),u=he;break;case he:if(i&&(Q(Z,i)||"+"==i||"-"==i||"."==i))f+=G(i);else{if(":"!=i){if(t)return _;f="",u=ve,l=0;continue}if(t&&(c.isSpecial()!=p(le,f)||"file"==f&&(c.includesCredentials()||null!==c.port)||"file"==c.scheme&&!c.host))return;if(c.scheme=f,t)return void(c.isSpecial()&&le[c.scheme]==c.port&&(c.port=null));f="","file"==c.scheme?u=Se:c.isSpecial()&&n&&n.scheme==c.scheme?u=me:c.isSpecial()?u=we:"/"==o[l+1]?(u=Ce,l++):(c.cannotBeABaseURL=!0,U(c.path,""),u=Oe)}break;case ve:if(!n||n.cannotBeABaseURL&&"#"!=i)return _;if(n.cannotBeABaseURL&&"#"==i){c.scheme=n.scheme,c.path=h(n.path),c.query=n.query,c.fragment="",c.cannotBeABaseURL=!0,u=De;break}u="file"==n.scheme?Se:ye;continue;case me:if("/"!=i||"/"!=o[l+1]){u=ye;continue}u=Ee,l++;break;case Ce:if("/"==i){u=Be;break}u=Me;continue;case ye:if(c.scheme=n.scheme,i==r)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=h(n.path),c.query=n.query;else if("/"==i||"\\"==i&&c.isSpecial())u=be;else if("?"==i)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=h(n.path),c.query="",u=Qe;else{if("#"!=i){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=h(n.path),c.path.length--,u=Me;continue}c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=h(n.path),c.query=n.query,c.fragment="",u=De}break;case be:if(!c.isSpecial()||"/"!=i&&"\\"!=i){if("/"!=i){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,u=Me;continue}u=Be}else u=Ee;break;case we:if(u=Ee,"/"!=i||"/"!=O(f,l+1))continue;l++;break;case Ee:if("/"!=i&&"\\"!=i){u=Be;continue}break;case Be:if("@"==i){d&&(f="%40"+f),d=!0,a=g(f);for(var y=0;y<a.length;y++){var b=a[y];if(":"!=b||m){var w=ue(b,ce);m?c.password+=w:c.username+=w}else m=!0}f=""}else if(i==r||"/"==i||"?"==i||"#"==i||"\\"==i&&c.isSpecial()){if(d&&""==f)return"Invalid authority";l-=g(f).length+1,f="",u=xe}else f+=i;break;case xe:case ke:if(t&&"file"==c.scheme){u=Le;continue}if(":"!=i||v){if(i==r||"/"==i||"?"==i||"#"==i||"\\"==i&&c.isSpecial()){if(c.isSpecial()&&""==f)return V;if(t&&""==f&&(c.includesCredentials()||null!==c.port))return;if(A=c.parseHost(f))return A;if(f="",u=Re,t)return;continue}"["==i?v=!0:"]"==i&&(v=!1),f+=i}else{if(""==f)return V;if(A=c.parseHost(f))return A;if(f="",u=Ie,t==ke)return}break;case Ie:if(!Q(K,i)){if(i==r||"/"==i||"?"==i||"#"==i||"\\"==i&&c.isSpecial()||t){if(""!=f){var E=L(f,10);if(E>65535)return H;c.port=c.isSpecial()&&E===le[c.scheme]?null:E,f=""}if(t)return;u=Re;continue}return H}f+=i;break;case Se:if(c.scheme="file","/"==i||"\\"==i)u=Te;else{if(!n||"file"!=n.scheme){u=Me;continue}if(i==r)c.host=n.host,c.path=h(n.path),c.query=n.query;else if("?"==i)c.host=n.host,c.path=h(n.path),c.query="",u=Qe;else{if("#"!=i){pe(D(h(o,l),""))||(c.host=n.host,c.path=h(n.path),c.shortenPath()),u=Me;continue}c.host=n.host,c.path=h(n.path),c.query=n.query,c.fragment="",u=De}}break;case Te:if("/"==i||"\\"==i){u=Le;break}n&&"file"==n.scheme&&!pe(D(h(o,l),""))&&(fe(n.path[0],!0)?U(c.path,n.path[0]):c.host=n.host),u=Me;continue;case Le:if(i==r||"/"==i||"\\"==i||"?"==i||"#"==i){if(!t&&fe(f))u=Me;else if(""==f){if(c.host="",t)return;u=Re}else{if(A=c.parseHost(f))return A;if("localhost"==c.host&&(c.host=""),t)return;f="",u=Re}continue}f+=i;break;case Re:if(c.isSpecial()){if(u=Me,"/"!=i&&"\\"!=i)continue}else if(t||"?"!=i)if(t||"#"!=i){if(i!=r&&(u=Me,"/"!=i))continue}else c.fragment="",u=De;else c.query="",u=Qe;break;case Me:if(i==r||"/"==i||"\\"==i&&c.isSpecial()||!t&&("?"==i||"#"==i)){if(".."===(s=G(s=f))||"%2e."===s||".%2e"===s||"%2e%2e"===s?(c.shortenPath(),"/"==i||"\\"==i&&c.isSpecial()||U(c.path,"")):de(f)?"/"==i||"\\"==i&&c.isSpecial()||U(c.path,""):("file"==c.scheme&&!c.path.length&&fe(f)&&(c.host&&(c.host=""),f=O(f,0)+":"),U(c.path,f)),f="","file"==c.scheme&&(i==r||"?"==i||"#"==i))for(;c.path.length>1&&""===c.path[0];)W(c.path);"?"==i?(c.query="",u=Qe):"#"==i&&(c.fragment="",u=De)}else f+=ue(i,se);break;case Oe:"?"==i?(c.query="",u=Qe):"#"==i?(c.fragment="",u=De):i!=r&&(c.path[0]+=ue(i,ae));break;case Qe:t||"#"!=i?i!=r&&("'"==i&&c.isSpecial()?c.query+="%27":c.query+="#"==i?"%23":ue(i,ae)):(c.fragment="",u=De);break;case De:i!=r&&(c.fragment+=ue(i,Ae))}l++}},parseHost:function(e){var t,n,r;if("["==O(e,0)){if("]"!=O(e,e.length-1))return V;if(t=function(e){var t,n,r,o,i,a,A,s=[0,0,0,0,0,0,0,0],c=0,u=null,l=0,f=function(){return O(e,l)};if(":"==f()){if(":"!=O(e,1))return;l+=2,u=++c}for(;f();){if(8==c)return;if(":"!=f()){for(t=n=0;n<4&&Q(ee,f());)t=16*t+L(f(),16),l++,n++;if("."==f()){if(0==n)return;if(l-=n,c>6)return;for(r=0;f();){if(o=null,r>0){if(!("."==f()&&r<4))return;l++}if(!Q(K,f()))return;for(;Q(K,f());){if(i=L(f(),10),null===o)o=i;else{if(0==o)return;o=10*o+i}if(o>255)return;l++}s[c]=256*s[c]+o,2!=++r&&4!=r||c++}if(4!=r)return;break}if(":"==f()){if(l++,!f())return}else if(f())return;s[c++]=t}else{if(null!==u)return;l++,u=++c}}if(null!==u)for(a=c-u,c=7;0!=c&&a>0;)A=s[c],s[c--]=s[u+a-1],s[u+--a]=A;else if(8!=c)return;return s}(Y(e,1,-1)),!t)return V;this.host=t}else if(this.isSpecial()){if(e=m(e),Q(te,e))return V;if(t=function(e){var t,n,r,o,i,a,A,s=j(e,".");if(s.length&&""==s[s.length-1]&&s.length--,(t=s.length)>4)return e;for(n=[],r=0;r<t;r++){if(""==(o=s[r]))return e;if(i=10,o.length>1&&"0"==O(o,0)&&(i=Q(X,o)?16:8,o=Y(o,8==i?1:2)),""===o)a=0;else{if(!Q(10==i?$:8==i?q:ee,o))return e;a=L(o,i)}U(n,a)}for(r=0;r<t;r++)if(a=n[r],r==t-1){if(a>=M(256,5-t))return null}else if(a>255)return null;for(A=F(n),r=0;r<n.length;r++)A+=n[r]*M(256,3-r);return A}(e),null===t)return V;this.host=t}else{if(Q(ne,e))return V;for(t="",n=g(e),r=0;r<n.length;r++)t+=ue(n[r],ae);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return p(le,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"==this.scheme&&1==t&&fe(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,n=e.username,r=e.password,o=e.host,i=e.port,a=e.path,A=e.query,s=e.fragment,c=t+":";return null!==o?(c+="//",e.includesCredentials()&&(c+=n+(r?":"+r:"")+"@"),c+=ie(o),null!==i&&(c+=":"+i)):"file"==t&&(c+="//"),c+=e.cannotBeABaseURL?a[0]:a.length?"/"+D(a,"/"):"",null!==A&&(c+="?"+A),null!==s&&(c+="#"+s),c},setHref:function(e){var t=this.parse(e);if(t)throw T(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"==e)try{return new Fe(e.path[0]).origin}catch(e){return"null"}return"file"!=e&&this.isSpecial()?e+"://"+ie(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(C(e)+":",ge)},getUsername:function(){return this.username},setUsername:function(e){var t=g(C(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<t.length;n++)this.username+=ue(t[n],ce)}},getPassword:function(){return this.password},setPassword:function(e){var t=g(C(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<t.length;n++)this.password+=ue(t[n],ce)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?ie(e):ie(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,xe)},getHostname:function(){var e=this.host;return null===e?"":ie(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,ke)},getPort:function(){var e=this.port;return null===e?"":C(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""==(e=C(e))?this.port=null:this.parse(e,Ie))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+D(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,Re))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""==(e=C(e))?this.query=null:("?"==O(e,0)&&(e=Y(e,1)),this.query="",this.parse(e,Qe)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!=(e=C(e))?("#"==O(e,0)&&(e=Y(e,1)),this.fragment="",this.parse(e,De)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var Fe=function(e){var t=f(this,Ue),n=b(arguments.length,1)>1?arguments[1]:void 0,r=B(t,new Pe(e,!1,n));i||(t.href=r.serialize(),t.origin=r.getOrigin(),t.protocol=r.getProtocol(),t.username=r.getUsername(),t.password=r.getPassword(),t.host=r.getHost(),t.hostname=r.getHostname(),t.port=r.getPort(),t.pathname=r.getPathname(),t.search=r.getSearch(),t.searchParams=r.getSearchParams(),t.hash=r.getHash())},Ue=Fe.prototype,Ne=function(e,t){return{get:function(){return x(this)[e]()},set:t&&function(e){return x(this)[t](e)},configurable:!0,enumerable:!0}};if(i&&u(Ue,{href:Ne("serialize","setHref"),origin:Ne("getOrigin"),protocol:Ne("getProtocol","setProtocol"),username:Ne("getUsername","setUsername"),password:Ne("getPassword","setPassword"),host:Ne("getHost","setHost"),hostname:Ne("getHostname","setHostname"),port:Ne("getPort","setPort"),pathname:Ne("getPathname","setPathname"),search:Ne("getSearch","setSearch"),searchParams:Ne("getSearchParams"),hash:Ne("getHash","setHash")}),l(Ue,"toJSON",(function(){return x(this).serialize()}),{enumerable:!0}),l(Ue,"toString",(function(){return x(this).serialize()}),{enumerable:!0}),S){var We=S.createObjectURL,je=S.revokeObjectURL;We&&l(Fe,"createObjectURL",s(We,S)),je&&l(Fe,"revokeObjectURL",s(je,S))}y(Fe,"URL"),o({global:!0,forced:!a,sham:!i},{URL:Fe})},3753:function(e,t,n){"use strict";var r=n(2109),o=n(6916);r({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return o(URL.prototype.toString,this)}})},8594:function(e,t,n){n(2526),n(1817),n(2443),n(2401),n(8722),n(2165),n(9007),n(6066),n(3510),n(1840),n(6982),n(2159),n(6649),n(9341),n(543),n(1703),n(6647),n(9170),n(2120),n(2262),n(2222),n(545),n(6541),n(3290),n(7327),n(9826),n(4553),n(4944),n(6535),n(9554),n(1038),n(6699),n(2772),n(9753),n(6992),n(9600),n(4986),n(1249),n(6572),n(5827),n(6644),n(5069),n(7042),n(5212),n(2707),n(8706),n(561),n(3792),n(9244),n(8264),n(6938),n(9575),n(6716),n(3016),n(3843),n(1801),n(9550),n(8733),n(5735),n(6078),n(3710),n(2130),n(4812),n(4855),n(8309),n(5837),n(8862),n(3706),n(1532),n(9752),n(2376),n(3181),n(3484),n(2388),n(8621),n(403),n(4755),n(5438),n(332),n(658),n(197),n(4914),n(2420),n(160),n(970),n(2703),n(3689),n(9653),n(3299),n(5192),n(3161),n(4048),n(8285),n(4363),n(5994),n(1874),n(9494),n(1354),n(6977),n(5147),n(9601),n(8011),n(9595),n(3321),n(9070),n(5500),n(9720),n(3371),n(8559),n(5003),n(9337),n(6210),n(489),n(6314),n(3304),n(1825),n(8410),n(2200),n(7941),n(4869),n(3952),n(7227),n(514),n(8304),n(1539),n(6833),n(4678),n(1058),n(8674),n(7922),n(4668),n(7727),n(224),n(2419),n(9596),n(2586),n(4819),n(5683),n(9361),n(1037),n(5898),n(7318),n(4361),n(3593),n(9532),n(1299),n(4603),n(8450),n(4916),n(2087),n(8386),n(7601),n(9714),n(189),n(4506),n(9841),n(7852),n(4953),n(2023),n(8783),n(4723),n(6373),n(6528),n(3112),n(8992),n(2481),n(5306),n(8757),n(4765),n(3123),n(6755),n(3650),n(3210),n(8702),n(5674),n(5218),n(4475),n(7929),n(915),n(9253),n(2125),n(8830),n(8734),n(9254),n(7268),n(7397),n(86),n(623),n(4197),n(6495),n(7145),n(5109),n(5125),n(2472),n(9743),n(8255),n(9135),n(8675),n(2990),n(8927),n(3105),n(5035),n(4345),n(7174),n(2846),n(8145),n(4731),n(7209),n(6319),n(8867),n(7789),n(3739),n(5206),n(9368),n(4483),n(2056),n(3462),n(678),n(7462),n(3824),n(5021),n(2974),n(5016),n(8221),n(4129),n(8478),n(5505),n(7479),n(4747),n(3948),n(7714),n(2801),n(1174),n(4633),n(5844),n(1295),n(2564),n(285),n(3753),n(1637),n(857)},2021:function(e,t,n){"use strict";var r=n(7537),o=n.n(r),i=n(3645),a=n.n(i),A=n(1667),s=n.n(A),c=new URL(n(8613),n.b),u=new URL(n(5442),n.b),l=new URL(n(5986),n.b),f=a()(o()),p=s()(c),d=s()(u),g=s()(l);f.push([e.id,'@charset "UTF-8";@keyframes op-spinner{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@-webkit-keyframes op-slideOutDown{from{-webkit-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0)}to{visibility:hidden;-webkit-transform:translate3d(0, 100%, 0);transform:translate3d(0, 100%, 0)}}@keyframes op-slideOutDown{from{-webkit-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0)}to{visibility:hidden;-webkit-transform:translate3d(0, 100%, 0);transform:translate3d(0, 100%, 0)}}@-webkit-keyframes op-slideInUp{from{-webkit-transform:translate3d(0, 100%, 0);transform:translate3d(0, 100%, 0);opacity:1}to{-webkit-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0)}}@keyframes op-slideInUp{from{-webkit-transform:translate3d(0, 100%, 0);transform:translate3d(0, 100%, 0);opacity:1}to{-webkit-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0)}}@font-face{font-family:"frameIcon";src:url('+p+") format('truetype');font-weight:normal;font-style:normal}@font-face{font-family:'op-icons';src:url("+d+") format('truetype');font-weight:normal;font-style:normal}@font-face{font-family:'op-seek-icons';src:url("+g+') format(\'truetype\');font-weight:normal;font-style:normal}:root{--op-accent-color:#50e3c2}.op-wrapper.ovenplayer{position:relative;max-height:100%;overflow:hidden;zoom:1 !important;width:100%;display:block;font-family:Helvetica,Arial,sans-serif;background-color:#000;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;color:#fff;font-size:14px;font-weight:100;outline:0;-webkit-touch-callout:none;user-select:none}.op-wrapper.ovenplayer *{box-sizing:inherit}.op-wrapper.ovenplayer object{width:100%;height:100%;position:absolute}.op-wrapper.ovenplayer:before,.op-wrapper.ovenplayer:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}.op-wrapper.ovenplayer *,.op-wrapper.ovenplayer *:before,.op-wrapper.ovenplayer *:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}.op-wrapper.ovenplayer.op-fullscreen{width:100% !important;height:100% !important;top:0;right:0;bottom:0;left:0;z-index:9999;margin:0;position:fixed}.op-wrapper.ovenplayer.op-fullscreen .op-watermark-container,.op-wrapper.ovenplayer.op-fullscreen .op-thumbnail-container{width:100vw;max-width:calc(100vh * 16 / 9);height:calc(100vw * 9 / 16);max-height:100vh;top:50%;left:50%;transform:translate(-50%, -50%)}.op-wrapper.ovenplayer.op-autohide{cursor:none}.op-wrapper.ovenplayer.op-autohide .op-bottom-panel{-webkit-animation-name:op-slideOutDown;animation-name:op-slideOutDown;-webkit-animation-duration:.2s;animation-duration:.2s;-webkit-animation-fill-mode:both;animation-fill-mode:both}.op-wrapper.ovenplayer.op-autohide .op-progressbar-container,.op-wrapper.ovenplayer.op-autohide .op-controls .op-button{cursor:none}.op-wrapper.ovenplayer.op-autohide .op-caption-text-container{bottom:25px}.op-wrapper.ovenplayer.op-no-controls .op-controls-container{display:none !important}.op-wrapper.ovenplayer .op-ratio{padding-bottom:56.25%}.op-wrapper.ovenplayer ::-webkit-scrollbar{width:5px;height:8px}.op-wrapper.ovenplayer ::-webkit-scrollbar-button:start:decrement,.op-wrapper.ovenplayer ::-webkit-scrollbar-button:end:increment{display:block;height:3px;background:#2f2f3e}.op-wrapper.ovenplayer ::-webkit-scrollbar-track{background:#2f2f3e;-webkit-border-radius:10px;border-radius:10px}.op-wrapper.ovenplayer ::-webkit-scrollbar-thumb{height:50px;width:50px;background:#606071;-webkit-border-radius:8px;border-radius:8px}.op-wrapper.ovenplayer .op-clear{color:inherit;background-color:transparent;padding:0;margin:0;float:none;font-family:Helvetica,Arial,sans-serif;font-size:1em;line-height:1em;list-style:none;text-transform:none;vertical-align:baseline;border:0;font-variant:inherit;font-stretch:inherit;-webkit-tap-highlight-color:rgba(255,255,255,0)}.op-player{position:absolute;top:0;height:100%;width:100%}.op-player .op-core-ui-wrapper{position:relative;height:100%}.op-player .op-media-element-container{position:absolute;left:0px;top:0px;width:100%;height:100%}.op-player .op-media-element-container video{position:absolute;left:0;top:0;width:100%;height:100%}.op-player .op-media-element-container object{width:100%;height:100%}.op-ads{position:absolute;height:100%;width:100%;padding-bottom:34px;top:0}.op-ads>div{position:absolute !important;width:100% !important;height:100% !important}.op-ads>div iframe{pointer-events:auto}.op-ads video.op-ads-vast-video{background-color:#000;position:absolute;width:100%;height:100%;left:0;top:0;z-index:1}.op-ads .op-ads-button{bottom:36px;cursor:default;margin-right:4px;pointer-events:auto;position:absolute;right:0;z-index:1;width:auto !important;height:auto !important;border-radius:4px;background-color:rgba(18,18,28,0.7);min-width:155px;display:none}.op-ads .op-ads-button .op-ads-textview{color:#e6e6e6;font-weight:normal;font-size:11px;padding:6px 12px;text-align:center;display:inline-block;width:100%;vertical-align:middle}.op-ads .op-ads-button .videoAdUiAction{padding:8px 24px;cursor:pointer;direction:ltr;font-weight:normal;font-size:20px;border:1px solid rgba(255,255,255,0.5)}.op-ads .op-ads-button .videoAdUiAction:hover{border-radius:4px;border:1px solid #fff}.op-ads .op-ads-button .videoAdUiAction i{display:inline-block;width:auto}.op-button{display:inline-block;border:none;background:transparent;padding:0;color:inherit;text-align:inherit;overflow:hidden;font-weight:100;text-indent:0 !important}.op-button:focus,.op-button{outline:0}i.op-con{font-family:"op-icons","op-seek-icons";font-style:normal;font-weight:normal;speak:none;font-size:inherit;width:auto;font-size:30px;line-height:30px;display:block;text-decoration:inherit;text-align:center;font-variant:normal;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;cursor:pointer}i.op-con.disable{color:#4f4f4f}i.op-con.op-close-icon::before{content:"\\e900"}i.op-con.op-pause-big::before{content:"\\e911"}i.op-con.op-fullscreen-compress::before{content:"\\e901"}i.op-con.op-fullscreen-expand::before{content:"\\e902"}i.op-con.op-arrow-left::before{content:"\\e903"}i.op-con.op-arrow-right::before{content:"\\e909"}i.op-con.op-empty-video::before{content:"\\e904"}i.op-con.op-play::before{content:"\\e906"}i.op-con.op-replay::before{content:"\\e908"}i.op-con.op-seek-back::before{content:"\\e920"}i.op-con.op-seek-forward::before{content:"\\e921"}i.op-con.op-playlist-icon::before{content:"\\e907"}i.op-con.op-replay-big::before{content:"\\e908"}i.op-con.op-setting::before{content:"\\e90A"}i.op-con.op-pause::before{content:"\\e90C"}i.op-con.op-volume-small{display:none;margin-top:-1px}i.op-con.op-volume-small::before{content:"\\e90D"}i.op-con.op-volume-mute{display:none}i.op-con.op-volume-mute::before{content:"\\e90E"}i.op-con.op-volume-max::before{content:"\\e90F"}i.op-con.op-play-big::before{content:"\\e910"}i.op-con.op-warning::before{content:"\\e912"}.op-badge{display:inline-block;padding:.75em .714em .714em .68em;font-size:1em;line-height:1;text-align:center;white-space:nowrap;vertical-align:baseline;border-radius:.286em;background-color:#12121c}.op-playlist{position:absolute;width:100%;height:100%;left:0;top:0;padding:2.857em;background:#000;z-index:6}.op-playlist .op-badge{position:absolute;top:.857em;right:.857em;opacity:.7}.op-playlist .btn-left{float:left;font-size:2.857em}.op-playlist .btn-right{float:right;font-size:2.857em}.op-playlist .op-playlist-header{font-size:2.857em;font-weight:bold}.op-playlist .op-playlist-header:after{display:block;content:\'\';clear:both}.op-playlist .op-playlist-header .op-con.op-close-icon{float:right}.op-playlist .op-playlist-body{height:100%;overflow:hidden;position:relative}.op-playlist .op-playlist-body .op-playlist-body-arrows{margin-top:-15px;position:absolute;top:50%;height:30px;-ms-transform:translateY(-50%);transform:translateY(-50%);width:100%;left:0}.op-playlist .op-playlist-body .op-playlist-body-container{width:100%;height:100%;position:relative;margin-right:auto;margin-left:auto;max-width:992px}.op-playlist .op-playlist-body .op-playlist-body-container .op-playlist-body-center{margin:0;position:absolute;top:50%;padding-right:3em;padding-left:3em;-ms-transform:translateY(-50%);transform:translateY(-50%);width:100%}.op-playlist .op-playlist-body .op-playlist-body-row{margin-right:-15px;margin-left:-15px;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.op-playlist .op-playlist-body .op-playlist-body-row .op-playlist-card{padding-right:15px;padding-left:15px;margin:15px 0;-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%;cursor:pointer}.op-playlist .op-playlist-body .op-playlist-body-row .op-playlist-card.active{color:#50e3c2;color:var(--op-accent-color)}.op-playlist .op-playlist-body .op-playlist-body-row .op-playlist-card.active .op-playlist-card-thumbnail{border-color:#50e3c2;border-color:var(--op-accent-color)}.op-playlist .op-playlist-body .op-playlist-body-row .op-playlist-card .op-playlist-card-thumbnail{position:relative;display:block;width:100%;padding:0;overflow:hidden;border:.214em solid transparent;background-color:#000}.op-playlist .op-playlist-body .op-playlist-body-row .op-playlist-card .op-playlist-card-thumbnail img{position:absolute;top:0;bottom:0;left:0;width:100%;height:100%;border:0}.op-playlist .op-playlist-body .op-playlist-body-row .op-playlist-card .op-playlist-card-thumbnail.empty{background-color:#bababa}.op-playlist .op-playlist-body .op-playlist-body-row .op-playlist-card .op-playlist-card-thumbnail.empty>i{margin:0;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);color:#fff !important;font-size:1.6em !important}.op-playlist .op-playlist-body .op-playlist-body-row .op-playlist-card .op-playlist-card-thumbnail::before{padding-top:56.25%;display:block;content:""}.op-playlist .op-playlist-body .op-playlist-body-row .op-playlist-card .op-playlist-card-title{margin-top:.857em;font-size:1.429em;padding:2px 0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.op-message-box{position:absolute;top:0;left:0;width:100%;height:100%;z-index:4}.op-message-box .op-message-container{position:absolute;top:45%;margin-top:-35px;width:100%;padding:0 12px;text-align:center}.op-message-box .op-message-container .op-message-text{display:inline-block;background-color:rgba(18,18,28,0.3);padding:.8em 1.2em;word-wrap:break-word;max-width:80%;border-radius:4px;cursor:pointer}.op-message-box .op-message-container .op-message-text .op-message-description{font-size:12px;margin-top:12px;color:#999}.op-message-box .op-message-container .op-message-icon{display:inline-block;margin-top:12px;width:100%}.op-message-box .op-message-container .op-message-icon i.op-con{cursor:pointer;font-size:80px;width:80px;height:80px;line-height:80px;display:inline-block;text-shadow:2px 2px 7px rgba(0,0,0,0.8),0 0 1px #000}.op-message-box.op-message-box-default-cursor .op-message-container .op-message-text{cursor:default}.op-message-box.op-message-box-default-cursor .op-message-container .op-message-icon i.op-con{cursor:default}.op-bigbutton-container{cursor:pointer;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);text-align:center;z-index:5}.op-bigbutton-container .op-bigbutton{width:80px;height:80px;display:block;font-size:80px;line-height:80px;text-shadow:2px 2px 7px rgba(0,0,0,0.8),0 0 1px #000}.op-thumbnail-container{position:absolute;width:100%;height:100%;top:0;left:0;z-index:2;pointer-events:none}.op-thumbnail-container .op-thumbnail-wrapper{position:absolute;left:0;top:0;width:100%;height:100%}.op-thumbnail-container .op-thumbnail-wrapper img{width:100%;height:100%}.op-thumbnail-container .op-thumbnail-wrapper .op-thumbnail-header{position:absolute;left:1rem;top:1rem;padding:0 .5rem;font-size:2.857em;font-weight:bold;line-height:1.4;text-shadow:2px 2px 7px rgba(0,0,0,0.8),0 0 1px #000}.op-thumbnail-container .op-thumbnail-wrapper .op-thumbnail-header:after{display:block;content:\'\';clear:both}.op-watermark-container{position:absolute;width:100%;height:100%;top:0;left:0;z-index:3}.op-watermark-container .op-watermark{position:absolute;display:inline-block}.op-watermark-container .op-watermark img{width:100%;height:100%}.op-watermark-container .op-watermark .op-watermark-text{font-size:14px}.op-setting-panel{position:absolute;bottom:55px;right:12px;overflow-y:auto;max-height:100%;width:260px;user-select:none;background-color:rgba(28,28,28,0.9);text-shadow:0 0 2px rgba(0,0,0,0.5);z-index:8}.op-setting-panel.background{display:none}.op-setting-panel .op-setting-title,.op-setting-panel .op-setting-item{width:100%;height:38px;line-height:38px;cursor:pointer;outline:none;text-align:left}.op-setting-panel .op-setting-title-container .op-setting-title .op-setting-title-title{padding-left:12px;font-weight:bold}.op-setting-panel .op-setting-title-container .op-setting-title .op-setting-title-previcon{padding:0 0 0 12px;margin-right:-6px}.op-setting-panel .op-setting-item-container .op-setting-item:hover{background-color:rgba(255,255,255,0.1)}.op-setting-panel .op-setting-item-container .op-setting-item .op-setting-item-title{padding-left:12px}.op-setting-panel .op-setting-item-container .op-setting-item .op-setting-item-nexticon{float:right;padding-right:12px;margin-left:-6px}.op-setting-panel .op-setting-item-container .op-setting-item span.op-setting-item-value{float:right;padding-right:12px}.op-setting-panel .op-setting-item-container .op-setting-item .op-setting-item-checked{padding-left:12px;visibility:hidden}.op-setting-panel .op-setting-item-container .op-setting-item .op-setting-item-checked.op-show{visibility:visible}.op-controls-container{display:none}.op-controls-container .op-bottom-panel{position:absolute;left:0px;bottom:0px;width:100%;z-index:5;-webkit-animation-name:op-slideInUp;animation-name:op-slideInUp;-webkit-animation-duration:.5s;animation-duration:.5s;-webkit-animation-fill-mode:both;animation-fill-mode:both}.op-controls-container .op-bottom-panel .op-gradient-bottom{position:absolute;width:100%;height:100%;background-color:rgba(18,18,18,0.5);pointer-events:none}.op-controls-container .op-bottom-panel .op-progressbar-container{display:block;position:relative;width:100%;height:4px;bottom:50px}.op-controls-container .op-bottom-panel .op-progressbar-container.op-progressbar-container-disabled{cursor:default}.op-controls-container .op-bottom-panel .op-progressbar-container .op-progressbar-padding{position:absolute;width:100%;height:15px;bottom:-5px;cursor:pointer}.op-controls-container .op-bottom-panel .op-controls{position:relative;width:100%;height:50px;text-align:left;overflow:hidden}.op-controls-container .op-bottom-panel .op-controls:after{content:\'\';clear:both}.op-controls-container .op-bottom-panel .op-controls .op-setting-button{position:relative;margin-right:12px}.op-controls-container .op-bottom-panel .op-controls .op-playlist-button{position:relative;margin-right:12px}.op-controls-container .op-bottom-panel .op-controls .op-navigators{float:left;height:30px;line-height:30px}.op-controls-container .op-bottom-panel .op-controls .op-left-controls{position:absolute;top:0;left:0;padding:14px 0 10px 0}.op-controls-container .op-bottom-panel .op-controls .op-left-controls:after{content:\'\';clear:both}.op-controls-container .op-bottom-panel .op-controls .op-right-controls{position:absolute;top:0;right:0;padding:14px 0 10px 0}.op-controls-container .op-bottom-panel .op-controls .op-right-controls:after{content:\'\';clear:both}.op-controls-container .op-bottom-panel .op-controls .op-frame-buttons{position:relative;display:inline-block;margin-left:14px;overflow:hidden;font-weight:100;height:30px}.op-controls-container .op-bottom-panel .op-controls .op-frame-buttons .op-frame-button{margin-right:6px;position:relative;text-align:center;color:#fff}.op-controls-container .op-bottom-panel .op-controls .op-frame-buttons .op-frame-button .frame-icon{position:relative}.op-controls-container .op-bottom-panel .op-controls .op-frame-buttons .op-frame-button .frame-icon.reverse:after{content:\'\\e900\'}.op-controls-container .op-bottom-panel .op-controls .op-frame-buttons .op-frame-button .frame-icon:after{font-family:\'frameIcon\' !important;speak:none;content:\'\\e901\';font-style:normal;font-weight:normal;font-variant:normal;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;position:absolute;font-size:2.4em;left:0;line-height:30px;height:30px}.op-controls-container .op-bottom-panel .op-controls .op-frame-buttons .op-frame-button .frame-icon .btn-text{font-weight:bold;font-size:.8em;line-height:30px;height:30px}.op-progressbar{position:absolute;bottom:0;left:0;width:100%;height:100%;outline:none;margin-top:10px}.op-progressbar .op-play-background-color{background-color:#50e3c2;background-color:var(--op-accent-color)}.op-progressbar .op-progress-list{cursor:pointer;position:relative;height:100%;background:rgba(255,255,255,0.2)}.op-progressbar .op-progress-list .op-load-progress,.op-progressbar .op-progress-list .op-play-progress,.op-progressbar .op-progress-list .op-hover-progress{position:absolute;left:0;bottom:0;width:100%;height:100%}.op-progressbar .op-progress-list .op-play-progress{width:0}.op-progressbar .op-progress-list .op-load-progress{width:0;background-color:rgba(255,255,255,0.5)}.op-progressbar .op-progress-list .op-hover-progress{left:0;width:0;background-color:rgba(255,255,255,0.6)}.op-progressbar .op-progressbar-knob-container{position:absolute;top:-5px;left:0}.op-progressbar .op-progressbar-knob-container .op-progressbar-knob{width:14px;height:14px;border-radius:7px}.op-progressbar .op-progressbar-time{display:none;position:absolute;bottom:15px;left:auto;width:auto;background-color:rgba(28,28,28,0.9);border-radius:2px;padding:5px 9px;font-size:.8em;line-height:15px;user-select:none;white-space:nowrap;opacity:.7}.op-progressbar-hover .op-progressbar-time{display:inline-block}.op-on-error .op-progressbar-time{display:none}.op-progressbar-section-start,.op-progressbar-section-end{display:none;position:absolute;width:3px;height:14px;bottom:-5px;background-color:#50e3c2;background-color:var(--op-accent-color)}.op-progressbar-preview{position:absolute;display:none;bottom:50px;border:2px solid #fff;border-radius:2px;background-color:#000;z-index:9}.op-play-controller{margin-left:15px}.op-seek-button{position:relative;top:0px}.op-seek-button.op-seek-button-back{margin-left:12px}.op-seek-button.op-seek-button-forward{margin-left:6px}.op-seek-button i{padding-top:1px;font-size:26px}.op-seek-button span{position:absolute;top:10.5px;left:0;right:0;text-align:center;font-size:10px;line-height:10px;cursor:pointer}.op-volume-controller{display:inline-block;position:relative;margin-left:12px}.op-volume-controller:after{content:\'\';clear:both}.op-volume-controller .op-volume-button{float:left}@-webkit-keyframes slide{100%{left:0}}@keyframes slide{100%{left:0}}.op-volume-controller .op-volume-slider-container{float:left;opacity:0;position:relative;width:0px;margin-right:0;line-height:30px;height:30px;cursor:pointer;user-select:none;outline:none}.op-volume-controller .op-volume-slider-container.active{width:70px;opacity:1;margin-left:8px;-moz-transition:opacity .4s cubic-bezier(0, 0, .2, 1);-webkit-transition:opacity .4s cubic-bezier(0, 0, .2, 1);transition:opacity .4s cubic-bezier(0, 0, .2, 1)}.op-volume-controller .op-volume-slider-container .op-volume-silder{height:100%;position:relative}.op-volume-controller .op-volume-slider-container .op-volume-silder .op-volume-slider-bg,.op-volume-controller .op-volume-slider-container .op-volume-silder .op-volume-slider-value{position:absolute;display:block;left:0;top:50%;height:4px;margin-top:-2px;border-radius:10px}.op-volume-controller .op-volume-slider-container .op-volume-silder .op-volume-slider-bg{width:100%;background:#fff}.op-volume-controller .op-volume-slider-container .op-volume-silder .op-volume-slider-value{width:100%;background:#50e3c2;background:var(--op-accent-color);border-radius:10px 0 0 10px}.op-volume-controller .op-volume-slider-container .op-volume-silder .op-volume-slider-handle{position:absolute;top:50%;left:30px;width:12px;height:12px;border-radius:10px;margin-top:-6px;background:#fff}.op-time-display{float:left;position:relative;margin-left:14px;height:30px;line-height:30px;white-space:nowrap;vertical-align:top;font-size:14px;user-select:none}.op-time-display .op-live-badge{opacity:1;width:auto;display:inline-block}.op-time-display .op-live-badge:before{background:#ff0000;display:inline-block;position:relative;top:-2px;width:6px;height:6px;margin-right:5px;content:\'\';border-radius:6px}.op-time-display .op-live-badge.op-live-badge-delayed:before{background:#fff}.op-time-display .op-live-badge .op-live-badge-lowlatency{display:inline-block;margin-right:5px}.op-time-display .op-live-badge .op-live-text{cursor:pointer}.op-context-panel{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;display:block;position:absolute;overflow:hidden;width:200px;padding:6px 0;z-index:8;background:rgba(28,28,28,0.9);text-shadow:0 0 2px rgba(0,0,0,0.5);font-weight:lighter;user-select:none}.op-context-panel:before,.op-context-panel:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}.op-context-panel *,.op-context-panel *:before,.op-context-panel *:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}.op-context-panel .op-context-item{width:100%;height:38px;padding-left:12px;line-height:38px;cursor:pointer;outline:none;font-size:.8em;font-weight:lighter;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.op-context-panel .op-context-item:hover{background-color:rgba(255,255,255,0.1)}.op-fullscreen-button{position:relative;margin-right:15px}.op-fullscreen-button .op-fullscreen-compress{display:none}.op-spinner-container{position:absolute;top:50%;width:64px;left:50%;margin-left:-32px;margin-top:-32px;z-index:7;display:none}.op-spinner-container .op-spinner{display:inline-block;position:relative;width:64px;height:64px;border:4px solid transparent;border-top:4px solid #50e3c2;border-top:4px solid var(--op-accent-color);border-radius:50%;animation:spin 1.2s cubic-bezier(.5, 0, .5, 1) infinite}@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.op-caption-viewer .op-caption-text-container{position:absolute;bottom:60px;width:100%;padding:0 12px;text-align:center;-moz-transition:bottom .25s cubic-bezier(0, 0, .2, 1);-webkit-transition:bottom .25s cubic-bezier(0, 0, .2, 1);transition:bottom .25s cubic-bezier(0, 0, .2, 1)}.op-caption-viewer .op-caption-text-container .op-caption-text{color:#fff;font-size:1em;line-height:1.2em;text-shadow:2px 2px 2px gray;padding:.1em .3em;user-select:none;word-break:break-word;white-space:pre-line;border:none;background:none}.op-caption-button{width:36px}.op-caption-button>i{font-size:18px;-moz-transition:color .25s cubic-bezier(0, 0, .2, 1);-webkit-transition:color .25s cubic-bezier(0, 0, .2, 1);transition:color .25s cubic-bezier(0, 0, .2, 1)}.op-caption-active .op-caption-button>i{color:#F36446}.op-wrapper.ovenplayer.large{font-size:14px}.op-wrapper.ovenplayer.large .op-caption-text{font-size:2em;line-height:2em}.op-wrapper.ovenplayer.medium{font-size:12px}.op-wrapper.ovenplayer.medium .op-caption-text{font-size:1.4em;line-height:1.4em}.op-wrapper.ovenplayer.small{font-size:10px}.op-wrapper.ovenplayer.small .op-caption-text{font-size:1.4em;line-height:1.4em}.op-wrapper.ovenplayer.small .op-playlist{padding:1rem}.op-wrapper.ovenplayer.small .op-playlist .op-playlist-card{margin:5px 0}.op-wrapper.ovenplayer.xsmall{font-size:10px}.op-wrapper.ovenplayer.xsmall .op-bigbutton-container .op-bigbutton{width:60px;height:60px;font-size:60px;line-height:60px}.op-wrapper.ovenplayer.xsmall .op-caption-text{font-size:1.4em;line-height:1.4em}.op-wrapper.ovenplayer.xsmall .op-playlist{padding:1rem}.op-wrapper.ovenplayer.xsmall .op-playlist .op-playlist-header{font-size:2em}.op-wrapper.ovenplayer.xsmall .op-playlist .op-playlist-card{margin:5px 0;-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%;padding:0 6em}.op-wrapper.ovenplayer.xsmall .op-playlist .op-playlist-card .op-playlist-card-title{margin-top:0}.op-wrapper.ovenplayer.xsmall .op-message-box .op-message-container{top:50%;font-weight:bold}.op-wrapper.ovenplayer.xsmall .op-message-box .op-message-container .op-message-icon{margin-top:0}.op-wrapper.ovenplayer.xsmall .op-message-box .op-message-container .op-message-icon .op-con{font-size:40px;width:40px;height:40px;line-height:40px}.op-wrapper.ovenplayer.xsmall .op-ads-button{bottom:22px}.op-wrapper.ovenplayer.xsmall .op-ads-button .videoAdUiAction{padding:4px;font-size:14px}.op-wrapper.ovenplayer.xxsmall .op-left-controls{max-width:240px;overflow:hidden}.op-wrapper.ovenplayer.xxsmall .op-live-badge-lowlatency{max-width:75px}.op-wrapper.ovenplayer.linear-ad .op-bottom-panel{height:34px}.op-wrapper.ovenplayer.linear-ad .op-bottom-panel .op-controls{top:4px}.op-wrapper.ovenplayer.linear-ad .op-bottom-panel .op-controls .op-left-controls{height:30px;padding:0}.op-wrapper.ovenplayer.linear-ad .op-bottom-panel .op-controls .op-right-controls{height:30px;padding:0}.op-wrapper.ovenplayer.linear-ad .op-ads{top:0;bottom:0}.op-wrapper.ovenplayer.linear-ad .op-button i.op-con{width:24px;height:24px;font-size:24px}.op-wrapper.ovenplayer.linear-ad .op-controls-container .op-bottom-panel .op-progressbar-container{bottom:50px}@keyframes fade{from{opacity:.3}55%{opacity:1}75%{opacity:1}to{opacity:.3}}@-webkit-keyframes bounceIn{from,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215, .61, .355, 1);animation-timing-function:cubic-bezier(.215, .61, .355, 1)}0%{opacity:0;-webkit-transform:scale3d(.5, .5, .5);transform:scale3d(.5, .5, .5)}20%{-webkit-transform:scale3d(1.1, 1.1, 1.1);transform:scale3d(1.1, 1.1, 1.1)}40%{-webkit-transform:scale3d(.9, .9, .9);transform:scale3d(.9, .9, .9)}60%{opacity:1;-webkit-transform:scale3d(1.03, 1.03, 1.03);transform:scale3d(1.03, 1.03, 1.03)}80%{-webkit-transform:scale3d(.97, .97, .97);transform:scale3d(.97, .97, .97)}to{opacity:1;-webkit-transform:scale3d(1, 1, 1);transform:scale3d(1, 1, 1)}}@keyframes bounceIn{from,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215, .61, .355, 1);animation-timing-function:cubic-bezier(.215, .61, .355, 1)}0%{opacity:0;-webkit-transform:scale3d(.3, .3, .3);transform:scale3d(.3, .3, .3)}20%{-webkit-transform:scale3d(1.1, 1.1, 1.1);transform:scale3d(1.1, 1.1, 1.1)}40%{-webkit-transform:scale3d(.9, .9, .9);transform:scale3d(.9, .9, .9)}60%{opacity:1;-webkit-transform:scale3d(1.03, 1.03, 1.03);transform:scale3d(1.03, 1.03, 1.03)}80%{-webkit-transform:scale3d(.97, .97, .97);transform:scale3d(.97, .97, .97)}to{opacity:1;-webkit-transform:scale3d(1, 1, 1);transform:scale3d(1, 1, 1)}}.op-player .bounceIn{-webkit-animation-duration:.75s;animation-duration:.75s;-webkit-animation-name:bounceIn;animation-name:bounceIn}@-webkit-keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}.op-player .fadeIn{-webkit-animation-name:fadeIn;animation-name:fadeIn}.op-player .animated{-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-fill-mode:both;animation-fill-mode:both}@media (prefers-reduced-motion){.op-player .animated{-webkit-animation:unset !important;animation:unset !important;-webkit-transition:none !important;transition:none !important}}@media only screen and (max-width:399px){.op-seek-button{display:none !important}}',"",{version:3,sources:["webpack://./src/stylesheet/ovenplayer.less"],names:[],mappings:"AAAA,gBAAS,CAMT,sBACE,GACE,sBAAW,CAGb,KACE,wBAAW,CAAA,CAIf,mCACE,KACE,sCAAA,CACA,8BAAW,CAGb,GACE,iBAAA,CACA,yCAAA,CACA,iCAAW,CAAA,CAIf,2BACE,KACE,sCAAA,CACA,8BAAW,CAGb,GACE,iBAAA,CACA,yCAAA,CACA,iCAAW,CAAA,CAIf,gCACE,KACE,yCAAA,CACA,iCAAA,CACA,SAAA,CAGF,GACE,sCAAA,CACA,8BAAW,CAAA,CAIf,wBACE,KACE,yCAAA,CACA,iCAAA,CACA,SAAA,CAGF,GACE,sCAAA,CACA,8BAAW,CAAA,CAIf,WACE,uBAAA,CACA,8DAAA,CACA,kBAAA,CACA,iBAAA,CAGF,WACE,sBAAA,CACA,8DAAA,CACA,kBAAA,CACA,iBAAA,CAGF,WACE,2BAAA,CACA,8DAAA,CACA,kBAAA,CACA,iBAAA,CAOF,MACE,yBAAA,CAGF,uBACE,iBAAA,CACA,eAAA,CAEA,eAAA,CACA,iBAAA,CACA,UAAA,CACA,aAAA,CACA,sCAAA,CACA,qBAAA,CACA,0BAAA,CACA,6BAAA,CACA,qBAAA,CACA,UAAA,CACA,cAAA,CACA,eAAA,CACA,SAAA,CAEA,0BAAA,CACA,gBAAA,CAnBF,yBAsBI,kBAAA,CAtBJ,8BA0BI,UAAA,CACA,WAAA,CACA,iBAAA,CAGF,2DAEE,0BAAA,CACA,6BAAA,CACA,qBAAA,CAGF,wFAGE,0BAAA,CACA,6BAAA,CACA,qBAAA,CAGF,qCACE,qBAAA,CACA,sBAAA,CACA,KAAA,CACA,OAAA,CACA,QAAA,CACA,MAAA,CACA,YAAA,CACA,QAAA,CACA,cAAA,CATF,0HAaI,WAAA,CACA,8BAAA,CACA,2BAAA,CACA,gBAAA,CACA,OAAA,CACA,QAAA,CACA,+BAAW,CAKf,mCACE,WAAA,CADF,oDAKI,sCAAA,CACA,8BAAA,CAEA,8BAAA,CACA,sBAAA,CACA,gCAAA,CACA,wBAAA,CAXJ,wHAgBI,WAAA,CAhBJ,8DAoBI,WAAA,CAIJ,6DAGI,uBAAA,CAjGN,iCAsGI,qBAAA,CAIF,2CACE,SAAA,CACA,UAAA,CAGF,kIAEE,aAAA,CACA,UAAA,CACA,kBAAA,CAGF,iDACE,kBAAA,CACA,0BAAA,CACA,kBAAA,CAGF,iDACE,WAAA,CACA,UAAA,CACA,kBAAA,CACA,yBAAA,CACA,iBAAA,CAjIJ,iCAqII,aAAA,CACA,4BAAA,CACA,SAAA,CACA,QAAA,CACA,UAAA,CACA,sCAAA,CACA,aAAA,CACA,eAAA,CACA,eAAA,CACA,mBAAA,CACA,uBAAA,CACA,QAAA,CACA,oBAAA,CACA,oBAAA,CACA,+CAAA,CAIJ,WACE,iBAAA,CACA,KAAA,CACA,WAAA,CACA,UAAA,CAJF,+BASI,iBAAA,CACA,WAAA,CAVJ,uCAoBI,iBAAA,CACA,QAAA,CACA,OAAA,CACA,UAAA,CACA,WAAA,CAxBJ,6CA2BM,iBAAA,CACA,MAAA,CACA,KAAA,CACA,UAAA,CACA,WAAA,CA/BN,8CAmCM,UAAA,CACA,WAAA,CAiBN,QACE,iBAAA,CACA,WAAA,CACA,UAAA,CACA,mBAAA,CAEA,KAAA,CAEA,YACE,4BAAA,CACA,qBAAA,CACA,sBAAA,CAHF,mBAMI,mBAAA,CAdN,gCAmBI,qBAAA,CACA,iBAAA,CACA,UAAA,CACA,WAAA,CACA,MAAA,CACA,KAAA,CACA,SAAA,CAzBJ,uBA6BI,WAAA,CACA,cAAA,CACA,gBAAA,CACA,mBAAA,CACA,iBAAA,CACA,OAAA,CACA,SAAA,CACA,qBAAA,CACA,sBAAA,CACA,iBAAA,CACA,mCAAA,CACA,eAAA,CACA,YAAA,CAzCJ,wCA4CM,aAAA,CAEA,kBAAA,CACA,cAAA,CACA,gBAAA,CACA,iBAAA,CACA,oBAAA,CACA,UAAA,CACA,qBAAA,CApDN,wCAwDM,gBAAA,CACA,cAAA,CACA,aAAA,CACA,kBAAA,CACA,cAAA,CACA,sCAAA,CAEA,8CACE,iBAAA,CACA,qBAAA,CAjER,0CAqEQ,oBAAA,CACA,UAAA,CAWR,WACE,oBAAA,CACA,WAAA,CACA,sBAAA,CACA,SAAA,CACA,aAAA,CACA,kBAAA,CACA,eAAA,CACA,eAAA,CACA,wBAAA,CAEA,4BAEE,SAAA,CAIJ,SACE,sCAAA,CACA,iBAAA,CACA,kBAAA,CACA,UAAA,CAEA,iBAAA,CACA,UAAA,CACA,cAAA,CACA,gBAAA,CAEA,aAAA,CACA,uBAAA,CACA,iBAAA,CAGA,mBAAA,CACA,mBAAA,CAGA,kCAAA,CACA,iCAAA,CAEA,cAAA,CAEA,iBACE,aAAA,CAIA,+BACE,eAAS,CAKX,8BACE,eAAS,CAKX,wCACE,eAAS,CAKX,sCACE,eAAS,CAKX,+BACE,eAAS,CAKX,gCACE,eAAS,CAKX,gCACE,eAAS,CAKX,yBACE,eAAS,CAKX,2BACE,eAAS,CAKX,8BACE,eAAS,CAKX,iCACE,eAAS,CAKX,kCACE,eAAS,CAKX,+BACE,eAAS,CAKX,4BACE,eAAS,CAKX,0BACE,eAAS,CAIb,yBACE,YAAA,CACA,eAAA,CAEA,iCACE,eAAS,CAIb,wBACE,YAAA,CAEA,gCACE,eAAS,CAKX,+BACE,eAAS,CAKX,6BACE,eAAS,CAKX,4BACE,eAAS,CAKf,UACE,oBAAA,CACA,iCAAA,CACA,aAAA,CACA,aAAA,CACA,iBAAA,CACA,kBAAA,CACA,uBAAA,CACA,oBAAA,CACA,wBAAA,CAGF,aACE,iBAAA,CACA,UAAA,CACA,WAAA,CACA,MAAA,CACA,KAAA,CACA,eAAA,CACA,eAAA,CACA,SAAA,CARF,uBAWI,iBAAA,CACA,UAAA,CACA,YAAA,CACA,UAAA,CAdJ,uBAkBI,UAAA,CACA,iBAAA,CAnBJ,wBAuBI,WAAA,CACA,iBAAA,CAxBJ,iCA4BI,iBAAA,CACA,gBAAA,CAEA,uCACE,aAAA,CACA,UAAA,CACA,UAAA,CAlCN,uDAsCM,WAAA,CAtCN,+BA2CI,WAAA,CACA,eAAA,CACA,iBAAA,CA7CJ,wDAgDM,gBAAA,CACA,iBAAA,CACA,OAAA,CACA,WAAA,CACA,8BAAA,CACA,0BAAA,CACA,UAAA,CACA,MAAA,CAvDN,2DA2DM,UAAA,CACA,WAAA,CACA,iBAAA,CACA,iBAAA,CACA,gBAAA,CACA,eAAA,CAhEN,oFAmEQ,QAAA,CACA,iBAAA,CACA,OAAA,CACA,iBAAA,CACA,gBAAA,CACA,8BAAA,CACA,0BAAA,CACA,UAAA,CA1ER,qDA+EM,kBAAA,CACA,iBAAA,CACA,mBAAA,CACA,YAAA,CACA,kBAAA,CACA,cAAA,CApFN,uEAwFQ,kBAAA,CACA,iBAAA,CACA,aAAA,CACA,yBAAA,CACA,YAAA,CACA,mBAAA,CACA,WAAA,CACA,uBAAA,CACA,mBAAA,CACA,oBAAA,CACA,cAAA,CAEA,8EACE,aAAA,CACA,4BAAO,CAFT,0GAKI,oBAAA,CACA,mCAAc,CA1G1B,mGA+GU,iBAAA,CACA,aAAA,CACA,UAAA,CACA,SAAA,CACA,eAAA,CACA,+BAAA,CACA,qBAAA,CArHV,uGAwHY,iBAAA,CACA,KAAA,CACA,QAAA,CACA,MAAA,CACA,UAAA,CACA,WAAA,CACA,QAAA,CAGF,yGACE,wBAAA,CAEA,2GACE,QAAA,CACA,iBAAA,CACA,OAAA,CACA,QAAA,CACA,+BAAA,CACA,qBAAA,CACA,0BAAA,CAIJ,2GACE,kBAAA,CACA,aAAA,CACA,UAAS,CAlJrB,+FAuJU,iBAAA,CACA,iBAAA,CACA,aAAA,CACA,kBAAA,CACA,eAAA,CACA,sBAAA,CAcV,gBACE,iBAAA,CACA,KAAA,CACA,MAAA,CACA,UAAA,CACA,WAAA,CACA,SAAA,CANF,sCASI,iBAAA,CACA,OAAA,CACA,gBAAA,CACA,UAAA,CACA,cAAA,CACA,iBAAA,CAdJ,uDAiBM,oBAAA,CACA,mCAAA,CACA,kBAAA,CACA,oBAAA,CACA,aAAA,CACA,iBAAA,CACA,cAAA,CAvBN,+EA0BQ,cAAA,CACA,eAAA,CACA,UAAA,CA5BR,uDAkCM,oBAAA,CACA,eAAA,CACA,UAAA,CApCN,gEAuCQ,cAAA,CACA,cAAA,CACA,UAAA,CACA,WAAA,CACA,gBAAA,CACA,oBAAA,CACA,oDAAA,CAcR,qFACE,cAAA,CAGF,8FACE,cAAA,CAOF,wBACE,cAAA,CACA,iBAAA,CACA,OAAA,CACA,QAAA,CACA,+BAAA,CACA,iBAAA,CACA,SAAA,CAPF,sCAUI,UAAA,CACA,WAAA,CACA,aAAA,CACA,cAAA,CACA,gBAAA,CACA,oDAAA,CAQJ,wBACE,iBAAA,CACA,UAAA,CACA,WAAA,CAEA,KAAA,CACA,MAAA,CAEA,SAAA,CACA,mBAAA,CATF,8CAYI,iBAAA,CACA,MAAA,CACA,KAAA,CACA,UAAA,CACA,WAAA,CAhBJ,kDAmBM,UAAA,CACA,WAAA,CApBN,mEAwBM,iBAAA,CACA,SAAA,CACA,QAAA,CACA,eAAA,CACA,iBAAA,CACA,gBAAA,CACA,eAAA,CACA,oDAAA,CAEA,yEACE,aAAA,CACA,UAAA,CACA,UAAA,CAUR,wBACE,iBAAA,CACA,UAAA,CACA,WAAA,CAEA,KAAA,CACA,MAAA,CAEA,SAAA,CARF,sCAWI,iBAAA,CACA,oBAAA,CAZJ,0CAeM,UAAA,CACA,WAAA,CAhBN,yDAoBM,cAAA,CASN,kBACE,iBAAA,CACA,WAAA,CACA,UAAA,CACA,eAAA,CACA,eAAA,CACA,WAAA,CAEA,gBAAA,CACA,mCAAA,CACA,mCAAA,CACA,SAAA,CAEA,6BAGE,YAAA,CAhBJ,uEAqBI,UAAA,CACA,WAAA,CACA,gBAAA,CACA,cAAA,CACA,YAAA,CACA,eAAA,CA1BJ,wFAgCQ,iBAAA,CACA,gBAAA,CAjCR,2FAsCQ,kBAAA,CACA,iBAAA,CAQF,oEACE,sCAAA,CAhDR,qFAoDQ,iBAAA,CApDR,wFAwDQ,WAAA,CACA,kBAAA,CACA,gBAAA,CA1DR,yFA8DQ,WAAA,CACA,kBAAA,CA/DR,uFAmEQ,iBAAA,CACA,iBAAA,CApER,+FAwEQ,kBAAA,CAYR,uBACE,YAAA,CADF,wCAII,iBAAA,CACA,QAAA,CACA,UAAA,CACA,UAAA,CACA,SAAA,CAaA,mCAAA,CACA,2BAAA,CAEA,8BAAA,CACA,sBAAA,CACA,gCAAA,CACA,wBAAA,CA3BJ,4DAWM,iBAAA,CACA,UAAA,CACA,WAAA,CACA,mCAAA,CACA,mBAAA,CAfN,kEA8BM,aAAA,CACA,iBAAA,CACA,UAAA,CACA,UAAA,CACA,WAAA,CAEA,oGACE,cAAA,CArCR,0FAyCQ,iBAAA,CACA,UAAA,CACA,WAAA,CACA,WAAA,CACA,cAAA,CA7CR,qDAoDM,iBAAA,CACA,UAAA,CACA,WAAA,CACA,eAAA,CACA,eAAA,CAEA,2DACE,UAAA,CACA,UAAA,CA5DR,wEAgEQ,iBAAA,CACA,iBAAA,CAjER,yEAqEQ,iBAAA,CACA,iBAAA,CAtER,oEA0EQ,UAAA,CACA,WAAA,CACA,gBAAA,CA5ER,uEAgFQ,iBAAA,CACA,KAAA,CACA,MAAA,CACA,qBAAA,CAEA,6EACE,UAAA,CACA,UAAA,CAvFV,wEA4FQ,iBAAA,CACA,KAAA,CACA,OAAA,CACA,qBAAA,CAEA,8EACE,UAAA,CACA,UAAA,CAnGV,uEAyGQ,iBAAA,CACA,oBAAA,CACA,gBAAA,CACA,eAAA,CACA,eAAA,CACA,WAAA,CA9GR,wFAiHU,gBAAA,CACA,iBAAA,CACA,iBAAA,CACA,UAAA,CApHV,oGAuHY,iBAAA,CAGE,kHACE,eAAS,CAIb,0GACE,kCAAA,CACA,UAAA,CACA,eAAA,CACA,iBAAA,CACA,kBAAA,CACA,mBAAA,CACA,mBAAA,CAGA,kCAAA,CACA,iCAAA,CACA,iBAAA,CACA,eAAA,CACA,MAAA,CACA,gBAAA,CACA,WAAA,CA/Id,8GAmJc,gBAAA,CACA,cAAA,CACA,gBAAA,CACA,WAAA,CAkBd,gBACE,iBAAA,CACA,QAAA,CACA,MAAA,CACA,UAAA,CACA,WAAA,CACA,YAAA,CACA,eAAA,CAPF,0CAUI,wBAAA,CACA,uCAAkB,CAXtB,kCAeI,cAAA,CACA,iBAAA,CACA,WAAA,CACA,gCAAA,CAlBJ,6JAuBM,iBAAA,CACA,MAAA,CACA,QAAA,CACA,UAAA,CACA,WAAA,CA3BN,oDA+BM,OAAA,CA/BN,oDAmCM,OAAA,CACA,sCAAA,CApCN,qDAwCM,MAAA,CACA,OAAA,CACA,sCAAA,CA1CN,+CAgDI,iBAAA,CACA,QAAA,CACA,MAAA,CAlDJ,oEAqDM,UAAA,CACA,WAAA,CACA,iBAAA,CAvDN,qCA4DI,YAAA,CACA,iBAAA,CACA,WAAA,CACA,SAAA,CACA,UAAA,CACA,mCAAA,CACA,iBAAA,CACA,eAAA,CACA,cAAA,CACA,gBAAA,CACA,gBAAA,CACA,kBAAA,CACA,UAAA,CAMJ,2CACE,oBAAA,CAGF,kCACE,YAAA,CAGF,0DAEE,YAAA,CACA,iBAAA,CACA,SAAA,CACA,WAAA,CACA,WAAA,CACA,wBAAA,CACA,uCAAkB,CAGpB,wBACE,iBAAA,CACA,YAAA,CACA,WAAA,CACA,qBAAA,CACA,iBAAA,CACA,qBAAA,CACA,SAAA,CAGF,oBACE,gBAAA,CAOF,gBAEE,iBAAA,CACA,OAAA,CAEA,oCACE,gBAAA,CAGF,uCACE,eAAA,CAVJ,kBAcI,eAAA,CACA,cAAA,CAfJ,qBAmBI,iBAAA,CACA,UAAA,CACA,MAAA,CACA,OAAA,CACA,iBAAA,CACA,cAAA,CACA,gBAAA,CACA,cAAA,CAQJ,sBACE,oBAAA,CACA,iBAAA,CACA,gBAAA,CAEA,4BACE,UAAA,CACA,UAAA,CAPJ,wCAWI,UAAA,CAGF,yBACE,KACE,MAAA,CAAA,CAIJ,iBACE,KACE,MAAA,CAAA,CAtBN,kDA4BI,UAAA,CACA,SAAA,CACA,iBAAA,CACA,SAAA,CACA,cAAA,CACA,gBAAA,CACA,WAAA,CACA,cAAA,CACA,gBAAA,CACA,YAAA,CAEA,yDACE,UAAA,CACA,SAAA,CACA,eAAA,CACA,qDAAA,CACA,wDAAA,CACA,gDAAwB,CA7C9B,oEAiDM,WAAA,CACA,iBAAA,CAlDN,qLAsDQ,iBAAA,CACA,aAAA,CACA,MAAA,CACA,OAAA,CACA,UAAA,CACA,eAAA,CACA,kBAAA,CA5DR,yFAgEQ,UAAA,CACA,eAAA,CAjER,4FAqEQ,UAAA,CACA,kBAAA,CACA,iCAAA,CACA,2BAAA,CAxER,6FA+EQ,iBAAA,CACA,OAAA,CACA,SAAA,CACA,UAAA,CACA,WAAA,CACA,kBAAA,CACA,eAAA,CACA,eAAA,CAcR,iBACE,UAAA,CACA,iBAAA,CACA,gBAAA,CACA,WAAA,CACA,gBAAA,CACA,kBAAA,CACA,kBAAA,CACA,cAAA,CACA,gBAAA,CATF,gCAiBI,SAAA,CACA,UAAA,CACA,oBAAA,CAEA,uCACE,kBAAA,CACA,oBAAA,CACA,iBAAA,CACA,QAAA,CACA,SAAA,CACA,UAAA,CACA,gBAAA,CACA,UAAA,CACA,iBAAA,CAGF,6DACE,eAAA,CAlCN,0DAsCM,oBAAA,CACA,gBAAA,CAvCN,8CA2CM,cAAA,CAWN,kBACE,0BAAA,CACA,6BAAA,CACA,qBAAA,CACA,aAAA,CACA,iBAAA,CACA,eAAA,CACA,WAAA,CACA,aAAA,CACA,SAAA,CACA,6BAAA,CACA,mCAAA,CACA,mBAAA,CACA,gBAAA,CAEA,iDAEE,0BAAA,CACA,6BAAA,CACA,qBAAA,CAGF,yEAGE,0BAAA,CACA,6BAAA,CACA,qBAAA,CA3BJ,mCA+BI,UAAA,CACA,WAAA,CACA,iBAAA,CACA,gBAAA,CACA,cAAA,CACA,YAAA,CACA,cAAA,CACA,mBAAA,CACA,sBAAA,CACA,kBAAA,CACA,eAAA,CAEA,yCACE,sCAAA,CAeN,sBACE,iBAAA,CACA,iBAAA,CAFF,8CAKI,YAAA,CAQJ,sBACE,iBAAA,CACA,OAAA,CACA,UAAA,CACA,QAAA,CACA,iBAAA,CACA,gBAAA,CACA,SAAA,CACA,YAAA,CARF,kCAYI,oBAAA,CACA,iBAAA,CACA,UAAA,CACA,WAAA,CAEA,4BAAA,CACA,4BAAA,CACA,2CAAA,CACA,iBAAA,CAEA,uDAAqB,CAErB,gBACE,GACE,sBAAW,CAGb,KACE,wBAAW,CAAA,CAYnB,8CAGI,iBAAA,CACA,WAAA,CACA,UAAA,CACA,cAAA,CACA,iBAAA,CACA,qDAAA,CACA,wDAAA,CACA,gDAAwB,CAV5B,+DAaM,UAAA,CACA,aAAA,CACA,iBAAA,CACA,4BAAA,CACA,iBAAA,CACA,gBAAA,CACA,qBAAA,CACA,oBAAA,CACA,WAAA,CACA,eAAA,CAKN,mBACE,UAAA,CAGF,qBACE,cAAA,CACA,oDAAA,CACA,uDAAA,CACA,+CAAuB,CAGzB,wCACE,aAAA,CAOF,6BACE,cAAA,CADF,8CAII,aAAA,CACA,eAAA,CAKJ,8BACE,cAAA,CADF,+CAII,eAAA,CACA,iBAAA,CAIJ,6BACE,cAAA,CADF,8CAII,eAAA,CACA,iBAAA,CALJ,0CASI,YAAA,CATJ,4DAYM,YAAA,CAMN,8BACE,cAAA,CADF,oEAMM,UAAA,CACA,WAAA,CACA,cAAA,CACA,gBAAA,CATN,+CAcI,eAAA,CACA,iBAAA,CAfJ,2CAmBI,YAAA,CAnBJ,+DAsBM,aAAA,CAtBN,6DA0BM,YAAA,CACA,iBAAA,CACA,aAAA,CACA,cAAA,CACA,aAAA,CA9BN,qFAiCQ,YAAA,CAjCR,oEAwCM,OAAA,CACA,gBAAA,CAzCN,qFA4CQ,YAAA,CA5CR,6FA+CU,cAAA,CACA,UAAA,CACA,WAAA,CACA,gBAAA,CAlDV,6CAyDI,WAAA,CAzDJ,8DA4DM,WAAA,CACA,cAAA,CAKN,iDAGI,eAAA,CACA,eAAA,CAJJ,yDAQI,cAAA,CAKJ,kDAGI,WAAA,CAHJ,+DAOM,OAAA,CAPN,iFAUQ,WAAA,CACA,SAAA,CAXR,kFAeQ,WAAA,CACA,SAAA,CAhBR,yCAsBI,KAAA,CACA,QAAA,CAvBJ,qDA4BM,UAAA,CACA,WAAA,CACA,cAAA,CA9BN,mGAyCI,WAAA,CASF,gBACE,KACE,UAAA,CAMF,IACE,SAAA,CAGF,IACE,SAAA,CAGF,GACE,UAAA,CAAA,CAIJ,4BAEE,wBAME,kEAAA,CACA,0DAA2B,CAG7B,GACE,SAAA,CACA,qCAAA,CACA,6BAAW,CAGb,IACE,wCAAA,CACA,gCAAW,CAGb,IACE,qCAAA,CACA,6BAAW,CAGb,IACE,SAAA,CACA,2CAAA,CACA,mCAAW,CAGb,IACE,wCAAA,CACA,gCAAW,CAGb,GACE,SAAA,CACA,kCAAA,CACA,0BAAW,CAAA,CAIf,oBAEE,wBAME,kEAAA,CACA,0DAA2B,CAG7B,GACE,SAAA,CACA,qCAAA,CACA,6BAAW,CAGb,IACE,wCAAA,CACA,gCAAW,CAGb,IACE,qCAAA,CACA,6BAAW,CAGb,IACE,SAAA,CACA,2CAAA,CACA,mCAAW,CAGb,IACE,wCAAA,CACA,gCAAW,CAGb,GACE,SAAA,CACA,kCAAA,CACA,0BAAW,CAAA,CA9GjB,qBAmHI,+BAAA,CACA,uBAAA,CACA,+BAAA,CACA,uBAAA,CAGF,0BACE,KACE,SAAA,CAGF,GACE,SAAA,CAAA,CAIJ,kBACE,KACE,SAAA,CAGF,GACE,SAAA,CAAA,CAzIN,mBA8II,6BAAA,CACA,qBAAA,CA/IJ,qBAmJI,6BAAA,CACA,qBAAA,CACA,gCAAA,CACA,wBAAA,CAGF,gCAAA,qBAEI,kCAAA,CACA,0BAAA,CACA,kCAAA,CACA,0BAAA,CAAA,CAwBN,yCACE,gBACE,uBAAA,CAAA",sourcesContent:['@charset "UTF-8";\n\n/**\n * @brief   Animation\n * */\n\n@keyframes op-spinner {\n  0% {\n    transform: rotate(0deg);\n  }\n\n  100% {\n    transform: rotate(360deg);\n  }\n}\n\n@-webkit-keyframes op-slideOutDown {\n  from {\n    -webkit-transform: translate3d(0, 0, 0);\n    transform: translate3d(0, 0, 0);\n  }\n\n  to {\n    visibility: hidden;\n    -webkit-transform: translate3d(0, 100%, 0);\n    transform: translate3d(0, 100%, 0);\n  }\n}\n\n@keyframes op-slideOutDown {\n  from {\n    -webkit-transform: translate3d(0, 0, 0);\n    transform: translate3d(0, 0, 0);\n  }\n\n  to {\n    visibility: hidden;\n    -webkit-transform: translate3d(0, 100%, 0);\n    transform: translate3d(0, 100%, 0);\n  }\n}\n\n@-webkit-keyframes op-slideInUp {\n  from {\n    -webkit-transform: translate3d(0, 100%, 0);\n    transform: translate3d(0, 100%, 0);\n    opacity: 1;\n  }\n\n  to {\n    -webkit-transform: translate3d(0, 0, 0);\n    transform: translate3d(0, 0, 0);\n  }\n}\n\n@keyframes op-slideInUp {\n  from {\n    -webkit-transform: translate3d(0, 100%, 0);\n    transform: translate3d(0, 100%, 0);\n    opacity: 1;\n  }\n\n  to {\n    -webkit-transform: translate3d(0, 0, 0);\n    transform: translate3d(0, 0, 0);\n  }\n}\n\n@font-face {\n  font-family: "frameIcon";\n  src: url("../assets/images/ic-player-frame-jump.ttf?rxg7gj") format(\'truetype\');\n  font-weight: normal;\n  font-style: normal;\n}\n\n@font-face {\n  font-family: \'op-icons\';\n  src: url(\'../assets/fonts/fontello.ttf?13010392\') format(\'truetype\');\n  font-weight: normal;\n  font-style: normal;\n}\n\n@font-face {\n  font-family: \'op-seek-icons\';\n  src: url(\'../assets/fonts/seek-icons.ttf?13010392\') format(\'truetype\');\n  font-weight: normal;\n  font-style: normal;\n}\n\n/**\n * @brief   common style\n * */\n\n:root {\n  --op-accent-color: #50e3c2;\n}\n\n.op-wrapper.ovenplayer {\n  position: relative;\n  max-height: 100%;\n\n  overflow: hidden;\n  zoom: 1 !important;\n  width: 100%;\n  display: block;\n  font-family: Helvetica, Arial, sans-serif;\n  background-color: #000;\n  -moz-box-sizing: border-box;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  color: #fff;\n  font-size: 14px;\n  font-weight: 100;\n  outline: 0;\n\n  -webkit-touch-callout: none;\n  user-select: none;\n\n  * {\n    box-sizing: inherit;\n  }\n\n  object {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n  }\n\n  &:before,\n  &:after {\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box;\n  }\n\n  & *,\n  & *:before,\n  & *:after {\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box;\n  }\n\n  &.op-fullscreen {\n    width: 100% !important;\n    height: 100% !important;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    z-index: 9999;\n    margin: 0;\n    position: fixed;\n\n    .op-watermark-container,\n    .op-thumbnail-container {\n      width: 100vw;\n      max-width: calc(100vh * 16 / 9);\n      height: calc(100vw * 9 / 16);\n      max-height: 100vh;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n    }\n\n  }\n\n  &.op-autohide {\n    cursor: none;\n\n    .op-bottom-panel {\n\n      -webkit-animation-name: op-slideOutDown;\n      animation-name: op-slideOutDown;\n\n      -webkit-animation-duration: 0.2s;\n      animation-duration: 0.2s;\n      -webkit-animation-fill-mode: both;\n      animation-fill-mode: both;\n    }\n\n    .op-progressbar-container,\n    .op-controls .op-button {\n      cursor: none;\n    }\n\n    .op-caption-text-container {\n      bottom: 25px;\n    }\n  }\n\n  &.op-no-controls {\n\n    .op-controls-container {\n      display: none !important;\n    }\n  }\n\n  .op-ratio {\n    padding-bottom: 56.25%;\n    /*16:9*/\n  }\n\n  & ::-webkit-scrollbar {\n    width: 5px;\n    height: 8px;\n  }\n\n  & ::-webkit-scrollbar-button:start:decrement,\n  ::-webkit-scrollbar-button:end:increment {\n    display: block;\n    height: 3px;\n    background: #2f2f3e;\n  }\n\n  & ::-webkit-scrollbar-track {\n    background: #2f2f3e;\n    -webkit-border-radius: 10px;\n    border-radius: 10px;\n  }\n\n  & ::-webkit-scrollbar-thumb {\n    height: 50px;\n    width: 50px;\n    background: #606071;\n    -webkit-border-radius: 8px;\n    border-radius: 8px;\n  }\n\n  .op-clear {\n    color: inherit;\n    background-color: transparent;\n    padding: 0;\n    margin: 0;\n    float: none;\n    font-family: Helvetica, Arial, sans-serif;\n    font-size: 1em;\n    line-height: 1em;\n    list-style: none;\n    text-transform: none;\n    vertical-align: baseline;\n    border: 0;\n    font-variant: inherit;\n    font-stretch: inherit;\n    -webkit-tap-highlight-color: rgba(255, 255, 255, 0);\n  }\n}\n\n.op-player {\n  position: absolute;\n  top: 0;\n  height: 100%;\n  width: 100%;\n\n\n\n  .op-core-ui-wrapper {\n    position: relative;\n    height: 100%;\n  }\n\n  .op-media-element-container {\n    /* display: block;\n    height: 100%;\n    width: auto;\n    position : relative;*/\n\n\n    position: absolute;\n    left: 0px;\n    top: 0px;\n    width: 100%;\n    height: 100%;\n\n    video {\n      position: absolute;\n      left: 0;\n      top: 0;\n      width: 100%;\n      height: 100%;\n    }\n\n    object {\n      width: 100%;\n      height: 100%;\n    }\n  }\n\n  .op-ui {\n\n    /*position : absolute;\n    bottom : 0px;\n    left : 0px;\n    width: 100%;\n    height: 100%;*/\n    .op-controls-container {}\n\n    .op-helpers-container {}\n  }\n}\n\n.op-ads {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  padding-bottom: 34px;\n  //pointer-events: none;\n  top: 0;\n\n  &>div {\n    position: absolute !important;\n    width: 100% !important;\n    height: 100% !important;\n\n    iframe {\n      pointer-events: auto;\n    }\n  }\n\n  video.op-ads-vast-video {\n    background-color: rgb(0, 0, 0);\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    left: 0;\n    top: 0;\n    z-index: 1;\n  }\n\n  .op-ads-button {\n    bottom: 36px;\n    cursor: default;\n    margin-right: 4px;\n    pointer-events: auto;\n    position: absolute;\n    right: 0;\n    z-index: 1;\n    width: auto !important;\n    height: auto !important;\n    border-radius: 4px;\n    background-color: rgba(18, 18, 28, 0.7);\n    min-width: 155px;\n    display: none;\n\n    .op-ads-textview {\n      color: #e6e6e6;\n      //font-family: arial,sans-serif;\n      font-weight: normal;\n      font-size: 11px;\n      padding: 6px 12px;\n      text-align: center;\n      display: inline-block;\n      width: 100%;\n      vertical-align: middle;\n    }\n\n    .videoAdUiAction {\n      padding: 8px 24px;\n      cursor: pointer;\n      direction: ltr;\n      font-weight: normal;\n      font-size: 20px;\n      border: 1px solid rgba(255, 255, 255, 0.5);\n\n      &:hover {\n        border-radius: 4px;\n        border: 1px solid rgba(255, 255, 255, 1);\n      }\n\n      i {\n        display: inline-block;\n        width: auto;\n      }\n    }\n  }\n\n}\n\n/**\n * @brief   common components\n * */\n\n.op-button {\n  display: inline-block;\n  border: none;\n  background: transparent;\n  padding: 0;\n  color: inherit;\n  text-align: inherit;\n  overflow: hidden;\n  font-weight: 100;\n  text-indent: 0 !important;\n\n  &:focus,\n  & {\n    outline: 0;\n  }\n}\n\ni.op-con {\n  font-family: "op-icons", "op-seek-icons";\n  font-style: normal;\n  font-weight: normal;\n  speak: none;\n\n  font-size: inherit;\n  width: auto;\n  font-size: 30px;\n  line-height: 30px;\n\n  display: block;\n  text-decoration: inherit;\n  text-align: center;\n\n  /* For safety - reset parent styles, that can break glyph codes*/\n  font-variant: normal;\n  text-transform: none;\n\n  /* Font smoothing. That was taken from TWBS */\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n\n  cursor: pointer;\n\n  &.disable {\n    color: #4f4f4f;\n  }\n\n  &.op-close-icon {\n    &::before {\n      content: "\\e900";\n    }\n  }\n\n  &.op-pause-big {\n    &::before {\n      content: "\\e911";\n    }\n  }\n\n  &.op-fullscreen-compress {\n    &::before {\n      content: "\\e901";\n    }\n  }\n\n  &.op-fullscreen-expand {\n    &::before {\n      content: "\\e902";\n    }\n  }\n\n  &.op-arrow-left {\n    &::before {\n      content: "\\e903";\n    }\n  }\n\n  &.op-arrow-right {\n    &::before {\n      content: "\\e909";\n    }\n  }\n\n  &.op-empty-video {\n    &::before {\n      content: "\\e904";\n    }\n  }\n\n  &.op-play {\n    &::before {\n      content: "\\e906";\n    }\n  }\n\n  &.op-replay {\n    &::before {\n      content: "\\e908";\n    }\n  }\n\n  &.op-seek-back {\n    &::before {\n      content: "\\e920";\n    }\n  }\n\n  &.op-seek-forward {\n    &::before {\n      content: "\\e921";\n    }\n  }\n\n  &.op-playlist-icon {\n    &::before {\n      content: "\\e907";\n    }\n  }\n\n  &.op-replay-big {\n    &::before {\n      content: "\\e908";\n    }\n  }\n\n  &.op-setting {\n    &::before {\n      content: "\\e90A";\n    }\n  }\n\n  &.op-pause {\n    &::before {\n      content: "\\e90C";\n    }\n  }\n\n  &.op-volume-small {\n    display: none;\n    margin-top: -1px;\n\n    &::before {\n      content: "\\e90D";\n    }\n  }\n\n  &.op-volume-mute {\n    display: none;\n\n    &::before {\n      content: "\\e90E";\n    }\n  }\n\n  &.op-volume-max {\n    &::before {\n      content: "\\e90F";\n    }\n  }\n\n  &.op-play-big {\n    &::before {\n      content: "\\e910";\n    }\n  }\n\n  &.op-warning {\n    &::before {\n      content: "\\e912";\n    }\n  }\n}\n\n.op-badge {\n  display: inline-block;\n  padding: .75em .714em .714em .680em;\n  font-size: 1em;\n  line-height: 1;\n  text-align: center;\n  white-space: nowrap;\n  vertical-align: baseline;\n  border-radius: 0.286em;\n  background-color: #12121c;\n}\n\n.op-playlist {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n  padding: 2.857em;\n  background: #000;\n  z-index: 6;\n\n  .op-badge {\n    position: absolute;\n    top: 0.857em;\n    right: 0.857em;\n    opacity: 0.7;\n  }\n\n  .btn-left {\n    float: left;\n    font-size: 2.857em;\n  }\n\n  .btn-right {\n    float: right;\n    font-size: 2.857em;\n  }\n\n  .op-playlist-header {\n    font-size: 2.857em;\n    font-weight: bold;\n\n    &:after {\n      display: block;\n      content: \'\';\n      clear: both;\n    }\n\n    .op-con.op-close-icon {\n      float: right;\n    }\n  }\n\n  .op-playlist-body {\n    height: 100%;\n    overflow: hidden;\n    position: relative;\n\n    .op-playlist-body-arrows {\n      margin-top: -15px;\n      position: absolute;\n      top: 50%;\n      height: 30px;\n      -ms-transform: translateY(-50%);\n      transform: translateY(-50%);\n      width: 100%;\n      left: 0;\n    }\n\n    .op-playlist-body-container {\n      width: 100%;\n      height: 100%;\n      position: relative;\n      margin-right: auto;\n      margin-left: auto;\n      max-width: 992px;\n\n      .op-playlist-body-center {\n        margin: 0;\n        position: absolute;\n        top: 50%;\n        padding-right: 3em;\n        padding-left: 3em;\n        -ms-transform: translateY(-50%);\n        transform: translateY(-50%);\n        width: 100%;\n      }\n    }\n\n    .op-playlist-body-row {\n      margin-right: -15px;\n      margin-left: -15px;\n      display: -ms-flexbox;\n      display: flex;\n      -ms-flex-wrap: wrap;\n      flex-wrap: wrap;\n\n\n      .op-playlist-card {\n        padding-right: 15px;\n        padding-left: 15px;\n        margin: 15px 0;\n        -ms-flex-preferred-size: 0;\n        flex-basis: 0;\n        -ms-flex-positive: 1;\n        flex-grow: 1;\n        -ms-flex: 0 0 33.333333%;\n        flex: 0 0 33.333333%;\n        max-width: 33.333333%;\n        cursor: pointer;\n\n        &.active {\n          color: #50e3c2;\n          color: var(--op-accent-color);\n\n          .op-playlist-card-thumbnail {\n            border-color: #50e3c2;\n            border-color: var(--op-accent-color);\n          }\n        }\n\n        .op-playlist-card-thumbnail {\n          position: relative;\n          display: block;\n          width: 100%;\n          padding: 0;\n          overflow: hidden;\n          border: 0.214em solid transparent;\n          background-color: #000;\n\n          img {\n            position: absolute;\n            top: 0;\n            bottom: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            border: 0;\n          }\n\n          &.empty {\n            background-color: #bababa;\n\n            &>i {\n              margin: 0;\n              position: absolute;\n              top: 50%;\n              left: 50%;\n              transform: translate(-50%, -50%);\n              color: #fff !important;\n              font-size: 1.6em !important;\n            }\n          }\n\n          &::before {\n            padding-top: 56.25%;\n            display: block;\n            content: "";\n          }\n        }\n\n        .op-playlist-card-title {\n          margin-top: 0.857em;\n          font-size: 1.429em;\n          padding: 2px 0;\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n        }\n\n      }\n    }\n\n  }\n}\n\n\n/**\n * @brief   Message Box\n * */\n\n.op-message-box {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 4;\n\n  .op-message-container {\n    position: absolute;\n    top: 45%;\n    margin-top: -35px;\n    width: 100%;\n    padding: 0 12px;\n    text-align: center;\n\n    .op-message-text {\n      display: inline-block;\n      background-color: rgba(18, 18, 28, .3);\n      padding: 0.8em 1.2em;\n      word-wrap: break-word;\n      max-width: 80%;\n      border-radius: 4px;\n      cursor: pointer;\n\n      .op-message-description {\n        font-size: 12px;\n        margin-top: 12px;\n        color: #999;\n      }\n    }\n\n\n    .op-message-icon {\n      display: inline-block;\n      margin-top: 12px;\n      width: 100%;\n\n      i.op-con {\n        cursor: pointer;\n        font-size: 80px;\n        width: 80px;\n        height: 80px;\n        line-height: 80px;\n        display: inline-block;\n        text-shadow: 2px 2px 7px rgb(0 0 0 / 80%), 0px 0px 1px rgb(0 0 0);\n      }\n    }\n\n    /*.op-message-button{\n      display: inline-block;\n      padding : 1em;\n      margin-left : 0.4em;\n      background-color: rgba(28,28,28,.4);\n      cursor : pointer;\n    }*/\n  }\n}\n\n.op-message-box.op-message-box-default-cursor .op-message-container .op-message-text {\n  cursor: default;\n}\n\n.op-message-box.op-message-box-default-cursor .op-message-container .op-message-icon i.op-con {\n  cursor: default;\n}\n\n/**\n * @brief   Big button\n * */\n\n.op-bigbutton-container {\n  cursor: pointer;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  text-align: center;\n  z-index: 5;\n\n  .op-bigbutton {\n    width: 80px;\n    height: 80px;\n    display: block;\n    font-size: 80px;\n    line-height: 80px;\n    text-shadow: 2px 2px 7px rgb(0 0 0 / 80%), 0px 0px 1px rgb(0 0 0);\n  }\n}\n\n/**\n * @brief   Thumbnail\n * */\n\n.op-thumbnail-container {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  //padding-bottom: 56.25%;\n  top: 0;\n  left: 0;\n  //transform: translate(-50%, -50%);\n  z-index: 2;\n  pointer-events: none;\n\n  .op-thumbnail-wrapper {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n\n    img {\n      width: 100%;\n      height: 100%;\n    }\n\n    .op-thumbnail-header {\n      position: absolute;\n      left: 1rem;\n      top: 1rem;\n      padding: 0 0.5rem;\n      font-size: 2.857em;\n      font-weight: bold;\n      line-height: 1.4;\n      text-shadow: 2px 2px 7px rgb(0 0 0 / 80%), 0px 0px 1px rgb(0 0 0);\n\n      &:after {\n        display: block;\n        content: \'\';\n        clear: both;\n      }\n    }\n  }\n}\n\n/**\n * @brief   WaterMark\n * */\n\n.op-watermark-container {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  //padding-bottom: 56.25%;\n  top: 0;\n  left: 0;\n  //transform: translate(-50%, -50%);\n  z-index: 3;\n\n  .op-watermark {\n    position: absolute;\n    display: inline-block;\n\n    img {\n      width: 100%;\n      height: 100%;\n    }\n\n    .op-watermark-text {\n      font-size: 14px;\n    }\n  }\n}\n\n/**\n * @brief   Setting panel\n * */\n\n.op-setting-panel {\n  position: absolute;\n  bottom: 55px;\n  right: 12px;\n  overflow-y: auto;\n  max-height: 100%;\n  width: 260px;\n  //font-size: 0.8em;\n  user-select: none;\n  background-color: rgba(28, 28, 28, .9);\n  text-shadow: 0 0 2px rgba(0, 0, 0, .5);\n  z-index: 8;\n\n  &.background {\n    //opacity: 0;\n    //background-color: rgba(28,28,28,.0);\n    display: none;\n  }\n\n  .op-setting-title,\n  .op-setting-item {\n    width: 100%;\n    height: 38px;\n    line-height: 38px;\n    cursor: pointer;\n    outline: none;\n    text-align: left;\n  }\n\n  .op-setting-title-container {\n    .op-setting-title {\n      .op-setting-title-title {\n        padding-left: 12px;\n        font-weight: bold;\n        //font-size: 0.9rem;\n      }\n\n      .op-setting-title-previcon {\n        padding: 0 0 0 12px;\n        margin-right: -6px;\n      }\n\n    }\n  }\n\n  .op-setting-item-container {\n    .op-setting-item {\n      &:hover {\n        background-color: rgba(255, 255, 255, .1);\n      }\n\n      .op-setting-item-title {\n        padding-left: 12px;\n      }\n\n      .op-setting-item-nexticon {\n        float: right;\n        padding-right: 12px;\n        margin-left: -6px;\n      }\n\n      span.op-setting-item-value {\n        float: right;\n        padding-right: 12px;\n      }\n\n      .op-setting-item-checked {\n        padding-left: 12px;\n        visibility: hidden;\n      }\n\n      .op-setting-item-checked.op-show {\n        visibility: visible;\n      }\n    }\n  }\n}\n\n\n\n/**\n * @brief   Controls (container)\n * */\n\n.op-controls-container {\n  display: none;\n\n  .op-bottom-panel {\n    position: absolute;\n    left: 0px;\n    bottom: 0px;\n    width: 100%;\n    z-index: 5;\n\n    .op-gradient-bottom {\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      background-color: rgba(18, 18, 18, 0.5);\n      pointer-events: none;\n      /*-moz-transition: opacity .25s cubic-bezier(0.0,0.0,0.2,1);\n      -webkit-transition: opacity .25s cubic-bezier(0.0,0.0,0.2,1);\n      transition: opacity .25s cubic-bezier(0.0,0.0,0.2,1);*/\n    }\n\n    -webkit-animation-name: op-slideInUp;\n    animation-name: op-slideInUp;\n\n    -webkit-animation-duration: 0.5s;\n    animation-duration: 0.5s;\n    -webkit-animation-fill-mode: both;\n    animation-fill-mode: both;\n\n    .op-progressbar-container {\n      display: block;\n      position: relative;\n      width: 100%;\n      height: 4px;\n      bottom: 50px;\n\n      &.op-progressbar-container-disabled {\n        cursor: default;\n      }\n\n      .op-progressbar-padding {\n        position: absolute;\n        width: 100%;\n        height: 15px;\n        bottom: -5px;\n        cursor: pointer;\n      }\n    }\n\n\n    /*contols container*/\n    .op-controls {\n      position: relative;\n      width: 100%;\n      height: 50px;\n      text-align: left;\n      overflow: hidden;\n\n      &:after {\n        content: \'\';\n        clear: both;\n      }\n\n      .op-setting-button {\n        position: relative;\n        margin-right: 12px;\n      }\n\n      .op-playlist-button {\n        position: relative;\n        margin-right: 12px;\n      }\n\n      .op-navigators {\n        float: left;\n        height: 30px;\n        line-height: 30px;\n      }\n\n      .op-left-controls {\n        position: absolute;\n        top: 0;\n        left: 0;\n        padding: 14px 0 10px 0;\n\n        &:after {\n          content: \'\';\n          clear: both;\n        }\n      }\n\n      .op-right-controls {\n        position: absolute;\n        top: 0;\n        right: 0;\n        padding: 14px 0 10px 0;\n\n        &:after {\n          content: \'\';\n          clear: both;\n        }\n      }\n\n      /*maybe not use*/\n      .op-frame-buttons {\n        position: relative;\n        display: inline-block;\n        margin-left: 14px;\n        overflow: hidden;\n        font-weight: 100;\n        height: 30px;\n\n        .op-frame-button {\n          margin-right: 6px;\n          position: relative;\n          text-align: center;\n          color: #fff;\n\n          .frame-icon {\n            position: relative;\n\n            &.reverse {\n              &:after {\n                content: \'\\e900\';\n              }\n            }\n\n            &:after {\n              font-family: \'frameIcon\' !important;\n              speak: none;\n              content: \'\\e901\';\n              font-style: normal;\n              font-weight: normal;\n              font-variant: normal;\n              text-transform: none;\n\n              /* Better Font Rendering =========== */\n              -webkit-font-smoothing: antialiased;\n              -moz-osx-font-smoothing: grayscale;\n              position: absolute;\n              font-size: 2.4em;\n              left: 0;\n              line-height: 30px;\n              height: 30px;\n            }\n\n            .btn-text {\n              font-weight: bold;\n              font-size: 0.8em;\n              line-height: 30px;\n              height: 30px;\n            }\n\n          }\n\n        }\n\n      }\n    }\n  }\n\n}\n\n\n/**\n * @brief   Progressbar\n * */\n\n.op-progressbar {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  outline: none;\n  margin-top: 10px;\n\n  .op-play-background-color {\n    background-color: #50e3c2; // for ie 11\n    background-color: var(--op-accent-color);\n  }\n\n  .op-progress-list {\n    cursor: pointer;\n    position: relative;\n    height: 100%;\n    background: rgba(255, 255, 255, 0.2);\n\n    .op-load-progress,\n    .op-play-progress,\n    .op-hover-progress {\n      position: absolute;\n      left: 0;\n      bottom: 0;\n      width: 100%;\n      height: 100%;\n    }\n\n    .op-play-progress {\n      width: 0;\n    }\n\n    .op-load-progress {\n      width: 0;\n      background-color: rgba(255, 255, 255, .5);\n    }\n\n    .op-hover-progress {\n      left: 0;\n      width: 0;\n      background-color: rgba(255, 255, 255, .6);\n    }\n\n  }\n\n  .op-progressbar-knob-container {\n    position: absolute;\n    top: -5px;\n    left: 0;\n\n    .op-progressbar-knob {\n      width: 14px;\n      height: 14px;\n      border-radius: 7px;\n    }\n  }\n\n  .op-progressbar-time {\n    display: none;\n    position: absolute;\n    bottom: 15px;\n    left: auto;\n    width: auto;\n    background-color: rgba(28, 28, 28, 0.9);\n    border-radius: 2px;\n    padding: 5px 9px;\n    font-size: 0.8em;\n    line-height: 15px;\n    user-select: none;\n    white-space: nowrap;\n    opacity: 0.7;\n  }\n\n\n}\n\n.op-progressbar-hover .op-progressbar-time {\n  display: inline-block;\n}\n\n.op-on-error .op-progressbar-time {\n  display: none;\n}\n\n.op-progressbar-section-start,\n.op-progressbar-section-end {\n  display: none;\n  position: absolute;\n  width: 3px;\n  height: 14px;\n  bottom: -5px;\n  background-color: #50e3c2;\n  background-color: var(--op-accent-color);\n}\n\n.op-progressbar-preview {\n  position: absolute;\n  display: none;\n  bottom: 50px;\n  border: 2px solid #fff;\n  border-radius: 2px;\n  background-color: #000;\n  z-index: 9;\n}\n\n.op-play-controller {\n  margin-left: 15px;\n}\n\n/**\n * @brief   Seek button\n * */\n\n.op-seek-button {\n  //display: none;\n  position: relative;\n  top: 0px;\n\n  &.op-seek-button-back {\n    margin-left: 12px;\n  }\n\n  &.op-seek-button-forward {\n    margin-left: 6px;\n  }\n\n  i {\n    padding-top: 1px;\n    font-size: 26px;\n  }\n\n  span {\n    position: absolute;\n    top: 10.5px;\n    left: 0;\n    right: 0;\n    text-align: center;\n    font-size: 10px;\n    line-height: 10px;\n    cursor: pointer;\n  }\n}\n\n\n/**\n * @brief   Volume button\n * */\n.op-volume-controller {\n  display: inline-block;\n  position: relative;\n  margin-left: 12px;\n\n  &:after {\n    content: \'\';\n    clear: both;\n  }\n\n  .op-volume-button {\n    float: left;\n  }\n\n  @-webkit-keyframes slide {\n    100% {\n      left: 0;\n    }\n  }\n\n  @keyframes slide {\n    100% {\n      left: 0;\n    }\n  }\n\n  .op-volume-slider-container {\n    /*display: inline-block;*/\n    float: left;\n    opacity: 0;\n    position: relative;\n    width: 0px;\n    margin-right: 0;\n    line-height: 30px;\n    height: 30px;\n    cursor: pointer;\n    user-select: none;\n    outline: none;\n\n    &.active {\n      width: 70px;\n      opacity: 1;\n      margin-left: 8px;\n      -moz-transition: opacity .4s cubic-bezier(0.0, 0.0, 0.2, 1);\n      -webkit-transition: opacity .4s cubic-bezier(0.0, 0.0, 0.2, 1);\n      transition: opacity .4s cubic-bezier(0.0, 0.0, 0.2, 1);\n    }\n\n    .op-volume-silder {\n      height: 100%;\n      position: relative;\n\n      .op-volume-slider-bg,\n      .op-volume-slider-value {\n        position: absolute;\n        display: block;\n        left: 0;\n        top: 50%;\n        height: 4px;\n        margin-top: -2px;\n        border-radius: 10px;\n      }\n\n      .op-volume-slider-bg {\n        width: 100%;\n        background: #fff;\n      }\n\n      .op-volume-slider-value {\n        width: 100%;\n        background: #50e3c2;\n        background: var(--op-accent-color);\n        border-radius: 10px 0 0 10px;\n        //-moz-transition: width .2s cubic-bezier(0.0,0.0,0.2,1);\n        //-webkit-transition: width .2s cubic-bezier(0.0,0.0,0.2,1);\n        //transition: width .2s cubic-bezier(0.0,0.0,0.2,1);\n      }\n\n      .op-volume-slider-handle {\n        position: absolute;\n        top: 50%;\n        left: 30px;\n        width: 12px;\n        height: 12px;\n        border-radius: 10px;\n        margin-top: -6px;\n        background: #fff;\n        //-moz-transition: left .2s cubic-bezier(0.0,0.0,0.2,1);\n        //-webkit-transition: left .2s cubic-bezier(0.0,0.0,0.2,1);\n        //transition: left .2s cubic-bezier(0.0,0.0,0.2,1);\n      }\n    }\n  }\n}\n\n\n/**\n * @brief   Time Display\n * */\n\n.op-time-display {\n  float: left;\n  position: relative;\n  margin-left: 14px;\n  height: 30px;\n  line-height: 30px;\n  white-space: nowrap;\n  vertical-align: top;\n  font-size: 14px;\n  user-select: none;\n  /*    */\n\n  .op-time-current,\n  .op-time-separator,\n  .op-time-duration {}\n\n  .op-live-badge {\n    opacity: 1;\n    width: auto;\n    display: inline-block;\n\n    &:before {\n      background: #ff0000;\n      display: inline-block;\n      position: relative;\n      top: -2px;\n      width: 6px;\n      height: 6px;\n      margin-right: 5px;\n      content: \'\';\n      border-radius: 6px;\n    }\n\n    &.op-live-badge-delayed:before {\n      background: #fff;\n    }\n\n    .op-live-badge-lowlatency {\n      display: inline-block;\n      margin-right: 5px;\n    }\n\n    .op-live-text {\n      cursor: pointer;\n    }\n  }\n\n}\n\n\n/**\n * @brief   Context Panel\n * */\n\n.op-context-panel {\n  -moz-box-sizing: border-box;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  display: block;\n  position: absolute;\n  overflow: hidden;\n  width: 200px;\n  padding: 6px 0;\n  z-index: 8;\n  background: rgba(28, 28, 28, 0.9);\n  text-shadow: 0 0 2px rgba(0, 0, 0, .5);\n  font-weight: lighter;\n  user-select: none;\n\n  &:before,\n  &:after {\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box;\n  }\n\n  & *,\n  & *:before,\n  & *:after {\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box;\n  }\n\n  .op-context-item {\n    width: 100%;\n    height: 38px;\n    padding-left: 12px;\n    line-height: 38px;\n    cursor: pointer;\n    outline: none;\n    font-size: 0.8em;\n    font-weight: lighter;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    overflow: hidden;\n\n    &:hover {\n      background-color: rgba(255, 255, 255, .1);\n    }\n  }\n\n}\n\n\n\n\n\n\n/**\n * @brief   FullScreen button\n * */\n\n.op-fullscreen-button {\n  position: relative;\n  margin-right: 15px;\n\n  .op-fullscreen-compress {\n    display: none;\n  }\n}\n\n/**\n * @brief   spinner\n * */\n\n.op-spinner-container {\n  position: absolute;\n  top: 50%;\n  width: 64px;\n  left: 50%;\n  margin-left: -32px;\n  margin-top: -32px;\n  z-index: 7;\n  display: none;\n\n\n  .op-spinner {\n    display: inline-block;\n    position: relative;\n    width: 64px;\n    height: 64px;\n\n    border: 4px solid transparent;\n    border-top: 4px solid #50e3c2;\n    border-top: 4px solid var(--op-accent-color);\n    border-radius: 50%;\n\n    animation: spin 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;\n\n    @keyframes spin {\n      0% {\n        transform: rotate(0deg);\n      }\n\n      100% {\n        transform: rotate(360deg);\n      }\n    }\n  }\n\n}\n\n\n/**\n * @brief   caption.\n * */\n\n.op-caption-viewer {\n\n  .op-caption-text-container {\n    position: absolute;\n    bottom: 60px;\n    width: 100%;\n    padding: 0 12px;\n    text-align: center;\n    -moz-transition: bottom .25s cubic-bezier(0.0, 0.0, 0.2, 1);\n    -webkit-transition: bottom .25s cubic-bezier(0.0, 0.0, 0.2, 1);\n    transition: bottom .25s cubic-bezier(0.0, 0.0, 0.2, 1);\n\n    .op-caption-text {\n      color: #fff;\n      font-size: 1em;\n      line-height: 1.2em;\n      text-shadow: 2px 2px 2px gray;\n      padding: .1em .3em;\n      user-select: none;\n      word-break: break-word;\n      white-space: pre-line;\n      border: none;\n      background: none;\n    }\n  }\n}\n\n.op-caption-button {\n  width: 36px;\n}\n\n.op-caption-button>i {\n  font-size: 18px;\n  -moz-transition: color .25s cubic-bezier(0.0, 0.0, 0.2, 1);\n  -webkit-transition: color .25s cubic-bezier(0.0, 0.0, 0.2, 1);\n  transition: color .25s cubic-bezier(0.0, 0.0, 0.2, 1);\n}\n\n.op-caption-active .op-caption-button>i {\n  color: #F36446;\n}\n\n\n\n/*Responsive  */\n\n.op-wrapper.ovenplayer.large {\n  font-size: 14px;\n\n  .op-caption-text {\n    font-size: 2em;\n    line-height: 2em;\n  }\n\n}\n\n.op-wrapper.ovenplayer.medium {\n  font-size: 12px;\n\n  .op-caption-text {\n    font-size: 1.4em;\n    line-height: 1.4em;\n  }\n}\n\n.op-wrapper.ovenplayer.small {\n  font-size: 10px;\n\n  .op-caption-text {\n    font-size: 1.4em;\n    line-height: 1.4em;\n  }\n\n  .op-playlist {\n    padding: 1rem;\n\n    .op-playlist-card {\n      margin: 5px 0;\n    }\n  }\n\n}\n\n.op-wrapper.ovenplayer.xsmall {\n  font-size: 10px;\n\n  .op-bigbutton-container {\n\n    .op-bigbutton {\n      width: 60px;\n      height: 60px;\n      font-size: 60px;\n      line-height: 60px;\n    }\n  }\n\n  .op-caption-text {\n    font-size: 1.4em;\n    line-height: 1.4em;\n  }\n\n  .op-playlist {\n    padding: 1rem;\n\n    .op-playlist-header {\n      font-size: 2em;\n    }\n\n    .op-playlist-card {\n      margin: 5px 0;\n      -ms-flex: 0 0 100%;\n      flex: 0 0 100%;\n      max-width: 100%;\n      padding: 0 6em;\n\n      .op-playlist-card-title {\n        margin-top: 0;\n      }\n    }\n  }\n\n  .op-message-box {\n    .op-message-container {\n      top: 50%;\n      font-weight: bold;\n\n      .op-message-icon {\n        margin-top: 0;\n\n        .op-con {\n          font-size: 40px;\n          width: 40px;\n          height: 40px;\n          line-height: 40px;\n        }\n      }\n    }\n  }\n\n  .op-ads-button {\n    bottom: 22px;\n\n    .videoAdUiAction {\n      padding: 4px;\n      font-size: 14px;\n    }\n  }\n}\n\n.op-wrapper.ovenplayer.xxsmall {\n\n  .op-left-controls {\n    max-width: 240px; // for small layout\n    overflow: hidden; // for small layout\n  }\n\n  .op-live-badge-lowlatency {\n    max-width: 75px;\n  }\n}\n\n/*AD MODE*/\n.op-wrapper.ovenplayer.linear-ad {\n\n  .op-bottom-panel {\n    height: 34px;\n\n    .op-controls {\n\n      top: 4px;\n\n      .op-left-controls {\n        height: 30px;\n        padding: 0;\n      }\n\n      .op-right-controls {\n        height: 30px;\n        padding: 0;\n      }\n    }\n  }\n\n  .op-ads {\n    top: 0;\n    bottom: 0;\n  }\n\n  .op-button {\n    i.op-con {\n      width: 24px;\n      height: 24px;\n      font-size: 24px;\n    }\n  }\n\n  .op-right-controls {\n    .op-button {\n      //margin-top: -2px;\n    }\n  }\n\n  .op-controls-container .op-bottom-panel .op-progressbar-container {\n    bottom: 50px;\n  }\n}\n\n/**\n * @brief   Animation\n * */\n\n.op-player {\n  @keyframes fade {\n    from {\n      opacity: 0.3;\n    }\n\n    /*5% { opacity: 0.3; }*/\n    /*40% { opacity: 1; }*/\n    /*50% { opacity: 1; }*/\n    55% {\n      opacity: 1;\n    }\n\n    75% {\n      opacity: 1;\n    }\n\n    to {\n      opacity: 0.3;\n    }\n  }\n\n  @-webkit-keyframes bounceIn {\n\n    from,\n    20%,\n    40%,\n    60%,\n    80%,\n    to {\n      -webkit-animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);\n      animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);\n    }\n\n    0% {\n      opacity: 0;\n      -webkit-transform: scale3d(0.5, 0.5, 0.5);\n      transform: scale3d(0.5, 0.5, 0.5);\n    }\n\n    20% {\n      -webkit-transform: scale3d(1.1, 1.1, 1.1);\n      transform: scale3d(1.1, 1.1, 1.1);\n    }\n\n    40% {\n      -webkit-transform: scale3d(0.9, 0.9, 0.9);\n      transform: scale3d(0.9, 0.9, 0.9);\n    }\n\n    60% {\n      opacity: 1;\n      -webkit-transform: scale3d(1.03, 1.03, 1.03);\n      transform: scale3d(1.03, 1.03, 1.03);\n    }\n\n    80% {\n      -webkit-transform: scale3d(0.97, 0.97, 0.97);\n      transform: scale3d(0.97, 0.97, 0.97);\n    }\n\n    to {\n      opacity: 1;\n      -webkit-transform: scale3d(1, 1, 1);\n      transform: scale3d(1, 1, 1);\n    }\n  }\n\n  @keyframes bounceIn {\n\n    from,\n    20%,\n    40%,\n    60%,\n    80%,\n    to {\n      -webkit-animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);\n      animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);\n    }\n\n    0% {\n      opacity: 0;\n      -webkit-transform: scale3d(0.3, 0.3, 0.3);\n      transform: scale3d(0.3, 0.3, 0.3);\n    }\n\n    20% {\n      -webkit-transform: scale3d(1.1, 1.1, 1.1);\n      transform: scale3d(1.1, 1.1, 1.1);\n    }\n\n    40% {\n      -webkit-transform: scale3d(0.9, 0.9, 0.9);\n      transform: scale3d(0.9, 0.9, 0.9);\n    }\n\n    60% {\n      opacity: 1;\n      -webkit-transform: scale3d(1.03, 1.03, 1.03);\n      transform: scale3d(1.03, 1.03, 1.03);\n    }\n\n    80% {\n      -webkit-transform: scale3d(0.97, 0.97, 0.97);\n      transform: scale3d(0.97, 0.97, 0.97);\n    }\n\n    to {\n      opacity: 1;\n      -webkit-transform: scale3d(1, 1, 1);\n      transform: scale3d(1, 1, 1);\n    }\n  }\n\n  .bounceIn {\n    -webkit-animation-duration: 0.75s;\n    animation-duration: 0.75s;\n    -webkit-animation-name: bounceIn;\n    animation-name: bounceIn;\n  }\n\n  @-webkit-keyframes fadeIn {\n    from {\n      opacity: 0;\n    }\n\n    to {\n      opacity: 1;\n    }\n  }\n\n  @keyframes fadeIn {\n    from {\n      opacity: 0;\n    }\n\n    to {\n      opacity: 1;\n    }\n  }\n\n  .fadeIn {\n    -webkit-animation-name: fadeIn;\n    animation-name: fadeIn;\n  }\n\n  .animated {\n    -webkit-animation-duration: 1s;\n    animation-duration: 1s;\n    -webkit-animation-fill-mode: both;\n    animation-fill-mode: both;\n  }\n\n  @media (prefers-reduced-motion) {\n    .animated {\n      -webkit-animation: unset !important;\n      animation: unset !important;\n      -webkit-transition: none !important;\n      transition: none !important;\n    }\n  }\n\n\n  /* Pulse Shrink */\n  /*.op-button {\n    //display: inline-block;\n    //vertical-align: middle;\n    transform: translateZ(0);\n    box-shadow: 0 0 1px rgba(0, 0, 0, 0);\n    backface-visibility: hidden;\n    -moz-osx-font-smoothing: grayscale;\n    transition-duration: 0.3s;\n    transition-property: transform;\n  }\n  .op-button:hover,\n  .op-button:focus,\n  .op-button:active {\n    transform: scale(1.1);\n  }*/\n}\n\n\n@media only screen and (max-width: 399px) {\n  .op-seek-button {\n    display: none !important;\n  }\n}'],sourceRoot:""}]),t.Z=f},3645:function(e){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,o,i){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var A=0;A<this.length;A++){var s=this[A][0];null!=s&&(a[s]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);r&&a[u[0]]||(void 0!==i&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=i),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),o&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=o):u[4]="".concat(o)),t.push(u))}},t}},1667:function(e){"use strict";e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},7537:function(e){"use strict";e.exports=function(e){var t=e[1],n=e[3];if(!n)return t;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),i="/*# ".concat(o," */"),a=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}));return[t].concat(a).concat([i]).join("\n")}return[t].join("\n")}},3379:function(e){"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var i={},a=[],A=0;A<e.length;A++){var s=e[A],c=r.base?s[0]+r.base:s[0],u=i[c]||0,l="".concat(c," ").concat(u);i[c]=u+1;var f=n(l),p={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==f)t[f].references++,t[f].updater(p);else{var d=o(p,r);r.byIndex=A,t.splice(A,0,{identifier:l,updater:d,references:1})}a.push(l)}return a}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var i=r(e=e||[],o=o||{});return function(e){e=e||[];for(var a=0;a<i.length;a++){var A=n(i[a]);t[A].references--}for(var s=r(e,o),c=0;c<i.length;c++){var u=n(i[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}i=s}}},569:function(e){"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},9216:function(e){"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:function(e,t,n){"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},7795:function(e){"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4589:function(e){"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},7147:function(e,t,n){"use strict";var r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==r&&r,o="URLSearchParams"in r,i="Symbol"in r&&"iterator"in Symbol,a="FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch(e){return!1}}(),A="FormData"in r,s="ArrayBuffer"in r;if(s)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(e){return e&&c.indexOf(Object.prototype.toString.call(e))>-1};function l(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function f(e){return"string"!=typeof e&&(e=String(e)),e}function p(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return i&&(t[Symbol.iterator]=function(){return t}),t}function d(e){this.map={},e instanceof d?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function g(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function h(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function v(e){var t=new FileReader,n=h(t);return t.readAsArrayBuffer(e),n}function m(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function C(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:a&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:A&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:o&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():s&&a&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=m(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s&&(ArrayBuffer.prototype.isPrototypeOf(e)||u(e))?this._bodyArrayBuffer=m(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):o&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a&&(this.blob=function(){var e=g(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?g(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer)):this.blob().then(v)}),this.text=function(){var e,t,n,r=g(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,n=h(t=new FileReader),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},A&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}d.prototype.append=function(e,t){e=l(e),t=f(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},d.prototype.delete=function(e){delete this.map[l(e)]},d.prototype.get=function(e){return e=l(e),this.has(e)?this.map[e]:null},d.prototype.has=function(e){return this.map.hasOwnProperty(l(e))},d.prototype.set=function(e,t){this.map[l(e)]=f(t)},d.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},d.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),p(e)},d.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),p(e)},d.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),p(e)},i&&(d.prototype[Symbol.iterator]=d.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(e,t){if(!(this instanceof b))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n,r,o=(t=t||{}).body;if(e instanceof b){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new d(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new d(t.headers)),this.method=(r=(n=t.method||this.method||"GET").toUpperCase(),y.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(o),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var i=/([?&])_=[^&]*/;i.test(this.url)?this.url=this.url.replace(i,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function w(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}})),t}function E(e,t){if(!(this instanceof E))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new d(t.headers),this.url=t.url||"",this._initBody(e)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},C.call(b.prototype),C.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},E.error=function(){var e=new E(null,{status:0,statusText:""});return e.type="error",e};var B=[301,302,303,307,308];E.redirect=function(e,t){if(-1===B.indexOf(t))throw new RangeError("Invalid status code");return new E(null,{status:t,headers:{location:e}})};var x=r.DOMException;try{new x}catch(e){(x=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack}).prototype=Object.create(Error.prototype),x.prototype.constructor=x}function k(e,t){return new Promise((function(n,o){var i=new b(e,t);if(i.signal&&i.signal.aborted)return o(new x("Aborted","AbortError"));var A=new XMLHttpRequest;function c(){A.abort()}A.onload=function(){var e,t,r={status:A.status,statusText:A.statusText,headers:(e=A.getAllResponseHeaders()||"",t=new d,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();t.append(r,o)}})),t)};r.url="responseURL"in A?A.responseURL:r.headers.get("X-Request-URL");var o="response"in A?A.response:A.responseText;setTimeout((function(){n(new E(o,r))}),0)},A.onerror=function(){setTimeout((function(){o(new TypeError("Network request failed"))}),0)},A.ontimeout=function(){setTimeout((function(){o(new TypeError("Network request failed"))}),0)},A.onabort=function(){setTimeout((function(){o(new x("Aborted","AbortError"))}),0)},A.open(i.method,function(e){try{return""===e&&r.location.href?r.location.href:e}catch(t){return e}}(i.url),!0),"include"===i.credentials?A.withCredentials=!0:"omit"===i.credentials&&(A.withCredentials=!1),"responseType"in A&&(a?A.responseType="blob":s&&i.headers.get("Content-Type")&&-1!==i.headers.get("Content-Type").indexOf("application/octet-stream")&&(A.responseType="arraybuffer")),!t||"object"!=typeof t.headers||t.headers instanceof d?i.headers.forEach((function(e,t){A.setRequestHeader(t,e)})):Object.getOwnPropertyNames(t.headers).forEach((function(e){A.setRequestHeader(e,f(t.headers[e]))})),i.signal&&(i.signal.addEventListener("abort",c),A.onreadystatechange=function(){4===A.readyState&&i.signal.removeEventListener("abort",c)}),A.send(void 0===i._bodyInit?null:i._bodyInit)}))}k.polyfill=!0,r.fetch||(r.fetch=k,r.Headers=d,r.Request=b,r.Response=E)},5442:function(e){"use strict";e.exports="data:font/ttf;base64,AAEAAAAPAIAAAwBwR1NVQiCLJXoAAAD8AAAAVE9TLzI/IEqpAAABUAAAAFZjbWFwvM20gQAAAagAAAJgY3Z0IAbV/wQAABq4AAAAIGZwZ22KkZBZAAAa2AAAC3BnYXNwAAAAEAAAGrAAAAAIZ2x5Zin85QoAAAQIAAARVmhlYWQXb/zlAAAVYAAAADZoaGVhCWwFkQAAFZgAAAAkaG10eEiN/+MAABW8AAAASGxvY2ElHSFKAAAWBAAAACZtYXhwATsMoQAAFiwAAAAgbmFtZcydHyEAABZMAAACzXBvc3QO9vxxAAAZHAAAAZJwcmVw5UErvAAAJkgAAACGAAEAAAAKADAAPgACREZMVAAObGF0bgAaAAQAAAAAAAAAAQAAAAQAAAAAAAAAAQAAAAFsaWdhAAgAAAABAAAAAQAEAAQAAAABAAgAAQAGAAAAAQAAAAEECAGQAAUAAAJ6ArwAAACMAnoCvAAAAeAAMQECAAACAAUDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFBmRWQAQOkA6RIDUv9qAFoDUgCWAAAAAQAAAAAAAAAAAAUAAAADAAAALAAAAAQAAAGEAAEAAAAAAH4AAwABAAAALAADAAoAAAGEAAQAUgAAAAgACAACAADpBOkK6RL//wAA6QDpBukM//8AAAAAAAAAAQAIABAAGAAAAAEAAgADAAQABQAGAAcACAAJAAoACwAMAA0ADgAPABAAEQAAAQYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAA3AAAAAAAAAARAADpAAAA6QAAAAABAADpAQAA6QEAAAACAADpAgAA6QIAAAADAADpAwAA6QMAAAAEAADpBAAA6QQAAAAFAADpBgAA6QYAAAAGAADpBwAA6QcAAAAHAADpCAAA6QgAAAAIAADpCQAA6QkAAAAJAADpCgAA6QoAAAAKAADpDAAA6QwAAAALAADpDQAA6Q0AAAAMAADpDgAA6Q4AAAANAADpDwAA6Q8AAAAOAADpEAAA6RAAAAAPAADpEQAA6REAAAAQAADpEgAA6RIAAAARAAEAAP/SA4AC6AAjABtAGCAZDwUEAEQCAQIAAGYAAAAjACMeHQMFFCsBHgEUBwkBFhUWDwEOAScJAQYjBi8BLgE3CQEmNz4BFwkBPgEDXA4TC/61AU4KAQQCCCMP/rT+sg0IBQgEEAgOAUz+shQJBywMAUwBTgkHAucCFBsM/rT+sg0IBQgEEAgOAUz+sQoBBAIIIw8BTAFOGhEOAgv+tQFOBgIAAgAAAAADQwK2AB4AOwBCQD80AQQDAUcLAQFEAAMEA28GAQQAAgAEAmAFAQABAQBUBQEAAAFWAAEAAUofHwEAHzsfOzEwJyQTEgAeARsHBRQrATIXFgcGFQ4BJic1BwYnLgE/ASMmJyYvASY+ATsBNiUWFxYGByIHBicmNScmNzY3NjIWHQE3NhceAQ8BAbIbBwMCAgEhIAGyFxANBAqxegoFBAMCBwIRDkNZAX8cBAQbDhUuUyA0AgQBAg4JGxSzFxANBAuxAT01H1UsFRERDRV4shIICCgLsAEDAgQDChkTAYQGEQ4dAQIDBAcbMk0gNgwJEg94shIIBikMsAAAAAIAAAAAA08CrgAcADsAPUA6KQEDBAQBAAMCRwADBAAEAwBtBQECAAQDAgReAAABAQBSAAAAAVgAAQABTB4dNDMmJR07HjhEGwYFFisTHgEdATc2Fx4BDwEzFhcWBgciBwYnJjUmPwE+AQEyFxYHDgEHBi4BPQEHDgEnIy4CPwEjJicmNjM3Ns4MD7MXEA4EDLB6IQYFHhEWLlMfMwIBAQETAmYjBgUOAgMFCRsUswgJBQMNEAEKsXsdBgUZEkNZARsCEwx3shIIBigNsQQRDh4BAgMEBhstWUMQEwGOVERWCAYFCQESDnizBgMCARQZCrEEEA8fAQEAAQAA/9UCzALoABUAD0AMCAEARQAAAGYcAQUVKwEeAR8BFgYHCQEWBw4BJwEmNDcBPgECngsIBAEJAgn+tAFOFQkILQz+mwoKAWcIBwLnAgUFAQocCv60/rIbEQ0CCwFlCx0KAWcHAwABAAD/agYjA1IAEwAjQCAHBgUEBAEAAUcCAQAADEgAAQENAUkBAA0KABMBEgMFFCsBMhYVESURJREUBiMhIiY1ETQ2MwR3HSoBZf6bKh370B0qKh0DUiod/vLG/TbG/vIdKiodA1odKgAAAAACAAAAAAMgAq0ADAAPABdAFA8ODQMARAEBAABmAAAADAAMAgUUKwEyFwEWFAcBBiYnETYTLQEBLwcIAdMODv4tESEBAkABdP6MAqsF/tQKIwv+1AoRFQJYIv3D7+8AAAAFAAD/yQOHAtIAEwAxAEAAUQBUAFxAWVRTUiwcBQMCAUcLAQcABgUHBmAKAQUABAAFBGAIAQAJAQIDAAJgAAMBAQNUAAMDAVgAAQMBTEFBMjIVFAEAQVFBTUtIMkAyOzk2JB4UMRUvCwcAEwERDAUUKwEeARcWBw4BBwQlLgEnJjc+ATckBSIGFQcGFRQXHgEzFxYzFjc+ATU3NjU0Jy4BJyYFJRYXFgYHIS4BNjcyJDMyNx4BHwEWDgEjIS4BNjcyNzYDFwcDIyY6AQMDATom/tH+0SY5AgEBAjkmAS/+1A0UAQIDARMMUK9XkXQNEgECAwESDYX+9AGTHQYFGRL9qBETDRdDAQxDcBYLCAMCBwISDv4uEhENFjRo0cenpwIFAjknuromOQIEBAI5Jrq6JjsBA0YTDShuN1xJDBMBAwEFARINKW03W0kNEgECAaYEEA8fAQEhIAEEYAIEBQIKGRMBISABAQP+jXV0AAAAAAEAAAAAAxwCfgA4ADVAMjgAAgIEAUcAAAQAbwAEAgRvAAEDAXAAAgMDAlIAAgIDWAADAgNMNTQvLSopHRslBQUVKxM3Njc+ARcyHgEXFgcGBwYHBiYnJicmNhYXHgEXFjc+AScmJy4BBwYPATMeAQYrAS4BPQE0Mx4BF9VbBAInZzZAdVINDhkYNDdFQYc1NhkGER0JG3dFSTo4MwwNMyp4Oj0sWW4MDgoRrAsOGgoNAQHVVgQBJSkBPWg/RkdFMzURECItLkARGAcWPkwCAicmhkVIMSkdDg8rVAEZGAENC60ZAQ0LAAABAAD/1ALWAugAFwAdQBoSAQABAUcCAQEAAW8AAABmAAAAFwAXOwMFFSsBHgEXARYUBwEGBwYrASIuATcJASYnJjYBUQgGBgFnCgr+mwgGBAYCDhQCCwFM/rIHAQMYAucBAwX+mQodC/6bCAIBFB0MAUwBTgkIEBsAAAAABAAA/8oDigLzAA8AGwCNAQAAgUB+/gEDBKIBAAvaAQUHyAEGBQRHAAkECW8AAwQLBAMLbQACCgcKAgdtAAUHBgcFBm0ABgZuDggCBAALAAQLYAwBAA0BAQoAAWAACgIHClQACgoHWAAHCgdMHBwREAEA9/aurY+OHI0cjXx6cG9tbDc2NDMXFRAbERsADwEPDwUUKwEWFx4BBwYHBi4BJyY3PgEXDgIXFjMyPgEnJicWFx4BFxY/ATY3Njc2NzYXFhcWFxYXHgE3Nh4BFxYHBgcGBwYfARYXFhcWFxYHBgcGBwYHDgEXFg4BBwYnJicmJyYGBw4BBwYnJicmJyYnJiIHBi4BJyY3Njc2NzYmJy4BJyY3Njc2NzY3NjQnJjY3NjciBwYPAQYHBg8BBicmJyYnJgcGBwYfARYGBwYHDgEWMxcWFxYXFgcGBwYeAT8BNjc2FxYXFhceATY1NzY3Njc2FxYXFj4BLwEmJyY3Njc2NzY3PgEnJicuAScmJyYvASY3Njc2NzYnJicmDwEGLgEnLgEB9yoiIBgQEjEjTTwJChMRPyYXIgYOECMYHwMOD+wMDggeBwwJBgkLDxIXGR4gDwsGCAYEBxQRG0k4BQIHBAwJAwQDExYUGxAVAgMWChQMGBQHCwENFQUtIhEVDBcTBw0MAQI0IyUeDgoFCAYEBxYTG0k4BQMIBAsJAwMLFCI0BgYUChMMGBYHDQ8WChwd9QsJBgQDAhEMEhARFQwWEwkOCw0BAQUFFQYYGSgRDRMXDRANEwkMAgMWCw8jEA4SERgTGA4RBAIhHwcJCxARFRYaGg4gCg8HBwQGAQIZDyMYCQ4FDQYKBhsHEA8LCgcFBgQMCgMFBAUQCxAOGkQyAgEUAeMBIB9ZJysVDxQ5JikoJChDASk2ERUoNxIV8wEHAxQDBQQTFhMbEBQDBBUKFAwZFAcMAQ4VBS0iEBQLFREHDAgHCQsQEhcaHiAPCgYIBgQGFBEbSTgFAwgECwkDAwsUIjQGBhQKEwwYFgcNDxUFLSIRFQ0WEwgMDQECMyMlHg4KBQgGBAcWEx5OGxwWDAgOCxQVDg0KBQYEDAoDBQQFEAsQDhpEGBsDAiEgBwkLEBEVFhoaDiAJDwYGAwQFBhMWJxENExcNEA0TCQwCAxYLDyMQCQwMERAaFAsRCwUKFg8HAwIBAgUQCxAOERUMFhMJDgsNAQEFBRUIMyQNEgAAAAIAAAAAArwCrQAKABYAHkAbDgMCAEQDAQIDAABmCwsAAAsWCxYACgAKBAUUKwEeARcRDgEmJxE2BR4BFxEUBiYnET4BAVANEQEBISABAgFvDREBIiABARECqwETDf2oERMNFwJYIgEBEw39qBETDRcCWA8TAAAAAAMAAAAAAuMCrAAVAB8AMwBDQEAOAQIEDQEAAwJHHwEBRR4BAEQFAQQBAgEEAm0AAQACAwECYAADAAADVAADAwBWAAADAEogICAzIDMhJRcZBgUYKwEeARURBgcGLwEjLgEnET4BNzM3PgEHBisBFTMyHwERFx4CBwYHBiYnJjc+ASYvASY3NgH2DRIBFA8Sv3wNEQEBEw55xAMHrQoLZGQLCpK6HysLDQ8jDSUEBhMWDRIXAwIFBgKrARMN/agiAwINnwITDQEKDhMBogMC4gjICHkByk4DQF8uMiIMChASFRlEQhgPEQoOAAAAAwAAAAADjgKsABUAIgA+ADtAOA4BAgE7NS8oBAMCDQEAAwNHIgEBRSEBAEQAAQACAwECXgADAAADVAADAwBWAAADAEohJxcZBAUYKwEeARURFA4BLwIuAScRPgE3Mzc+AQcOAQcrARUzMhYfAREFHgEUDwEXFgcOAS8BBwYuAT8BJyY+AR8BNz4BAfgNEBMZCr98DREBARMOecEICLAGBgUEZGQJBQWUAZMNEAlMThEHBygMTE8OIQwOTU8KDSAOTU4IBwKrAhIN/agNEgMInwECEg0BCg4TAaAFAuIFAgHIAgR7AcpgAhMaCkxPFw8NBQtNTwoMIQ9MTw0hDA1NTwYCAAAEAAAAAAOLAqwAFQAzAEAAVgBkQGFAMAIBAw4BBAcNAQYFPyYCAgAERwgBAwEDbwkBBwEEAQcEbQAGBQAFBgBtAAIAAnAAAQAEBQEEXgAFBgAFVAAFBQBWAAAFAEpBQRYWQVZBVklIPDo5NxYzFjMjIhcZCgUWKwEeARURFA4BLwIuAScRPgE3Mzc+AQUWFxYXFhceAQcGDwEGJyYnNDc+AScmLwEmNzQ3NgUOAQcrARUzMhYfAREXHgIHBgcGIiY2Nz4BJi8BJjU0NzYB+A0QEhkLv3wNEQEBEw55wgUJARQSCwYKBQQ0HBkaPhARDA8BGDIhFBQ2AwIBBwj+TQYGBQRkZAkFBZS7HyoLDg8iCRsUAQ8VDRIXAwIHCAKrAhIN/agNEgMInwECEg0BCg4TAaAEA0ECCgYPCgVFsFRYPwIBBAQMDxo4mEpNNgkLCQwICKEFAgHIAgR7AcpOBEFeLjIhCREdERlDQhgJCwkMBwkAAAAE//T/agP3A1IAAAAYADMANgA0QDE2NQIDAgFHBQECAgBYBAEAAAxIAAMDAVgAAQENAUkaGQIBJyUZMxozDgwBGAIYBgUUKwExFhcWFxYXFgYHDgEHIicuAicmNjc+ARcGBwYHBgcGHgEXHgEzNjc+Ajc2JyYnJicmEwURAfdxamdHSRYXTllFt2FkWk+BUwwQT1VFuFttZWNERhUPGEk6QrFdYFZMfE8KDSEgRUZdWpT+cANSATY2W11wevdWQkgBJSF3m1V151JDSRQBNDNYWmtOoZA3QEQBJCB0l1JlZWNPUCko/iD6AfQAAAT/9P9qA/cDUgAXADAANAA4AFBATQsHCgMFAgQCBQRtBgEEAwIEA2sJAQICAFgIAQAADEgAAwMBWAABAQ0BSTU1MTEZGAEANTg1ODc2MTQxNDMyJSMYMBkwDQsAFwEXDAUUKwEWFxYXFhcWBgcOAQciJy4CJyY2Nz4BFwYHBgcGBwYWFx4BFzI3PgI3NicmJy4BAxEjESERIxEB93FqZ0dJFhdOWUW3YWRaT4FTDBBPVUW4W2xlY0RHFRdLVkKwXWBWTHxQCw4fHkNFuLxGASxGA1IBNjZbXXB691ZCSAElIXebVXXnUkNJFAE0M1ZaanbuU0BFASQfc5VRZGVkT1FW/vL+XAGk/lwBpAAE//v/qAPsAxQAFQAvAD8ASgBUQFE7NAIFBAFHCAEEAgUCBAVtCQEFAwIFA2sGAQAHAQIEAAJgAAMBAQNUAAMDAVkAAQMBTUFAMDAXFgEAQEpBSjA/MD8lHxYvFy8NCgAVARUKBRQrAR4BFxYTFxYGBwYHIS4BJyY/ARI3NhcOAQcGAwcGHgEXFiU2Mz4CJyYnJi8BLgEDMhcWFxUUBicmPQE0Nz4BEx4BBgcGJy4BNzYB9hgqDWjLYxAMGBok/NYgNAcIEXq8YB0zEh8KXLOGDAkkGrQBabRaGCYMDU1lPXssCiAQBgYWAiYRFAIEEQ8SEwUMDRUTDAoLAxQBGRSr/qaoHUMXGQEBLiEjH88BP54uGQESD5f+z+QVMiQBBAMBASIxF4qqZstIEBL++QMIGtUSFQYHGtUIBA0N/qEBIywMDQgHMBQWAAAAAAEAAAABAABrmkE9Xw889QALA+gAAAAA2RzcogAAAADZHNyi//T/agYjA1IAAAAIAAIAAAAAAAAAAQAAA1L/agAABiP/9P/xBiMAAQAAAAAAAAAAAAAAAAAAABID6AAAA+gAAAPoAAAD6AAAA+gAAAYjAAAD6AAAA+gAAAPoAAAD6AAAA+gAAAPoAAAD6AAAA+gAAAPoAAAD6P/0A+j/9APo//sAAAAAAFIA0gFOAYIBuAHoAqADFANSBRwFWAXOBlAHCgeACAYIqwAAAAEAAAASAQEABQAAAAAAAgAeAC4AcwAAAJILcAAAAAAAAAASAN4AAQAAAAAAAAA1AAAAAQAAAAAAAQAIADUAAQAAAAAAAgAHAD0AAQAAAAAAAwAIAEQAAQAAAAAABAAIAEwAAQAAAAAABQALAFQAAQAAAAAABgAIAF8AAQAAAAAACgArAGcAAQAAAAAACwATAJIAAwABBAkAAABqAKUAAwABBAkAAQAQAQ8AAwABBAkAAgAOAR8AAwABBAkAAwAQAS0AAwABBAkABAAQAT0AAwABBAkABQAWAU0AAwABBAkABgAQAWMAAwABBAkACgBWAXMAAwABBAkACwAmAclDb3B5cmlnaHQgKEMpIDIwMTkgYnkgb3JpZ2luYWwgYXV0aG9ycyBAIGZvbnRlbGxvLmNvbWZvbnRlbGxvUmVndWxhcmZvbnRlbGxvZm9udGVsbG9WZXJzaW9uIDEuMGZvbnRlbGxvR2VuZXJhdGVkIGJ5IHN2ZzJ0dGYgZnJvbSBGb250ZWxsbyBwcm9qZWN0Lmh0dHA6Ly9mb250ZWxsby5jb20AQwBvAHAAeQByAGkAZwBoAHQAIAAoAEMAKQAgADIAMAAxADkAIABiAHkAIABvAHIAaQBnAGkAbgBhAGwAIABhAHUAdABoAG8AcgBzACAAQAAgAGYAbwBuAHQAZQBsAGwAbwAuAGMAbwBtAGYAbwBuAHQAZQBsAGwAbwBSAGUAZwB1AGwAYQByAGYAbwBuAHQAZQBsAGwAbwBmAG8AbgB0AGUAbABsAG8AVgBlAHIAcwBpAG8AbgAgADEALgAwAGYAbwBuAHQAZQBsAGwAbwBHAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAHMAdgBnADIAdAB0AGYAIABmAHIAbwBtACAARgBvAG4AdABlAGwAbABvACAAcAByAG8AagBlAGMAdAAuAGgAdAB0AHAAOgAvAC8AZgBvAG4AdABlAGwAbABvAC4AYwBvAG0AAAAAAgAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASAQIBAwEEAQUBBgEHAQgBCQEKAQsBDAENAQ4BDwEQAREBEgETAA9pYy1wbGF5ZXItY2xvc2UdaWMtcGxheWVyLWZ1bGxzY3JlZW4tY29tcHJlc3MbaWMtcGxheWVyLWZ1bGxzY3JlZW4tZXhwYW5kDmljLXBsYXllci1sZWZ0E2ljLXBsYXllci1ub24tdGh1bWIOaWMtcGxheWVyLXBsYXkSaWMtcGxheWVyLXBsYXlsaXN0EmljLXBsYXllci1yZS1sYXJnZQ9pYy1wbGF5ZXItcmlnaHQRaWMtcGxheWVyLXNldHRpbmcOaWMtcGxheWVyLXN0b3ASaWMtcGxheWVyLXZvbHVtZS0yFWljLXBsYXllci12b2x1bWUtbXV0ZRBpYy1wbGF5ZXItdm9sdW1lFGljLXBsYXllci1wbGF5LWxhcmdlFGljLXBsYXllci1zdG9wLWxhcmdlEWljLXBsYXllci13YXJuaW5nAAAAAAABAAH//wAPAAAAAAAAAAAAAAAAAAAAAAAYABgAGAAYA1L/agNS/2qwACwgsABVWEVZICBLuAAOUUuwBlNaWLA0G7AoWWBmIIpVWLACJWG5CAAIAGNjI2IbISGwAFmwAEMjRLIAAQBDYEItsAEssCBgZi2wAiwgZCCwwFCwBCZasigBCkNFY0VSW1ghIyEbilggsFBQWCGwQFkbILA4UFghsDhZWSCxAQpDRWNFYWSwKFBYIbEBCkNFY0UgsDBQWCGwMFkbILDAUFggZiCKimEgsApQWGAbILAgUFghsApgGyCwNlBYIbA2YBtgWVlZG7ABK1lZI7AAUFhlWVktsAMsIEUgsAQlYWQgsAVDUFiwBSNCsAYjQhshIVmwAWAtsAQsIyEjISBksQViQiCwBiNCsQEKQ0VjsQEKQ7ABYEVjsAMqISCwBkMgiiCKsAErsTAFJbAEJlFYYFAbYVJZWCNZISCwQFNYsAErGyGwQFkjsABQWGVZLbAFLLAHQyuyAAIAQ2BCLbAGLLAHI0IjILAAI0JhsAJiZrABY7ABYLAFKi2wBywgIEUgsAtDY7gEAGIgsABQWLBAYFlmsAFjYESwAWAtsAgssgcLAENFQiohsgABAENgQi2wCSywAEMjRLIAAQBDYEItsAosICBFILABKyOwAEOwBCVgIEWKI2EgZCCwIFBYIbAAG7AwUFiwIBuwQFlZI7AAUFhlWbADJSNhRESwAWAtsAssICBFILABKyOwAEOwBCVgIEWKI2EgZLAkUFiwABuwQFkjsABQWGVZsAMlI2FERLABYC2wDCwgsAAjQrILCgNFWCEbIyFZKiEtsA0ssQICRbBkYUQtsA4ssAFgICCwDENKsABQWCCwDCNCWbANQ0qwAFJYILANI0JZLbAPLCCwEGJmsAFjILgEAGOKI2GwDkNgIIpgILAOI0IjLbAQLEtUWLEEZERZJLANZSN4LbARLEtRWEtTWLEEZERZGyFZJLATZSN4LbASLLEAD0NVWLEPD0OwAWFCsA8rWbAAQ7ACJUKxDAIlQrENAiVCsAEWIyCwAyVQWLEBAENgsAQlQoqKIIojYbAOKiEjsAFhIIojYbAOKiEbsQEAQ2CwAiVCsAIlYbAOKiFZsAxDR7ANQ0dgsAJiILAAUFiwQGBZZrABYyCwC0NjuAQAYiCwAFBYsEBgWWawAWNgsQAAEyNEsAFDsAA+sgEBAUNgQi2wEywAsQACRVRYsA8jQiBFsAsjQrAKI7ABYEIgYLABYbUQEAEADgBCQopgsRIGK7ByKxsiWS2wFCyxABMrLbAVLLEBEystsBYssQITKy2wFyyxAxMrLbAYLLEEEystsBkssQUTKy2wGiyxBhMrLbAbLLEHEystsBwssQgTKy2wHSyxCRMrLbAeLACwDSuxAAJFVFiwDyNCIEWwCyNCsAojsAFgQiBgsAFhtRAQAQAOAEJCimCxEgYrsHIrGyJZLbAfLLEAHistsCAssQEeKy2wISyxAh4rLbAiLLEDHistsCMssQQeKy2wJCyxBR4rLbAlLLEGHistsCYssQceKy2wJyyxCB4rLbAoLLEJHistsCksIDywAWAtsCosIGCwEGAgQyOwAWBDsAIlYbABYLApKiEtsCsssCorsCoqLbAsLCAgRyAgsAtDY7gEAGIgsABQWLBAYFlmsAFjYCNhOCMgilVYIEcgILALQ2O4BABiILAAUFiwQGBZZrABY2AjYTgbIVktsC0sALEAAkVUWLABFrAsKrABFTAbIlktsC4sALANK7EAAkVUWLABFrAsKrABFTAbIlktsC8sIDWwAWAtsDAsALABRWO4BABiILAAUFiwQGBZZrABY7ABK7ALQ2O4BABiILAAUFiwQGBZZrABY7ABK7AAFrQAAAAAAEQ+IzixLwEVKi2wMSwgPCBHILALQ2O4BABiILAAUFiwQGBZZrABY2CwAENhOC2wMiwuFzwtsDMsIDwgRyCwC0NjuAQAYiCwAFBYsEBgWWawAWNgsABDYbABQ2M4LbA0LLECABYlIC4gR7AAI0KwAiVJiopHI0cjYSBYYhshWbABI0KyMwEBFRQqLbA1LLAAFrAEJbAEJUcjRyNhsAlDK2WKLiMgIDyKOC2wNiywABawBCWwBCUgLkcjRyNhILAEI0KwCUMrILBgUFggsEBRWLMCIAMgG7MCJgMaWUJCIyCwCEMgiiNHI0cjYSNGYLAEQ7ACYiCwAFBYsEBgWWawAWNgILABKyCKimEgsAJDYGQjsANDYWRQWLACQ2EbsANDYFmwAyWwAmIgsABQWLBAYFlmsAFjYSMgILAEJiNGYTgbI7AIQ0awAiWwCENHI0cjYWAgsARDsAJiILAAUFiwQGBZZrABY2AjILABKyOwBENgsAErsAUlYbAFJbACYiCwAFBYsEBgWWawAWOwBCZhILAEJWBkI7ADJWBkUFghGyMhWSMgILAEJiNGYThZLbA3LLAAFiAgILAFJiAuRyNHI2EjPDgtsDgssAAWILAII0IgICBGI0ewASsjYTgtsDkssAAWsAMlsAIlRyNHI2GwAFRYLiA8IyEbsAIlsAIlRyNHI2EgsAUlsAQlRyNHI2GwBiWwBSVJsAIlYbkIAAgAY2MjIFhiGyFZY7gEAGIgsABQWLBAYFlmsAFjYCMuIyAgPIo4IyFZLbA6LLAAFiCwCEMgLkcjRyNhIGCwIGBmsAJiILAAUFiwQGBZZrABYyMgIDyKOC2wOywjIC5GsAIlRlJYIDxZLrErARQrLbA8LCMgLkawAiVGUFggPFkusSsBFCstsD0sIyAuRrACJUZSWCA8WSMgLkawAiVGUFggPFkusSsBFCstsD4ssDUrIyAuRrACJUZSWCA8WS6xKwEUKy2wPyywNiuKICA8sAQjQoo4IyAuRrACJUZSWCA8WS6xKwEUK7AEQy6wKystsEAssAAWsAQlsAQmIC5HI0cjYbAJQysjIDwgLiM4sSsBFCstsEEssQgEJUKwABawBCWwBCUgLkcjRyNhILAEI0KwCUMrILBgUFggsEBRWLMCIAMgG7MCJgMaWUJCIyBHsARDsAJiILAAUFiwQGBZZrABY2AgsAErIIqKYSCwAkNgZCOwA0NhZFBYsAJDYRuwA0NgWbADJbACYiCwAFBYsEBgWWawAWNhsAIlRmE4IyA8IzgbISAgRiNHsAErI2E4IVmxKwEUKy2wQiywNSsusSsBFCstsEMssDYrISMgIDywBCNCIzixKwEUK7AEQy6wKystsEQssAAVIEewACNCsgABARUUEy6wMSotsEUssAAVIEewACNCsgABARUUEy6wMSotsEYssQABFBOwMiotsEcssDQqLbBILLAAFkUjIC4gRoojYTixKwEUKy2wSSywCCNCsEgrLbBKLLIAAEErLbBLLLIAAUErLbBMLLIBAEErLbBNLLIBAUErLbBOLLIAAEIrLbBPLLIAAUIrLbBQLLIBAEIrLbBRLLIBAUIrLbBSLLIAAD4rLbBTLLIAAT4rLbBULLIBAD4rLbBVLLIBAT4rLbBWLLIAAEArLbBXLLIAAUArLbBYLLIBAEArLbBZLLIBAUArLbBaLLIAAEMrLbBbLLIAAUMrLbBcLLIBAEMrLbBdLLIBAUMrLbBeLLIAAD8rLbBfLLIAAT8rLbBgLLIBAD8rLbBhLLIBAT8rLbBiLLA3Ky6xKwEUKy2wYyywNyuwOystsGQssDcrsDwrLbBlLLAAFrA3K7A9Ky2wZiywOCsusSsBFCstsGcssDgrsDsrLbBoLLA4K7A8Ky2waSywOCuwPSstsGossDkrLrErARQrLbBrLLA5K7A7Ky2wbCywOSuwPCstsG0ssDkrsD0rLbBuLLA6Ky6xKwEUKy2wbyywOiuwOystsHAssDorsDwrLbBxLLA6K7A9Ky2wciyzCQQCA0VYIRsjIVlCK7AIZbADJFB4sAEVMC0AS7gAyFJYsQEBjlmwAbkIAAgAY3CxAAVCsgABACqxAAVCswoCAQgqsQAFQrMOAAEIKrEABkK6AsAAAQAJKrEAB0K6AEAAAQAJKrEDAESxJAGIUViwQIhYsQNkRLEmAYhRWLoIgAABBECIY1RYsQMARFlZWVmzDAIBDCq4Af+FsASNsQIARAAA"},5986:function(e){"use strict";e.exports="data:font/ttf;base64,AAEAAAAPAIAAAwBwR1NVQiCLJXoAAAD8AAAAVE9TLzI/QEsYAAABUAAAAFZjbWFwjePtyQAAAagAAAF+Y3Z0IAAAAAAAAAh4AAAADmZwZ21iLvl6AAAIiAAADgxnYXNwAAAAEAAACHAAAAAIZ2x5ZuLwowoAAAMoAAABiGhlYWQaqKjBAAAEsAAAADZoaGVhBzwDVgAABOgAAAAkaG10eAu4AAAAAAUMAAAADGxvY2EAYADEAAAFGAAAAAhtYXhwAPIOYwAABSAAAAAgbmFtZV/m2rgAAAVAAAAC5XBvc3S0mWDXAAAIKAAAAEhwcmVwfrY7tgAAFpQAAACcAAEAAAAKADAAPgACREZMVAAObGF0bgAaAAQAAAAAAAAAAQAAAAQAAAAAAAAAAQAAAAFsaWdhAAgAAAABAAAAAQAEAAQAAAABAAgAAQAGAAAAAQAAAAED6AGQAAUAAAJ6ArwAAACMAnoCvAAAAeAAMQECAAACAAUDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFBmRWQAwOkg6SEDUv9qAFoDUgCWAAAAAQAAAAAAAAAAAAUAAAADAAAALAAAAAQAAAFWAAEAAAAAAFAAAwABAAAALAADAAoAAAFWAAQAJAAAAAQABAABAADpIf//AADpIP//AAAAAQAEAAAAAQACAAABBgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAoAAAAAAAAAAIAAOkgAADpIAAAAAEAAOkhAADpIQAAAAIAAAABAAD/7wNjAy0AKQA/QDwCAQAEAwECAAJMAQEESgACAAEAAgGABQEEAAACBABpAAEDAwFZAAEBA2EAAwEDUQAAACkAKRcXGRQGBhorATUHFzUeARcWFRQHBgcGIicmJyY1NCYiBhUUFxYXFjI3Njc2NTQnJicmAguWlkx/JSUpKENGpEZDKCkTHBQyMVNWxlZTMTIvLU5QAsxhiolvBVNCQ05SRkMoKSkoQ0ZSDhMUDWNWUzEyMjFTVmNfU1EyMwABAAD/7wNjAy0AKgBDQEAVAQIDFAEAAgJMFgEDSgUBAAIBAgABgAADAAIAAwJpAAEEBAFZAAEBBGEABAEEUQEAIyIYFxMSCQgAKgEqBgYWKwEiBhUUBwYHBiInJicmNTQ3PgE3FTcnFQYHBgcGFRQXFhcWMjc2NzY1NCYDQQ0UKShDRqRGQygpJiR/TJaWXlBOLS8yMVNWxlZTMTIUAX8TDlJGQygpKShDRlJOQ0JTBW+JimEGMzJRU19jVlMxMjIxU1ZjDhMAAAEAAAABAADSnNS7Xw889QAPA+gAAAAA286yYAAAAADbzrJgAAD/7wPoAy0AAAAIAAIAAAAAAAAAAQAAA1L/agAAA+gAAAAAA+gAAQAAAAAAAAAAAAAAAAAAAAMD6AAAA+gAAAPoAAAAAAAAAGAAxAABAAAAAwArAAEAAAAAAAIADAAqAI0AAABUDgwAAAAAAAAAEgDeAAEAAAAAAAAANQAAAAEAAAAAAAEACgA1AAEAAAAAAAIABwA/AAEAAAAAAAMACgBGAAEAAAAAAAQACgBQAAEAAAAAAAUACwBaAAEAAAAAAAYACgBlAAEAAAAAAAoAKwBvAAEAAAAAAAsAEwCaAAMAAQQJAAAAagCtAAMAAQQJAAEAFAEXAAMAAQQJAAIADgErAAMAAQQJAAMAFAE5AAMAAQQJAAQAFAFNAAMAAQQJAAUAFgFhAAMAAQQJAAYAFAF3AAMAAQQJAAoAVgGLAAMAAQQJAAsAJgHhQ29weXJpZ2h0IChDKSAyMDIwIGJ5IG9yaWdpbmFsIGF1dGhvcnMgQCBmb250ZWxsby5jb21zZWVrLWljb25zUmVndWxhcnNlZWstaWNvbnNzZWVrLWljb25zVmVyc2lvbiAxLjBzZWVrLWljb25zR2VuZXJhdGVkIGJ5IHN2ZzJ0dGYgZnJvbSBGb250ZWxsbyBwcm9qZWN0Lmh0dHA6Ly9mb250ZWxsby5jb20AQwBvAHAAeQByAGkAZwBoAHQAIAAoAEMAKQAgADIAMAAyADAAIABiAHkAIABvAHIAaQBnAGkAbgBhAGwAIABhAHUAdABoAG8AcgBzACAAQAAgAGYAbwBuAHQAZQBsAGwAbwAuAGMAbwBtAHMAZQBlAGsALQBpAGMAbwBuAHMAUgBlAGcAdQBsAGEAcgBzAGUAZQBrAC0AaQBjAG8AbgBzAHMAZQBlAGsALQBpAGMAbwBuAHMAVgBlAHIAcwBpAG8AbgAgADEALgAwAHMAZQBlAGsALQBpAGMAbwBuAHMARwBlAG4AZQByAGEAdABlAGQAIABiAHkAIABzAHYAZwAyAHQAdABmACAAZgByAG8AbQAgAEYAbwBuAHQAZQBsAGwAbwAgAHAAcgBvAGoAZQBjAHQALgBoAHQAdABwADoALwAvAGYAbwBuAHQAZQBsAGwAbwAuAGMAbwBtAAAAAAIAAAAAAAAACgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwECAQMBBAAMb3Atc2Vlay1iYWNrD29wLXNlZWstZm9yd2FyZAAAAAEAAf//AA8AAAAAAAAAAAAAAAAAAAAAsAAsILAAVVhFWSAgS7gADlFLsAZTWliwNBuwKFlgZiCKVViwAiVhuQgACABjYyNiGyEhsABZsABDI0SyAAEAQ2BCLbABLLAgYGYtsAIsIyEjIS2wAywgZLMDFBUAQkOwE0MgYGBCsQIUQ0KxJQNDsAJDVHggsAwjsAJDQ2FksARQeLICAgJDYEKwIWUcIbACQ0OyDhUBQhwgsAJDI0KyEwETQ2BCI7AAUFhlWbIWAQJDYEItsAQssAMrsBVDWCMhIyGwFkNDI7AAUFhlWRsgZCCwwFCwBCZasigBDUNFY0WwBkVYIbADJVlSW1ghIyEbilggsFBQWCGwQFkbILA4UFghsDhZWSCxAQ1DRWNFYWSwKFBYIbEBDUNFY0UgsDBQWCGwMFkbILDAUFggZiCKimEgsApQWGAbILAgUFghsApgGyCwNlBYIbA2YBtgWVlZG7ACJbAMQ2OwAFJYsABLsApQWCGwDEMbS7AeUFghsB5LYbgQAGOwDENjuAUAYllZZGFZsAErWVkjsABQWGVZWSBksBZDI0JZLbAFLCBFILAEJWFkILAHQ1BYsAcjQrAII0IbISFZsAFgLbAGLCMhIyGwAysgZLEHYkIgsAgjQrAGRVgbsQENQ0VjsQENQ7AAYEVjsAUqISCwCEMgiiCKsAErsTAFJbAEJlFYYFAbYVJZWCNZIVkgsEBTWLABKxshsEBZI7AAUFhlWS2wByywCUMrsgACAENgQi2wCCywCSNCIyCwACNCYbACYmawAWOwAWCwByotsAksICBFILAOQ2O4BABiILAAUFiwQGBZZrABY2BEsAFgLbAKLLIJDgBDRUIqIbIAAQBDYEItsAsssABDI0SyAAEAQ2BCLbAMLCAgRSCwASsjsABDsAQlYCBFiiNhIGQgsCBQWCGwABuwMFBYsCAbsEBZWSOwAFBYZVmwAyUjYUREsAFgLbANLCAgRSCwASsjsABDsAQlYCBFiiNhIGSwJFBYsAAbsEBZI7AAUFhlWbADJSNhRESwAWAtsA4sILAAI0KzDQwAA0VQWCEbIyFZKiEtsA8ssQICRbBkYUQtsBAssAFgICCwD0NKsABQWCCwDyNCWbAQQ0qwAFJYILAQI0JZLbARLCCwEGJmsAFjILgEAGOKI2GwEUNgIIpgILARI0IjLbASLEtUWLEEZERZJLANZSN4LbATLEtRWEtTWLEEZERZGyFZJLATZSN4LbAULLEAEkNVWLESEkOwAWFCsBErWbAAQ7ACJUKxDwIlQrEQAiVCsAEWIyCwAyVQWLEBAENgsAQlQoqKIIojYbAQKiEjsAFhIIojYbAQKiEbsQEAQ2CwAiVCsAIlYbAQKiFZsA9DR7AQQ0dgsAJiILAAUFiwQGBZZrABYyCwDkNjuAQAYiCwAFBYsEBgWWawAWNgsQAAEyNEsAFDsAA+sgEBAUNgQi2wFSwAsQACRVRYsBIjQiBFsA4jQrANI7AAYEIgYLcYGAEAEQATAEJCQopgILAUI0KwAWGxFAgrsIsrGyJZLbAWLLEAFSstsBcssQEVKy2wGCyxAhUrLbAZLLEDFSstsBossQQVKy2wGyyxBRUrLbAcLLEGFSstsB0ssQcVKy2wHiyxCBUrLbAfLLEJFSstsCssIyCwEGJmsAFjsAZgS1RYIyAusAFdGyEhWS2wLCwjILAQYmawAWOwFmBLVFgjIC6wAXEbISFZLbAtLCMgsBBiZrABY7AmYEtUWCMgLrABchshIVktsCAsALAPK7EAAkVUWLASI0IgRbAOI0KwDSOwAGBCIGCwAWG1GBgBABEAQkKKYLEUCCuwiysbIlktsCEssQAgKy2wIiyxASArLbAjLLECICstsCQssQMgKy2wJSyxBCArLbAmLLEFICstsCcssQYgKy2wKCyxByArLbApLLEIICstsCossQkgKy2wLiwgPLABYC2wLywgYLAYYCBDI7ABYEOwAiVhsAFgsC4qIS2wMCywLyuwLyotsDEsICBHICCwDkNjuAQAYiCwAFBYsEBgWWawAWNgI2E4IyCKVVggRyAgsA5DY7gEAGIgsABQWLBAYFlmsAFjYCNhOBshWS2wMiwAsQACRVRYsQ4GRUKwARawMSqxBQEVRVgwWRsiWS2wMywAsA8rsQACRVRYsQ4GRUKwARawMSqxBQEVRVgwWRsiWS2wNCwgNbABYC2wNSwAsQ4GRUKwAUVjuAQAYiCwAFBYsEBgWWawAWOwASuwDkNjuAQAYiCwAFBYsEBgWWawAWOwASuwABa0AAAAAABEPiM4sTQBFSohLbA2LCA8IEcgsA5DY7gEAGIgsABQWLBAYFlmsAFjYLAAQ2E4LbA3LC4XPC2wOCwgPCBHILAOQ2O4BABiILAAUFiwQGBZZrABY2CwAENhsAFDYzgtsDkssQIAFiUgLiBHsAAjQrACJUmKikcjRyNhIFhiGyFZsAEjQrI4AQEVFCotsDossAAWsBcjQrAEJbAEJUcjRyNhsQwAQrALQytlii4jICA8ijgtsDsssAAWsBcjQrAEJbAEJSAuRyNHI2EgsAYjQrEMAEKwC0MrILBgUFggsEBRWLMEIAUgG7MEJgUaWUJCIyCwCkMgiiNHI0cjYSNGYLAGQ7ACYiCwAFBYsEBgWWawAWNgILABKyCKimEgsARDYGQjsAVDYWRQWLAEQ2EbsAVDYFmwAyWwAmIgsABQWLBAYFlmsAFjYSMgILAEJiNGYTgbI7AKQ0awAiWwCkNHI0cjYWAgsAZDsAJiILAAUFiwQGBZZrABY2AjILABKyOwBkNgsAErsAUlYbAFJbACYiCwAFBYsEBgWWawAWOwBCZhILAEJWBkI7ADJWBkUFghGyMhWSMgILAEJiNGYThZLbA8LLAAFrAXI0IgICCwBSYgLkcjRyNhIzw4LbA9LLAAFrAXI0IgsAojQiAgIEYjR7ABKyNhOC2wPiywABawFyNCsAMlsAIlRyNHI2GwAFRYLiA8IyEbsAIlsAIlRyNHI2EgsAUlsAQlRyNHI2GwBiWwBSVJsAIlYbkIAAgAY2MjIFhiGyFZY7gEAGIgsABQWLBAYFlmsAFjYCMuIyAgPIo4IyFZLbA/LLAAFrAXI0IgsApDIC5HI0cjYSBgsCBgZrACYiCwAFBYsEBgWWawAWMjICA8ijgtsEAsIyAuRrACJUawF0NYUBtSWVggPFkusTABFCstsEEsIyAuRrACJUawF0NYUhtQWVggPFkusTABFCstsEIsIyAuRrACJUawF0NYUBtSWVggPFkjIC5GsAIlRrAXQ1hSG1BZWCA8WS6xMAEUKy2wQyywOisjIC5GsAIlRrAXQ1hQG1JZWCA8WS6xMAEUKy2wRCywOyuKICA8sAYjQoo4IyAuRrACJUawF0NYUBtSWVggPFkusTABFCuwBkMusDArLbBFLLAAFrAEJbAEJiAgIEYjR2GwDCNCLkcjRyNhsAtDKyMgPCAuIzixMAEUKy2wRiyxCgQlQrAAFrAEJbAEJSAuRyNHI2EgsAYjQrEMAEKwC0MrILBgUFggsEBRWLMEIAUgG7MEJgUaWUJCIyBHsAZDsAJiILAAUFiwQGBZZrABY2AgsAErIIqKYSCwBENgZCOwBUNhZFBYsARDYRuwBUNgWbADJbACYiCwAFBYsEBgWWawAWNhsAIlRmE4IyA8IzgbISAgRiNHsAErI2E4IVmxMAEUKy2wRyyxADorLrEwARQrLbBILLEAOyshIyAgPLAGI0IjOLEwARQrsAZDLrAwKy2wSSywABUgR7AAI0KyAAEBFRQTLrA2Ki2wSiywABUgR7AAI0KyAAEBFRQTLrA2Ki2wSyyxAAEUE7A3Ki2wTCywOSotsE0ssAAWRSMgLiBGiiNhOLEwARQrLbBOLLAKI0KwTSstsE8ssgAARistsFAssgABRistsFEssgEARistsFIssgEBRistsFMssgAARystsFQssgABRystsFUssgEARystsFYssgEBRystsFcsswAAAEMrLbBYLLMAAQBDKy2wWSyzAQAAQystsFosswEBAEMrLbBbLLMAAAFDKy2wXCyzAAEBQystsF0sswEAAUMrLbBeLLMBAQFDKy2wXyyyAABFKy2wYCyyAAFFKy2wYSyyAQBFKy2wYiyyAQFFKy2wYyyyAABIKy2wZCyyAAFIKy2wZSyyAQBIKy2wZiyyAQFIKy2wZyyzAAAARCstsGgsswABAEQrLbBpLLMBAABEKy2waiyzAQEARCstsGssswAAAUQrLbBsLLMAAQFEKy2wbSyzAQABRCstsG4sswEBAUQrLbBvLLEAPCsusTABFCstsHAssQA8K7BAKy2wcSyxADwrsEErLbByLLAAFrEAPCuwQistsHMssQE8K7BAKy2wdCyxATwrsEErLbB1LLAAFrEBPCuwQistsHYssQA9Ky6xMAEUKy2wdyyxAD0rsEArLbB4LLEAPSuwQSstsHkssQA9K7BCKy2weiyxAT0rsEArLbB7LLEBPSuwQSstsHwssQE9K7BCKy2wfSyxAD4rLrEwARQrLbB+LLEAPiuwQCstsH8ssQA+K7BBKy2wgCyxAD4rsEIrLbCBLLEBPiuwQCstsIIssQE+K7BBKy2wgyyxAT4rsEIrLbCELLEAPysusTABFCstsIUssQA/K7BAKy2whiyxAD8rsEErLbCHLLEAPyuwQistsIgssQE/K7BAKy2wiSyxAT8rsEErLbCKLLEBPyuwQistsIsssgsAA0VQWLAGG7IEAgNFWCMhGyFZWUIrsAhlsAMkUHixBQEVRVgwWS0AS7gAyFJYsQEBjlmwAbkIAAgAY3CxAAdCsQAAKrEAB0KxAAoqsQAHQrEACiqxAAdCuQAAAAsqsQAHQrkAAAALKrkAAwAARLEkAYhRWLBAiFi5AAMAZESxKAGIUVi4CACIWLkAAwAARFkbsScBiFFYugiAAAEEQIhjVFi5AAMAAERZWVlZWbEADiq4Af+FsASNsQIARLMFZAYAREQ="},8613:function(e){"use strict";e.exports="data:font/ttf;base64,AAEAAAALAIAAAwAwT1MvMg8SBjMAAAC8AAAAYGNtYXAXVtKQAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5Ztiu3OUAAAF4AAAEAGhlYWQOP/c1AAAFeAAAADZoaGVhCT8FzwAABbAAAAAkaG10eDAABnQAAAXUAAAAOGxvY2EGgAWAAAAGDAAAAB5tYXhwABMARAAABiwAAAAgbmFtZZlKCfsAAAZMAAABhnBvc3QAAwAAAAAH1AAAACAAAwQAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpCQPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qn//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAIkASQN3A5oAKAAAASIGFRQOAiMiLgI1ND4CNxU3JxUOAxUUHgIzMj4CNTQmIwNVDhQwU3BAQHBTMCxNZzuamkmAYDY7ZYlOTollOxQOAeIUDkBwUzAwU3BAPGxSNARyjY1jBT5lhEtOiWU7O2WJTg4UAAEAiQBJA3cDmgAoAAABNQcXNR4DFRQOAiMiLgI1NCYjIgYVFB4CMzI+AjU0LgInAhiamjtnTSwwU3BAQHBTMBQODhQ7ZYlOTollOzZggEkDN2ONjXIENFJsPEBwUzAwU3BADhQUDk6JZTs7ZYlOS4RlPgUABACDAOQFfQKbAAYACgATACAAABMRMxUhETMhESMRAQMzEzMTMwMjARUjFTMVIxUzFSERIb3p/t06AXg6ASWaPn4BfjycQQJb9eTk9/7PAS8Cm/57MQG2/koBtv5KAbb+hAF8/koBtjGLMpgxAbcAAAQATQBJA7MDNwAFAAsAEQAXAAAlITUzNTMFITUzFTMBIzUjNSEFIzUhFSMDs/7N70T9zf7NRO8CM0TvATP83kQBM+9JRKru7qoBvKpE7u5EAAAAAAIAkQBIA4EDNwAFACwAAAEFIxEzBRM3NjQnJiIPAScmIgcGFB8BBwYUFx4BMzI2PwEXHgEzMjY3NjQvAQJR/vy8vAEE400ICAgVB01NBxUHCAhMTAgIAwoEBQoDTU0ECQUECgQICE0DN+/+7+8Bd00IFQcHB01NBwcIFQdNTQcVBwQEBARMTAQEBAQHFQdNAAEA9wBJAxoDNwACAAATCQH3AiP93QM3/on+iQAEAE0ASQOzAzcABQALABEAFwAAJSM1IRUjBSM1IzUhASE1MxUzBSE1MzUzAsREATPv/rxE7wEzAjP+zUTv/c3+ze9ESe5EqqpEARLuqkREqgAAAAACAO8ASQMRAzcABAAIAAATMxEjESEzESPviIgBmoiIAzf9EgLu/RIAAgFEAI0CvALzAAIABQAAATcXFQcnAUS8vLy8AibNzczNzQAAAwCKAEkDjwM3AAUAJQBBAAABBSMRMwU3IiYnJjY3PgE1NCYnLgE3PgEXHgMVFA4CBw4BIyciJicmNjc+ATU0JicuATc+ARceARUUBgcOASMCS/77vLwBBY4IDQMECApATEtACQgEBBMKJz8sGRktQCcCBQIwBw0DBQgKGR4fGQoIBAUTCSgwLycCBQMDN+7+7u5xCAcKFAQbc0ZFdBsEEwoKCAQRNURPKipQQzYQAQF/CAgJFAULLhwcLwsFEwkKCAQSSCwrSBEBAQAAAQAAAAAAAHFIcIdfDzz1AAsEAAAAAADU0tlPAAAAANTS2U8AAAAABX0DmgAAAAgAAgAAAAAAAAABAAADwP/AAAAGAAAAAAAFfQABAAAAAAAAAAAAAAAAAAAADgQAAAAAAAAAAAAAAAIAAAAEAACJBAAAiQYAAIMEAABNBAAAkQQAAPcEAABNBAAA7wQAAUQEAACKAAAAAAAKABQAHgBYAJIAygD0ATwBSgF0AYgBmgIAAAAAAQAAAA4AQgAEAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGljb21vb24AaQBjAG8AbQBvAG8AblZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGljb21vb24AaQBjAG8AbQBvAG8Abmljb21vb24AaQBjAG8AbQBvAG8AblJlZ3VsYXIAUgBlAGcAdQBsAGEAcmljb21vb24AaQBjAG8AbQBvAG8AbkZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA="}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={id:r,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.b=document.baseURI||self.location.href,n(8594),n(7147);var r=n(8445);return r.default}()}));
//# sourceMappingURL=ovenplayer.js.map